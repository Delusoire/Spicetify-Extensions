import{anyPass as vt}from"https://esm.sh/fp-ts-std/Predicate";import{array as T,function as A}from"https://esm.sh/fp-ts";import{array as F,eq as lt,string as pt,record as wt,semigroup as Et,function as h}from"https://esm.sh/fp-ts";import{guard as ct,memoize as ut}from"https://esm.sh/fp-ts-std/Function";var C=t=>ct(t);var c=t=>async e=>t(await e),M=t=>e=>i=>i[t]===e;var d=t=>e=>h.flow(F.chunksOf(t),F.map(e),i=>Promise.all(i),c(F.flatten));var O=t=>h.pipe(t,h.tupled,ut(lt.contramap(JSON.stringify)(pt.Eq)),h.untupled);import{array as Nt,function as N}from"https://esm.sh/fp-ts";var D={before:{start:N.constant({before:"start"}),fromUri:t=>({before:{uri:t}}),fromUid:t=>({before:{uid:t}})},after:{end:N.constant({after:"end"}),fromUri:t=>({after:{uri:t}}),fromUid:t=>({after:{uid:t}})}};var H=t=>new Promise(e=>setTimeout(e,t));var _=async(t,e=0,i=487)=>(await Spicetify.GraphQL.Request(Spicetify.GraphQL.Definitions.getAlbum,{uri:t,locale:Spicetify.Locale.getLocale(),offset:e,limit:i})).data.albumUnion;var Vt=d(50)(async t=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/artists?ids=${t.join(",")}`)).artists),$t=d(1)(async([t])=>[await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/playlists/${t}`)]),Wt=d(50)(async t=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/albums?ids=${t.join(",")}`)).albums),zt=d(50)(async t=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/tracks?ids=${t.join(",")}`)).tracks);var G=async(t,e=0,i=100)=>(await Spicetify.Platform.LibraryAPI.getTracks({uri:t,offset:e,limit:i})).items,b=async t=>(await Spicetify.Platform.PlaylistAPI.getContents(t)).items,q=async(t,e={})=>await Spicetify.Platform.RootlistAPI.createFolder(t,e);var j=async(t,e={})=>await Spicetify.Platform.RootlistAPI.createPlaylist(t,e);var Q=async(t,e)=>await Spicetify.Platform.PlaylistPermissionsAPI.setBasePermission(t,e?"VIEWER":"BLOCKED");var V=async t=>await Spicetify.Platform.RootlistAPI.getContents({folderUri:t});var $=async(t,e,i={})=>await Spicetify.Platform.PlaylistAPI.add(t,e,i);var W=async(t,e)=>Spicetify.Platform.PlaylistAPI.remove(t,e);var dt=async(t,e,i,s="")=>{let n=new URL("https://ws.audioscrobbler.com/2.0/");return n.searchParams.append("method","track.getInfo"),n.searchParams.append("api_key",t),n.searchParams.append("artist",e),n.searchParams.append("track",i),n.searchParams.append("format","json"),n.searchParams.append("username",s),await fetch(n).then(r=>r.json())},Jt=O(dt);import{range as Rt}from"https://esm.sh/fp-ts/lib/ReadonlyNonEmptyArray";import{array as l,function as v}from"https://esm.sh/fp-ts";import{task as K}from"https://esm.sh/fp-ts";import{task as z}from"https://esm.sh/fp-ts";var{React:o,ReactDOM:yt}=Spicetify,{ButtonSecondary:mt}=Spicetify.ReactComponent,J=webpackChunkopen.push([[Symbol()],{},t=>t]),ft=Object.keys(J.m).map(t=>J(t)),gt=ft.filter(t=>typeof t=="object").map(t=>{try{return Object.values(t)}catch{}}).flat(),y=gt.filter(t=>typeof t=="function"),At=y.find(t=>/^function .\(.\)\{return\(0,.\.jsx\)\(/.test(t)),St=y.find(t=>t.toString().includes("textToHighlight")),ht=y.find(t=>t.toString().includes("setSectionFilterMatchQueryValue")&&t.toString().includes("filterMatchQuery")),bt=y.find(t=>t.toString().includes("textSubdued")&&t.toString().includes("viola")),xt=y.find(t=>t.toString().includes("condensed")&&t.toString().includes("onSelected"));var x=class t{constructor(e,i,s={}){this.name=e;this.id=i;this.sectionFields=s;this.pushSettings=()=>{this.stopHistoryListener&&this.stopHistoryListener(),this.stopHistoryListener=Spicetify.Platform.History.listen(()=>this.render()),this.render()};this.toObject=()=>new Proxy({},{get:(e,i)=>t.getFieldValue(this.getId(i.toString()))});this.render=async()=>{for(;!document.getElementById("desktop.settings.selectLanguage");){if(Spicetify.Platform.History.location.pathname!=="/preferences")return;await H(100)}let e=document.querySelector(".x-settings-container"),i=Array.from(e.children).find(({id:s})=>s===this.id);i||(i=document.createElement("div"),i.id=this.id,i.className="settingsContainer",e.appendChild(i)),yt.render(o.createElement(this.FieldsContainer,null),i)};this.addButton=e=>(this.addField("button",e),this);this.addToggle=(e,i=z.of(!1))=>(this.addField("toggle",e,i),this);this.addInput=(e,i=z.of(""))=>(this.addField("input",e,i),this);this.getId=e=>["extensions",this.id,e].join(":");this.useStateFor=e=>{let[i,s]=o.useState(t.getFieldValue(e));return[i,n=>{n!==void 0&&(s(n),t.setFieldValue(e,n))}]};this.FieldsContainer=()=>o.createElement(At,{filterMatchQuery:this.name},o.createElement(St,null,this.name),Object.values(this.sectionFields).map(e=>{let i=M("type");return C([[i("input"),this.InputField],[i("button"),this.ButtonField],[i("toggle"),this.ToggleField]])(()=>o.createElement(o.Fragment,null))(e)}));this.SettingField=({field:e,children:i})=>o.createElement(ht,{filterMatchQuery:e.id},o.createElement("div",{className:"x-settings-firstColumn"},o.createElement(bt,{htmlFor:e.id},e.desc)),o.createElement("div",{className:"x-settings-secondColumn"},i));this.ButtonField=e=>o.createElement(this.SettingField,{field:e},o.createElement(mt,{id:e.id,buttonSize:"sm",onClick:e.onClick,className:"x-settings-button"},e.text));this.ToggleField=e=>{let[i,s]=this.useStateFor(e.id);return o.createElement(this.SettingField,{field:e},o.createElement(xt,{id:e.id,value:t.getFieldValue(this.getId(e.id)),onSelected:n=>{s(n),e.onSelected?.(n)},className:"x-settings-button"}))};this.InputField=e=>{let[i,s]=this.useStateFor(e.id);return o.createElement(this.SettingField,{field:e},o.createElement("input",{className:"x-settings-input",id:e.id,dir:"ltr",value:t.getFieldValue(this.getId(e.id)),type:e.inputType,onChange:n=>{let r=n.currentTarget.value;s(r),e.onChange?.(r)}}))}}addField(e,i,s){if(s!==void 0){let r=this.getId(i.id);t.setDefaultFieldValue(r,s)}let n=Object.assign({},i,{type:e});this.sectionFields[i.id]=n}static{this.getFieldValue=e=>JSON.parse(Spicetify.LocalStorage.get(e)??"null")}static{this.setFieldValue=(e,i)=>Spicetify.LocalStorage.set(e,JSON.stringify(i))}static{this.setDefaultFieldValue=async(e,i)=>{t.getFieldValue(e)===null&&t.setFieldValue(e,await i())}}};var Pt="Ratings",Y=new x("Star Ratings 2","star-ratings-2").addInput({id:"heartThreshold",desc:"Threshold for liking trakcs",inputType:"number"},K.of("3")).addInput({id:"skipThreshold",desc:"Threshold for skipping trakcs",inputType:"number"},K.of("1")).addInput({id:"ratingsFolderUri",desc:"Ratings folder uri",inputType:"text",onChange:P},async()=>(await q(Pt)).uri);Y.pushSettings();var u=Y.toObject();var P=async()=>{let t=await V(u.ratingsFolderUri);m=v.pipe(t.items,l.map(e=>[e.uri,Number(e.name)]),l.reduce([],(e,[i,s])=>(e[s]=i,e))),globalThis.tracksRatings=p=await v.pipe(m,l.map(b),e=>Promise.all(e),c(l.map(e=>e??[])),c(l.map(l.map(e=>e.uri))),c(l.flatMap((e,i)=>e.map(s=>[s,i]))),c(l.reduce({},(e,[i,s])=>Object.assign(e,{[i]:Math.max(s,e[i]??0)}))))},X=async(t,e)=>{let i=p[t];if(i===e&&(e=0),i&&v.pipe(m.slice(0,i+1),l.filter(Boolean),l.map(r=>Spicetify.URI.fromString(r).id),l.map(r=>W(r,[{uri:t,uid:""}]))),p[t]=e,e>0){let r=m[e];r||(r=await j(e.toFixed(0),D.after.fromUri(u.ratingsFolderUri)),Q(r,!1),m[e]=r),$(r,[t])}let s=Spicetify.Player.data.track?.uri;s===t&&f(s,!1),R();let{pathname:n}=Spicetify.Platform.History.location;I(Spicetify.URI.fromString(n))},m=[],p={};var{React:g}=Spicetify,It=({i:t,uri:e})=>g.createElement("button",{className:"Button-sc-1dqy6lx-0 Button-textBrightAccent-sm-16-buttonTertiary-iconOnly-condensed-isUsingKeyboard-useBrowserDefaultFocusStyle rating-button",onClick:()=>X(e,t)},g.createElement("svg",{role:"img",height:16,width:16,viewBox:"0 0 16 16",className:`Svg-sc-ytk21e-0 Svg-img-icon rating-${t}`},g.createElement("path",{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm11.748-1.97a.75.75 0 0 0-1.06-1.06l-4.47 4.47-1.405-1.406a.75.75 0 1 0-1.061 1.06l2.466 2.467 5.53-5.53z"}))),Z=({uri:t})=>g.createElement("div",{className:"rating-dropdown"},Rt(1,5).map(e=>g.createElement(It,{i:e,uri:t})));var tt=()=>Array.from(document.querySelectorAll(".main-trackList-indexable")),et=t=>Array.from(t.querySelectorAll("div.main-trackList-trackListRow")),it=t=>(t=Object.values(t)[0].child.child.child.child,t.pendingProps.uri??t.child.pendingProps.uri),rt=()=>document.querySelector("div.main-nowPlayingBar-nowPlayingBar"),Tt=()=>document.querySelector("div.main-actionBar-ActionBarRow"),Lt='button[aria-label="Add to Liked Songs"], button[aria-label="Add to playlist"]',U=t=>t.querySelector(Lt),nt=()=>Tt().querySelector('button[aria-label="Remove from Your Library"], button[aria-label="Save to Your Library"]');var{URI:S}=Spicetify,{React:kt,ReactDOM:Ft}=Spicetify,st=["unset","#ED5564","#FFCE54","A0D568","#4FC1E8","#AC92EB"],B=(t,e)=>{if(t.style.fill===st[e])return;t.style.opacity=e>0?"1":"unset";let i=t.querySelector("svg");i.style.fill=st[e]},w,ot=(t,e,i=!1)=>{if(t.hasAttribute("dropdown-enabled")){if(!i)return}else t.setAttribute("dropdown-enabled","");let s=document.createElement("div");i&&(w?.outerHTML&&(w.outerHTML=""),w=s),t.appendChild(s),Ft.render(kt.createElement(Z,{uri:e}),s),Spicetify.Tippy(t,{content:s,interactive:!0,animateFill:!1,placement:"left",animation:"fade",zIndex:1e4,delay:[200,0],render(n){let r=document.createElement("div"),a=document.createElement("div");return r.id="context-menu",r.appendChild(a),a.className="main-contextMenu-tippy",a.appendChild(n.props.content),{popper:r,onUpdate:A.constVoid}},onShow(n){n.popper.firstChild.classList.add("main-contextMenu-tippyEnter");let r=n.reference.parentElement.children,a=r.item(r.length-1);a.style.marginRight="0px"},onMount(n){requestAnimationFrame(()=>{n.popper.firstChild.classList.remove("main-contextMenu-tippyEnter"),n.popper.firstChild.classList.add("main-contextMenu-tippyEnterActive")})},onHide(n){requestAnimationFrame(()=>{n.popper.firstChild.classList.remove("main-contextMenu-tippyEnterActive");let r=n.reference.parentElement.children,a=r.item(r.length-2);a.style.marginRight="unset",n.unmount()})}})},f=(t,e=!0)=>{let i=rt(),s=U(i);B(s,p[t]),e&&ot(s,t,!0)},R=(t=!0)=>{let e=tt();A.pipe(e,T.map(i=>{et(i).map(n=>{let r=S.fromString(it(n)).toURI();if(!S.isTrack(r))return;let a=p[r],E=U(n);B(E,a),t&&ot(E,r)})}))},I=async t=>{let e;if(S.isAlbum(t))e=A.pipe(await _(`${t}`),r=>r.tracks.items,T.map(r=>r.track.uri));else if(S.isArtist(t))e=A.pipe(await G(`${t}`),T.map(r=>r.uri));else if(S.isPlaylistV1OrV2(t))e=A.pipe(await b(`${t}`),T.map(r=>r.uri));else throw"me out the window";let i=e.map(r=>p[r]).filter(Boolean),s=Math.round(i.reduce((r,a)=>r+a)/i.length),n=nt();B(n,s)};var{URI:L}=Spicetify;P();Spicetify.Player.addEventListener("songchange",()=>{let t=Spicetify.Player.data.track?.uri;if(Number(u.skipThreshold)&&(p[t]||Number.MAX_SAFE_INTEGER)<=Number(u.skipThreshold))return void Spicetify.Player.next();f(t)});f(Spicetify.Player.data.track?.uri);var k,at=new MutationObserver(()=>R());new MutationObserver(()=>{let t=document.querySelector("main");t&&!t.isEqualNode(k)&&(k&&at.disconnect(),k=t,at.observe(k,{childList:!0,subtree:!0}))}).observe(document.body,{childList:!0,subtree:!0});Spicetify.Platform.History.listen(async({pathname:t})=>{vt([L.isAlbum,L.isArtist,L.isPlaylistV1OrV2])(t)&&I(L.fromString(t))});
//! Does location actually point to document.body?
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vZXh0ZW5zaW9ucy9zdGFyLXJhdGluZ3MtMi9hcHAudHMiLCAiLi4vLi4vZXh0ZW5zaW9ucy9zdGFyLXJhdGluZ3MtMi9jb250cm9scy50c3giLCAiLi4vLi4vc2hhcmVkL2ZwLnRzIiwgIi4uLy4uL3NoYXJlZC91dGlsLnRzIiwgIi4uLy4uL3NoYXJlZC9hcGkudHMiLCAiLi4vLi4vZXh0ZW5zaW9ucy9zdGFyLXJhdGluZ3MtMi9kcm9wZG93bi50c3giLCAiLi4vLi4vZXh0ZW5zaW9ucy9zdGFyLXJhdGluZ3MtMi9yYXRpbmdzLnRzIiwgIi4uLy4uL2V4dGVuc2lvbnMvc3Rhci1yYXRpbmdzLTIvc2V0dGluZ3MudHMiLCAiLi4vLi4vc2hhcmVkL3NldHRpbmdzLnRzeCIsICIuLi8uLi9leHRlbnNpb25zL3N0YXItcmF0aW5ncy0yL3V0aWwudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IGFueVBhc3MgfSBmcm9tIFwiaHR0cHM6Ly9lc20uc2gvZnAtdHMtc3RkL1ByZWRpY2F0ZVwiXHJcbmltcG9ydCB7IHVwZGF0ZUNvbGxlY3Rpb25Db250cm9scywgdXBkYXRlTm93UGxheWluZ0NvbnRyb2xzLCB1cGRhdGVUcmFja0xpc3RDb250cm9scyB9IGZyb20gXCIuL2NvbnRyb2xzLnRzeFwiXHJcbmltcG9ydCB7IGxvYWRSYXRpbmdzLCB0cmFja3NSYXRpbmdzIH0gZnJvbSBcIi4vcmF0aW5ncy50c1wiXHJcbmltcG9ydCB7IENPTkZJRyB9IGZyb20gXCIuL3NldHRpbmdzLnRzXCJcclxuXHJcbmltcG9ydCBcIi4vYXNzZXRzL3N0eWxlcy5zY3NzXCJcclxuXHJcbmNvbnN0IHsgVVJJIH0gPSBTcGljZXRpZnlcclxuXHJcbmxvYWRSYXRpbmdzKClcclxuXHJcblNwaWNldGlmeS5QbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcihcInNvbmdjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgY29uc3QgbnBUcmFjayA9IFNwaWNldGlmeS5QbGF5ZXIuZGF0YS50cmFjaz8udXJpIVxyXG4gICAgaWYgKFxyXG4gICAgICAgIE51bWJlcihDT05GSUcuc2tpcFRocmVzaG9sZCkgJiZcclxuICAgICAgICAodHJhY2tzUmF0aW5nc1tucFRyYWNrXSB8fCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgPD0gTnVtYmVyKENPTkZJRy5za2lwVGhyZXNob2xkKVxyXG4gICAgKVxyXG4gICAgICAgIHJldHVybiB2b2lkIFNwaWNldGlmeS5QbGF5ZXIubmV4dCgpXHJcblxyXG4gICAgdXBkYXRlTm93UGxheWluZ0NvbnRyb2xzKG5wVHJhY2spXHJcbn0pXHJcbnVwZGF0ZU5vd1BsYXlpbmdDb250cm9scyhTcGljZXRpZnkuUGxheWVyLmRhdGEudHJhY2s/LnVyaSEpXHJcblxyXG5sZXQgbWFpbkVsZW1lbnQ6IEhUTUxFbGVtZW50XHJcbmNvbnN0IG1haW5FbGVtZW50T2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB1cGRhdGVUcmFja0xpc3RDb250cm9scygpKVxyXG5cclxubmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xyXG4gICAgY29uc3QgbmV4dE1haW5FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oXCJtYWluXCIpXHJcbiAgICBpZiAobmV4dE1haW5FbGVtZW50ICYmICFuZXh0TWFpbkVsZW1lbnQuaXNFcXVhbE5vZGUobWFpbkVsZW1lbnQpKSB7XHJcbiAgICAgICAgaWYgKG1haW5FbGVtZW50KSBtYWluRWxlbWVudE9ic2VydmVyLmRpc2Nvbm5lY3QoKVxyXG4gICAgICAgIG1haW5FbGVtZW50ID0gbmV4dE1haW5FbGVtZW50XHJcbiAgICAgICAgbWFpbkVsZW1lbnRPYnNlcnZlci5vYnNlcnZlKG1haW5FbGVtZW50LCB7XHJcbiAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgc3VidHJlZTogdHJ1ZSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59KS5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcclxuICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgIHN1YnRyZWU6IHRydWUsXHJcbn0pXHJcblxyXG5TcGljZXRpZnkuUGxhdGZvcm0uSGlzdG9yeS5saXN0ZW4oYXN5bmMgKHsgcGF0aG5hbWUgfTogeyBwYXRobmFtZTogc3RyaW5nIH0pID0+IHtcclxuICAgIGNvbnN0IHBhZ2VIYXNIZWFydCA9IGFueVBhc3MoW1VSSS5pc0FsYnVtLCBVUkkuaXNBcnRpc3QsIFVSSS5pc1BsYXlsaXN0VjFPclYyXSlcclxuICAgIGlmICghcGFnZUhhc0hlYXJ0KHBhdGhuYW1lKSkgcmV0dXJuXHJcblxyXG4gICAgdXBkYXRlQ29sbGVjdGlvbkNvbnRyb2xzKFVSSS5mcm9tU3RyaW5nKHBhdGhuYW1lKSlcclxufSlcclxuIiwgImltcG9ydCB7IGFycmF5IGFzIGFyLCBmdW5jdGlvbiBhcyBmIH0gZnJvbSBcImh0dHBzOi8vZXNtLnNoL2ZwLXRzXCJcclxuXHJcbmltcG9ydCB7IGZldGNoR1FMQWxidW0sIGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzLCBmZXRjaFBsYXRQbGF5bGlzdENvbnRlbnRzIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC9hcGkudHNcIlxyXG5pbXBvcnQgeyBTcG90aWZ5VVJJIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC91dGlsLnRzXCJcclxuaW1wb3J0IHsgRHJvcGRvd24gfSBmcm9tIFwiLi9kcm9wZG93bi50c3hcIlxyXG5pbXBvcnQgeyB0cmFja3NSYXRpbmdzIH0gZnJvbSBcIi4vcmF0aW5ncy50c1wiXHJcbmltcG9ydCB7XHJcbiAgICBnZXRDb2xsZWN0aW9uUGxheWxpc3RCdXR0b24sXHJcbiAgICBnZXROb3dQbGF5aW5nQmFyLFxyXG4gICAgZ2V0UGxheWxpc3RCdXR0b24sXHJcbiAgICBnZXRUcmFja0xpc3RUcmFja1VyaSxcclxuICAgIGdldFRyYWNrTGlzdFRyYWNrcyxcclxuICAgIGdldFRyYWNrTGlzdHMsXHJcbn0gZnJvbSBcIi4vdXRpbC50c1wiXHJcblxyXG5jb25zdCB7IFVSSSB9ID0gU3BpY2V0aWZ5XHJcbmNvbnN0IHsgUmVhY3QsIFJlYWN0RE9NIH0gPSBTcGljZXRpZnlcclxuXHJcbmNvbnN0IGNvbG9yQnlSYXRpbmcgPSBbXCJ1bnNldFwiLCBcIiNFRDU1NjRcIiwgXCIjRkZDRTU0XCIsIFwiQTBENTY4XCIsIFwiIzRGQzFFOFwiLCBcIiNBQzkyRUJcIl1cclxuXHJcbmNvbnN0IGNvbG9yaXplUGxheWxpc3RCdXR0b24gPSAoYnRuOiBIVE1MQnV0dG9uRWxlbWVudCwgcmF0aW5nOiBudW1iZXIpID0+IHtcclxuICAgIGlmIChidG4uc3R5bGUuZmlsbCA9PT0gY29sb3JCeVJhdGluZ1tyYXRpbmddKSByZXR1cm5cclxuXHJcbiAgICBidG4uc3R5bGUub3BhY2l0eSA9IHJhdGluZyA+IDAgPyBcIjFcIiA6IFwidW5zZXRcIlxyXG4gICAgY29uc3Qgc3ZnID0gYnRuLnF1ZXJ5U2VsZWN0b3I8U1ZHRWxlbWVudD4oXCJzdmdcIikhXHJcbiAgICBzdmcuc3R5bGUuZmlsbCA9IGNvbG9yQnlSYXRpbmdbcmF0aW5nXVxyXG59XHJcblxyXG5sZXQgbGFzdERpdjogSFRNTERpdkVsZW1lbnRcclxuY29uc3Qgd3JhcERyb3Bkb3duSW5zaWRlUGxheWxpc3RCdXR0b24gPSAocGI6IEhUTUxCdXR0b25FbGVtZW50LCB1cmk6IFNwb3RpZnlVUkksIGZvcmNlZCA9IGZhbHNlKSA9PiB7XHJcbiAgICBpZiAocGIuaGFzQXR0cmlidXRlKFwiZHJvcGRvd24tZW5hYmxlZFwiKSkge1xyXG4gICAgICAgIGlmICghZm9yY2VkKSByZXR1cm5cclxuICAgIH0gZWxzZSBwYi5zZXRBdHRyaWJ1dGUoXCJkcm9wZG93bi1lbmFibGVkXCIsIFwiXCIpXHJcblxyXG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgaWYgKGZvcmNlZCkge1xyXG4gICAgICAgIGlmIChsYXN0RGl2Py5vdXRlckhUTUwpIGxhc3REaXYub3V0ZXJIVE1MID0gXCJcIlxyXG4gICAgICAgIGxhc3REaXYgPSBkaXZcclxuICAgIH1cclxuICAgIHBiLmFwcGVuZENoaWxkKGRpdilcclxuICAgIFJlYWN0RE9NLnJlbmRlcig8RHJvcGRvd24gdXJpPXt1cml9IC8+LCBkaXYpXHJcbiAgICBTcGljZXRpZnkuVGlwcHkocGIsIHtcclxuICAgICAgICBjb250ZW50OiBkaXYsXHJcbiAgICAgICAgaW50ZXJhY3RpdmU6IHRydWUsXHJcbiAgICAgICAgYW5pbWF0ZUZpbGw6IGZhbHNlLFxyXG4gICAgICAgIC8vb2Zmc2V0OiBbMCwgN10sXHJcbiAgICAgICAgcGxhY2VtZW50OiBcImxlZnRcIixcclxuICAgICAgICBhbmltYXRpb246IFwiZmFkZVwiLFxyXG4gICAgICAgIC8vdHJpZ2dlcjogXCJtb3VzZWVudGVyIGZvY3VzXCIsXHJcbiAgICAgICAgekluZGV4OiAxMDAwMCxcclxuICAgICAgICBkZWxheTogWzIwMCwgMF0sXHJcbiAgICAgICAgcmVuZGVyKGluc3RhbmNlOiBhbnkpIHtcclxuICAgICAgICAgICAgY29uc3QgcG9wcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgICAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcblxyXG4gICAgICAgICAgICBwb3BwZXIuaWQgPSBcImNvbnRleHQtbWVudVwiXHJcbiAgICAgICAgICAgIHBvcHBlci5hcHBlbmRDaGlsZChib3gpXHJcblxyXG4gICAgICAgICAgICBib3guY2xhc3NOYW1lID0gXCJtYWluLWNvbnRleHRNZW51LXRpcHB5XCJcclxuICAgICAgICAgICAgYm94LmFwcGVuZENoaWxkKGluc3RhbmNlLnByb3BzLmNvbnRlbnQpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4geyBwb3BwZXIsIG9uVXBkYXRlOiBmLmNvbnN0Vm9pZCB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvblNob3coaW5zdGFuY2U6IGFueSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5wb3BwZXIuZmlyc3RDaGlsZC5jbGFzc0xpc3QuYWRkKFwibWFpbi1jb250ZXh0TWVudS10aXBweUVudGVyXCIpXHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IChpbnN0YW5jZS5yZWZlcmVuY2UucGFyZW50RWxlbWVudCBhcyBIVE1MRGl2RWxlbWVudCkuY2hpbGRyZW5cclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGNoaWxkcmVuLml0ZW0oY2hpbGRyZW4ubGVuZ3RoIC0gMSkgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiMHB4XCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uTW91bnQoaW5zdGFuY2U6IGFueSkge1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucG9wcGVyLmZpcnN0Q2hpbGQuY2xhc3NMaXN0LnJlbW92ZShcIm1haW4tY29udGV4dE1lbnUtdGlwcHlFbnRlclwiKVxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucG9wcGVyLmZpcnN0Q2hpbGQuY2xhc3NMaXN0LmFkZChcIm1haW4tY29udGV4dE1lbnUtdGlwcHlFbnRlckFjdGl2ZVwiKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25IaWRlKGluc3RhbmNlOiBhbnkpIHtcclxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLnBvcHBlci5maXJzdENoaWxkLmNsYXNzTGlzdC5yZW1vdmUoXCJtYWluLWNvbnRleHRNZW51LXRpcHB5RW50ZXJBY3RpdmVcIilcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IChpbnN0YW5jZS5yZWZlcmVuY2UucGFyZW50RWxlbWVudCBhcyBIVE1MRGl2RWxlbWVudCkuY2hpbGRyZW5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBjaGlsZHJlbi5pdGVtKGNoaWxkcmVuLmxlbmd0aCAtIDIpIGFzIEhUTUxCdXR0b25FbGVtZW50XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCJ1bnNldFwiXHJcblxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UudW5tb3VudCgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVOb3dQbGF5aW5nQ29udHJvbHMgPSAobmV3VHJhY2s6IFNwb3RpZnlVUkksIHVwZGF0ZURyb3Bkb3duID0gdHJ1ZSkgPT4ge1xyXG4gICAgY29uc3QgbnBiID0gZ2V0Tm93UGxheWluZ0JhcigpXHJcbiAgICBjb25zdCBwYiA9IGdldFBsYXlsaXN0QnV0dG9uKG5wYilcclxuICAgIGNvbG9yaXplUGxheWxpc3RCdXR0b24ocGIsIHRyYWNrc1JhdGluZ3NbbmV3VHJhY2tdKVxyXG4gICAgaWYgKHVwZGF0ZURyb3Bkb3duKSB3cmFwRHJvcGRvd25JbnNpZGVQbGF5bGlzdEJ1dHRvbihwYiwgbmV3VHJhY2ssIHRydWUpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVUcmFja0xpc3RDb250cm9scyA9ICh1cGRhdGVEcm9wZG93biA9IHRydWUpID0+IHtcclxuICAgIGNvbnN0IHRyYWNrTGlzdHMgPSBnZXRUcmFja0xpc3RzKClcclxuICAgIGYucGlwZShcclxuICAgICAgICB0cmFja0xpc3RzLFxyXG4gICAgICAgIGFyLm1hcCh0cmFja0xpc3QgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0cmFja0xpc3RUcmFja3MgPSBnZXRUcmFja0xpc3RUcmFja3ModHJhY2tMaXN0KVxyXG5cclxuICAgICAgICAgICAgdHJhY2tMaXN0VHJhY2tzLm1hcCh0cmFjayA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cmkgPSBVUkkuZnJvbVN0cmluZyhnZXRUcmFja0xpc3RUcmFja1VyaSh0cmFjaykpLnRvVVJJKClcclxuXHJcbiAgICAgICAgICAgICAgICAvL1RPRE86IExvY2FsIFRyYWNrcyBzdXBwb3J0XHJcbiAgICAgICAgICAgICAgICBpZiAoIVVSSS5pc1RyYWNrKHVyaSEpKSByZXR1cm5cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdHJhY2tzUmF0aW5nc1t1cmldXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYiA9IGdldFBsYXlsaXN0QnV0dG9uKHRyYWNrKVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbG9yaXplUGxheWxpc3RCdXR0b24ocGIsIHIpXHJcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlRHJvcGRvd24pIHdyYXBEcm9wZG93bkluc2lkZVBsYXlsaXN0QnV0dG9uKHBiLCB1cmkpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSksXHJcbiAgICApXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVDb2xsZWN0aW9uQ29udHJvbHMgPSBhc3luYyAodXJpOiBTcGljZXRpZnkuVVJJKSA9PiB7XHJcbiAgICBsZXQgdXJpc1xyXG4gICAgaWYgKFVSSS5pc0FsYnVtKHVyaSkpXHJcbiAgICAgICAgdXJpcyA9IGYucGlwZShcclxuICAgICAgICAgICAgYXdhaXQgZmV0Y2hHUUxBbGJ1bShgJHt1cml9YCksXHJcbiAgICAgICAgICAgIHggPT4geC50cmFja3MuaXRlbXMsXHJcbiAgICAgICAgICAgIGFyLm1hcCh4ID0+IHgudHJhY2sudXJpKSxcclxuICAgICAgICApXHJcbiAgICBlbHNlIGlmIChVUkkuaXNBcnRpc3QodXJpKSlcclxuICAgICAgICB1cmlzID0gZi5waXBlKFxyXG4gICAgICAgICAgICBhd2FpdCBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrcyhgJHt1cml9YCksXHJcbiAgICAgICAgICAgIGFyLm1hcCh4ID0+IHgudXJpKSxcclxuICAgICAgICApXHJcbiAgICBlbHNlIGlmIChVUkkuaXNQbGF5bGlzdFYxT3JWMih1cmkpKVxyXG4gICAgICAgIHVyaXMgPSBmLnBpcGUoXHJcbiAgICAgICAgICAgIGF3YWl0IGZldGNoUGxhdFBsYXlsaXN0Q29udGVudHMoYCR7dXJpfWApLFxyXG4gICAgICAgICAgICBhci5tYXAoeCA9PiB4LnVyaSksXHJcbiAgICAgICAgKVxyXG4gICAgZWxzZSB0aHJvdyBcIm1lIG91dCB0aGUgd2luZG93XCJcclxuXHJcbiAgICBjb25zdCByYXRpbmdzID0gdXJpcy5tYXAodXJpID0+IHRyYWNrc1JhdGluZ3NbdXJpXSkuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICBjb25zdCByYXRpbmcgPSBNYXRoLnJvdW5kKHJhdGluZ3MucmVkdWNlKChhY2MsIHIpID0+IGFjYyArIHIpIC8gcmF0aW5ncy5sZW5ndGgpXHJcblxyXG4gICAgY29uc3QgcGIgPSBnZXRDb2xsZWN0aW9uUGxheWxpc3RCdXR0b24oKVxyXG4gICAgY29sb3JpemVQbGF5bGlzdEJ1dHRvbihwYiwgcmF0aW5nKVxyXG59XHJcbiIsICJpbXBvcnQge1xyXG4gICAgYXJyYXkgYXMgYXIsXHJcbiAgICBlcSxcclxuICAgIHN0cmluZyBhcyBzdHIsXHJcbiAgICByZWNvcmQgYXMgcmVjLFxyXG4gICAgcmVmaW5lbWVudCBhcyByZWYsXHJcbiAgICBzZW1pZ3JvdXAgYXMgc2csXHJcbiAgICBmdW5jdGlvbiBhcyBmLFxyXG59IGZyb20gXCJodHRwczovL2VzbS5zaC9mcC10c1wiXHJcbmltcG9ydCB7IGd1YXJkLCBtZW1vaXplIH0gZnJvbSBcImh0dHBzOi8vZXNtLnNoL2ZwLXRzLXN0ZC9GdW5jdGlvblwiXHJcblxyXG50eXBlIHJlZmluZUJyYW5jaDxBLCBCIGV4dGVuZHMgQSwgUj4gPSBbcmVmLlJlZmluZW1lbnQ8QSwgQj4sICh4OiBCKSA9PiBSXVxyXG5leHBvcnQgY29uc3QgZ3VhcmQyID0gPEEsIEExIGV4dGVuZHMgQSwgQTIgZXh0ZW5kcyBBLCBSPihicmFuY2hlczogW3JlZmluZUJyYW5jaDxBLCBBMSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBMiwgUj5dKSA9PlxyXG4gICAgZ3VhcmQoYnJhbmNoZXMgYXMgdW5rbm93biBhcyBbcmVmaW5lQnJhbmNoPEEsIEEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQSwgUj5dKVxyXG5leHBvcnQgY29uc3QgZ3VhcmQzID0gPEEsIEExIGV4dGVuZHMgQSwgQTIgZXh0ZW5kcyBBLCBBMyBleHRlbmRzIEEsIFI+KFxyXG4gICAgYnJhbmNoZXM6IFtyZWZpbmVCcmFuY2g8QSwgQTEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTIsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTMsIFI+XSxcclxuKSA9PiBndWFyZChicmFuY2hlcyBhcyB1bmtub3duIGFzIFtyZWZpbmVCcmFuY2g8QSwgQSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEsIFI+XSlcclxuZXhwb3J0IGNvbnN0IGd1YXJkNCA9IDxBLCBBMSBleHRlbmRzIEEsIEEyIGV4dGVuZHMgQSwgQTMgZXh0ZW5kcyBBLCBBNCBleHRlbmRzIEEsIFI+KFxyXG4gICAgYnJhbmNoZXM6IFtyZWZpbmVCcmFuY2g8QSwgQTEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTIsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTMsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTQsIFI+XSxcclxuKSA9PlxyXG4gICAgZ3VhcmQoXHJcbiAgICAgICAgYnJhbmNoZXMgYXMgdW5rbm93biBhcyBbXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICBdLFxyXG4gICAgKVxyXG5leHBvcnQgY29uc3QgZ3VhcmQ1ID0gPEEsIEExIGV4dGVuZHMgQSwgQTIgZXh0ZW5kcyBBLCBBMyBleHRlbmRzIEEsIEE0IGV4dGVuZHMgQSwgQTUgZXh0ZW5kcyBBLCBSPihcclxuICAgIGJyYW5jaGVzOiBbXHJcbiAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEExLCBSPixcclxuICAgICAgICByZWZpbmVCcmFuY2g8QSwgQTIsIFI+LFxyXG4gICAgICAgIHJlZmluZUJyYW5jaDxBLCBBMywgUj4sXHJcbiAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEE0LCBSPixcclxuICAgICAgICByZWZpbmVCcmFuY2g8QSwgQTUsIFI+LFxyXG4gICAgXSxcclxuKSA9PlxyXG4gICAgZ3VhcmQoXHJcbiAgICAgICAgYnJhbmNoZXMgYXMgdW5rbm93biBhcyBbXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgIF0sXHJcbiAgICApXHJcblxyXG5leHBvcnQgY29uc3Qgb2JqQ29uY2F0MiA9IDxBMSwgQTI+KCkgPT4gcmVjLmdldFVuaW9uU2VtaWdyb3VwKHNnLmZpcnN0PGFueT4oKSkuY29uY2F0IGFzICh4OiBBMSwgeTogQTIpID0+IEExICYgQTJcclxuZXhwb3J0IGNvbnN0IG9iakNvbmNhdCA9IDxBPigpID0+IGFyLnJlZHVjZSh7fSBhcyBBLCBvYmpDb25jYXQyPEEsIEE+KCkpXHJcblxyXG50eXBlIGFzeW5jID0ge1xyXG4gICAgPEEsIEI+KGY6IChhOiBBKSA9PiBQcm9taXNlPEI+KTogKGZhOiBQcm9taXNlPEE+KSA9PiBQcm9taXNlPEI+XHJcbiAgICA8QSwgQj4oZjogKGE6IEEpID0+IEIpOiAoZmE6IFByb21pc2U8QT4pID0+IFByb21pc2U8Qj5cclxufVxyXG5leHBvcnQgY29uc3QgcE1jaGFpbjogYXN5bmMgPVxyXG4gICAgPEEsIFI+KGY6IChhOiBBKSA9PiBSKSA9PlxyXG4gICAgYXN5bmMgKGZhOiBBKSA9PlxyXG4gICAgICAgIGYoYXdhaXQgZmEpXHJcblxyXG5leHBvcnQgY29uc3QgaXMgPVxyXG4gICAgPEE+KGM6IGtleW9mIEEpID0+XHJcbiAgICA8QiBleHRlbmRzIEE+KGE6IEFbdHlwZW9mIGNdKSA9PlxyXG4gICAgKGZpZWxkOiBBKTogZmllbGQgaXMgQiA9PlxyXG4gICAgICAgIGZpZWxkW2NdID09PSBhXHJcblxyXG5leHBvcnQgY29uc3QgdGFwQW55ID1cclxuICAgIDxBPihmOiAoYTogQSkgPT4gdm9pZCkgPT5cclxuICAgIChmYTogQSkgPT4ge1xyXG4gICAgICAgIGYoZmEpXHJcbiAgICAgICAgcmV0dXJuIGZhXHJcbiAgICB9XHJcblxyXG5leHBvcnQgY29uc3QgY2h1bmNraWZ5ID1cclxuICAgIChuOiBudW1iZXIpID0+XHJcbiAgICA8QSwgUj4oZzogKGE6IEFbXSkgPT4gUHJvbWlzZTxSW10+KSA9PlxyXG4gICAgICAgIGYuZmxvdyhhci5jaHVua3NPZihuKTxBPiwgYXIubWFwKGcpLCBwcyA9PiBQcm9taXNlLmFsbChwcyksIHBNY2hhaW4oYXIuZmxhdHRlbikpXHJcblxyXG5leHBvcnQgY29uc3Qgd2l0aFByb2dyZXNzID1cclxuICAgIDxGIGV4dGVuZHMgKGY6ICguLi5hOiBhbnkpID0+IGFueSkgPT4gKGZhOiBhbnkpID0+IGFueT4obWFwOiBGKSA9PlxyXG4gICAgKGY6IFBhcmFtZXRlcnM8Rj5bMF0pID0+XHJcbiAgICAoZmE6IFBhcmFtZXRlcnM8UmV0dXJuVHlwZTxGPj5bMF0pOiBSZXR1cm5UeXBlPFJldHVyblR5cGU8Rj4+ID0+IHtcclxuICAgICAgICBsZXQgaSA9IDBcclxuICAgICAgICByZXR1cm4gbWFwKGFzeW5jICguLi5hOiBQYXJhbWV0ZXJzPFBhcmFtZXRlcnM8Rj5bMF0+KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IEZ1Y2sgbWVcclxuICAgICAgICAgICAgY29uc3QgcmV0ID0gYXdhaXQgZiguLi5hKVxyXG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgucm91bmQoKGkrKyAvIE9iamVjdC52YWx1ZXMoZmEpLmxlbmd0aCkgKiAxMDApXHJcbiAgICAgICAgICAgIFNwaWNldGlmeS5zaG93Tm90aWZpY2F0aW9uKGBMb2FkaW5nOiAke3Byb2dyZXNzfSVgLCBmYWxzZSwgMjAwKVxyXG4gICAgICAgICAgICByZXR1cm4gcmV0XHJcbiAgICAgICAgfSkoZmEpXHJcbiAgICB9XHJcblxyXG5leHBvcnQgY29uc3QgbWVtb2l6ZTIgPSA8QSBleHRlbmRzIGFueVtdLCBSPihmbjogKC4uLmFyZ3M6IEEpID0+IFIpID0+XHJcbiAgICBmLnBpcGUoZm4sIGYudHVwbGVkLCBtZW1vaXplPEE+KGVxLmNvbnRyYW1hcChKU09OLnN0cmluZ2lmeSkoc3RyLkVxKSksIGYudW50dXBsZWQpXHJcbiIsICIvLyBleHBvcnQgaW50ZXJmYWNlIFNwb3RpZnlJRFxyXG4vLyAgICAgZXh0ZW5kcyBOZXd0eXBlPHsgcmVhZG9ubHkgU3BvdGlmeUlEOiB1bmlxdWUgc3ltYm9sIH0sIHN0cmluZz4ge31cclxuLy8gZXhwb3J0IGludGVyZmFjZSBTcG90aWZ5VVJJXHJcbi8vICAgICBleHRlbmRzIE5ld3R5cGU8eyByZWFkb25seSBTcG90aWZ5VVJJOiB1bmlxdWUgc3ltYm9sIH0sIHN0cmluZz4ge31cclxuXHJcbmltcG9ydCB7IGFycmF5IGFzIGEsIGZ1bmN0aW9uIGFzIGYgfSBmcm9tIFwiaHR0cHM6Ly9lc20uc2gvZnAtdHNcIlxyXG5cclxuZXhwb3J0IHR5cGUgU3BvdGlmeUlEID0gc3RyaW5nXHJcbmV4cG9ydCB0eXBlIFNwb3RpZnlVUkkgPSBzdHJpbmdcclxuXHJcbmV4cG9ydCB0eXBlIFNwb3RpZnlMb2NPYmogPSB7XHJcbiAgICBiZWZvcmU/OiBcInN0YXJ0XCIgfCB7IHVyaTogU3BvdGlmeVVSSSB9IHwgeyB1aWQ6IHN0cmluZyB9XHJcbiAgICBhZnRlcj86IFwiZW5kXCIgfCB7IHVyaTogU3BvdGlmeVVSSSB9IHwgeyB1aWQ6IHN0cmluZyB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBTcG90aWZ5TG9jID0ge1xyXG4gICAgYmVmb3JlOiB7XHJcbiAgICAgICAgc3RhcnQ6IGYuY29uc3RhbnQoeyBiZWZvcmU6IFwic3RhcnRcIiB9IGFzIFNwb3RpZnlMb2NPYmopLFxyXG4gICAgICAgIGZyb21Vcmk6ICh1cmk6IFNwb3RpZnlVUkkpID0+ICh7IGJlZm9yZTogeyB1cmkgfSB9KSxcclxuICAgICAgICBmcm9tVWlkOiAodWlkOiBzdHJpbmcpID0+ICh7IGJlZm9yZTogeyB1aWQgfSB9KSxcclxuICAgIH0sXHJcbiAgICBhZnRlcjoge1xyXG4gICAgICAgIGVuZDogZi5jb25zdGFudCh7IGFmdGVyOiBcImVuZFwiIH0gYXMgU3BvdGlmeUxvY09iaiksXHJcbiAgICAgICAgZnJvbVVyaTogKHVyaTogU3BvdGlmeVVSSSkgPT4gKHsgYWZ0ZXI6IHsgdXJpIH0gfSksXHJcbiAgICAgICAgZnJvbVVpZDogKHVpZDogc3RyaW5nKSA9PiAoeyBhZnRlcjogeyB1aWQgfSB9KSxcclxuICAgIH0sXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBlc2NhcGVSZWdleCA9IChzdHI6IHN0cmluZykgPT4gc3RyLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBgXFxcXCQmYClcclxuXHJcbmV4cG9ydCBjb25zdCB0aXRsZUNhc2UgPSAoc3RyOiBzdHJpbmcpID0+IHN0ci5yZXBsYWNlKC9cXGJcXHcvZywgbCA9PiBsLnRvVXBwZXJDYXNlKCkpXHJcblxyXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplU3RyID0gKHN0cjogc3RyaW5nKSA9PlxyXG4gICAgc3RyXHJcbiAgICAgICAgLm5vcm1hbGl6ZShcIk5GS0RcIilcclxuICAgICAgICAucmVwbGFjZSgvXFwoLipcXCkvZywgXCJcIilcclxuICAgICAgICAucmVwbGFjZSgvXFxbLipcXF0vZywgXCJcIilcclxuICAgICAgICAucmVwbGFjZSgvLV8sL2csIFwiIFwiKVxyXG4gICAgICAgIC5yZXBsYWNlKC9bXmEtekEtWjAtOSBdL2csIFwiXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXHJcbiAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAudHJpbSgpXHJcblxyXG4vLyEgRG9lcyBsb2NhdGlvbiBhY3R1YWxseSBwb2ludCB0byBkb2N1bWVudC5ib2R5P1xyXG5leHBvcnQgY29uc3Qgd2FpdEZvckVsZW1lbnQgPSA8RSBleHRlbmRzIEVsZW1lbnQ+KFxyXG4gICAgc2VsZWN0b3I6IHN0cmluZyxcclxuICAgIHRpbWVvdXQgPSAxMDAwLFxyXG4gICAgbG9jYXRpb24gPSBkb2N1bWVudC5ib2R5LFxyXG4gICAgbm90RWw/OiBFLFxyXG4pID0+XHJcbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZTogKHZhbHVlOiBFbGVtZW50IHwgbnVsbCkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9ICh2OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpXHJcbiAgICAgICAgICAgIHJlc29sdmUodilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8RT4oc2VsZWN0b3IpXHJcbiAgICAgICAgICAgIGlmIChlbCAmJiAoIW5vdEVsIHx8IGVsICE9PSBub3RFbCkpIHJldHVybiByZXMoZWwpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShsb2NhdGlvbiwge1xyXG4gICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgICAgICAgIHN1YnRyZWU6IHRydWUsXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKHRpbWVvdXQpIHNldFRpbWVvdXQoKCkgPT4gcmVzKG51bGwpLCB0aW1lb3V0KVxyXG4gICAgfSlcclxuXHJcbmV4cG9ydCBjb25zdCB0cmFwRWxlbWVudCA9IDxFIGV4dGVuZHMgRWxlbWVudD4oXHJcbiAgICBzZWxlY3Rvcjogc3RyaW5nLFxyXG4gICAgY2FsbGJhY2s6IChlbDogRSB8IG51bGwsIGxhc3RFbDogRSB8IG51bGwpID0+IHZvaWQsXHJcbiAgICBsb2NhdGlvbiA9IGRvY3VtZW50LmJvZHksXHJcbikgPT4ge1xyXG4gICAgbGV0IGxhc3RFbDogRSB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEU+KHNlbGVjdG9yKVxyXG4gICAgICAgIGlmIChlbCAhPT0gbGFzdEVsKSBjYWxsYmFjayhlbCwgbGFzdEVsKVxyXG4gICAgICAgIGxhc3RFbCA9IGVsXHJcbiAgICB9KVxyXG5cclxuICAgIG9ic2VydmVyLm9ic2VydmUobG9jYXRpb24sIHtcclxuICAgICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgICAgc3VidHJlZTogdHJ1ZSxcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzbGVlcCA9IChtczogbnVtYmVyKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldFJlYWN0UHJvcHMgPSAoZWxlbWVudDogRWxlbWVudCkgPT5cclxuICAgIGVsZW1lbnRbT2JqZWN0LmtleXMoZWxlbWVudCkuZmluZChrID0+IGsuc3RhcnRzV2l0aChcIl9fcmVhY3RQcm9wcyRcIikpIGFzIGtleW9mIHR5cGVvZiBlbGVtZW50XVxyXG5cclxuZXhwb3J0IGNvbnN0IGlzTGlrZWQgPSAodXJpczogU3BvdGlmeVVSSVtdKSA9PiBTcGljZXRpZnkuUGxhdGZvcm0uTGlicmFyeUFQSS5jb250YWlucyguLi51cmlzKSBhcyBQcm9taXNlPGJvb2xlYW5bXT5cclxuXHJcbmV4cG9ydCBjb25zdCBzZXRMaWtlZCA9ICh1cmlzOiBTcG90aWZ5VVJJW10sIGxpa2VkOiBib29sZWFuKSA9PlxyXG4gICAgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUElbbGlrZWQgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0oLi4udXJpcylcclxuXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVMaWtlZCA9IGFzeW5jICh1cmlzOiBTcG90aWZ5VVJJW10pID0+IHtcclxuICAgIGNvbnN0IGxpa2VkID0gYXdhaXQgaXNMaWtlZCh1cmlzKVxyXG5cclxuICAgIHJldHVybiBhd2FpdCBmLnBpcGUoXHJcbiAgICAgICAgdXJpcyxcclxuICAgICAgICBhLnJlZHVjZVdpdGhJbmRleChcclxuICAgICAgICAgICAgW1tdIGFzIFNwb3RpZnlVUklbXSwgW10gYXMgU3BvdGlmeVVSSVtdXSBhcyBjb25zdCxcclxuICAgICAgICAgICAgKGksIGFjYywgdXJpKSA9PiAoYWNjW051bWJlcihsaWtlZFtpXSldLnB1c2godXJpKSwgYWNjKSxcclxuICAgICAgICApLFxyXG4gICAgICAgIChbdG9BZGQsIHRvUmVtXSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcyA9IFtdXHJcbiAgICAgICAgICAgIGlmICh0b0FkZC5sZW5ndGgpIHBzLnB1c2goc2V0TGlrZWQodG9BZGQsIHRydWUpKVxyXG4gICAgICAgICAgICBpZiAodG9SZW0ubGVuZ3RoKSBwcy5wdXNoKHNldExpa2VkKHRvUmVtLCBmYWxzZSkpXHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcylcclxuICAgICAgICB9LFxyXG4gICAgKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUXVldWVJdGVtID0gKHF1ZXVlZDogYm9vbGVhbikgPT4gKHVyaTogU3BvdGlmeVVSSSkgPT4gKHtcclxuICAgIGNvbnRleHRUcmFjazoge1xyXG4gICAgICAgIHVyaSxcclxuICAgICAgICB1aWQ6IFwiXCIsXHJcbiAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgaXNfcXVldWVkOiBxdWV1ZWQudG9TdHJpbmcoKSxcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIHJlbW92ZWQ6IFtdLFxyXG4gICAgYmxvY2tlZDogW10sXHJcbiAgICBwcm92aWRlcjogcXVldWVkID8gXCJxdWV1ZVwiIDogXCJjb250ZXh0XCIsXHJcbn0pXHJcblxyXG5leHBvcnQgY29uc3Qgc2V0UXVldWUgPSBhc3luYyAobmV4dFRyYWNrczogQXJyYXk8UmV0dXJuVHlwZTxSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVRdWV1ZUl0ZW0+Pj4pID0+IHtcclxuICAgIGNvbnN0IHsgX3F1ZXVlLCBfY2xpZW50IH0gPSBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWVyQVBJLl9xdWV1ZVxyXG4gICAgY29uc3QgeyBwcmV2VHJhY2tzLCBxdWV1ZVJldmlzaW9uIH0gPSBfcXVldWVcclxuXHJcbiAgICByZXR1cm4gX2NsaWVudC5zZXRRdWV1ZSh7XHJcbiAgICAgICAgbmV4dFRyYWNrcyxcclxuICAgICAgICBwcmV2VHJhY2tzLFxyXG4gICAgICAgIHF1ZXVlUmV2aXNpb24sXHJcbiAgICB9KSBhcyBQcm9taXNlPHsgZXJyb3I6IG51bWJlcjsgcmVhc29uczogc3RyaW5nIH0+XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzZXRQbGF5aW5nQ29udGV4dCA9ICh1cmk6IFNwb3RpZnlVUkkpID0+IHtcclxuICAgIGNvbnN0IHsgc2Vzc2lvbklkIH0gPSBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWVyQVBJLmdldFN0YXRlKClcclxuICAgIHJldHVybiBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWVyQVBJLnVwZGF0ZUNvbnRleHQoc2Vzc2lvbklkLCB7IHVyaSwgdXJsOiBcImNvbnRleHQ6Ly9cIiArIHVyaSB9KSBhcyBQcm9taXNlPHVuZGVmaW5lZD5cclxufVxyXG4iLCAiaW1wb3J0IHsgY2h1bmNraWZ5LCBtZW1vaXplMiB9IGZyb20gXCIuL2ZwLnRzXCJcclxuaW1wb3J0IHsgU3BvdGlmeUlELCBTcG90aWZ5TG9jT2JqLCBTcG90aWZ5VVJJLCBlc2NhcGVSZWdleCB9IGZyb20gXCIuL3V0aWwudHNcIlxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIEdyYXBoUUwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFsYnVtID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSA0ODcpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5nZXRBbGJ1bSwge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIGxvY2FsZTogU3BpY2V0aWZ5LkxvY2FsZS5nZXRMb2NhbGUoKSxcclxuICAgICAgICAgICAgb2Zmc2V0LFxyXG4gICAgICAgICAgICBsaW1pdCxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFsYnVtVW5pb24gYXMgZmV0Y2hHUUxBbGJ1bVJlc1xyXG5cclxudHlwZSBmZXRjaEFydGlzdEdRTFJlcyA9IGFueVxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBcnRpc3RPdmVydmlldyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5xdWVyeUFydGlzdE92ZXJ2aWV3LCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgICAgICBpbmNsdWRlUHJlcmVsZWFzZTogdHJ1ZSxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFydGlzdFVuaW9uIGFzIGZldGNoQXJ0aXN0R1FMUmVzXHJcblxyXG50eXBlIGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHlSZXMgPSBhbnlcclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHkgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDExNikgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLnF1ZXJ5QXJ0aXN0RGlzY29ncmFwaHlBbGwsIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBvZmZzZXQsXHJcbiAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24uZGlzY29ncmFwaHkuYWxsLml0ZW1zIGFzIGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHlSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFydGlzdFJlbGF0ZWQgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMucXVlcnlBcnRpc3RSZWxhdGVkLCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24ucmVsYXRlZENvbnRlbnQucmVsYXRlZEFydGlzdHMuaXRlbXMgYXMgZmV0Y2hHUUxBcnRpc3RSZWxhdGVkUmVzXHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgU3BvdGlmeSBXZWIgQVBJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZVdlYlBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5SUQsIHRyYWNrczogU3BvdGlmeVVSSVtdKSA9PlxyXG4gICAgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmRlbChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvcGxheWxpc3RzLyR7cGxheWxpc3R9L3RyYWNrc2AsIHtcclxuICAgICAgICB0cmFja3M6IHRyYWNrcy5tYXAodXJpID0+ICh7IHVyaSB9KSksXHJcbiAgICB9KVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViQXJ0aXN0c1Nwb3QgPSBjaHVuY2tpZnkoNTApKFxyXG4gICAgYXN5bmMgKGlkczogU3BvdGlmeUlEW10pID0+XHJcbiAgICAgICAgKGF3YWl0IFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL2FydGlzdHM/aWRzPSR7aWRzLmpvaW4oXCIsXCIpfWApKVxyXG4gICAgICAgICAgICAuYXJ0aXN0cyBhcyBTcG90QXBpQXJ0aXN0W10sXHJcbilcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlBsYXlsaXN0c1Nwb3QgPSBjaHVuY2tpZnkoMSkoXHJcbiAgICAvLyBAdHMtaWdub3JlIGNodW5raWZ5IHdpbGwgbmV2ZXIgY2FsbCB3aXRoIGVtcHR5IGFycmF5XHJcbiAgICBhc3luYyAoW2lkXTogW1Nwb3RpZnlJRF0pID0+IFtcclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvcGxheWxpc3RzLyR7aWR9YCkpIGFzIFNwb3RBcGlQbGF5bGlzdCxcclxuICAgIF0sXHJcbilcclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViQWxidW1zU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvYWxidW1zP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLmFsYnVtcyBhcyBTcG90QXBpQWxidW1bXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViVHJhY2tzU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvdHJhY2tzP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLnRyYWNrcyBhcyBTcG90QXBpVHJhY2tbXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFdlYkl0ZW1TcG90ID0gYXN5bmMgKHE6IHN0cmluZywgdHlwZTogc3RyaW5nW10pID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9zZWFyY2g/cT0ke2VuY29kZVVSSUNvbXBvbmVudChxKX0mdHlwZT0ke3R5cGUuam9pbihcIixcIil9YClcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlNvdW5kT2ZTcG90aWZ5UGxheWxpc3QgPSBhc3luYyAoZ2VucmU6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgbmFtZSA9IGBUaGUgU291bmQgT2YgJHtnZW5yZX1gXHJcbiAgICBjb25zdCByZSA9IG5ldyBSZWdFeHAoYF4ke2VzY2FwZVJlZ2V4KG5hbWUpfSRgLCBcImlcIilcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHNlYXJjaFdlYkl0ZW1TcG90KG5hbWUsIFtcInBsYXlsaXN0XCJdKVxyXG4gICAgY29uc3QgaXRlbSA9IHJlcy5wbGF5bGlzdHMuaXRlbXNbMF1cclxuICAgIHJldHVybiBpdGVtPy5vd25lci5pZCA9PT0gXCJ0aGVzb3VuZHNvZnNwb3RpZnlcIiAmJiByZS50ZXN0KGl0ZW0ubmFtZSkgPyBpdGVtLnVyaSA6IG51bGxcclxufVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFBsYXRmb3JtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRMaWtlZFRyYWNrcyA9IGFzeW5jICgpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuZ2V0VHJhY2tzKHtcclxuICAgICAgICAgICAgbGltaXQ6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLFxyXG4gICAgICAgIH0pXHJcbiAgICApLml0ZW1zIGFzIGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzUmVzXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrcyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gMTAwKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5MaWJyYXJ5QVBJLmdldFRyYWNrcyh7IHVyaSwgb2Zmc2V0LCBsaW1pdCB9KSkuaXRlbXMgYXMgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdENvbnRlbnRzID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkuZ2V0Q29udGVudHModXJpKSkuaXRlbXMgYXMgZmV0Y2hXZWJQbGF5bGlzdFJlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBsYXRGb2xkZXIgPSBhc3luYyAobmFtZTogc3RyaW5nLCBsb2NhdGlvbjogU3BvdGlmeUxvY09iaiA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmNyZWF0ZUZvbGRlcihuYW1lLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBsaWtlUGxhdFBsYXlsaXN0ID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT4gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmFkZChbdXJpXSlcclxuXHJcbi8qIFJlcGxhY2VkIGJ5IGNyZWF0ZVNQUGxheWxpc3RGcm9tVHJhY2tzICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQbGF0UGxheWxpc3QgPSBhc3luYyAobmFtZTogc3RyaW5nLCBsb2NhdGlvbjogU3BvdGlmeUxvY09iaiA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmNyZWF0ZVBsYXlsaXN0KG5hbWUsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNQUGxheWxpc3RGcm9tVHJhY2tzID0gKG5hbWU6IHN0cmluZywgdHJhY2tzOiBTcG90aWZ5VVJJW10sIGZvbGRlcj86IFNwb3RpZnlVUkkpID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMucG9zdChcInNwOi8vY29yZS1wbGF5bGlzdC92MS9yb290bGlzdD9yZXNwb25zZUZvcm1hdD1wcm90b2J1Zkpzb25cIiwge1xyXG4gICAgICAgIG9wZXJhdGlvbjogXCJjcmVhdGVcIixcclxuICAgICAgICAuLi4oZm9sZGVyID8geyBhZnRlcjogZm9sZGVyIH0gOiB7fSksXHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBwbGF5bGlzdDogdHJ1ZSxcclxuICAgICAgICB1cmlzOiB0cmFja3MsXHJcbiAgICB9KVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldFBsYXRQbGF5bGlzdFZpc2liaWxpdHkgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlVUkksIHZpc2libGVGb3JBbGw6IGJvb2xlYW4pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RQZXJtaXNzaW9uc0FQSS5zZXRCYXNlUGVybWlzc2lvbihwbGF5bGlzdCwgdmlzaWJsZUZvckFsbCA/IFwiVklFV0VSXCIgOiBcIkJMT0NLRURcIilcclxuZXhwb3J0IGNvbnN0IHNldFBsYXRQbGF5bGlzdFB1Ymxpc2hlZCA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeVVSSSwgcHVibGlzaGVkOiBib29sZWFuKSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLnNldFB1Ymxpc2hlZFN0YXRlKHBsYXlsaXN0LCBwdWJsaXNoZWQpXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0Rm9sZGVyID0gYXN5bmMgKGZvbGRlcj86IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmdldENvbnRlbnRzKHsgZm9sZGVyVXJpOiBmb2xkZXIgfSkpIGFzIGZldGNoUGxhdEZvbGRlclJlc1xyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0Um9vdEZvbGRlciA9ICgpID0+IGZldGNoUGxhdEZvbGRlcih1bmRlZmluZWQpXHJcblxyXG5leHBvcnQgY29uc3QgYWRkUGxhdFBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5VVJJLCB0cmFja3M6IFNwb3RpZnlVUklbXSwgbG9jYXRpb246IFNwb3RpZnlMb2NPYmogPSB7fSkgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5hZGQocGxheWxpc3QsIHRyYWNrcywgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgbW92ZVBsYXRQbGF5bGlzdFRyYWNrcyA9IGFzeW5jIChcclxuICAgIHBsYXlsaXN0OiBTcG90aWZ5VVJJLFxyXG4gICAgdHJhY2tzOiBBcnJheTx7IHVpZDogc3RyaW5nIH0+LFxyXG4gICAgbG9jYXRpb246IFNwb3RpZnlMb2NPYmogPSB7fSxcclxuKSA9PiBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkubW92ZShwbGF5bGlzdCwgdHJhY2tzLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVQbGF0UGxheWxpc3RUcmFja3MgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlVUkksIHRyYWNrczogQXJyYXk8eyB1aWQ6IHN0cmluZyB9PikgPT5cclxuICAgIFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5yZW1vdmUocGxheWxpc3QsIHRyYWNrcylcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MzMDAgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDMwMCkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uRW5oYW5jZUFQSS5nZXRQYWdlKHVyaSwgLyogaXRlcmF0aW9uICovIDAsIC8qIHNlc3Npb25JZCAqLyAwLCBvZmZzZXQsIGxpbWl0KSkuZW5oYW5jZVBhZ2VcclxuICAgICAgICAucGFnZUl0ZW1zIGFzIGFueVtdXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwKTogUHJvbWlzZTxhbnlbXT4gPT4ge1xyXG4gICAgY29uc3QgbmV4dFBhZ2VJdGVtcyA9IGF3YWl0IGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25nczMwMCh1cmksIG9mZnNldClcclxuICAgIGlmIChuZXh0UGFnZUl0ZW1zPy5sZW5ndGggPCAzMDApIHJldHVybiBuZXh0UGFnZUl0ZW1zXHJcbiAgICBlbHNlIHJldHVybiBuZXh0UGFnZUl0ZW1zLmNvbmNhdChmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3ModXJpLCBvZmZzZXQgKyAzMDApKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hMb2NhbFRyYWNrcyA9IGFzeW5jICgpID0+IGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Mb2NhbEZpbGVzQVBJLmdldFRyYWNrcygpXHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgTm9uIFNwb3RpZnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoVHJhY2tMRk1BUEkgPSBhc3luYyAoTEZNQXBpS2V5OiBzdHJpbmcsIGFydGlzdDogc3RyaW5nLCB0cmFja05hbWU6IHN0cmluZywgbGFzdEZtVXNlcm5hbWUgPSBcIlwiKSA9PiB7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFwiaHR0cHM6Ly93cy5hdWRpb3Njcm9iYmxlci5jb20vMi4wL1wiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJtZXRob2RcIiwgXCJ0cmFjay5nZXRJbmZvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImFwaV9rZXlcIiwgTEZNQXBpS2V5KVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJhcnRpc3RcIiwgYXJ0aXN0KVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ0cmFja1wiLCB0cmFja05hbWUpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImZvcm1hdFwiLCBcImpzb25cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidXNlcm5hbWVcIiwgbGFzdEZtVXNlcm5hbWUpXHJcblxyXG4gICAgcmV0dXJuIChhd2FpdCBmZXRjaCh1cmwpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpKSBhcyBmZXRjaFRyYWNrTEZNQVBJUmVzXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFRyYWNrTEZNQVBJTWVtb2l6ZWQgPSBtZW1vaXplMihmZXRjaFRyYWNrTEZNQVBJKVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFlvdXR1YmUgPSBhc3luYyAoWW91VHViZUFwaUtleTogc3RyaW5nLCBzZWFyY2hTdHJpbmc6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvc2VhcmNoXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInBhcnRcIiwgXCJzbmlwcGV0XCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcIm1heFJlc3VsdHNcIiwgXCIxMFwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJxXCIsIHNlYXJjaFN0cmluZylcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidHlwZVwiLCBcInZpZGVvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImtleVwiLCBZb3VUdWJlQXBpS2V5KVxyXG5cclxuICAgIHJldHVybiAoYXdhaXQgZmV0Y2godXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKSkgYXMgYW55W11cclxufVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hHUUxBbGJ1bVJlcyB7XHJcbiAgICBfX3R5cGVuYW1lOiBcImFsYnVtXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhcnRpc3RzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgcHJvZmlsZToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmlzdWFsczoge1xyXG4gICAgICAgICAgICAgICAgYXZhdGFySW1hZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNoYXJpbmdJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgY292ZXJBcnQ6IHtcclxuICAgICAgICBleHRyYWN0ZWRDb2xvcnM6IHtcclxuICAgICAgICAgICAgY29sb3JSYXc6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JMaWdodDoge1xyXG4gICAgICAgICAgICAgICAgaGV4OiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xvckRhcms6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgIH1cclxuICAgIGRpc2NzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgbnVtYmVyOiBudW1iZXJcclxuICAgICAgICAgICAgdHJhY2tzOiB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICByZWxlYXNlczoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICBkYXRlOiB7XHJcbiAgICAgICAgaXNvU3RyaW5nOiBzdHJpbmdcclxuICAgICAgICBwcmVjaXNpb246IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgcGxheWFiaWxpdHk6IHtcclxuICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgIHJlYXNvbjogc3RyaW5nXHJcbiAgICB9XHJcbiAgICBsYWJlbDogc3RyaW5nXHJcbiAgICBjb3B5cmlnaHQ6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICAgICAgdGV4dDogc3RyaW5nXHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIGNvdXJ0ZXN5TGluZTogc3RyaW5nXHJcbiAgICBzYXZlZDogYm9vbGVhblxyXG4gICAgc2hhcmluZ0luZm86IHtcclxuICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgc2hhcmVJZDogc3RyaW5nXHJcbiAgICB9XHJcbiAgICB0cmFja3M6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB1aWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB0cmFjazoge1xyXG4gICAgICAgICAgICAgICAgc2F2ZWQ6IGJvb2xlYW5cclxuICAgICAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBwbGF5Y291bnQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICBjb250ZW50UmF0aW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVsaW5raW5nSW5mb3JtYXRpb246IGFueVxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbE1pbGxpc2Vjb25kczogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwbGF5YWJpbGl0eToge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXlhYmxlOiBib29sZWFuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhcnRpc3RzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICBtb3JlQWxidW1zQnlBcnRpc3Q6IHtcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBkaXNjb2dyYXBoeToge1xyXG4gICAgICAgICAgICAgICAgcG9wdWxhclJlbGVhc2VzQWxidW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IG51bWJlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyQXJ0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlhYmlsaXR5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFyaW5nSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVJZDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIGZldGNoR1FMQXJ0aXN0UmVsYXRlZFJlcyA9IEFycmF5PHtcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgcHJvZmlsZToge1xyXG4gICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgdmlzdWFsczoge1xyXG4gICAgICAgIGF2YXRhckltYWdlOiB7XHJcbiAgICAgICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59PlxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXMgPSBBcnJheTx7XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogc3RyaW5nXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGR1cmF0aW9uOiBTcG90QXBpRHVyYXRpb25cclxuICAgIGFsYnVtOiBTcG90QXBpQWxidW1NaW5cclxuICAgIGFydGlzdHM6IFNwb3RBcGlBcnRpc3RNaW5bXVxyXG4gICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICBpc0V4cGxpY2l0OiBib29sZWFuXHJcbiAgICBpc1BsYXlhYmxlOiBib29sZWFuXHJcbiAgICBpc0xvY2FsOiBib29sZWFuXHJcbiAgICBpczE5UGx1c09ubHk6IGJvb2xlYW5cclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG59PlxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hXZWJQbGF5bGlzdFJlcyA9IEFycmF5PHtcclxuICAgIHVpZDogc3RyaW5nXHJcbiAgICBwbGF5SW5kZXg6IG51bGxcclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG4gICAgYWRkZWRCeToge1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmdcclxuICAgICAgICBkaXNwbGF5TmFtZTogc3RyaW5nXHJcbiAgICAgICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2UyW11cclxuICAgIH1cclxuICAgIGZvcm1hdExpc3RBdHRyaWJ1dGVzOiB7fVxyXG4gICAgdHlwZTogXCJ0cmFja1wiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bU1pblxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdE1pbltdXHJcbiAgICBkaXNjTnVtYmVyOiBudW1iZXJcclxuICAgIHRyYWNrTnVtYmVyOiBudW1iZXJcclxuICAgIGR1cmF0aW9uOiBTcG90QXBpRHVyYXRpb25cclxuICAgIGlzRXhwbGljaXQ6IGJvb2xlYW5cclxuICAgIGlzTG9jYWw6IGJvb2xlYW5cclxuICAgIGlzUGxheWFibGU6IGJvb2xlYW5cclxuICAgIGlzMTlQbHVzT25seTogYm9vbGVhblxyXG59PlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBmZXRjaFRyYWNrTEZNQVBJUmVzIHtcclxuICAgIHRyYWNrOiB7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgbWJpZDogc3RyaW5nXHJcbiAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICBkdXJhdGlvbjogc3RyaW5nXHJcbiAgICAgICAgc3RyZWFtYWJsZToge1xyXG4gICAgICAgICAgICBcIiN0ZXh0XCI6IHN0cmluZ1xyXG4gICAgICAgICAgICBmdWxsdHJhY2s6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgICBsaXN0ZW5lcnM6IHN0cmluZ1xyXG4gICAgICAgIHBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgYXJ0aXN0OiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICAgICAgYWxidW06IHtcclxuICAgICAgICAgICAgYXJ0aXN0OiBzdHJpbmdcclxuICAgICAgICAgICAgdGl0bGU6IHN0cmluZ1xyXG4gICAgICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgaW1hZ2U6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgIFwiI3RleHRcIjogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBzaXplOiBzdHJpbmdcclxuICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgXCJAYXR0clwiOiB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdXNlcnBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgdXNlcmxvdmVkOiBzdHJpbmdcclxuICAgICAgICB0b3B0YWdzOiB7XHJcbiAgICAgICAgICAgIHRhZzogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgICAgICB9PlxyXG4gICAgICAgIH1cclxuICAgICAgICB3aWtpOiB7XHJcbiAgICAgICAgICAgIHB1Ymxpc2hlZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHN1bW1hcnk6IHN0cmluZ1xyXG4gICAgICAgICAgICBjb250ZW50OiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBbGJ1bU1pbiB7XHJcbiAgICB0eXBlOiBcImFsYnVtXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhcnRpc3Q6IFNwb3RBcGlBcnRpc3RNaW5cclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlMltdXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUltYWdlMiB7XHJcbiAgICB1cmw6IHN0cmluZ1xyXG4gICAgbGFiZWw6IFwic21hbGxcIiB8IFwic3RhbmRhcmRcIiB8IFwibGFyZ2VcIiB8IFwieGxhcmdlXCJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpVHJhY2sge1xyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bVxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdFtdXHJcbiAgICBhdmFpbGFibGVfbWFya2V0czogc3RyaW5nW11cclxuICAgIGRpc2NfbnVtYmVyOiBudW1iZXJcclxuICAgIGR1cmF0aW9uX21zOiBudW1iZXJcclxuICAgIGV4cGxpY2l0OiBib29sZWFuXHJcbiAgICBleHRlcm5hbF9pZHM6IFNwb3RBcGlFSURzXHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaXNfcGxheWFibGU6IGJvb2xlYW5cclxuICAgIGxpbmtlZF9mcm9tOiB7fVxyXG4gICAgcmVzdHJpY3Rpb25zOiBTcG90QXBpUmVzdHJpY3Rpb25zXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHBvcHVsYXJpdHk6IG51bWJlclxyXG4gICAgcHJldmlld191cmw6IHN0cmluZ1xyXG4gICAgdHJhY2tfbnVtYmVyOiBudW1iZXJcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBpc19sb2NhbDogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBcnRpc3Qge1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBmb2xsb3dlcnM6IFNwb3RBcGlGb2xsb3dlcnNcclxuICAgIGdlbnJlczogc3RyaW5nW11cclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFydGlzdE1pbiB7XHJcbiAgICB0eXBlOiBcImFydGlzdFwiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBbGJ1bSB7XHJcbiAgICBhbGJ1bV90eXBlOiBzdHJpbmdcclxuICAgIHRvdGFsX3RyYWNrczogbnVtYmVyXHJcbiAgICBhdmFpbGFibGVfbWFya2V0czogc3RyaW5nW11cclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHJlbGVhc2VfZGF0ZTogc3RyaW5nXHJcbiAgICByZWxlYXNlX2RhdGVfcHJlY2lzaW9uOiBzdHJpbmdcclxuICAgIHJlc3RyaWN0aW9uczogU3BvdEFwaVJlc3RyaWN0aW9uc1xyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIGNvcHlyaWdodHM6IEFycmF5PHtcclxuICAgICAgICB0ZXh0OiBzdHJpbmdcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgIH0+XHJcbiAgICBleHRlcm5hbF9pZHM6IFNwb3RBcGlFSURzXHJcbiAgICBnZW5yZXM6IHN0cmluZ1tdXHJcbiAgICBsYWJlbDogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIGFsYnVtX2dyb3VwOiBzdHJpbmdcclxuICAgIGFydGlzdHM6IEFycmF5PHtcclxuICAgICAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICB9PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlFVXJscyB7XHJcbiAgICBzcG90aWZ5OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRUlEcyB7XHJcbiAgICBpc3JjOiBzdHJpbmdcclxuICAgIGVhbjogc3RyaW5nXHJcbiAgICB1cGM6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlJbWFnZSB7XHJcbiAgICB1cmw6IHN0cmluZ1xyXG4gICAgd2lkdGg6IG51bWJlclxyXG4gICAgaGVpZ2h0OiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpUmVzdHJpY3Rpb25zIHtcclxuICAgIHJlYXNvbjogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUZvbGxvd2VycyB7XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIHRvdGFsOiBudW1iZXJcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlEdXJhdGlvbiB7XHJcbiAgICBtaWxsaXNlY29uZHM6IG51bWJlclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaVBsYXlsaXN0IHtcclxuICAgIGNvbGxhYm9yYXRpdmU6IGJvb2xlYW5cclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgZm9sbG93ZXJzOiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgdG90YWw6IG51bWJlclxyXG4gICAgfVxyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogU3BvdGlmeUlEXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIG93bmVyOiBTcG90QXBpT3duZXJcclxuICAgIHB1YmxpYzogYm9vbGVhblxyXG4gICAgc25hcHNob3RfaWQ6IHN0cmluZ1xyXG4gICAgdHJhY2tzOiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgbGltaXQ6IG51bWJlclxyXG4gICAgICAgIG5leHQ6IHN0cmluZ1xyXG4gICAgICAgIG9mZnNldDogbnVtYmVyXHJcbiAgICAgICAgcHJldmlvdXM6IHN0cmluZ1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBhZGRlZF9hdDogc3RyaW5nXHJcbiAgICAgICAgICAgIGFkZGVkX2J5OiBTcG90QXBpT3duZXJcclxuICAgICAgICAgICAgaXNfbG9jYWw6IGJvb2xlYW5cclxuICAgICAgICAgICAgdHJhY2s6IFNwb3RBcGlUcmFja1xyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlPd25lciB7XHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGZvbGxvd2Vycz86IHtcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICB0b3RhbDogbnVtYmVyXHJcbiAgICB9XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBTcG90aWZ5SURcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBkaXNwbGF5X25hbWU/OiBzdHJpbmdcclxuICAgIG5hbWU/OiBzdHJpbmdcclxufVxyXG5cclxuLy9UT0RPOiBCZXR0ZXIgVFMgaW50ZXJmYWNlIGZvciByZWN1cnNpdmUgZmV0Y2hQbGF0Rm9sZGVyUmVzXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hQbGF0Rm9sZGVyUmVzIHtcclxuICAgIHR5cGU6IFwiZm9sZGVyXCIgfCBcInBsYWNlaG9sZGVyXCIgfCBcInBsYXlsaXN0XCJcclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG4gICAgaXRlbXM/OiBBcnJheTxmZXRjaFBsYXRGb2xkZXJSZXM+XHJcbiAgICBuYW1lPzogc3RyaW5nXHJcbiAgICB1cmk6IHN0cmluZ1xyXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmdcclxuICAgIGltYWdlcz86IFNwb3RBcGlJbWFnZTJbXVxyXG4gICAgbWFkZUZvcj86IG51bGxcclxuICAgIG93bmVyPzoge1xyXG4gICAgICAgIHR5cGU6IFwidXNlclwiXHJcbiAgICAgICAgdXJpOiBzdHJpbmdcclxuICAgICAgICB1c2VybmFtZTogc3RyaW5nXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGltYWdlczogYW55W11cclxuICAgIH1cclxuICAgIHRvdGFsTGVuZ3RoPzogbnVtYmVyXHJcbiAgICB1bmZpbHRlcmVkVG90YWxMZW5ndGg/OiBudW1iZXJcclxuICAgIHRvdGFsTGlrZXM/OiBudWxsXHJcbiAgICBkdXJhdGlvbj86IG51bGxcclxuICAgIGlzQ29sbGFib3JhdGl2ZT86IGJvb2xlYW5cclxuICAgIGlzTG9hZGVkPzogYm9vbGVhblxyXG4gICAgaXNPd25lZEJ5U2VsZj86IGJvb2xlYW5cclxuICAgIGlzUHVibGlzaGVkPzogYm9vbGVhblxyXG4gICAgaGFzRXBpc29kZXM/OiBudWxsXHJcbiAgICBoYXNTcG90aWZ5VHJhY2tzPzogbnVsbFxyXG4gICAgaGFzU3BvdGlmeUF1ZGlvYm9va3M/OiBudWxsXHJcbiAgICBjYW5BZGQ/OiBib29sZWFuXHJcbiAgICBjYW5SZW1vdmU/OiBib29sZWFuXHJcbiAgICBjYW5QbGF5PzogbnVsbFxyXG4gICAgZm9ybWF0TGlzdERhdGE/OiB7XHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgYXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxyXG4gICAgfSB8IG51bGxcclxuICAgIGNhblJlcG9ydEFubm90YXRpb25BYnVzZT86IGJvb2xlYW5cclxuICAgIGhhc0RhdGVBZGRlZD86IGJvb2xlYW5cclxuICAgIHBlcm1pc3Npb25zPzogbnVsbFxyXG4gICAgY29sbGFib3JhdG9ycz86IHtcclxuICAgICAgICBjb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IGFueVtdXHJcbiAgICB9XHJcbiAgICBpc05vdEZvdW5kPzogYm9vbGVhblxyXG4gICAgaXNGb3JiaWRkZW4/OiBib29sZWFuXHJcbn1cclxuIiwgImltcG9ydCB7IHJhbmdlIH0gZnJvbSBcImh0dHBzOi8vZXNtLnNoL2ZwLXRzL2xpYi9SZWFkb25seU5vbkVtcHR5QXJyYXlcIlxuaW1wb3J0IHsgU3BvdGlmeVVSSSB9IGZyb20gXCIuLi8uLi9zaGFyZWQvdXRpbC50c1wiXG5pbXBvcnQgeyB0b2dnbGVSYXRpbmcgfSBmcm9tIFwiLi9yYXRpbmdzLnRzXCJcblxuY29uc3QgeyBSZWFjdCB9ID0gU3BpY2V0aWZ5XG5cbmNvbnN0IFJhdGluZ0J1dHRvbiA9ICh7IGksIHVyaSB9OiB7IGk6IG51bWJlcjsgdXJpOiBTcG90aWZ5VVJJIH0pID0+IChcbiAgICA8YnV0dG9uXG4gICAgICAgIGNsYXNzTmFtZT1cIkJ1dHRvbi1zYy0xZHF5Nmx4LTAgQnV0dG9uLXRleHRCcmlnaHRBY2NlbnQtc20tMTYtYnV0dG9uVGVydGlhcnktaWNvbk9ubHktY29uZGVuc2VkLWlzVXNpbmdLZXlib2FyZC11c2VCcm93c2VyRGVmYXVsdEZvY3VzU3R5bGUgcmF0aW5nLWJ1dHRvblwiXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHRvZ2dsZVJhdGluZyh1cmksIGkpfVxuICAgID5cbiAgICAgICAgPHN2Z1xuICAgICAgICAgICAgcm9sZT1cImltZ1wiXG4gICAgICAgICAgICBoZWlnaHQ9ezE2fVxuICAgICAgICAgICAgd2lkdGg9ezE2fVxuICAgICAgICAgICAgdmlld0JveD1cIjAgMCAxNiAxNlwiXG4gICAgICAgICAgICBjbGFzc05hbWU9e2BTdmctc2MteXRrMjFlLTAgU3ZnLWltZy1pY29uIHJhdGluZy0ke2l9YH1cbiAgICAgICAgPlxuICAgICAgICAgICAgPHBhdGggZD1cIk0wIDhhOCA4IDAgMSAxIDE2IDBBOCA4IDAgMCAxIDAgOHptMTEuNzQ4LTEuOTdhLjc1Ljc1IDAgMCAwLTEuMDYtMS4wNmwtNC40NyA0LjQ3LTEuNDA1LTEuNDA2YS43NS43NSAwIDEgMC0xLjA2MSAxLjA2bDIuNDY2IDIuNDY3IDUuNTMtNS41M3pcIiAvPlxuICAgICAgICA8L3N2Zz5cbiAgICA8L2J1dHRvbj5cbilcblxuZXhwb3J0IGNvbnN0IERyb3Bkb3duID0gKHsgdXJpIH06IHsgdXJpOiBTcG90aWZ5VVJJIH0pID0+IChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJhdGluZy1kcm9wZG93blwiPlxuICAgICAgICB7cmFuZ2UoMSwgNSkubWFwKGkgPT4gKFxuICAgICAgICAgICAgPFJhdGluZ0J1dHRvbiBpPXtpfSB1cmk9e3VyaX0gLz5cbiAgICAgICAgKSl9XG4gICAgPC9kaXY+XG4pXG4iLCAiaW1wb3J0IHsgYXJyYXkgYXMgYXIsIGZ1bmN0aW9uIGFzIGYgfSBmcm9tIFwiaHR0cHM6Ly9lc20uc2gvZnAtdHNcIlxyXG5pbXBvcnQge1xyXG4gICAgYWRkUGxhdFBsYXlsaXN0VHJhY2tzLFxyXG4gICAgY3JlYXRlUGxhdFBsYXlsaXN0LFxyXG4gICAgZmV0Y2hQbGF0Rm9sZGVyLFxyXG4gICAgZmV0Y2hQbGF0UGxheWxpc3RDb250ZW50cyxcclxuICAgIHJlbW92ZVBsYXRQbGF5bGlzdFRyYWNrcyxcclxuICAgIHNldFBsYXRQbGF5bGlzdFZpc2liaWxpdHksXHJcbn0gZnJvbSBcIi4uLy4uL3NoYXJlZC9hcGkudHNcIlxyXG5pbXBvcnQgeyBwTWNoYWluIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC9mcC50c1wiXHJcbmltcG9ydCB7IFNwb3RpZnlMb2MsIFNwb3RpZnlVUkkgfSBmcm9tIFwiLi4vLi4vc2hhcmVkL3V0aWwudHNcIlxyXG5pbXBvcnQgeyB1cGRhdGVDb2xsZWN0aW9uQ29udHJvbHMsIHVwZGF0ZU5vd1BsYXlpbmdDb250cm9scywgdXBkYXRlVHJhY2tMaXN0Q29udHJvbHMgfSBmcm9tIFwiLi9jb250cm9scy50c3hcIlxyXG5pbXBvcnQgeyBDT05GSUcgfSBmcm9tIFwiLi9zZXR0aW5ncy50c1wiXHJcblxyXG5leHBvcnQgY29uc3QgbG9hZFJhdGluZ3MgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByYXRpbmdzRm9sZGVyID0gYXdhaXQgZmV0Y2hQbGF0Rm9sZGVyKENPTkZJRy5yYXRpbmdzRm9sZGVyVXJpKVxyXG5cclxuICAgIHBsYXlsaXN0VXJpcyA9IGYucGlwZShcclxuICAgICAgICByYXRpbmdzRm9sZGVyIS5pdGVtcyEsXHJcbiAgICAgICAgYXIubWFwKHAgPT4gW3AudXJpLCBOdW1iZXIocC5uYW1lISldIGFzIFtTcG90aWZ5VVJJLCBudW1iZXJdKSxcclxuICAgICAgICBhci5yZWR1Y2UoW10gYXMgU3BvdGlmeVVSSVtdLCAodXJpcywgW3VyaSwgcmF0aW5nXSkgPT4gKCh1cmlzW3JhdGluZ10gPSB1cmkpLCB1cmlzKSksXHJcbiAgICApXHJcblxyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgZ2xvYmFsVGhpcy50cmFja3NSYXRpbmdzID0gdHJhY2tzUmF0aW5ncyA9IGF3YWl0IGYucGlwZShcclxuICAgICAgICBwbGF5bGlzdFVyaXMsXHJcbiAgICAgICAgYXIubWFwKGZldGNoUGxhdFBsYXlsaXN0Q29udGVudHMpLFxyXG4gICAgICAgIHBzID0+IFByb21pc2UuYWxsKHBzKSwgLy8gUHJvbWlzZS5hbGwgZmxpcHMgZW1wdHkgdG8gdW5kZWZpbmVkXHJcbiAgICAgICAgcE1jaGFpbihhci5tYXAodHJhY2tzID0+IHRyYWNrcyA/PyBbXSkpLFxyXG4gICAgICAgIHBNY2hhaW4oYXIubWFwKGFyLm1hcCh0ID0+IHQudXJpKSkpLFxyXG4gICAgICAgIHBNY2hhaW4oYXIuZmxhdE1hcCgodHJhY2tVcmlzLCByYXRpbmcpID0+IHRyYWNrVXJpcy5tYXAodHJhY2tVcmkgPT4gW3RyYWNrVXJpLCByYXRpbmddIGFzIGNvbnN0KSkpLFxyXG4gICAgICAgIHBNY2hhaW4oXHJcbiAgICAgICAgICAgIGFyLnJlZHVjZSh7fSBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+LCAoYWNjLCBbdHJhY2tVcmksIHJhdGluZ10pID0+XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFjYywge1xyXG4gICAgICAgICAgICAgICAgICAgIFt0cmFja1VyaV06IE1hdGgubWF4KHJhdGluZywgYWNjW3RyYWNrVXJpXSA/PyAwKSxcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICksXHJcbiAgICApXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVSYXRpbmcgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCByYXRpbmc6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFJhdGluZyA9IHRyYWNrc1JhdGluZ3NbdXJpXVxyXG5cclxuICAgIGlmIChjdXJyZW50UmF0aW5nID09PSByYXRpbmcpIHJhdGluZyA9IDBcclxuXHJcbiAgICBpZiAoY3VycmVudFJhdGluZykge1xyXG4gICAgICAgIGYucGlwZShcclxuICAgICAgICAgICAgcGxheWxpc3RVcmlzLnNsaWNlKDAsIGN1cnJlbnRSYXRpbmcgKyAxKSxcclxuICAgICAgICAgICAgYXIuZmlsdGVyKEJvb2xlYW4pLFxyXG4gICAgICAgICAgICBhci5tYXAocGxheWxpc3RVcmkgPT4gU3BpY2V0aWZ5LlVSSS5mcm9tU3RyaW5nKHBsYXlsaXN0VXJpKS5pZCEpLFxyXG4gICAgICAgICAgICBhci5tYXAocGxheWxpc3RJZCA9PiByZW1vdmVQbGF0UGxheWxpc3RUcmFja3MocGxheWxpc3RJZCwgW3sgdXJpLCB1aWQ6IFwiXCIgfSBhcyB7IHVpZDogc3RyaW5nIH1dKSksXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHRyYWNrc1JhdGluZ3NbdXJpXSA9IHJhdGluZ1xyXG5cclxuICAgIGlmIChyYXRpbmcgPiAwKSB7XHJcbiAgICAgICAgbGV0IHBsYXlsaXN0VXJpID0gcGxheWxpc3RVcmlzW3JhdGluZ11cclxuXHJcbiAgICAgICAgaWYgKCFwbGF5bGlzdFVyaSkge1xyXG4gICAgICAgICAgICBwbGF5bGlzdFVyaSA9IGF3YWl0IGNyZWF0ZVBsYXRQbGF5bGlzdChyYXRpbmcudG9GaXhlZCgwKSwgU3BvdGlmeUxvYy5hZnRlci5mcm9tVXJpKENPTkZJRy5yYXRpbmdzRm9sZGVyVXJpKSlcclxuICAgICAgICAgICAgc2V0UGxhdFBsYXlsaXN0VmlzaWJpbGl0eShwbGF5bGlzdFVyaSwgZmFsc2UpXHJcbiAgICAgICAgICAgIHBsYXlsaXN0VXJpc1tyYXRpbmddID0gcGxheWxpc3RVcmlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFkZFBsYXRQbGF5bGlzdFRyYWNrcyhwbGF5bGlzdFVyaSwgW3VyaV0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbnBUcmFjayA9IFNwaWNldGlmeS5QbGF5ZXIuZGF0YS50cmFjaz8udXJpXHJcbiAgICBpZiAobnBUcmFjayA9PT0gdXJpKSB1cGRhdGVOb3dQbGF5aW5nQ29udHJvbHMobnBUcmFjaywgZmFsc2UpXHJcblxyXG4gICAgLy8gVE9ETzogT3B0aW1pemUgdGhpcywgZmluZCBhIHdheSB0byBkaXJlY3RseSB0YXJnZXQgdGhlIHBicyBmb3IgdGhhdCB1cmlcclxuICAgIHVwZGF0ZVRyYWNrTGlzdENvbnRyb2xzKClcclxuICAgIGNvbnN0IHsgcGF0aG5hbWUgfSA9IFNwaWNldGlmeS5QbGF0Zm9ybS5IaXN0b3J5LmxvY2F0aW9uXHJcbiAgICB1cGRhdGVDb2xsZWN0aW9uQ29udHJvbHMoU3BpY2V0aWZ5LlVSSS5mcm9tU3RyaW5nKHBhdGhuYW1lKSlcclxufVxyXG5cclxuZXhwb3J0IGxldCBwbGF5bGlzdFVyaXM6IFNwb3RpZnlVUklbXSA9IFtdXHJcbmV4cG9ydCBsZXQgdHJhY2tzUmF0aW5nczogUmVjb3JkPFNwb3RpZnlVUkksIG51bWJlcj4gPSB7fVxyXG4iLCAiaW1wb3J0IHsgdGFzayB9IGZyb20gXCJodHRwczovL2VzbS5zaC9mcC10c1wiXHJcbmltcG9ydCB7IGNyZWF0ZVBsYXRGb2xkZXIgfSBmcm9tIFwiLi4vLi4vc2hhcmVkL2FwaS50c1wiXHJcbmltcG9ydCB7IFNldHRpbmdzU2VjdGlvbiB9IGZyb20gXCIuLi8uLi9zaGFyZWQvc2V0dGluZ3MudHN4XCJcclxuaW1wb3J0IHsgU3BvdGlmeVVSSSB9IGZyb20gXCIuLi8uLi9zaGFyZWQvdXRpbC50c1wiXHJcbmltcG9ydCB7IGxvYWRSYXRpbmdzIH0gZnJvbSBcIi4vcmF0aW5ncy50c1wiXHJcblxyXG5jb25zdCBSQVRJTkdTX0ZPTERFUl9OQU1FID0gXCJSYXRpbmdzXCJcclxuXHJcbmNvbnN0IHNldHRpbmdzID0gbmV3IFNldHRpbmdzU2VjdGlvbihcIlN0YXIgUmF0aW5ncyAyXCIsIFwic3Rhci1yYXRpbmdzLTJcIilcclxuICAgIC5hZGRJbnB1dCh7IGlkOiBcImhlYXJ0VGhyZXNob2xkXCIsIGRlc2M6IFwiVGhyZXNob2xkIGZvciBsaWtpbmcgdHJha2NzXCIsIGlucHV0VHlwZTogXCJudW1iZXJcIiB9LCB0YXNrLm9mKFwiM1wiKSlcclxuICAgIC5hZGRJbnB1dCh7IGlkOiBcInNraXBUaHJlc2hvbGRcIiwgZGVzYzogXCJUaHJlc2hvbGQgZm9yIHNraXBwaW5nIHRyYWtjc1wiLCBpbnB1dFR5cGU6IFwibnVtYmVyXCIgfSwgdGFzay5vZihcIjFcIikpXHJcbiAgICAuYWRkSW5wdXQoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZDogXCJyYXRpbmdzRm9sZGVyVXJpXCIsXHJcbiAgICAgICAgICAgIGRlc2M6IFwiUmF0aW5ncyBmb2xkZXIgdXJpXCIsXHJcbiAgICAgICAgICAgIGlucHV0VHlwZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgIG9uQ2hhbmdlOiBsb2FkUmF0aW5ncyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFzeW5jICgpID0+IChhd2FpdCBjcmVhdGVQbGF0Rm9sZGVyKFJBVElOR1NfRk9MREVSX05BTUUpKS51cmksXHJcbiAgICApXHJcblxyXG5zZXR0aW5ncy5wdXNoU2V0dGluZ3MoKVxyXG5cclxuZXhwb3J0IGNvbnN0IENPTkZJRyA9IHNldHRpbmdzLnRvT2JqZWN0KCkgYXMge1xyXG4gICAgaGVhcnRUaHJlc2hvbGQ6IHN0cmluZ1xyXG4gICAgc2tpcFRocmVzaG9sZDogc3RyaW5nXHJcbiAgICByYXRpbmdzRm9sZGVyVXJpOiBTcG90aWZ5VVJJXHJcbn1cclxuIiwgImltcG9ydCB7IHRhc2sgfSBmcm9tIFwiaHR0cHM6Ly9lc20uc2gvZnAtdHNcIlxyXG5pbXBvcnQgeyBndWFyZDMsIGlzIH0gZnJvbSBcIi4vZnAudHNcIlxyXG5pbXBvcnQgeyBzbGVlcCB9IGZyb20gXCIuL3V0aWwudHNcIlxyXG5pbXBvcnQgeyBzdHJpbmcgYXMgc3RyIH0gZnJvbSBcImh0dHBzOi8vZXNtLnNoL2ZwLXRzXCJcclxuXHJcbmNvbnN0IHsgUmVhY3QsIFJlYWN0RE9NIH0gPSBTcGljZXRpZnlcclxuLy8gQHRzLWlnbm9yZVxyXG5jb25zdCB7IEJ1dHRvblNlY29uZGFyeSB9ID0gU3BpY2V0aWZ5LlJlYWN0Q29tcG9uZW50XHJcblxyXG50eXBlIEZpZWxkVG9Qcm9wczxBPiA9IE9taXQ8QSwgXCJ0eXBlXCI+XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmNvbnN0IHJlcXVpcmUgPSB3ZWJwYWNrQ2h1bmtvcGVuLnB1c2goW1tTeW1ib2woKV0sIHt9LCByZSA9PiByZV0pXHJcbmNvbnN0IGNhY2hlID0gT2JqZWN0LmtleXMocmVxdWlyZS5tKS5tYXAoaWQgPT4gcmVxdWlyZShpZCkpXHJcbmNvbnN0IG1vZHVsZXMgPSBjYWNoZVxyXG4gICAgLmZpbHRlcihtb2R1bGUgPT4gdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIilcclxuICAgIC5tYXAobW9kdWxlID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhtb2R1bGUpXHJcbiAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgfSlcclxuICAgIC5mbGF0KClcclxuY29uc3QgZnVuY3Rpb25Nb2R1bGVzID0gbW9kdWxlcy5maWx0ZXIobW9kdWxlID0+IHR5cGVvZiBtb2R1bGUgPT09IFwiZnVuY3Rpb25cIikgYXMgYW55W11cclxuXHJcbmNvbnN0IFNlY3Rpb25XcmFwcGVyID0gZnVuY3Rpb25Nb2R1bGVzLmZpbmQobSA9PiAvXmZ1bmN0aW9uIC5cXCguXFwpXFx7cmV0dXJuXFwoMCwuXFwuanN4XFwpXFwoLy50ZXN0KG0pKVxyXG5jb25zdCBTZWN0aW9uVGl0bGUgPSBmdW5jdGlvbk1vZHVsZXMuZmluZChtID0+IG0udG9TdHJpbmcoKS5pbmNsdWRlcyhcInRleHRUb0hpZ2hsaWdodFwiKSlcclxuY29uc3QgU2V0dGluZ0NvbHVtbiA9IGZ1bmN0aW9uTW9kdWxlcy5maW5kKFxyXG4gICAgbSA9PiBtLnRvU3RyaW5nKCkuaW5jbHVkZXMoXCJzZXRTZWN0aW9uRmlsdGVyTWF0Y2hRdWVyeVZhbHVlXCIpICYmIG0udG9TdHJpbmcoKS5pbmNsdWRlcyhcImZpbHRlck1hdGNoUXVlcnlcIiksXHJcbilcclxuY29uc3QgU2V0dGluZ1RleHQgPSBmdW5jdGlvbk1vZHVsZXMuZmluZChtID0+IG0udG9TdHJpbmcoKS5pbmNsdWRlcyhcInRleHRTdWJkdWVkXCIpICYmIG0udG9TdHJpbmcoKS5pbmNsdWRlcyhcInZpb2xhXCIpKVxyXG5cclxuY29uc3QgU2V0dGluZ1RvZ2dsZSA9IGZ1bmN0aW9uTW9kdWxlcy5maW5kKFxyXG4gICAgbSA9PiBtLnRvU3RyaW5nKCkuaW5jbHVkZXMoXCJjb25kZW5zZWRcIikgJiYgbS50b1N0cmluZygpLmluY2x1ZGVzKFwib25TZWxlY3RlZFwiKSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IGVudW0gRmllbGRUeXBlIHtcclxuICAgIEJVVFRPTiA9IFwiYnV0dG9uXCIsXHJcbiAgICBUT0dHTEUgPSBcInRvZ2dsZVwiLFxyXG4gICAgSU5QVVQgPSBcImlucHV0XCIsXHJcbiAgICBISURERU4gPSBcImhpZGRlblwiLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VGaWVsZCB7XHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICB0eXBlOiBGaWVsZFR5cGVcclxuICAgIGRlc2M6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTZXR0aW5nc0ZpZWxkID0gSGlkZGVuRmllbGQgfCBJbnB1dEZpZWxkIHwgQnV0dG9uRmllbGQgfCBUb2dnbGVGaWVsZFxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCdXR0b25GaWVsZCBleHRlbmRzIEJhc2VGaWVsZCB7XHJcbiAgICB0eXBlOiBGaWVsZFR5cGUuQlVUVE9OXHJcbiAgICB0ZXh0OiBzdHJpbmdcclxuICAgIG9uQ2xpY2s/OiAoKSA9PiB2b2lkXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUb2dnbGVGaWVsZCBleHRlbmRzIEJhc2VGaWVsZCB7XHJcbiAgICB0eXBlOiBGaWVsZFR5cGUuVE9HR0xFXHJcbiAgICBvblNlbGVjdGVkPzogKGNoZWNrZWQ6IGJvb2xlYW4pID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJbnB1dEZpZWxkIGV4dGVuZHMgQmFzZUZpZWxkIHtcclxuICAgIHR5cGU6IEZpZWxkVHlwZS5JTlBVVFxyXG4gICAgaW5wdXRUeXBlOiBzdHJpbmdcclxuICAgIG9uQ2hhbmdlPzogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBIaWRkZW5GaWVsZCBleHRlbmRzIEJhc2VGaWVsZCB7XHJcbiAgICB0eXBlOiBGaWVsZFR5cGUuSElEREVOXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTZXR0aW5nc1NlY3Rpb24ge1xyXG4gICAgcHJpdmF0ZSBzdG9wSGlzdG9yeUxpc3RlbmVyOiBhbnlcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbmFtZTogc3RyaW5nLCBwdWJsaWMgaWQ6IHN0cmluZywgcHVibGljIHNlY3Rpb25GaWVsZHM6IHsgW2tleTogc3RyaW5nXTogU2V0dGluZ3NGaWVsZCB9ID0ge30pIHt9XHJcblxyXG4gICAgcHVzaFNldHRpbmdzID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnN0b3BIaXN0b3J5TGlzdGVuZXIpIHRoaXMuc3RvcEhpc3RvcnlMaXN0ZW5lcigpXHJcblxyXG4gICAgICAgIHRoaXMuc3RvcEhpc3RvcnlMaXN0ZW5lciA9IFNwaWNldGlmeS5QbGF0Zm9ybS5IaXN0b3J5Lmxpc3RlbigoKSA9PiB0aGlzLnJlbmRlcigpKVxyXG4gICAgICAgIHRoaXMucmVuZGVyKClcclxuICAgIH1cclxuXHJcbiAgICB0b09iamVjdCA9ICgpID0+XHJcbiAgICAgICAgbmV3IFByb3h5KFxyXG4gICAgICAgICAgICB7fSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiAodGFyZ2V0LCBwcm9wKSA9PiBTZXR0aW5nc1NlY3Rpb24uZ2V0RmllbGRWYWx1ZSh0aGlzLmdldElkKHByb3AudG9TdHJpbmcoKSkpLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIClcclxuXHJcbiAgICBwcml2YXRlIHJlbmRlciA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB3aGlsZSAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVza3RvcC5zZXR0aW5ncy5zZWxlY3RMYW5ndWFnZVwiKSkge1xyXG4gICAgICAgICAgICBpZiAoU3BpY2V0aWZ5LlBsYXRmb3JtLkhpc3RvcnkubG9jYXRpb24ucGF0aG5hbWUgIT09IFwiL3ByZWZlcmVuY2VzXCIpIHJldHVyblxyXG4gICAgICAgICAgICBhd2FpdCBzbGVlcCgxMDApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhbGxTZXR0aW5nc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIueC1zZXR0aW5ncy1jb250YWluZXJcIikhXHJcblxyXG4gICAgICAgIGxldCBwbHVnaW5TZXR0aW5nc0NvbnRhaW5lciA9IEFycmF5LmZyb20oYWxsU2V0dGluZ3NDb250YWluZXIuY2hpbGRyZW4pLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09IHRoaXMuaWQpXHJcblxyXG4gICAgICAgIGlmICghcGx1Z2luU2V0dGluZ3NDb250YWluZXIpIHtcclxuICAgICAgICAgICAgcGx1Z2luU2V0dGluZ3NDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgIHBsdWdpblNldHRpbmdzQ29udGFpbmVyLmlkID0gdGhpcy5pZFxyXG4gICAgICAgICAgICBwbHVnaW5TZXR0aW5nc0NvbnRhaW5lci5jbGFzc05hbWUgPSBcInNldHRpbmdzQ29udGFpbmVyXCJcclxuICAgICAgICAgICAgYWxsU2V0dGluZ3NDb250YWluZXIuYXBwZW5kQ2hpbGQocGx1Z2luU2V0dGluZ3NDb250YWluZXIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBSZWFjdERPTS5yZW5kZXIoPHRoaXMuRmllbGRzQ29udGFpbmVyIC8+LCBwbHVnaW5TZXR0aW5nc0NvbnRhaW5lcilcclxuICAgIH1cclxuXHJcbiAgICBhZGRCdXR0b24gPSAocHJvcHM6IEZpZWxkVG9Qcm9wczxCdXR0b25GaWVsZD4pID0+IHtcclxuICAgICAgICB0aGlzLmFkZEZpZWxkKEZpZWxkVHlwZS5CVVRUT04sIHByb3BzKVxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgYWRkVG9nZ2xlID0gKHByb3BzOiBGaWVsZFRvUHJvcHM8VG9nZ2xlRmllbGQ+LCBkZWZhdWx0VmFsdWUgPSB0YXNrLm9mKGZhbHNlKSkgPT4ge1xyXG4gICAgICAgIHRoaXMuYWRkRmllbGQoRmllbGRUeXBlLlRPR0dMRSwgcHJvcHMsIGRlZmF1bHRWYWx1ZSlcclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIGFkZElucHV0ID0gKHByb3BzOiBGaWVsZFRvUHJvcHM8SW5wdXRGaWVsZD4sIGRlZmF1bHRWYWx1ZSA9IHRhc2sub2YoXCJcIikpID0+IHtcclxuICAgICAgICB0aGlzLmFkZEZpZWxkKEZpZWxkVHlwZS5JTlBVVCwgcHJvcHMsIGRlZmF1bHRWYWx1ZSlcclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkRmllbGQodHlwZTogRmllbGRUeXBlLCBvcHRzOiBGaWVsZFRvUHJvcHM8U2V0dGluZ3NGaWVsZD4sIGRlZmF1bHRWYWx1ZT86IGFueSkge1xyXG4gICAgICAgIGlmIChkZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nSWQgPSB0aGlzLmdldElkKG9wdHMuaWQpXHJcbiAgICAgICAgICAgIFNldHRpbmdzU2VjdGlvbi5zZXREZWZhdWx0RmllbGRWYWx1ZShzZXR0aW5nSWQsIGRlZmF1bHRWYWx1ZSlcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZmllbGQgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRzLCB7IHR5cGUgfSkgYXMgU2V0dGluZ3NGaWVsZFxyXG4gICAgICAgIHRoaXMuc2VjdGlvbkZpZWxkc1tvcHRzLmlkXSA9IGZpZWxkXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SWQgPSAobmFtZUlkOiBzdHJpbmcpID0+IFtcImV4dGVuc2lvbnNcIiwgdGhpcy5pZCwgbmFtZUlkXS5qb2luKFwiOlwiKVxyXG5cclxuICAgIHByaXZhdGUgdXNlU3RhdGVGb3IgPSA8QSw+KGlkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlU3RhdGVdID0gUmVhY3QudXNlU3RhdGUoU2V0dGluZ3NTZWN0aW9uLmdldEZpZWxkVmFsdWU8QT4oaWQpKVxyXG5cclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgKG5ld1ZhbHVlOiBBKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFZhbHVlU3RhdGUobmV3VmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NTZWN0aW9uLnNldEZpZWxkVmFsdWUoaWQhLCBuZXdWYWx1ZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdIGFzIGNvbnN0XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEZpZWxkVmFsdWUgPSA8Uiw+KGlkOiBzdHJpbmcpOiBSID0+IEpTT04ucGFyc2UoU3BpY2V0aWZ5LkxvY2FsU3RvcmFnZS5nZXQoaWQpID8/IFwibnVsbFwiKVxyXG5cclxuICAgIHN0YXRpYyBzZXRGaWVsZFZhbHVlID0gKGlkOiBzdHJpbmcsIG5ld1ZhbHVlOiBhbnkpID0+IFNwaWNldGlmeS5Mb2NhbFN0b3JhZ2Uuc2V0KGlkLCBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSkpXHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc2V0RGVmYXVsdEZpZWxkVmFsdWUgPSBhc3luYyAoaWQ6IHN0cmluZywgZGVmYXVsdFZhbHVlOiB0YXNrLlRhc2s8YW55PikgPT4ge1xyXG4gICAgICAgIGlmIChTZXR0aW5nc1NlY3Rpb24uZ2V0RmllbGRWYWx1ZShpZCkgPT09IG51bGwpIFNldHRpbmdzU2VjdGlvbi5zZXRGaWVsZFZhbHVlKGlkLCBhd2FpdCBkZWZhdWx0VmFsdWUoKSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIEZpZWxkc0NvbnRhaW5lciA9ICgpID0+IChcclxuICAgICAgICA8U2VjdGlvbldyYXBwZXIgZmlsdGVyTWF0Y2hRdWVyeT17dGhpcy5uYW1lfT5cclxuICAgICAgICAgICAgPFNlY3Rpb25UaXRsZT57dGhpcy5uYW1lfTwvU2VjdGlvblRpdGxlPlxyXG4gICAgICAgICAgICB7T2JqZWN0LnZhbHVlcyh0aGlzLnNlY3Rpb25GaWVsZHMpLm1hcChmaWVsZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc1R5cGUgPSBpczxTZXR0aW5nc0ZpZWxkPihcInR5cGVcIilcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3VhcmQzKFtcclxuICAgICAgICAgICAgICAgICAgICBbaXNUeXBlPElucHV0RmllbGQ+KEZpZWxkVHlwZS5JTlBVVCksIHRoaXMuSW5wdXRGaWVsZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgW2lzVHlwZShGaWVsZFR5cGUuQlVUVE9OKSwgdGhpcy5CdXR0b25GaWVsZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgW2lzVHlwZShGaWVsZFR5cGUuVE9HR0xFKSwgdGhpcy5Ub2dnbGVGaWVsZF0sXHJcbiAgICAgICAgICAgICAgICBdKSgoKSA9PiA8PjwvPikoZmllbGQpXHJcbiAgICAgICAgICAgIH0pfVxyXG4gICAgICAgIDwvU2VjdGlvbldyYXBwZXI+XHJcbiAgICApXHJcblxyXG4gICAgU2V0dGluZ0ZpZWxkID0gKHsgZmllbGQsIGNoaWxkcmVuIH06IHsgZmllbGQ6IFNldHRpbmdzRmllbGQ7IGNoaWxkcmVuOiBhbnkgfSkgPT4gKFxyXG4gICAgICAgIDxTZXR0aW5nQ29sdW1uIGZpbHRlck1hdGNoUXVlcnk9e2ZpZWxkLmlkfT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ4LXNldHRpbmdzLWZpcnN0Q29sdW1uXCI+XHJcbiAgICAgICAgICAgICAgICA8U2V0dGluZ1RleHQgaHRtbEZvcj17ZmllbGQuaWR9PntmaWVsZC5kZXNjfTwvU2V0dGluZ1RleHQ+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIngtc2V0dGluZ3Mtc2Vjb25kQ29sdW1uXCI+e2NoaWxkcmVufTwvZGl2PlxyXG4gICAgICAgIDwvU2V0dGluZ0NvbHVtbj5cclxuICAgIClcclxuXHJcbiAgICBCdXR0b25GaWVsZCA9IChmaWVsZDogQnV0dG9uRmllbGQpID0+IChcclxuICAgICAgICA8dGhpcy5TZXR0aW5nRmllbGQgZmllbGQ9e2ZpZWxkfT5cclxuICAgICAgICAgICAgPEJ1dHRvblNlY29uZGFyeSBpZD17ZmllbGQuaWR9IGJ1dHRvblNpemU9XCJzbVwiIG9uQ2xpY2s9e2ZpZWxkLm9uQ2xpY2t9IGNsYXNzTmFtZT1cIngtc2V0dGluZ3MtYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICB7ZmllbGQudGV4dH1cclxuICAgICAgICAgICAgPC9CdXR0b25TZWNvbmRhcnk+XHJcbiAgICAgICAgPC90aGlzLlNldHRpbmdGaWVsZD5cclxuICAgIClcclxuXHJcbiAgICBUb2dnbGVGaWVsZCA9IChmaWVsZDogVG9nZ2xlRmllbGQpID0+IHtcclxuICAgICAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IHRoaXMudXNlU3RhdGVGb3I8Ym9vbGVhbj4oZmllbGQuaWQpXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRoaXMuU2V0dGluZ0ZpZWxkIGZpZWxkPXtmaWVsZH0+XHJcbiAgICAgICAgICAgICAgICA8U2V0dGluZ1RvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIGlkPXtmaWVsZC5pZH1cclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17U2V0dGluZ3NTZWN0aW9uLmdldEZpZWxkVmFsdWUodGhpcy5nZXRJZChmaWVsZC5pZCkpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0ZWQ9eyhjaGVja2VkOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFZhbHVlKGNoZWNrZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLm9uU2VsZWN0ZWQ/LihjaGVja2VkKVxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1idXR0b25cIlxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC90aGlzLlNldHRpbmdGaWVsZD5cclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgSW5wdXRGaWVsZCA9IChmaWVsZDogSW5wdXRGaWVsZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdGhpcy51c2VTdGF0ZUZvcjxzdHJpbmc+KGZpZWxkLmlkKVxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0aGlzLlNldHRpbmdGaWVsZCBmaWVsZD17ZmllbGR9PlxyXG4gICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9e2ZpZWxkLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpcj1cImx0clwiXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1NldHRpbmdzU2VjdGlvbi5nZXRGaWVsZFZhbHVlKHRoaXMuZ2V0SWQoZmllbGQuaWQpKX1cclxuICAgICAgICAgICAgICAgICAgICB0eXBlPXtmaWVsZC5pbnB1dFR5cGV9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGUuY3VycmVudFRhcmdldC52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRWYWx1ZSh2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQub25DaGFuZ2U/Lih2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC90aGlzLlNldHRpbmdGaWVsZD5cclxuICAgICAgICApXHJcbiAgICB9XHJcbn1cclxuIiwgImV4cG9ydCBjb25zdCBSQVRJTkdTX0ZPTERFUl9OQU1FID0gXCJSYXRpbmdzXCJcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRUcmFja0xpc3RzID0gKCkgPT4gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxEaXZFbGVtZW50PihcIi5tYWluLXRyYWNrTGlzdC1pbmRleGFibGVcIikpXHJcbmV4cG9ydCBjb25zdCBnZXRUcmFja0xpc3RUcmFja3MgPSAodHJhY2tMaXN0OiBIVE1MRGl2RWxlbWVudCkgPT5cclxuICAgIEFycmF5LmZyb20odHJhY2tMaXN0LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTERpdkVsZW1lbnQ+KFwiZGl2Lm1haW4tdHJhY2tMaXN0LXRyYWNrTGlzdFJvd1wiKSlcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRUcmFja0xpc3RUcmFja1VyaSA9ICh0cmFjazogSFRNTERpdkVsZW1lbnQpID0+IChcclxuICAgICh0cmFjayA9IE9iamVjdC52YWx1ZXModHJhY2spWzBdLmNoaWxkLmNoaWxkLmNoaWxkLmNoaWxkKSxcclxuICAgICh0cmFjayBhcyBhbnkpLnBlbmRpbmdQcm9wcy51cmkgPz8gKHRyYWNrIGFzIGFueSkuY2hpbGQucGVuZGluZ1Byb3BzLnVyaVxyXG4pXHJcblxyXG5leHBvcnQgY29uc3QgZ2V0Tm93UGxheWluZ0JhciA9ICgpID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTERpdkVsZW1lbnQ+KFwiZGl2Lm1haW4tbm93UGxheWluZ0Jhci1ub3dQbGF5aW5nQmFyXCIpIVxyXG5leHBvcnQgY29uc3QgZ2V0Q29sbGVjdGlvbkFjdGlvbkJhclJvdyA9ICgpID0+XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxEaXZFbGVtZW50PihgZGl2Lm1haW4tYWN0aW9uQmFyLUFjdGlvbkJhclJvd2ApIVxyXG5cclxuZXhwb3J0IGNvbnN0IHBsYXlsaXN0QnV0dG9uU2VsZWN0b3IgPSBgYnV0dG9uW2FyaWEtbGFiZWw9XCJBZGQgdG8gTGlrZWQgU29uZ3NcIl0sIGJ1dHRvblthcmlhLWxhYmVsPVwiQWRkIHRvIHBsYXlsaXN0XCJdYFxyXG5leHBvcnQgY29uc3QgZ2V0UGxheWxpc3RCdXR0b24gPSAocGFyZW50OiBIVE1MRWxlbWVudCkgPT5cclxuICAgIHBhcmVudC5xdWVyeVNlbGVjdG9yPEhUTUxCdXR0b25FbGVtZW50PihwbGF5bGlzdEJ1dHRvblNlbGVjdG9yKSFcclxuZXhwb3J0IGNvbnN0IGdldENvbGxlY3Rpb25QbGF5bGlzdEJ1dHRvbiA9ICgpID0+IHtcclxuICAgIGNvbnN0IGFiID0gZ2V0Q29sbGVjdGlvbkFjdGlvbkJhclJvdygpXHJcbiAgICByZXR1cm4gYWIucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oXHJcbiAgICAgICAgYGJ1dHRvblthcmlhLWxhYmVsPVwiUmVtb3ZlIGZyb20gWW91ciBMaWJyYXJ5XCJdLCBidXR0b25bYXJpYS1sYWJlbD1cIlNhdmUgdG8gWW91ciBMaWJyYXJ5XCJdYCxcclxuICAgICkhXHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIkFBQUEsT0FBUyxXQUFBQSxPQUFlLHFDQ0F4QixPQUFTLFNBQVNDLEVBQUksWUFBWUMsTUFBUyx1QkNBM0MsT0FDSSxTQUFTQyxFQUNULE1BQUFDLEdBQ0EsVUFBVUMsR0FDVixVQUFVQyxHQUVWLGFBQWFDLEdBQ2IsWUFBWUMsTUFDVCx1QkFDUCxPQUFTLFNBQUFDLEdBQU8sV0FBQUMsT0FBZSxvQ0FLeEIsSUFBTUMsRUFDVEMsR0FDQ0MsR0FBTUQsQ0FBNEYsRUFzQ2hHLElBQU1FLEVBQ0ZDLEdBQ1AsTUFBT0MsR0FDSEQsRUFBRSxNQUFNQyxDQUFFLEVBRUxDLEVBQ0xDLEdBQ1VDLEdBQ2JDLEdBQ0dBLEVBQU1GLENBQUMsSUFBTUMsRUFTZCxJQUFNRSxFQUNSQyxHQUNNQyxHQUNIQyxFQUFFLEtBQUtDLEVBQUcsU0FBU0gsQ0FBQyxFQUFNRyxFQUFHLElBQUlGLENBQUMsRUFBR0csR0FBTSxRQUFRLElBQUlBLENBQUUsRUFBR0MsRUFBUUYsRUFBRyxPQUFPLENBQUMsRUFnQmhGLElBQU1HLEVBQWdDQyxHQUN6Q0MsRUFBRSxLQUFLRCxFQUFJQyxFQUFFLE9BQVFDLEdBQVdDLEdBQUcsVUFBVSxLQUFLLFNBQVMsRUFBRUMsR0FBSSxFQUFFLENBQUMsRUFBR0gsRUFBRSxRQUFRLEVDdkZyRixPQUFTLFNBQVNJLEdBQUcsWUFBWUMsTUFBUyx1QkFVbkMsSUFBTUMsRUFBYSxDQUN0QixPQUFRLENBQ0osTUFBT0QsRUFBRSxTQUFTLENBQUUsT0FBUSxPQUFRLENBQWtCLEVBQ3RELFFBQVVFLElBQXFCLENBQUUs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ZEYsR0FBb0IsUUFBUUQsRUFBYSxDQUNyQyxVQUFXLEdBQ1gsUUFBUyxFQUNiLENBQUMsRUFFVCxDQUFDLEVBQUUsUUFBUSxTQUFTLEtBQU0sQ0FDdEIsVUFBVyxHQUNYLFFBQVMsRUFDYixDQUFDLEVBRUQsVUFBVSxTQUFTLFFBQVEsT0FBTyxNQUFPLENBQUUsU0FBQUksQ0FBUyxJQUE0QixDQUN2REMsR0FBUSxDQUFDWCxFQUFJLFFBQVNBLEVBQUksU0FBVUEsRUFBSSxnQkFBZ0IsQ0FBQyxFQUM1RFUsQ0FBUSxHQUUxQkUsRUFBeUJaLEVBQUksV0FBV1UsQ0FBUSxDQUFDLENBQ3JELENBQUMiLAogICJuYW1lcyI6IFsiYW55UGFzcyIsICJhciIsICJmIiwgImFyIiwgImVxIiwgInN0ciIsICJyZWMiLCAic2ciLCAiZiIsICJndWFyZCIsICJtZW1vaXplIiwgImd1YXJkMyIsICJicmFuY2hlcyIsICJndWFyZCIsICJwTWNoYWluIiwgImYiLCAiZmEiLCAiaXMiLCAiYyIsICJhIiwgImZpZWxkIiwgImNodW5ja2lmeSIsICJuIiwgImciLCAiZiIsICJhciIsICJwcyIsICJwTWNoYWluIiwgIm1lbW9pemUyIiwgImZuIiwgImYiLCAibWVtb2l6ZSIsICJlcSIsICJzdHIiLCAiYSIsICJmIiwgIlNwb3RpZnlMb2MiLCAidXJpIiwgInVpZCIsICJzbGVlcCIsICJtcyIsICJyZXNvbHZlIiwgImZldGNoR1FMQWxidW0iLCAidXJpIiwgIm9mZnNldCIsICJsaW1pdCIsICJmZXRjaFdlYkFydGlzdHNTcG90IiwgImNodW5ja2lmeSIsICJpZHMiLCAiZmV0Y2hXZWJQbGF5bGlzdHNTcG90IiwgImlkIiwgImZldGNoV2ViQWxidW1zU3BvdCIsICJmZXRjaFdlYlRyYWNrc1Nwb3QiLCAiZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3MiLCAidXJpIiwgIm9mZnNldCIsICJsaW1pdCIsICJmZXRjaFBsYXRQbGF5bGlzdENvbnRlbnRzIiwgImNyZWF0ZVBsYXRGb2xkZXIiLCAibmFtZSIsICJsb2NhdGlvbiIsICJjcmVhdGVQbGF0UGxheWxpc3QiLCAibmFtZSIsICJsb2NhdGlvbiIsICJzZXRQbGF0UGxheWxpc3RWaXNpYmlsaXR5IiwgInBsYXlsaXN0IiwgInZpc2libGVGb3JBbGwiLCAiZmV0Y2hQbGF0Rm9sZGVyIiwgImZvbGRlciIsICJhZGRQbGF0UGxheWxpc3RUcmFja3MiLCAicGxheWxpc3QiLCAidHJhY2tzIiwgImxvY2F0aW9uIiwgInJlbW92ZVBsYXRQbGF5bGlzdFRyYWNrcyIsICJwbGF5bGlzdCIsICJ0cmFja3MiLCAiZmV0Y2hUcmFja0xGTUFQSSIsICJMRk1BcGlLZXkiLCAiYXJ0aXN0IiwgInRyYWNrTmFtZSIsICJsYXN0Rm1Vc2VybmFtZSIsICJ1cmwiLCAicmVzIiwgImZldGNoVHJhY2tMRk1BUElNZW1vaXplZCIsICJtZW1vaXplMiIsICJyYW5nZSIsICJhciIsICJmIiwgInRhc2siLCAidGFzayIsICJSZWFjdCIsICJSZWFjdERPTSIsICJCdXR0b25TZWNvbmRhcnkiLCAicmVxdWlyZSIsICJyZSIsICJjYWNoZSIsICJpZCIsICJtb2R1bGVzIiwgIm1vZHVsZSIsICJmdW5jdGlvbk1vZHVsZXMiLCAiU2VjdGlvbldyYXBwZXIiLCAibSIsICJTZWN0aW9uVGl0bGUiLCAiU2V0dGluZ0NvbHVtbiIsICJTZXR0aW5nVGV4dCIsICJTZXR0aW5nVG9nZ2xlIiwgIlNldHRpbmdzU2VjdGlvbiIsICJfU2V0dGluZ3NTZWN0aW9uIiwgIm5hbWUiLCAiaWQiLCAic2VjdGlvbkZpZWxkcyIsICJ0YXJnZXQiLCAicHJvcCIsICJzbGVlcCIsICJhbGxTZXR0aW5nc0NvbnRhaW5lciIsICJwbHVnaW5TZXR0aW5nc0NvbnRhaW5lciIsICJSZWFjdERPTSIsICJSZWFjdCIsICJwcm9wcyIsICJkZWZhdWx0VmFsdWUiLCAidGFzayIsICJuYW1lSWQiLCAidmFsdWUiLCAic2V0VmFsdWVTdGF0ZSIsICJuZXdWYWx1ZSIsICJTZWN0aW9uV3JhcHBlciIsICJTZWN0aW9uVGl0bGUiLCAiZmllbGQiLCAiaXNUeXBlIiwgImlzIiwgImd1YXJkMyIsICJjaGlsZHJlbiIsICJTZXR0aW5nQ29sdW1uIiwgIlNldHRpbmdUZXh0IiwgIkJ1dHRvblNlY29uZGFyeSIsICJzZXRWYWx1ZSIsICJTZXR0aW5nVG9nZ2xlIiwgImNoZWNrZWQiLCAiZSIsICJ0eXBlIiwgIm9wdHMiLCAic2V0dGluZ0lkIiwgIlJBVElOR1NfRk9MREVSX05BTUUiLCAic2V0dGluZ3MiLCAiU2V0dGluZ3NTZWN0aW9uIiwgInRhc2siLCAibG9hZFJhdGluZ3MiLCAiY3JlYXRlUGxhdEZvbGRlciIsICJDT05GSUciLCAibG9hZFJhdGluZ3MiLCAicmF0aW5nc0ZvbGRlciIsICJmZXRjaFBsYXRGb2xkZXIiLCAiQ09ORklHIiwgInBsYXlsaXN0VXJpcyIsICJmIiwgImFyIiwgInAiLCAidXJpcyIsICJ1cmkiLCAicmF0aW5nIiwgInRyYWNrc1JhdGluZ3MiLCAiZmV0Y2hQbGF0UGxheWxpc3RDb250ZW50cyIsICJwcyIsICJwTWNoYWluIiwgInRyYWNrcyIsICJ0IiwgInRyYWNrVXJpcyIsICJ0cmFja1VyaSIsICJhY2MiLCAidG9nZ2xlUmF0aW5nIiwgImN1cnJlbnRSYXRpbmciLCAicGxheWxpc3RVcmkiLCAicGxheWxpc3RJZCIsICJyZW1vdmVQbGF0UGxheWxpc3RUcmFja3MiLCAiY3JlYXRlUGxhdFBsYXlsaXN0IiwgIlNwb3RpZnlMb2MiLCAic2V0UGxhdFBsYXlsaXN0VmlzaWJpbGl0eSIsICJhZGRQbGF0UGxheWxpc3RUcmFja3MiLCAibnBUcmFjayIsICJ1cGRhdGVOb3dQbGF5aW5nQ29udHJvbHMiLCAidXBkYXRlVHJhY2tMaXN0Q29udHJvbHMiLCAicGF0aG5hbWUiLCAidXBkYXRlQ29sbGVjdGlvbkNvbnRyb2xzIiwgIlJlYWN0IiwgIlJhdGluZ0J1dHRvbiIsICJpIiwgInVyaSIsICJ0b2dnbGVSYXRpbmciLCAiRHJvcGRvd24iLCAicmFuZ2UiLCAiZ2V0VHJhY2tMaXN0cyIsICJnZXRUcmFja0xpc3RUcmFja3MiLCAidHJhY2tMaXN0IiwgImdldFRyYWNrTGlzdFRyYWNrVXJpIiwgInRyYWNrIiwgImdldE5vd1BsYXlpbmdCYXIiLCAiZ2V0Q29sbGVjdGlvbkFjdGlvbkJhclJvdyIsICJwbGF5bGlzdEJ1dHRvblNlbGVjdG9yIiwgImdldFBsYXlsaXN0QnV0dG9uIiwgInBhcmVudCIsICJnZXRDb2xsZWN0aW9uUGxheWxpc3RCdXR0b24iLCAiVVJJIiwgIlJlYWN0IiwgIlJlYWN0RE9NIiwgImNvbG9yQnlSYXRpbmciLCAiY29sb3JpemVQbGF5bGlzdEJ1dHRvbiIsICJidG4iLCAicmF0aW5nIiwgInN2ZyIsICJsYXN0RGl2IiwgIndyYXBEcm9wZG93bkluc2lkZVBsYXlsaXN0QnV0dG9uIiwgInBiIiwgInVyaSIsICJmb3JjZWQiLCAiZGl2IiwgIkRyb3Bkb3duIiwgImluc3RhbmNlIiwgInBvcHBlciIsICJib3giLCAiZiIsICJjaGlsZHJlbiIsICJlbGVtZW50IiwgInVwZGF0ZU5vd1BsYXlpbmdDb250cm9scyIsICJuZXdUcmFjayIsICJ1cGRhdGVEcm9wZG93biIsICJucGIiLCAiZ2V0Tm93UGxheWluZ0JhciIsICJnZXRQbGF5bGlzdEJ1dHRvbiIsICJ0cmFja3NSYXRpbmdzIiwgInVwZGF0ZVRyYWNrTGlzdENvbnRyb2xzIiwgInRyYWNrTGlzdHMiLCAiZ2V0VHJhY2tMaXN0cyIsICJhciIsICJ0cmFja0xpc3QiLCAiZ2V0VHJhY2tMaXN0VHJhY2tzIiwgInRyYWNrIiwgImdldFRyYWNrTGlzdFRyYWNrVXJpIiwgInIiLCAidXBkYXRlQ29sbGVjdGlvbkNvbnRyb2xzIiwgInVyaXMiLCAiZmV0Y2hHUUxBbGJ1bSIsICJ4IiwgImZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzIiwgImZldGNoUGxhdFBsYXlsaXN0Q29udGVudHMiLCAicmF0aW5ncyIsICJhY2MiLCAiZ2V0Q29sbGVjdGlvblBsYXlsaXN0QnV0dG9uIiwgIlVSSSIsICJsb2FkUmF0aW5ncyIsICJucFRyYWNrIiwgIkNPTkZJRyIsICJ0cmFja3NSYXRpbmdzIiwgInVwZGF0ZU5vd1BsYXlpbmdDb250cm9scyIsICJtYWluRWxlbWVudCIsICJtYWluRWxlbWVudE9ic2VydmVyIiwgInVwZGF0ZVRyYWNrTGlzdENvbnRyb2xzIiwgIm5leHRNYWluRWxlbWVudCIsICJwYXRobmFtZSIsICJhbnlQYXNzIiwgInVwZGF0ZUNvbGxlY3Rpb25Db250cm9scyJdCn0K
(async () => {
    if (!document.getElementById("star-ratings-2-css")) {
        const el = document.createElement("style")
        el.id = "star-ratings-2-css"
        
        el.textContent = "svg.rating-1{fill:#ed5564!important}svg.rating-2{fill:#ffce54!important}svg.rating-3{fill:#a0d568!important}svg.rating-4{fill:#4fc1e8!important}svg.rating-5{fill:#ac92eb!important}\n/*# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vZXh0ZW5zaW9ucy9zdGFyLXJhdGluZ3MtMi9hc3NldHMvc3R5bGVzLmNzcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsic3ZnLnJhdGluZy0xe2ZpbGw6I2VkNTU2NCAhaW1wb3J0YW50fXN2Zy5yYXRpbmctMntmaWxsOiNmZmNlNTQgIWltcG9ydGFudH1zdmcucmF0aW5nLTN7ZmlsbDojYTBkNTY4ICFpbXBvcnRhbnR9c3ZnLnJhdGluZy00e2ZpbGw6IzRmYzFlOCAhaW1wb3J0YW50fXN2Zy5yYXRpbmctNXtmaWxsOiNhYzkyZWIgIWltcG9ydGFudH0iXSwKICAibWFwcGluZ3MiOiAiQUFBQSxHQUFHLENBQUMsU0FBUyxLQUFLLGlCQUFrQixDQUFDLEdBQUcsQ0FBQyxTQUFTLEtBQUssaUJBQWtCLENBQUMsR0FBRyxDQUFDLFNBQVMsS0FBSyxpQkFBa0IsQ0FBQyxHQUFHLENBQUMsU0FBUyxLQUFLLGlCQUFrQixDQUFDLEdBQUcsQ0FBQyxTQUFTLEtBQUssaUJBQWtCIiwKICAibmFtZXMiOiBbXQp9Cg== */\n"
        document.head.appendChild(el)
    }
})()