import{anyPass as h}from"https://esm.sh/fp-ts-std/Predicate";import{tupled as c}from"https://esm.sh/fp-ts/function";import{array as n,eq as u,string as A,record as I,semigroup as U,function as a}from"https://esm.sh/fp-ts";import{guard as L,memoize as g}from"https://esm.sh/fp-ts-std/Function";var d=t=>async e=>t(await e);var s=t=>e=>a.flow(n.chunksOf(t),n.map(e),r=>Promise.all(r),d(n.flatten));var p=t=>a.pipe(t,a.tupled,g(u.contramap(JSON.stringify)(A.Eq)),a.untupled);import{array as E,function as l}from"https://esm.sh/fp-ts";var _={before:{start:l.constant({before:"start"}),fromUri:t=>({before:{uri:t}}),fromUid:t=>({before:{uid:t}})},after:{end:l.constant({after:"end"}),fromUri:t=>({after:{uri:t}}),fromUid:t=>({after:{uid:t}})}};var j=s(50)(async t=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/artists?ids=${t.join(",")}`)).artists),M=s(1)(async([t])=>[await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/playlists/${t}`)]),q=s(50)(async t=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/albums?ids=${t.join(",")}`)).albums),N=s(50)(async t=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/tracks?ids=${t.join(",")}`)).tracks);var b=async(t,e=0,r=300)=>(await Spicetify.Platform.EnhanceAPI.getPage(t,0,0,e,r)).enhancePage.pageItems,o=async(t,e=0)=>{let r=await b(t,e);return r?.length<300?r:r.concat(o(t,e+300))};var S=async(t,e,r,f="")=>{let i=new URL("https://ws.audioscrobbler.com/2.0/");return i.searchParams.append("method","track.getInfo"),i.searchParams.append("api_key",t),i.searchParams.append("artist",e),i.searchParams.append("track",r),i.searchParams.append("format","json"),i.searchParams.append("username",f),await fetch(i).then(m=>m.json())},$=p(S);var{URI:R}=Spicetify,y=new Array,P=async t=>{y=await o(t),Spicetify.Platform.PlayerAPI.clearQueue(),Spicetify.Platform.PlayerAPI.addToQueue(y)};new Spicetify.ContextMenu.Item("Play enhanced songs",c(P),c(h([R.isPlaylistV1OrV2])),"enhance").register();
//! Does location actually point to document.body?
