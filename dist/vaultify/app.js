var d=(e,t)=>()=>(e&&(t=e(e=0)),t);import{array as I,eq as Z,string as tt,record as ut,semigroup as ft,function as g}from"https://esm.sh/fp-ts";import{guard as L,memoize as et}from"https://esm.sh/fp-ts-std/Function";var w,T,F,m,f,v,A=d(()=>{w=e=>L(e),T=e=>L(e),F=e=>async t=>e(await t),m=e=>t=>i=>i[e]===t,f=e=>t=>g.flow(I.chunksOf(e),I.map(t),i=>Promise.all(i),F(I.flatten)),v=e=>g.pipe(e,g.tupled,et(Z.contramap(JSON.stringify)(tt.Eq)),g.untupled)});import{array as St,function as U}from"https://esm.sh/fp-ts";var bt,S,E,b,h=d(()=>{bt={before:{start:U.constant({before:"start"}),fromUri:e=>({before:{uri:e}}),fromUid:e=>({before:{uid:e}})},after:{end:U.constant({after:"end"}),fromUri:e=>({after:{uri:e}}),fromUid:e=>({after:{uid:e}})}};S=e=>new Promise(t=>setTimeout(t,e)),E=e=>e[Object.keys(e).find(t=>t.startsWith("__reactProps$"))],b=(e,t)=>Spicetify.Platform.LibraryAPI[t?"add":"remove"](...e)});var Lt,wt,Tt,vt,B,D,C,N,it,O,rt,Ut,M=d(()=>{A();h();Lt=f(50)(async e=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/artists?ids=${e.join(",")}`)).artists),wt=f(1)(async([e])=>[await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/playlists/${e}`)]),Tt=f(50)(async e=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/albums?ids=${e.join(",")}`)).albums),vt=f(50)(async e=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/tracks?ids=${e.join(",")}`)).tracks),B=async e=>(await Spicetify.Platform.PlaylistAPI.getContents(e)).items,D=async(e,t={})=>await Spicetify.Platform.RootlistAPI.createFolder(e,t),C=async e=>await Spicetify.Platform.RootlistAPI.add([e]),N=(e,t,i)=>Spicetify.CosmosAsync.post("sp://core-playlist/v1/rootlist?responseFormat=protobufJson",{operation:"create",...i?{after:i}:{},name:e,playlist:!0,uris:t}),it=async e=>await Spicetify.Platform.RootlistAPI.getContents({folderUri:e}),O=()=>it(void 0),rt=async(e,t,i,s="")=>{let r=new URL("https://ws.audioscrobbler.com/2.0/");return r.searchParams.append("method","track.getInfo"),r.searchParams.append("api_key",e),r.searchParams.append("artist",t),r.searchParams.append("track",i),r.searchParams.append("format","json"),r.searchParams.append("username",s),await fetch(r).then(n=>n.json())},Ut=v(rt)});import{task as _}from"https://esm.sh/fp-ts";import{constVoid as P}from"https://esm.sh/fp-ts/function";var a,st,x,H=d(()=>{A();h();({React:a,ReactDOM:st}=Spicetify),x=class e{constructor(t,i,s={}){this.name=t;this.sectionId=i;this.sectionFields=s;this.setRerender=null;this.pushSettings=async()=>{for(;!Spicetify?.Platform?.History?.listen;)await S(100);this.stopHistoryListener&&this.stopHistoryListener(),this.stopHistoryListener=Spicetify.Platform.History.listen(({pathname:t=""})=>{t==="/preferences"&&this.render()}),Spicetify.Platform.History.location.pathname==="/preferences"&&await this.render()};this.toObject=()=>new Proxy({},{get:(t,i)=>e.getFieldValue(this.getId(i.toString()))});this.rerender=()=>{this.setRerender&&this.setRerender(Math.random())};this.render=async()=>{for(;!document.getElementById("desktop.settings.selectLanguage");){if(Spicetify.Platform.History.location.pathname!=="/preferences")return;await S(100)}let t=document.querySelector(".x-settings-container"),i=Array.from(t.children).find(({id:s})=>s===this.sectionId);i||(i=document.createElement("div"),i.id=this.sectionId,i.className="settingsContainer",t.appendChild(i)),st.render(a.createElement(this.FieldsContainer,null),i)};this.addButton=(t,i,s,r=P,n={})=>{let l=this.getId(t);return n.onClick=r,this.sectionFields[t]={id:l,type:"button",description:i,text:s,events:n},this};this.addToggle=(t,i,s=_.of(!0),r=P,n={})=>{let l=this.getId(t);return e.setDefaultFieldValue(l,s),n.onChange=r,this.sectionFields[t]={id:l,type:"toggle",description:i,events:n},this};this.addInput=(t,i,s,r=P,n="text",l={})=>{let y=this.getId(t);return e.setDefaultFieldValue(y,s),l.onChange=r,this.sectionFields[t]={id:y,type:"input",description:i,inputType:n,events:l},this};this.addDropDown=(t,i,s,r=_.of(0),n=P,l={})=>{let y=this.getId(t);return e.setDefaultFieldValue(y,r),l.onChange=n,this.sectionFields[t]={id:y,type:"dropdown",description:i,options:s,events:l},this};this.addHidden=(t,i)=>{let s=this.getId(t);return e.setDefaultFieldValue(s,i),this.sectionFields[t]={id:s,type:"hidden",description:""},this};this.getId=t=>`extensions:${this.sectionId}:${t}`;this.useStateFor=t=>{let[i,s]=a.useState(e.getFieldValue(t));return[i,r=>{r!==void 0&&(s(r),e.setFieldValue(t,r))}]};this.FieldsContainer=()=>{let[t,i]=a.useState(0);return this.setRerender=i,a.createElement("div",{className:"x-settings-section",key:t},a.createElement("h2",{className:"Type__TypeElement-sc-goli3j-0 TypeElement-cello-textBase-type"},this.name),Object.entries(this.sectionFields).map(([s,r])=>a.createElement(this.Field,{field:r})))};this.Field=({field:t})=>{let i=m("type");return a.createElement("div",{className:"x-settings-row"},a.createElement(this.SettingDescription,{id:t.id,description:t.description}),a.createElement("div",{className:"x-settings-secondColumn"},T([[i("input"),this.SettingInputField],[i("button"),this.SettingButtonField],[i("toggle"),this.SettingToggleField],[i("dropdown"),this.SettingDropdownField]])(this.SettingHidden)(t)))};this.SettingDescription=({id:t,description:i})=>a.createElement("div",{className:"x-settings-firstColumn"},a.createElement("label",{className:"Type__TypeElement-sc-goli3j-0 TypeElement-viola-textSubdued-type",htmlFor:t},i));this.SettingButtonField=t=>a.createElement("span",{className:""},a.createElement("button",{id:t.id,className:"Button-sc-y0gtbx-0 Button-sm-buttonSecondary-useBrowserDefaultFocusStyle x-settings-button",...t.events,type:t.type},t.text));this.SettingToggleField=t=>{let[i,s]=this.useStateFor(t.id);return a.createElement("label",{className:"x-settings-secondColumn x-toggle-wrapper"},a.createElement("input",{id:t.id,className:"x-toggle-input",type:"checkbox",checked:e.getFieldValue(t.id),...t.events,onChange:r=>{s(r.currentTarget.checked),t.events.onChange?.(r)}}),a.createElement("span",{className:"x-toggle-indicatorWrapper"},a.createElement("span",{className:"x-toggle-indicator"})))};this.SettingInputField=t=>{let[i,s]=this.useStateFor(t.id);return a.createElement("input",{className:"x-settings-input",id:t.id,dir:"ltr",value:e.getFieldValue(t.id),type:t.inputType,...t.events,onChange:r=>{s(r.currentTarget.value),t.events.onChange?.(r)}})};this.SettingDropdownField=t=>{let[i,s]=this.useStateFor(t.id);return a.createElement("select",{className:"main-dropDown-dropDown",id:t.id,...t.events,onChange:r=>{s(r.currentTarget.selectedIndex),t.events.onChange?.(r)}},t.options.map((r,n)=>a.createElement("option",{selected:n===e.getFieldValue(t.id),value:n+1},r)))};this.SettingHidden=()=>a.createElement(a.Fragment,null)}static{this.waitForReact=async()=>{for(;!(Spicetify.React&&Spicetify.ReactDOM);)S(100);return this}}static{this.getFieldValue=t=>JSON.parse(Spicetify.LocalStorage.get(t)??"null")}static{this.setFieldValue=(t,i)=>{Spicetify.LocalStorage.set(t,JSON.stringify(i))}}static{this.setDefaultFieldValue=async(t,i)=>{e.getFieldValue(t)===null&&e.setFieldValue(t,await i())}}}});var at={};var nt,G=d(()=>{H();Q();nt=new x("Vaultify","vaultify").addButton("backup","Backup Library, Extensions and Settings","Backup to clipboard",j).addButton("restoreLibrary","Restore Library","Restore from clipboard",R("library")).addButton("restoreExtensions","Restore Extensions","Restore from clipboard",R("extensions")).addButton("restoreSettings","Restore Settings","Restore from clipboard",R("settings"));nt.pushSettings()});import{array as p,function as c,record as V,task as ot}from"https://esm.sh/fp-ts";var q,W,lt,$,pt,j,R,Q=d(()=>{M();A();h();q=m("type"),W=e=>w([[q("playlist"),async t=>({[t.name]:t.isOwnedBySelf?await c.pipe(t.uri,B,F(p.map(i=>i.uri))):t.uri})],[q("folder"),async t=>({[t.name]:await c.pipe(t.items,p.map(W),i=>Promise.all(i))})]])(ot.of({}))(e),lt=e=>typeof e[0]=="string"&&Spicetify.URI.isTrack(e[0]),$=async e=>{Object.keys(e).forEach(t=>{let i=e[t];if(!Array.isArray(i))return void C(i);if(i.length!==0){if(lt(i))return void N(t,i);D(t),i.forEach($)}})},pt=/^(?:marketplace:)|(?:extensions:)|(?:spicetify)/,j=async()=>{let e=o=>o.items.map(u=>u.uri),t=await Spicetify.Platform.LibraryAPI.getTracks({limit:-1,sort:{field:"ADDED_AT",order:"ASC"}}),i=e(t),s=await Spicetify.Platform.LibraryAPI.getAlbums({limit:2**30,sort:{field:"ADDED_AT"}}),r=e(s),n=await Spicetify.Platform.LibraryAPI.getArtists({limit:2**30,sort:{field:"ADDED_AT"}}),l=e(n),y=await c.pipe(await O(),W),z=c.pipe(localStorage,V.toUnfoldable(p),p.filter(([o])=>pt.test(o))),{items:J,namespace:K}=Spicetify.Platform.LocalStorageAPI,X=c.pipe(J,V.toUnfoldable(p),p.filter(([o])=>o.startsWith(K)),p.map(([o,u])=>[o.split(":")[1],u])),Y=c.pipe(document.querySelectorAll('[id^="settings."],[id^="desktop."],[class^="network."]'),Array.from,p.flatMap(o=>{let u=o.getAttribute("id");if(o instanceof HTMLInputElement){let k=o.getAttribute("type");if(k==="checkbox")return[[u,"checkbox",o.checked]];if(k==="text")return[[u,"text",o.value]]}else if(o instanceof HTMLSelectElement)return[[u,"select",o.value]];return[]}));await Spicetify.Platform.ClipboardAPI.copy(JSON.stringify({libraryTracks:i,libraryAlbums:r,libraryArtists:l,playlists:y,localStore:z,localStoreAPI:X,settings:Y})),Spicetify.showNotification("Backed up Playlists, Extensions and Settings")},R=e=>async()=>{let t=JSON.parse(await Spicetify.Platform.ClipboardAPI.paste());e==="library"&&(b(t.libraryTracks,!0),b(t.libraryAlbums,!0),b(t.libraryArtists,!0),await $(t.playlists),Spicetify.showNotification("Restored Library")),e==="extensions"&&(p.map(c.tupled(Spicetify.LocalStorage.set))(t.localStore),p.map(c.tupled(Spicetify.Platform.LocalStorageAPI.setItem))(t.localStoreAPI),Spicetify.showNotification("Restored Extensions")),e==="settings"&&(t.settings.map(([i,s,r])=>{let n=document.querySelector(`[id="${i}"]`);if(!n)return console.warn(`Setting for ${i} wasn't found`);if(s==="text")n.value=r;else if(s==="checkbox")n.checked=r;else if(s==="select")n.value=r;else return;E(n).onChange({target:n})}),Spicetify.showNotification("Restored Settings"))};Promise.resolve().then(()=>G())});Q();export{j as backup,R as restore};
//! Does location actually point to document.body?
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc2hhcmVkL2ZwLnRzIiwgIi4uLy4uL3NoYXJlZC91dGlsLnRzIiwgIi4uLy4uL3NoYXJlZC9hcGkudHMiLCAiLi4vLi4vc2hhcmVkL3NldHRpbmdzLnRzeCIsICIuLi8uLi9leHRlbnNpb25zL3ZhdWx0aWZ5L3NldHRpbmdzLnRzIiwgIi4uLy4uL2V4dGVuc2lvbnMvdmF1bHRpZnkvYXBwLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge1xyXG4gICAgYXJyYXkgYXMgYXIsXHJcbiAgICBlcSxcclxuICAgIHN0cmluZyBhcyBzdHIsXHJcbiAgICByZWNvcmQgYXMgcmVjLFxyXG4gICAgcmVmaW5lbWVudCBhcyByZWYsXHJcbiAgICBzZW1pZ3JvdXAgYXMgc2csXHJcbiAgICBmdW5jdGlvbiBhcyBmLFxyXG59IGZyb20gXCJodHRwczovL2VzbS5zaC9mcC10c1wiXHJcbmltcG9ydCB7IGd1YXJkLCBtZW1vaXplIH0gZnJvbSBcImh0dHBzOi8vZXNtLnNoL2ZwLXRzLXN0ZC9GdW5jdGlvblwiXHJcblxyXG50eXBlIHJlZmluZUJyYW5jaDxBLCBCIGV4dGVuZHMgQSwgUj4gPSBbcmVmLlJlZmluZW1lbnQ8QSwgQj4sICh4OiBCKSA9PiBSXVxyXG5leHBvcnQgY29uc3QgZ3VhcmQyID0gPEEsIEExIGV4dGVuZHMgQSwgQTIgZXh0ZW5kcyBBLCBSPihicmFuY2hlczogW3JlZmluZUJyYW5jaDxBLCBBMSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBMiwgUj5dKSA9PlxyXG4gICAgZ3VhcmQoYnJhbmNoZXMgYXMgdW5rbm93biBhcyBbcmVmaW5lQnJhbmNoPEEsIEEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQSwgUj5dKVxyXG5leHBvcnQgY29uc3QgZ3VhcmQzID0gPEEsIEExIGV4dGVuZHMgQSwgQTIgZXh0ZW5kcyBBLCBBMyBleHRlbmRzIEEsIFI+KFxyXG4gICAgYnJhbmNoZXM6IFtyZWZpbmVCcmFuY2g8QSwgQTEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTIsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTMsIFI+XSxcclxuKSA9PiBndWFyZChicmFuY2hlcyBhcyB1bmtub3duIGFzIFtyZWZpbmVCcmFuY2g8QSwgQSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEsIFI+XSlcclxuZXhwb3J0IGNvbnN0IGd1YXJkNCA9IDxBLCBBMSBleHRlbmRzIEEsIEEyIGV4dGVuZHMgQSwgQTMgZXh0ZW5kcyBBLCBBNCBleHRlbmRzIEEsIFI+KFxyXG4gICAgYnJhbmNoZXM6IFtyZWZpbmVCcmFuY2g8QSwgQTEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTIsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTMsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTQsIFI+XSxcclxuKSA9PlxyXG4gICAgZ3VhcmQoXHJcbiAgICAgICAgYnJhbmNoZXMgYXMgdW5rbm93biBhcyBbXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICBdLFxyXG4gICAgKVxyXG5leHBvcnQgY29uc3QgZ3VhcmQ1ID0gPEEsIEExIGV4dGVuZHMgQSwgQTIgZXh0ZW5kcyBBLCBBMyBleHRlbmRzIEEsIEE0IGV4dGVuZHMgQSwgQTUgZXh0ZW5kcyBBLCBSPihcclxuICAgIGJyYW5jaGVzOiBbXHJcbiAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEExLCBSPixcclxuICAgICAgICByZWZpbmVCcmFuY2g8QSwgQTIsIFI+LFxyXG4gICAgICAgIHJlZmluZUJyYW5jaDxBLCBBMywgUj4sXHJcbiAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEE0LCBSPixcclxuICAgICAgICByZWZpbmVCcmFuY2g8QSwgQTUsIFI+LFxyXG4gICAgXSxcclxuKSA9PlxyXG4gICAgZ3VhcmQoXHJcbiAgICAgICAgYnJhbmNoZXMgYXMgdW5rbm93biBhcyBbXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgIF0sXHJcbiAgICApXHJcblxyXG5leHBvcnQgY29uc3Qgb2JqQ29uY2F0MiA9IDxBMSwgQTI+KCkgPT4gcmVjLmdldFVuaW9uU2VtaWdyb3VwKHNnLmZpcnN0PGFueT4oKSkuY29uY2F0IGFzICh4OiBBMSwgeTogQTIpID0+IEExICYgQTJcclxuZXhwb3J0IGNvbnN0IG9iakNvbmNhdCA9IDxBPigpID0+IGFyLnJlZHVjZSh7fSBhcyBBLCBvYmpDb25jYXQyPEEsIEE+KCkpXHJcblxyXG50eXBlIGFzeW5jID0ge1xyXG4gICAgPEEsIEI+KGY6IChhOiBBKSA9PiBQcm9taXNlPEI+KTogKGZhOiBQcm9taXNlPEE+KSA9PiBQcm9taXNlPEI+XHJcbiAgICA8QSwgQj4oZjogKGE6IEEpID0+IEIpOiAoZmE6IFByb21pc2U8QT4pID0+IFByb21pc2U8Qj5cclxufVxyXG5leHBvcnQgY29uc3QgcE1jaGFpbjogYXN5bmMgPVxyXG4gICAgPEEsIFI+KGY6IChhOiBBKSA9PiBSKSA9PlxyXG4gICAgYXN5bmMgKGZhOiBBKSA9PlxyXG4gICAgICAgIGYoYXdhaXQgZmEpXHJcblxyXG5leHBvcnQgY29uc3QgaXMgPVxyXG4gICAgPEE+KGM6IGtleW9mIEEpID0+XHJcbiAgICA8QiBleHRlbmRzIEE+KGE6IEFbdHlwZW9mIGNdKSA9PlxyXG4gICAgKGZpZWxkOiBBKTogZmllbGQgaXMgQiA9PlxyXG4gICAgICAgIGZpZWxkW2NdID09PSBhXHJcblxyXG5leHBvcnQgY29uc3QgdGFwQW55ID1cclxuICAgIDxBPihmOiAoYTogQSkgPT4gdm9pZCkgPT5cclxuICAgIChmYTogQSkgPT4ge1xyXG4gICAgICAgIGYoZmEpXHJcbiAgICAgICAgcmV0dXJuIGZhXHJcbiAgICB9XHJcblxyXG5leHBvcnQgY29uc3QgY2h1bmNraWZ5ID1cclxuICAgIChuOiBudW1iZXIpID0+XHJcbiAgICA8QSwgUj4oZzogKGE6IEFbXSkgPT4gUHJvbWlzZTxSW10+KSA9PlxyXG4gICAgICAgIGYuZmxvdyhhci5jaHVua3NPZihuKTxBPiwgYXIubWFwKGcpLCBwcyA9PiBQcm9taXNlLmFsbChwcyksIHBNY2hhaW4oYXIuZmxhdHRlbikpXHJcblxyXG5leHBvcnQgY29uc3Qgd2l0aFByb2dyZXNzID1cclxuICAgIDxGIGV4dGVuZHMgKGY6ICguLi5hOiBhbnkpID0+IGFueSkgPT4gKGZhOiBhbnkpID0+IGFueT4obWFwOiBGKSA9PlxyXG4gICAgKGY6IFBhcmFtZXRlcnM8Rj5bMF0pID0+XHJcbiAgICAoZmE6IFBhcmFtZXRlcnM8UmV0dXJuVHlwZTxGPj5bMF0pOiBSZXR1cm5UeXBlPFJldHVyblR5cGU8Rj4+ID0+IHtcclxuICAgICAgICBsZXQgaSA9IDBcclxuICAgICAgICByZXR1cm4gbWFwKGFzeW5jICguLi5hOiBQYXJhbWV0ZXJzPFBhcmFtZXRlcnM8Rj5bMF0+KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IEZ1Y2sgbWVcclxuICAgICAgICAgICAgY29uc3QgcmV0ID0gYXdhaXQgZiguLi5hKVxyXG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgucm91bmQoKGkrKyAvIE9iamVjdC52YWx1ZXMoZmEpLmxlbmd0aCkgKiAxMDApXHJcbiAgICAgICAgICAgIFNwaWNldGlmeS5zaG93Tm90aWZpY2F0aW9uKGBMb2FkaW5nOiAke3Byb2dyZXNzfSVgLCBmYWxzZSwgMjAwKVxyXG4gICAgICAgICAgICByZXR1cm4gcmV0XHJcbiAgICAgICAgfSkoZmEpXHJcbiAgICB9XHJcblxyXG5leHBvcnQgY29uc3QgbWVtb2l6ZTIgPSA8QSBleHRlbmRzIGFueVtdLCBSPihmbjogKC4uLmFyZ3M6IEEpID0+IFIpID0+XHJcbiAgICBmLnBpcGUoZm4sIGYudHVwbGVkLCBtZW1vaXplPEE+KGVxLmNvbnRyYW1hcChKU09OLnN0cmluZ2lmeSkoc3RyLkVxKSksIGYudW50dXBsZWQpXHJcbiIsICIvLyBleHBvcnQgaW50ZXJmYWNlIFNwb3RpZnlJRFxyXG4vLyAgICAgZXh0ZW5kcyBOZXd0eXBlPHsgcmVhZG9ubHkgU3BvdGlmeUlEOiB1bmlxdWUgc3ltYm9sIH0sIHN0cmluZz4ge31cclxuLy8gZXhwb3J0IGludGVyZmFjZSBTcG90aWZ5VVJJXHJcbi8vICAgICBleHRlbmRzIE5ld3R5cGU8eyByZWFkb25seSBTcG90aWZ5VVJJOiB1bmlxdWUgc3ltYm9sIH0sIHN0cmluZz4ge31cclxuXHJcbmltcG9ydCB7IGFycmF5IGFzIGEsIGZ1bmN0aW9uIGFzIGYgfSBmcm9tIFwiaHR0cHM6Ly9lc20uc2gvZnAtdHNcIlxyXG5cclxuZXhwb3J0IHR5cGUgU3BvdGlmeUlEID0gc3RyaW5nXHJcbmV4cG9ydCB0eXBlIFNwb3RpZnlVUkkgPSBzdHJpbmdcclxuXHJcbmV4cG9ydCB0eXBlIFNwb3RpZnlMb2NPYmogPSB7XHJcbiAgICBiZWZvcmU/OiBcInN0YXJ0XCIgfCB7IHVyaTogU3BvdGlmeVVSSSB9IHwgeyB1aWQ6IHN0cmluZyB9XHJcbiAgICBhZnRlcj86IFwiZW5kXCIgfCB7IHVyaTogU3BvdGlmeVVSSSB9IHwgeyB1aWQ6IHN0cmluZyB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBTcG90aWZ5TG9jID0ge1xyXG4gICAgYmVmb3JlOiB7XHJcbiAgICAgICAgc3RhcnQ6IGYuY29uc3RhbnQoeyBiZWZvcmU6IFwic3RhcnRcIiB9IGFzIFNwb3RpZnlMb2NPYmopLFxyXG4gICAgICAgIGZyb21Vcmk6ICh1cmk6IFNwb3RpZnlVUkkpID0+ICh7IGJlZm9yZTogeyB1cmkgfSB9KSxcclxuICAgICAgICBmcm9tVWlkOiAodWlkOiBzdHJpbmcpID0+ICh7IGJlZm9yZTogeyB1aWQgfSB9KSxcclxuICAgIH0sXHJcbiAgICBhZnRlcjoge1xyXG4gICAgICAgIGVuZDogZi5jb25zdGFudCh7IGFmdGVyOiBcImVuZFwiIH0gYXMgU3BvdGlmeUxvY09iaiksXHJcbiAgICAgICAgZnJvbVVyaTogKHVyaTogU3BvdGlmeVVSSSkgPT4gKHsgYWZ0ZXI6IHsgdXJpIH0gfSksXHJcbiAgICAgICAgZnJvbVVpZDogKHVpZDogc3RyaW5nKSA9PiAoeyBhZnRlcjogeyB1aWQgfSB9KSxcclxuICAgIH0sXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBlc2NhcGVSZWdleCA9IChzdHI6IHN0cmluZykgPT4gc3RyLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBgXFxcXCQmYClcclxuXHJcbmV4cG9ydCBjb25zdCB0aXRsZUNhc2UgPSAoc3RyOiBzdHJpbmcpID0+IHN0ci5yZXBsYWNlKC9cXGJcXHcvZywgbCA9PiBsLnRvVXBwZXJDYXNlKCkpXHJcblxyXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplU3RyID0gKHN0cjogc3RyaW5nKSA9PlxyXG4gICAgc3RyXHJcbiAgICAgICAgLm5vcm1hbGl6ZShcIk5GS0RcIilcclxuICAgICAgICAucmVwbGFjZSgvXFwoLipcXCkvZywgXCJcIilcclxuICAgICAgICAucmVwbGFjZSgvXFxbLipcXF0vZywgXCJcIilcclxuICAgICAgICAucmVwbGFjZSgvLV8sL2csIFwiIFwiKVxyXG4gICAgICAgIC5yZXBsYWNlKC9bXmEtekEtWjAtOSBdL2csIFwiXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXHJcbiAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAudHJpbSgpXHJcblxyXG4vLyEgRG9lcyBsb2NhdGlvbiBhY3R1YWxseSBwb2ludCB0byBkb2N1bWVudC5ib2R5P1xyXG5leHBvcnQgY29uc3Qgd2FpdEZvckVsZW1lbnQgPSA8RSBleHRlbmRzIEVsZW1lbnQ+KFxyXG4gICAgc2VsZWN0b3I6IHN0cmluZyxcclxuICAgIHRpbWVvdXQgPSAxMDAwLFxyXG4gICAgbG9jYXRpb24gPSBkb2N1bWVudC5ib2R5LFxyXG4gICAgbm90RWw/OiBFLFxyXG4pID0+XHJcbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZTogKHZhbHVlOiBFbGVtZW50IHwgbnVsbCkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9ICh2OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpXHJcbiAgICAgICAgICAgIHJlc29sdmUodilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8RT4oc2VsZWN0b3IpXHJcbiAgICAgICAgICAgIGlmIChlbCAmJiAoIW5vdEVsIHx8IGVsICE9PSBub3RFbCkpIHJldHVybiByZXMoZWwpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShsb2NhdGlvbiwge1xyXG4gICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgICAgICAgIHN1YnRyZWU6IHRydWUsXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKHRpbWVvdXQpIHNldFRpbWVvdXQoKCkgPT4gcmVzKG51bGwpLCB0aW1lb3V0KVxyXG4gICAgfSlcclxuXHJcbmV4cG9ydCBjb25zdCB0cmFwRWxlbWVudCA9IDxFIGV4dGVuZHMgRWxlbWVudD4oXHJcbiAgICBzZWxlY3Rvcjogc3RyaW5nLFxyXG4gICAgY2FsbGJhY2s6IChlbDogRSB8IG51bGwsIGxhc3RFbDogRSB8IG51bGwpID0+IHZvaWQsXHJcbiAgICBsb2NhdGlvbiA9IGRvY3VtZW50LmJvZHksXHJcbikgPT4ge1xyXG4gICAgbGV0IGxhc3RFbDogRSB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEU+KHNlbGVjdG9yKVxyXG4gICAgICAgIGlmIChlbCAhPT0gbGFzdEVsKSBjYWxsYmFjayhlbCwgbGFzdEVsKVxyXG4gICAgICAgIGxhc3RFbCA9IGVsXHJcbiAgICB9KVxyXG5cclxuICAgIG9ic2VydmVyLm9ic2VydmUobG9jYXRpb24sIHtcclxuICAgICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgICAgc3VidHJlZTogdHJ1ZSxcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzbGVlcCA9IChtczogbnVtYmVyKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldFJlYWN0UHJvcHMgPSAoZWxlbWVudDogRWxlbWVudCkgPT5cclxuICAgIGVsZW1lbnRbT2JqZWN0LmtleXMoZWxlbWVudCkuZmluZChrID0+IGsuc3RhcnRzV2l0aChcIl9fcmVhY3RQcm9wcyRcIikpIGFzIGtleW9mIHR5cGVvZiBlbGVtZW50XVxyXG5cclxuZXhwb3J0IGNvbnN0IGlzTGlrZWQgPSAodXJpczogU3BvdGlmeVVSSVtdKSA9PiBTcGljZXRpZnkuUGxhdGZvcm0uTGlicmFyeUFQSS5jb250YWlucyguLi51cmlzKSBhcyBQcm9taXNlPGJvb2xlYW5bXT5cclxuXHJcbmV4cG9ydCBjb25zdCBzZXRMaWtlZCA9ICh1cmlzOiBTcG90aWZ5VVJJW10sIGxpa2VkOiBib29sZWFuKSA9PlxyXG4gICAgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUElbbGlrZWQgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0oLi4udXJpcylcclxuXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVMaWtlZCA9IGFzeW5jICh1cmlzOiBTcG90aWZ5VVJJW10pID0+IHtcclxuICAgIGNvbnN0IGxpa2VkID0gYXdhaXQgaXNMaWtlZCh1cmlzKVxyXG5cclxuICAgIHJldHVybiBhd2FpdCBmLnBpcGUoXHJcbiAgICAgICAgdXJpcyxcclxuICAgICAgICBhLnJlZHVjZVdpdGhJbmRleChcclxuICAgICAgICAgICAgW1tdIGFzIFNwb3RpZnlVUklbXSwgW10gYXMgU3BvdGlmeVVSSVtdXSBhcyBjb25zdCxcclxuICAgICAgICAgICAgKGksIGFjYywgdXJpKSA9PiAoYWNjW051bWJlcihsaWtlZFtpXSldLnB1c2godXJpKSwgYWNjKSxcclxuICAgICAgICApLFxyXG4gICAgICAgIChbdG9BZGQsIHRvUmVtXSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcyA9IFtdXHJcbiAgICAgICAgICAgIGlmICh0b0FkZC5sZW5ndGgpIHBzLnB1c2goc2V0TGlrZWQodG9BZGQsIHRydWUpKVxyXG4gICAgICAgICAgICBpZiAodG9SZW0ubGVuZ3RoKSBwcy5wdXNoKHNldExpa2VkKHRvUmVtLCBmYWxzZSkpXHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcylcclxuICAgICAgICB9LFxyXG4gICAgKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUXVldWVJdGVtID0gKHF1ZXVlZDogYm9vbGVhbikgPT4gKHVyaTogU3BvdGlmeVVSSSkgPT4gKHtcclxuICAgIGNvbnRleHRUcmFjazoge1xyXG4gICAgICAgIHVyaSxcclxuICAgICAgICB1aWQ6IFwiXCIsXHJcbiAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgaXNfcXVldWVkOiBxdWV1ZWQudG9TdHJpbmcoKSxcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIHJlbW92ZWQ6IFtdLFxyXG4gICAgYmxvY2tlZDogW10sXHJcbiAgICBwcm92aWRlcjogcXVldWVkID8gXCJxdWV1ZVwiIDogXCJjb250ZXh0XCIsXHJcbn0pXHJcblxyXG5leHBvcnQgY29uc3Qgc2V0UXVldWUgPSBhc3luYyAobmV4dFRyYWNrczogQXJyYXk8UmV0dXJuVHlwZTxSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVRdWV1ZUl0ZW0+Pj4pID0+IHtcclxuICAgIGNvbnN0IHsgX3F1ZXVlLCBfY2xpZW50IH0gPSBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWVyQVBJLl9xdWV1ZVxyXG4gICAgY29uc3QgeyBwcmV2VHJhY2tzLCBxdWV1ZVJldmlzaW9uIH0gPSBfcXVldWVcclxuXHJcbiAgICByZXR1cm4gX2NsaWVudC5zZXRRdWV1ZSh7XHJcbiAgICAgICAgbmV4dFRyYWNrcyxcclxuICAgICAgICBwcmV2VHJhY2tzLFxyXG4gICAgICAgIHF1ZXVlUmV2aXNpb24sXHJcbiAgICB9KSBhcyBQcm9taXNlPHsgZXJyb3I6IG51bWJlcjsgcmVhc29uczogc3RyaW5nIH0+XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzZXRQbGF5aW5nQ29udGV4dCA9ICh1cmk6IFNwb3RpZnlVUkkpID0+IHtcclxuICAgIGNvbnN0IHsgc2Vzc2lvbklkIH0gPSBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWVyQVBJLmdldFN0YXRlKClcclxuICAgIHJldHVybiBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWVyQVBJLnVwZGF0ZUNvbnRleHQoc2Vzc2lvbklkLCB7IHVyaSwgdXJsOiBcImNvbnRleHQ6Ly9cIiArIHVyaSB9KSBhcyBQcm9taXNlPHVuZGVmaW5lZD5cclxufVxyXG4iLCAiaW1wb3J0IHsgY2h1bmNraWZ5LCBtZW1vaXplMiB9IGZyb20gXCIuL2ZwLnRzXCJcclxuaW1wb3J0IHsgU3BvdGlmeUlELCBTcG90aWZ5TG9jT2JqLCBTcG90aWZ5VVJJLCBlc2NhcGVSZWdleCB9IGZyb20gXCIuL3V0aWwudHNcIlxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIEdyYXBoUUwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFsYnVtID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSA0ODcpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5nZXRBbGJ1bSwge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIGxvY2FsZTogU3BpY2V0aWZ5LkxvY2FsZS5nZXRMb2NhbGUoKSxcclxuICAgICAgICAgICAgb2Zmc2V0LFxyXG4gICAgICAgICAgICBsaW1pdCxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFsYnVtVW5pb24gYXMgZmV0Y2hHUUxBbGJ1bVJlc1xyXG5cclxudHlwZSBmZXRjaEFydGlzdEdRTFJlcyA9IGFueVxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBcnRpc3RPdmVydmlldyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5xdWVyeUFydGlzdE92ZXJ2aWV3LCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgICAgICBpbmNsdWRlUHJlcmVsZWFzZTogdHJ1ZSxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFydGlzdFVuaW9uIGFzIGZldGNoQXJ0aXN0R1FMUmVzXHJcblxyXG50eXBlIGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHlSZXMgPSBhbnlcclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHkgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDExNikgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLnF1ZXJ5QXJ0aXN0RGlzY29ncmFwaHlBbGwsIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBvZmZzZXQsXHJcbiAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24uZGlzY29ncmFwaHkuYWxsLml0ZW1zIGFzIGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHlSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFydGlzdFJlbGF0ZWQgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMucXVlcnlBcnRpc3RSZWxhdGVkLCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24ucmVsYXRlZENvbnRlbnQucmVsYXRlZEFydGlzdHMuaXRlbXMgYXMgZmV0Y2hHUUxBcnRpc3RSZWxhdGVkUmVzXHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgU3BvdGlmeSBXZWIgQVBJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZVdlYlBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5SUQsIHRyYWNrczogU3BvdGlmeVVSSVtdKSA9PlxyXG4gICAgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmRlbChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvcGxheWxpc3RzLyR7cGxheWxpc3R9L3RyYWNrc2AsIHtcclxuICAgICAgICB0cmFja3M6IHRyYWNrcy5tYXAodXJpID0+ICh7IHVyaSB9KSksXHJcbiAgICB9KVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViQXJ0aXN0c1Nwb3QgPSBjaHVuY2tpZnkoNTApKFxyXG4gICAgYXN5bmMgKGlkczogU3BvdGlmeUlEW10pID0+XHJcbiAgICAgICAgKGF3YWl0IFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL2FydGlzdHM/aWRzPSR7aWRzLmpvaW4oXCIsXCIpfWApKVxyXG4gICAgICAgICAgICAuYXJ0aXN0cyBhcyBTcG90QXBpQXJ0aXN0W10sXHJcbilcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlBsYXlsaXN0c1Nwb3QgPSBjaHVuY2tpZnkoMSkoXHJcbiAgICAvLyBAdHMtaWdub3JlIGNodW5raWZ5IHdpbGwgbmV2ZXIgY2FsbCB3aXRoIGVtcHR5IGFycmF5XHJcbiAgICBhc3luYyAoW2lkXTogW1Nwb3RpZnlJRF0pID0+IFtcclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvcGxheWxpc3RzLyR7aWR9YCkpIGFzIFNwb3RBcGlQbGF5bGlzdCxcclxuICAgIF0sXHJcbilcclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViQWxidW1zU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvYWxidW1zP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLmFsYnVtcyBhcyBTcG90QXBpQWxidW1bXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViVHJhY2tzU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvdHJhY2tzP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLnRyYWNrcyBhcyBTcG90QXBpVHJhY2tbXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFdlYkl0ZW1TcG90ID0gYXN5bmMgKHE6IHN0cmluZywgdHlwZTogc3RyaW5nW10pID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9zZWFyY2g/cT0ke2VuY29kZVVSSUNvbXBvbmVudChxKX0mdHlwZT0ke3R5cGUuam9pbihcIixcIil9YClcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlNvdW5kT2ZTcG90aWZ5UGxheWxpc3QgPSBhc3luYyAoZ2VucmU6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgbmFtZSA9IGBUaGUgU291bmQgT2YgJHtnZW5yZX1gXHJcbiAgICBjb25zdCByZSA9IG5ldyBSZWdFeHAoYF4ke2VzY2FwZVJlZ2V4KG5hbWUpfSRgLCBcImlcIilcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHNlYXJjaFdlYkl0ZW1TcG90KG5hbWUsIFtcInBsYXlsaXN0XCJdKVxyXG4gICAgY29uc3QgaXRlbSA9IHJlcy5wbGF5bGlzdHMuaXRlbXNbMF1cclxuICAgIHJldHVybiBpdGVtPy5vd25lci5pZCA9PT0gXCJ0aGVzb3VuZHNvZnNwb3RpZnlcIiAmJiByZS50ZXN0KGl0ZW0ubmFtZSkgPyBpdGVtLnVyaSA6IG51bGxcclxufVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFBsYXRmb3JtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRMaWtlZFRyYWNrcyA9IGFzeW5jICgpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuZ2V0VHJhY2tzKHtcclxuICAgICAgICAgICAgbGltaXQ6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLFxyXG4gICAgICAgIH0pXHJcbiAgICApLml0ZW1zIGFzIGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzUmVzXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrcyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gMTAwKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5MaWJyYXJ5QVBJLmdldFRyYWNrcyh7IHVyaSwgb2Zmc2V0LCBsaW1pdCB9KSkuaXRlbXMgYXMgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdENvbnRlbnRzID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkuZ2V0Q29udGVudHModXJpKSkuaXRlbXMgYXMgZmV0Y2hXZWJQbGF5bGlzdFJlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBsYXRGb2xkZXIgPSBhc3luYyAobmFtZTogc3RyaW5nLCBsb2NhdGlvbjogU3BvdGlmeUxvY09iaiA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmNyZWF0ZUZvbGRlcihuYW1lLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBsaWtlUGxhdFBsYXlsaXN0ID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT4gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmFkZChbdXJpXSlcclxuXHJcbi8qIFJlcGxhY2VkIGJ5IGNyZWF0ZVNQUGxheWxpc3RGcm9tVHJhY2tzICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQbGF0UGxheWxpc3QgPSBhc3luYyAobmFtZTogc3RyaW5nLCBsb2NhdGlvbjogU3BvdGlmeUxvY09iaiA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmNyZWF0ZVBsYXlsaXN0KG5hbWUsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNQUGxheWxpc3RGcm9tVHJhY2tzID0gKG5hbWU6IHN0cmluZywgdHJhY2tzOiBTcG90aWZ5VVJJW10sIGZvbGRlcj86IFNwb3RpZnlVUkkpID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMucG9zdChcInNwOi8vY29yZS1wbGF5bGlzdC92MS9yb290bGlzdD9yZXNwb25zZUZvcm1hdD1wcm90b2J1Zkpzb25cIiwge1xyXG4gICAgICAgIG9wZXJhdGlvbjogXCJjcmVhdGVcIixcclxuICAgICAgICAuLi4oZm9sZGVyID8geyBhZnRlcjogZm9sZGVyIH0gOiB7fSksXHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBwbGF5bGlzdDogdHJ1ZSxcclxuICAgICAgICB1cmlzOiB0cmFja3MsXHJcbiAgICB9KVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldFBsYXRQbGF5bGlzdFZpc2liaWxpdHkgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlVUkksIHZpc2libGVGb3JBbGw6IGJvb2xlYW4pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RQZXJtaXNzaW9uc0FQSS5zZXRCYXNlUGVybWlzc2lvbihwbGF5bGlzdCwgdmlzaWJsZUZvckFsbCA/IFwiVklFV0VSXCIgOiBcIkJMT0NLRURcIilcclxuZXhwb3J0IGNvbnN0IHNldFBsYXRQbGF5bGlzdFB1Ymxpc2hlZCA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeVVSSSwgcHVibGlzaGVkOiBib29sZWFuKSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLnNldFB1Ymxpc2hlZFN0YXRlKHBsYXlsaXN0LCBwdWJsaXNoZWQpXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0Rm9sZGVyID0gYXN5bmMgKGZvbGRlcj86IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmdldENvbnRlbnRzKHsgZm9sZGVyVXJpOiBmb2xkZXIgfSkpIGFzIGZldGNoUGxhdEZvbGRlclJlc1xyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0Um9vdEZvbGRlciA9ICgpID0+IGZldGNoUGxhdEZvbGRlcih1bmRlZmluZWQpXHJcblxyXG5leHBvcnQgY29uc3QgYWRkUGxhdFBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5VVJJLCB0cmFja3M6IFNwb3RpZnlVUklbXSwgbG9jYXRpb246IFNwb3RpZnlMb2NPYmogPSB7fSkgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5hZGQocGxheWxpc3QsIHRyYWNrcywgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgbW92ZVBsYXRQbGF5bGlzdFRyYWNrcyA9IGFzeW5jIChcclxuICAgIHBsYXlsaXN0OiBTcG90aWZ5VVJJLFxyXG4gICAgdHJhY2tzOiBBcnJheTx7IHVpZDogc3RyaW5nIH0+LFxyXG4gICAgbG9jYXRpb246IFNwb3RpZnlMb2NPYmogPSB7fSxcclxuKSA9PiBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkubW92ZShwbGF5bGlzdCwgdHJhY2tzLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MzMDAgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDMwMCkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uRW5oYW5jZUFQSS5nZXRQYWdlKHVyaSwgLyogaXRlcmF0aW9uICovIDAsIC8qIHNlc3Npb25JZCAqLyAwLCBvZmZzZXQsIGxpbWl0KSkuZW5oYW5jZVBhZ2VcclxuICAgICAgICAucGFnZUl0ZW1zIGFzIGFueVtdXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwKTogUHJvbWlzZTxhbnlbXT4gPT4ge1xyXG4gICAgY29uc3QgbmV4dFBhZ2VJdGVtcyA9IGF3YWl0IGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25nczMwMCh1cmksIG9mZnNldClcclxuICAgIGlmIChuZXh0UGFnZUl0ZW1zPy5sZW5ndGggPCAzMDApIHJldHVybiBuZXh0UGFnZUl0ZW1zXHJcbiAgICBlbHNlIHJldHVybiBuZXh0UGFnZUl0ZW1zLmNvbmNhdChmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3ModXJpLCBvZmZzZXQgKyAzMDApKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hMb2NhbFRyYWNrcyA9IGFzeW5jICgpID0+IGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Mb2NhbEZpbGVzQVBJLmdldFRyYWNrcygpXHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgTm9uIFNwb3RpZnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoVHJhY2tMRk1BUEkgPSBhc3luYyAoTEZNQXBpS2V5OiBzdHJpbmcsIGFydGlzdDogc3RyaW5nLCB0cmFja05hbWU6IHN0cmluZywgbGFzdEZtVXNlcm5hbWUgPSBcIlwiKSA9PiB7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFwiaHR0cHM6Ly93cy5hdWRpb3Njcm9iYmxlci5jb20vMi4wL1wiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJtZXRob2RcIiwgXCJ0cmFjay5nZXRJbmZvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImFwaV9rZXlcIiwgTEZNQXBpS2V5KVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJhcnRpc3RcIiwgYXJ0aXN0KVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ0cmFja1wiLCB0cmFja05hbWUpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImZvcm1hdFwiLCBcImpzb25cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidXNlcm5hbWVcIiwgbGFzdEZtVXNlcm5hbWUpXHJcblxyXG4gICAgcmV0dXJuIChhd2FpdCBmZXRjaCh1cmwpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpKSBhcyBmZXRjaFRyYWNrTEZNQVBJUmVzXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFRyYWNrTEZNQVBJTWVtb2l6ZWQgPSBtZW1vaXplMihmZXRjaFRyYWNrTEZNQVBJKVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFlvdXR1YmUgPSBhc3luYyAoWW91VHViZUFwaUtleTogc3RyaW5nLCBzZWFyY2hTdHJpbmc6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvc2VhcmNoXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInBhcnRcIiwgXCJzbmlwcGV0XCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcIm1heFJlc3VsdHNcIiwgXCIxMFwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJxXCIsIHNlYXJjaFN0cmluZylcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidHlwZVwiLCBcInZpZGVvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImtleVwiLCBZb3VUdWJlQXBpS2V5KVxyXG5cclxuICAgIHJldHVybiAoYXdhaXQgZmV0Y2godXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKSkgYXMgYW55W11cclxufVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hHUUxBbGJ1bVJlcyB7XHJcbiAgICBfX3R5cGVuYW1lOiBcImFsYnVtXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhcnRpc3RzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgcHJvZmlsZToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmlzdWFsczoge1xyXG4gICAgICAgICAgICAgICAgYXZhdGFySW1hZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNoYXJpbmdJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgY292ZXJBcnQ6IHtcclxuICAgICAgICBleHRyYWN0ZWRDb2xvcnM6IHtcclxuICAgICAgICAgICAgY29sb3JSYXc6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JMaWdodDoge1xyXG4gICAgICAgICAgICAgICAgaGV4OiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xvckRhcms6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgIH1cclxuICAgIGRpc2NzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgbnVtYmVyOiBudW1iZXJcclxuICAgICAgICAgICAgdHJhY2tzOiB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICByZWxlYXNlczoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICBkYXRlOiB7XHJcbiAgICAgICAgaXNvU3RyaW5nOiBzdHJpbmdcclxuICAgICAgICBwcmVjaXNpb246IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgcGxheWFiaWxpdHk6IHtcclxuICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgIHJlYXNvbjogc3RyaW5nXHJcbiAgICB9XHJcbiAgICBsYWJlbDogc3RyaW5nXHJcbiAgICBjb3B5cmlnaHQ6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICAgICAgdGV4dDogc3RyaW5nXHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIGNvdXJ0ZXN5TGluZTogc3RyaW5nXHJcbiAgICBzYXZlZDogYm9vbGVhblxyXG4gICAgc2hhcmluZ0luZm86IHtcclxuICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgc2hhcmVJZDogc3RyaW5nXHJcbiAgICB9XHJcbiAgICB0cmFja3M6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB1aWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB0cmFjazoge1xyXG4gICAgICAgICAgICAgICAgc2F2ZWQ6IGJvb2xlYW5cclxuICAgICAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBwbGF5Y291bnQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICBjb250ZW50UmF0aW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVsaW5raW5nSW5mb3JtYXRpb246IGFueVxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbE1pbGxpc2Vjb25kczogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwbGF5YWJpbGl0eToge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXlhYmxlOiBib29sZWFuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhcnRpc3RzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICBtb3JlQWxidW1zQnlBcnRpc3Q6IHtcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBkaXNjb2dyYXBoeToge1xyXG4gICAgICAgICAgICAgICAgcG9wdWxhclJlbGVhc2VzQWxidW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IG51bWJlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyQXJ0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlhYmlsaXR5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFyaW5nSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVJZDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIGZldGNoR1FMQXJ0aXN0UmVsYXRlZFJlcyA9IEFycmF5PHtcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgcHJvZmlsZToge1xyXG4gICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgdmlzdWFsczoge1xyXG4gICAgICAgIGF2YXRhckltYWdlOiB7XHJcbiAgICAgICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59PlxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXMgPSBBcnJheTx7XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogc3RyaW5nXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGR1cmF0aW9uOiBTcG90QXBpRHVyYXRpb25cclxuICAgIGFsYnVtOiBTcG90QXBpQWxidW1NaW5cclxuICAgIGFydGlzdHM6IFNwb3RBcGlBcnRpc3RNaW5bXVxyXG4gICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICBpc0V4cGxpY2l0OiBib29sZWFuXHJcbiAgICBpc1BsYXlhYmxlOiBib29sZWFuXHJcbiAgICBpc0xvY2FsOiBib29sZWFuXHJcbiAgICBpczE5UGx1c09ubHk6IGJvb2xlYW5cclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG59PlxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hXZWJQbGF5bGlzdFJlcyA9IEFycmF5PHtcclxuICAgIHVpZDogc3RyaW5nXHJcbiAgICBwbGF5SW5kZXg6IG51bGxcclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG4gICAgYWRkZWRCeToge1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmdcclxuICAgICAgICBkaXNwbGF5TmFtZTogc3RyaW5nXHJcbiAgICAgICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2UyW11cclxuICAgIH1cclxuICAgIGZvcm1hdExpc3RBdHRyaWJ1dGVzOiB7fVxyXG4gICAgdHlwZTogXCJ0cmFja1wiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bU1pblxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdE1pbltdXHJcbiAgICBkaXNjTnVtYmVyOiBudW1iZXJcclxuICAgIHRyYWNrTnVtYmVyOiBudW1iZXJcclxuICAgIGR1cmF0aW9uOiBTcG90QXBpRHVyYXRpb25cclxuICAgIGlzRXhwbGljaXQ6IGJvb2xlYW5cclxuICAgIGlzTG9jYWw6IGJvb2xlYW5cclxuICAgIGlzUGxheWFibGU6IGJvb2xlYW5cclxuICAgIGlzMTlQbHVzT25seTogYm9vbGVhblxyXG59PlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBmZXRjaFRyYWNrTEZNQVBJUmVzIHtcclxuICAgIHRyYWNrOiB7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgbWJpZDogc3RyaW5nXHJcbiAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICBkdXJhdGlvbjogc3RyaW5nXHJcbiAgICAgICAgc3RyZWFtYWJsZToge1xyXG4gICAgICAgICAgICBcIiN0ZXh0XCI6IHN0cmluZ1xyXG4gICAgICAgICAgICBmdWxsdHJhY2s6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgICBsaXN0ZW5lcnM6IHN0cmluZ1xyXG4gICAgICAgIHBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgYXJ0aXN0OiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICAgICAgYWxidW06IHtcclxuICAgICAgICAgICAgYXJ0aXN0OiBzdHJpbmdcclxuICAgICAgICAgICAgdGl0bGU6IHN0cmluZ1xyXG4gICAgICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgaW1hZ2U6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgIFwiI3RleHRcIjogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBzaXplOiBzdHJpbmdcclxuICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgXCJAYXR0clwiOiB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdXNlcnBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgdXNlcmxvdmVkOiBzdHJpbmdcclxuICAgICAgICB0b3B0YWdzOiB7XHJcbiAgICAgICAgICAgIHRhZzogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgICAgICB9PlxyXG4gICAgICAgIH1cclxuICAgICAgICB3aWtpOiB7XHJcbiAgICAgICAgICAgIHB1Ymxpc2hlZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHN1bW1hcnk6IHN0cmluZ1xyXG4gICAgICAgICAgICBjb250ZW50OiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBbGJ1bU1pbiB7XHJcbiAgICB0eXBlOiBcImFsYnVtXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhcnRpc3Q6IFNwb3RBcGlBcnRpc3RNaW5cclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlMltdXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUltYWdlMiB7XHJcbiAgICB1cmw6IHN0cmluZ1xyXG4gICAgbGFiZWw6IFwic21hbGxcIiB8IFwic3RhbmRhcmRcIiB8IFwibGFyZ2VcIiB8IFwieGxhcmdlXCJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpVHJhY2sge1xyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bVxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdFtdXHJcbiAgICBhdmFpbGFibGVfbWFya2V0czogc3RyaW5nW11cclxuICAgIGRpc2NfbnVtYmVyOiBudW1iZXJcclxuICAgIGR1cmF0aW9uX21zOiBudW1iZXJcclxuICAgIGV4cGxpY2l0OiBib29sZWFuXHJcbiAgICBleHRlcm5hbF9pZHM6IFNwb3RBcGlFSURzXHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaXNfcGxheWFibGU6IGJvb2xlYW5cclxuICAgIGxpbmtlZF9mcm9tOiB7fVxyXG4gICAgcmVzdHJpY3Rpb25zOiBTcG90QXBpUmVzdHJpY3Rpb25zXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHBvcHVsYXJpdHk6IG51bWJlclxyXG4gICAgcHJldmlld191cmw6IHN0cmluZ1xyXG4gICAgdHJhY2tfbnVtYmVyOiBudW1iZXJcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBpc19sb2NhbDogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBcnRpc3Qge1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBmb2xsb3dlcnM6IFNwb3RBcGlGb2xsb3dlcnNcclxuICAgIGdlbnJlczogc3RyaW5nW11cclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFydGlzdE1pbiB7XHJcbiAgICB0eXBlOiBcImFydGlzdFwiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBbGJ1bSB7XHJcbiAgICBhbGJ1bV90eXBlOiBzdHJpbmdcclxuICAgIHRvdGFsX3RyYWNrczogbnVtYmVyXHJcbiAgICBhdmFpbGFibGVfbWFya2V0czogc3RyaW5nW11cclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHJlbGVhc2VfZGF0ZTogc3RyaW5nXHJcbiAgICByZWxlYXNlX2RhdGVfcHJlY2lzaW9uOiBzdHJpbmdcclxuICAgIHJlc3RyaWN0aW9uczogU3BvdEFwaVJlc3RyaWN0aW9uc1xyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIGNvcHlyaWdodHM6IEFycmF5PHtcclxuICAgICAgICB0ZXh0OiBzdHJpbmdcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgIH0+XHJcbiAgICBleHRlcm5hbF9pZHM6IFNwb3RBcGlFSURzXHJcbiAgICBnZW5yZXM6IHN0cmluZ1tdXHJcbiAgICBsYWJlbDogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIGFsYnVtX2dyb3VwOiBzdHJpbmdcclxuICAgIGFydGlzdHM6IEFycmF5PHtcclxuICAgICAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICB9PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlFVXJscyB7XHJcbiAgICBzcG90aWZ5OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRUlEcyB7XHJcbiAgICBpc3JjOiBzdHJpbmdcclxuICAgIGVhbjogc3RyaW5nXHJcbiAgICB1cGM6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlJbWFnZSB7XHJcbiAgICB1cmw6IHN0cmluZ1xyXG4gICAgd2lkdGg6IG51bWJlclxyXG4gICAgaGVpZ2h0OiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpUmVzdHJpY3Rpb25zIHtcclxuICAgIHJlYXNvbjogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUZvbGxvd2VycyB7XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIHRvdGFsOiBudW1iZXJcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlEdXJhdGlvbiB7XHJcbiAgICBtaWxsaXNlY29uZHM6IG51bWJlclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaVBsYXlsaXN0IHtcclxuICAgIGNvbGxhYm9yYXRpdmU6IGJvb2xlYW5cclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgZm9sbG93ZXJzOiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgdG90YWw6IG51bWJlclxyXG4gICAgfVxyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogU3BvdGlmeUlEXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIG93bmVyOiBTcG90QXBpT3duZXJcclxuICAgIHB1YmxpYzogYm9vbGVhblxyXG4gICAgc25hcHNob3RfaWQ6IHN0cmluZ1xyXG4gICAgdHJhY2tzOiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgbGltaXQ6IG51bWJlclxyXG4gICAgICAgIG5leHQ6IHN0cmluZ1xyXG4gICAgICAgIG9mZnNldDogbnVtYmVyXHJcbiAgICAgICAgcHJldmlvdXM6IHN0cmluZ1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBhZGRlZF9hdDogc3RyaW5nXHJcbiAgICAgICAgICAgIGFkZGVkX2J5OiBTcG90QXBpT3duZXJcclxuICAgICAgICAgICAgaXNfbG9jYWw6IGJvb2xlYW5cclxuICAgICAgICAgICAgdHJhY2s6IFNwb3RBcGlUcmFja1xyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlPd25lciB7XHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGZvbGxvd2Vycz86IHtcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICB0b3RhbDogbnVtYmVyXHJcbiAgICB9XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBTcG90aWZ5SURcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBkaXNwbGF5X25hbWU/OiBzdHJpbmdcclxuICAgIG5hbWU/OiBzdHJpbmdcclxufVxyXG5cclxuLy9UT0RPOiBCZXR0ZXIgVFMgaW50ZXJmYWNlIGZvciByZWN1cnNpdmUgZmV0Y2hQbGF0Rm9sZGVyUmVzXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hQbGF0Rm9sZGVyUmVzIHtcclxuICAgIHR5cGU6IFwiZm9sZGVyXCIgfCBcInBsYWNlaG9sZGVyXCIgfCBcInBsYXlsaXN0XCJcclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG4gICAgaXRlbXM/OiBBcnJheTxmZXRjaFBsYXRGb2xkZXJSZXM+XHJcbiAgICBuYW1lPzogc3RyaW5nXHJcbiAgICB1cmk6IHN0cmluZ1xyXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmdcclxuICAgIGltYWdlcz86IFNwb3RBcGlJbWFnZTJbXVxyXG4gICAgbWFkZUZvcj86IG51bGxcclxuICAgIG93bmVyPzoge1xyXG4gICAgICAgIHR5cGU6IFwidXNlclwiXHJcbiAgICAgICAgdXJpOiBzdHJpbmdcclxuICAgICAgICB1c2VybmFtZTogc3RyaW5nXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGltYWdlczogYW55W11cclxuICAgIH1cclxuICAgIHRvdGFsTGVuZ3RoPzogbnVtYmVyXHJcbiAgICB1bmZpbHRlcmVkVG90YWxMZW5ndGg/OiBudW1iZXJcclxuICAgIHRvdGFsTGlrZXM/OiBudWxsXHJcbiAgICBkdXJhdGlvbj86IG51bGxcclxuICAgIGlzQ29sbGFib3JhdGl2ZT86IGJvb2xlYW5cclxuICAgIGlzTG9hZGVkPzogYm9vbGVhblxyXG4gICAgaXNPd25lZEJ5U2VsZj86IGJvb2xlYW5cclxuICAgIGlzUHVibGlzaGVkPzogYm9vbGVhblxyXG4gICAgaGFzRXBpc29kZXM/OiBudWxsXHJcbiAgICBoYXNTcG90aWZ5VHJhY2tzPzogbnVsbFxyXG4gICAgaGFzU3BvdGlmeUF1ZGlvYm9va3M/OiBudWxsXHJcbiAgICBjYW5BZGQ/OiBib29sZWFuXHJcbiAgICBjYW5SZW1vdmU/OiBib29sZWFuXHJcbiAgICBjYW5QbGF5PzogbnVsbFxyXG4gICAgZm9ybWF0TGlzdERhdGE/OiB7XHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgYXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxyXG4gICAgfSB8IG51bGxcclxuICAgIGNhblJlcG9ydEFubm90YXRpb25BYnVzZT86IGJvb2xlYW5cclxuICAgIGhhc0RhdGVBZGRlZD86IGJvb2xlYW5cclxuICAgIHBlcm1pc3Npb25zPzogbnVsbFxyXG4gICAgY29sbGFib3JhdG9ycz86IHtcclxuICAgICAgICBjb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IGFueVtdXHJcbiAgICB9XHJcbiAgICBpc05vdEZvdW5kPzogYm9vbGVhblxyXG4gICAgaXNGb3JiaWRkZW4/OiBib29sZWFuXHJcbn1cclxuIiwgImltcG9ydCB7IHRhc2sgfSBmcm9tIFwiaHR0cHM6Ly9lc20uc2gvZnAtdHNcIlxyXG5pbXBvcnQgeyBjb25zdFZvaWQgfSBmcm9tIFwiaHR0cHM6Ly9lc20uc2gvZnAtdHMvZnVuY3Rpb25cIlxyXG5pbXBvcnQgeyBndWFyZDQsIGlzIH0gZnJvbSBcIi4vZnAudHNcIlxyXG5pbXBvcnQgeyBzbGVlcCB9IGZyb20gXCIuL3V0aWwudHNcIlxyXG5cclxuY29uc3QgeyBSZWFjdCwgUmVhY3RET00gfSA9IFNwaWNldGlmeVxyXG5cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzU2VjdGlvbiB7XHJcbiAgICBwcml2YXRlIHN0b3BIaXN0b3J5TGlzdGVuZXI6IGFueVxyXG4gICAgcHJpdmF0ZSBzZXRSZXJlbmRlcjogRnVuY3Rpb24gfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHNlY3Rpb25JZDogc3RyaW5nLFxyXG4gICAgICAgIHB1YmxpYyBzZWN0aW9uRmllbGRzOiB7IFtrZXk6IHN0cmluZ106IFNldHRpbmdzRmllbGQgfSA9IHt9LFxyXG4gICAgKSB7fVxyXG5cclxuICAgIHN0YXRpYyB3YWl0Rm9yUmVhY3QgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgd2hpbGUgKCEoU3BpY2V0aWZ5LlJlYWN0ICYmIFNwaWNldGlmeS5SZWFjdERPTSkpIHNsZWVwKDEwMClcclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIHB1c2hTZXR0aW5ncyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB3aGlsZSAoIVNwaWNldGlmeT8uUGxhdGZvcm0/Lkhpc3Rvcnk/Lmxpc3RlbikgYXdhaXQgc2xlZXAoMTAwKVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zdG9wSGlzdG9yeUxpc3RlbmVyKSB0aGlzLnN0b3BIaXN0b3J5TGlzdGVuZXIoKVxyXG5cclxuICAgICAgICB0aGlzLnN0b3BIaXN0b3J5TGlzdGVuZXIgPSBTcGljZXRpZnkuUGxhdGZvcm0uSGlzdG9yeS5saXN0ZW4oKHsgcGF0aG5hbWUgPSBcIlwiIH0pID0+IHtcclxuICAgICAgICAgICAgaWYgKHBhdGhuYW1lID09PSBcIi9wcmVmZXJlbmNlc1wiKSB0aGlzLnJlbmRlcigpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKFNwaWNldGlmeS5QbGF0Zm9ybS5IaXN0b3J5LmxvY2F0aW9uLnBhdGhuYW1lID09PSBcIi9wcmVmZXJlbmNlc1wiKSBhd2FpdCB0aGlzLnJlbmRlcigpXHJcbiAgICB9XHJcblxyXG4gICAgdG9PYmplY3QgPSAoKSA9PlxyXG4gICAgICAgIG5ldyBQcm94eShcclxuICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldDogKHRhcmdldCwgcHJvcCkgPT4gU2V0dGluZ3NTZWN0aW9uLmdldEZpZWxkVmFsdWUodGhpcy5nZXRJZChwcm9wLnRvU3RyaW5nKCkpKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApXHJcblxyXG4gICAgcmVyZW5kZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0UmVyZW5kZXIpIHRoaXMuc2V0UmVyZW5kZXIoTWF0aC5yYW5kb20oKSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlciA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB3aGlsZSAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVza3RvcC5zZXR0aW5ncy5zZWxlY3RMYW5ndWFnZVwiKSkge1xyXG4gICAgICAgICAgICBpZiAoU3BpY2V0aWZ5LlBsYXRmb3JtLkhpc3RvcnkubG9jYXRpb24ucGF0aG5hbWUgIT09IFwiL3ByZWZlcmVuY2VzXCIpIHJldHVyblxyXG4gICAgICAgICAgICBhd2FpdCBzbGVlcCgxMDApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhbGxTZXR0aW5nc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIueC1zZXR0aW5ncy1jb250YWluZXJcIikhXHJcblxyXG4gICAgICAgIGxldCBwbHVnaW5TZXR0aW5nc0NvbnRhaW5lciA9IEFycmF5LmZyb20oYWxsU2V0dGluZ3NDb250YWluZXIuY2hpbGRyZW4pLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09IHRoaXMuc2VjdGlvbklkKVxyXG5cclxuICAgICAgICBpZiAoIXBsdWdpblNldHRpbmdzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHBsdWdpblNldHRpbmdzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgICAgICBwbHVnaW5TZXR0aW5nc0NvbnRhaW5lci5pZCA9IHRoaXMuc2VjdGlvbklkXHJcbiAgICAgICAgICAgIHBsdWdpblNldHRpbmdzQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwic2V0dGluZ3NDb250YWluZXJcIlxyXG4gICAgICAgICAgICBhbGxTZXR0aW5nc0NvbnRhaW5lci5hcHBlbmRDaGlsZChwbHVnaW5TZXR0aW5nc0NvbnRhaW5lcilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFJlYWN0RE9NLnJlbmRlcig8dGhpcy5GaWVsZHNDb250YWluZXIgLz4sIHBsdWdpblNldHRpbmdzQ29udGFpbmVyKVxyXG4gICAgfVxyXG5cclxuICAgIGFkZEJ1dHRvbiA9IChcclxuICAgICAgICBuYW1lSWQ6IHN0cmluZyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG4gICAgICAgIHRleHQ6IHN0cmluZyxcclxuICAgICAgICBvbkNsaWNrOiAoZTogUmVhY3QuTW91c2VFdmVudDxIVE1MQnV0dG9uRWxlbWVudCwgTW91c2VFdmVudD4pID0+IHZvaWQgPSBjb25zdFZvaWQsXHJcbiAgICAgICAgZXZlbnRzOiBCdXR0b25GaWVsZFtcImV2ZW50c1wiXSA9IHt9LFxyXG4gICAgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldElkKG5hbWVJZClcclxuXHJcbiAgICAgICAgZXZlbnRzLm9uQ2xpY2sgPSBvbkNsaWNrXHJcblxyXG4gICAgICAgIHRoaXMuc2VjdGlvbkZpZWxkc1tuYW1lSWRdID0ge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgdHlwZTogRmllbGRUeXBlLkJVVFRPTixcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHRleHQsXHJcbiAgICAgICAgICAgIGV2ZW50cyxcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgIH1cclxuXHJcbiAgICBhZGRUb2dnbGUgPSAoXHJcbiAgICAgICAgbmFtZUlkOiBzdHJpbmcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgICAgICBkZWZhdWx0VmFsdWUgPSB0YXNrLm9mKHRydWUpLFxyXG4gICAgICAgIG9uQ2hhbmdlOiAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHZvaWQgPSBjb25zdFZvaWQsXHJcbiAgICAgICAgZXZlbnRzOiBUb2dnbGVGaWVsZFtcImV2ZW50c1wiXSA9IHt9LFxyXG4gICAgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldElkKG5hbWVJZClcclxuXHJcbiAgICAgICAgU2V0dGluZ3NTZWN0aW9uLnNldERlZmF1bHRGaWVsZFZhbHVlKGlkLCBkZWZhdWx0VmFsdWUpXHJcblxyXG4gICAgICAgIGV2ZW50cy5vbkNoYW5nZSA9IG9uQ2hhbmdlXHJcbiAgICAgICAgdGhpcy5zZWN0aW9uRmllbGRzW25hbWVJZF0gPSB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB0eXBlOiBGaWVsZFR5cGUuVE9HR0xFLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgZXZlbnRzLFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIGFkZElucHV0ID0gKFxyXG4gICAgICAgIG5hbWVJZDogc3RyaW5nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB0YXNrLlRhc2s8c3RyaW5nPixcclxuICAgICAgICBvbkNoYW5nZTogKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB2b2lkID0gY29uc3RWb2lkLFxyXG4gICAgICAgIGlucHV0VHlwZSA9IFwidGV4dFwiLFxyXG4gICAgICAgIGV2ZW50czogSW5wdXRGaWVsZFtcImV2ZW50c1wiXSA9IHt9LFxyXG4gICAgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldElkKG5hbWVJZClcclxuXHJcbiAgICAgICAgU2V0dGluZ3NTZWN0aW9uLnNldERlZmF1bHRGaWVsZFZhbHVlKGlkLCBkZWZhdWx0VmFsdWUpXHJcblxyXG4gICAgICAgIGV2ZW50cy5vbkNoYW5nZSA9IG9uQ2hhbmdlXHJcbiAgICAgICAgdGhpcy5zZWN0aW9uRmllbGRzW25hbWVJZF0gPSB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB0eXBlOiBGaWVsZFR5cGUuSU5QVVQsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBpbnB1dFR5cGUsXHJcbiAgICAgICAgICAgIGV2ZW50cyxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgYWRkRHJvcERvd24gPSAoXHJcbiAgICAgICAgbmFtZUlkOiBzdHJpbmcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgICAgICBvcHRpb25zOiBzdHJpbmdbXSxcclxuICAgICAgICBkZWZhdWx0VmFsdWUgPSB0YXNrLm9mKDApLFxyXG4gICAgICAgIG9uQ2hhbmdlOiAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB2b2lkID0gY29uc3RWb2lkLFxyXG4gICAgICAgIGV2ZW50czogRHJvcGRvd25GaWVsZFtcImV2ZW50c1wiXSA9IHt9LFxyXG4gICAgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldElkKG5hbWVJZClcclxuXHJcbiAgICAgICAgU2V0dGluZ3NTZWN0aW9uLnNldERlZmF1bHRGaWVsZFZhbHVlKGlkLCBkZWZhdWx0VmFsdWUpXHJcblxyXG4gICAgICAgIGV2ZW50cy5vbkNoYW5nZSA9IG9uQ2hhbmdlXHJcbiAgICAgICAgdGhpcy5zZWN0aW9uRmllbGRzW25hbWVJZF0gPSB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB0eXBlOiBGaWVsZFR5cGUuRFJPUERPV04sXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgICAgICBldmVudHMsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgYWRkSGlkZGVuID0gKG5hbWVJZDogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IGFueSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRJZChuYW1lSWQpXHJcblxyXG4gICAgICAgIFNldHRpbmdzU2VjdGlvbi5zZXREZWZhdWx0RmllbGRWYWx1ZShpZCwgZGVmYXVsdFZhbHVlKVxyXG5cclxuICAgICAgICB0aGlzLnNlY3Rpb25GaWVsZHNbbmFtZUlkXSA9IHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIHR5cGU6IEZpZWxkVHlwZS5ISURERU4sXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIGdldElkID0gKG5hbWVJZDogc3RyaW5nKSA9PiBgZXh0ZW5zaW9uczoke3RoaXMuc2VjdGlvbklkfToke25hbWVJZH1gXHJcblxyXG4gICAgcHJpdmF0ZSB1c2VTdGF0ZUZvciA9IDxBLD4oaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVTdGF0ZV0gPSBSZWFjdC51c2VTdGF0ZShTZXR0aW5nc1NlY3Rpb24uZ2V0RmllbGRWYWx1ZTxBPihpZCkpXHJcblxyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAobmV3VmFsdWU6IEEpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWVTdGF0ZShuZXdWYWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc1NlY3Rpb24uc2V0RmllbGRWYWx1ZShpZCEsIG5ld1ZhbHVlKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0gYXMgY29uc3RcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0RmllbGRWYWx1ZSA9IDxSLD4oaWQ6IHN0cmluZyk6IFIgPT4ge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKFNwaWNldGlmeS5Mb2NhbFN0b3JhZ2UuZ2V0KGlkKSA/PyBcIm51bGxcIikgLy8gXCJudWxsXCIgaXMgcGFyc2VkIGFzIG51bGwsIHRoZSBtb3JlIHlvdSBrbm93XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHNldEZpZWxkVmFsdWUgPSAoaWQ6IHN0cmluZywgbmV3VmFsdWU6IGFueSkgPT4ge1xyXG4gICAgICAgIFNwaWNldGlmeS5Mb2NhbFN0b3JhZ2Uuc2V0KGlkLCBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSkpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc2V0RGVmYXVsdEZpZWxkVmFsdWUgPSBhc3luYyAoaWQ6IHN0cmluZywgZGVmYXVsdFZhbHVlOiB0YXNrLlRhc2s8YW55PikgPT4ge1xyXG4gICAgICAgIGlmIChTZXR0aW5nc1NlY3Rpb24uZ2V0RmllbGRWYWx1ZShpZCkgPT09IG51bGwpIFNldHRpbmdzU2VjdGlvbi5zZXRGaWVsZFZhbHVlKGlkLCBhd2FpdCBkZWZhdWx0VmFsdWUoKSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIEZpZWxkc0NvbnRhaW5lciA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBbcmVyZW5kZXIsIHNldFJlcmVuZGVyXSA9IFJlYWN0LnVzZVN0YXRlPG51bWJlcj4oMClcclxuICAgICAgICB0aGlzLnNldFJlcmVuZGVyID0gc2V0UmVyZW5kZXJcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ4LXNldHRpbmdzLXNlY3Rpb25cIiBrZXk9e3JlcmVuZGVyfT5cclxuICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJUeXBlX19UeXBlRWxlbWVudC1zYy1nb2xpM2otMCBUeXBlRWxlbWVudC1jZWxsby10ZXh0QmFzZS10eXBlXCI+e3RoaXMubmFtZX08L2gyPlxyXG4gICAgICAgICAgICAgICAge09iamVjdC5lbnRyaWVzKHRoaXMuc2VjdGlvbkZpZWxkcykubWFwKChbbmFtZUlkLCBmaWVsZF0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPHRoaXMuRmllbGQgZmllbGQ9e2ZpZWxkfSAvPlxyXG4gICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIEZpZWxkID0gKHsgZmllbGQgfTogeyBmaWVsZDogU2V0dGluZ3NGaWVsZCB9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXNUeXBlID0gaXM8U2V0dGluZ3NGaWVsZD4oXCJ0eXBlXCIpXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1yb3dcIj5cclxuICAgICAgICAgICAgICAgIDx0aGlzLlNldHRpbmdEZXNjcmlwdGlvbiBpZD17ZmllbGQuaWR9IGRlc2NyaXB0aW9uPXtmaWVsZC5kZXNjcmlwdGlvbn0gLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1zZWNvbmRDb2x1bW5cIj5cclxuICAgICAgICAgICAgICAgICAgICB7Z3VhcmQ0KFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2lzVHlwZTxJbnB1dEZpZWxkPihGaWVsZFR5cGUuSU5QVVQpLCB0aGlzLlNldHRpbmdJbnB1dEZpZWxkXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2lzVHlwZShGaWVsZFR5cGUuQlVUVE9OKSwgdGhpcy5TZXR0aW5nQnV0dG9uRmllbGRdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbaXNUeXBlKEZpZWxkVHlwZS5UT0dHTEUpLCB0aGlzLlNldHRpbmdUb2dnbGVGaWVsZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtpc1R5cGUoRmllbGRUeXBlLkRST1BET1dOKSwgdGhpcy5TZXR0aW5nRHJvcGRvd25GaWVsZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgXSkodGhpcy5TZXR0aW5nSGlkZGVuKShmaWVsZCl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgU2V0dGluZ0Rlc2NyaXB0aW9uID0gKHsgaWQsIGRlc2NyaXB0aW9uIH06IHsgaWQ6IHN0cmluZzsgZGVzY3JpcHRpb246IHN0cmluZyB9KSA9PiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ4LXNldHRpbmdzLWZpcnN0Q29sdW1uXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJUeXBlX19UeXBlRWxlbWVudC1zYy1nb2xpM2otMCBUeXBlRWxlbWVudC12aW9sYS10ZXh0U3ViZHVlZC10eXBlXCIgaHRtbEZvcj17aWR9PlxyXG4gICAgICAgICAgICAgICAge2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG5cclxuICAgIHByaXZhdGUgU2V0dGluZ0J1dHRvbkZpZWxkID0gKGZpZWxkOiBCdXR0b25GaWVsZCkgPT4gKFxyXG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIlwiPlxyXG4gICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICBpZD17ZmllbGQuaWR9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJCdXR0b24tc2MteTBndGJ4LTAgQnV0dG9uLXNtLWJ1dHRvblNlY29uZGFyeS11c2VCcm93c2VyRGVmYXVsdEZvY3VzU3R5bGUgeC1zZXR0aW5ncy1idXR0b25cIlxyXG4gICAgICAgICAgICAgICAgey4uLmZpZWxkLmV2ZW50c31cclxuICAgICAgICAgICAgICAgIHR5cGU9e2ZpZWxkLnR5cGV9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHtmaWVsZC50ZXh0fVxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICApXHJcblxyXG4gICAgcHJpdmF0ZSBTZXR0aW5nVG9nZ2xlRmllbGQgPSAoZmllbGQ6IFRvZ2dsZUZpZWxkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB0aGlzLnVzZVN0YXRlRm9yPGJvb2xlYW4+KGZpZWxkLmlkKVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1zZWNvbmRDb2x1bW4geC10b2dnbGUtd3JhcHBlclwiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9e2ZpZWxkLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIngtdG9nZ2xlLWlucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1NldHRpbmdzU2VjdGlvbi5nZXRGaWVsZFZhbHVlKGZpZWxkLmlkKX1cclxuICAgICAgICAgICAgICAgICAgICB7Li4uZmllbGQuZXZlbnRzfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUoZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmV2ZW50cy5vbkNoYW5nZT8uKGUpXHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ4LXRvZ2dsZS1pbmRpY2F0b3JXcmFwcGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwieC10b2dnbGUtaW5kaWNhdG9yXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIFNldHRpbmdJbnB1dEZpZWxkID0gKGZpZWxkOiBJbnB1dEZpZWxkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB0aGlzLnVzZVN0YXRlRm9yPHN0cmluZz4oZmllbGQuaWQpXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICBpZD17ZmllbGQuaWR9XHJcbiAgICAgICAgICAgICAgICBkaXI9XCJsdHJcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e1NldHRpbmdzU2VjdGlvbi5nZXRGaWVsZFZhbHVlKGZpZWxkLmlkKX1cclxuICAgICAgICAgICAgICAgIHR5cGU9e2ZpZWxkLmlucHV0VHlwZX1cclxuICAgICAgICAgICAgICAgIHsuLi5maWVsZC5ldmVudHN9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUoZS5jdXJyZW50VGFyZ2V0LnZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmV2ZW50cy5vbkNoYW5nZT8uKGUpXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgIClcclxuICAgIH1cclxuICAgIHByaXZhdGUgU2V0dGluZ0Ryb3Bkb3duRmllbGQgPSAoZmllbGQ6IERyb3Bkb3duRmllbGQpID0+IHtcclxuICAgICAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IHRoaXMudXNlU3RhdGVGb3I8bnVtYmVyPihmaWVsZC5pZClcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHNlbGVjdFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWFpbi1kcm9wRG93bi1kcm9wRG93blwiXHJcbiAgICAgICAgICAgICAgICBpZD17ZmllbGQuaWR9XHJcbiAgICAgICAgICAgICAgICB7Li4uZmllbGQuZXZlbnRzfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFZhbHVlKGUuY3VycmVudFRhcmdldC5zZWxlY3RlZEluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmV2ZW50cy5vbkNoYW5nZT8uKGUpXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICB7ZmllbGQub3B0aW9ucy5tYXAoKG9wdGlvbiwgaSkgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gc2VsZWN0ZWQ9e2kgPT09IFNldHRpbmdzU2VjdGlvbi5nZXRGaWVsZFZhbHVlKGZpZWxkLmlkKX0gdmFsdWU9e2kgKyAxfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge29wdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBTZXR0aW5nSGlkZGVuID0gKCkgPT4gPD48Lz5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGVudW0gRmllbGRUeXBlIHtcclxuICAgIEhJRERFTiA9IFwiaGlkZGVuXCIsXHJcbiAgICBJTlBVVCA9IFwiaW5wdXRcIixcclxuICAgIERST1BET1dOID0gXCJkcm9wZG93blwiLFxyXG4gICAgQlVUVE9OID0gXCJidXR0b25cIixcclxuICAgIFRPR0dMRSA9IFwidG9nZ2xlXCIsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUZpZWxkPEE+IHtcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIHR5cGU6IEZpZWxkVHlwZVxyXG4gICAgZGVzY3JpcHRpb246IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJ1dHRvbkZpZWxkIGV4dGVuZHMgQmFzZUZpZWxkPG5ldmVyPiB7XHJcbiAgICB0eXBlOiBGaWVsZFR5cGUuQlVUVE9OXHJcbiAgICB0ZXh0OiBzdHJpbmdcclxuICAgIGV2ZW50czogUGFydGlhbDxSZWFjdC5CdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD4+XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVG9nZ2xlRmllbGQgZXh0ZW5kcyBCYXNlRmllbGQ8Ym9vbGVhbj4ge1xyXG4gICAgdHlwZTogRmllbGRUeXBlLlRPR0dMRVxyXG4gICAgZXZlbnRzOiBQYXJ0aWFsPFJlYWN0LklucHV0SFRNTEF0dHJpYnV0ZXM8SFRNTElucHV0RWxlbWVudD4+XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW5wdXRGaWVsZCBleHRlbmRzIEJhc2VGaWVsZDxzdHJpbmc+IHtcclxuICAgIHR5cGU6IEZpZWxkVHlwZS5JTlBVVFxyXG4gICAgaW5wdXRUeXBlOiBzdHJpbmdcclxuICAgIGV2ZW50czogUGFydGlhbDxSZWFjdC5JbnB1dEhUTUxBdHRyaWJ1dGVzPEhUTUxJbnB1dEVsZW1lbnQ+PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERyb3Bkb3duRmllbGQgZXh0ZW5kcyBCYXNlRmllbGQ8bnVtYmVyPiB7XHJcbiAgICB0eXBlOiBGaWVsZFR5cGUuRFJPUERPV05cclxuICAgIG9wdGlvbnM6IHN0cmluZ1tdXHJcbiAgICBldmVudHM6IFBhcnRpYWw8UmVhY3QuU2VsZWN0SFRNTEF0dHJpYnV0ZXM8SFRNTFNlbGVjdEVsZW1lbnQ+PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEhpZGRlbkZpZWxkIGV4dGVuZHMgQmFzZUZpZWxkPGFueT4ge1xyXG4gICAgdHlwZTogRmllbGRUeXBlLkhJRERFTlxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTZXR0aW5nc0ZpZWxkID0gSGlkZGVuRmllbGQgfCBEcm9wZG93bkZpZWxkIHwgSW5wdXRGaWVsZCB8IEJ1dHRvbkZpZWxkIHwgVG9nZ2xlRmllbGRcclxuIiwgImltcG9ydCB7IFNldHRpbmdzU2VjdGlvbiB9IGZyb20gXCIuLi8uLi9zaGFyZWQvc2V0dGluZ3MudHN4XCJcclxuaW1wb3J0IHsgYmFja3VwLCByZXN0b3JlIH0gZnJvbSBcIi4vYXBwLnRzXCJcclxuXHJcbmNvbnN0IHNldHRpbmdzID0gbmV3IFNldHRpbmdzU2VjdGlvbihcIlZhdWx0aWZ5XCIsIFwidmF1bHRpZnlcIilcclxuICAgIC5hZGRCdXR0b24oXCJiYWNrdXBcIiwgXCJCYWNrdXAgTGlicmFyeSwgRXh0ZW5zaW9ucyBhbmQgU2V0dGluZ3NcIiwgXCJCYWNrdXAgdG8gY2xpcGJvYXJkXCIsIGJhY2t1cClcclxuICAgIC5hZGRCdXR0b24oXCJyZXN0b3JlTGlicmFyeVwiLCBcIlJlc3RvcmUgTGlicmFyeVwiLCBcIlJlc3RvcmUgZnJvbSBjbGlwYm9hcmRcIiwgcmVzdG9yZShcImxpYnJhcnlcIikpXHJcbiAgICAuYWRkQnV0dG9uKFwicmVzdG9yZUV4dGVuc2lvbnNcIiwgXCJSZXN0b3JlIEV4dGVuc2lvbnNcIiwgXCJSZXN0b3JlIGZyb20gY2xpcGJvYXJkXCIsIHJlc3RvcmUoXCJleHRlbnNpb25zXCIpKVxyXG4gICAgLmFkZEJ1dHRvbihcInJlc3RvcmVTZXR0aW5nc1wiLCBcIlJlc3RvcmUgU2V0dGluZ3NcIiwgXCJSZXN0b3JlIGZyb20gY2xpcGJvYXJkXCIsIHJlc3RvcmUoXCJzZXR0aW5nc1wiKSlcclxuXHJcbnNldHRpbmdzLnB1c2hTZXR0aW5ncygpXHJcbiIsICJpbXBvcnQgeyBhcnJheSBhcyBhciwgZnVuY3Rpb24gYXMgZiwgcmVjb3JkIGFzIHJlYywgdGFzayB9IGZyb20gXCJodHRwczovL2VzbS5zaC9mcC10c1wiXHJcbmltcG9ydCB7XHJcbiAgICBjcmVhdGVQbGF0Rm9sZGVyLFxyXG4gICAgY3JlYXRlU1BQbGF5bGlzdEZyb21UcmFja3MsXHJcbiAgICBmZXRjaFBsYXRQbGF5bGlzdENvbnRlbnRzLFxyXG4gICAgZmV0Y2hQbGF0Um9vdEZvbGRlcixcclxuICAgIGxpa2VQbGF0UGxheWxpc3QsXHJcbn0gZnJvbSBcIi4uLy4uL3NoYXJlZC9hcGkudHNcIlxyXG5pbXBvcnQgeyBndWFyZDIsIGlzLCBwTWNoYWluIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC9mcC50c1wiXHJcbmltcG9ydCB7IFNwb3RpZnlVUkksIGdldFJlYWN0UHJvcHMsIHNldExpa2VkIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC91dGlsLnRzXCJcclxuaW1wb3J0IHsgRm9sZGVyLCBQbGF5bGlzdCwgUG9GIH0gZnJvbSBcIi4vdXRpbC50c1wiXHJcblxyXG5jb25zdCBpc1R5cGUgPSBpczxQb0Y+KFwidHlwZVwiKVxyXG5jb25zdCBleHRyYWN0TGlrZWRQbGF5bGlzdFRyZWVSZWN1ciA9IChsZWFmOiBQb0YpID0+XHJcbiAgICBndWFyZDI8UG9GLCBQbGF5bGlzdCwgRm9sZGVyLCBQcm9taXNlPHt9Pj4oW1xyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgaXNUeXBlKFwicGxheWxpc3RcIiksXHJcbiAgICAgICAgICAgIGFzeW5jIHBsYXlsaXN0ID0+ICh7XHJcbiAgICAgICAgICAgICAgICBbcGxheWxpc3QubmFtZV06IHBsYXlsaXN0LmlzT3duZWRCeVNlbGZcclxuICAgICAgICAgICAgICAgICAgICA/IGF3YWl0IGYucGlwZShwbGF5bGlzdC51cmksIGZldGNoUGxhdFBsYXlsaXN0Q29udGVudHMsIHBNY2hhaW4oYXIubWFwKHggPT4geC51cmkpKSlcclxuICAgICAgICAgICAgICAgICAgICA6IHBsYXlsaXN0LnVyaSxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgXSxcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgIGlzVHlwZShcImZvbGRlclwiKSxcclxuICAgICAgICAgICAgYXN5bmMgKGZvbGRlcik6IFByb21pc2U8e30+ID0+ICh7XHJcbiAgICAgICAgICAgICAgICBbZm9sZGVyLm5hbWVdOiBhd2FpdCBmLnBpcGUoZm9sZGVyLml0ZW1zLCBhci5tYXAoZXh0cmFjdExpa2VkUGxheWxpc3RUcmVlUmVjdXIpLCBwcyA9PiBQcm9taXNlLmFsbChwcykpLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICBdLFxyXG4gICAgXSkodGFzay5vZih7fSkpKGxlYWYpXHJcblxyXG50eXBlIFNwb3RpZnlUcmFja1VyaSA9IFNwb3RpZnlVUkkgJiB7IF86IFwidHJhY2tcIiB9XHJcbnR5cGUgU3BvdGlmeVBsYXlsaXN0VXJpID0gU3BvdGlmeVVSSSAmIHsgXzogXCJwbGF5bGlzdFwiIH1cclxuXHJcbnR5cGUgbmFtZSA9IHN0cmluZ1xyXG50eXBlIG5hbWVkUHJvcDxBPiA9IFJlY29yZDxuYW1lLCBBPlxyXG50eXBlIExpa2VkUGxheWxpc3QgPSBuYW1lZFByb3A8U3BvdGlmeVBsYXlsaXN0VXJpPlxyXG50eXBlIFBlcnNvbmFsUGxheWxpc3QgPSBuYW1lZFByb3A8U3BvdGlmeVRyYWNrVXJpW10+XHJcbnR5cGUgUGVyc29uYWxGb2xkZXIgPSBuYW1lZFByb3A8QXJyYXk8TGlrZWRQbGF5bGlzdCB8IFBlcnNvbmFsUGxheWxpc3QgfCBQZXJzb25hbEZvbGRlcj4+XHJcblxyXG5jb25zdCBpc0NvbnRlbnRPZlBlcnNvbmFsUGxheWxpc3QgPSAoXHJcbiAgICBzdWJsZWFmOiBQZXJzb25hbEZvbGRlcltcIlwiXSB8IFBlcnNvbmFsUGxheWxpc3RbXCJcIl0sXHJcbik6IHN1YmxlYWYgaXMgUGVyc29uYWxQbGF5bGlzdFtcIlwiXSA9PiB0eXBlb2Ygc3VibGVhZlswXSA9PT0gXCJzdHJpbmdcIiAmJiBTcGljZXRpZnkuVVJJLmlzVHJhY2soc3VibGVhZlswXSlcclxuXHJcbmNvbnN0IHJlc3RvcmVQbGF5bGlzdHNlUmVjdXIgPSBhc3luYyAobGVhZjogUGVyc29uYWxGb2xkZXIgfCBQZXJzb25hbFBsYXlsaXN0IHwgTGlrZWRQbGF5bGlzdCkgPT4ge1xyXG4gICAgT2JqZWN0LmtleXMobGVhZikuZm9yRWFjaChuYW1lID0+IHtcclxuICAgICAgICBjb25zdCBzdWJsZWFmID0gbGVhZltuYW1lXVxyXG5cclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3VibGVhZikpIHJldHVybiB2b2lkIGxpa2VQbGF0UGxheWxpc3Qoc3VibGVhZilcclxuICAgICAgICBpZiAoc3VibGVhZi5sZW5ndGggPT09IDApIHJldHVyblxyXG5cclxuICAgICAgICBpZiAoaXNDb250ZW50T2ZQZXJzb25hbFBsYXlsaXN0KHN1YmxlYWYpKSByZXR1cm4gdm9pZCBjcmVhdGVTUFBsYXlsaXN0RnJvbVRyYWNrcyhuYW1lLCBzdWJsZWFmKVxyXG5cclxuICAgICAgICBjcmVhdGVQbGF0Rm9sZGVyKG5hbWUpXHJcbiAgICAgICAgc3VibGVhZi5mb3JFYWNoKHJlc3RvcmVQbGF5bGlzdHNlUmVjdXIpXHJcbiAgICB9KVxyXG59XHJcblxyXG5jb25zdCBhbGxvd2VkRXh0RGF0YVJlZ2V4ID0gL14oPzptYXJrZXRwbGFjZTopfCg/OmV4dGVuc2lvbnM6KXwoPzpzcGljZXRpZnkpL1xyXG5leHBvcnQgY29uc3QgYmFja3VwID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgZXh0cmFjdEl0ZW1zVXJpcyA9IChhOiBhbnkpID0+IGEuaXRlbXMubWFwKChpdGVtOiBhbnkpID0+IGl0ZW0udXJpKVxyXG5cclxuICAgIGNvbnN0IHJhd0xpYnJhcnlUcmFja3MgPSBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uTGlicmFyeUFQSS5nZXRUcmFja3Moe1xyXG4gICAgICAgIGxpbWl0OiAtMSxcclxuICAgICAgICBzb3J0OiB7IGZpZWxkOiBcIkFEREVEX0FUXCIsIG9yZGVyOiBcIkFTQ1wiIH0sXHJcbiAgICB9KVxyXG4gICAgY29uc3QgbGlicmFyeVRyYWNrcyA9IGV4dHJhY3RJdGVtc1VyaXMocmF3TGlicmFyeVRyYWNrcylcclxuXHJcbiAgICBjb25zdCByYXdMaWJyYXJ5QWxidW1zID0gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuZ2V0QWxidW1zKHtcclxuICAgICAgICBsaW1pdDogMiAqKiAzMCxcclxuICAgICAgICBzb3J0OiB7IGZpZWxkOiBcIkFEREVEX0FUXCIgfSxcclxuICAgIH0pXHJcbiAgICBjb25zdCBsaWJyYXJ5QWxidW1zID0gZXh0cmFjdEl0ZW1zVXJpcyhyYXdMaWJyYXJ5QWxidW1zKVxyXG5cclxuICAgIGNvbnN0IHJhd0xpYnJhcnlBcnRpc3RzID0gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuZ2V0QXJ0aXN0cyh7XHJcbiAgICAgICAgbGltaXQ6IDIgKiogMzAsXHJcbiAgICAgICAgc29ydDoge1xyXG4gICAgICAgICAgICBmaWVsZDogXCJBRERFRF9BVFwiLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgY29uc3QgbGlicmFyeUFydGlzdHMgPSBleHRyYWN0SXRlbXNVcmlzKHJhd0xpYnJhcnlBcnRpc3RzKVxyXG5cclxuICAgIGNvbnN0IHBsYXlsaXN0cyA9IGF3YWl0IGYucGlwZSgoYXdhaXQgZmV0Y2hQbGF0Um9vdEZvbGRlcigpKSBhcyBhbnksIGV4dHJhY3RMaWtlZFBsYXlsaXN0VHJlZVJlY3VyKVxyXG5cclxuICAgIGNvbnN0IGxvY2FsU3RvcmUgPSBmLnBpcGUoXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLFxyXG4gICAgICAgIHJlYy50b1VuZm9sZGFibGUoYXIpLFxyXG4gICAgICAgIGFyLmZpbHRlcjxbc3RyaW5nLCBzdHJpbmddPigoW2tleV0pID0+IGFsbG93ZWRFeHREYXRhUmVnZXgudGVzdChrZXkpKSxcclxuICAgIClcclxuXHJcbiAgICBjb25zdCB7IGl0ZW1zLCBuYW1lc3BhY2UgfSA9IFNwaWNldGlmeS5QbGF0Zm9ybS5Mb2NhbFN0b3JhZ2VBUElcclxuXHJcbiAgICBjb25zdCBsb2NhbFN0b3JlQVBJID0gZi5waXBlKFxyXG4gICAgICAgIGl0ZW1zLFxyXG4gICAgICAgIHJlYy50b1VuZm9sZGFibGUoYXIpLFxyXG4gICAgICAgIGFyLmZpbHRlcjxbc3RyaW5nLCBzdHJpbmddPigoW2tleV0pID0+IGtleS5zdGFydHNXaXRoKG5hbWVzcGFjZSkpLFxyXG4gICAgICAgIGFyLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBba2V5LnNwbGl0KFwiOlwiKVsxXSwgdmFsdWVdKSxcclxuICAgIClcclxuXHJcbiAgICBjb25zdCBzZXR0aW5ncyA9IGYucGlwZShcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbaWRePVwic2V0dGluZ3MuXCJdLFtpZF49XCJkZXNrdG9wLlwiXSxbY2xhc3NePVwibmV0d29yay5cIl1gKSBhcyBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PixcclxuICAgICAgICBBcnJheS5mcm9tPEhUTUxFbGVtZW50PixcclxuICAgICAgICBhci5mbGF0TWFwKHNldHRpbmcgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpZCA9IHNldHRpbmcuZ2V0QXR0cmlidXRlKFwiaWRcIilcclxuXHJcbiAgICAgICAgICAgIGlmIChzZXR0aW5nIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IHNldHRpbmcuZ2V0QXR0cmlidXRlKFwidHlwZVwiKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcImNoZWNrYm94XCIpIHJldHVybiBbW2lkLCBcImNoZWNrYm94XCIsIHNldHRpbmcuY2hlY2tlZF1dXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcInRleHRcIikgcmV0dXJuIFtbaWQsIFwidGV4dFwiLCBzZXR0aW5nLnZhbHVlXV1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZXR0aW5nIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQpIHJldHVybiBbW2lkLCBcInNlbGVjdFwiLCBzZXR0aW5nLnZhbHVlXV1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBbXVxyXG4gICAgICAgIH0pLFxyXG4gICAgKVxyXG5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5DbGlwYm9hcmRBUEkuY29weShcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIGxpYnJhcnlUcmFja3MsXHJcbiAgICAgICAgICAgIGxpYnJhcnlBbGJ1bXMsXHJcbiAgICAgICAgICAgIGxpYnJhcnlBcnRpc3RzLFxyXG4gICAgICAgICAgICBwbGF5bGlzdHMsXHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmUsXHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmVBUEksXHJcbiAgICAgICAgICAgIHNldHRpbmdzLFxyXG4gICAgICAgIH0gYXMgVmF1bHQpLFxyXG4gICAgKVxyXG4gICAgU3BpY2V0aWZ5LnNob3dOb3RpZmljYXRpb24oXCJCYWNrZWQgdXAgUGxheWxpc3RzLCBFeHRlbnNpb25zIGFuZCBTZXR0aW5nc1wiKVxyXG59XHJcblxyXG50eXBlIFZhdWx0ID0ge1xyXG4gICAgbGlicmFyeVRyYWNrczogQXJyYXk8U3BvdGlmeVVSST5cclxuICAgIGxpYnJhcnlBbGJ1bXM6IEFycmF5PFNwb3RpZnlVUkk+XHJcbiAgICBsaWJyYXJ5QXJ0aXN0czogQXJyYXk8U3BvdGlmeVVSST5cclxuICAgIHBsYXlsaXN0czogUGVyc29uYWxGb2xkZXJcclxuICAgIGxvY2FsU3RvcmU6IEFycmF5PFtzdHJpbmcsIHN0cmluZ10+XHJcbiAgICBsb2NhbFN0b3JlQVBJOiBBcnJheTxbc3RyaW5nLCBzdHJpbmddPlxyXG4gICAgc2V0dGluZ3M6IEFycmF5PFtzdHJpbmcsIHN0cmluZywgYW55XT5cclxufVxyXG5leHBvcnQgY29uc3QgcmVzdG9yZSA9IChtb2RlOiBcImxpYnJhcnlcIiB8IFwiZXh0ZW5zaW9uc1wiIHwgXCJzZXR0aW5nc1wiKSA9PiBhc3luYyAoKSA9PiB7XHJcbiAgICBsZXQgdmF1bHQgPSBKU09OLnBhcnNlKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5DbGlwYm9hcmRBUEkucGFzdGUoKSkgYXMgVmF1bHRcclxuXHJcbiAgICBpZiAobW9kZSA9PT0gXCJsaWJyYXJ5XCIpIHtcclxuICAgICAgICBzZXRMaWtlZCh2YXVsdC5saWJyYXJ5VHJhY2tzLCB0cnVlKVxyXG4gICAgICAgIHNldExpa2VkKHZhdWx0LmxpYnJhcnlBbGJ1bXMsIHRydWUpXHJcbiAgICAgICAgc2V0TGlrZWQodmF1bHQubGlicmFyeUFydGlzdHMsIHRydWUpXHJcbiAgICAgICAgYXdhaXQgcmVzdG9yZVBsYXlsaXN0c2VSZWN1cih2YXVsdC5wbGF5bGlzdHMpXHJcbiAgICAgICAgU3BpY2V0aWZ5LnNob3dOb3RpZmljYXRpb24oXCJSZXN0b3JlZCBMaWJyYXJ5XCIpXHJcbiAgICB9XHJcbiAgICBpZiAobW9kZSA9PT0gXCJleHRlbnNpb25zXCIpIHtcclxuICAgICAgICBhci5tYXAoZi50dXBsZWQoU3BpY2V0aWZ5LkxvY2FsU3RvcmFnZS5zZXQpKSh2YXVsdC5sb2NhbFN0b3JlKVxyXG4gICAgICAgIGFyLm1hcChmLnR1cGxlZChTcGljZXRpZnkuUGxhdGZvcm0uTG9jYWxTdG9yYWdlQVBJLnNldEl0ZW0pKSh2YXVsdC5sb2NhbFN0b3JlQVBJKVxyXG4gICAgICAgIFNwaWNldGlmeS5zaG93Tm90aWZpY2F0aW9uKFwiUmVzdG9yZWQgRXh0ZW5zaW9uc1wiKVxyXG4gICAgfVxyXG4gICAgaWYgKG1vZGUgPT09IFwic2V0dGluZ3NcIikge1xyXG4gICAgICAgIHZhdWx0LnNldHRpbmdzLm1hcCgoW2lkLCB0eXBlLCB2YWx1ZV0pID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8YW55PihgW2lkPVwiJHtpZH1cIl1gKVxyXG4gICAgICAgICAgICBpZiAoIXNldHRpbmcpIHJldHVybiBjb25zb2xlLndhcm4oYFNldHRpbmcgZm9yICR7aWR9IHdhc24ndCBmb3VuZGApXHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJ0ZXh0XCIpIHNldHRpbmcudmFsdWUgPSB2YWx1ZVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcImNoZWNrYm94XCIpIHNldHRpbmcuY2hlY2tlZCA9IHZhbHVlXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFwic2VsZWN0XCIpIHNldHRpbmcudmFsdWUgPSB2YWx1ZVxyXG4gICAgICAgICAgICBlbHNlIHJldHVyblxyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ1JlYWN0UHJvcHMgPSBnZXRSZWFjdFByb3BzKHNldHRpbmcpIGFzIGFueVxyXG4gICAgICAgICAgICBzZXR0aW5nUmVhY3RQcm9wcy5vbkNoYW5nZSh7IHRhcmdldDogc2V0dGluZyB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgU3BpY2V0aWZ5LnNob3dOb3RpZmljYXRpb24oXCJSZXN0b3JlZCBTZXR0aW5nc1wiKVxyXG4gICAgfVxyXG59XHJcblxyXG5pbXBvcnQoXCIuL3NldHRpbmdzLnRzXCIpXHJcbiJdLAogICJtYXBwaW5ncyI6ICJtQ0FBQSxPQUNJLFNBQVNBLEVBQ1QsTUFBQUMsRUFDQSxVQUFVQyxHQUNWLFVBQVVDLEdBRVYsYUFBYUMsR0FDYixZQUFZQyxNQUNULHVCQUNQLE9BQVMsU0FBQUMsRUFBTyxXQUFBQyxPQUFlLG9DQVQvQixJQVlhQyxFQUtBQyxFQXFDQUMsRUFLQUMsRUFhQUMsRUFtQkFDLEVBM0ZiQyxFQUFBQyxFQUFBLEtBWWFQLEVBQTRDUSxHQUNyRFYsRUFBTVUsQ0FBcUUsRUFJbEVQLEVBQ1RPLEdBRUFWLEVBQ0lVLENBTUosRUEyQlNOLEVBQ0ZMLEdBQ1AsTUFBT1ksR0FDSFosRUFBRSxNQUFNWSxDQUFFLEVBRUxOLEVBQ0xPLEdBQ1VDLEdBQ2JDLEdBQ0dBLEVBQU1GLENBQUMsSUFBTUMsRUFTUlAs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LEVBQVd5QyxHQUFnRCxTQUFZLENBQ2hGLElBQUlDLEVBQVEsS0FBSyxNQUFNLE1BQU0sVUFBVSxTQUFTLGFBQWEsTUFBTSxDQUFDLEVBRWhFRCxJQUFTLFlBQ1RFLEVBQVNELEVBQU0sY0FBZSxFQUFJLEVBQ2xDQyxFQUFTRCxFQUFNLGNBQWUsRUFBSSxFQUNsQ0MsRUFBU0QsRUFBTSxlQUFnQixFQUFJLEVBQ25DLE1BQU03QyxFQUF1QjZDLEVBQU0sU0FBUyxFQUM1QyxVQUFVLGlCQUFpQixrQkFBa0IsR0FFN0NELElBQVMsZUFDVG5ELEVBQUcsSUFBSUMsRUFBRSxPQUFPLFVBQVUsYUFBYSxHQUFHLENBQUMsRUFBRW1ELEVBQU0sVUFBVSxFQUM3RHBELEVBQUcsSUFBSUMsRUFBRSxPQUFPLFVBQVUsU0FBUyxnQkFBZ0IsT0FBTyxDQUFDLEVBQUVtRCxFQUFNLGFBQWEsRUFDaEYsVUFBVSxpQkFBaUIscUJBQXFCLEdBRWhERCxJQUFTLGFBQ1RDLEVBQU0sU0FBUyxJQUFJLENBQUMsQ0FBQ0gsRUFBSUMsRUFBTUosQ0FBSyxJQUFNLENBQ3RDLElBQU1FLEVBQVUsU0FBUyxjQUFtQixRQUFRQyxDQUFFLElBQUksRUFDMUQsR0FBSSxDQUFDRCxFQUFTLE9BQU8sUUFBUSxLQUFLLGVBQWVDLENBQUUsZUFBZSxFQUVsRSxHQUFJQyxJQUFTLE9BQVFGLEVBQVEsTUFBUUYsVUFDNUJJLElBQVMsV0FBWUYsRUFBUSxRQUFVRixVQUN2Q0ksSUFBUyxTQUFVRixFQUFRLE1BQVFGLE1BQ3ZDLFFBRXFCUSxFQUFjTixDQUFPLEVBQzdCLFNBQVMsQ0FBRSxPQUFRQSxDQUFRLENBQUMsQ0FDbEQsQ0FBQyxFQUNELFVBQVUsaUJBQWlCLG1CQUFtQixFQUV0RCxFQUVBIiwKICAibmFtZXMiOiBbImFyIiwgImVxIiwgInN0ciIsICJyZWMiLCAic2ciLCAiZiIsICJndWFyZCIsICJtZW1vaXplIiwgImd1YXJkMiIsICJndWFyZDQiLCAicE1jaGFpbiIsICJpcyIsICJjaHVuY2tpZnkiLCAibWVtb2l6ZTIiLCAiaW5pdF9mcCIsICJfX2VzbU1pbiIsICJicmFuY2hlcyIsICJmYSIsICJjIiwgImEiLCAiZmllbGQiLCAibiIsICJnIiwgInBzIiwgImZuIiwgImEiLCAiZiIsICJTcG90aWZ5TG9jIiwgInNsZWVwIiwgImdldFJlYWN0UHJvcHMiLCAic2V0TGlrZWQiLCAiaW5pdF91dGlsIiwgIl9fZXNtTWluIiwgInVyaSIsICJ1aWQiLCAibXMiLCAicmVzb2x2ZSIsICJlbGVtZW50IiwgImsiLCAidXJpcyIsICJsaWtlZCIsICJmZXRjaFdlYkFydGlzdHNTcG90IiwgImZldGNoV2ViUGxheWxpc3RzU3BvdCIsICJmZXRjaFdlYkFsYnVtc1Nwb3QiLCAiZmV0Y2hXZWJUcmFja3NTcG90IiwgImZldGNoUGxhdFBsYXlsaXN0Q29udGVudHMiLCAiY3JlYXRlUGxhdEZvbGRlciIsICJsaWtlUGxhdFBsYXlsaXN0IiwgImNyZWF0ZVNQUGxheWxpc3RGcm9tVHJhY2tzIiwgImZldGNoUGxhdEZvbGRlciIsICJmZXRjaFBsYXRSb290Rm9sZGVyIiwgImZldGNoVHJhY2tMRk1BUEkiLCAiZmV0Y2hUcmFja0xGTUFQSU1lbW9pemVkIiwgImluaXRfYXBpIiwgIl9fZXNtTWluIiwgImluaXRfZnAiLCAiaW5pdF91dGlsIiwgImNodW5ja2lmeSIsICJpZHMiLCAiaWQiLCAidXJpIiwgIm5hbWUiLCAibG9jYXRpb24iLCAidHJhY2tzIiwgImZvbGRlciIsICJMRk1BcGlLZXkiLCAiYXJ0aXN0IiwgInRyYWNrTmFtZSIsICJsYXN0Rm1Vc2VybmFtZSIsICJ1cmwiLCAicmVzIiwgIm1lbW9pemUyIiwgInRhc2siLCAiY29uc3RWb2lkIiwgIlJlYWN0IiwgIlJlYWN0RE9NIiwgIlNldHRpbmdzU2VjdGlvbiIsICJpbml0X3NldHRpbmdzIiwgIl9fZXNtTWluIiwgImluaXRfZnAiLCAiaW5pdF91dGlsIiwgIl9TZXR0aW5nc1NlY3Rpb24iLCAibmFtZSIsICJzZWN0aW9uSWQiLCAic2VjdGlvbkZpZWxkcyIsICJzbGVlcCIsICJwYXRobmFtZSIsICJ0YXJnZXQiLCAicHJvcCIsICJhbGxTZXR0aW5nc0NvbnRhaW5lciIsICJwbHVnaW5TZXR0aW5nc0NvbnRhaW5lciIsICJpZCIsICJuYW1lSWQiLCAiZGVzY3JpcHRpb24iLCAidGV4dCIsICJvbkNsaWNrIiwgImV2ZW50cyIsICJkZWZhdWx0VmFsdWUiLCAib25DaGFuZ2UiLCAiaW5wdXRUeXBlIiwgIm9wdGlvbnMiLCAidmFsdWUiLCAic2V0VmFsdWVTdGF0ZSIsICJuZXdWYWx1ZSIsICJyZXJlbmRlciIsICJzZXRSZXJlbmRlciIsICJmaWVsZCIsICJpc1R5cGUiLCAiaXMiLCAiZ3VhcmQ0IiwgInNldFZhbHVlIiwgImUiLCAib3B0aW9uIiwgImkiLCAic2V0dGluZ3NfZXhwb3J0cyIsICJzZXR0aW5ncyIsICJpbml0X3NldHRpbmdzIiwgIl9fZXNtTWluIiwgImluaXRfYXBwIiwgIlNldHRpbmdzU2VjdGlvbiIsICJiYWNrdXAiLCAicmVzdG9yZSIsICJhciIsICJmIiwgInJlYyIsICJ0YXNrIiwgImlzVHlwZSIsICJleHRyYWN0TGlrZWRQbGF5bGlzdFRyZWVSZWN1ciIsICJpc0NvbnRlbnRPZlBlcnNvbmFsUGxheWxpc3QiLCAicmVzdG9yZVBsYXlsaXN0c2VSZWN1ciIsICJhbGxvd2VkRXh0RGF0YVJlZ2V4IiwgImJhY2t1cCIsICJyZXN0b3JlIiwgImluaXRfYXBwIiwgIl9fZXNtTWluIiwgImluaXRfYXBpIiwgImluaXRfZnAiLCAiaW5pdF91dGlsIiwgImlzIiwgImxlYWYiLCAiZ3VhcmQyIiwgInBsYXlsaXN0IiwgImZldGNoUGxhdFBsYXlsaXN0Q29udGVudHMiLCAicE1jaGFpbiIsICJ4IiwgImZvbGRlciIsICJwcyIsICJzdWJsZWFmIiwgIm5hbWUiLCAibGlrZVBsYXRQbGF5bGlzdCIsICJjcmVhdGVTUFBsYXlsaXN0RnJvbVRyYWNrcyIsICJjcmVhdGVQbGF0Rm9sZGVyIiwgImV4dHJhY3RJdGVtc1VyaXMiLCAiYSIsICJpdGVtIiwgInJhd0xpYnJhcnlUcmFja3MiLCAibGlicmFyeVRyYWNrcyIsICJyYXdMaWJyYXJ5QWxidW1zIiwgImxpYnJhcnlBbGJ1bXMiLCAicmF3TGlicmFyeUFydGlzdHMiLCAibGlicmFyeUFydGlzdHMiLCAicGxheWxpc3RzIiwgImZldGNoUGxhdFJvb3RGb2xkZXIiLCAibG9jYWxTdG9yZSIsICJrZXkiLCAiaXRlbXMiLCAibmFtZXNwYWNlIiwgImxvY2FsU3RvcmVBUEkiLCAidmFsdWUiLCAic2V0dGluZ3MiLCAic2V0dGluZyIsICJpZCIsICJ0eXBlIiwgIm1vZGUiLCAidmF1bHQiLCAic2V0TGlrZWQiLCAiZ2V0UmVhY3RQcm9wcyJdCn0K
