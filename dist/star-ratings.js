var UV=Object.create;var{defineProperty:AX,getPrototypeOf:CV,getOwnPropertyNames:NV}=Object;var TV=Object.prototype.hasOwnProperty;var RX=(X,$,Q)=>{Q=X!=null?UV(CV(X)):{};const Y=$||!X||!X.__esModule?AX(Q,"default",{value:X,enumerable:!0}):Q;for(let J of NV(X))if(!TV.call(Y,J))AX(Y,J,{get:()=>X[J],enumerable:!0});return Y};var v=(X,$)=>()=>($||X(($={exports:{}}).exports,$),$.exports);var k1=(X,$)=>{for(var Q in $)AX(X,Q,{get:$[Q],enumerable:!0,configurable:!0,set:(Y)=>$[Q]=()=>Y})};var F=v((U)=>{var b8=function(X){return X},m4=function(X){return function(){return X}},WU=function(X){return function(){var $=[];for(var Q=0;Q<arguments.length;Q++)$[Q]=arguments[Q];if($.length>1)return X($[1],$[0]);return function(Y){return X(Y)($[0])}}},tH=function(X,$,Q,Y,J,Z,V,D,L){switch(arguments.length){case 1:return X;case 2:return function(){return $(X.apply(this,arguments))};case 3:return function(){return Q($(X.apply(this,arguments)))};case 4:return function(){return Y(Q($(X.apply(this,arguments))))};case 5:return function(){return J(Y(Q($(X.apply(this,arguments)))))};case 6:return function(){return Z(J(Y(Q($(X.apply(this,arguments))))))};case 7:return function(){return V(Z(J(Y(Q($(X.apply(this,arguments)))))))};case 8:return function(){return D(V(Z(J(Y(Q($(X.apply(this,arguments))))))))};case 9:return function(){return L(D(V(Z(J(Y(Q($(X.apply(this,arguments)))))))))}}return},EU=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return X},OU=function(X){return X+1},MU=function(X){return X-1},aH=function(X){throw new Error("Called `absurd` function which should be uncallable")},gU=function(X){return function($){return X.apply(void 0,$)}},FU=function(X){return function(){var $=[];for(var Q=0;Q<arguments.length;Q++)$[Q]=arguments[Q];return X($)}},IU=function(X,$,Q,Y,J,Z,V,D,L){switch(arguments.length){case 1:return X;case 2:return $(X);case 3:return Q($(X));case 4:return Y(Q($(X)));case 5:return J(Y(Q($(X))));case 6:return Z(J(Y(Q($(X)))));case 7:return V(Z(J(Y(Q($(X))))));case 8:return D(V(Z(J(Y(Q($(X)))))));case 9:return L(D(V(Z(J(Y(Q($(X))))))));default:{var B=arguments[0];for(var R=1;R<arguments.length;R++)B=arguments[R](B);return B}}},bU=function(X){return function($){return!X($)}},CU=U&&U.__spreadArray||function(X,$,Q){if(Q||arguments.length===2){for(var Y=0,J=$.length,Z;Y<J;Y++)if(Z||!(Y in $)){if(!Z)Z=Array.prototype.slice.call($,0,Y);Z[Y]=$[Y]}}return X.concat(Z||Array.prototype.slice.call($))};Object.defineProperty(U,"__esModule",{value:!0});U.dual=U.getEndomorphismMonoid=U.not=U.SK=U.hole=U.pipe=U.untupled=U.tupled=U.absurd=U.decrement=U.increment=U.tuple=U.flow=U.flip=U.constVoid=U.constUndefined=U.constNull=U.constFalse=U.constTrue=U.constant=U.unsafeCoerce=U.identity=U.apply=U.getRing=U.getSemiring=U.getMonoid=U.getSemigroup=U.getBooleanAlgebra=void 0;var NU=function(X){return function(){return{meet:function($,Q){return function(Y){return X.meet($(Y),Q(Y))}},join:function($,Q){return function(Y){return X.join($(Y),Q(Y))}},zero:function(){return X.zero},one:function(){return X.one},implies:function($,Q){return function(Y){return X.implies($(Y),Q(Y))}},not:function($){return function(Q){return X.not($(Q))}}}}};U.getBooleanAlgebra=NU;var TU=function(X){return function(){return{concat:function($,Q){return function(Y){return X.concat($(Y),Q(Y))}}}}};U.getSemigroup=TU;var vU=function(X){var $=(0,U.getSemigroup)(X);return function(){return{concat:$().concat,empty:function(){return X.empty}}}};U.getMonoid=vU;var AU=function(X){return{add:function($,Q){return function(Y){return X.add($(Y),Q(Y))}},zero:function(){return X.zero},mul:function($,Q){return function(Y){return X.mul($(Y),Q(Y))}},one:function(){return X.one}}};U.getSemiring=AU;var RU=function(X){var $=(0,U.getSemiring)(X);return{add:$.add,mul:$.mul,one:$.one,zero:$.zero,sub:function(Q,Y){return function(J){return X.sub(Q(J),Y(J))}}}};U.getRing=RU;var SU=function(X){return function($){return $(X)}};U.apply=SU;U.identity=b8;U.unsafeCoerce=b8;U.constant=m4;U.constTrue=m4(!0);U.constFalse=m4(!1);U.constNull=m4(null);U.constUndefined=m4(void 0);U.constVoid=U.constUndefined;U.flip=WU;U.flow=tH;U.tuple=EU;U.increment=OU;U.decrement=MU;U.absurd=aH;U.tupled=gU;U.untupled=FU;U.pipe=IU;U.hole=aH;var yU=function(X,$){return $};U.SK=yU;U.not=bU;var hU=function(){return{concat:function(X,$){return tH(X,$)},empty:b8}};U.getEndomorphismMonoid=hU;var uU=function(X,$){var Q=typeof X==="number"?function(Y){return Y.length>=X}:X;return function(){var Y=Array.from(arguments);if(Q(arguments))return $.apply(this,Y);return function(J){return $.apply(void 0,CU([J],Y,!1))}}};U.dual=uU});var v1=v(($j)=>{var eH=function(X,$){return function(Q){return function(Y){return X.map(Y,function(J){return $.map(J,Q)})}}},lU=function(X){return function($){return function(Q){return X.map(Q,function(Y){return Y($)})}}},mU=function(X){return function($){return function(Q){return X.map(Q,function(Y){var J;return J={},J[$]=Y,J})}}},cU=function(X){return function($,Q){return function(Y){return X.map(Y,function(J){var Z;return Object.assign({},J,(Z={},Z[$]=Q(J),Z))})}}},_U=function(X,$){var Q=eH(X,$);return{map:function(Y,J){return(0,kU.pipe)(Y,Q(J))}}},Xj=function(X){return function($,Q){return X.map($,function(){return Q})}},xU=function(X){var $=Xj(X);return function(Q){return $(Q,void 0)}};Object.defineProperty($j,"__esModule",{value:!0});$j.asUnit=$j.as=$j.getFunctorComposition=$j.let=$j.bindTo=$j.flap=$j.map=void 0;var kU=F();$j.map=eH;$j.flap=lU;$j.bindTo=mU;$j.let=cU;$j.getFunctorComposition=_U;$j.as=Xj;$j.asUnit=xU});var Kj=v((jj)=>{var sU=function(X){return{show:function($){return"make(".concat(X.show($),")")}}},Yj=function(X){return{URI:jj.URI,_E:void 0,map:h8,ap:function($,Q){return(0,jj.make)(X.concat($,Q))}}},tU=function(X){var $=Yj(X);return{URI:jj.URI,_E:void 0,map:$.map,ap:$.ap,of:function(){return(0,jj.make)(X.empty)}}};Object.defineProperty(jj,"__esModule",{value:!0});jj.const_=jj.Bifunctor=jj.Contravariant=jj.flap=jj.Functor=jj.URI=jj.mapLeft=jj.bimap=jj.map=jj.contramap=jj.getApplicative=jj.getApply=jj.getBooleanAlgebra=jj.getHeytingAlgebra=jj.getRing=jj.getSemiring=jj.getMonoid=jj.getSemigroup=jj.getBounded=jj.getOrd=jj.getEq=jj.getShow=jj.make=void 0;var Z0=F(),rU=v1();jj.make=Z0.unsafeCoerce;jj.getShow=sU;jj.getEq=Z0.identity;jj.getOrd=Z0.identity;jj.getBounded=Z0.identity;jj.getSemigroup=Z0.identity;jj.getMonoid=Z0.identity;jj.getSemiring=Z0.identity;jj.getRing=Z0.identity;jj.getHeytingAlgebra=Z0.identity;jj.getBooleanAlgebra=Z0.identity;jj.getApply=Yj;jj.getApplicative=tU;var Jj=function(X,$){return(0,Z0.pipe)(X,(0,jj.contramap)($))},h8=function(X,$){return(0,Z0.pipe)(X,(0,jj.map)($))},Zj=function(X,$,Q){return(0,Z0.pipe)(X,(0,jj.bimap)($,Q))},Hj=function(X,$){return(0,Z0.pipe)(X,(0,jj.mapLeft)($))},aU=function(){return Z0.unsafeCoerce};jj.contramap=aU;var eU=function(){return Z0.unsafeCoerce};jj.map=eU;var XC=function(X){return function($){return(0,jj.make)(X($))}};jj.bimap=XC;var $C=function(X){return function($){return(0,jj.make)(X($))}};jj.mapLeft=$C;jj.URI="Const";jj.Functor={URI:jj.URI,map:h8};jj.flap=(0,rU.flap)(jj.Functor);jj.Contravariant={URI:jj.URI,contramap:Jj};jj.Bifunctor={URI:jj.URI,bimap:Zj,mapLeft:Hj};jj.const_={URI:jj.URI,map:h8,contramap:Jj,bimap:Zj,mapLeft:Hj}});var J1=v((C)=>{var wC=C&&C.__spreadArray||function(X,$,Q){if(Q||arguments.length===2){for(var Y=0,J=$.length,Z;Y<J;Y++)if(Z||!(Y in $)){if(!Z)Z=Array.prototype.slice.call($,0,Y);Z[Y]=$[Y]}}return X.concat(Z||Array.prototype.slice.call($))};Object.defineProperty(C,"__esModule",{value:!0});C.flatMapReader=C.flatMapTask=C.flatMapIO=C.flatMapEither=C.flatMapOption=C.flatMapNullable=C.liftOption=C.liftNullable=C.fromReadonlyNonEmptyArray=C.has=C.emptyRecord=C.emptyReadonlyArray=C.tail=C.head=C.isNonEmpty=C.singleton=C.right=C.left=C.isRight=C.isLeft=C.some=C.none=C.isSome=C.isNone=void 0;var c5=F(),UC=function(X){return X._tag==="None"};C.isNone=UC;var CC=function(X){return X._tag==="Some"};C.isSome=CC;C.none={_tag:"None"};var NC=function(X){return{_tag:"Some",value:X}};C.some=NC;var TC=function(X){return X._tag==="Left"};C.isLeft=TC;var vC=function(X){return X._tag==="Right"};C.isRight=vC;var AC=function(X){return{_tag:"Left",left:X}};C.left=AC;var RC=function(X){return{_tag:"Right",right:X}};C.right=RC;var SC=function(X){return[X]};C.singleton=SC;var WC=function(X){return X.length>0};C.isNonEmpty=WC;var EC=function(X){return X[0]};C.head=EC;var OC=function(X){return X.slice(1)};C.tail=OC;C.emptyReadonlyArray=[];C.emptyRecord={};C.has=Object.prototype.hasOwnProperty;var MC=function(X){return wC([X[0]],X.slice(1),!0)};C.fromReadonlyNonEmptyArray=MC;var gC=function(X){return function($,Q){return function(){var Y=[];for(var J=0;J<arguments.length;J++)Y[J]=arguments[J];var Z=$.apply(void 0,Y);return X.fromEither(Z==null?(0,C.left)(Q.apply(void 0,Y)):(0,C.right)(Z))}}};C.liftNullable=gC;var FC=function(X){return function($,Q){return function(){var Y=[];for(var J=0;J<arguments.length;J++)Y[J]=arguments[J];var Z=$.apply(void 0,Y);return X.fromEither((0,C.isNone)(Z)?(0,C.left)(Q.apply(void 0,Y)):(0,C.right)(Z.value))}}};C.liftOption=FC;var IC=function(X,$){return(0,c5.dual)(3,function(Q,Y,J){return $.flatMap(Q,(0,C.liftNullable)(X)(Y,J))})};C.flatMapNullable=IC;var yC=function(X,$){return(0,c5.dual)(3,function(Q,Y,J){return $.flatMap(Q,(0,C.liftOption)(X)(Y,J))})};C.flatMapOption=yC;var bC=function(X,$){return(0,c5.dual)(2,function(Q,Y){return $.flatMap(Q,function(J){return X.fromEither(Y(J))})})};C.flatMapEither=bC;var hC=function(X,$){return(0,c5.dual)(2,function(Q,Y){return $.flatMap(Q,function(J){return X.fromIO(Y(J))})})};C.flatMapIO=hC;var uC=function(X,$){return(0,c5.dual)(2,function(Q,Y){return $.flatMap(Q,function(J){return X.fromTask(Y(J))})})};C.flatMapTask=uC;var kC=function(X,$){return(0,c5.dual)(2,function(Q,Y){return $.flatMap(Q,function(J){return X.fromReader(Y(J))})})};C.flatMapReader=kC});var Y5=v((p)=>{var dC=function(X,$){return function(Q){return function(Y){return X.ap(X.map(Y,function(J){return function(Z){return $.ap(J,Z)}}),Q)}}},nC=function(X){return function($){return function(Q){return X.ap(X.map(Q,function(Y){return function(){return Y}}),$)}}},fC=function(X){return function($){return function(Q){return X.ap(X.map(Q,function(){return function(Y){return Y}}),$)}}},pC=function(X){return function($,Q){return function(Y){return X.ap(X.map(Y,function(J){return function(Z){var V;return Object.assign({},J,(V={},V[$]=Z,V))}}),Q)}}},oC=function(X){return function($){return{concat:function(Q,Y){return X.ap(X.map(Q,function(J){return function(Z){return $.concat(J,Z)}}),Y)}}}},k8=function(X,$,Q){return function(Y){var J=Array(Q.length+1);for(var Z=0;Z<Q.length;Z++)J[Z]=Q[Z];return J[Q.length]=Y,$===0?X.apply(null,J):k8(X,$-1,J)}},iC=function(X){if(!xC.has.call(u8,X))u8[X]=k8(_C.tuple,X-1,[]);return u8[X]},rC=function(X){return function(){var $=[];for(var Q=0;Q<arguments.length;Q++)$[Q]=arguments[Q];var Y=$.length,J=iC(Y),Z=X.map($[0],J);for(var V=1;V<Y;V++)Z=X.ap(Z,$[V]);return Z}},sC=function(X){var $=X.length;switch($){case 1:return function(Q){var Y;return Y={},Y[X[0]]=Q,Y};case 2:return function(Q){return function(Y){var J;return J={},J[X[0]]=Q,J[X[1]]=Y,J}};case 3:return function(Q){return function(Y){return function(J){var Z;return Z={},Z[X[0]]=Q,Z[X[1]]=Y,Z[X[2]]=J,Z}}};case 4:return function(Q){return function(Y){return function(J){return function(Z){var V;return V={},V[X[0]]=Q,V[X[1]]=Y,V[X[2]]=J,V[X[3]]=Z,V}}}};case 5:return function(Q){return function(Y){return function(J){return function(Z){return function(V){var D;return D={},D[X[0]]=Q,D[X[1]]=Y,D[X[2]]=J,D[X[3]]=Z,D[X[4]]=V,D}}}}};default:return k8(function(){var Q=[];for(var Y=0;Y<arguments.length;Y++)Q[Y]=arguments[Y];var J={};for(var Z=0;Z<$;Z++)J[X[Z]]=Q[Z];return J},$-1,[])}},tC=function(X){return function($){var Q=Object.keys($),Y=Q.length,J=sC(Q),Z=X.map($[Q[0]],J);for(var V=1;V<Y;V++)Z=X.ap(Z,$[Q[V]]);return Z}},lC=p&&p.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),mC=p&&p.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),cC=p&&p.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))lC($,X,Q)}return mC($,X),$};Object.defineProperty(p,"__esModule",{value:!0});p.sequenceS=p.sequenceT=p.getApplySemigroup=p.apS=p.apSecond=p.apFirst=p.ap=void 0;var _C=F(),xC=cC(J1());p.ap=dC;p.apFirst=nC;p.apSecond=fC;p.apS=pC;p.getApplySemigroup=oC;var u8={1:function(X){return[X]},2:function(X){return function($){return[X,$]}},3:function(X){return function($){return function(Q){return[X,$,Q]}}},4:function(X){return function($){return function(Q){return function(Y){return[X,$,Q,Y]}}}},5:function(X){return function($){return function(Q){return function(Y){return function(J){return[X,$,Q,Y,J]}}}}}};p.sequenceT=rC;p.sequenceS=tC});var J5=v((Lj)=>{var aC=function(X){var $=Bj(X);return function(Q){return function(Y){return $(Y,Q)}}},Bj=function(X){return function($,Q){return X.chain($,function(Y){return X.map(Q(Y),function(){return Y})})}},eC=function(X){return function($,Q){return function(Y){return X.chain(Y,function(J){return X.map(Q(J),function(Z){var V;return Object.assign({},J,(V={},V[$]=Z,V))})})}}};Object.defineProperty(Lj,"__esModule",{value:!0});Lj.bind=Lj.tap=Lj.chainFirst=void 0;Lj.chainFirst=aC;Lj.tap=Bj;Lj.bind=eC});var _4=v((nj)=>{var Cj=function(X){return function($){return function(Q){return X.map(Q,$)}}},Nj=function(X){return function($){return function(Q){return X.contramap(Q,$)}}},Tj=function(X){return function($){return function(Q){return X.mapWithIndex(Q,$)}}},vj=function(X){return function($){return function(Q){return X.ap(Q,$)}}},Aj=function(X){return function($){return function(Q){return X.chain(Q,$)}}},Rj=function(X){return function($,Q){return function(Y){return X.bimap(Y,$,Q)}}},Sj=function(X){return function($){return function(Q){return X.mapLeft(Q,$)}}},Wj=function(X){return function($){return function(Q){return X.extend(Q,$)}}},Ej=function(X){return function($,Q){return function(Y){return X.reduce(Y,$,Q)}}},Oj=function(X){return function($){var Q=X.foldMap($);return function(Y){return function(J){return Q(J,Y)}}}},Mj=function(X){return function($,Q){return function(Y){return X.reduceRight(Y,$,Q)}}},gj=function(X){return function($,Q){return function(Y){return X.reduceWithIndex(Y,$,Q)}}},Fj=function(X){return function($){var Q=X.foldMapWithIndex($);return function(Y){return function(J){return Q(J,Y)}}}},Ij=function(X){return function($,Q){return function(Y){return X.reduceRightWithIndex(Y,$,Q)}}},yj=function(X){return function($){return function(Q){return X.alt(Q,$)}}},bj=function(X){return function($){return function(Q){return X.filter(Q,$)}}},hj=function(X){return function($){return function(Q){return X.filterMap(Q,$)}}},uj=function(X){return function($){return function(Q){return X.partition(Q,$)}}},kj=function(X){return function($){return function(Q){return X.partitionMap(Q,$)}}},lj=function(X){return function($){return function(Q){return X.filterWithIndex(Q,$)}}},mj=function(X){return function($){return function(Q){return X.filterMapWithIndex(Q,$)}}},cj=function(X){return function($){return function(Q){return X.partitionWithIndex(Q,$)}}},_j=function(X){return function($){return function(Q){return X.partitionMapWithIndex(Q,$)}}},xj=function(X){return function($,Q){return function(Y){return X.promap(Y,$,Q)}}},dj=function(X){return function($){return function(Q){return X.compose(Q,$)}}},CN=function(X){var $={};if(YN(X))$.map=Cj(X);if(JN(X))$.contramap=Nj(X);if(ZN(X))$.mapWithIndex=Tj(X);if(HN(X))$.ap=vj(X),$.apFirst=(0,Uj.apFirst)(X),$.apSecond=(0,Uj.apSecond)(X);if(jN(X))$.chain=Aj(X),$.chainFirst=(0,QN.chainFirst)(X),$.flatten=$.chain(l8.identity);if(PN(X))$.bimap=Rj(X),$.mapLeft=Sj(X);if(zN(X))$.extend=Wj(X),$.duplicate=$.extend(l8.identity);if(GN(X))$.reduce=Ej(X),$.foldMap=Oj(X),$.reduceRight=Mj(X);if(VN(X))$.reduceWithIndex=gj(X),$.foldMapWithIndex=Fj(X),$.reduceRightWithIndex=Ij(X);if(DN(X))$.alt=yj(X);if(qN(X))$.compact=X.compact,$.separate=X.separate;if(KN(X))$.filter=bj(X),$.filterMap=hj(X),$.partition=uj(X),$.partitionMap=kj(X);if(BN(X))$.filterWithIndex=lj(X),$.filterMapWithIndex=mj(X),$.partitionWithIndex=cj(X),$.partitionMapWithIndex=_j(X);if(LN(X))$.promap=xj(X);if(wN(X))$.compose=dj(X);if(UN(X)){var Q=function(V){return function(D){return D._tag==="None"?X.throwError(V()):X.of(D.value)}},Y=function(V){return V._tag==="Left"?X.throwError(V.left):X.of(V.right)},J=function(V,D){return function(L){return V(L)?X.of(L):X.throwError(D(L))}},Z=function(V,D){return function(L){return X.chain(L,function(B){return V(B)?X.of(B):X.throwError(D(B))})}};$.fromOption=Q,$.fromEither=Y,$.fromPredicate=J,$.filterOrElse=Z}return $};Object.defineProperty(nj,"__esModule",{value:!0});nj.pipe=nj.pipeable=nj.compose=nj.promap=nj.partitionMapWithIndex=nj.partitionWithIndex=nj.filterMapWithIndex=nj.filterWithIndex=nj.partitionMap=nj.partition=nj.filterMap=nj.filter=nj.alt=nj.reduceRightWithIndex=nj.foldMapWithIndex=nj.reduceWithIndex=nj.reduceRight=nj.foldMap=nj.reduce=nj.extend=nj.mapLeft=nj.bimap=nj.chain=nj.ap=nj.mapWithIndex=nj.contramap=nj.map=void 0;var Uj=Y5(),QN=J5(),l8=F();nj.map=Cj;nj.contramap=Nj;nj.mapWithIndex=Tj;nj.ap=vj;nj.chain=Aj;nj.bimap=Rj;nj.mapLeft=Sj;nj.extend=Wj;nj.reduce=Ej;nj.foldMap=Oj;nj.reduceRight=Mj;nj.reduceWithIndex=gj;nj.foldMapWithIndex=Fj;nj.reduceRightWithIndex=Ij;nj.alt=yj;nj.filter=bj;nj.filterMap=hj;nj.partition=uj;nj.partitionMap=kj;nj.filterWithIndex=lj;nj.filterMapWithIndex=mj;nj.partitionWithIndex=cj;nj.partitionMapWithIndex=_j;nj.promap=xj;nj.compose=dj;var YN=function(X){return typeof X.map==="function"},JN=function(X){return typeof X.contramap==="function"},ZN=function(X){return typeof X.mapWithIndex==="function"},HN=function(X){return typeof X.ap==="function"},jN=function(X){return typeof X.chain==="function"},PN=function(X){return typeof X.bimap==="function"},zN=function(X){return typeof X.extend==="function"},GN=function(X){return typeof X.reduce==="function"},VN=function(X){return typeof X.reduceWithIndex==="function"},DN=function(X){return typeof X.alt==="function"},qN=function(X){return typeof X.compact==="function"},KN=function(X){return typeof X.filter==="function"},BN=function(X){return typeof X.filterWithIndex==="function"},LN=function(X){return typeof X.promap==="function"},wN=function(X){return typeof X.compose==="function"},UN=function(X){return typeof X.throwError==="function"};nj.pipeable=CN;nj.pipe=l8.pipe});var n4=v((pj)=>{Object.defineProperty(pj,"__esModule",{value:!0});pj.eqDate=pj.eqNumber=pj.eqString=pj.eqBoolean=pj.eq=pj.strictEqual=pj.getStructEq=pj.getTupleEq=pj.Contravariant=pj.getMonoid=pj.getSemigroup=pj.eqStrict=pj.URI=pj.contramap=pj.tuple=pj.struct=pj.fromEquals=void 0;var pN=F(),oN=function(X){return{equals:function($,Q){return $===Q||X($,Q)}}};pj.fromEquals=oN;var iN=function(X){return(0,pj.fromEquals)(function($,Q){for(var Y in X)if(!X[Y].equals($[Y],Q[Y]))return!1;return!0})};pj.struct=iN;var rN=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return(0,pj.fromEquals)(function(Q,Y){return X.every(function(J,Z){return J.equals(Q[Z],Y[Z])})})};pj.tuple=rN;var sN=function(X,$){return(0,pN.pipe)(X,(0,pj.contramap)($))},tN=function(X){return function($){return(0,pj.fromEquals)(function(Q,Y){return $.equals(X(Q),X(Y))})}};pj.contramap=tN;pj.URI="Eq";pj.eqStrict={equals:function(X,$){return X===$}};var aN={equals:function(){return!0}},eN=function(){return{concat:function(X,$){return(0,pj.fromEquals)(function(Q,Y){return X.equals(Q,Y)&&$.equals(Q,Y)})}}};pj.getSemigroup=eN;var XT=function(){return{concat:(0,pj.getSemigroup)().concat,empty:aN}};pj.getMonoid=XT;pj.Contravariant={URI:pj.URI,contramap:sN};pj.getTupleEq=pj.tuple;pj.getStructEq=pj.struct;pj.strictEqual=pj.eqStrict.equals;pj.eq=pj.Contravariant;pj.eqBoolean=pj.eqStrict;pj.eqString=pj.eqStrict;pj.eqNumber=pj.eqStrict;pj.eqDate={equals:function(X,$){return X.valueOf()===$.valueOf()}}});var m9=v((k)=>{var $P=function(X){return function($){return function(Q){return X.fromEither(Z5.isNone(Q)?Z5.left($()):Z5.right(Q.value))}}},qT=function(X){return function($,Q){return function(Y){return X.fromEither($(Y)?Z5.right(Y):Z5.left(Q(Y)))}}},QP=function(X){var $=$P(X);return function(Q){var Y=$(Q);return function(J){return(0,XP.flow)(J,Y)}}},KT=function(X,$){var Q=QP(X);return function(Y){var J=Q(Y);return function(Z){return function(V){return $.chain(V,J(Z))}}}},m8=function(X){return function($){return(0,XP.flow)($,X.fromEither)}},BT=function(X,$){var Q=m8(X);return function(Y){return function(J){return $.chain(J,Q(Y))}}},LT=function(X,$){var Q=YP(X,$);return function(Y){return function(J){return Q(J,Y)}}},wT=function(X,$){return function(Q,Y){return function(J){return $.chain(J,function(Z){return X.fromEither(Q(Z)?Z5.right(Z):Z5.left(Y(Z)))})}}},YP=function(X,$){var Q=m8(X),Y=(0,DT.tap)($);return function(J,Z){return Y(J,Q(Z))}},zT=k&&k.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),GT=k&&k.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),VT=k&&k.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))zT($,X,Q)}return GT($,X),$};Object.defineProperty(k,"__esModule",{value:!0});k.tapEither=k.filterOrElse=k.chainFirstEitherK=k.chainEitherK=k.fromEitherK=k.chainOptionK=k.fromOptionK=k.fromPredicate=k.fromOption=void 0;var DT=J5(),XP=F(),Z5=VT(J1());k.fromOption=$P;k.fromPredicate=qT;k.fromOptionK=QP;k.chainOptionK=KT;k.fromEitherK=m8;k.chainEitherK=BT;k.chainFirstEitherK=LT;k.filterOrElse=wT;k.tapEither=YP});var PP=v((JP)=>{Object.defineProperty(JP,"__esModule",{value:!0});JP.Field=JP.MonoidProduct=JP.MonoidSum=JP.SemigroupProduct=JP.SemigroupSum=JP.MagmaSub=JP.Show=JP.Bounded=JP.Ord=JP.Eq=JP.isNumber=void 0;var UT=function(X){return typeof X==="number"};JP.isNumber=UT;JP.Eq={equals:function(X,$){return X===$}};JP.Ord={equals:JP.Eq.equals,compare:function(X,$){return X<$?-1:X>$?1:0}};JP.Bounded={equals:JP.Eq.equals,compare:JP.Ord.compare,top:Infinity,bottom:(-Infinity)};JP.Show={show:function(X){return JSON.stringify(X)}};JP.MagmaSub={concat:function(X,$){return X-$}};JP.SemigroupSum={concat:function(X,$){return X+$}};JP.SemigroupProduct={concat:function(X,$){return X*$}};JP.MonoidSum={concat:JP.SemigroupSum.concat,empty:0};JP.MonoidProduct={concat:JP.SemigroupProduct.concat,empty:1};JP.Field={add:JP.SemigroupSum.concat,zero:0,mul:JP.SemigroupProduct.concat,one:1,sub:JP.MagmaSub.concat,degree:function(X){return 1},div:function(X,$){return X/$},mod:function(X,$){return X%$}}});var _9=v((zP)=>{var xT=function(X,$){return X<$?-1:X>$?1:0};Object.defineProperty(zP,"__esModule",{value:!0});zP.ordDate=zP.ordNumber=zP.ordString=zP.ordBoolean=zP.ord=zP.getDualOrd=zP.getTupleOrd=zP.between=zP.clamp=zP.max=zP.min=zP.geq=zP.leq=zP.gt=zP.lt=zP.equals=zP.trivial=zP.Contravariant=zP.getMonoid=zP.getSemigroup=zP.URI=zP.contramap=zP.reverse=zP.tuple=zP.fromCompare=zP.equalsDefault=void 0;var RT=n4(),c9=F(),ST=function(X){return function($,Q){return $===Q||X($,Q)===0}};zP.equalsDefault=ST;var WT=function(X){return{equals:(0,zP.equalsDefault)(X),compare:function($,Q){return $===Q?0:X($,Q)}}};zP.fromCompare=WT;var ET=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return(0,zP.fromCompare)(function(Q,Y){var J=0;for(;J<X.length-1;J++){var Z=X[J].compare(Q[J],Y[J]);if(Z!==0)return Z}return X[J].compare(Q[J],Y[J])})};zP.tuple=ET;var OT=function(X){return(0,zP.fromCompare)(function($,Q){return X.compare(Q,$)})};zP.reverse=OT;var MT=function(X,$){return(0,c9.pipe)(X,(0,zP.contramap)($))},gT=function(X){return function($){return(0,zP.fromCompare)(function(Q,Y){return $.compare(X(Q),X(Y))})}};zP.contramap=gT;zP.URI="Ord";var FT=function(){return{concat:function(X,$){return(0,zP.fromCompare)(function(Q,Y){var J=X.compare(Q,Y);return J!==0?J:$.compare(Q,Y)})}}};zP.getSemigroup=FT;var IT=function(){return{concat:(0,zP.getSemigroup)().concat,empty:(0,zP.fromCompare)(function(){return 0})}};zP.getMonoid=IT;zP.Contravariant={URI:zP.URI,contramap:MT};zP.trivial={equals:c9.constTrue,compare:(0,c9.constant)(0)};var yT=function(X){return function($){return function(Q){return Q===$||X.compare(Q,$)===0}}};zP.equals=yT;var bT=function(X){return function($,Q){return X.compare($,Q)===-1}};zP.lt=bT;var hT=function(X){return function($,Q){return X.compare($,Q)===1}};zP.gt=hT;var uT=function(X){return function($,Q){return X.compare($,Q)!==1}};zP.leq=uT;var kT=function(X){return function($,Q){return X.compare($,Q)!==-1}};zP.geq=kT;var lT=function(X){return function($,Q){return $===Q||X.compare($,Q)<1?$:Q}};zP.min=lT;var mT=function(X){return function($,Q){return $===Q||X.compare($,Q)>-1?$:Q}};zP.max=mT;var cT=function(X){var $=(0,zP.min)(X),Q=(0,zP.max)(X);return function(Y,J){return function(Z){return Q($(Z,J),Y)}}};zP.clamp=cT;var _T=function(X){var $=(0,zP.lt)(X),Q=(0,zP.gt)(X);return function(Y,J){return function(Z){return $(Z,Y)||Q(Z,J)?!1:!0}}};zP.between=_T;zP.getTupleOrd=zP.tuple;zP.getDualOrd=zP.reverse;zP.ord=zP.Contravariant;var d8={equals:RT.eqStrict.equals,compare:xT};zP.ordBoolean=d8;zP.ordString=d8;zP.ordNumber=d8;zP.ordDate=(0,c9.pipe)(zP.ordNumber,(0,zP.contramap)(function(X){return X.valueOf()}))});var RP=v((vP)=>{Object.defineProperty(vP,"__esModule",{value:!0});vP.concatAll=vP.endo=vP.filterSecond=vP.filterFirst=vP.reverse=void 0;var $3=function(X){return{concat:function($,Q){return X.concat(Q,$)}}};vP.reverse=$3;var Q3=function(X){return function($){return{concat:function(Q,Y){return X(Q)?$.concat(Q,Y):Y}}}};vP.filterFirst=Q3;var Y3=function(X){return function($){return{concat:function(Q,Y){return X(Y)?$.concat(Q,Y):Q}}}};vP.filterSecond=Y3;var J3=function(X){return function($){return{concat:function(Q,Y){return $.concat(X(Q),X(Y))}}}};vP.endo=J3;var Z3=function(X){return function($){return function(Q){return Q.reduce(function(Y,J){return X.concat(Y,J)},$)}}};vP.concatAll=Z3});var p8=v((w)=>{var v3=function(X){var $=(0,w.concatAll)(X);return function(Q,Y){return Y===void 0?$(Q):$(Q)(Y)}},G3=w&&w.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),V3=w&&w.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),f8=w&&w.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))G3($,X,Q)}return V3($,X),$};Object.defineProperty(w,"__esModule",{value:!0});w.semigroupProduct=w.semigroupSum=w.semigroupString=w.getFunctionSemigroup=w.semigroupAny=w.semigroupAll=w.fold=w.getIntercalateSemigroup=w.getMeetSemigroup=w.getJoinSemigroup=w.getDualSemigroup=w.getStructSemigroup=w.getTupleSemigroup=w.getFirstSemigroup=w.getLastSemigroup=w.getObjectSemigroup=w.semigroupVoid=w.concatAll=w.last=w.first=w.intercalate=w.tuple=w.struct=w.reverse=w.constant=w.max=w.min=void 0;var SP=F(),D3=f8(J1()),WP=f8(RP()),EP=f8(_9()),q3=function(X){return{concat:EP.min(X)}};w.min=q3;var K3=function(X){return{concat:EP.max(X)}};w.max=K3;var B3=function(X){return{concat:function(){return X}}};w.constant=B3;w.reverse=WP.reverse;var L3=function(X){return{concat:function($,Q){var Y={};for(var J in X)if(D3.has.call(X,J))Y[J]=X[J].concat($[J],Q[J]);return Y}}};w.struct=L3;var w3=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return{concat:function(Q,Y){return X.map(function(J,Z){return J.concat(Q[Z],Y[Z])})}}};w.tuple=w3;var U3=function(X){return function($){return{concat:function(Q,Y){return $.concat(Q,$.concat(X,Y))}}}};w.intercalate=U3;var C3=function(){return{concat:SP.identity}};w.first=C3;var N3=function(){return{concat:function(X,$){return $}}};w.last=N3;w.concatAll=WP.concatAll;w.semigroupVoid=(0,w.constant)(void 0);var T3=function(){return{concat:function(X,$){return Object.assign({},X,$)}}};w.getObjectSemigroup=T3;w.getLastSemigroup=w.last;w.getFirstSemigroup=w.first;w.getTupleSemigroup=w.tuple;w.getStructSemigroup=w.struct;w.getDualSemigroup=w.reverse;w.getJoinSemigroup=w.max;w.getMeetSemigroup=w.min;w.getIntercalateSemigroup=w.intercalate;w.fold=v3;w.semigroupAll={concat:function(X,$){return X&&$}};w.semigroupAny={concat:function(X,$){return X||$}};w.getFunctionSemigroup=SP.getSemigroup;w.semigroupString={concat:function(X,$){return X+$}};w.semigroupSum={concat:function(X,$){return X+$}};w.semigroupProduct={concat:function(X,$){return X*$}}});var X$=v((G)=>{var FP=function(X){return function($){return $.concat(X)}},p4=function(X,$){return $?X.concat($):function(Q){return Q.concat(X)}},IP=function(X){return function($){var Q=$.length;if(Q===0)return G.empty;var Y=[],J=$[0],Z=[J];for(var V=1;V<Q;V++){var D=$[V];if(X.equals(D,J))Z.push(D);else Y.push(Z),J=D,Z=[J]}return Y.push(Z),Y}},yP=function(X,$){if($===void 0)return function(Q){return yP(Q,X)};return(0,G.zipWith)(X,$,function(Q,Y){return[Q,Y]})},yv=function(X){var $=(0,G.sort)(X),Q=IP(X);return function(Y){return(0,G.isNonEmpty)(Y)?Q($(Y)):G.empty}},bv=function(X){return(0,G.filterWithIndex)(function($,Q){return X(Q)})},uv=function(X,$){return $===void 0?(0,G.prepend)(X):(0,h.pipe)($,(0,G.prepend)(X))},A3=G&&G.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),R3=G&&G.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),OP=G&&G.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))A3($,X,Q)}return R3($,X),$},f4=G&&G.__spreadArray||function(X,$,Q){if(Q||arguments.length===2){for(var Y=0,J=$.length,Z;Y<J;Y++)if(Z||!(Y in $)){if(!Z)Z=Array.prototype.slice.call($,0,Y);Z[Y]=$[Y]}}return X.concat(Z||Array.prototype.slice.call($))};Object.defineProperty(G,"__esModule",{value:!0});G.reduceRight=G.foldMap=G.reduce=G.mapWithIndex=G.map=G.flatten=G.duplicate=G.extend=G.flatMap=G.ap=G.alt=G.altW=G.of=G.chunksOf=G.splitAt=G.chop=G.chainWithIndex=G.intersperse=G.prependAll=G.unzip=G.zip=G.zipWith=G.modifyAt=G.updateAt=G.sort=G.groupBy=G.group=G.reverse=G.concat=G.concatW=G.fromArray=G.unappend=G.unprepend=G.range=G.replicate=G.makeBy=G.fromReadonlyArray=G.rotate=G.union=G.sortBy=G.uniq=G.unsafeUpdateAt=G.unsafeInsertAt=G.append=G.appendW=G.prepend=G.prependW=G.isOutOfBound=G.isNonEmpty=G.empty=void 0;G.groupSort=G.chain=G.intercalate=G.updateLast=G.modifyLast=G.updateHead=G.modifyHead=G.matchRight=G.matchLeft=G.concatAll=G.max=G.min=G.init=G.last=G.tail=G.head=G.apS=G.bind=G.let=G.bindTo=G.Do=G.Comonad=G.Alt=G.TraversableWithIndex=G.Traversable=G.FoldableWithIndex=G.Foldable=G.Monad=G.chainFirst=G.Chain=G.Applicative=G.apSecond=G.apFirst=G.Apply=G.FunctorWithIndex=G.Pointed=G.flap=G.Functor=G.getUnionSemigroup=G.getEq=G.getSemigroup=G.getShow=G.URI=G.extract=G.traverseWithIndex=G.sequence=G.traverse=G.reduceRightWithIndex=G.foldMapWithIndex=G.reduceWithIndex=void 0;G.readonlyNonEmptyArray=G.fold=G.prependToAll=G.insertAt=G.snoc=G.cons=G.unsnoc=G.uncons=G.filterWithIndex=G.filter=void 0;var o8=Y5(),MP=J5(),S3=n4(),h=F(),i8=v1(),H0=OP(J1()),W3=_9(),gP=OP(p8());G.empty=H0.emptyReadonlyArray;G.isNonEmpty=H0.isNonEmpty;var E3=function(X,$){return X<0||X>=$.length};G.isOutOfBound=E3;var O3=function(X){return function($){return f4([X],$,!0)}};G.prependW=O3;G.prepend=G.prependW;var M3=function(X){return function($){return f4(f4([],$,!0),[X],!1)}};G.appendW=M3;G.append=G.appendW;var g3=function(X,$,Q){if((0,G.isNonEmpty)(Q)){var Y=H0.fromReadonlyNonEmptyArray(Q);return Y.splice(X,0,$),Y}return[$]};G.unsafeInsertAt=g3;var F3=function(X,$,Q){if(Q[X]===$)return Q;else{var Y=H0.fromReadonlyNonEmptyArray(Q);return Y[X]=$,Y}};G.unsafeUpdateAt=F3;var I3=function(X){return function($){if($.length===1)return $;var Q=[(0,G.head)($)],Y=(0,G.tail)($),J=function(L){if(Q.every(function(B){return!X.equals(B,L)}))Q.push(L)};for(var Z=0,V=Y;Z<V.length;Z++){var D=V[Z];J(D)}return Q}};G.uniq=I3;var y3=function(X){if((0,G.isNonEmpty)(X)){var $=(0,W3.getMonoid)();return(0,G.sort)(X.reduce($.concat,$.empty))}return h.identity};G.sortBy=y3;var b3=function(X){var $=(0,G.uniq)(X);return function(Q){return function(Y){return $((0,h.pipe)(Y,p4(Q)))}}};G.union=b3;var h3=function(X){return function($){var Q=$.length,Y=Math.round(X)%Q;if((0,G.isOutOfBound)(Math.abs(Y),$)||Y===0)return $;if(Y<0){var J=(0,G.splitAt)(-Y)($),Z=J[0],V=J[1];return(0,h.pipe)(V,p4(Z))}else return(0,G.rotate)(Y-Q)($)}};G.rotate=h3;var u3=function(X){return(0,G.isNonEmpty)(X)?H0.some(X):H0.none};G.fromReadonlyArray=u3;var k3=function(X){return function($){var Q=Math.max(0,Math.floor($)),Y=[X(0)];for(var J=1;J<Q;J++)Y.push(X(J));return Y}};G.makeBy=k3;var l3=function(X){return(0,G.makeBy)(function(){return X})};G.replicate=l3;var m3=function(X,$){return X<=$?(0,G.makeBy)(function(Q){return X+Q})($-X+1):[X]};G.range=m3;var c3=function(X){return[(0,G.head)(X),(0,G.tail)(X)]};G.unprepend=c3;var _3=function(X){return[(0,G.init)(X),(0,G.last)(X)]};G.unappend=_3;var x3=function(X){return(0,G.fromReadonlyArray)(X.slice())};G.fromArray=x3;G.concatW=FP;G.concat=p4;var d3=function(X){return X.length===1?X:f4([(0,G.last)(X)],X.slice(0,-1).reverse(),!0)};G.reverse=d3;G.group=IP;var n3=function(X){return function($){var Q={};for(var Y=0,J=$;Y<J.length;Y++){var Z=J[Y],V=X(Z);if(H0.has.call(Q,V))Q[V].push(Z);else Q[V]=[Z]}return Q}};G.groupBy=n3;var f3=function(X){return function($){return $.length===1?$:$.slice().sort(X.compare)}};G.sort=f3;var p3=function(X,$){return(0,G.modifyAt)(X,function(){return $})};G.updateAt=p3;var o3=function(X,$){return function(Q){return(0,G.isOutOfBound)(X,Q)?H0.none:H0.some((0,G.unsafeUpdateAt)(X,$(Q[X]),Q))}};G.modifyAt=o3;var i3=function(X,$,Q){var Y=[Q(X[0],$[0])],J=Math.min(X.length,$.length);for(var Z=1;Z<J;Z++)Y[Z]=Q(X[Z],$[Z]);return Y};G.zipWith=i3;G.zip=yP;var r3=function(X){var $=[X[0][0]],Q=[X[0][1]];for(var Y=1;Y<X.length;Y++)$[Y]=X[Y][0],Q[Y]=X[Y][1];return[$,Q]};G.unzip=r3;var s3=function(X){return function($){var Q=[X,$[0]];for(var Y=1;Y<$.length;Y++)Q.push(X,$[Y]);return Q}};G.prependAll=s3;var t3=function(X){return function($){var Q=(0,G.tail)($);return(0,G.isNonEmpty)(Q)?(0,h.pipe)(Q,(0,G.prependAll)(X),(0,G.prepend)((0,G.head)($))):$}};G.intersperse=t3;var a3=function(X){return function($){var Q=H0.fromReadonlyNonEmptyArray(X(0,(0,G.head)($)));for(var Y=1;Y<$.length;Y++)Q.push.apply(Q,X(Y,$[Y]));return Q}};G.chainWithIndex=a3;var e3=function(X){return function($){var Q=X($),Y=Q[0],J=Q[1],Z=[Y],V=J;while((0,G.isNonEmpty)(V)){var D=X(V),L=D[0],B=D[1];Z.push(L),V=B}return Z}};G.chop=e3;var Xv=function(X){return function($){var Q=Math.max(1,X);return Q>=$.length?[$,G.empty]:[(0,h.pipe)($.slice(1,Q),(0,G.prepend)((0,G.head)($))),$.slice(Q)]}};G.splitAt=Xv;var $v=function(X){return(0,G.chop)((0,G.splitAt)(X))};G.chunksOf=$v;var x0=function(X,$){return(0,h.pipe)(X,(0,G.map)($))},r8=function(X,$){return(0,h.pipe)(X,(0,G.mapWithIndex)($))},o4=function(X,$){return(0,h.pipe)(X,(0,G.ap)($))},bP=function(X,$){return(0,h.pipe)(X,(0,G.extend)($))},i4=function(X,$,Q){return(0,h.pipe)(X,(0,G.reduce)($,Q))},r4=function(X){var $=(0,G.foldMap)(X);return function(Q,Y){return(0,h.pipe)(Q,$(Y))}},s4=function(X,$,Q){return(0,h.pipe)(X,(0,G.reduceRight)($,Q))},s8=function(X){var $=(0,G.traverse)(X);return function(Q,Y){return(0,h.pipe)(Q,$(Y))}},hP=function(X,$){return(0,h.pipe)(X,(0,G.alt)($))},t8=function(X,$,Q){return(0,h.pipe)(X,(0,G.reduceWithIndex)($,Q))},a8=function(X){var $=(0,G.foldMapWithIndex)(X);return function(Q,Y){return(0,h.pipe)(Q,$(Y))}},e8=function(X,$,Q){return(0,h.pipe)(X,(0,G.reduceRightWithIndex)($,Q))},uP=function(X){var $=(0,G.traverseWithIndex)(X);return function(Q,Y){return(0,h.pipe)(Q,$(Y))}};G.of=H0.singleton;var Qv=function(X){return function($){return(0,h.pipe)($,FP(X()))}};G.altW=Qv;G.alt=G.altW;var Yv=function(X){return(0,G.flatMap)(function($){return(0,h.pipe)(X,(0,G.map)($))})};G.ap=Yv;G.flatMap=(0,h.dual)(2,function(X,$){return(0,h.pipe)(X,(0,G.chainWithIndex)(function(Q,Y){return $(Y,Q)}))});var Jv=function(X){return function($){var Q=(0,G.tail)($),Y=[X($)];while((0,G.isNonEmpty)(Q))Y.push(X(Q)),Q=(0,G.tail)(Q);return Y}};G.extend=Jv;G.duplicate=(0,G.extend)(h.identity);G.flatten=(0,G.flatMap)(h.identity);var Zv=function(X){return(0,G.mapWithIndex)(function($,Q){return X(Q)})};G.map=Zv;var Hv=function(X){return function($){var Q=[X(0,(0,G.head)($))];for(var Y=1;Y<$.length;Y++)Q.push(X(Y,$[Y]));return Q}};G.mapWithIndex=Hv;var jv=function(X,$){return(0,G.reduceWithIndex)(X,function(Q,Y,J){return $(Y,J)})};G.reduce=jv;var Pv=function(X){return function($){return function(Q){return Q.slice(1).reduce(function(Y,J){return X.concat(Y,$(J))},$(Q[0]))}}};G.foldMap=Pv;var zv=function(X,$){return(0,G.reduceRightWithIndex)(X,function(Q,Y,J){return $(Y,J)})};G.reduceRight=zv;var Gv=function(X,$){return function(Q){return Q.reduce(function(Y,J,Z){return $(Z,Y,J)},X)}};G.reduceWithIndex=Gv;var Vv=function(X){return function($){return function(Q){return Q.slice(1).reduce(function(Y,J,Z){return X.concat(Y,$(Z+1,J))},$(0,Q[0]))}}};G.foldMapWithIndex=Vv;var Dv=function(X,$){return function(Q){return Q.reduceRight(function(Y,J,Z){return $(Z,J,Y)},X)}};G.reduceRightWithIndex=Dv;var qv=function(X){var $=(0,G.traverseWithIndex)(X);return function(Q){return $(function(Y,J){return Q(J)})}};G.traverse=qv;var Kv=function(X){return(0,G.traverseWithIndex)(X)(h.SK)};G.sequence=Kv;var Bv=function(X){return function($){return function(Q){var Y=X.map($(0,(0,G.head)(Q)),G.of);for(var J=1;J<Q.length;J++)Y=X.ap(X.map(Y,function(Z){return function(V){return(0,h.pipe)(Z,(0,G.append)(V))}}),$(J,Q[J]));return Y}}};G.traverseWithIndex=Bv;G.extract=H0.head;G.URI="ReadonlyNonEmptyArray";var Lv=function(X){return{show:function($){return"[".concat($.map(X.show).join(", "),"]")}}};G.getShow=Lv;var wv=function(){return{concat:p4}};G.getSemigroup=wv;var Uv=function(X){return(0,S3.fromEquals)(function($,Q){return $.length===Q.length&&$.every(function(Y,J){return X.equals(Y,Q[J])})})};G.getEq=Uv;var Cv=function(X){var $=(0,G.union)(X);return{concat:function(Q,Y){return $(Y)(Q)}}};G.getUnionSemigroup=Cv;G.Functor={URI:G.URI,map:x0};G.flap=(0,i8.flap)(G.Functor);G.Pointed={URI:G.URI,of:G.of};G.FunctorWithIndex={URI:G.URI,map:x0,mapWithIndex:r8};G.Apply={URI:G.URI,map:x0,ap:o4};G.apFirst=(0,o8.apFirst)(G.Apply);G.apSecond=(0,o8.apSecond)(G.Apply);G.Applicative={URI:G.URI,map:x0,ap:o4,of:G.of};G.Chain={URI:G.URI,map:x0,ap:o4,chain:G.flatMap};G.chainFirst=(0,MP.chainFirst)(G.Chain);G.Monad={URI:G.URI,map:x0,ap:o4,of:G.of,chain:G.flatMap};G.Foldable={URI:G.URI,reduce:i4,foldMap:r4,reduceRight:s4};G.FoldableWithIndex={URI:G.URI,reduce:i4,foldMap:r4,reduceRight:s4,reduceWithIndex:t8,foldMapWithIndex:a8,reduceRightWithIndex:e8};G.Traversable={URI:G.URI,map:x0,reduce:i4,foldMap:r4,reduceRight:s4,traverse:s8,sequence:G.sequence};G.TraversableWithIndex={URI:G.URI,map:x0,mapWithIndex:r8,reduce:i4,foldMap:r4,reduceRight:s4,traverse:s8,sequence:G.sequence,reduceWithIndex:t8,foldMapWithIndex:a8,reduceRightWithIndex:e8,traverseWithIndex:uP};G.Alt={URI:G.URI,map:x0,alt:hP};G.Comonad={URI:G.URI,map:x0,extend:bP,extract:G.extract};G.Do=(0,G.of)(H0.emptyRecord);G.bindTo=(0,i8.bindTo)(G.Functor);var Nv=(0,i8.let)(G.Functor);G.let=Nv;G.bind=(0,MP.bind)(G.Chain);G.apS=(0,o8.apS)(G.Apply);G.head=G.extract;G.tail=H0.tail;var Tv=function(X){return X[X.length-1]};G.last=Tv;var vv=function(X){return X.slice(0,-1)};G.init=vv;var Av=function(X){var $=gP.min(X);return function(Q){return Q.reduce($.concat)}};G.min=Av;var Rv=function(X){var $=gP.max(X);return function(Q){return Q.reduce($.concat)}};G.max=Rv;var Sv=function(X){return function($){return $.reduce(X.concat)}};G.concatAll=Sv;var Wv=function(X){return function($){return X((0,G.head)($),(0,G.tail)($))}};G.matchLeft=Wv;var Ev=function(X){return function($){return X((0,G.init)($),(0,G.last)($))}};G.matchRight=Ev;var Ov=function(X){return function($){return f4([X((0,G.head)($))],(0,G.tail)($),!0)}};G.modifyHead=Ov;var Mv=function(X){return(0,G.modifyHead)(function(){return X})};G.updateHead=Mv;var gv=function(X){return function($){return(0,h.pipe)((0,G.init)($),(0,G.append)(X((0,G.last)($))))}};G.modifyLast=gv;var Fv=function(X){return(0,G.modifyLast)(function(){return X})};G.updateLast=Fv;var Iv=function(X){var $=(0,G.concatAll)(X);return function(Q){return(0,h.flow)((0,G.intersperse)(Q),$)}};G.intercalate=Iv;G.chain=G.flatMap;G.groupSort=yv;G.filter=bv;var hv=function(X){return function($){return(0,G.fromReadonlyArray)($.filter(function(Q,Y){return X(Y,Q)}))}};G.filterWithIndex=hv;G.uncons=G.unprepend;G.unsnoc=G.unappend;G.cons=uv;var kv=function(X,$){return(0,h.pipe)(X,p4([$]))};G.snoc=kv;var lv=function(X,$){return function(Q){return X<0||X>Q.length?H0.none:H0.some((0,G.unsafeInsertAt)(X,$,Q))}};G.insertAt=lv;G.prependToAll=G.prependAll;G.fold=G.concatAll;G.readonlyNonEmptyArray={URI:G.URI,of:G.of,map:x0,mapWithIndex:r8,ap:o4,chain:G.flatMap,extend:bP,extract:G.extract,reduce:i4,foldMap:r4,reduceRight:s4,traverse:s8,sequence:G.sequence,reduceWithIndex:t8,foldMapWithIndex:a8,reduceRightWithIndex:e8,traverseWithIndex:uP,alt:hP}});var a4=v((kP)=>{Object.defineProperty(kP,"__esModule",{value:!0});kP.right=kP.left=kP.flap=kP.Functor=kP.Bifunctor=kP.URI=kP.bimap=kP.mapLeft=kP.map=kP.separated=void 0;var $$=F(),mv=v1(),cv=function(X,$){return{left:X,right:$}};kP.separated=cv;var _v=function(X,$){return(0,$$.pipe)(X,(0,kP.map)($))},xv=function(X,$){return(0,$$.pipe)(X,(0,kP.mapLeft)($))},dv=function(X,$,Q){return(0,$$.pipe)(X,(0,kP.bimap)($,Q))},nv=function(X){return function($){return(0,kP.separated)((0,kP.left)($),X((0,kP.right)($)))}};kP.map=nv;var fv=function(X){return function($){return(0,kP.separated)(X((0,kP.left)($)),(0,kP.right)($))}};kP.mapLeft=fv;var pv=function(X,$){return function(Q){return(0,kP.separated)(X((0,kP.left)(Q)),$((0,kP.right)(Q)))}};kP.bimap=pv;kP.URI="Separated";kP.Bifunctor={URI:kP.URI,mapLeft:xv,bimap:dv};kP.Functor={URI:kP.URI,map:_v};kP.flap=(0,mv.flap)(kP.Functor);var ov=function(X){return X.left};kP.left=ov;var iv=function(X){return X.right};kP.right=iv});var e4=v((L0)=>{var XA=function(X,$){return function(Q){var Y=X.traverse(Q);return function(J,Z){return Q.map(Y(J,Z),$.separate)}}},$A=function(X,$){return function(Q){var Y=X.traverse(Q);return function(J,Z){return Q.map(Y(J,Z),$.compact)}}},QA=function(X){return function($){var Q=X.wither($);return function(Y){return function(J){return Q(J,function(Z){return $.map(Y(Z),function(V){return V?xP.some(Z):xP.none})})}}}},tv=L0&&L0.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),av=L0&&L0.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),ev=L0&&L0.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))tv($,X,Q)}return av($,X),$};Object.defineProperty(L0,"__esModule",{value:!0});L0.filterE=L0.witherDefault=L0.wiltDefault=void 0;var xP=ev(J1());L0.wiltDefault=XA;L0.witherDefault=$A;L0.filterE=QA});var Y$=v((dP)=>{var YA=function(X,$){return function(Q){return Q?$.of(void 0):X.zero()}};Object.defineProperty(dP,"__esModule",{value:!0});dP.guard=void 0;dP.guard=YA});var t9=v((H)=>{var BA=function(X){return function($){return X($)?[$]:H.empty}},pP=function(X,$){return $===void 0?function(Q){return pP(X,Q)}:(0,H.isOutOfBound)(X,$)?M.none:M.some($[X])},FA=function(X){return function($){var Q=[];for(var Y=0,J=$;Y<J.length;Y++){var Z=J[Y];if(!X(Z))break;Q.push(Z)}var V=Q.length;return V===$.length?$:V===0?H.empty:Q}},IA=function(X){return function($){var Q=(0,H.splitAt)(oP($,X))($),Y=Q[0],J=Q[1];return{init:Y,rest:J}}},hA=function(X){return function($){var Q=oP($,X);return Q===0?$:Q===$.length?H.empty:$.slice(Q)}},kA=function(X){return function($){for(var Q=0;Q<$.length;Q++)if(X($[Q]))return M.some($[Q]);return M.none}},mA=function(X){return function($){for(var Q=$.length-1;Q>=0;Q--)if(X($[Q]))return M.some($[Q]);return M.none}},iP=function(X,$){if($===void 0)return function(Q){return iP(Q,X)};return(0,H.zipWith)(X,$,function(Q,Y){return[Q,Y]})},n9=function(X){return function($,Q){if(Q===void 0){var Y=n9(X);return function(V){return Y($,V)}}var J=function(V){return X.equals(V,$)},Z=0;for(;Z<Q.length;Z++)if(J(Q[Z]))return!0;return!1}},jR=function(X,$,Q){if(Q===void 0)Q=function(){return!0};var Y=function(J,Z){return(0,H.isNonEmpty)(Z)?(0,H.flatMap)(g.head(Z),function(V){return Y((0,b.pipe)(J,(0,H.append)(V)),g.tail(Z))}):Q.apply(void 0,J)?[$.apply(void 0,J)]:H.empty};return Y(H.empty,X)},z$=function(X){var $=g.union(X);return function(Q,Y){if(Y===void 0){var J=z$(X);return function(Z){return J(Z,Q)}}return(0,H.isNonEmpty)(Q)&&(0,H.isNonEmpty)(Y)?$(Y)(Q):(0,H.isNonEmpty)(Q)?Q:Y}},G$=function(X){var $=n9(X);return function(Q,Y){if(Y===void 0){var J=G$(X);return function(Z){return J(Z,Q)}}return Q.filter(function(Z){return $(Z,Y)})}},V$=function(X){var $=n9(X);return function(Q,Y){if(Y===void 0){var J=V$(X);return function(Z){return J(Z,Q)}}return Q.filter(function(Z){return!$(Z,Y)})}},eR=function(X){return function($){return $.every(X)}},JA=H&&H.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),ZA=H&&H.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),J$=H&&H.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))JA($,X,Q)}return ZA($,X),$},HA=H&&H.__spreadArray||function(X,$,Q){if(Q||arguments.length===2){for(var Y=0,J=$.length,Z;Y<J;Y++)if(Z||!(Y in $)){if(!Z)Z=Array.prototype.slice.call($,0,Y);Z[Y]=$[Y]}}return X.concat(Z||Array.prototype.slice.call($))};Object.defineProperty(H,"__esModule",{value:!0});H.sort=H.lefts=H.rights=H.reverse=H.modifyAt=H.deleteAt=H.updateAt=H.insertAt=H.findLastIndex=H.findLastMap=H.findLast=H.findFirstMap=H.findFirst=H.findIndex=H.dropLeftWhile=H.dropRight=H.dropLeft=H.spanLeft=H.takeLeftWhile=H.takeRight=H.takeLeft=H.init=H.tail=H.last=H.head=H.lookup=H.isOutOfBound=H.size=H.scanRight=H.scanLeft=H.chainWithIndex=H.foldRight=H.matchRight=H.matchRightW=H.foldLeft=H.matchLeft=H.matchLeftW=H.match=H.matchW=H.fromEither=H.fromOption=H.fromPredicate=H.replicate=H.makeBy=H.appendW=H.append=H.prependW=H.prepend=H.isNonEmpty=H.isEmpty=void 0;H.sequence=H.traverse=H.reduceRightWithIndex=H.reduceRight=H.reduceWithIndex=H.foldMap=H.reduce=H.foldMapWithIndex=H.duplicate=H.extend=H.filterWithIndex=H.partitionMapWithIndex=H.partitionMap=H.partitionWithIndex=H.partition=H.compact=H.filterMap=H.filterMapWithIndex=H.filter=H.separate=H.mapWithIndex=H.map=H.flatten=H.flatMap=H.ap=H.alt=H.altW=H.zero=H.of=H._chainRecBreadthFirst=H._chainRecDepthFirst=H.difference=H.intersection=H.union=H.concat=H.concatW=H.comprehension=H.fromOptionK=H.chunksOf=H.splitAt=H.chop=H.sortBy=H.uniq=H.elem=H.rotate=H.intersperse=H.prependAll=H.unzip=H.zip=H.zipWith=void 0;H.toArray=H.unsafeDeleteAt=H.unsafeUpdateAt=H.unsafeInsertAt=H.fromEitherK=H.FromEither=H.filterE=H.Witherable=H.ChainRecBreadthFirst=H.chainRecBreadthFirst=H.ChainRecDepthFirst=H.chainRecDepthFirst=H.TraversableWithIndex=H.Traversable=H.FoldableWithIndex=H.Foldable=H.FilterableWithIndex=H.Filterable=H.Compactable=H.Extend=H.Alternative=H.guard=H.Zero=H.Alt=H.Unfoldable=H.chainFirst=H.Monad=H.Chain=H.Applicative=H.apSecond=H.apFirst=H.Apply=H.FunctorWithIndex=H.Pointed=H.flap=H.Functor=H.getDifferenceMagma=H.getIntersectionSemigroup=H.getUnionMonoid=H.getUnionSemigroup=H.getOrd=H.getEq=H.getMonoid=H.getSemigroup=H.getShow=H.URI=H.unfold=H.wilt=H.wither=H.traverseWithIndex=void 0;H.readonlyArray=H.prependToAll=H.snoc=H.cons=H.range=H.chain=H.apS=H.bind=H.let=H.bindTo=H.Do=H.intercalate=H.exists=H.some=H.every=H.empty=H.fromArray=void 0;var Z$=Y5(),fP=J5(),jA=n4(),PA=m9(),b=F(),H$=v1(),M=J$(J1()),zA=J$(PP()),GA=_9(),g=J$(X$()),j$=a4(),P$=e4(),VA=Y$(),DA=function(X){return X.length===0};H.isEmpty=DA;H.isNonEmpty=g.isNonEmpty;H.prepend=g.prepend;H.prependW=g.prependW;H.append=g.append;H.appendW=g.appendW;var qA=function(X,$){return X<=0?H.empty:g.makeBy($)(X)};H.makeBy=qA;var KA=function(X,$){return(0,H.makeBy)(X,function(){return $})};H.replicate=KA;H.fromPredicate=BA;var LA=function(X){return M.isNone(X)?H.empty:[X.value]};H.fromOption=LA;var wA=function(X){return M.isLeft(X)?H.empty:[X.right]};H.fromEither=wA;var UA=function(X,$){return function(Q){return(0,H.isNonEmpty)(Q)?$(Q):X()}};H.matchW=UA;H.match=H.matchW;var CA=function(X,$){return function(Q){return(0,H.isNonEmpty)(Q)?$(g.head(Q),g.tail(Q)):X()}};H.matchLeftW=CA;H.matchLeft=H.matchLeftW;H.foldLeft=H.matchLeft;var NA=function(X,$){return function(Q){return(0,H.isNonEmpty)(Q)?$(g.init(Q),g.last(Q)):X()}};H.matchRightW=NA;H.matchRight=H.matchRightW;H.foldRight=H.matchRight;var TA=function(X){return function($){if((0,H.isEmpty)($))return H.empty;var Q=[];for(var Y=0;Y<$.length;Y++)Q.push.apply(Q,X(Y,$[Y]));return Q}};H.chainWithIndex=TA;var vA=function(X,$){return function(Q){var Y=Q.length,J=new Array(Y+1);J[0]=X;for(var Z=0;Z<Y;Z++)J[Z+1]=$(J[Z],Q[Z]);return J}};H.scanLeft=vA;var AA=function(X,$){return function(Q){var Y=Q.length,J=new Array(Y+1);J[Y]=X;for(var Z=Y-1;Z>=0;Z--)J[Z]=$(Q[Z],J[Z+1]);return J}};H.scanRight=AA;var RA=function(X){return X.length};H.size=RA;H.isOutOfBound=g.isOutOfBound;H.lookup=pP;var SA=function(X){return(0,H.isNonEmpty)(X)?M.some(g.head(X)):M.none};H.head=SA;var WA=function(X){return(0,H.isNonEmpty)(X)?M.some(g.last(X)):M.none};H.last=WA;var EA=function(X){return(0,H.isNonEmpty)(X)?M.some(g.tail(X)):M.none};H.tail=EA;var OA=function(X){return(0,H.isNonEmpty)(X)?M.some(g.init(X)):M.none};H.init=OA;var MA=function(X){return function($){return(0,H.isOutOfBound)(X,$)?$:X===0?H.empty:$.slice(0,X)}};H.takeLeft=MA;var gA=function(X){return function($){return(0,H.isOutOfBound)(X,$)?$:X===0?H.empty:$.slice(-X)}};H.takeRight=gA;H.takeLeftWhile=FA;var oP=function(X,$){var Q=X.length,Y=0;for(;Y<Q;Y++)if(!$(X[Y]))break;return Y};H.spanLeft=IA;var yA=function(X){return function($){return X<=0||(0,H.isEmpty)($)?$:X>=$.length?H.empty:$.slice(X,$.length)}};H.dropLeft=yA;var bA=function(X){return function($){return X<=0||(0,H.isEmpty)($)?$:X>=$.length?H.empty:$.slice(0,$.length-X)}};H.dropRight=bA;H.dropLeftWhile=hA;var uA=function(X){return function($){for(var Q=0;Q<$.length;Q++)if(X($[Q]))return M.some(Q);return M.none}};H.findIndex=uA;H.findFirst=kA;var lA=function(X){return function($){for(var Q=0;Q<$.length;Q++){var Y=X($[Q]);if(M.isSome(Y))return Y}return M.none}};H.findFirstMap=lA;H.findLast=mA;var cA=function(X){return function($){for(var Q=$.length-1;Q>=0;Q--){var Y=X($[Q]);if(M.isSome(Y))return Y}return M.none}};H.findLastMap=cA;var _A=function(X){return function($){for(var Q=$.length-1;Q>=0;Q--)if(X($[Q]))return M.some(Q);return M.none}};H.findLastIndex=_A;var xA=function(X,$){return function(Q){return X<0||X>Q.length?M.none:M.some(g.unsafeInsertAt(X,$,Q))}};H.insertAt=xA;var dA=function(X,$){return(0,H.modifyAt)(X,function(){return $})};H.updateAt=dA;var nA=function(X){return function($){return(0,H.isOutOfBound)(X,$)?M.none:M.some((0,H.unsafeDeleteAt)(X,$))}};H.deleteAt=nA;var fA=function(X,$){return function(Q){return(0,H.isOutOfBound)(X,Q)?M.none:M.some((0,H.unsafeUpdateAt)(X,$(Q[X]),Q))}};H.modifyAt=fA;var pA=function(X){return X.length<=1?X:X.slice().reverse()};H.reverse=pA;var oA=function(X){var $=[];for(var Q=0;Q<X.length;Q++){var Y=X[Q];if(Y._tag==="Right")$.push(Y.right)}return $};H.rights=oA;var iA=function(X){var $=[];for(var Q=0;Q<X.length;Q++){var Y=X[Q];if(Y._tag==="Left")$.push(Y.left)}return $};H.lefts=iA;var rA=function(X){return function($){return $.length<=1?$:$.slice().sort(X.compare)}};H.sort=rA;var sA=function(X,$,Q){var Y=[],J=Math.min(X.length,$.length);for(var Z=0;Z<J;Z++)Y[Z]=Q(X[Z],$[Z]);return Y};H.zipWith=sA;H.zip=iP;var tA=function(X){var $=[],Q=[];for(var Y=0;Y<X.length;Y++)$[Y]=X[Y][0],Q[Y]=X[Y][1];return[$,Q]};H.unzip=tA;var aA=function(X){var $=g.prependAll(X);return function(Q){return(0,H.isNonEmpty)(Q)?$(Q):Q}};H.prependAll=aA;var eA=function(X){var $=g.intersperse(X);return function(Q){return(0,H.isNonEmpty)(Q)?$(Q):Q}};H.intersperse=eA;var XR=function(X){var $=g.rotate(X);return function(Q){return(0,H.isNonEmpty)(Q)?$(Q):Q}};H.rotate=XR;H.elem=n9;var $R=function(X){var $=g.uniq(X);return function(Q){return(0,H.isNonEmpty)(Q)?$(Q):Q}};H.uniq=$R;var QR=function(X){var $=g.sortBy(X);return function(Q){return(0,H.isNonEmpty)(Q)?$(Q):Q}};H.sortBy=QR;var YR=function(X){var $=g.chop(X);return function(Q){return(0,H.isNonEmpty)(Q)?$(Q):H.empty}};H.chop=YR;var JR=function(X){return function($){return X>=1&&(0,H.isNonEmpty)($)?g.splitAt(X)($):(0,H.isEmpty)($)?[$,H.empty]:[H.empty,$]}};H.splitAt=JR;var ZR=function(X){var $=g.chunksOf(X);return function(Q){return(0,H.isNonEmpty)(Q)?$(Q):H.empty}};H.chunksOf=ZR;var HR=function(X){return function(){var $=[];for(var Q=0;Q<arguments.length;Q++)$[Q]=arguments[Q];return(0,H.fromOption)(X.apply(void 0,$))}};H.fromOptionK=HR;H.comprehension=jR;var PR=function(X){return function($){return(0,H.isEmpty)($)?X:(0,H.isEmpty)(X)?$:$.concat(X)}};H.concatW=PR;H.concat=H.concatW;H.union=z$;H.intersection=G$;H.difference=V$;var Y0=function(X,$){return(0,b.pipe)(X,(0,H.map)($))},f9=function(X,$){return(0,b.pipe)(X,(0,H.mapWithIndex)($))},b1=function(X,$){return(0,b.pipe)(X,(0,H.ap)($))},p9=function(X,$){return(0,b.pipe)(X,(0,H.filter)($))},o9=function(X,$){return(0,b.pipe)(X,(0,H.filterMap)($))},i9=function(X,$){return(0,b.pipe)(X,(0,H.partition)($))},r9=function(X,$){return(0,b.pipe)(X,(0,H.partitionMap)($))},rP=function(X,$){return(0,b.pipe)(X,(0,H.partitionWithIndex)($))},sP=function(X,$){return(0,b.pipe)(X,(0,H.partitionMapWithIndex)($))},D$=function(X,$){return(0,b.pipe)(X,(0,H.alt)($))},H5=function(X,$,Q){return(0,b.pipe)(X,(0,H.reduce)($,Q))},x5=function(X){var $=(0,H.foldMap)(X);return function(Q,Y){return(0,b.pipe)(Q,$(Y))}},d5=function(X,$,Q){return(0,b.pipe)(X,(0,H.reduceRight)($,Q))},q$=function(X,$,Q){return(0,b.pipe)(X,(0,H.reduceWithIndex)($,Q))},K$=function(X){var $=(0,H.foldMapWithIndex)(X);return function(Q,Y){return(0,b.pipe)(Q,$(Y))}},B$=function(X,$,Q){return(0,b.pipe)(X,(0,H.reduceRightWithIndex)($,Q))},tP=function(X,$){return(0,b.pipe)(X,(0,H.filterMapWithIndex)($))},aP=function(X,$){return(0,b.pipe)(X,(0,H.filterWithIndex)($))},eP=function(X,$){return(0,b.pipe)(X,(0,H.extend)($))},s9=function(X){var $=(0,H.traverse)(X);return function(Q,Y){return(0,b.pipe)(Q,$(Y))}},Xz=function(X){var $=(0,H.traverseWithIndex)(X);return function(Q,Y){return(0,b.pipe)(Q,$(Y))}},zR=function(X,$){return(0,b.pipe)(X,(0,H.chainRecDepthFirst)($))};H._chainRecDepthFirst=zR;var GR=function(X,$){return(0,b.pipe)(X,(0,H.chainRecBreadthFirst)($))};H._chainRecBreadthFirst=GR;H.of=g.of;var VR=function(){return H.empty};H.zero=VR;var DR=function(X){return function($){return $.concat(X())}};H.altW=DR;H.alt=H.altW;var qR=function(X){return(0,H.flatMap)(function($){return(0,b.pipe)(X,(0,H.map)($))})};H.ap=qR;H.flatMap=(0,b.dual)(2,function(X,$){return(0,b.pipe)(X,(0,H.chainWithIndex)(function(Q,Y){return $(Y,Q)}))});H.flatten=(0,H.flatMap)(b.identity);var KR=function(X){return function($){return $.map(function(Q){return X(Q)})}};H.map=KR;var BR=function(X){return function($){return $.map(function(Q,Y){return X(Y,Q)})}};H.mapWithIndex=BR;var LR=function(X){var $=[],Q=[];for(var Y=0,J=X;Y<J.length;Y++){var Z=J[Y];if(Z._tag==="Left")$.push(Z.left);else Q.push(Z.right)}return(0,j$.separated)($,Q)};H.separate=LR;var wR=function(X){return function($){return $.filter(X)}};H.filter=wR;var UR=function(X){return function($){var Q=[];for(var Y=0;Y<$.length;Y++){var J=X(Y,$[Y]);if(M.isSome(J))Q.push(J.value)}return Q}};H.filterMapWithIndex=UR;var CR=function(X){return(0,H.filterMapWithIndex)(function($,Q){return X(Q)})};H.filterMap=CR;H.compact=(0,H.filterMap)(b.identity);var NR=function(X){return(0,H.partitionWithIndex)(function($,Q){return X(Q)})};H.partition=NR;var TR=function(X){return function($){var Q=[],Y=[];for(var J=0;J<$.length;J++){var Z=$[J];if(X(J,Z))Y.push(Z);else Q.push(Z)}return(0,j$.separated)(Q,Y)}};H.partitionWithIndex=TR;var vR=function(X){return(0,H.partitionMapWithIndex)(function($,Q){return X(Q)})};H.partitionMap=vR;var AR=function(X){return function($){var Q=[],Y=[];for(var J=0;J<$.length;J++){var Z=X(J,$[J]);if(Z._tag==="Left")Q.push(Z.left);else Y.push(Z.right)}return(0,j$.separated)(Q,Y)}};H.partitionMapWithIndex=AR;var RR=function(X){return function($){return $.filter(function(Q,Y){return X(Y,Q)})}};H.filterWithIndex=RR;var SR=function(X){return function($){return $.map(function(Q,Y){return X($.slice(Y))})}};H.extend=SR;H.duplicate=(0,H.extend)(b.identity);var WR=function(X){return function($){return function(Q){return Q.reduce(function(Y,J,Z){return X.concat(Y,$(Z,J))},X.empty)}}};H.foldMapWithIndex=WR;var ER=function(X,$){return(0,H.reduceWithIndex)(X,function(Q,Y,J){return $(Y,J)})};H.reduce=ER;var OR=function(X){var $=(0,H.foldMapWithIndex)(X);return function(Q){return $(function(Y,J){return Q(J)})}};H.foldMap=OR;var MR=function(X,$){return function(Q){var Y=Q.length,J=X;for(var Z=0;Z<Y;Z++)J=$(Z,J,Q[Z]);return J}};H.reduceWithIndex=MR;var gR=function(X,$){return(0,H.reduceRightWithIndex)(X,function(Q,Y,J){return $(Y,J)})};H.reduceRight=gR;var FR=function(X,$){return function(Q){return Q.reduceRight(function(Y,J,Z){return $(Z,J,Y)},X)}};H.reduceRightWithIndex=FR;var IR=function(X){var $=(0,H.traverseWithIndex)(X);return function(Q){return $(function(Y,J){return Q(J)})}};H.traverse=IR;var yR=function(X){return function($){return H5($,X.of((0,H.zero)()),function(Q,Y){return X.ap(X.map(Q,function(J){return function(Z){return(0,b.pipe)(J,(0,H.append)(Z))}}),Y)})}};H.sequence=yR;var bR=function(X){return function($){return(0,H.reduceWithIndex)(X.of((0,H.zero)()),function(Q,Y,J){return X.ap(X.map(Y,function(Z){return function(V){return(0,b.pipe)(Z,(0,H.append)(V))}}),$(Q,J))})}};H.traverseWithIndex=bR;var hR=function(X){var $=L$(X);return function(Q){return function(Y){return $(Y,Q)}}};H.wither=hR;var uR=function(X){var $=w$(X);return function(Q){return function(Y){return $(Y,Q)}}};H.wilt=uR;var kR=function(X,$){var Q=[],Y=X;while(!0){var J=$(Y);if(M.isSome(J)){var Z=J.value,V=Z[0],D=Z[1];Q.push(V),Y=D}else break}return Q};H.unfold=kR;H.URI="ReadonlyArray";var lR=function(X){return{show:function($){return"[".concat($.map(X.show).join(", "),"]")}}};H.getShow=lR;var mR=function(){return{concat:function(X,$){return(0,H.isEmpty)(X)?$:(0,H.isEmpty)($)?X:X.concat($)}}};H.getSemigroup=mR;var cR=function(){return{concat:(0,H.getSemigroup)().concat,empty:H.empty}};H.getMonoid=cR;var _R=function(X){return(0,jA.fromEquals)(function($,Q){return $.length===Q.length&&$.every(function(Y,J){return X.equals(Y,Q[J])})})};H.getEq=_R;var xR=function(X){return(0,GA.fromCompare)(function($,Q){var Y=$.length,J=Q.length,Z=Math.min(Y,J);for(var V=0;V<Z;V++){var D=X.compare($[V],Q[V]);if(D!==0)return D}return zA.Ord.compare(Y,J)})};H.getOrd=xR;var dR=function(X){var $=z$(X);return{concat:function(Q,Y){return $(Y)(Q)}}};H.getUnionSemigroup=dR;var nR=function(X){return{concat:(0,H.getUnionSemigroup)(X).concat,empty:H.empty}};H.getUnionMonoid=nR;var fR=function(X){var $=G$(X);return{concat:function(Q,Y){return $(Y)(Q)}}};H.getIntersectionSemigroup=fR;var pR=function(X){var $=V$(X);return{concat:function(Q,Y){return $(Y)(Q)}}};H.getDifferenceMagma=pR;H.Functor={URI:H.URI,map:Y0};H.flap=(0,H$.flap)(H.Functor);H.Pointed={URI:H.URI,of:H.of};H.FunctorWithIndex={URI:H.URI,map:Y0,mapWithIndex:f9};H.Apply={URI:H.URI,map:Y0,ap:b1};H.apFirst=(0,Z$.apFirst)(H.Apply);H.apSecond=(0,Z$.apSecond)(H.Apply);H.Applicative={URI:H.URI,map:Y0,ap:b1,of:H.of};H.Chain={URI:H.URI,map:Y0,ap:b1,chain:H.flatMap};H.Monad={URI:H.URI,map:Y0,ap:b1,of:H.of,chain:H.flatMap};H.chainFirst=(0,fP.chainFirst)(H.Chain);H.Unfoldable={URI:H.URI,unfold:H.unfold};H.Alt={URI:H.URI,map:Y0,alt:D$};H.Zero={URI:H.URI,zero:H.zero};H.guard=(0,VA.guard)(H.Zero,H.Pointed);H.Alternative={URI:H.URI,map:Y0,ap:b1,of:H.of,alt:D$,zero:H.zero};H.Extend={URI:H.URI,map:Y0,extend:eP};H.Compactable={URI:H.URI,compact:H.compact,separate:H.separate};H.Filterable={URI:H.URI,map:Y0,compact:H.compact,separate:H.separate,filter:p9,filterMap:o9,partition:i9,partitionMap:r9};H.FilterableWithIndex={URI:H.URI,map:Y0,mapWithIndex:f9,compact:H.compact,separate:H.separate,filter:p9,filterMap:o9,partition:i9,partitionMap:r9,partitionMapWithIndex:sP,partitionWithIndex:rP,filterMapWithIndex:tP,filterWithIndex:aP};H.Foldable={URI:H.URI,reduce:H5,foldMap:x5,reduceRight:d5};H.FoldableWithIndex={URI:H.URI,reduce:H5,foldMap:x5,reduceRight:d5,reduceWithIndex:q$,foldMapWithIndex:K$,reduceRightWithIndex:B$};H.Traversable={URI:H.URI,map:Y0,reduce:H5,foldMap:x5,reduceRight:d5,traverse:s9,sequence:H.sequence};H.TraversableWithIndex={URI:H.URI,map:Y0,mapWithIndex:f9,reduce:H5,foldMap:x5,reduceRight:d5,reduceWithIndex:q$,foldMapWithIndex:K$,reduceRightWithIndex:B$,traverse:s9,sequence:H.sequence,traverseWithIndex:Xz};var oR=function(X){return function($){var Q=HA([],X($),!0),Y=[];while(Q.length>0){var J=Q.shift();if(M.isLeft(J))Q.unshift.apply(Q,X(J.left));else Y.push(J.right)}return Y}};H.chainRecDepthFirst=oR;H.ChainRecDepthFirst={URI:H.URI,map:Y0,ap:b1,chain:H.flatMap,chainRec:H._chainRecDepthFirst};var iR=function(X){return function($){var Q=X($),Y=[],J=[];function Z(B){if(M.isLeft(B))X(B.left).forEach(function(R){return Y.push(R)});else J.push(B.right)}for(var V=0,D=Q;V<D.length;V++){var L=D[V];Z(L)}while(Y.length>0)Z(Y.shift());return J}};H.chainRecBreadthFirst=iR;H.ChainRecBreadthFirst={URI:H.URI,map:Y0,ap:b1,chain:H.flatMap,chainRec:H._chainRecBreadthFirst};var L$=(0,P$.witherDefault)(H.Traversable,H.Compactable),w$=(0,P$.wiltDefault)(H.Traversable,H.Compactable);H.Witherable={URI:H.URI,map:Y0,compact:H.compact,separate:H.separate,filter:p9,filterMap:o9,partition:i9,partitionMap:r9,reduce:H5,foldMap:x5,reduceRight:d5,traverse:s9,sequence:H.sequence,wither:L$,wilt:w$};H.filterE=(0,P$.filterE)(H.Witherable);H.FromEither={URI:H.URI,fromEither:H.fromEither};H.fromEitherK=(0,PA.fromEitherK)(H.FromEither);H.unsafeInsertAt=g.unsafeInsertAt;var rR=function(X,$,Q){return(0,H.isNonEmpty)(Q)?g.unsafeUpdateAt(X,$,Q):Q};H.unsafeUpdateAt=rR;var sR=function(X,$){var Q=$.slice();return Q.splice(X,1),Q};H.unsafeDeleteAt=sR;var tR=function(X){return X.slice()};H.toArray=tR;var aR=function(X){return(0,H.isEmpty)(X)?H.empty:X.slice()};H.fromArray=aR;H.empty=g.empty;H.every=eR;var X2=function(X){return function($){return $.some(X)}};H.some=X2;H.exists=H.some;var $2=function(X){var $=g.intercalate(X);return function(Q){return(0,H.match)(function(){return X.empty},$(Q))}};H.intercalate=$2;H.Do=(0,H.of)(M.emptyRecord);H.bindTo=(0,H$.bindTo)(H.Functor);var Q2=(0,H$.let)(H.Functor);H.let=Q2;H.bind=(0,fP.bind)(H.Chain);H.apS=(0,Z$.apS)(H.Apply);H.chain=H.flatMap;H.range=g.range;H.cons=g.cons;H.snoc=g.snoc;H.prependToAll=H.prependAll;H.readonlyArray={URI:H.URI,compact:H.compact,separate:H.separate,map:Y0,ap:b1,of:H.of,chain:H.flatMap,filter:p9,filterMap:o9,partition:i9,partitionMap:r9,mapWithIndex:f9,partitionMapWithIndex:sP,partitionWithIndex:rP,filterMapWithIndex:tP,filterWithIndex:aP,alt:D$,zero:H.zero,unfold:H.unfold,reduce:H5,foldMap:x5,reduceRight:d5,traverse:s9,sequence:H.sequence,reduceWithIndex:q$,foldMapWithIndex:K$,reduceRightWithIndex:B$,traverseWithIndex:Xz,extend:eP,wither:L$,wilt:w$}});var U$=v(($z)=>{Object.defineProperty($z,"__esModule",{value:!0});$z.endsWith=$z.startsWith=$z.includes=$z.split=$z.size=$z.isEmpty=$z.slice=$z.trimRight=$z.trimLeft=$z.trim=$z.replace=$z.toLowerCase=$z.toUpperCase=$z.isString=$z.Show=$z.Ord=$z.Monoid=$z.empty=$z.Semigroup=$z.Eq=void 0;var Y2=X$();$z.Eq={equals:function(X,$){return X===$}};$z.Semigroup={concat:function(X,$){return X+$}};$z.empty="";$z.Monoid={concat:$z.Semigroup.concat,empty:$z.empty};$z.Ord={equals:$z.Eq.equals,compare:function(X,$){return X<$?-1:X>$?1:0}};$z.Show={show:function(X){return JSON.stringify(X)}};var J2=function(X){return typeof X==="string"};$z.isString=J2;var Z2=function(X){return X.toUpperCase()};$z.toUpperCase=Z2;var H2=function(X){return X.toLowerCase()};$z.toLowerCase=H2;var j2=function(X,$){return function(Q){return Q.replace(X,$)}};$z.replace=j2;var P2=function(X){return X.trim()};$z.trim=P2;var z2=function(X){return X.trimLeft()};$z.trimLeft=z2;var G2=function(X){return X.trimRight()};$z.trimRight=G2;var V2=function(X,$){return function(Q){return Q.slice(X,$)}};$z.slice=V2;var D2=function(X){return X.length===0};$z.isEmpty=D2;var q2=function(X){return X.length};$z.size=q2;var K2=function(X){return function($){var Q=$.split(X);return(0,Y2.isNonEmpty)(Q)?Q:[$]}};$z.split=K2;var B2=function(X,$){return function(Q){return Q.includes(X,$)}};$z.includes=B2;var L2=function(X,$){return function(Q){return Q.startsWith(X,$)}};$z.startsWith=L2;var w2=function(X,$){return function(Q){return Q.endsWith(X,$)}};$z.endsWith=w2});var F$=v((z)=>{var e9=function(X){if(typeof X==="function")return e9(T.Ord)(X);var $=n5(X);return function(Q){return function(Y){var J=[];for(var Z=0,V=$(Y);Z<V.length;Z++){var D=V[Z];J.push(Q(D,Y[D]))}return J}}},x2=function(X){return function($){var Q=(0,z.toReadonlyArray)($),Y=Q.length;return X.unfold(0,function(J){return J<Y?y.some([Q[J],J+1]):y.none})}},jz=function(X){return function($){if(!y.has.call($,X))return $;var Q=Object.assign({},$);return delete Q[X],Q}},o2=function(X){var $=jz(X);return function(Q){var Y=T$(X,Q);return y.isNone(Y)?y.none:y.some([Y.value,$(Q)])}},N$=function(X){return function($,Q){if(Q===void 0){var Y=N$(X);return function(Z){return Y(Z,$)}}for(var J in $)if(!y.has.call(Q,J)||!X.equals($[J],Q[J]))return!1;return!0}},T$=function(X,$){if($===void 0)return function(Q){return T$(X,Q)};return y.has.call($,X)?y.some($[X]):y.none},v$=function(X){return function($){var Q={};for(var Y in $)if(y.has.call($,Y))Q[Y]=X(Y,$[Y]);return Q}},Pz=function(X){return v$(function($,Q){return X(Q)})},XX=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];if(X.length===2)return XX(T.Ord).apply(void 0,X);var Q=n5(X[0]);return function(Y,J){return function(Z){var V=Y,D=Q(Z),L=D.length;for(var B=0;B<L;B++){var R=D[B];V=J(R,V,Z[R])}return V}}},$X=function(X){if("compare"in X){var $=n5(X);return function(Q){return function(Y){return function(J){var Z=Q.empty,V=$(J),D=V.length;for(var L=0;L<D;L++){var B=V[L];Z=Q.concat(Z,Y(B,J[B]))}return Z}}}}return $X(T.Ord)(X)},QX=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];if(X.length===2)return QX(T.Ord).apply(void 0,X);var Q=n5(X[0]);return function(Y,J){return function(Z){var V=Y,D=Q(Z),L=D.length;for(var B=L-1;B>=0;B--){var R=D[B];V=J(R,Z[R],V)}return V}}},r2=function(X){var $=$7(T.Ord)(X);return function(Q){return function(Y){return $(Y,Q)}}},A$=function(X){var $=(0,z._traverse)(T.Ord)(X);return function(Q){return function(Y){return $(Y,Q)}}},X7=function(X){return(0,z._sequence)(T.Ord)(X)},R$=function(X){return function($){var Q={},Y={};for(var J in $)if(y.has.call($,J)){var Z=X(J,$[J]);switch(Z._tag){case"Left":Q[J]=Z.left;break;case"Right":Y[J]=Z.right;break}}return(0,C$.separated)(Q,Y)}},S$=function(X){return function($){var Q={},Y={};for(var J in $)if(y.has.call($,J)){var Z=$[J];if(X(J,Z))Y[J]=Z;else Q[J]=Z}return(0,C$.separated)(Q,Y)}},W$=function(X){return function($){var Q={};for(var Y in $)if(y.has.call($,Y)){var J=X(Y,$[Y]);if(y.isSome(J))Q[Y]=J.value}return Q}},E$=function(X){return function($){var Q={},Y=!1;for(var J in $)if(y.has.call($,J)){var Z=$[J];if(X(J,Z))Q[J]=Z;else Y=!0}return Y?Q:$}},a2=function(X,$){var Q=zz(X,$);return function(Y){return Q(Y,o.identity)}},zz=function(X,$){return function(Q,Y){return $.reduce(Q,{},function(J,Z){var V=Y(Z),D=V[0],L=V[1];return J[D]=y.has.call(J,D)?X.concat(J[D],L):L,J})}},XS=function(X){return function($){for(var Q in $)if(!X($[Q]))return!1;return!0}},$S=function(X){return function($){for(var Q in $)if(X($[Q]))return!0;return!1}},Gz=function(X){return function($,Q){if(Q===void 0){var Y=Gz(X);return function(Z){return Y($,Z)}}for(var J in Q)if(X.equals(Q[J],$))return!0;return!1}},O$=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];if(X.length===1){var Q=XX(X[0]);return function(Y,J){return Q(Y,function(Z,V,D){return J(V,D)})}}return O$(T.Ord).apply(void 0,X)},M$=function(X){if("compare"in X){var $=$X(X);return function(Q){var Y=$(Q);return function(J){return Y(function(Z,V){return J(V)})}}}return M$(T.Ord)(X)},g$=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];if(X.length===1){var Q=QX(X[0]);return function(Y,J){return Q(Y,function(Z,V,D){return J(V,D)})}}return g$(T.Ord).apply(void 0,X)},Vz=function(X){if("compare"in X)return function($){return{show:function(Q){var Y=e9(X)(function(J,Z){return"".concat(JSON.stringify(J),": ").concat($.show(Z))})(Q).join(", ");return Y===""?"{}":"{ ".concat(Y," }")}}};return Vz(T.Ord)(X)},MS=function(X){var $=N$(X);return(0,u2.fromEquals)(function(Q,Y){return $(Q)(Y)&&$(Y)(Q)})},gS=function(X){return{concat:function($,Q){if((0,z.isEmpty)($))return Q;if((0,z.isEmpty)(Q))return $;var Y=Object.assign({},$);for(var J in Q)if(y.has.call(Q,J))Y[J]=y.has.call($,J)?X.concat($[J],Q[J]):Q[J];return Y},empty:z.empty}},cS=function(X,$){return y.has.call($===void 0?this:$,X)},b2=z&&z.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),h2=z&&z.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),Hz=z&&z.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))b2($,X,Q)}return h2($,X),$};Object.defineProperty(z,"__esModule",{value:!0});z._partition=z._filterMap=z._filter=z._reduceRight=z._foldMap=z._reduce=z._mapWithIndex=z._map=z.difference=z.intersection=z.union=z.elem=z.some=z.every=z.fromEntries=z.toEntries=z.fromFoldableMap=z.fromFoldable=z.filterWithIndex=z.filterMapWithIndex=z.partitionWithIndex=z.partitionMapWithIndex=z.wilt=z.wither=z.sequence=z.traverse=z.traverseWithIndex=z.singleton=z.reduceRightWithIndex=z.foldMapWithIndex=z.reduceWithIndex=z.map=z.mapWithIndex=z.empty=z.lookup=z.isSubrecord=z.pop=z.modifyAt=z.updateAt=z.deleteAt=z.has=z.upsertAt=z.toUnfoldable=z.toReadonlyArray=z.collect=z.keys=z.isEmpty=z.size=z.toRecord=z.fromRecord=void 0;z.readonlyRecord=z.hasOwnProperty=z.insertAt=z.Witherable=z.TraversableWithIndex=z.Traversable=z.FoldableWithIndex=z.Foldable=z.getDifferenceMagma=z.getIntersectionSemigroup=z.getUnionMonoid=z.getUnionSemigroup=z.getWitherable=z.getTraversableWithIndex=z.getTraversable=z.FilterableWithIndex=z.Filterable=z.Compactable=z.getFoldableWithIndex=z.getFoldable=z.FunctorWithIndex=z.flap=z.Functor=z.getMonoid=z.getEq=z.getShow=z.URI=z.separate=z.compact=z.reduceRight=z.foldMap=z.reduce=z.partitionMap=z.partition=z.filterMap=z.filter=z._sequence=z._traverse=z._filterWithIndex=z._filterMapWithIndex=z._partitionWithIndex=z._partitionMapWithIndex=z._reduceRightWithIndex=z._foldMapWithIndex=z._reduceWithIndex=z._partitionMap=void 0;var u2=n4(),o=F(),k2=v1(),y=Hz(J1()),C$=a4(),T=Hz(U$()),a9=e4(),l2=function(X){return Object.assign({},X)};z.fromRecord=l2;var m2=function(X){return Object.assign({},X)};z.toRecord=m2;var c2=function(X){return Object.keys(X).length};z.size=c2;var _2=function(X){for(var $ in X)if(y.has.call(X,$))return!1;return!0};z.isEmpty=_2;var n5=function(X){return function($){return Object.keys($).sort(X.compare)}};z.keys=n5(T.Ord);z.collect=e9;z.toReadonlyArray=e9(T.Ord)(function(X,$){return[X,$]});z.toUnfoldable=x2;var d2=function(X,$){return function(Q){if(y.has.call(Q,X)&&Q[X]===$)return Q;var Y=Object.assign({},Q);return Y[X]=$,Y}};z.upsertAt=d2;var n2=function(X,$){return y.has.call($,X)};z.has=n2;z.deleteAt=jz;var f2=function(X,$){return function(Q){if(!(0,z.has)(X,Q))return y.none;if(Q[X]===$)return y.some(Q);var Y=Object.assign({},Q);return Y[X]=$,y.some(Y)}};z.updateAt=f2;var p2=function(X,$){return function(Q){if(!(0,z.has)(X,Q))return y.none;var Y=$(Q[X]);if(Y===Q[X])return y.some(Q);var J=Object.assign({},Q);return J[X]=Y,y.some(J)}};z.modifyAt=p2;z.pop=o2;z.isSubrecord=N$;z.lookup=T$;z.empty={};z.mapWithIndex=v$;z.map=Pz;z.reduceWithIndex=XX;z.foldMapWithIndex=$X;z.reduceRightWithIndex=QX;var i2=function(X,$){var Q;return Q={},Q[X]=$,Q};z.singleton=i2;z.traverseWithIndex=r2;z.traverse=A$;z.sequence=X7;var s2=function(X){var $=A$(X);return function(Q){return function(Y){return X.map((0,o.pipe)(Y,$(Q)),z.compact)}}};z.wither=s2;var t2=function(X){var $=A$(X);return function(Q){return function(Y){return X.map((0,o.pipe)(Y,$(Q)),z.separate)}}};z.wilt=t2;z.partitionMapWithIndex=R$;z.partitionWithIndex=S$;z.filterMapWithIndex=W$;z.filterWithIndex=E$;z.fromFoldable=a2;z.fromFoldableMap=zz;z.toEntries=z.toReadonlyArray;var e2=function(X){var $={};for(var Q=0,Y=X;Q<Y.length;Q++){var J=Y[Q];$[J[0]]=J[1]}return $};z.fromEntries=e2;z.every=XS;z.some=$S;z.elem=Gz;var QS=function(X){return function($){return function(Q){if((0,z.isEmpty)(Q))return $;if((0,z.isEmpty)($))return Q;var Y={};for(var J in Q)if((0,z.has)(J,$))Y[J]=X.concat(Q[J],$[J]);else Y[J]=Q[J];for(var J in $)if(!(0,z.has)(J,Y))Y[J]=$[J];return Y}}};z.union=QS;var YS=function(X){return function($){return function(Q){if((0,z.isEmpty)(Q)||(0,z.isEmpty)($))return z.empty;var Y={};for(var J in Q)if((0,z.has)(J,$))Y[J]=X.concat(Q[J],$[J]);return Y}}};z.intersection=YS;var JS=function(X){return function($){if((0,z.isEmpty)($))return X;if((0,z.isEmpty)(X))return $;var Q={};for(var Y in $)if(!(0,z.has)(Y,X))Q[Y]=$[Y];for(var Y in X)if(!(0,z.has)(Y,$))Q[Y]=X[Y];return Q}};z.difference=JS;var ZS=function(X,$){return(0,o.pipe)(X,Pz($))};z._map=ZS;var HS=function(X,$){return(0,o.pipe)(X,v$($))};z._mapWithIndex=HS;var jS=function(X){var $=O$(X);return function(Q,Y,J){return(0,o.pipe)(Q,$(Y,J))}};z._reduce=jS;var PS=function(X){return function($){var Q=M$(X)($);return function(Y,J){return(0,o.pipe)(Y,Q(J))}}};z._foldMap=PS;var zS=function(X){var $=g$(X);return function(Q,Y,J){return(0,o.pipe)(Q,$(Y,J))}};z._reduceRight=zS;var GS=function(X,$){return(0,o.pipe)(X,(0,z.filter)($))};z._filter=GS;var VS=function(X,$){return(0,o.pipe)(X,(0,z.filterMap)($))};z._filterMap=VS;var DS=function(X,$){return(0,o.pipe)(X,(0,z.partition)($))};z._partition=DS;var qS=function(X,$){return(0,o.pipe)(X,(0,z.partitionMap)($))};z._partitionMap=qS;var KS=function(X){var $=XX(X);return function(Q,Y,J){return(0,o.pipe)(Q,$(Y,J))}};z._reduceWithIndex=KS;var BS=function(X){var $=$X(X);return function(Q){var Y=$(Q);return function(J,Z){return(0,o.pipe)(J,Y(Z))}}};z._foldMapWithIndex=BS;var LS=function(X){var $=QX(X);return function(Q,Y,J){return(0,o.pipe)(Q,$(Y,J))}};z._reduceRightWithIndex=LS;var wS=function(X,$){return(0,o.pipe)(X,R$($))};z._partitionMapWithIndex=wS;var US=function(X,$){return(0,o.pipe)(X,S$($))};z._partitionWithIndex=US;var CS=function(X,$){return(0,o.pipe)(X,W$($))};z._filterMapWithIndex=CS;var NS=function(X,$){return(0,o.pipe)(X,E$($))};z._filterWithIndex=NS;var TS=function(X){var $=$7(X);return function(Q){var Y=$(Q);return function(J,Z){return Y(J,(0,o.flow)(o.SK,Z))}}};z._traverse=TS;var vS=function(X){var $=(0,z._traverse)(X);return function(Q){var Y=$(Q);return function(J){return Y(J,o.identity)}}};z._sequence=vS;var $7=function(X){return function($){var Q=n5(X);return function(Y,J){var Z=Q(Y);if(Z.length===0)return $.of(z.empty);var V=$.of({}),D=function(K0){V=$.ap($.map(V,function(O0){return function(S1){var p0;return Object.assign({},O0,(p0={},p0[K0]=S1,p0))}}),J(K0,Y[K0]))};for(var L=0,B=Z;L<B.length;L++){var R=B[L];D(R)}return V}}},AS=function(X){return E$(function($,Q){return X(Q)})};z.filter=AS;var RS=function(X){return W$(function($,Q){return X(Q)})};z.filterMap=RS;var SS=function(X){return S$(function($,Q){return X(Q)})};z.partition=SS;var WS=function(X){return R$(function($,Q){return X(Q)})};z.partitionMap=WS;z.reduce=O$;z.foldMap=M$;z.reduceRight=g$;var ES=function(X){var $={};for(var Q in X)if(y.has.call(X,Q)){var Y=X[Q];if(y.isSome(Y))$[Q]=Y.value}return $};z.compact=ES;var OS=function(X){var $={},Q={};for(var Y in X)if(y.has.call(X,Y)){var J=X[Y];if(y.isLeft(J))$[Y]=J.left;else Q[Y]=J.right}return(0,C$.separated)($,Q)};z.separate=OS;z.URI="ReadonlyRecord";z.getShow=Vz;z.getEq=MS;z.getMonoid=gS;z.Functor={URI:z.URI,map:z._map};z.flap=(0,k2.flap)(z.Functor);z.FunctorWithIndex={URI:z.URI,map:z._map,mapWithIndex:z._mapWithIndex};var FS=function(X){return{URI:z.URI,reduce:(0,z._reduce)(X),foldMap:(0,z._foldMap)(X),reduceRight:(0,z._reduceRight)(X)}};z.getFoldable=FS;var IS=function(X){return{URI:z.URI,reduce:(0,z._reduce)(X),foldMap:(0,z._foldMap)(X),reduceRight:(0,z._reduceRight)(X),reduceWithIndex:(0,z._reduceWithIndex)(X),foldMapWithIndex:(0,z._foldMapWithIndex)(X),reduceRightWithIndex:(0,z._reduceRightWithIndex)(X)}};z.getFoldableWithIndex=IS;z.Compactable={URI:z.URI,compact:z.compact,separate:z.separate};z.Filterable={URI:z.URI,map:z._map,compact:z.compact,separate:z.separate,filter:z._filter,filterMap:z._filterMap,partition:z._partition,partitionMap:z._partitionMap};z.FilterableWithIndex={URI:z.URI,map:z._map,mapWithIndex:z._mapWithIndex,compact:z.compact,separate:z.separate,filter:z._filter,filterMap:z._filterMap,partition:z._partition,partitionMap:z._partitionMap,filterMapWithIndex:z._filterMapWithIndex,filterWithIndex:z._filterWithIndex,partitionMapWithIndex:z._partitionMapWithIndex,partitionWithIndex:z._partitionWithIndex};var yS=function(X){return{URI:z.URI,map:z._map,reduce:(0,z._reduce)(X),foldMap:(0,z._foldMap)(X),reduceRight:(0,z._reduceRight)(X),traverse:(0,z._traverse)(X),sequence:(0,z._sequence)(X)}};z.getTraversable=yS;var bS=function(X){return{URI:z.URI,map:z._map,mapWithIndex:z._mapWithIndex,reduce:(0,z._reduce)(X),foldMap:(0,z._foldMap)(X),reduceRight:(0,z._reduceRight)(X),reduceWithIndex:(0,z._reduceWithIndex)(X),foldMapWithIndex:(0,z._foldMapWithIndex)(X),reduceRightWithIndex:(0,z._reduceRightWithIndex)(X),traverse:(0,z._traverse)(X),sequence:(0,z._sequence)(X),traverseWithIndex:$7(X)}};z.getTraversableWithIndex=bS;var hS=function(X){var $=(0,z.getTraversable)(X);return{URI:z.URI,map:z._map,reduce:(0,z._reduce)(X),foldMap:(0,z._foldMap)(X),reduceRight:(0,z._reduceRight)(X),traverse:$.traverse,sequence:$.sequence,compact:z.compact,separate:z.separate,filter:z._filter,filterMap:z._filterMap,partition:z._partition,partitionMap:z._partitionMap,wither:(0,a9.witherDefault)($,z.Compactable),wilt:(0,a9.wiltDefault)($,z.Compactable)}};z.getWitherable=hS;var uS=function(X){var $=(0,z.union)(X);return{concat:function(Q,Y){return $(Y)(Q)}}};z.getUnionSemigroup=uS;var kS=function(X){return{concat:(0,z.getUnionSemigroup)(X).concat,empty:z.empty}};z.getUnionMonoid=kS;var lS=function(X){var $=(0,z.intersection)(X);return{concat:function(Q,Y){return $(Y)(Q)}}};z.getIntersectionSemigroup=lS;var mS=function(){return{concat:function(X,$){return(0,z.difference)($)(X)}}};z.getDifferenceMagma=mS;z.Foldable={URI:z.URI,reduce:(0,z._reduce)(T.Ord),foldMap:(0,z._foldMap)(T.Ord),reduceRight:(0,z._reduceRight)(T.Ord)};z.FoldableWithIndex={URI:z.URI,reduce:(0,z._reduce)(T.Ord),foldMap:(0,z._foldMap)(T.Ord),reduceRight:(0,z._reduceRight)(T.Ord),reduceWithIndex:(0,z._reduceWithIndex)(T.Ord),foldMapWithIndex:(0,z._foldMapWithIndex)(T.Ord),reduceRightWithIndex:(0,z._reduceRightWithIndex)(T.Ord)};z.Traversable={URI:z.URI,map:z._map,reduce:(0,z._reduce)(T.Ord),foldMap:(0,z._foldMap)(T.Ord),reduceRight:(0,z._reduceRight)(T.Ord),traverse:(0,z._traverse)(T.Ord),sequence:X7};z.TraversableWithIndex={URI:z.URI,map:z._map,mapWithIndex:z._mapWithIndex,reduce:(0,z._reduce)(T.Ord),foldMap:(0,z._foldMap)(T.Ord),reduceRight:(0,z._reduceRight)(T.Ord),reduceWithIndex:(0,z._reduceWithIndex)(T.Ord),foldMapWithIndex:(0,z._foldMapWithIndex)(T.Ord),reduceRightWithIndex:(0,z._reduceRightWithIndex)(T.Ord),traverse:(0,z._traverse)(T.Ord),sequence:X7,traverseWithIndex:$7(T.Ord)};var Dz=(0,a9.witherDefault)(z.Traversable,z.Compactable),qz=(0,a9.wiltDefault)(z.Traversable,z.Compactable);z.Witherable={URI:z.URI,map:z._map,reduce:(0,z._reduce)(T.Ord),foldMap:(0,z._foldMap)(T.Ord),reduceRight:(0,z._reduceRight)(T.Ord),traverse:(0,z._traverse)(T.Ord),sequence:X7,compact:z.compact,separate:z.separate,filter:z._filter,filterMap:z._filterMap,partition:z._partition,partitionMap:z._partitionMap,wither:Dz,wilt:qz};z.insertAt=z.upsertAt;z.hasOwnProperty=cS;z.readonlyRecord={URI:z.URI,map:z._map,reduce:(0,z._reduce)(T.Ord),foldMap:(0,z._foldMap)(T.Ord),reduceRight:(0,z._reduceRight)(T.Ord),traverse:(0,z._traverse)(T.Ord),sequence:X7,compact:z.compact,separate:z.separate,filter:z._filter,filterMap:z._filterMap,partition:z._partition,partitionMap:z._partitionMap,mapWithIndex:z._mapWithIndex,reduceWithIndex:(0,z._reduceWithIndex)(T.Ord),foldMapWithIndex:(0,z._foldMapWithIndex)(T.Ord),reduceRightWithIndex:(0,z._reduceRightWithIndex)(T.Ord),filterMapWithIndex:z._filterMapWithIndex,filterWithIndex:z._filterWithIndex,partitionMapWithIndex:z._partitionMapWithIndex,partitionWithIndex:z._partitionWithIndex,traverseWithIndex:$7(T.Ord),wither:Dz,wilt:qz}});var I$=v((Bz)=>{var dS=function(X){var $=(0,Kz.getApplySemigroup)(X);return function(Q){return{concat:$(Q).concat,empty:X.of(Q.empty)}}},nS=function(X,$){var Q=(0,xS.getFunctorComposition)(X,$).map,Y=(0,Kz.ap)(X,$);return{map:Q,of:function(J){return X.of($.of(J))},ap:function(J,Z){return(0,_S.pipe)(J,Y(Z))}}};Object.defineProperty(Bz,"__esModule",{value:!0});Bz.getApplicativeComposition=Bz.getApplicativeMonoid=void 0;var Kz=Y5(),_S=F(),xS=v1();Bz.getApplicativeMonoid=dS;Bz.getApplicativeComposition=nS});var Az=v((wz)=>{Object.defineProperty(wz,"__esModule",{value:!0});wz.and=wz.or=wz.not=wz.Contravariant=wz.getMonoidAll=wz.getSemigroupAll=wz.getMonoidAny=wz.getSemigroupAny=wz.URI=wz.contramap=void 0;var f5=F(),pS=function(X,$){return(0,f5.pipe)(X,(0,wz.contramap)($))},oS=function(X){return function($){return(0,f5.flow)(X,$)}};wz.contramap=oS;wz.URI="Predicate";var iS=function(){return{concat:function(X,$){return(0,f5.pipe)(X,(0,wz.or)($))}}};wz.getSemigroupAny=iS;var rS=function(){return{concat:(0,wz.getSemigroupAny)().concat,empty:f5.constFalse}};wz.getMonoidAny=rS;var sS=function(){return{concat:function(X,$){return(0,f5.pipe)(X,(0,wz.and)($))}}};wz.getSemigroupAll=sS;var tS=function(){return{concat:(0,wz.getSemigroupAll)().concat,empty:f5.constTrue}};wz.getMonoidAll=tS;wz.Contravariant={URI:wz.URI,contramap:pS};var aS=function(X){return function($){return!X($)}};wz.not=aS;var eS=function(X){return function($){return function(Q){return $(Q)||X(Q)}}};wz.or=eS;var XW=function(X){return function($){return function(Q){return $(Q)&&X(Q)}}};wz.and=XW});var d$=v((P)=>{var GW=function(X){return function($){return X($)?(0,P.some)($):P.none}},Mz=function(X){return function($,Q){if(Q===void 0){var Y=Mz(X);return function(J){return Y($,J)}}return(0,P.isNone)(Q)?!1:X.equals($,Q.value)}},iW=function(X){return function($){return(0,P.isSome)(X($))}},ZW=P&&P.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),HW=P&&P.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),Rz=P&&P.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))ZW($,X,Q)}return HW($,X),$};Object.defineProperty(P,"__esModule",{value:!0});P.Witherable=P.wilt=P.wither=P.Traversable=P.sequence=P.traverse=P.Filterable=P.partitionMap=P.partition=P.filterMap=P.filter=P.Compactable=P.separate=P.compact=P.Extend=P.extend=P.Alternative=P.guard=P.Zero=P.zero=P.Alt=P.alt=P.altW=P.orElse=P.Foldable=P.reduceRight=P.foldMap=P.reduce=P.Monad=P.Chain=P.flatMap=P.Applicative=P.Apply=P.ap=P.Pointed=P.of=P.asUnit=P.as=P.Functor=P.map=P.getMonoid=P.getOrd=P.getEq=P.getShow=P.URI=P.getRight=P.getLeft=P.fromPredicate=P.some=P.none=void 0;P.getFirstMonoid=P.getApplyMonoid=P.getApplySemigroup=P.option=P.mapNullable=P.getRefinement=P.chainFirst=P.chain=P.sequenceArray=P.traverseArray=P.traverseArrayWithIndex=P.traverseReadonlyArrayWithIndex=P.traverseReadonlyNonEmptyArrayWithIndex=P.ApT=P.apS=P.bind=P.let=P.bindTo=P.Do=P.exists=P.elem=P.toUndefined=P.toNullable=P.chainNullableK=P.fromNullableK=P.tryCatchK=P.tryCatch=P.fromNullable=P.chainFirstEitherK=P.chainEitherK=P.fromEitherK=P.duplicate=P.tapEither=P.tap=P.flatten=P.apSecond=P.apFirst=P.flap=P.getOrElse=P.getOrElseW=P.fold=P.match=P.foldW=P.matchW=P.isNone=P.isSome=P.FromEither=P.fromEither=P.MonadThrow=P.throwError=void 0;P.getLastMonoid=void 0;var jW=I$(),YX=Y5(),Sz=Rz(J5()),b$=m9(),l=F(),Y7=v1(),j5=Rz(J1()),PW=Az(),Wz=p8(),h$=a4(),Ez=e4(),zW=Y$();P.none=j5.none;P.some=j5.some;P.fromPredicate=GW;var VW=function(X){return X._tag==="Right"?P.none:(0,P.some)(X.left)};P.getLeft=VW;var DW=function(X){return X._tag==="Left"?P.none:(0,P.some)(X.right)};P.getRight=DW;var C0=function(X,$){return(0,l.pipe)(X,(0,P.map)($))},P5=function(X,$){return(0,l.pipe)(X,(0,P.ap)($))},JX=function(X,$,Q){return(0,l.pipe)(X,(0,P.reduce)($,Q))},ZX=function(X){var $=(0,P.foldMap)(X);return function(Q,Y){return(0,l.pipe)(Q,$(Y))}},HX=function(X,$,Q){return(0,l.pipe)(X,(0,P.reduceRight)($,Q))},u$=function(X){var $=(0,P.traverse)(X);return function(Q,Y){return(0,l.pipe)(Q,$(Y))}},k$=function(X,$){return(0,l.pipe)(X,(0,P.alt)($))},Q7=function(X,$){return(0,l.pipe)(X,(0,P.filter)($))},l$=function(X,$){return(0,l.pipe)(X,(0,P.filterMap)($))},Oz=function(X,$){return(0,l.pipe)(X,(0,P.extend)($))},m$=function(X,$){return(0,l.pipe)(X,(0,P.partition)($))},c$=function(X,$){return(0,l.pipe)(X,(0,P.partitionMap)($))};P.URI="Option";var qW=function(X){return{show:function($){return(0,P.isNone)($)?"none":"some(".concat(X.show($.value),")")}}};P.getShow=qW;var KW=function(X){return{equals:function($,Q){return $===Q||((0,P.isNone)($)?(0,P.isNone)(Q):(0,P.isNone)(Q)?!1:X.equals($.value,Q.value))}}};P.getEq=KW;var BW=function(X){return{equals:(0,P.getEq)(X).equals,compare:function($,Q){return $===Q?0:(0,P.isSome)($)?(0,P.isSome)(Q)?X.compare($.value,Q.value):1:-1}}};P.getOrd=BW;var LW=function(X){return{concat:function($,Q){return(0,P.isNone)($)?Q:(0,P.isNone)(Q)?$:(0,P.some)(X.concat($.value,Q.value))},empty:P.none}};P.getMonoid=LW;var wW=function(X){return function($){return(0,P.isNone)($)?P.none:(0,P.some)(X($.value))}};P.map=wW;P.Functor={URI:P.URI,map:C0};P.as=(0,l.dual)(2,(0,Y7.as)(P.Functor));P.asUnit=(0,Y7.asUnit)(P.Functor);P.of=P.some;P.Pointed={URI:P.URI,of:P.of};var UW=function(X){return function($){return(0,P.isNone)($)?P.none:(0,P.isNone)(X)?P.none:(0,P.some)($.value(X.value))}};P.ap=UW;P.Apply={URI:P.URI,map:C0,ap:P5};P.Applicative={URI:P.URI,map:C0,ap:P5,of:P.of};P.flatMap=(0,l.dual)(2,function(X,$){return(0,P.isNone)(X)?P.none:$(X.value)});P.Chain={URI:P.URI,map:C0,ap:P5,chain:P.flatMap};P.Monad={URI:P.URI,map:C0,ap:P5,of:P.of,chain:P.flatMap};var CW=function(X,$){return function(Q){return(0,P.isNone)(Q)?X:$(X,Q.value)}};P.reduce=CW;var NW=function(X){return function($){return function(Q){return(0,P.isNone)(Q)?X.empty:$(Q.value)}}};P.foldMap=NW;var TW=function(X,$){return function(Q){return(0,P.isNone)(Q)?X:$(Q.value,X)}};P.reduceRight=TW;P.Foldable={URI:P.URI,reduce:JX,foldMap:ZX,reduceRight:HX};P.orElse=(0,l.dual)(2,function(X,$){return(0,P.isNone)(X)?$():X});P.altW=P.orElse;P.alt=P.orElse;P.Alt={URI:P.URI,map:C0,alt:k$};var vW=function(){return P.none};P.zero=vW;P.Zero={URI:P.URI,zero:P.zero};P.guard=(0,zW.guard)(P.Zero,P.Pointed);P.Alternative={URI:P.URI,map:C0,ap:P5,of:P.of,alt:k$,zero:P.zero};var AW=function(X){return function($){return(0,P.isNone)($)?P.none:(0,P.some)(X($))}};P.extend=AW;P.Extend={URI:P.URI,map:C0,extend:Oz};P.compact=(0,P.flatMap)(l.identity);var RW=(0,h$.separated)(P.none,P.none),SW=function(X){return(0,P.isNone)(X)?RW:(0,h$.separated)((0,P.getLeft)(X.value),(0,P.getRight)(X.value))};P.separate=SW;P.Compactable={URI:P.URI,compact:P.compact,separate:P.separate};var WW=function(X){return function($){return(0,P.isNone)($)?P.none:X($.value)?$:P.none}};P.filter=WW;var EW=function(X){return function($){return(0,P.isNone)($)?P.none:X($.value)}};P.filterMap=EW;var OW=function(X){return function($){return(0,h$.separated)(Q7($,(0,PW.not)(X)),Q7($,X))}};P.partition=OW;var MW=function(X){return(0,l.flow)((0,P.map)(X),P.separate)};P.partitionMap=MW;P.Filterable={URI:P.URI,map:C0,compact:P.compact,separate:P.separate,filter:Q7,filterMap:l$,partition:m$,partitionMap:c$};var gW=function(X){return function($){return function(Q){return(0,P.isNone)(Q)?X.of(P.none):X.map($(Q.value),P.some)}}};P.traverse=gW;var FW=function(X){return function($){return(0,P.isNone)($)?X.of(P.none):X.map($.value,P.some)}};P.sequence=FW;P.Traversable={URI:P.URI,map:C0,reduce:JX,foldMap:ZX,reduceRight:HX,traverse:u$,sequence:P.sequence};var _$=(0,Ez.witherDefault)(P.Traversable,P.Compactable),x$=(0,Ez.wiltDefault)(P.Traversable,P.Compactable),IW=function(X){var $=_$(X);return function(Q){return function(Y){return $(Y,Q)}}};P.wither=IW;var yW=function(X){var $=x$(X);return function(Q){return function(Y){return $(Y,Q)}}};P.wilt=yW;P.Witherable={URI:P.URI,map:C0,reduce:JX,foldMap:ZX,reduceRight:HX,traverse:u$,sequence:P.sequence,compact:P.compact,separate:P.separate,filter:Q7,filterMap:l$,partition:m$,partitionMap:c$,wither:_$,wilt:x$};var bW=function(){return P.none};P.throwError=bW;P.MonadThrow={URI:P.URI,map:C0,ap:P5,of:P.of,chain:P.flatMap,throwError:P.throwError};P.fromEither=P.getRight;P.FromEither={URI:P.URI,fromEither:P.fromEither};P.isSome=j5.isSome;var hW=function(X){return X._tag==="None"};P.isNone=hW;var uW=function(X,$){return function(Q){return(0,P.isNone)(Q)?X():$(Q.value)}};P.matchW=uW;P.foldW=P.matchW;P.match=P.matchW;P.fold=P.match;var kW=function(X){return function($){return(0,P.isNone)($)?X():$.value}};P.getOrElseW=kW;P.getOrElse=P.getOrElseW;P.flap=(0,Y7.flap)(P.Functor);P.apFirst=(0,YX.apFirst)(P.Apply);P.apSecond=(0,YX.apSecond)(P.Apply);P.flatten=P.compact;P.tap=(0,l.dual)(2,Sz.tap(P.Chain));P.tapEither=(0,l.dual)(2,(0,b$.tapEither)(P.FromEither,P.Chain));P.duplicate=(0,P.extend)(l.identity);P.fromEitherK=(0,b$.fromEitherK)(P.FromEither);P.chainEitherK=(0,b$.chainEitherK)(P.FromEither,P.Chain);P.chainFirstEitherK=P.tapEither;var lW=function(X){return X==null?P.none:(0,P.some)(X)};P.fromNullable=lW;var mW=function(X){try{return(0,P.some)(X())}catch($){return P.none}};P.tryCatch=mW;var cW=function(X){return function(){var $=[];for(var Q=0;Q<arguments.length;Q++)$[Q]=arguments[Q];return(0,P.tryCatch)(function(){return X.apply(void 0,$)})}};P.tryCatchK=cW;var _W=function(X){return(0,l.flow)(X,P.fromNullable)};P.fromNullableK=_W;var xW=function(X){return function($){return(0,P.isNone)($)?P.none:(0,P.fromNullable)(X($.value))}};P.chainNullableK=xW;P.toNullable=(0,P.match)(l.constNull,l.identity);P.toUndefined=(0,P.match)(l.constUndefined,l.identity);P.elem=Mz;var dW=function(X){return function($){return(0,P.isNone)($)?!1:X($.value)}};P.exists=dW;P.Do=(0,P.of)(j5.emptyRecord);P.bindTo=(0,Y7.bindTo)(P.Functor);var nW=(0,Y7.let)(P.Functor);P.let=nW;P.bind=Sz.bind(P.Chain);P.apS=(0,YX.apS)(P.Apply);P.ApT=(0,P.of)(j5.emptyReadonlyArray);var fW=function(X){return function($){var Q=X(0,j5.head($));if((0,P.isNone)(Q))return P.none;var Y=[Q.value];for(var J=1;J<$.length;J++){var Z=X(J,$[J]);if((0,P.isNone)(Z))return P.none;Y.push(Z.value)}return(0,P.some)(Y)}};P.traverseReadonlyNonEmptyArrayWithIndex=fW;var pW=function(X){var $=(0,P.traverseReadonlyNonEmptyArrayWithIndex)(X);return function(Q){return j5.isNonEmpty(Q)?$(Q):P.ApT}};P.traverseReadonlyArrayWithIndex=pW;P.traverseArrayWithIndex=P.traverseReadonlyArrayWithIndex;var oW=function(X){return(0,P.traverseReadonlyArrayWithIndex)(function($,Q){return X(Q)})};P.traverseArray=oW;P.sequenceArray=(0,P.traverseArray)(l.identity);P.chain=P.flatMap;P.chainFirst=P.tap;P.getRefinement=iW;P.mapNullable=P.chainNullableK;P.option={URI:P.URI,map:C0,of:P.of,ap:P5,chain:P.flatMap,reduce:JX,foldMap:ZX,reduceRight:HX,traverse:u$,sequence:P.sequence,zero:P.zero,alt:k$,extend:Oz,compact:P.compact,separate:P.separate,filter:Q7,filterMap:l$,partition:m$,partitionMap:c$,wither:_$,wilt:x$,throwError:P.throwError};P.getApplySemigroup=(0,YX.getApplySemigroup)(P.Apply);P.getApplyMonoid=(0,jW.getApplicativeMonoid)(P.Applicative);var rW=function(){return(0,P.getMonoid)((0,Wz.first)())};P.getFirstMonoid=rW;var sW=function(){return(0,P.getMonoid)((0,Wz.last)())};P.getLastMonoid=sW});var Iz=v((gz)=>{Object.defineProperty(gz,"__esModule",{value:!0});gz.tailRec=void 0;var tW=function(X,$){var Q=$(X);while(Q._tag==="Left")Q=$(Q.left);return Q.right};gz.tailRec=tW});var cz=v((j)=>{var ME=function(X){return X instanceof Error?X:new Error(String(X))},mz=function(X){return function($,Q){if(Q===void 0){var Y=mz(X);return function(J){return Y($,J)}}return(0,j.isLeft)(Q)?!1:X.equals($,Q.right)}},hE=function(X,$){return(0,j.tryCatch)(function(){return JSON.parse(X)},$)},mE=function(X){var $=(0,j.getApplicativeValidation)(X).ap,Q=(0,j.getAltValidation)(X).alt;return{URI:j.URI,_E:void 0,map:j0,of:j.of,chain:j.flatMap,bimap:n$,mapLeft:f$,reduce:j7,foldMap:P7,reduceRight:z7,extend:p$,traverse:jX,sequence:j.sequence,chainRec:o$,throwError:j.throwError,ap:$,alt:Q}},aW=j&&j.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),eW=j&&j.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),bz=j&&j.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))aW($,X,Q)}return eW($,X),$};Object.defineProperty(j,"__esModule",{value:!0});j.match=j.foldW=j.matchW=j.isRight=j.isLeft=j.fromOption=j.fromPredicate=j.FromEither=j.MonadThrow=j.throwError=j.ChainRec=j.Extend=j.extend=j.Alt=j.alt=j.altW=j.Bifunctor=j.mapLeft=j.bimap=j.Traversable=j.sequence=j.traverse=j.Foldable=j.reduceRight=j.foldMap=j.reduce=j.Monad=j.Chain=j.Applicative=j.Apply=j.ap=j.apW=j.Pointed=j.of=j.asUnit=j.as=j.Functor=j.map=j.getAltValidation=j.getApplicativeValidation=j.getWitherable=j.getFilterable=j.getCompactable=j.getSemigroup=j.getEq=j.getShow=j.URI=j.flatMap=j.right=j.left=void 0;j.chainFirstW=j.chainFirst=j.chain=j.chainW=j.sequenceArray=j.traverseArray=j.traverseArrayWithIndex=j.traverseReadonlyArrayWithIndex=j.traverseReadonlyNonEmptyArrayWithIndex=j.ApT=j.apSW=j.apS=j.bindW=j.bind=j.let=j.bindTo=j.Do=j.exists=j.elem=j.toError=j.toUnion=j.chainNullableK=j.fromNullableK=j.tryCatchK=j.tryCatch=j.fromNullable=j.orElse=j.orElseW=j.swap=j.filterOrElseW=j.filterOrElse=j.flatMapOption=j.flatMapNullable=j.liftOption=j.liftNullable=j.chainOptionKW=j.chainOptionK=j.fromOptionK=j.duplicate=j.flatten=j.flattenW=j.tap=j.apSecondW=j.apSecond=j.apFirstW=j.apFirst=j.flap=j.getOrElse=j.getOrElseW=j.fold=void 0;j.getValidation=j.getValidationMonoid=j.getValidationSemigroup=j.getApplyMonoid=j.getApplySemigroup=j.either=j.stringifyJSON=j.parseJSON=void 0;var hz=I$(),J7=Y5(),uz=bz(J5()),XE=Iz(),Z7=m9(),t=F(),H7=v1(),R0=bz(J1()),A1=a4(),yz=e4();j.left=R0.left;j.right=R0.right;j.flatMap=(0,t.dual)(2,function(X,$){return(0,j.isLeft)(X)?X:$(X.right)});var j0=function(X,$){return(0,t.pipe)(X,(0,j.map)($))},z5=function(X,$){return(0,t.pipe)(X,(0,j.ap)($))},j7=function(X,$,Q){return(0,t.pipe)(X,(0,j.reduce)($,Q))},P7=function(X){return function($,Q){var Y=(0,j.foldMap)(X);return(0,t.pipe)($,Y(Q))}},z7=function(X,$,Q){return(0,t.pipe)(X,(0,j.reduceRight)($,Q))},jX=function(X){var $=(0,j.traverse)(X);return function(Q,Y){return(0,t.pipe)(Q,$(Y))}},n$=function(X,$,Q){return(0,t.pipe)(X,(0,j.bimap)($,Q))},f$=function(X,$){return(0,t.pipe)(X,(0,j.mapLeft)($))},kz=function(X,$){return(0,t.pipe)(X,(0,j.alt)($))},p$=function(X,$){return(0,t.pipe)(X,(0,j.extend)($))},o$=function(X,$){return(0,XE.tailRec)($(X),function(Q){return(0,j.isLeft)(Q)?(0,j.right)((0,j.left)(Q.left)):(0,j.isLeft)(Q.right)?(0,j.left)($(Q.right.left)):(0,j.right)((0,j.right)(Q.right.right))})};j.URI="Either";var $E=function(X,$){return{show:function(Q){return(0,j.isLeft)(Q)?"left(".concat(X.show(Q.left),")"):"right(".concat($.show(Q.right),")")}}};j.getShow=$E;var QE=function(X,$){return{equals:function(Q,Y){return Q===Y||((0,j.isLeft)(Q)?(0,j.isLeft)(Y)&&X.equals(Q.left,Y.left):(0,j.isRight)(Y)&&$.equals(Q.right,Y.right))}}};j.getEq=QE;var YE=function(X){return{concat:function($,Q){return(0,j.isLeft)(Q)?$:(0,j.isLeft)($)?Q:(0,j.right)(X.concat($.right,Q.right))}}};j.getSemigroup=YE;var JE=function(X){var $=(0,j.left)(X.empty);return{URI:j.URI,_E:void 0,compact:function(Q){return(0,j.isLeft)(Q)?Q:Q.right._tag==="None"?$:(0,j.right)(Q.right.value)},separate:function(Q){return(0,j.isLeft)(Q)?(0,A1.separated)(Q,Q):(0,j.isLeft)(Q.right)?(0,A1.separated)((0,j.right)(Q.right.left),$):(0,A1.separated)($,(0,j.right)(Q.right.right))}}};j.getCompactable=JE;var ZE=function(X){var $=(0,j.left)(X.empty),Q=(0,j.getCompactable)(X),Y=Q.compact,J=Q.separate,Z=function(D,L){return(0,j.isLeft)(D)?D:L(D.right)?D:$},V=function(D,L){return(0,j.isLeft)(D)?(0,A1.separated)(D,D):L(D.right)?(0,A1.separated)($,(0,j.right)(D.right)):(0,A1.separated)((0,j.right)(D.right),$)};return{URI:j.URI,_E:void 0,map:j0,compact:Y,separate:J,filter:Z,filterMap:function(D,L){if((0,j.isLeft)(D))return D;var B=L(D.right);return B._tag==="None"?$:(0,j.right)(B.value)},partition:V,partitionMap:function(D,L){if((0,j.isLeft)(D))return(0,A1.separated)(D,D);var B=L(D.right);return(0,j.isLeft)(B)?(0,A1.separated)((0,j.right)(B.left),$):(0,A1.separated)($,(0,j.right)(B.right))}}};j.getFilterable=ZE;var HE=function(X){var $=(0,j.getFilterable)(X),Q=(0,j.getCompactable)(X);return{URI:j.URI,_E:void 0,map:j0,compact:$.compact,separate:$.separate,filter:$.filter,filterMap:$.filterMap,partition:$.partition,partitionMap:$.partitionMap,traverse:jX,sequence:j.sequence,reduce:j7,foldMap:P7,reduceRight:z7,wither:(0,yz.witherDefault)(j.Traversable,Q),wilt:(0,yz.wiltDefault)(j.Traversable,Q)}};j.getWitherable=HE;var jE=function(X){return{URI:j.URI,_E:void 0,map:j0,ap:function($,Q){return(0,j.isLeft)($)?(0,j.isLeft)(Q)?(0,j.left)(X.concat($.left,Q.left)):$:(0,j.isLeft)(Q)?Q:(0,j.right)($.right(Q.right))},of:j.of}};j.getApplicativeValidation=jE;var PE=function(X){return{URI:j.URI,_E:void 0,map:j0,alt:function($,Q){if((0,j.isRight)($))return $;var Y=Q();return(0,j.isLeft)(Y)?(0,j.left)(X.concat($.left,Y.left)):Y}}};j.getAltValidation=PE;var zE=function(X){return function($){return(0,j.isLeft)($)?$:(0,j.right)(X($.right))}};j.map=zE;j.Functor={URI:j.URI,map:j0};j.as=(0,t.dual)(2,(0,H7.as)(j.Functor));j.asUnit=(0,H7.asUnit)(j.Functor);j.of=j.right;j.Pointed={URI:j.URI,of:j.of};var GE=function(X){return function($){return(0,j.isLeft)($)?$:(0,j.isLeft)(X)?X:(0,j.right)($.right(X.right))}};j.apW=GE;j.ap=j.apW;j.Apply={URI:j.URI,map:j0,ap:z5};j.Applicative={URI:j.URI,map:j0,ap:z5,of:j.of};j.Chain={URI:j.URI,map:j0,ap:z5,chain:j.flatMap};j.Monad={URI:j.URI,map:j0,ap:z5,of:j.of,chain:j.flatMap};var VE=function(X,$){return function(Q){return(0,j.isLeft)(Q)?X:$(X,Q.right)}};j.reduce=VE;var DE=function(X){return function($){return function(Q){return(0,j.isLeft)(Q)?X.empty:$(Q.right)}}};j.foldMap=DE;var qE=function(X,$){return function(Q){return(0,j.isLeft)(Q)?X:$(Q.right,X)}};j.reduceRight=qE;j.Foldable={URI:j.URI,reduce:j7,foldMap:P7,reduceRight:z7};var KE=function(X){return function($){return function(Q){return(0,j.isLeft)(Q)?X.of((0,j.left)(Q.left)):X.map($(Q.right),j.right)}}};j.traverse=KE;var BE=function(X){return function($){return(0,j.isLeft)($)?X.of((0,j.left)($.left)):X.map($.right,j.right)}};j.sequence=BE;j.Traversable={URI:j.URI,map:j0,reduce:j7,foldMap:P7,reduceRight:z7,traverse:jX,sequence:j.sequence};var LE=function(X,$){return function(Q){return(0,j.isLeft)(Q)?(0,j.left)(X(Q.left)):(0,j.right)($(Q.right))}};j.bimap=LE;var wE=function(X){return function($){return(0,j.isLeft)($)?(0,j.left)(X($.left)):$}};j.mapLeft=wE;j.Bifunctor={URI:j.URI,bimap:n$,mapLeft:f$};var UE=function(X){return function($){return(0,j.isLeft)($)?X():$}};j.altW=UE;j.alt=j.altW;j.Alt={URI:j.URI,map:j0,alt:kz};var CE=function(X){return function($){return(0,j.isLeft)($)?$:(0,j.right)(X($))}};j.extend=CE;j.Extend={URI:j.URI,map:j0,extend:p$};j.ChainRec={URI:j.URI,map:j0,ap:z5,chain:j.flatMap,chainRec:o$};j.throwError=j.left;j.MonadThrow={URI:j.URI,map:j0,ap:z5,of:j.of,chain:j.flatMap,throwError:j.throwError};j.FromEither={URI:j.URI,fromEither:t.identity};j.fromPredicate=(0,Z7.fromPredicate)(j.FromEither);j.fromOption=(0,Z7.fromOption)(j.FromEither);j.isLeft=R0.isLeft;j.isRight=R0.isRight;var NE=function(X,$){return function(Q){return(0,j.isLeft)(Q)?X(Q.left):$(Q.right)}};j.matchW=NE;j.foldW=j.matchW;j.match=j.matchW;j.fold=j.match;var TE=function(X){return function($){return(0,j.isLeft)($)?X($.left):$.right}};j.getOrElseW=TE;j.getOrElse=j.getOrElseW;j.flap=(0,H7.flap)(j.Functor);j.apFirst=(0,J7.apFirst)(j.Apply);j.apFirstW=j.apFirst;j.apSecond=(0,J7.apSecond)(j.Apply);j.apSecondW=j.apSecond;j.tap=(0,t.dual)(2,uz.tap(j.Chain));j.flattenW=(0,j.flatMap)(t.identity);j.flatten=j.flattenW;j.duplicate=(0,j.extend)(t.identity);j.fromOptionK=(0,Z7.fromOptionK)(j.FromEither);j.chainOptionK=(0,Z7.chainOptionK)(j.FromEither,j.Chain);j.chainOptionKW=j.chainOptionK;var PX={fromEither:j.FromEither.fromEither};j.liftNullable=R0.liftNullable(PX);j.liftOption=R0.liftOption(PX);var lz={flatMap:j.flatMap};j.flatMapNullable=R0.flatMapNullable(PX,lz);j.flatMapOption=R0.flatMapOption(PX,lz);j.filterOrElse=(0,Z7.filterOrElse)(j.FromEither,j.Chain);j.filterOrElseW=j.filterOrElse;var vE=function(X){return(0,j.isLeft)(X)?(0,j.right)(X.left):(0,j.left)(X.right)};j.swap=vE;var AE=function(X){return function($){return(0,j.isLeft)($)?X($.left):$}};j.orElseW=AE;j.orElse=j.orElseW;var RE=function(X){return function($){return $==null?(0,j.left)(X):(0,j.right)($)}};j.fromNullable=RE;var SE=function(X,$){try{return(0,j.right)(X())}catch(Q){return(0,j.left)($(Q))}};j.tryCatch=SE;var WE=function(X,$){return function(){var Q=[];for(var Y=0;Y<arguments.length;Y++)Q[Y]=arguments[Y];return(0,j.tryCatch)(function(){return X.apply(void 0,Q)},$)}};j.tryCatchK=WE;var EE=function(X){var $=(0,j.fromNullable)(X);return function(Q){return(0,t.flow)(Q,$)}};j.fromNullableK=EE;var OE=function(X){var $=(0,j.fromNullableK)(X);return function(Q){return(0,j.flatMap)($(Q))}};j.chainNullableK=OE;j.toUnion=(0,j.foldW)(t.identity,t.identity);j.toError=ME;j.elem=mz;var gE=function(X){return function($){return(0,j.isLeft)($)?!1:X($.right)}};j.exists=gE;j.Do=(0,j.of)(R0.emptyRecord);j.bindTo=(0,H7.bindTo)(j.Functor);var FE=(0,H7.let)(j.Functor);j.let=FE;j.bind=uz.bind(j.Chain);j.bindW=j.bind;j.apS=(0,J7.apS)(j.Apply);j.apSW=j.apS;j.ApT=(0,j.of)(R0.emptyReadonlyArray);var IE=function(X){return function($){var Q=X(0,R0.head($));if((0,j.isLeft)(Q))return Q;var Y=[Q.right];for(var J=1;J<$.length;J++){var Z=X(J,$[J]);if((0,j.isLeft)(Z))return Z;Y.push(Z.right)}return(0,j.right)(Y)}};j.traverseReadonlyNonEmptyArrayWithIndex=IE;var yE=function(X){var $=(0,j.traverseReadonlyNonEmptyArrayWithIndex)(X);return function(Q){return R0.isNonEmpty(Q)?$(Q):j.ApT}};j.traverseReadonlyArrayWithIndex=yE;j.traverseArrayWithIndex=j.traverseReadonlyArrayWithIndex;var bE=function(X){return(0,j.traverseReadonlyArrayWithIndex)(function($,Q){return X(Q)})};j.traverseArray=bE;j.sequenceArray=(0,j.traverseArray)(t.identity);j.chainW=j.flatMap;j.chain=j.flatMap;j.chainFirst=j.tap;j.chainFirstW=j.tap;j.parseJSON=hE;var uE=function(X,$){return(0,j.tryCatch)(function(){var Q=JSON.stringify(X);if(typeof Q!=="string")throw new Error("Converting unsupported structure to JSON");return Q},$)};j.stringifyJSON=uE;j.either={URI:j.URI,map:j0,of:j.of,ap:z5,chain:j.flatMap,reduce:j7,foldMap:P7,reduceRight:z7,traverse:jX,sequence:j.sequence,bimap:n$,mapLeft:f$,alt:kz,extend:p$,chainRec:o$,throwError:j.throwError};j.getApplySemigroup=(0,J7.getApplySemigroup)(j.Apply);j.getApplyMonoid=(0,hz.getApplicativeMonoid)(j.Applicative);var kE=function(X,$){return(0,J7.getApplySemigroup)((0,j.getApplicativeValidation)(X))($)};j.getValidationSemigroup=kE;var lE=function(X,$){return(0,hz.getApplicativeMonoid)((0,j.getApplicativeValidation)(X))($)};j.getValidationMonoid=lE;j.getValidation=mE});var zX=v((q)=>{var xz=function(X){return function($){return(0,q.traversal)(function(Q){return function(Y){return $.modifyF(Q)(X.modifyF(Q)(Y))}})}},dz=function(X){return function(){return(0,q.traversal)(function($){var Q=WO($)?X.map:X.traverse($);return function(Y){return function(J){return Q(J,Y)}}})}},EO=function(X){return xz(dz(X)())},nz=function(){return(0,q.at)(function(X){return(0,q.lens)(function($){return p5.lookup(X,$)},d.fold(function(){return p5.deleteAt(X)},function($){return p5.insertAt(X,$)}))})},cE=q&&q.__spreadArray||function(X,$,Q){if(Q||arguments.length===2){for(var Y=0,J=$.length,Z;Y<J;Y++)if(Z||!(Y in $)){if(!Z)Z=Array.prototype.slice.call($,0,Y);Z[Y]=$[Y]}}return X.concat(Z||Array.prototype.slice.call($))};Object.defineProperty(q,"__esModule",{value:!0});q.atReadonlyRecord=q.at=q.indexReadonlyRecord=q.indexReadonlyNonEmptyArray=q.indexReadonlyArray=q.index=q.traversalTraverse=q.fromTraversable=q.ApplicativeIdentity=q.traversalComposeTraversal=q.traversal=q.optionalFindFirstNonEmpty=q.optionalFindFirst=q.optionalKey=q.optionalIndexNonEmpty=q.optionalIndex=q.optionalComposeOptional=q.optionalModify=q.optionalModifyOption=q.optionalAsTraversal=q.optional=q.prismLeft=q.prismRight=q.prismSome=q.prismFromPredicate=q.prismFromNullable=q.prismComposeLens=q.prismSet=q.prismModify=q.prismModifyOption=q.prismAsTraversal=q.prismAsOptional=q.prism=q.lensAtKey=q.lensComponent=q.lensProps=q.lensProp=q.lensId=q.lensComposePrism=q.prismComposePrism=q.lensComposeLens=q.lensAsTraversal=q.lensAsOptional=q.lens=q.isoAsTraversal=q.isoAsOptional=q.isoAsPrism=q.isoAsLens=q.iso=void 0;var Z1=t9(),p5=F$(),P0=F(),d=d$(),i$=cz(),w0=_4(),_E=function(X,$){return{get:X,reverseGet:$}};q.iso=_E;var xE=function(X){return(0,q.lens)(X.get,(0,P0.flow)(X.reverseGet,P0.constant))};q.isoAsLens=xE;var dE=function(X){return(0,q.prism)((0,P0.flow)(X.get,d.some),X.reverseGet)};q.isoAsPrism=dE;var nE=function(X){return(0,q.optional)((0,P0.flow)(X.get,d.some),(0,P0.flow)(X.reverseGet,P0.constant))};q.isoAsOptional=nE;var fE=function(X){return(0,q.traversal)(function($){return function(Q){return function(Y){return $.map(Q(X.get(Y)),function(J){return X.reverseGet(J)})}}})};q.isoAsTraversal=fE;var pE=function(X,$){return{get:X,set:$}};q.lens=pE;var oE=function(X){return(0,q.optional)((0,P0.flow)(X.get,d.some),X.set)};q.lensAsOptional=oE;var iE=function(X){return(0,q.traversal)(function($){return function(Q){return function(Y){return $.map(Q(X.get(Y)),function(J){return X.set(J)(Y)})}}})};q.lensAsTraversal=iE;var rE=function(X){return function($){return(0,q.lens)(function(Q){return X.get($.get(Q))},function(Q){return function(Y){return $.set(X.set(Q)($.get(Y)))(Y)}})}};q.lensComposeLens=rE;var sE=function(X){return function($){return(0,q.prism)((0,P0.flow)($.getOption,d.chain(X.getOption)),(0,P0.flow)(X.reverseGet,$.reverseGet))}};q.prismComposePrism=sE;var tE=function(X){return function($){return(0,q.optionalComposeOptional)((0,q.prismAsOptional)(X))((0,q.lensAsOptional)($))}};q.lensComposePrism=tE;var aE=function(){return(0,q.lens)(P0.identity,P0.constant)};q.lensId=aE;var eE=function(X){return function($){return(0,q.lens)(function(Q){return $.get(Q)[X]},function(Q){return function(Y){var J,Z=$.get(Y);if(Q===Z[X])return Y;return $.set(Object.assign({},Z,(J={},J[X]=Q,J)))(Y)}})}};q.lensProp=eE;var XO=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return function(Q){return(0,q.lens)(function(Y){var J=Q.get(Y),Z={};for(var V=0,D=X;V<D.length;V++){var L=D[V];Z[L]=J[L]}return Z},function(Y){return function(J){var Z=Q.get(J);for(var V=0,D=X;V<D.length;V++){var L=D[V];if(Y[L]!==Z[L])return Q.set(Object.assign({},Z,Y))(J)}return J}})}};q.lensProps=XO;var $O=function(X){return function($){return(0,q.lens)(function(Q){return $.get(Q)[X]},function(Q){return function(Y){var J=$.get(Y);if(Q===J[X])return Y;var Z=J.slice();return Z[X]=Q,$.set(Z)(Y)}})}};q.lensComponent=$O;var QO=function(X){return function($){return(0,w0.pipe)($,(0,q.lensComposeLens)(nz().at(X)))}};q.lensAtKey=QO;var YO=function(X,$){return{getOption:X,reverseGet:$}};q.prism=YO;var JO=function(X){return(0,q.optional)(X.getOption,function($){return(0,q.prismSet)($)(X)})};q.prismAsOptional=JO;var ZO=function(X){return(0,q.traversal)(function($){return function(Q){return function(Y){return(0,w0.pipe)(X.getOption(Y),d.fold(function(){return $.of(Y)},function(J){return $.map(Q(J),function(Z){return(0,q.prismSet)(Z)(X)(Y)})}))}}})};q.prismAsTraversal=ZO;var HO=function(X){return function($){return function(Q){return(0,w0.pipe)($.getOption(Q),d.map(function(Y){var J=X(Y);return J===Y?Q:$.reverseGet(J)}))}}};q.prismModifyOption=HO;var jO=function(X){return function($){var Q=(0,q.prismModifyOption)(X)($);return function(Y){return(0,w0.pipe)(Q(Y),d.getOrElse(function(){return Y}))}}};q.prismModify=jO;var PO=function(X){return(0,q.prismModify)(function(){return X})};q.prismSet=PO;var zO=function(X){return function($){return(0,q.optionalComposeOptional)((0,q.lensAsOptional)(X))((0,q.prismAsOptional)($))}};q.prismComposeLens=zO;var GO=function(){return(0,q.prism)(d.fromNullable,P0.identity)};q.prismFromNullable=GO;var VO=function(X){return(0,q.prism)(d.fromPredicate(X),P0.identity)};q.prismFromPredicate=VO;var DO=function(){return(0,q.prism)(P0.identity,d.some)};q.prismSome=DO;var qO=function(){return(0,q.prism)(d.fromEither,i$.right)};q.prismRight=qO;var KO=function(){return(0,q.prism)(function(X){return i$.isLeft(X)?d.some(X.left):d.none},i$.left)};q.prismLeft=KO;var BO=function(X,$){return{getOption:X,set:$}};q.optional=BO;var LO=function(X){return(0,q.traversal)(function($){return function(Q){return function(Y){return(0,w0.pipe)(X.getOption(Y),d.fold(function(){return $.of(Y)},function(J){return $.map(Q(J),function(Z){return X.set(Z)(Y)})}))}}})};q.optionalAsTraversal=LO;var wO=function(X){return function($){return function(Q){return(0,w0.pipe)($.getOption(Q),d.map(function(Y){var J=X(Y);return J===Y?Q:$.set(J)(Q)}))}}};q.optionalModifyOption=wO;var UO=function(X){return function($){var Q=(0,q.optionalModifyOption)(X)($);return function(Y){return(0,w0.pipe)(Q(Y),d.getOrElse(function(){return Y}))}}};q.optionalModify=UO;var CO=function(X){return function($){return(0,q.optional)((0,P0.flow)($.getOption,d.chain(X.getOption)),function(Q){return(0,q.optionalModify)(X.set(Q))($)})}};q.optionalComposeOptional=CO;var NO=function(X){return function($){return(0,w0.pipe)($,(0,q.optionalComposeOptional)((0,q.indexReadonlyArray)().index(X)))}};q.optionalIndex=NO;var TO=function(X){return function($){return(0,w0.pipe)($,(0,q.optionalComposeOptional)((0,q.indexReadonlyNonEmptyArray)().index(X)))}};q.optionalIndexNonEmpty=TO;var vO=function(X){return function($){return(0,w0.pipe)($,(0,q.optionalComposeOptional)((0,q.indexReadonlyRecord)().index(X)))}};q.optionalKey=vO;var AO=function(X){return(0,q.optional)(Z1.findFirst(X),function($){return function(Q){return(0,w0.pipe)(Z1.findIndex(X)(Q),d.fold(function(){return Q},function(Y){return Z1.unsafeUpdateAt(Y,$,Q)}))}})};q.optionalFindFirst=AO;var _z=function(X,$,Q){if(Q[X]===$)return Q;else{var Y=cE([Q[0]],Q.slice(1),!0);return Y[X]=$,Y}},RO=function(X){return(0,q.optional)(Z1.findFirst(X),function($){return function(Q){return(0,w0.pipe)(Z1.findIndex(X)(Q),d.fold(function(){return Q},function(Y){return _z(Y,$,Q)}))}})};q.optionalFindFirstNonEmpty=RO;var SO=function(X){return{modifyF:X}};q.traversal=SO;q.traversalComposeTraversal=xz;q.ApplicativeIdentity={URI:"Identity",map:function(X,$){return $(X)},of:P0.identity,ap:function(X,$){return X($)}};var WO=function(X){return X.URI==="Identity"};q.fromTraversable=dz;q.traversalTraverse=EO;var OO=function(X){return{index:X}};q.index=OO;var MO=function(){return(0,q.index)(function(X){return(0,q.optional)(function($){return Z1.lookup(X,$)},function($){return function(Q){return(0,w0.pipe)(Z1.lookup(X,Q),d.fold(function(){return Q},function(){return Z1.unsafeUpdateAt(X,$,Q)}))}})})};q.indexReadonlyArray=MO;var gO=function(){return(0,q.index)(function(X){return(0,q.optional)(function($){return Z1.lookup(X,$)},function($){return function(Q){return(0,w0.pipe)(Z1.lookup(X,Q),d.fold(function(){return Q},function(){return _z(X,$,Q)}))}})})};q.indexReadonlyNonEmptyArray=gO;var FO=function(){return(0,q.index)(function(X){return(0,q.optional)(function($){return p5.lookup(X,$)},function($){return function(Q){if(Q[X]===$||d.isNone(p5.lookup(X,Q)))return Q;return p5.insertAt(X,$)(Q)}})})};q.indexReadonlyRecord=FO;var IO=function(X){return{at:X}};q.at=IO;q.atReadonlyRecord=nz});var S0=v((oz)=>{var kO=function(X){return(0,oz.compose)(A.prismAsTraversal(A.prismFromPredicate(X)))},fO=function(X){return(0,oz.composeOptional)(A.optionalFindFirst(X))},pO=function(X){return(0,oz.composeOptional)(A.optionalFindFirstNonEmpty(X))};Object.defineProperty(oz,"__esModule",{value:!0});oz.Category=oz.Semigroupoid=oz.URI=oz.getAll=oz.fold=oz.foldMap=oz.findFirstNonEmpty=oz.findFirst=oz.traverse=oz.left=oz.right=oz.some=oz.atKey=oz.key=oz.indexNonEmpty=oz.index=oz.component=oz.props=oz.prop=oz.filter=oz.fromNullable=oz.set=oz.modify=oz.composeOptional=oz.composePrism=oz.composeLens=oz.composeIso=oz.composeTraversal=oz.compose=oz.fromTraversable=oz.id=oz.traversal=void 0;var fz=Kj(),G7=F(),G5=_4(),pz=t9(),A=zX();oz.traversal=A.traversal;var yO=function(){return(0,oz.traversal)(function(X){return function($){return $}})};oz.id=yO;oz.fromTraversable=A.fromTraversable;oz.compose=A.traversalComposeTraversal;oz.composeTraversal=oz.compose;oz.composeIso=(0,G7.flow)(A.isoAsTraversal,oz.compose);oz.composeLens=(0,G7.flow)(A.lensAsTraversal,A.traversalComposeTraversal);oz.composePrism=(0,G7.flow)(A.prismAsTraversal,A.traversalComposeTraversal);oz.composeOptional=(0,G7.flow)(A.optionalAsTraversal,A.traversalComposeTraversal);var bO=function(X){return function($){return $.modifyF(A.ApplicativeIdentity)(X)}};oz.modify=bO;var hO=function(X){return(0,oz.modify)(function(){return X})};oz.set=hO;var uO=function(X){return(0,oz.composePrism)(A.prismFromNullable())(X)};oz.fromNullable=uO;oz.filter=kO;var lO=function(X){return(0,oz.compose)((0,G5.pipe)(A.lensId(),A.lensProp(X),A.lensAsTraversal))};oz.prop=lO;var mO=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return(0,oz.compose)((0,G5.pipe)(A.lensId(),A.lensProps.apply(A,X),A.lensAsTraversal))};oz.props=mO;var cO=function(X){return(0,oz.compose)((0,G5.pipe)(A.lensId(),A.lensComponent(X),A.lensAsTraversal))};oz.component=cO;var _O=function(X){return function($){return(0,G5.pipe)($,(0,oz.compose)(A.optionalAsTraversal(A.indexReadonlyArray().index(X))))}};oz.index=_O;var xO=function(X){return function($){return(0,G5.pipe)($,(0,oz.compose)(A.optionalAsTraversal(A.indexReadonlyNonEmptyArray().index(X))))}};oz.indexNonEmpty=xO;var dO=function(X){return function($){return(0,G5.pipe)($,(0,oz.compose)(A.optionalAsTraversal(A.indexReadonlyRecord().index(X))))}};oz.key=dO;var nO=function(X){return function($){return(0,G5.pipe)($,(0,oz.compose)(A.lensAsTraversal(A.atReadonlyRecord().at(X))))}};oz.atKey=nO;oz.some=(0,oz.compose)(A.prismAsTraversal(A.prismSome()));oz.right=(0,oz.compose)(A.prismAsTraversal(A.prismRight()));oz.left=(0,oz.compose)(A.prismAsTraversal(A.prismLeft()));oz.traverse=A.traversalTraverse;oz.findFirst=fO;oz.findFirstNonEmpty=pO;var oO=function(X){return function($){return function(Q){return Q.modifyF(fz.getApplicative(X))(function(Y){return fz.make($(Y))})}}};oz.foldMap=oO;var iO=function(X){return(0,oz.foldMap)(X)(G7.identity)};oz.fold=iO;var rO=function(X){return function($){return(0,oz.foldMap)(pz.getMonoid())(pz.of)($)(X)}};oz.getAll=rO;oz.URI="monocle-ts/Traversal";oz.Semigroupoid={URI:oz.URI,compose:function(X,$){return(0,oz.compose)(X)($)}};oz.Category={URI:oz.URI,compose:oz.Semigroupoid.compose,id:oz.id}});var H1=v(($G)=>{var vM=function(X){return function($){return function(Q){return function(Y){return(0,UM.pipe)(Q.get(Y),$,function(J){return X.map(J,function(Z){return Q.set(Z)(Y)})})}}}},RM=function(X){return(0,$G.composePrism)(_.prismFromPredicate(X))},OM=function(X){return(0,R1.flow)($G.asTraversal,_.traversalTraverse(X))},MM=function(X){return(0,$G.composeOptional)(_.optionalFindFirst(X))},gM=function(X){return(0,$G.composeOptional)(_.optionalFindFirstNonEmpty(X))};Object.defineProperty($G,"__esModule",{value:!0});$G.Category=$G.Semigroupoid=$G.Invariant=$G.URI=$G.imap=$G.findFirstNonEmpty=$G.findFirst=$G.traverse=$G.left=$G.right=$G.some=$G.atKey=$G.key=$G.indexNonEmpty=$G.index=$G.component=$G.props=$G.prop=$G.filter=$G.fromNullable=$G.modifyF=$G.modify=$G.composeTraversal=$G.composeOptional=$G.composePrism=$G.composeIso=$G.composeLens=$G.compose=$G.asTraversal=$G.asOptional=$G.id=$G.lens=void 0;var R1=F(),UM=_4(),_=zX();$G.lens=_.lens;$G.id=_.lensId;$G.asOptional=_.lensAsOptional;$G.asTraversal=_.lensAsTraversal;$G.compose=_.lensComposeLens;$G.composeLens=$G.compose;$G.composeIso=(0,R1.flow)(_.isoAsLens,$G.compose);$G.composePrism=_.lensComposePrism;var CM=function(X){return(0,R1.flow)($G.asOptional,_.optionalComposeOptional(X))};$G.composeOptional=CM;var NM=function(X){return(0,R1.flow)($G.asTraversal,_.traversalComposeTraversal(X))};$G.composeTraversal=NM;var TM=function(X){return function($){return function(Q){var Y=$.get(Q),J=X(Y);return Y===J?Q:$.set(J)(Q)}}};$G.modify=TM;$G.modifyF=vM;var AM=function(X){return(0,$G.composePrism)(_.prismFromNullable())(X)};$G.fromNullable=AM;$G.filter=RM;$G.prop=_.lensProp;$G.props=_.lensProps;$G.component=_.lensComponent;var SM=function(X){return(0,R1.flow)($G.asOptional,_.optionalIndex(X))};$G.index=SM;var WM=function(X){return(0,R1.flow)($G.asOptional,_.optionalIndexNonEmpty(X))};$G.indexNonEmpty=WM;var EM=function(X){return(0,R1.flow)($G.asOptional,_.optionalKey(X))};$G.key=EM;$G.atKey=_.lensAtKey;$G.some=(0,$G.composePrism)(_.prismSome());$G.right=(0,$G.composePrism)(_.prismRight());$G.left=(0,$G.composePrism)(_.prismLeft());$G.traverse=OM;$G.findFirst=MM;$G.findFirstNonEmpty=gM;var FM=function(X,$){return function(Q){return XG(Q,X,$)}};$G.imap=FM;var XG=function(X,$,Q){return(0,$G.lens)((0,R1.flow)(X.get,$),(0,R1.flow)(Q,X.set))};$G.URI="monocle-ts/Lens";$G.Invariant={URI:$G.URI,imap:XG};$G.Semigroupoid={URI:$G.URI,compose:function(X,$){return(0,$G.compose)(X)($)}};$G.Category={URI:$G.URI,compose:$G.Semigroupoid.compose,id:$G.id}});var q7=v((jG)=>{var Yg=function(X){return function($){return function(Q){return function(Y){return(0,D7.pipe)(Q.getOption(Y),XQ.fold(function(){return X.of(Y)},function(J){return X.map($(J),function(Z){return Q.set(Z)(Y)})}))}}}},Jg=function(X){return(0,jG.compose)(W.prismAsOptional(W.prismFromPredicate(X)))},zg=function(X){return(0,h1.flow)(jG.asTraversal,W.traversalTraverse(X))},Gg=function(X){return(0,jG.compose)(W.optionalFindFirst(X))},Vg=function(X){return(0,jG.compose)(W.optionalFindFirstNonEmpty(X))};Object.defineProperty(jG,"__esModule",{value:!0});jG.Category=jG.Semigroupoid=jG.Invariant=jG.URI=jG.imap=jG.findFirstNonEmpty=jG.findFirst=jG.traverse=jG.left=jG.right=jG.some=jG.atKey=jG.key=jG.indexNonEmpty=jG.index=jG.component=jG.props=jG.prop=jG.filter=jG.fromNullable=jG.modifyF=jG.modify=jG.setOption=jG.modifyOption=jG.composeTraversal=jG.composePrism=jG.composeLens=jG.composeIso=jG.composeOptional=jG.compose=jG.asTraversal=jG.id=jG.optional=void 0;var h1=F(),XQ=d$(),D7=_4(),W=zX();jG.optional=W.optional;var Xg=function(){return(0,jG.optional)(XQ.some,h1.constant)};jG.id=Xg;jG.asTraversal=W.optionalAsTraversal;jG.compose=W.optionalComposeOptional;jG.composeOptional=jG.compose;jG.composeIso=(0,h1.flow)(W.isoAsOptional,jG.compose);jG.composeLens=(0,h1.flow)(W.lensAsOptional,W.optionalComposeOptional);jG.composePrism=(0,h1.flow)(W.prismAsOptional,W.optionalComposeOptional);var $g=function(X){return(0,h1.flow)(jG.asTraversal,W.traversalComposeTraversal(X))};jG.composeTraversal=$g;jG.modifyOption=W.optionalModifyOption;var Qg=function(X){return(0,jG.modifyOption)(function(){return X})};jG.setOption=Qg;jG.modify=W.optionalModify;jG.modifyF=Yg;jG.fromNullable=(0,jG.compose)(W.prismAsOptional(W.prismFromNullable()));jG.filter=Jg;var Zg=function(X){return(0,jG.compose)((0,D7.pipe)(W.lensId(),W.lensProp(X),W.lensAsOptional))};jG.prop=Zg;var Hg=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return(0,jG.compose)((0,D7.pipe)(W.lensId(),W.lensProps.apply(W,X),W.lensAsOptional))};jG.props=Hg;var jg=function(X){return(0,jG.compose)((0,D7.pipe)(W.lensId(),W.lensComponent(X),W.lensAsOptional))};jG.component=jg;jG.index=W.optionalIndex;jG.indexNonEmpty=W.optionalIndexNonEmpty;jG.key=W.optionalKey;var Pg=function(X){return function($){return(0,D7.pipe)($,(0,jG.compose)(W.lensAsOptional(W.atReadonlyRecord().at(X))))}};jG.atKey=Pg;jG.some=(0,jG.compose)(W.prismAsOptional(W.prismSome()));jG.right=(0,jG.compose)(W.prismAsOptional(W.prismRight()));jG.left=(0,jG.compose)(W.prismAsOptional(W.prismLeft()));jG.traverse=zg;jG.findFirst=Gg;jG.findFirstNonEmpty=Vg;var Dg=function(X,$){return function(Q){return HG(Q,X,$)}};jG.imap=Dg;var HG=function(X,$,Q){return(0,jG.optional)((0,h1.flow)(X.getOption,XQ.map($)),(0,h1.flow)(Q,X.set))};jG.URI="monocle-ts/Optional";jG.Invariant={URI:jG.URI,imap:HG};jG.Semigroupoid={URI:jG.URI,compose:function(X,$){return(0,jG.compose)(X)($)}};jG.Category={URI:jG.URI,compose:jG.Semigroupoid.compose,id:jG.id}});var E0=v((e)=>{var lg=e&&e.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),mg=e&&e.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),K7=e&&e.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))lg($,X,Q)}return mg($,X),$};Object.defineProperty(e,"__esModule",{value:!0});e.lensFromPath=e.traversalFromPath=e.optionalFromPath=e.isPathTraversal=e.isPathLens=void 0;var i=F(),cg=K7(t9()),_g=K7(F$()),xg=U$(),YQ=K7(H1()),j1=K7(q7()),W0=K7(S0()),dg=(X)=>!B7(X).some(($)=>["?","?some","?left","right","[]>","{}>","[number]","[string]"].includes($)||!$.startsWith("(")&&$.includes(":"));e.isPathLens=dg;var ng=(X)=>B7(X).some(($)=>["[]>","{}>"].includes($));e.isPathTraversal=ng;var DG=(X)=>{if(X==="")return X;const $=X.match(/\((.*)\*(.*)\)$/);if($)return $[2];const Q=X.match(/\((.*)\)$/);if(Q)return Q[0];const Y=X.match(/(.*)\.(.*)/);if(Y)return Y[2];return X},fg=(X)=>{if(X==="")return X;const $=X.match(/(.*)\.\((.*)\*(.*)\)$/);if($)return $[1];return X.substring(0,X.lastIndexOf(DG(X))-1)},qG=(X,$=[])=>{const Q=fg(X),Y=DG(X);if(Q==="")return[Y,...$];return qG(Q,[Y,...$])},B7=(X)=>{return qG(X,[]).flatMap((Q)=>{if(Q.includes("?some")||Q.includes("?left")||Q.includes("?right")||!Q.includes("?"))return[Q];else{const Y=Q.substring(0,Q.length-1);if(Y.length>0)return[Y,"?"];return["?"]}})},pg=(X,$)=>{const Q=[...$];return B7(X).reduce((J,Z)=>{if(Z==="?")return(0,i.pipe)(J,j1.fromNullable);else if(Z==="?some")return(0,i.pipe)(J,j1.some);else if(Z==="?left")return(0,i.pipe)(J,j1.left);else if(Z==="?right")return(0,i.pipe)(J,j1.left);else if(Z==="[number]")return(0,i.pipe)(J,j1.index(Q.shift()));else if(Z==="[string]")return(0,i.pipe)(J,j1.key(Q.shift()));else if(Z.includes("[")&&Z.includes("]")&&Z.indexOf("[")<Z.indexOf("]")){const V=Number.parseInt(Z.substring(Z.indexOf("[")+1,Z.indexOf("]")),10);return(0,i.pipe)(J,j1.component(V))}else if(Z.includes(":")){const V=Z.indexOf(":"),D=Z.substring(0,V),L=Z.substring(V+1,Z.length);return(0,i.pipe)(J,j1.filter((B)=>B[D]===L))}return(0,i.pipe)(J,j1.prop(Z))},j1.id())};e.optionalFromPath=pg;var og=(X,$)=>{const Q=[...$];return B7(X).reduce((J,Z)=>{if(Z==="?")return(0,i.pipe)(J,W0.fromNullable);else if(Z==="?some")return(0,i.pipe)(J,W0.some);else if(Z==="?left")return(0,i.pipe)(J,W0.left);else if(Z==="?right")return(0,i.pipe)(J,W0.left);else if(Z==="[number]")return(0,i.pipe)(J,W0.index(Q.shift()));else if(Z==="[string]")return(0,i.pipe)(J,W0.key(Q.shift()));else if(Z==="[]>")return(0,i.pipe)(J,W0.traverse(cg.Traversable));else if(Z==="{}>")return(0,i.pipe)(J,W0.traverse(_g.getTraversable(xg.Ord)));else if(Z.includes("[")&&Z.includes("]")&&Z.indexOf("[")<Z.indexOf("]")){const V=Number.parseInt(Z.substring(Z.indexOf("[")+1,Z.indexOf("]")),10);return(0,i.pipe)(J,W0.component(V))}else if(Z.includes(":")){const V=Z.indexOf(":"),D=Z.substring(0,V),L=Z.substring(V+1,Z.length);return(0,i.pipe)(J,W0.filter((B)=>B[D]===L))}return(0,i.pipe)(J,W0.prop(Z))},W0.id())};e.traversalFromPath=og;var ig=(X)=>{return B7(X).reduce((Q,Y)=>{if(Y.includes("[")&&Y.includes("]")&&Y.indexOf("[")<Y.indexOf("]")){const J=Y.substring(Y.indexOf("[")+1,Y.indexOf("]"));return(0,i.pipe)(Q,YQ.component(Number.parseInt(J,10)))}return(0,i.pipe)(Q,YQ.prop(Y))},YQ.id())};e.lensFromPath=ig});var KG=v((P1)=>{var rg=P1&&P1.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),sg=P1&&P1.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),tg=P1&&P1.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))rg($,X,Q)}return sg($,X),$};Object.defineProperty(P1,"__esModule",{value:!0});P1.get=void 0;var ag=F(),eg=tg(S0()),L7=E0(),XF=(X,...$)=>{if((0,L7.isPathLens)(X))return(0,L7.lensFromPath)(X).get;if((0,L7.isPathTraversal)(X))return(Q)=>{return(0,ag.pipe)((0,L7.traversalFromPath)(X,$),eg.getAll(Q))};return(0,L7.optionalFromPath)(X,$).getOption};P1.get=XF});var BG=v((z1)=>{var $F=z1&&z1.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),QF=z1&&z1.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),YF=z1&&z1.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))$F($,X,Q)}return QF($,X),$};Object.defineProperty(z1,"__esModule",{value:!0});z1.set=void 0;var JF=F(),ZF=YF(S0()),JQ=E0(),HF=(X,...$)=>(Q)=>{const Y=$.slice(0,$.length-1),J=$[$.length-1];if((0,JQ.isPathLens)(X))return(0,JQ.lensFromPath)(X).set(J)(Q);return(0,JF.pipe)((0,JQ.traversalFromPath)(X,Y),ZF.set(J))(Q)};z1.set=HF});var CG=v((wG)=>{Object.defineProperty(wG,"__esModule",{value:!0});wG.setOption=void 0;var LG=F(),jF=q7(),PF=S0(),w7=E0(),zF=(X,...$)=>(Q)=>{const Y=$.slice(0,$.length-1),J=$[$.length-1];if((0,w7.isPathLens)(X))return(0,w7.lensFromPath)(X).set(J)(Q);if((0,w7.isPathTraversal)(X))return(0,LG.pipe)((0,w7.traversalFromPath)(X,Y),(0,PF.set)(J))(Q);return(0,LG.pipe)((0,w7.optionalFromPath)(X,Y),(0,jF.setOption)(J))(Q)};wG.setOption=zF});var TG=v((G1)=>{var GF=G1&&G1.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),VF=G1&&G1.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),DF=G1&&G1.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))GF($,X,Q)}return VF($,X),$};Object.defineProperty(G1,"__esModule",{value:!0});G1.modify=void 0;var NG=F(),qF=DF(H1()),KF=S0(),ZQ=E0(),BF=(X,...$)=>(Q)=>{const Y=$.slice(0,$.length-1),J=$[$.length-1];if((0,ZQ.isPathLens)(X))return(0,NG.pipe)((0,ZQ.lensFromPath)(X),qF.modify(J))(Q);return(0,NG.pipe)((0,ZQ.traversalFromPath)(X,Y),(0,KF.modify)(J))(Q)};G1.modify=BF});var vG=v((V1)=>{var LF=V1&&V1.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),wF=V1&&V1.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),jQ=V1&&V1.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))LF($,X,Q)}return wF($,X),$};Object.defineProperty(V1,"__esModule",{value:!0});V1.modifyOption=void 0;var HQ=F(),UF=jQ(H1()),CF=jQ(q7()),NF=jQ(S0()),U7=E0(),TF=(X,...$)=>(Q)=>{const Y=$.slice(0,$.length-1),J=$[$.length-1];if((0,U7.isPathLens)(X))return(0,HQ.pipe)((0,U7.lensFromPath)(X),UF.modify(J))(Q);if((0,U7.isPathTraversal)(X))return(0,HQ.pipe)((0,U7.traversalFromPath)(X,Y),NF.modify(J))(Q);return(0,HQ.pipe)((0,U7.optionalFromPath)(X,Y),CF.modifyOption(J))(Q)};V1.modifyOption=TF});var RG=v((D1)=>{var vF=D1&&D1.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),AF=D1&&D1.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),RF=D1&&D1.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))vF($,X,Q)}return AF($,X),$};Object.defineProperty(D1,"__esModule",{value:!0});D1.modifyW=void 0;var AG=F(),SF=RF(H1()),WF=S0(),PQ=E0(),EF=(X,...$)=>(Q)=>{const Y=$.slice(0,$.length-1),J=$[$.length-1];if((0,PQ.isPathLens)(X))return(0,AG.pipe)((0,PQ.lensFromPath)(X),SF.modify(J))(Q);return(0,AG.pipe)((0,PQ.traversalFromPath)(X,Y),(0,WF.modify)(J))(Q)};D1.modifyW=EF});var SG=v((q1)=>{var OF=q1&&q1.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),MF=q1&&q1.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),GQ=q1&&q1.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))OF($,X,Q)}return MF($,X),$};Object.defineProperty(q1,"__esModule",{value:!0});q1.modifyOptionW=void 0;var zQ=F(),gF=GQ(H1()),FF=GQ(q7()),IF=GQ(S0()),C7=E0(),yF=(X,...$)=>(Q)=>{const Y=$.slice(0,$.length-1),J=$[$.length-1];if((0,C7.isPathLens)(X))return(0,zQ.pipe)((0,C7.lensFromPath)(X),gF.modify(J))(Q);if((0,C7.isPathTraversal)(X))return(0,zQ.pipe)((0,C7.traversalFromPath)(X,Y),IF.modify(J))(Q);return(0,zQ.pipe)((0,C7.optionalFromPath)(X,Y),FF.modifyOption(J))(Q)};q1.modifyOptionW=yF});var WG=v((K1)=>{var bF=K1&&K1.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),hF=K1&&K1.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),uF=K1&&K1.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))bF($,X,Q)}return hF($,X),$};Object.defineProperty(K1,"__esModule",{value:!0});K1.modifyF=void 0;var kF=F(),lF=uF(H1()),VQ=E0(),mF=(X)=>($,...Q)=>(Y)=>{const J=Q.slice(0,Q.length-1),Z=Q[Q.length-1];if((0,VQ.isPathLens)($))return(0,kF.pipe)((0,VQ.lensFromPath)($),lF.modifyF(X)(Z))(Y);return(0,VQ.traversalFromPath)($,J).modifyF(X)(Z)(Y)};K1.modifyF=mF});var MG=v((B1)=>{var cF=B1&&B1.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),_F=B1&&B1.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),OG=B1&&B1.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))cF($,X,Q)}return _F($,X),$};Object.defineProperty(B1,"__esModule",{value:!0});B1.upsert=void 0;var EG=F(),xF=OG(H1()),dF=OG(S0()),DQ=E0(),nF=(X,$,...Q)=>(Y)=>{const J=Q.slice(0,Q.length-1),Z=Q[Q.length-1];if((0,DQ.isPathLens)(X))return(0,EG.pipe)((0,DQ.lensFromPath)(X),xF.modify((V)=>({...V,[$]:Z})))(Y);return(0,EG.pipe)((0,DQ.traversalFromPath)(X,J),dF.modify((V)=>({...V,[$]:Z})))(Y)};B1.upsert=nF});var IG=v((L1)=>{var fF=L1&&L1.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),pF=L1&&L1.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),FG=L1&&L1.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))fF($,X,Q)}return pF($,X),$};Object.defineProperty(L1,"__esModule",{value:!0});L1.remove=void 0;var gG=F(),oF=FG(H1()),iF=FG(S0()),qQ=E0(),rF=(X)=>($)=>{const Q=X.split("."),Y=Q.slice(0,Q.length-1).join("."),J=Q[Q.length-1];if((0,qQ.isPathLens)(Y))return(0,gG.pipe)((0,qQ.lensFromPath)(Y),oF.modify((Z)=>{const V={...Z};return delete V[J],V}))($);return(0,gG.pipe)((0,qQ.traversalFromPath)(Y,[]),iF.modify((Z)=>{const V={...Z};return delete V[J],V}))($)};L1.remove=rF});var hG=v((w1)=>{var sF=w1&&w1.__createBinding||(Object.create?function(X,$,Q,Y){if(Y===void 0)Y=Q;var J=Object.getOwnPropertyDescriptor($,Q);if(!J||("get"in J?!$.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return $[Q]}};Object.defineProperty(X,Y,J)}:function(X,$,Q,Y){if(Y===void 0)Y=Q;X[Y]=$[Q]}),tF=w1&&w1.__setModuleDefault||(Object.create?function(X,$){Object.defineProperty(X,"default",{enumerable:!0,value:$})}:function(X,$){X.default=$}),bG=w1&&w1.__importStar||function(X){if(X&&X.__esModule)return X;var $={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))sF($,X,Q)}return tF($,X),$};Object.defineProperty(w1,"__esModule",{value:!0});w1.rename=void 0;var yG=F(),aF=bG(H1()),eF=bG(S0()),KQ=E0(),XI=(X,$)=>(Q)=>{const Y=X.split("."),J=Y.slice(0,Y.length-1).join("."),Z=Y[Y.length-1];if((0,KQ.isPathLens)(J))return(0,yG.pipe)((0,KQ.lensFromPath)(J),aF.modify(({[Z]:V,...D})=>({...D,[$]:V})))(Q);return(0,yG.pipe)((0,KQ.traversalFromPath)(J,[]),eF.modify(({[Z]:V,...D})=>({...D,[$]:V})))(Q)};w1.rename=XI});var uG=v((N0)=>{Object.defineProperty(N0,"__esModule",{value:!0});N0.rename=N0.remove=N0.upsert=N0.modifyF=N0.modifyOptionW=N0.modifyW=N0.modifyOption=N0.modify=N0.setOption=N0.set=N0.get=void 0;var $I=KG();Object.defineProperty(N0,"get",{enumerable:!0,get:function(){return $I.get}});var QI=BG();Object.defineProperty(N0,"set",{enumerable:!0,get:function(){return QI.set}});var YI=CG();Object.defineProperty(N0,"setOption",{enumerable:!0,get:function(){return YI.setOption}});var JI=TG();Object.defineProperty(N0,"modify",{enumerable:!0,get:function(){return JI.modify}});var ZI=vG();Object.defineProperty(N0,"modifyOption",{enumerable:!0,get:function(){return ZI.modifyOption}});var HI=RG();Object.defineProperty(N0,"modifyW",{enumerable:!0,get:function(){return HI.modifyW}});var jI=SG();Object.defineProperty(N0,"modifyOptionW",{enumerable:!0,get:function(){return jI.modifyOptionW}});var PI=WG();Object.defineProperty(N0,"modifyF",{enumerable:!0,get:function(){return PI.modifyF}});var zI=MG();Object.defineProperty(N0,"upsert",{enumerable:!0,get:function(){return zI.upsert}});var GI=IG();Object.defineProperty(N0,"remove",{enumerable:!0,get:function(){return GI.remove}});var VI=hG();Object.defineProperty(N0,"rename",{enumerable:!0,get:function(){return VI.rename}})});var aG=v((qu,tG)=>{tG.exports=Spicetify.React});var XV=v((Ku,eG)=>{eG.exports=Spicetify.ReactDOM});function u(X){return X}function l1(X){return function(){return X}}function W7(X){return function(){var $=[];for(var Q=0;Q<arguments.length;Q++)$[Q]=arguments[Q];if($.length>1)return X($[1],$[0]);return function(Y){return X(Y)($[0])}}}function I(X,$,Q,Y,J,Z,V,D,L){switch(arguments.length){case 1:return X;case 2:return function(){return $(X.apply(this,arguments))};case 3:return function(){return Q($(X.apply(this,arguments)))};case 4:return function(){return Y(Q($(X.apply(this,arguments))))};case 5:return function(){return J(Y(Q($(X.apply(this,arguments)))))};case 6:return function(){return Z(J(Y(Q($(X.apply(this,arguments))))))};case 7:return function(){return V(Z(J(Y(Q($(X.apply(this,arguments)))))))};case 8:return function(){return D(V(Z(J(Y(Q($(X.apply(this,arguments))))))))};case 9:return function(){return L(D(V(Z(J(Y(Q($(X.apply(this,arguments)))))))))}}return}function E7(X){return function($){return X.apply(void 0,$)}}function RQ(X){return function(){var $=[];for(var Q=0;Q<arguments.length;Q++)$[Q]=arguments[Q];return X($)}}function K(X,$,Q,Y,J,Z,V,D,L){switch(arguments.length){case 1:return X;case 2:return $(X);case 3:return Q($(X));case 4:return Y(Q($(X)));case 5:return J(Y(Q($(X))));case 6:return Z(J(Y(Q($(X)))));case 7:return V(Z(J(Y(Q($(X))))));case 8:return D(V(Z(J(Y(Q($(X)))))));case 9:return L(D(V(Z(J(Y(Q($(X))))))));default:{var B=arguments[0];for(var R=1;R<arguments.length;R++)B=arguments[R](B);return B}}}var vV=function(X,$,Q){if(Q||arguments.length===2){for(var Y=0,J=$.length,Z;Y<J;Y++)if(Z||!(Y in $)){if(!Z)Z=Array.prototype.slice.call($,0,Y);Z[Y]=$[Y]}}return X.concat(Z||Array.prototype.slice.call($))};var CQ=function(X){return function(){return{concat:function($,Q){return function(Y){return X.concat($(Y),Q(Y))}}}}},NQ=function(X){var $=CQ(X);return function(){return{concat:$().concat,empty:function(){return X.empty}}}};var TQ=function(X){return function($){return $(X)}};var vQ=l1(!1);var AQ=l1(void 0),a5=AQ;var O7=function(X,$){return $};var s=function(X,$){var Q=typeof X==="number"?function(Y){return Y.length>=X}:X;return function(){var Y=Array.from(arguments);if(Q(arguments))return $.apply(this,Y);return function(J){return $.apply(void 0,vV([J],Y,!1))}}};var AV=function(X,$,Q){if(Q||arguments.length===2){for(var Y=0,J=$.length,Z;Y<J;Y++)if(Z||!(Y in $)){if(!Z)Z=Array.prototype.slice.call($,0,Y);Z[Y]=$[Y]}}return X.concat(Z||Array.prototype.slice.call($))},W1=function(X){return X._tag==="None"},B0=function(X){return X._tag==="Some"},E={_tag:"None"},O=function(X){return{_tag:"Some",value:X}},U1=function(X){return X._tag==="Left"};var M7=function(X){return[X]},D5=function(X){return X.length>0},e5=function(X){return X[0]},g7=function(X){return X.slice(1)},X4=[],o0={},n=Object.prototype.hasOwnProperty,$4=function(X){return AV([X[0]],X.slice(1),!0)};var SQ=function(X,$){return s(2,function(Q,Y){return $.flatMap(Q,function(J){return X.fromIO(Y(J))})})};function r0(X){return function($){return function(Q){return X.ap(X.map(Q,function(Y){return function(){return Y}}),$)}}}function s0(X){return function($){return function(Q){return X.ap(X.map(Q,function(){return function(Y){return Y}}),$)}}}function t0(X){return function($,Q){return function(Y){return X.ap(X.map(Y,function(J){return function(Z){var V;return Object.assign({},J,(V={},V[$]=Z,V))}}),Q)}}}function F7(X){return function($){return{concat:function(Q,Y){return X.ap(X.map(Q,function(J){return function(Z){return $.concat(J,Z)}}),Y)}}}}function M0(X){return function($){return function(Q){return X.map(Q,function(Y){return Y($)})}}}function g0(X){return function($){return function(Q){return X.map(Q,function(Y){var J;return J={},J[$]=Y,J})}}}var F0=function(X){return function($,Q){return function(Y){return X.map(Y,function(J){var Z;return Object.assign({},J,(Z={},Z[$]=Q(J),Z))})}}};function Q4(X){return function($,Q){return X.map($,function(){return Q})}}function I7(X){var $=Q4(X);return function(Q){return $(Q,void 0)}}function WQ(X){var $=F7(X);return function(Q){return{concat:$(Q).concat,empty:X.of(Q.empty)}}}var S={};k1(S,{zipWith:()=>{{return lJ}},zip:()=>{{return mJ}},zero:()=>{{return g5}},wither:()=>{{return HB}},wilt:()=>{{return jB}},updateAt:()=>{{return cK}},unzip:()=>{{return pK}},unsafeUpdateAt:()=>{{return BZ}},unsafeInsertAt:()=>{{return KZ}},unsafeDeleteAt:()=>{{return LZ}},uniq:()=>{{return rK}},union:()=>{{return x6}},unfold:()=>{{return Y8}},traverseWithIndex:()=>{{return Q8}},traverse:()=>{{return jZ}},takeRight:()=>{{return EK}},takeLeftWhile:()=>{{return OK}},takeLeft:()=>{{return WK}},tail:()=>{{return RK}},splitAt:()=>{{return _J}},spanLeft:()=>{{return MK}},sortBy:()=>{{return sK}},sort:()=>{{return fK}},some:()=>{{return wZ}},snoc:()=>{{return rB}},size:()=>{{return NK}},sequence:()=>{{return N4}},separate:()=>{{return I5}},scanRight:()=>{{return CK}},scanLeft:()=>{{return UK}},rotate:()=>{{return iK}},rights:()=>{{return dK}},reverse:()=>{{return xK}},replicate:()=>{{return EJ}},reduceWithIndex:()=>{{return $8}},reduceRightWithIndex:()=>{{return HZ}},reduceRight:()=>{{return ZZ}},reduce:()=>{{return X8}},range:()=>{{return pB}},prependW:()=>{{return DK}},prependToAll:()=>{{return sB}},prependAll:()=>{{return cJ}},prepend:()=>{{return VK}},partitionWithIndex:()=>{{return t6}},partitionMapWithIndex:()=>{{return a6}},partitionMap:()=>{{return eJ}},partition:()=>{{return aJ}},of:()=>{{return s1}},modifyAt:()=>{{return kJ}},matchW:()=>{{return gJ}},matchRightW:()=>{{return yJ}},matchRight:()=>{{return bJ}},matchLeftW:()=>{{return FJ}},matchLeft:()=>{{return IJ}},match:()=>{{return BK}},mapWithIndex:()=>{{return sJ}},map:()=>{{return C4}},makeBy:()=>{{return WJ}},lookup:()=>{{return TK}},let:()=>{{return xB}},lefts:()=>{{return nK}},last:()=>{{return AK}},isOutOfBound:()=>{{return U4}},isNonEmpty:()=>{{return a}},isEmpty:()=>{{return i1}},intersperse:()=>{{return oK}},intersection:()=>{{return d6}},intercalate:()=>{{return mB}},insertAt:()=>{{return mK}},init:()=>{{return SK}},head:()=>{{return vK}},guard:()=>{{return RB}},getUnionSemigroup:()=>{{return zZ}},getUnionMonoid:()=>{{return DB}},getShow:()=>{{return PB}},getSemigroup:()=>{{return PZ}},getOrd:()=>{{return VB}},getMonoid:()=>{{return zB}},getIntersectionSemigroup:()=>{{return qB}},getEq:()=>{{return GB}},getDifferenceMagma:()=>{{return KB}},fromPredicate:()=>{{return KK}},fromOptionK:()=>{{return eK}},fromOption:()=>{{return OJ}},fromEitherK:()=>{{return uB}},fromEither:()=>{{return MJ}},foldRight:()=>{{return wK}},foldMapWithIndex:()=>{{return JZ}},foldMap:()=>{{return YZ}},foldLeft:()=>{{return LK}},flatten:()=>{{return JB}},flatMap:()=>{{return Q1}},flap:()=>{{return BB}},findLastMap:()=>{{return kK}},findLastIndex:()=>{{return lK}},findLast:()=>{{return uK}},findIndex:()=>{{return yK}},findFirstMap:()=>{{return hK}},findFirst:()=>{{return bK}},filterWithIndex:()=>{{return QZ}},filterMapWithIndex:()=>{{return r6}},filterMap:()=>{{return s6}},filterE:()=>{{return hB}},filter:()=>{{return tJ}},extend:()=>{{return e6}},exists:()=>{{return lB}},every:()=>{{return kB}},empty:()=>{{return oB}},elem:()=>{{return _6}},duplicate:()=>{{return ZB}},dropRight:()=>{{return FK}},dropLeftWhile:()=>{{return IK}},dropLeft:()=>{{return gK}},difference:()=>{{return n6}},deleteAt:()=>{{return _K}},copy:()=>{{return J0}},cons:()=>{{return iB}},concatW:()=>{{return xJ}},concat:()=>{{return $B}},comprehension:()=>{{return XB}},compact:()=>{{return F5}},chunksOf:()=>{{return aK}},chop:()=>{{return tK}},chainWithIndex:()=>{{return hJ}},chainRecDepthFirst:()=>{{return FB}},chainRecBreadthFirst:()=>{{return yB}},chainFirst:()=>{{return NB}},chain:()=>{{return fB}},bindTo:()=>{{return _B}},bind:()=>{{return dB}},array:()=>{{return tB}},appendW:()=>{{return qK}},append:()=>{{return L9}},apSecond:()=>{{return UB}},apS:()=>{{return nB}},apFirst:()=>{{return wB}},ap:()=>{{return rJ}},altW:()=>{{return XZ}},alt:()=>{{return $Z}},Zero:()=>{{return VZ}},Witherable:()=>{{return DZ}},Unfoldable:()=>{{return vB}},URI:()=>{{return c}},TraversableWithIndex:()=>{{return gB}},Traversable:()=>{{return j8}},Pointed:()=>{{return GZ}},Monad:()=>{{return TB}},FunctorWithIndex:()=>{{return LB}},Functor:()=>{{return A9}},FromEither:()=>{{return qZ}},FoldableWithIndex:()=>{{return MB}},Foldable:()=>{{return H8}},FilterableWithIndex:()=>{{return OB}},Filterable:()=>{{return EB}},Extend:()=>{{return WB}},Do:()=>{{return cB}},Compactable:()=>{{return Z8}},ChainRecDepthFirst:()=>{{return IB}},ChainRecBreadthFirst:()=>{{return bB}},Chain:()=>{{return J8}},Apply:()=>{{return R9}},Applicative:()=>{{return CB}},Alternative:()=>{{return SB}},Alt:()=>{{return AB}}});function q5(X){var $=C1(X);return function(Q){return function(Y){return $(Y,Q)}}}function C1(X){return function($,Q){return X.chain($,function(Y){return X.map(Q(Y),function(){return Y})})}}function I0(X){return function($,Q){return function(Y){return X.chain(Y,function(J){return X.map(Q(J),function(Z){var V;return Object.assign({},J,(V={},V[$]=Z,V))})})}}}function K5(X){return function($){return I($,X.fromEither)}}function OQ(X,$){var Q=K5(X),Y=C1($);return function(J,Z){return Y(J,Q(Z))}}var C5={};k1(C5,{zipWith:()=>{{return wY}},zip:()=>{{return UY}},updateLast:()=>{{return WD}},updateHead:()=>{{return SD}},updateAt:()=>{{return oV}},unzip:()=>{{return iV}},unsnoc:()=>{{return ID}},unsafeUpdateAt:()=>{{return _7}},unsafeInsertAt:()=>{{return c7}},unprepend:()=>{{return DY}},uniq:()=>{{return x7}},union:()=>{{return d7}},uncons:()=>{{return FD}},unappend:()=>{{return qY}},traverseWithIndex:()=>{{return i7}},traverse:()=>{{return IY}},tail:()=>{{return v0}},splitAt:()=>{{return G4}},sortBy:()=>{{return fX}},sort:()=>{{return pX}},snoc:()=>{{return H6}},sequence:()=>{{return o7}},rotate:()=>{{return n7}},reverse:()=>{{return nV}},replicate:()=>{{return dV}},reduceWithIndex:()=>{{return MY}},reduceRightWithIndex:()=>{{return FY}},reduceRight:()=>{{return gY}},reduce:()=>{{return OY}},range:()=>{{return P4}},prependW:()=>{{return l7}},prependToAll:()=>{{return yD}},prependAll:()=>{{return z4}},prepend:()=>{{return c1}},of:()=>{{return N1}},nonEmptyArray:()=>{{return hD}},modifyLast:()=>{{return bY}},modifyHead:()=>{{return yY}},modifyAt:()=>{{return LY}},min:()=>{{return ND}},max:()=>{{return TD}},matchRight:()=>{{return RD}},matchLeft:()=>{{return AD}},mapWithIndex:()=>{{return Q6}},map:()=>{{return $6}},makeBy:()=>{{return j4}},let:()=>{{return wD}},last:()=>{{return x1}},isOutOfBound:()=>{{return Z4}},isNonEmpty:()=>{{return e0}},intersperse:()=>{{return oX}},intercalate:()=>{{return ED}},insertAt:()=>{{return pV}},init:()=>{{return d1}},head:()=>{{return U0}},groupSort:()=>{{return MD}},groupBy:()=>{{return fV}},group:()=>{{return BY}},getUnionSemigroup:()=>{{return XD}},getShow:()=>{{return tV}},getSemigroup:()=>{{return aV}},getEq:()=>{{return eV}},fromReadonlyNonEmptyArray:()=>{{return H4}},fromArray:()=>{{return VY}},foldMapWithIndex:()=>{{return CY}},foldMap:()=>{{return NY}},fold:()=>{{return bD}},flatten:()=>{{return sV}},flatMap:()=>{{return _1}},flap:()=>{{return $D}},filterWithIndex:()=>{{return hY}},filter:()=>{{return gD}},extract:()=>{{return Y6}},extend:()=>{{return X6}},duplicate:()=>{{return rV}},copy:()=>{{return U5}},cons:()=>{{return Z6}},concatW:()=>{{return KY}},concatAll:()=>{{return vD}},concat:()=>{{return f7}},chunksOf:()=>{{return iX}},chop:()=>{{return p7}},chainWithIndex:()=>{{return TY}},chainFirst:()=>{{return jD}},chain:()=>{{return OD}},bindTo:()=>{{return LD}},bind:()=>{{return UD}},appendW:()=>{{return m7}},append:()=>{{return w5}},apSecond:()=>{{return ZD}},apS:()=>{{return CD}},apFirst:()=>{{return JD}},ap:()=>{{return EY}},altW:()=>{{return SY}},alt:()=>{{return WY}},URI:()=>{{return z0}},TraversableWithIndex:()=>{{return DD}},Traversable:()=>{{return VD}},Pointed:()=>{{return QD}},Monad:()=>{{return PD}},FunctorWithIndex:()=>{{return YD}},Functor:()=>{{return r7}},FoldableWithIndex:()=>{{return GD}},Foldable:()=>{{return zD}},Do:()=>{{return BD}},Comonad:()=>{{return KD}},Chain:()=>{{return J6}},Apply:()=>{{return s7}},Applicative:()=>{{return HD}},Alt:()=>{{return qD}}});var y7={};k1(y7,{tuple:()=>{{return gQ}},struct:()=>{{return MQ}},strictEqual:()=>{{return MV}},getTupleEq:()=>{{return EV}},getStructEq:()=>{{return OV}},getSemigroup:()=>{{return yQ}},getMonoid:()=>{{return WV}},fromEquals:()=>{{return y0}},eqString:()=>{{return IV}},eqStrict:()=>{{return m1}},eqNumber:()=>{{return yV}},eqDate:()=>{{return bV}},eqBoolean:()=>{{return FV}},eq:()=>{{return gV}},contramap:()=>{{return FQ}},URI:()=>{{return IQ}},Contravariant:()=>{{return bQ}}});var y0=function(X){return{equals:function($,Q){return $===Q||X($,Q)}}},MQ=function(X){return y0(function($,Q){for(var Y in X)if(!X[Y].equals($[Y],Q[Y]))return!1;return!0})},gQ=function(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return y0(function(Q,Y){return X.every(function(J,Z){return J.equals(Q[Z],Y[Z])})})},RV=function(X,$){return K(X,FQ($))},FQ=function(X){return function($){return y0(function(Q,Y){return $.equals(X(Q),X(Y))})}},IQ="Eq",m1={equals:function(X,$){return X===$}},SV={equals:function(){return!0}},yQ=function(){return{concat:function(X,$){return y0(function(Q,Y){return X.equals(Q,Y)&&$.equals(Q,Y)})}}},WV=function(){return{concat:yQ().concat,empty:SV}},bQ={URI:IQ,contramap:RV},EV=gQ,OV=MQ,MV=m1.equals,gV=bQ,FV=m1,IV=m1,yV=m1,bV={equals:function(X,$){return X.valueOf()===$.valueOf()}};var kV=function(X,$){return X<$?-1:X>$?1:0},hV=function(X){return function($,Q){return $===Q||X($,Q)===0}},b7=function(X){return{equals:hV(X),compare:function($,Q){return $===Q?0:X($,Q)}}};var uV=function(){return{concat:function(X,$){return b7(function(Q,Y){var J=X.compare(Q,Y);return J!==0?J:$.compare(Q,Y)})}}},h7=function(){return{concat:uV().concat,empty:b7(function(){return 0})}};var hQ=function(X){return function($,Q){return $===Q||X.compare($,Q)<1?$:Q}},uQ=function(X){return function($,Q){return $===Q||X.compare($,Q)>-1?$:Q}};var bI={equals:m1.equals,compare:kV};var kQ=function(X){return function($){return function(Q){return Q.reduce(function(Y,J){return X.concat(Y,J)},$)}}};var SX=function(X){return{concat:hQ(X)}},WX=function(X){return{concat:uQ(X)}},cV=function(X){return{concat:function(){return X}}};var lQ=function(){return{concat:u}},mQ=function(){return{concat:function(X,$){return $}}},cQ=kQ,_Q=cV(void 0);var xQ={concat:function(X,$){return X&&$}},dQ={concat:function(X,$){return X||$}};var nQ={concat:function(X,$){return X+$}},fQ={concat:function(X,$){return X+$}},pQ={concat:function(X,$){return X*$}};function kX(X,$){return $?X.concat($):function(Q){return Q.concat(X)}}function PY(X,$){return $===void 0?B5(X):K($,B5(X))}var OX=function(X,$,Q){if(Q||arguments.length===2){for(var Y=0,J=$.length,Z;Y<J;Y++)if(Z||!(Y in $)){if(!Z)Z=Array.prototype.slice.call($,0,Y);Z[Y]=$[Y]}}return X.concat(Z||Array.prototype.slice.call($))},MX=X4,E1=D5,gX=function(X,$){return X<0||X>=$.length},FX=function(X){return function($){return OX([X],$,!0)}},B5=FX,IX=function(X){return function($){return OX(OX([],$,!0),[X],!1)}},oQ=IX,yX=function(X,$,Q){if(E1(Q)){var Y=$4(Q);return Y.splice(X,0,$),Y}return[$]},iQ=function(X,$,Q){if(Q[X]===$)return Q;else{var Y=$4(Q);return Y[X]=$,Y}},bX=function(X){return function($){if($.length===1)return $;var Q=[a0($)],Y=L5($),J=function(L){if(Q.every(function(B){return!X.equals(B,L)}))Q.push(L)};for(var Z=0,V=Y;Z<V.length;Z++){var D=V[Z];J(D)}return Q}},rQ=function(X){if(E1(X)){var $=h7();return _V(X.reduce($.concat,$.empty))}return u},sQ=function(X){var $=bX(X);return function(Q){return function(Y){return $(K(Y,kX(Q)))}}},hX=function(X){return function($){var Q=$.length,Y=Math.round(X)%Q;if(gX(Math.abs(Y),$)||Y===0)return $;if(Y<0){var J=u7(-Y)($),Z=J[0],V=J[1];return K(V,kX(Z))}else return hX(Y-Q)($)}};var uX=function(X){return function($){var Q=Math.max(0,Math.floor($)),Y=[X(0)];for(var J=1;J<Q;J++)Y.push(X(J));return Y}};var tQ=function(X,$){return X<=$?uX(function(Q){return X+Q})($-X+1):[X]};var _V=function(X){return function($){return $.length===1?$:$.slice().sort(X.compare)}};var lX=function(X){return function($){var Q=[X,$[0]];for(var Y=1;Y<$.length;Y++)Q.push(X,$[Y]);return Q}},mX=function(X){return function($){var Q=L5($);return E1(Q)?K(Q,lX(X),B5(a0($))):$}};var cX=function(X){return function($){var Q=X($),Y=Q[0],J=Q[1],Z=[Y],V=J;while(E1(V)){var D=X(V),L=D[0],B=D[1];Z.push(L),V=B}return Z}},u7=function(X){return function($){var Q=Math.max(1,X);return Q>=$.length?[$,MX]:[K($.slice(1,Q),B5(a0($))),$.slice(Q)]}},aQ=function(X){return cX(u7(X))};var eQ=M7;var XY=function(X,$){return _X(X,function(Q,Y,J){return $(Y,J)})},$Y=function(X){return function($){return function(Q){return Q.slice(1).reduce(function(Y,J){return X.concat(Y,$(J))},$(Q[0]))}}},QY=function(X,$){return xX(X,function(Q,Y,J){return $(Y,J)})},_X=function(X,$){return function(Q){return Q.reduce(function(Y,J,Z){return $(Z,Y,J)},X)}},YY=function(X){return function($){return function(Q){return Q.slice(1).reduce(function(Y,J,Z){return X.concat(Y,$(Z+1,J))},$(0,Q[0]))}}},xX=function(X,$){return function(Q){return Q.reduceRight(function(Y,J,Z){return $(Z,J,Y)},X)}};var xV=e5;var JY=function(X){return{show:function($){return"[".concat($.map(X.show).join(", "),"]")}}};var ZY=function(X){return y0(function($,Q){return $.length===Q.length&&$.every(function(Y,J){return X.equals(Y,Q[J])})})};var a0=xV,L5=g7,Y4=function(X){return X[X.length-1]},dX=function(X){return X.slice(0,-1)},HY=function(X){var $=SX(X);return function(Q){return Q.reduce($.concat)}},jY=function(X){var $=WX(X);return function(Q){return Q.reduce($.concat)}},nX=function(X){return function($){return $.reduce(X.concat)}};var k7=function(X){var $=nX(X);return function(Q){return I(mX(Q),$)}};var zY=function(X,$){return K(X,kX([$]))};function KY(X){return function($){return $.concat(X)}}function f7(X,$){return $?X.concat($):function(Q){return Q.concat(X)}}function BY(X){return function($){var Q=$.length;if(Q===0)return[];var Y=[],J=$[0],Z=[J];for(var V=1;V<Q;V++){var D=$[V];if(X.equals(D,J))Z.push(D);else Y.push(Z),J=D,Z=[J]}return Y.push(Z),Y}}function UY(X,$){if($===void 0)return function(Q){return UY(Q,X)};return wY(X,$,function(Q,Y){return[Q,Y]})}function MD(X){var $=pX(X),Q=BY(X);return function(Y){return e0(Y)?Q($(Y)):[]}}function gD(X){return hY(function($,Q){return X(Q)})}function Z6(X,$){return $===void 0?c1(X):K($,c1(X))}var J4=function(X,$,Q){if(Q||arguments.length===2){for(var Y=0,J=$.length,Z;Y<J;Y++)if(Z||!(Y in $)){if(!Z)Z=Array.prototype.slice.call($,0,Y);Z[Y]=$[Y]}}return X.concat(Z||Array.prototype.slice.call($))},e0=function(X){return X.length>0},Z4=function(X,$){return X<0||X>=$.length},l7=function(X){return function($){return J4([X],$,!0)}},c1=l7,m7=function(X){return function($){return J4(J4([],$,!0),[X],!1)}},w5=m7,c7=function(X,$,Q){if(e0(Q)){var Y=H4(Q);return Y.splice(X,0,$),Y}return[$]},_7=function(X,$,Q){var Y=H4(Q);return Y[X]=$,Y},x7=function(X){return function($){if($.length===1)return U5($);var Q=[U0($)],Y=v0($),J=function(L){if(Q.every(function(B){return!X.equals(B,L)}))Q.push(L)};for(var Z=0,V=Y;Z<V.length;Z++){var D=V[Z];J(D)}return Q}},fX=function(X){if(e0(X)){var $=h7();return pX(X.reduce($.concat,$.empty))}return U5},d7=function(X){var $=x7(X);return function(Q){return function(Y){return $(K(Y,f7(Q)))}}},n7=function(X){return function($){var Q=$.length,Y=Math.round(X)%Q;if(Z4(Math.abs(Y),$)||Y===0)return U5($);if(Y<0){var J=G4(-Y)($),Z=J[0],V=J[1];return K(V,f7(Z))}else return n7(Y-Q)($)}},H4=$4,VY=function(X){return e0(X)?O(X):E},j4=function(X){return function($){var Q=Math.max(0,Math.floor($)),Y=[X(0)];for(var J=1;J<Q;J++)Y.push(X(J));return Y}},dV=function(X){return j4(function(){return X})},P4=function(X,$){return X<=$?j4(function(Q){return X+Q})($-X+1):[X]},DY=function(X){return[U0(X),v0(X)]},qY=function(X){return[d1(X),x1(X)]},nV=function(X){return J4([x1(X)],X.slice(0,-1).reverse(),!0)},fV=function(X){return function($){var Q={};for(var Y=0,J=$;Y<J.length;Y++){var Z=J[Y],V=X(Z);if(n.call(Q,V))Q[V].push(Z);else Q[V]=[Z]}return Q}},pX=function(X){return function($){return $.slice().sort(X.compare)}},pV=function(X,$){return function(Q){return X<0||X>Q.length?E:O(c7(X,$,Q))}},oV=function(X,$){return LY(X,function(){return $})},LY=function(X,$){return function(Q){return Z4(X,Q)?E:O(_7(X,$(Q[X]),Q))}},U5=H4,N1=function(X){return[X]},wY=function(X,$,Q){var Y=[Q(X[0],$[0])],J=Math.min(X.length,$.length);for(var Z=1;Z<J;Z++)Y[Z]=Q(X[Z],$[Z]);return Y},iV=function(X){var $=[X[0][0]],Q=[X[0][1]];for(var Y=1;Y<X.length;Y++)$[Y]=X[Y][0],Q[Y]=X[Y][1];return[$,Q]},z4=function(X){return function($){var Q=[X,$[0]];for(var Y=1;Y<$.length;Y++)Q.push(X,$[Y]);return Q}},oX=function(X){return function($){var Q=v0($);return e0(Q)?K(Q,z4(X),c1(U0($))):U5($)}},CY=YY,NY=$Y,TY=function(X){return function($){var Q=H4(X(0,U0($)));for(var Y=1;Y<$.length;Y++)Q.push.apply(Q,X(Y,$[Y]));return Q}},p7=function(X){return function($){var Q=X($),Y=Q[0],J=Q[1],Z=[Y],V=J;while(e0(V)){var D=X(V),L=D[0],B=D[1];Z.push(L),V=B}return Z}},G4=function(X){return function($){var Q=Math.max(1,X);return Q>=$.length?[U5($),[]]:[K($.slice(1,Q),c1(U0($))),$.slice(Q)]}},iX=function(X){return p7(G4(X))},b0=function(X,$){return K(X,$6($))},rX=function(X,$){return K(X,Q6($))},V4=function(X,$){return K(X,EY($))},vY=function(X,$){return K(X,X6($))},D4=function(X,$,Q){return K(X,OY($,Q))},q4=function(X){var $=NY(X);return function(Q,Y){return K(Q,$(Y))}},K4=function(X,$,Q){return K(X,gY($,Q))},sX=function(X){var $=IY(X);return function(Q,Y){return K(Q,$(Y))}},AY=function(X,$){return K(X,WY($))},tX=function(X,$,Q){return K(X,MY($,Q))},aX=function(X){var $=CY(X);return function(Q,Y){return K(Q,$(Y))}},eX=function(X,$,Q){return K(X,FY($,Q))},RY=function(X){var $=i7(X);return function(Q,Y){return K(Q,$(Y))}},SY=function(X){return function($){return K($,KY(X()))}},WY=SY,EY=function(X){return _1(function($){return K(X,$6($))})},_1=s(2,function(X,$){return K(X,TY(function(Q,Y){return $(Y,Q)}))}),X6=function(X){return function($){var Q=v0($),Y=[X($)];while(e0(Q))Y.push(X(Q)),Q=v0(Q);return Y}},rV=X6(u),sV=_1(u),$6=function(X){return Q6(function($,Q){return X(Q)})},Q6=function(X){return function($){var Q=[X(0,U0($))];for(var Y=1;Y<$.length;Y++)Q.push(X(Y,$[Y]));return Q}},OY=XY,MY=_X,gY=QY,FY=xX,IY=function(X){var $=i7(X);return function(Q){return $(function(Y,J){return Q(J)})}},o7=function(X){return i7(X)(function($,Q){return Q})},i7=function(X){return function($){return function(Q){var Y=X.map($(0,U0(Q)),N1);for(var J=1;J<Q.length;J++)Y=X.ap(X.map(Y,function(Z){return function(V){return K(Z,w5(V))}}),$(J,Q[J]));return Y}}},Y6=a0,z0="NonEmptyArray",tV=JY,aV=function(){return{concat:f7}},eV=ZY,XD=function(X){var $=d7(X);return{concat:function(Q,Y){return $(Y)(Q)}}},r7={URI:z0,map:b0},$D=M0(r7),QD={URI:z0,of:N1},YD={URI:z0,map:b0,mapWithIndex:rX},s7={URI:z0,map:b0,ap:V4},JD=r0(s7),ZD=s0(s7),HD={URI:z0,map:b0,ap:V4,of:N1},J6={URI:z0,map:b0,ap:V4,chain:_1},jD=q5(J6),PD={URI:z0,map:b0,ap:V4,of:N1,chain:_1},zD={URI:z0,reduce:D4,foldMap:q4,reduceRight:K4},GD={URI:z0,reduce:D4,foldMap:q4,reduceRight:K4,reduceWithIndex:tX,foldMapWithIndex:aX,reduceRightWithIndex:eX},VD={URI:z0,map:b0,reduce:D4,foldMap:q4,reduceRight:K4,traverse:sX,sequence:o7},DD={URI:z0,map:b0,mapWithIndex:rX,reduce:D4,foldMap:q4,reduceRight:K4,traverse:sX,sequence:o7,reduceWithIndex:tX,foldMapWithIndex:aX,reduceRightWithIndex:eX,traverseWithIndex:RY},qD={URI:z0,map:b0,alt:AY},KD={URI:z0,map:b0,extend:vY,extract:Y6},BD=N1(o0),LD=g0(r7),wD=F0(r7);var UD=I0(J6),CD=t0(s7),U0=a0,v0=function(X){return X.slice(1)},x1=Y4,d1=function(X){return X.slice(0,-1)},ND=HY,TD=jY,vD=function(X){return function($){return $.reduce(X.concat)}},AD=function(X){return function($){return X(U0($),v0($))}},RD=function(X){return function($){return X(d1($),x1($))}},yY=function(X){return function($){return J4([X(U0($))],v0($),!0)}},SD=function(X){return yY(function(){return X})},bY=function(X){return function($){return K(d1($),w5(X(x1($))))}},WD=function(X){return bY(function(){return X})},ED=k7,OD=_1,hY=function(X){return function($){return VY($.filter(function(Q,Y){return X(Y,Q)}))}},FD=DY,ID=qY,H6=function(X,$){return K(X,w5($))},yD=z4,bD=nX,hD={URI:z0,of:N1,map:b0,mapWithIndex:rX,ap:V4,chain:_1,extend:vY,extract:Y6,reduce:D4,foldMap:q4,reduceRight:K4,traverse:sX,sequence:o7,reduceWithIndex:tX,foldMapWithIndex:aX,reduceRightWithIndex:eX,traverseWithIndex:RY,alt:AY};var T1={};k1(T1,{zipWith:()=>{{return tY}},zip:()=>{{return aY}},zero:()=>{{return R5}},wither:()=>{{return Aq}},wilt:()=>{{return Rq}},updateAt:()=>{{return Zq}},unzip:()=>{{return Vq}},unsafeUpdateAt:()=>{{return AJ}},unsafeInsertAt:()=>{{return sq}},unsafeDeleteAt:()=>{{return RJ}},uniq:()=>{{return Kq}},union:()=>{{return L6}},unfold:()=>{{return g6}},traverseWithIndex:()=>{{return M6}},traverse:()=>{{return LJ}},toArray:()=>{{return tq}},takeRight:()=>{{return aD}},takeLeftWhile:()=>{{return eD}},takeLeft:()=>{{return tD}},tail:()=>{{return rD}},splitAt:()=>{{return XJ}},spanLeft:()=>{{return Xq}},sortBy:()=>{{return Bq}},sort:()=>{{return Gq}},some:()=>{{return SJ}},snoc:()=>{{return PK}},size:()=>{{return iD}},sequence:()=>{{return w4}},separate:()=>{{return S5}},scanRight:()=>{{return oD}},scanLeft:()=>{{return pD}},rotate:()=>{{return qq}},rights:()=>{{return Pq}},reverse:()=>{{return jq}},replicate:()=>{{return xD}},reduceWithIndex:()=>{{return E5}},reduceRightWithIndex:()=>{{return L4}},reduceRight:()=>{{return V9}},reduce:()=>{{return z9}},readonlyArray:()=>{{return GK}},range:()=>{{return HK}},prependW:()=>{{return cD}},prependToAll:()=>{{return zK}},prependAll:()=>{{return eY}},prepend:()=>{{return mD}},partitionWithIndex:()=>{{return W6}},partitionMapWithIndex:()=>{{return E6}},partitionMap:()=>{{return KJ}},partition:()=>{{return qJ}},of:()=>{{return o1}},modifyAt:()=>{{return sY}},matchW:()=>{{return xY}},matchRightW:()=>{{return pY}},matchRight:()=>{{return oY}},matchLeftW:()=>{{return nY}},matchLeft:()=>{{return fY}},match:()=>{{return dY}},mapWithIndex:()=>{{return VJ}},map:()=>{{return A6}},makeBy:()=>{{return mY}},lookup:()=>{{return X9}},let:()=>{{return QK}},lefts:()=>{{return zq}},last:()=>{{return z6}},isOutOfBound:()=>{{return N5}},isNonEmpty:()=>{{return r}},isEmpty:()=>{{return X1}},intersperse:()=>{{return Dq}},intersection:()=>{{return w6}},intercalate:()=>{{return c6}},insertAt:()=>{{return Jq}},init:()=>{{return sD}},head:()=>{{return P6}},guard:()=>{{return lq}},getUnionSemigroup:()=>{{return UJ}},getUnionMonoid:()=>{{return Wq}},getShow:()=>{{return F6}},getSemigroup:()=>{{return wJ}},getOrd:()=>{{return y6}},getMonoid:()=>{{return Sq}},getIntersectionSemigroup:()=>{{return Eq}},getEq:()=>{{return I6}},getDifferenceMagma:()=>{{return Oq}},fromPredicate:()=>{{return dD}},fromOptionK:()=>{{return Uq}},fromOption:()=>{{return cY}},fromEitherK:()=>{{return rq}},fromEither:()=>{{return _Y}},fromArray:()=>{{return aq}},foldRight:()=>{{return fD}},foldMapWithIndex:()=>{{return B4}},foldMap:()=>{{return G9}},foldLeft:()=>{{return nD}},flatten:()=>{{return Tq}},flatMap:()=>{{return $1}},flap:()=>{{return Mq}},findLastMap:()=>{{return K6}},findLastIndex:()=>{{return B6}},findLast:()=>{{return q6}},findIndex:()=>{{return G6}},findFirstMap:()=>{{return D6}},findFirst:()=>{{return V6}},filterWithIndex:()=>{{return BJ}},filterMapWithIndex:()=>{{return R6}},filterMap:()=>{{return S6}},filterE:()=>{{return iq}},filter:()=>{{return DJ}},extend:()=>{{return O6}},exists:()=>{{return eq}},every:()=>{{return m6}},empty:()=>{{return f}},elem:()=>{{return T5}},duplicate:()=>{{return vq}},dropRight:()=>{{return Qq}},dropLeftWhile:()=>{{return Yq}},dropLeft:()=>{{return $q}},difference:()=>{{return U6}},deleteAt:()=>{{return Hq}},cons:()=>{{return jK}},concatW:()=>{{return $J}},concat:()=>{{return Nq}},comprehension:()=>{{return Cq}},compact:()=>{{return W5}},chunksOf:()=>{{return wq}},chop:()=>{{return Lq}},chainWithIndex:()=>{{return iY}},chainRecDepthFirst:()=>{{return K9}},chainRecBreadthFirst:()=>{{return B9}},chainFirst:()=>{{return hq}},chain:()=>{{return ZK}},bindTo:()=>{{return $K}},bind:()=>{{return YK}},appendW:()=>{{return _D}},append:()=>{{return e7}},apSecond:()=>{{return Iq}},apS:()=>{{return JK}},apFirst:()=>{{return Fq}},ap:()=>{{return GJ}},altW:()=>{{return PJ}},alt:()=>{{return zJ}},_chainRecDepthFirst:()=>{{return j9}},_chainRecBreadthFirst:()=>{{return P9}},Zero:()=>{{return NJ}},Witherable:()=>{{return TJ}},Unfoldable:()=>{{return uq}},URI:()=>{{return m}},TraversableWithIndex:()=>{{return fq}},Traversable:()=>{{return u6}},Pointed:()=>{{return CJ}},Monad:()=>{{return bq}},FunctorWithIndex:()=>{{return gq}},Functor:()=>{{return D9}},FromEither:()=>{{return vJ}},FoldableWithIndex:()=>{{return nq}},Foldable:()=>{{return dq}},FilterableWithIndex:()=>{{return xq}},Filterable:()=>{{return _q}},Extend:()=>{{return cq}},Do:()=>{{return XK}},Compactable:()=>{{return h6}},ChainRecDepthFirst:()=>{{return pq}},ChainRecBreadthFirst:()=>{{return oq}},Chain:()=>{{return b6}},Apply:()=>{{return q9}},Applicative:()=>{{return yq}},Alternative:()=>{{return mq}},Alt:()=>{{return kq}}});var uY={equals:function(X,$){return X===$}},j6={equals:uY.equals,compare:function(X,$){return X<$?-1:X>$?1:0}},fI={equals:uY.equals,compare:j6.compare,top:Infinity,bottom:(-Infinity)};var uD={concat:function(X,$){return X-$}},kY={concat:function(X,$){return X+$}},lY={concat:function(X,$){return X*$}},pI={concat:kY.concat,empty:0},oI={concat:lY.concat,empty:1},iI={add:kY.concat,zero:0,mul:lY.concat,one:1,sub:uD.concat,degree:function(X){return 1},div:function(X,$){return X/$},mod:function(X,$){return X%$}};var A0=function(X,$){return{left:X,right:$}};function n1(X,$){return function(Q){var Y=X.traverse(Q);return function(J,Z){return Q.map(Y(J,Z),$.separate)}}}function f1(X,$){return function(Q){var Y=X.traverse(Q);return function(J,Z){return Q.map(Y(J,Z),$.compact)}}}function t7(X){return function($){var Q=X.wither($);return function(Y){return function(J){return Q(J,function(Z){return $.map(Y(Z),function(V){return V?O(Z):E})})}}}}function a7(X,$){return function(Q){return Q?$.of(void 0):X.zero()}}function dD(X){return function($){return X($)?[$]:f}}function X9(X,$){return $===void 0?function(Q){return X9(X,Q)}:N5(X,$)?E:O($[X])}function eD(X){return function($){var Q=[];for(var Y=0,J=$;Y<J.length;Y++){var Z=J[Y];if(!X(Z))break;Q.push(Z)}var V=Q.length;return V===$.length?$:V===0?f:Q}}function Xq(X){return function($){var Q=XJ(rY($,X))($),Y=Q[0],J=Q[1];return{init:Y,rest:J}}}function Yq(X){return function($){var Q=rY($,X);return Q===0?$:Q===$.length?f:$.slice(Q)}}function V6(X){return function($){for(var Q=0;Q<$.length;Q++)if(X($[Q]))return O($[Q]);return E}}function q6(X){return function($){for(var Q=$.length-1;Q>=0;Q--)if(X($[Q]))return O($[Q]);return E}}function aY(X,$){if($===void 0)return function(Q){return aY(Q,X)};return tY(X,$,function(Q,Y){return[Q,Y]})}function T5(X){return function($,Q){if(Q===void 0){var Y=T5(X);return function(V){return Y($,V)}}var J=function(V){return X.equals(V,$)},Z=0;for(;Z<Q.length;Z++)if(J(Q[Z]))return!0;return!1}}function Cq(X,$,Q){if(Q===void 0)Q=function(){return!0};var Y=function(J,Z){return r(Z)?$1(a0(Z),function(V){return Y(K(J,e7(V)),L5(Z))}):Q.apply(void 0,J)?[$.apply(void 0,J)]:f};return Y(f,X)}function L6(X){var $=sQ(X);return function(Q,Y){if(Y===void 0){var J=L6(X);return function(Z){return J(Z,Q)}}return r(Q)&&r(Y)?$(Y)(Q):r(Q)?Q:Y}}function w6(X){var $=T5(X);return function(Q,Y){if(Y===void 0){var J=w6(X);return function(Z){return J(Z,Q)}}return Q.filter(function(Z){return $(Z,Y)})}}function U6(X){var $=T5(X);return function(Q,Y){if(Y===void 0){var J=U6(X);return function(Z){return J(Z,Q)}}return Q.filter(function(Z){return!$(Z,Y)})}}function m6(X){return function($){return $.every(X)}}var lD=function(X,$,Q){if(Q||arguments.length===2){for(var Y=0,J=$.length,Z;Y<J;Y++)if(Z||!(Y in $)){if(!Z)Z=Array.prototype.slice.call($,0,Y);Z[Y]=$[Y]}}return X.concat(Z||Array.prototype.slice.call($))},X1=function(X){return X.length===0},r=E1,mD=B5,cD=FX,e7=oQ,_D=IX,mY=function(X,$){return X<=0?f:uX($)(X)},xD=function(X,$){return mY(X,function(){return $})},cY=function(X){return W1(X)?f:[X.value]},_Y=function(X){return U1(X)?f:[X.right]},xY=function(X,$){return function(Q){return r(Q)?$(Q):X()}},dY=xY,nY=function(X,$){return function(Q){return r(Q)?$(a0(Q),L5(Q)):X()}},fY=nY,nD=fY,pY=function(X,$){return function(Q){return r(Q)?$(dX(Q),Y4(Q)):X()}},oY=pY,fD=oY,iY=function(X){return function($){if(X1($))return f;var Q=[];for(var Y=0;Y<$.length;Y++)Q.push.apply(Q,X(Y,$[Y]));return Q}},pD=function(X,$){return function(Q){var Y=Q.length,J=new Array(Y+1);J[0]=X;for(var Z=0;Z<Y;Z++)J[Z+1]=$(J[Z],Q[Z]);return J}},oD=function(X,$){return function(Q){var Y=Q.length,J=new Array(Y+1);J[Y]=X;for(var Z=Y-1;Z>=0;Z--)J[Z]=$(Q[Z],J[Z+1]);return J}},iD=function(X){return X.length},N5=gX,P6=function(X){return r(X)?O(a0(X)):E},z6=function(X){return r(X)?O(Y4(X)):E},rD=function(X){return r(X)?O(L5(X)):E},sD=function(X){return r(X)?O(dX(X)):E},tD=function(X){return function($){return N5(X,$)?$:X===0?f:$.slice(0,X)}},aD=function(X){return function($){return N5(X,$)?$:X===0?f:$.slice(-X)}},rY=function(X,$){var Q=X.length,Y=0;for(;Y<Q;Y++)if(!$(X[Y]))break;return Y},$q=function(X){return function($){return X<=0||X1($)?$:X>=$.length?f:$.slice(X,$.length)}},Qq=function(X){return function($){return X<=0||X1($)?$:X>=$.length?f:$.slice(0,$.length-X)}},G6=function(X){return function($){for(var Q=0;Q<$.length;Q++)if(X($[Q]))return O(Q);return E}},D6=function(X){return function($){for(var Q=0;Q<$.length;Q++){var Y=X($[Q]);if(B0(Y))return Y}return E}},K6=function(X){return function($){for(var Q=$.length-1;Q>=0;Q--){var Y=X($[Q]);if(B0(Y))return Y}return E}},B6=function(X){return function($){for(var Q=$.length-1;Q>=0;Q--)if(X($[Q]))return O(Q);return E}},Jq=function(X,$){return function(Q){return X<0||X>Q.length?E:O(yX(X,$,Q))}},Zq=function(X,$){return sY(X,function(){return $})},Hq=function(X){return function($){return N5(X,$)?E:O(RJ(X,$))}},sY=function(X,$){return function(Q){return N5(X,Q)?E:O(AJ(X,$(Q[X]),Q))}},jq=function(X){return X.length<=1?X:X.slice().reverse()},Pq=function(X){var $=[];for(var Q=0;Q<X.length;Q++){var Y=X[Q];if(Y._tag==="Right")$.push(Y.right)}return $},zq=function(X){var $=[];for(var Q=0;Q<X.length;Q++){var Y=X[Q];if(Y._tag==="Left")$.push(Y.left)}return $},Gq=function(X){return function($){return $.length<=1?$:$.slice().sort(X.compare)}},tY=function(X,$,Q){var Y=[],J=Math.min(X.length,$.length);for(var Z=0;Z<J;Z++)Y[Z]=Q(X[Z],$[Z]);return Y},Vq=function(X){var $=[],Q=[];for(var Y=0;Y<X.length;Y++)$[Y]=X[Y][0],Q[Y]=X[Y][1];return[$,Q]},eY=function(X){var $=lX(X);return function(Q){return r(Q)?$(Q):Q}},Dq=function(X){var $=mX(X);return function(Q){return r(Q)?$(Q):Q}},qq=function(X){var $=hX(X);return function(Q){return r(Q)?$(Q):Q}},Kq=function(X){var $=bX(X);return function(Q){return r(Q)?$(Q):Q}},Bq=function(X){var $=rQ(X);return function(Q){return r(Q)?$(Q):Q}},Lq=function(X){var $=cX(X);return function(Q){return r(Q)?$(Q):f}},XJ=function(X){return function($){return X>=1&&r($)?u7(X)($):X1($)?[$,f]:[f,$]}},wq=function(X){var $=aQ(X);return function(Q){return r(Q)?$(Q):f}},Uq=function(X){return function(){var $=[];for(var Q=0;Q<arguments.length;Q++)$[Q]=arguments[Q];return cY(X.apply(void 0,$))}},$J=function(X){return function($){return X1($)?X:X1(X)?$:$.concat(X)}},Nq=$J,X0=function(X,$){return K(X,A6($))},$9=function(X,$){return K(X,VJ($))},O1=function(X,$){return K(X,GJ($))},Q9=function(X,$){return K(X,DJ($))},Y9=function(X,$){return K(X,S6($))},J9=function(X,$){return K(X,qJ($))},Z9=function(X,$){return K(X,KJ($))},QJ=function(X,$){return K(X,W6($))},YJ=function(X,$){return K(X,E6($))},C6=function(X,$){return K(X,zJ($))},p1=function(X,$,Q){return K(X,z9($,Q))},v5=function(X){var $=G9(X);return function(Q,Y){return K(Q,$(Y))}},A5=function(X,$,Q){return K(X,V9($,Q))},N6=function(X,$,Q){return K(X,E5($,Q))},T6=function(X){var $=B4(X);return function(Q,Y){return K(Q,$(Y))}},v6=function(X,$,Q){return K(X,L4($,Q))},JJ=function(X,$){return K(X,R6($))},ZJ=function(X,$){return K(X,BJ($))},HJ=function(X,$){return K(X,O6($))},H9=function(X){var $=LJ(X);return function(Q,Y){return K(Q,$(Y))}},jJ=function(X){var $=M6(X);return function(Q,Y){return K(Q,$(Y))}},j9=function(X,$){return K(X,K9($))},P9=function(X,$){return K(X,B9($))},o1=eQ,R5=function(){return f},PJ=function(X){return function($){return $.concat(X())}},zJ=PJ,GJ=function(X){return $1(function($){return K(X,A6($))})},$1=s(2,function(X,$){return K(X,iY(function(Q,Y){return $(Y,Q)}))}),Tq=$1(u),A6=function(X){return function($){return $.map(function(Q){return X(Q)})}},VJ=function(X){return function($){return $.map(function(Q,Y){return X(Y,Q)})}},S5=function(X){var $=[],Q=[];for(var Y=0,J=X;Y<J.length;Y++){var Z=J[Y];if(Z._tag==="Left")$.push(Z.left);else Q.push(Z.right)}return A0($,Q)},DJ=function(X){return function($){return $.filter(X)}},R6=function(X){return function($){var Q=[];for(var Y=0;Y<$.length;Y++){var J=X(Y,$[Y]);if(B0(J))Q.push(J.value)}return Q}},S6=function(X){return R6(function($,Q){return X(Q)})},W5=S6(u),qJ=function(X){return W6(function($,Q){return X(Q)})},W6=function(X){return function($){var Q=[],Y=[];for(var J=0;J<$.length;J++){var Z=$[J];if(X(J,Z))Y.push(Z);else Q.push(Z)}return A0(Q,Y)}},KJ=function(X){return E6(function($,Q){return X(Q)})},E6=function(X){return function($){var Q=[],Y=[];for(var J=0;J<$.length;J++){var Z=X(J,$[J]);if(Z._tag==="Left")Q.push(Z.left);else Y.push(Z.right)}return A0(Q,Y)}},BJ=function(X){return function($){return $.filter(function(Q,Y){return X(Y,Q)})}},O6=function(X){return function($){return $.map(function(Q,Y){return X($.slice(Y))})}},vq=O6(u),B4=function(X){return function($){return function(Q){return Q.reduce(function(Y,J,Z){return X.concat(Y,$(Z,J))},X.empty)}}},z9=function(X,$){return E5(X,function(Q,Y,J){return $(Y,J)})},G9=function(X){var $=B4(X);return function(Q){return $(function(Y,J){return Q(J)})}},E5=function(X,$){return function(Q){var Y=Q.length,J=X;for(var Z=0;Z<Y;Z++)J=$(Z,J,Q[Z]);return J}},V9=function(X,$){return L4(X,function(Q,Y,J){return $(Y,J)})},L4=function(X,$){return function(Q){return Q.reduceRight(function(Y,J,Z){return $(Z,J,Y)},X)}},LJ=function(X){var $=M6(X);return function(Q){return $(function(Y,J){return Q(J)})}},w4=function(X){return function($){return p1($,X.of(R5()),function(Q,Y){return X.ap(X.map(Q,function(J){return function(Z){return K(J,e7(Z))}}),Y)})}},M6=function(X){return function($){return E5(X.of(R5()),function(Q,Y,J){return X.ap(X.map(Y,function(Z){return function(V){return K(Z,e7(V))}}),$(Q,J))})}},Aq=function(X){var $=k6(X);return function(Q){return function(Y){return $(Y,Q)}}},Rq=function(X){var $=l6(X);return function(Q){return function(Y){return $(Y,Q)}}},g6=function(X,$){var Q=[],Y=X;while(!0){var J=$(Y);if(B0(J)){var Z=J.value,V=Z[0],D=Z[1];Q.push(V),Y=D}else break}return Q},m="ReadonlyArray",F6=function(X){return{show:function($){return"[".concat($.map(X.show).join(", "),"]")}}},wJ=function(){return{concat:function(X,$){return X1(X)?$:X1($)?X:X.concat($)}}},Sq=function(){return{concat:wJ().concat,empty:f}},I6=function(X){return y0(function($,Q){return $.length===Q.length&&$.every(function(Y,J){return X.equals(Y,Q[J])})})},y6=function(X){return b7(function($,Q){var Y=$.length,J=Q.length,Z=Math.min(Y,J);for(var V=0;V<Z;V++){var D=X.compare($[V],Q[V]);if(D!==0)return D}return j6.compare(Y,J)})},UJ=function(X){var $=L6(X);return{concat:function(Q,Y){return $(Y)(Q)}}},Wq=function(X){return{concat:UJ(X).concat,empty:f}},Eq=function(X){var $=w6(X);return{concat:function(Q,Y){return $(Y)(Q)}}},Oq=function(X){var $=U6(X);return{concat:function(Q,Y){return $(Y)(Q)}}},D9={URI:m,map:X0},Mq=M0(D9),CJ={URI:m,of:o1},gq={URI:m,map:X0,mapWithIndex:$9},q9={URI:m,map:X0,ap:O1},Fq=r0(q9),Iq=s0(q9),yq={URI:m,map:X0,ap:O1,of:o1},b6={URI:m,map:X0,ap:O1,chain:$1},bq={URI:m,map:X0,ap:O1,of:o1,chain:$1},hq=q5(b6),uq={URI:m,unfold:g6},kq={URI:m,map:X0,alt:C6},NJ={URI:m,zero:R5},lq=a7(NJ,CJ),mq={URI:m,map:X0,ap:O1,of:o1,alt:C6,zero:R5},cq={URI:m,map:X0,extend:HJ},h6={URI:m,compact:W5,separate:S5},_q={URI:m,map:X0,compact:W5,separate:S5,filter:Q9,filterMap:Y9,partition:J9,partitionMap:Z9},xq={URI:m,map:X0,mapWithIndex:$9,compact:W5,separate:S5,filter:Q9,filterMap:Y9,partition:J9,partitionMap:Z9,partitionMapWithIndex:YJ,partitionWithIndex:QJ,filterMapWithIndex:JJ,filterWithIndex:ZJ},dq={URI:m,reduce:p1,foldMap:v5,reduceRight:A5},nq={URI:m,reduce:p1,foldMap:v5,reduceRight:A5,reduceWithIndex:N6,foldMapWithIndex:T6,reduceRightWithIndex:v6},u6={URI:m,map:X0,reduce:p1,foldMap:v5,reduceRight:A5,traverse:H9,sequence:w4},fq={URI:m,map:X0,mapWithIndex:$9,reduce:p1,foldMap:v5,reduceRight:A5,reduceWithIndex:N6,foldMapWithIndex:T6,reduceRightWithIndex:v6,traverse:H9,sequence:w4,traverseWithIndex:jJ},K9=function(X){return function($){var Q=lD([],X($),!0),Y=[];while(Q.length>0){var J=Q.shift();if(U1(J))Q.unshift.apply(Q,X(J.left));else Y.push(J.right)}return Y}},pq={URI:m,map:X0,ap:O1,chain:$1,chainRec:j9},B9=function(X){return function($){var Q=X($),Y=[],J=[];function Z(B){if(U1(B))X(B.left).forEach(function(R){return Y.push(R)});else J.push(B.right)}for(var V=0,D=Q;V<D.length;V++){var L=D[V];Z(L)}while(Y.length>0)Z(Y.shift());return J}},oq={URI:m,map:X0,ap:O1,chain:$1,chainRec:P9},k6=f1(u6,h6),l6=n1(u6,h6),TJ={URI:m,map:X0,compact:W5,separate:S5,filter:Q9,filterMap:Y9,partition:J9,partitionMap:Z9,reduce:p1,foldMap:v5,reduceRight:A5,traverse:H9,sequence:w4,wither:k6,wilt:l6},iq=t7(TJ),vJ={URI:m,fromEither:_Y},rq=K5(vJ),sq=yX,AJ=function(X,$,Q){return r(Q)?iQ(X,$,Q):Q},RJ=function(X,$){var Q=$.slice();return Q.splice(X,1),Q},tq=function(X){return X.slice()},aq=function(X){return X1(X)?f:X.slice()},f=MX,SJ=function(X){return function($){return $.some(X)}},eq=SJ,c6=function(X){var $=k7(X);return function(Q){return dY(function(){return X.empty},$(Q))}},XK=o1(o0),$K=g0(D9),QK=F0(D9);var YK=I0(b6),JK=t0(q9),ZK=$1,HK=tQ,jK=PY,PK=zY,zK=eY,GK={URI:m,compact:W5,separate:S5,map:X0,ap:O1,of:o1,chain:$1,filter:Q9,filterMap:Y9,partition:J9,partitionMap:Z9,mapWithIndex:$9,partitionMapWithIndex:YJ,partitionWithIndex:QJ,filterMapWithIndex:JJ,filterWithIndex:ZJ,alt:C6,zero:R5,unfold:g6,reduce:p1,foldMap:v5,reduceRight:A5,traverse:H9,sequence:w4,reduceWithIndex:N6,foldMapWithIndex:T6,reduceRightWithIndex:v6,traverseWithIndex:jJ,extend:HJ,wither:k6,wilt:l6};function KK(X){return function($){return X($)?[$]:[]}}function OK(X){return function($){var Q=[];for(var Y=0,J=$;Y<J.length;Y++){var Z=J[Y];if(!X(Z))break;Q.push(Z)}return Q}}function MK(X){return function($){var Q=_J(uJ($,X))($),Y=Q[0],J=Q[1];return{init:Y,rest:J}}}function IK(X){return function($){return $.slice(uJ($,X))}}function bK(X){return V6(X)}function uK(X){return q6(X)}function mJ(X,$){if($===void 0)return function(Q){return mJ(Q,X)};return lJ(X,$,function(Q,Y){return[Q,Y]})}function XB(X,$,Q){if(Q===void 0)Q=function(){return!0};var Y=function(J,Z){return a(Z)?Q1(U0(Z),function(V){return Y(K(J,L9(V)),v0(Z))}):Q.apply(void 0,J)?[$.apply(void 0,J)]:[]};return Y([],X)}function x6(X){var $=d7(X);return function(Q,Y){if(Y===void 0){var J=x6(X);return function(Z){return J(Z,Q)}}return a(Q)&&a(Y)?$(Y)(Q):a(Q)?J0(Q):J0(Y)}}function d6(X){var $=_6(X);return function(Q,Y){if(Y===void 0){var J=d6(X);return function(Z){return J(Z,Q)}}return Q.filter(function(Z){return $(Z,Y)})}}function n6(X){var $=_6(X);return function(Q,Y){if(Y===void 0){var J=n6(X);return function(Z){return J(Z,Q)}}return Q.filter(function(Z){return!$(Z,Y)})}}var i1=function(X){return X.length===0},a=e0,VK=c1,DK=l7,L9=w5,qK=m7,WJ=function(X,$){return X<=0?[]:j4($)(X)},EJ=function(X,$){return WJ(X,function(){return $})},OJ=function(X){return W1(X)?[]:[X.value]},MJ=function(X){return U1(X)?[]:[X.right]},gJ=function(X,$){return function(Q){return a(Q)?$(Q):X()}},BK=gJ,FJ=function(X,$){return function(Q){return a(Q)?$(U0(Q),v0(Q)):X()}},IJ=FJ,LK=IJ,yJ=function(X,$){return function(Q){return a(Q)?$(d1(Q),x1(Q)):X()}},bJ=yJ,wK=bJ,hJ=function(X){return function($){var Q=[];for(var Y=0;Y<$.length;Y++)Q.push.apply(Q,X(Y,$[Y]));return Q}},UK=function(X,$){return function(Q){var Y=Q.length,J=new Array(Y+1);J[0]=X;for(var Z=0;Z<Y;Z++)J[Z+1]=$(J[Z],Q[Z]);return J}},CK=function(X,$){return function(Q){var Y=Q.length,J=new Array(Y+1);J[Y]=X;for(var Z=Y-1;Z>=0;Z--)J[Z]=$(Q[Z],J[Z+1]);return J}},NK=function(X){return X.length},U4=Z4,TK=X9,vK=P6,AK=z6,RK=function(X){return a(X)?O(v0(X)):E},SK=function(X){return a(X)?O(d1(X)):E},WK=function(X){return function($){return U4(X,$)?J0($):$.slice(0,X)}},EK=function(X){return function($){return U4(X,$)?J0($):X===0?[]:$.slice(-X)}},uJ=function(X,$){var Q=X.length,Y=0;for(;Y<Q;Y++)if(!$(X[Y]))break;return Y},gK=function(X){return function($){return X<=0||i1($)?J0($):X>=$.length?[]:$.slice(X,$.length)}},FK=function(X){return function($){return X<=0||i1($)?J0($):X>=$.length?[]:$.slice(0,$.length-X)}},yK=G6,hK=D6,kK=K6,lK=B6,J0=function(X){return X.slice()},mK=function(X,$){return function(Q){return X<0||X>Q.length?E:O(KZ(X,$,Q))}},cK=function(X,$){return kJ(X,function(){return $})},_K=function(X){return function($){return U4(X,$)?E:O(LZ(X,$))}},kJ=function(X,$){return function(Q){return U4(X,Q)?E:O(BZ(X,$(Q[X]),Q))}},xK=function(X){return i1(X)?[]:X.slice().reverse()},dK=function(X){var $=[];for(var Q=0;Q<X.length;Q++){var Y=X[Q];if(Y._tag==="Right")$.push(Y.right)}return $},nK=function(X){var $=[];for(var Q=0;Q<X.length;Q++){var Y=X[Q];if(Y._tag==="Left")$.push(Y.left)}return $},fK=function(X){return function($){return $.length<=1?J0($):$.slice().sort(X.compare)}},lJ=function(X,$,Q){var Y=[],J=Math.min(X.length,$.length);for(var Z=0;Z<J;Z++)Y[Z]=Q(X[Z],$[Z]);return Y},pK=function(X){var $=[],Q=[];for(var Y=0;Y<X.length;Y++)$[Y]=X[Y][0],Q[Y]=X[Y][1];return[$,Q]},cJ=function(X){var $=z4(X);return function(Q){return a(Q)?$(Q):[]}},oK=function(X){var $=oX(X);return function(Q){return a(Q)?$(Q):J0(Q)}},iK=function(X){var $=n7(X);return function(Q){return a(Q)?$(Q):J0(Q)}},_6=T5,rK=function(X){var $=x7(X);return function(Q){return a(Q)?$(Q):J0(Q)}},sK=function(X){var $=fX(X);return function(Q){return a(Q)?$(Q):J0(Q)}},tK=function(X){var $=p7(X);return function(Q){return a(Q)?$(Q):[]}},_J=function(X){return function($){return X>=1&&a($)?G4(X)($):i1($)?[J0($),[]]:[[],J0($)]}},aK=function(X){var $=iX(X);return function(Q){return a(Q)?$(Q):[]}},eK=function(X){return function(){var $=[];for(var Q=0;Q<arguments.length;Q++)$[Q]=arguments[Q];return OJ(X.apply(void 0,$))}},xJ=function(X){return function($){return i1($)?J0(X):i1(X)?J0($):$.concat(X)}},$B=xJ,$0=function(X,$){return K(X,C4($))},w9=function(X,$){return K(X,sJ($))},M1=function(X,$){return K(X,rJ($))},U9=function(X,$){return K(X,tJ($))},C9=function(X,$){return K(X,s6($))},N9=function(X,$){return K(X,aJ($))},T9=function(X,$){return K(X,eJ($))},dJ=function(X,$){return K(X,t6($))},nJ=function(X,$){return K(X,a6($))},f6=function(X,$){return K(X,$Z($))},r1=function(X,$,Q){return K(X,X8($,Q))},O5=function(X){var $=YZ(X);return function(Q,Y){return K(Q,$(Y))}},M5=function(X,$,Q){return K(X,ZZ($,Q))},p6=function(X,$,Q){return K(X,$8($,Q))},o6=function(X){var $=JZ(X);return function(Q,Y){return K(Q,$(Y))}},i6=function(X,$,Q){return K(X,HZ($,Q))},fJ=function(X,$){return K(X,r6($))},pJ=function(X,$){return K(X,QZ($))},oJ=function(X,$){return K(X,e6($))},v9=function(X){var $=jZ(X);return function(Q,Y){return K(Q,$(Y))}},iJ=function(X){var $=Q8(X);return function(Q,Y){return K(Q,$(Y))}},QB=j9,YB=P9,s1=N1,g5=function(){return[]},C4=function(X){return function($){return $.map(function(Q){return X(Q)})}},rJ=function(X){return Q1(function($){return K(X,C4($))})},Q1=s(2,function(X,$){return K(X,hJ(function(Q,Y){return $(Y,Q)}))}),JB=Q1(u),sJ=function(X){return function($){return $.map(function(Q,Y){return X(Y,Q)})}},r6=function(X){return function($){var Q=[];for(var Y=0;Y<$.length;Y++){var J=X(Y,$[Y]);if(B0(J))Q.push(J.value)}return Q}},s6=function(X){return r6(function($,Q){return X(Q)})},F5=s6(u),I5=function(X){var $=[],Q=[];for(var Y=0,J=X;Y<J.length;Y++){var Z=J[Y];if(Z._tag==="Left")$.push(Z.left);else Q.push(Z.right)}return A0($,Q)},tJ=function(X){return function($){return $.filter(X)}},aJ=function(X){return t6(function($,Q){return X(Q)})},t6=function(X){return function($){var Q=[],Y=[];for(var J=0;J<$.length;J++){var Z=$[J];if(X(J,Z))Y.push(Z);else Q.push(Z)}return A0(Q,Y)}},eJ=function(X){return a6(function($,Q){return X(Q)})},a6=function(X){return function($){var Q=[],Y=[];for(var J=0;J<$.length;J++){var Z=X(J,$[J]);if(Z._tag==="Left")Q.push(Z.left);else Y.push(Z.right)}return A0(Q,Y)}},XZ=function(X){return function($){return $.concat(X())}},$Z=XZ,QZ=function(X){return function($){return $.filter(function(Q,Y){return X(Y,Q)})}},e6=function(X){return function($){return $.map(function(Q,Y){return X($.slice(Y))})}},ZB=e6(u),YZ=G9,JZ=B4,X8=z9,$8=E5,ZZ=V9,HZ=L4,jZ=function(X){var $=Q8(X);return function(Q){return $(function(Y,J){return Q(J)})}},N4=function(X){return function($){return r1($,X.of(g5()),function(Q,Y){return X.ap(X.map(Q,function(J){return function(Z){return K(J,L9(Z))}}),Y)})}},Q8=function(X){return function($){return $8(X.of(g5()),function(Q,Y,J){return X.ap(X.map(Y,function(Z){return function(V){return K(Z,L9(V))}}),$(Q,J))})}},HB=function(X){var $=P8(X);return function(Q){return function(Y){return $(Y,Q)}}},jB=function(X){var $=z8(X);return function(Q){return function(Y){return $(Y,Q)}}},Y8=function(X,$){var Q=[],Y=X;while(!0){var J=$(Y);if(B0(J)){var Z=J.value,V=Z[0],D=Z[1];Q.push(V),Y=D}else break}return Q},c="Array",PB=F6,PZ=function(){return{concat:function(X,$){return X.concat($)}}},zB=function(){return{concat:PZ().concat,empty:[]}},GB=I6,VB=y6,zZ=function(X){var $=x6(X);return{concat:function(Q,Y){return $(Y)(Q)}}},DB=function(X){return{concat:zZ(X).concat,empty:[]}},qB=function(X){var $=d6(X);return{concat:function(Q,Y){return $(Y)(Q)}}},KB=function(X){var $=n6(X);return{concat:function(Q,Y){return $(Y)(Q)}}},A9={URI:c,map:$0},BB=M0(A9),GZ={URI:c,of:s1},LB={URI:c,map:$0,mapWithIndex:w9},R9={URI:c,map:$0,ap:M1},wB=r0(R9),UB=s0(R9),CB={URI:c,map:$0,ap:M1,of:s1},J8={URI:c,map:$0,ap:M1,chain:Q1},NB=q5(J8),TB={URI:c,map:$0,ap:M1,of:s1,chain:Q1},vB={URI:c,unfold:Y8},AB={URI:c,map:$0,alt:f6},VZ={URI:c,zero:g5},RB=a7(VZ,GZ),SB={URI:c,map:$0,ap:M1,of:s1,alt:f6,zero:g5},WB={URI:c,map:$0,extend:oJ},Z8={URI:c,compact:F5,separate:I5},EB={URI:c,map:$0,compact:F5,separate:I5,filter:U9,filterMap:C9,partition:N9,partitionMap:T9},OB={URI:c,map:$0,mapWithIndex:w9,compact:F5,separate:I5,filter:U9,filterMap:C9,partition:N9,partitionMap:T9,partitionMapWithIndex:nJ,partitionWithIndex:dJ,filterMapWithIndex:fJ,filterWithIndex:pJ},H8={URI:c,reduce:r1,foldMap:O5,reduceRight:M5},MB={URI:c,reduce:r1,foldMap:O5,reduceRight:M5,reduceWithIndex:p6,foldMapWithIndex:o6,reduceRightWithIndex:i6},j8={URI:c,map:$0,reduce:r1,foldMap:O5,reduceRight:M5,traverse:v9,sequence:N4},gB={URI:c,map:$0,mapWithIndex:w9,reduce:r1,foldMap:O5,reduceRight:M5,reduceWithIndex:p6,foldMapWithIndex:o6,reduceRightWithIndex:i6,traverse:v9,sequence:N4,traverseWithIndex:iJ},P8=f1(j8,Z8),z8=n1(j8,Z8),DZ={URI:c,map:$0,compact:F5,separate:I5,filter:U9,filterMap:C9,partition:N9,partitionMap:T9,reduce:r1,foldMap:O5,reduceRight:M5,traverse:v9,sequence:N4,wither:P8,wilt:z8},FB=K9,IB={URI:c,map:$0,ap:M1,chain:Q1,chainRec:QB},yB=B9,bB={URI:c,map:$0,ap:M1,chain:Q1,chainRec:YB},hB=t7(DZ),qZ={URI:c,fromEither:MJ},uB=K5(qZ),KZ=c7,BZ=function(X,$,Q){return a(Q)?_7(X,$,Q):[]},LZ=function(X,$){var Q=$.slice();return Q.splice(X,1),Q},kB=m6,wZ=function(X){return function($){return $.some(X)}},lB=wZ,mB=c6,cB=s1(o0),_B=g0(A9),xB=F0(A9);var dB=I0(J8),nB=t0(R9),fB=Q1,pB=P4,oB=[],iB=Z6,rB=H6,sB=cJ,tB={URI:c,compact:F5,separate:I5,map:$0,ap:M1,of:s1,chain:Q1,filter:U9,filterMap:C9,partition:N9,partitionMap:T9,mapWithIndex:w9,partitionMapWithIndex:nJ,partitionWithIndex:dJ,filterMapWithIndex:fJ,filterWithIndex:pJ,alt:f6,zero:g5,unfold:Y8,reduce:r1,foldMap:O5,reduceRight:M5,traverse:v9,sequence:N4,reduceWithIndex:p6,foldMapWithIndex:o6,reduceRightWithIndex:i6,traverseWithIndex:iJ,extend:oJ,wither:P8,wilt:z8};var aB=function(){return{concat:function(X,$){return K(X,eB($))}}},UZ=function(){return{concat:aB().concat,empty:vQ}};var CZ=function(X){return function($){return!X($)}},eB=function(X){return function($){return function(Q){return $(Q)||X(Q)}}};function NZ(X){return function($){return X($)?T4($):t1}}var t1=E,T4=O;var $L=function(X){return X._tag==="Left"?t1:T4(X.right)},TZ=function(X,$){return K(X,v4($))},QL=function(X,$){return K(X,YL($))};var G8="Option";var vZ=function(X){return{concat:function($,Q){return g1($)?Q:g1(Q)?$:T4(X.concat($.value,Q.value))},empty:t1}},v4=function(X){return function($){return g1($)?t1:T4(X($.value))}},AZ={URI:G8,map:TZ},Ay=s(2,Q4(AZ)),Ry=I7(AZ);var YL=function(X){return function($){return g1($)?t1:g1(X)?t1:T4($.value(X.value))}};var JL=s(2,function(X,$){return g1(X)?t1:$(X.value)}),RZ={URI:G8,map:TZ,ap:QL,chain:JL};var Sy=s(2,function(X,$){return g1(X)?$():X});var ZL=$L,HL={URI:G8,fromEither:ZL},SZ=B0,g1=function(X){return X._tag==="None"};var jL=function(X){return function($){return g1($)?X():$.value}},WZ=jL;var Wy=s(2,C1(RZ)),Ey=s(2,OQ(HL,RZ));var PL=function(){return{concat:function(X,$){return I(X,$)}}},OZ=function(){return{concat:PL().concat,empty:u}};function MZ(X){return function($){return I($,X.fromIO)}}function gZ(X,$){var Q=C1($);return function(Y,J){return Q(Y,I(J,X.fromIO))}}function FZ(X){return function($,Q){if(Q===void 0){var Y=FZ(X);return function(B){return Y($,B)}}var J=Q.entries(),Z;while(!(Z=J.next()).done){var V=Z.value,D=V[0],L=V[1];if(X.equals(D,$))return O([D,L])}return E}}function V8(X){var $=FZ(X);return function(Q,Y){if(Y===void 0){var J=V8(X);return function(Z){return J(Q,Z)}}return K($(Q,Y),v4(function(Z){var V=Z[0],D=Z[1];return D}))}}var IZ=V8;var A4=function(X){return cQ(X)(X.empty)},$b={concat:_Q.concat,empty:void 0};var Qb={concat:xQ.concat,empty:!0},Yb={concat:dQ.concat,empty:!1};var Jb={concat:nQ.concat,empty:""},Zb={concat:fQ.concat,empty:0},Hb={concat:pQ.concat,empty:1};var F1={};k1(F1,{traverseSeqArrayWithIndex:()=>{{return kL}},traverseSeqArray:()=>{{return dZ}},traverseReadonlyNonEmptyArrayWithIndexSeq:()=>{{return _Z}},traverseReadonlyNonEmptyArrayWithIndex:()=>{{return cZ}},traverseReadonlyArrayWithIndexSeq:()=>{{return L8}},traverseReadonlyArrayWithIndex:()=>{{return B8}},traverseArrayWithIndex:()=>{{return hL}},traverseArray:()=>{{return xZ}},taskSeq:()=>{{return xL}},task:()=>{{return _L}},tapIO:()=>{{return lZ}},tap:()=>{{return kZ}},sequenceSeqArray:()=>{{return lL}},sequenceArray:()=>{{return uL}},of:()=>{{return u0}},never:()=>{{return mZ}},map:()=>{{return q8}},let:()=>{{return IL}},getSemigroup:()=>{{return dL}},getRaceMonoid:()=>{{return qL}},getMonoid:()=>{{return nL}},fromTask:()=>{{return R4}},fromIOK:()=>{{return WL}},fromIO:()=>{{return a1}},flatten:()=>{{return DL}},flatMapIO:()=>{{return uZ}},flatMap:()=>{{return k0}},flap:()=>{{return LL}},delay:()=>{{return VL}},chainIOK:()=>{{return EL}},chainFirstIOK:()=>{{return OL}},chainFirst:()=>{{return cL}},chain:()=>{{return mL}},bindTo:()=>{{return FL}},bind:()=>{{return yL}},asUnit:()=>{{return BL}},as:()=>{{return KL}},apSecond:()=>{{return CL}},apS:()=>{{return bL}},apFirst:()=>{{return UL}},ap:()=>{{return yZ}},URI:()=>{{return G0}},Pointed:()=>{{return wL}},MonadTask:()=>{{return AL}},MonadIO:()=>{{return vL}},Monad:()=>{{return TL}},Functor:()=>{{return y5}},FromTask:()=>{{return ML}},FromIO:()=>{{return E9}},Do:()=>{{return gL}},Chain:()=>{{return W9}},ApplySeq:()=>{{return bZ}},ApplyPar:()=>{{return S9}},ApplicativeSeq:()=>{{return hZ}},ApplicativePar:()=>{{return NL}},ApT:()=>{{return K8}}});function VL(X){return function($){return function(){return new Promise(function(Q){setTimeout(function(){Promise.resolve().then($).then(Q)},X)})}}}function qL(){return{concat:function(X,$){return function(){return Promise.race([Promise.resolve().then(X),Promise.resolve().then($)])}},empty:mZ}}var a1=function(X){return function(){return Promise.resolve().then(X)}},h0=function(X,$){return K(X,q8($))},e1=function(X,$){return K(X,yZ($))},D8=function(X,$){return k0(X,function(Q){return K($,q8(Q))})},q8=function(X){return function($){return function(){return Promise.resolve().then($).then(X)}}},yZ=function(X){return function($){return function(){return Promise.all([Promise.resolve().then($),Promise.resolve().then(X)]).then(function(Q){var Y=Q[0],J=Q[1];return Y(J)})}}},u0=function(X){return function(){return Promise.resolve(X)}},k0=s(2,function(X,$){return function(){return Promise.resolve().then(X).then(function(Q){return $(Q)()})}}),DL=k0(u),G0="Task",y5={URI:G0,map:h0},KL=s(2,Q4(y5)),BL=I7(y5),LL=M0(y5),wL={URI:G0,of:u0},S9={URI:G0,map:h0,ap:e1},UL=r0(S9),CL=s0(S9),NL={URI:G0,map:h0,ap:e1,of:u0},bZ={URI:G0,map:h0,ap:D8},hZ={URI:G0,map:h0,ap:D8,of:u0},W9={URI:G0,map:h0,ap:e1,chain:k0},TL={URI:G0,map:h0,of:u0,ap:e1,chain:k0},vL={URI:G0,map:h0,of:u0,ap:e1,chain:k0,fromIO:a1},R4=u,AL={URI:G0,map:h0,of:u0,ap:e1,chain:k0,fromIO:a1,fromTask:R4},E9={URI:G0,fromIO:a1},RL={flatMap:k0},SL={fromIO:E9.fromIO},uZ=SQ(SL,RL),kZ=s(2,C1(W9)),lZ=s(2,gZ(E9,W9)),WL=MZ(E9),EL=uZ,OL=lZ,ML={URI:G0,fromIO:a1,fromTask:R4},mZ=function(){return new Promise(function(X){return})},gL=u0(o0),FL=g0(y5),IL=F0(y5);var yL=I0(W9),bL=t0(S9),K8=u0(X4),cZ=function(X){return function($){return function(){return Promise.all($.map(function(Q,Y){return Promise.resolve().then(function(){return X(Y,Q)()})}))}}},B8=function(X){var $=cZ(X);return function(Q){return D5(Q)?$(Q):K8}},_Z=function(X){return function($){return function(){return g7($).reduce(function(Q,Y,J){return Q.then(function(Z){return Promise.resolve().then(X(J+1,Y)).then(function(V){return Z.push(V),Z})})},Promise.resolve().then(X(0,e5($))).then(M7))}}},L8=function(X){var $=_Z(X);return function(Q){return D5(Q)?$(Q):K8}},hL=B8,xZ=function(X){return B8(function($,Q){return X(Q)})},uL=xZ(u),kL=L8,dZ=function(X){return L8(function($,Q){return X(Q)})},lL=dZ(u),mL=k0,cL=kZ,_L={URI:G0,map:h0,of:u0,ap:e1,chain:k0,fromIO:a1,fromTask:R4},xL={URI:G0,map:h0,of:u0,ap:D8,chain:k0,fromIO:a1,fromTask:R4},dL=F7(bZ),nL=WQ(hZ);var b5={};k1(b5,{trimRight:()=>{{return eL}},trimLeft:()=>{{return aL}},trim:()=>{{return tL}},toUpperCase:()=>{{return iL}},toLowerCase:()=>{{return rL}},startsWith:()=>{{return Zw}},split:()=>{{return Yw}},slice:()=>{{return Xw}},size:()=>{{return Qw}},replace:()=>{{return sL}},isString:()=>{{return oL}},isEmpty:()=>{{return $w}},includes:()=>{{return Jw}},endsWith:()=>{{return Hw}},empty:()=>{{return pZ}},Show:()=>{{return pL}},Semigroup:()=>{{return fZ}},Ord:()=>{{return N}},Monoid:()=>{{return fL}},Eq:()=>{{return nZ}}});var nZ={equals:function(X,$){return X===$}},fZ={concat:function(X,$){return X+$}},pZ="",fL={concat:fZ.concat,empty:pZ},N={equals:nZ.equals,compare:function(X,$){return X<$?-1:X>$?1:0}},pL={show:function(X){return JSON.stringify(X)}},oL=function(X){return typeof X==="string"},iL=function(X){return X.toUpperCase()},rL=function(X){return X.toLowerCase()},sL=function(X,$){return function(Q){return Q.replace(X,$)}},tL=function(X){return X.trim()},aL=function(X){return X.trimLeft()},eL=function(X){return X.trimRight()},Xw=function(X,$){return function(Q){return Q.slice(X,$)}},$w=function(X){return X.length===0},Qw=function(X){return X.length},Yw=function(X){return function($){var Q=$.split(X);return E1(Q)?Q:[$]}},Jw=function(X,$){return function(Q){return Q.includes(X,$)}},Zw=function(X,$){return function(Q){return Q.startsWith(X,$)}},Hw=function(X,$){return function(Q){return Q.endsWith(X,$)}};function iZ(X){if(typeof X==="function")return iZ(N)(X);var $=S4(X);return function(Q){return function(Y){var J=[];for(var Z=0,V=$(Y);Z<V.length;Z++){var D=V[Z];J.push(Q(D,Y[D]))}return J}}}function O9(X){return function($,Q){if(Q===void 0){var Y=O9(X);return function(Z){return Y(Z,$)}}for(var J in $)if(!n.call(Q,J)||!X.equals($[J],Q[J]))return!1;return!0}}function w8(X,$){if($===void 0)return function(Q){return w8(X,Q)};return n.call($,X)?O($[X]):E}function M9(X){return function($){var Q={};for(var Y in $)if(n.call($,Y))Q[Y]=X(Y,$[Y]);return Q}}function C8(X){return M9(function($,Q){return X(Q)})}function h5(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];if(X.length===2)return h5(N).apply(void 0,X);var Q=S4(X[0]);return function(Y,J){return function(Z){var V=Y,D=Q(Z),L=D.length;for(var B=0;B<L;B++){var R=D[B];V=J(R,V,Z[R])}return V}}}function u5(X){if("compare"in X){var $=S4(X);return function(Q){return function(Y){return function(J){var Z=Q.empty,V=$(J),D=V.length;for(var L=0;L<D;L++){var B=V[L];Z=Q.concat(Z,Y(B,J[B]))}return Z}}}}return u5(N)(X)}function k5(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];if(X.length===2)return k5(N).apply(void 0,X);var Q=S4(X[0]);return function(Y,J){return function(Z){var V=Y,D=Q(Z),L=D.length;for(var B=L-1;B>=0;B--){var R=D[B];V=J(R,Z[R],V)}return V}}}function tZ(X){var $=vH(N)(X);return function(Q){return function(Y){return $(Y,Q)}}}function aZ(X){var $=b9(N)(X);return function(Q){return function(Y){return $(Y,Q)}}}function eZ(X){return v8(N)(X)}function g9(X){return function($){var Q={},Y={};for(var J in $)if(n.call($,J)){var Z=X(J,$[J]);switch(Z._tag){case"Left":Q[J]=Z.left;break;case"Right":Y[J]=Z.right;break}}return A0(Q,Y)}}function F9(X){return function($){var Q={},Y={};for(var J in $)if(n.call($,J)){var Z=$[J];if(X(J,Z))Y[J]=Z;else Q[J]=Z}return A0(Q,Y)}}function I9(X){return function($){var Q={};for(var Y in $)if(n.call($,Y)){var J=X(Y,$[Y]);if(B0(J))Q[Y]=J.value}return Q}}function y9(X){return function($){var Q={},Y=!1;for(var J in $)if(n.call($,J)){var Z=$[J];if(X(J,Z))Q[J]=Z;else Y=!0}return Y?Q:$}}function XH(X,$){var Q=N8(X,$);return function(Y){return Q(Y,u)}}function N8(X,$){return function(Q,Y){return $.reduce(Q,{},function(J,Z){var V=Y(Z),D=V[0],L=V[1];return J[D]=n.call(J,D)?X.concat(J[D],L):L,J})}}function $H(X){return function($){for(var Q in $)if(!X($[Q]))return!1;return!0}}function QH(X){return function($){for(var Q in $)if(X($[Q]))return!0;return!1}}function T8(X){return function($,Q){if(Q===void 0){var Y=T8(X);return function(Z){return Y($,Z)}}for(var J in Q)if(X.equals(Q[J],$))return!0;return!1}}function W4(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];if(X.length===1){var Q=h5(X[0]);return function(Y,J){return Q(Y,function(Z,V,D){return J(V,D)})}}return W4(N).apply(void 0,X)}function E4(X){if("compare"in X){var $=u5(X);return function(Q){var Y=$(Q);return function(J){return Y(function(Z,V){return J(V)})}}}return E4(N)(X)}function O4(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];if(X.length===1){var Q=k5(X[0]);return function(Y,J){return Q(Y,function(Z,V,D){return J(V,D)})}}return O4(N).apply(void 0,X)}function h9(X){if("compare"in X)return function($){return{show:function(Q){var Y=iZ(X)(function(J,Z){return"".concat(JSON.stringify(J),": ").concat($.show(Z))})(Q).join(", ");return Y===""?"{}":"{ ".concat(Y," }")}}};return h9(N)(X)}function SH(X){var $=O9(X);return y0(function(Q,Y){return $(Q)(Y)&&$(Y)(Q)})}function WH(X){return{concat:function($,Q){if(Y1($))return Q;if(Y1(Q))return $;var Y=Object.assign({},$);for(var J in Q)if(n.call(Q,J))Y[J]=n.call($,J)?X.concat($[J],Q[J]):Q[J];return Y},empty:U8}}function EH(X,$){return n.call($===void 0?this:$,X)}var oZ=function(X){return Object.keys(X).length},Y1=function(X){for(var $ in X)if(n.call(X,$))return!1;return!0},S4=function(X){return function($){return Object.keys($).sort(X.compare)}};var rZ=function(X,$){return function(Q){if(n.call(Q,X)&&Q[X]===$)return Q;var Y=Object.assign({},Q);return Y[X]=$,Y}},X5=function(X,$){return n.call($,X)};var U8={},sZ=function(X,$){var Q;return Q={},Q[X]=$,Q};var YH=function(X){return function($){return function(Q){if(Y1(Q))return $;if(Y1($))return Q;var Y={};for(var J in Q)if(X5(J,$))Y[J]=X.concat(Q[J],$[J]);else Y[J]=Q[J];for(var J in $)if(!X5(J,Y))Y[J]=$[J];return Y}}},JH=function(X){return function($){return function(Q){if(Y1(Q)||Y1($))return U8;var Y={};for(var J in Q)if(X5(J,$))Y[J]=X.concat(Q[J],$[J]);return Y}}},ZH=function(X){return function($){if(Y1($))return X;if(Y1(X))return $;var Q={};for(var Y in $)if(!X5(Y,X))Q[Y]=$[Y];for(var Y in X)if(!X5(Y,$))Q[Y]=X[Y];return Q}},HH=function(X,$){return K(X,C8($))},jH=function(X,$){return K(X,M9($))},PH=function(X){var $=W4(X);return function(Q,Y,J){return K(Q,$(Y,J))}},zH=function(X){return function($){var Q=E4(X)($);return function(Y,J){return K(Y,Q(J))}}},GH=function(X){var $=O4(X);return function(Q,Y,J){return K(Q,$(Y,J))}},VH=function(X,$){return K(X,A8($))},DH=function(X,$){return K(X,R8($))},qH=function(X,$){return K(X,S8($))},KH=function(X,$){return K(X,W8($))},BH=function(X){var $=h5(X);return function(Q,Y,J){return K(Q,$(Y,J))}},LH=function(X){var $=u5(X);return function(Q){var Y=$(Q);return function(J,Z){return K(J,Y(Z))}}},wH=function(X){var $=k5(X);return function(Q,Y,J){return K(Q,$(Y,J))}},UH=function(X,$){return K(X,g9($))},CH=function(X,$){return K(X,F9($))},NH=function(X,$){return K(X,I9($))},TH=function(X,$){return K(X,y9($))},b9=function(X){var $=vH(X);return function(Q){var Y=$(Q);return function(J,Z){return Y(J,I(O7,Z))}}},v8=function(X){var $=b9(X);return function(Q){var Y=$(Q);return function(J){return Y(J,u)}}},vH=function(X){return function($){var Q=S4(X);return function(Y,J){var Z=Q(Y);if(Z.length===0)return $.of(U8);var V=$.of({}),D=function(K0){V=$.ap($.map(V,function(O0){return function(S1){var p0;return Object.assign({},O0,(p0={},p0[K0]=S1,p0))}}),J(K0,Y[K0]))};for(var L=0,B=Z;L<B.length;L++){var R=B[L];D(R)}return V}}},A8=function(X){return y9(function($,Q){return X(Q)})},R8=function(X){return I9(function($,Q){return X(Q)})},S8=function(X){return F9(function($,Q){return X(Q)})},W8=function(X){return g9(function($,Q){return X(Q)})},AH=function(X){var $={};for(var Q in X)if(n.call(X,Q)){var Y=X[Q];if(B0(Y))$[Q]=Y.value}return $},RH=function(X){var $={},Q={};for(var Y in X)if(n.call(X,Y)){var J=X[Y];if(U1(J))$[Y]=J.left;else Q[Y]=J.right}return A0($,Q)};var u9={};k1(u9,{wither:()=>{{return Tw}},wilt:()=>{{return vw}},upsertAt:()=>{{return OH}},updateAt:()=>{{return Vw}},union:()=>{{return bH}},traverseWithIndex:()=>{{return Nw}},traverse:()=>{{return g8}},toUnfoldable:()=>{{return Gw}},toEntries:()=>{{return Ew}},toArray:()=>{{return M8}},some:()=>{{return Fw}},size:()=>{{return Pw}},singleton:()=>{{return Cw}},sequence:()=>{{return g4}},separate:()=>{{return y1}},reduceWithIndex:()=>{{return Lw}},reduceRightWithIndex:()=>{{return Uw}},reduceRight:()=>{{return mw}},reduce:()=>{{return kw}},record:()=>{{return jU}},pop:()=>{{return Dw}},partitionWithIndex:()=>{{return Rw}},partitionMapWithIndex:()=>{{return Aw}},partitionMap:()=>{{return uw}},partition:()=>{{return hw}},modifyAt:()=>{{return FH}},mapWithIndex:()=>{{return Kw}},map:()=>{{return Bw}},lookup:()=>{{return IH}},keys:()=>{{return zw}},isSubrecord:()=>{{return qw}},isEmpty:()=>{{return $5}},intersection:()=>{{return hH}},insertAt:()=>{{return ZU}},hasOwnProperty:()=>{{return HU}},has:()=>{{return MH}},getWitherable:()=>{{return sw}},getUnionSemigroup:()=>{{return nH}},getUnionMonoid:()=>{{return tw}},getTraversableWithIndex:()=>{{return rw}},getTraversable:()=>{{return dH}},getShow:()=>{{return cw}},getMonoid:()=>{{return xw}},getIntersectionSemigroup:()=>{{return aw}},getFoldableWithIndex:()=>{{return pw}},getFoldable:()=>{{return fw}},getEq:()=>{{return _w}},getDifferenceMagma:()=>{{return ew}},fromFoldableMap:()=>{{return Mw}},fromFoldable:()=>{{return yH}},fromEntries:()=>{{return Ow}},foldMapWithIndex:()=>{{return ww}},foldMap:()=>{{return lw}},flap:()=>{{return dw}},filterWithIndex:()=>{{return Ww}},filterMapWithIndex:()=>{{return Sw}},filterMap:()=>{{return bw}},filter:()=>{{return yw}},every:()=>{{return gw}},empty:()=>{{return JU}},elem:()=>{{return Iw}},difference:()=>{{return uH}},deleteAt:()=>{{return gH}},compact:()=>{{return I1}},collect:()=>{{return O8}},Witherable:()=>{{return YU}},URI:()=>{{return Q0}},TraversableWithIndex:()=>{{return QU}},Traversable:()=>{{return I8}},FunctorWithIndex:()=>{{return nw}},Functor:()=>{{return xH}},FoldableWithIndex:()=>{{return $U}},Foldable:()=>{{return XU}},FilterableWithIndex:()=>{{return iw}},Filterable:()=>{{return ow}},Compactable:()=>{{return M4}}});function O8(X){if(typeof X==="function")return O8(N)(X);var $=E8(X);return function(Q){return function(Y){var J=[];for(var Z=0,V=$(Y);Z<V.length;Z++){var D=V[Z];J.push(Q(D,Y[D]))}return J}}}function Gw(X){return function($){var Q=M8($),Y=Q.length;return X.unfold(0,function(J){return J<Y?O([Q[J],J+1]):E})}}function gH(X){return function($){if(!n.call($,X))return $;var Q=Object.assign({},$);return delete Q[X],Q}}function Dw(X){var $=gH(X);return function(Q){var Y=IH(X,Q);return W1(Y)?E:O([Y.value,$(Q)])}}function Lw(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return X.length===1?h5(X[0]):h5(N).apply(void 0,X)}function ww(X){return"compare"in X?u5(X):u5(N)(X)}function Uw(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return X.length===1?k5(X[0]):k5(N).apply(void 0,X)}function Nw(X){return tZ(X)}function g8(X){return aZ(X)}function g4(X){return eZ(X)}function Rw(X){return F9(X)}function Ww(X){return y9(X)}function yH(X,$){return XH(X,$)}function Mw(X,$){return N8(X,$)}function kw(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return X.length===1?W4(X[0]):W4(N).apply(void 0,X)}function lw(X){return"compare"in X?E4(X):E4(N)(X)}function mw(){var X=[];for(var $=0;$<arguments.length;$++)X[$]=arguments[$];return X.length===1?O4(X[0]):O4(N).apply(void 0,X)}function cw(X){return"compare"in X?h9(X):h9(N)(X)}var l5=function(){return l5=Object.assign||function(X){for(var $,Q=1,Y=arguments.length;Q<Y;Q++){$=arguments[Q];for(var J in $)if(Object.prototype.hasOwnProperty.call($,J))X[J]=$[J]}return X},l5.apply(this,arguments)},Pw=oZ,$5=Y1,E8=function(X){return function($){return Object.keys($).sort(X.compare)}},zw=E8(N),M8=O8(N)(function(X,$){return[X,$]}),OH=rZ,MH=X5,Vw=function(X,$){return FH(X,function(){return $})},FH=function(X,$){return function(Q){if(!MH(X,Q))return E;var Y=Object.assign({},Q);return Y[X]=$(Q[X]),O(Y)}},qw=O9,IH=w8,Kw=M9,Bw=C8,Cw=sZ,Tw=function(X){var $=g8(X);return function(Q){return function(Y){return X.map(K(Y,$(Q)),I1)}}},vw=function(X){var $=g8(X);return function(Q){return function(Y){return X.map(K(Y,$(Q)),y1)}}},Aw=g9,Sw=I9,Ew=M8,Ow=function(X){return yH(mQ(),H8)(X)},gw=$H,Fw=QH,Iw=T8,bH=function(X){var $=YH(X);return function(Q){return function(Y){if($5(Y))return l5({},Q);if($5(Q))return l5({},Y);return $(Q)(Y)}}},hH=function(X){return function($){return function(Q){if($5(Q)||$5($))return{};return JH(X)($)(Q)}}},uH=function(X){return function($){if($5($))return l5({},X);if($5(X))return l5({},$);return ZH(X)($)}},l0=HH,F4=jH,m0=PH,c0=zH,_0=GH,I4=VH,y4=DH,b4=qH,h4=KH,u4=BH,k4=LH,l4=wH,kH=UH,lH=CH,mH=NH,cH=TH,m5=b9,_H=v8,F8=function(X){return function($){var Q=E8(X);return function(Y,J){var Z=Q(Y);if(Z.length===0)return $.of({});var V=$.of({}),D=function(K0){V=$.ap($.map(V,function(O0){return function(S1){return O0[K0]=S1,O0}}),J(K0,Y[K0]))};for(var L=0,B=Z;L<B.length;L++){var R=B[L];D(R)}return V}}},yw=A8,bw=R8,hw=S8,uw=W8,I1=AH,y1=RH,Q0="Record",_w=SH,xw=WH,xH={URI:Q0,map:l0},dw=M0(xH),nw={URI:Q0,map:l0,mapWithIndex:F4},fw=function(X){return{URI:Q0,reduce:m0(X),foldMap:c0(X),reduceRight:_0(X)}},pw=function(X){return{URI:Q0,reduce:m0(X),foldMap:c0(X),reduceRight:_0(X),reduceWithIndex:u4(X),foldMapWithIndex:k4(X),reduceRightWithIndex:l4(X)}},M4={URI:Q0,compact:I1,separate:y1},ow={URI:Q0,map:l0,compact:I1,separate:y1,filter:I4,filterMap:y4,partition:b4,partitionMap:h4},iw={URI:Q0,map:l0,mapWithIndex:F4,compact:I1,separate:y1,filter:I4,filterMap:y4,partition:b4,partitionMap:h4,filterMapWithIndex:mH,filterWithIndex:cH,partitionMapWithIndex:kH,partitionWithIndex:lH},dH=function(X){return{URI:Q0,map:l0,reduce:m0(X),foldMap:c0(X),reduceRight:_0(X),traverse:m5(X),sequence:_H(X)}},rw=function(X){return{URI:Q0,map:l0,mapWithIndex:F4,reduce:m0(X),foldMap:c0(X),reduceRight:_0(X),reduceWithIndex:u4(X),foldMapWithIndex:k4(X),reduceRightWithIndex:l4(X),traverse:m5(X),sequence:_H(X),traverseWithIndex:F8(X)}},sw=function(X){var $=dH(X);return{URI:Q0,map:l0,reduce:m0(X),foldMap:c0(X),reduceRight:_0(X),traverse:$.traverse,sequence:$.sequence,compact:I1,separate:y1,filter:I4,filterMap:y4,partition:b4,partitionMap:h4,wither:f1($,M4),wilt:n1($,M4)}},nH=function(X){var $=bH(X);return{concat:function(Q,Y){return $(Y)(Q)}}},tw=function(X){return{concat:nH(X).concat,empty:{}}},aw=function(X){var $=hH(X);return{concat:function(Q,Y){return $(Y)(Q)}}},ew=function(){return{concat:function(X,$){return uH($)(X)}}},XU={URI:Q0,reduce:m0(N),foldMap:c0(N),reduceRight:_0(N)},$U={URI:Q0,reduce:m0(N),foldMap:c0(N),reduceRight:_0(N),reduceWithIndex:u4(N),foldMapWithIndex:k4(N),reduceRightWithIndex:l4(N)},I8={URI:Q0,map:l0,reduce:m0(N),foldMap:c0(N),reduceRight:_0(N),traverse:m5(N),sequence:g4},QU={URI:Q0,map:l0,mapWithIndex:F4,reduce:m0(N),foldMap:c0(N),reduceRight:_0(N),reduceWithIndex:u4(N),foldMapWithIndex:k4(N),reduceRightWithIndex:l4(N),traverse:m5(N),sequence:g4,traverseWithIndex:F8(N)},fH=f1(I8,M4),pH=n1(I8,M4),YU={URI:Q0,map:l0,reduce:m0(N),foldMap:c0(N),reduceRight:_0(N),traverse:m5(N),sequence:g4,compact:I1,separate:y1,filter:I4,filterMap:y4,partition:b4,partitionMap:h4,wither:fH,wilt:pH},JU={},ZU=OH,HU=EH,jU={URI:Q0,map:l0,reduce:m0(N),foldMap:c0(N),reduceRight:_0(N),traverse:m5(N),sequence:g4,compact:I1,separate:y1,filter:I4,filterMap:y4,partition:b4,partitionMap:h4,mapWithIndex:F4,reduceWithIndex:u4(N),foldMapWithIndex:k4(N),reduceRightWithIndex:l4(N),filterMapWithIndex:mH,filterWithIndex:cH,partitionMapWithIndex:kH,partitionWithIndex:lH,traverseWithIndex:F8(N),wither:fH,wilt:pH};var PU="Function",zU=(X)=>($)=>I($,X),y8={URI:PU,map:(X,$)=>zU($)(X)},oH=l1,GU=(X)=>($)=>(Q)=>$(Q)(X(Q)),k9={...y8,of:oH,ap:(X,$)=>GU($)(X)},gb=r0(k9),Fb=s0(k9),VU=(X)=>($)=>(Q)=>X($(Q))(Q);var DU={...k9,chain:(X,$)=>VU($)(X)},Ib=oH({}),yb=g0(y8),bb=I0(DU),hb=t0(k9),ub=F0(y8);var l9=E7,iH=(X)=>($)=>(Q)=>K(X,C4(([Y,J])=>I(NZ(Y),v4(J))),A4(NQ(vZ(lQ()))()),TQ(Q),WZ(()=>$(Q)));var qU=(X)=>($)=>(Q)=>X(Q)?Q:$(Q),kb=I(CZ,qU);var KU=(X)=>($)=>(Q)=>Q[X](...$),lb=W7(KU)([]);var rH=(X)=>($)=>{const Q=new Map;return(Y)=>{const J=IZ(X)(Y)(Q);if(SZ(J))return J.value;const Z=$(Y);return Q.set(Y,Z),Z}},BU=(X)=>($)=>(Q)=>X([$,Q]),mb=I(l9,BU),LU=(X)=>($)=>(Q)=>(Y)=>X([$,Q,Y]),cb=I(l9,LU),wU=(X)=>($)=>(Q)=>(Y)=>(J)=>X([$,Q,Y,J]),_b=I(l9,wU),UU=(X)=>($)=>(Q)=>(Y)=>(J)=>(Z)=>X([$,Q,Y,J,Z]),xb=I(l9,UU);var db=A4(OZ());var sH=(X)=>A4(UZ())(X);var A7=RX(uG(),1);var kG=(X)=>iH(X);var i5=(X)=>async($)=>X(await $),lG=(X)=>($)=>(Q)=>Q[X]===$;var N7=(X)=>($)=>I(S.chunksOf(X),S.map($),(Q)=>Promise.all(Q),i5(S.flatten));var mG=(X)=>K(X,E7,rH(y7.contramap(JSON.stringify)(b5.Eq)),RQ);var KX;(function(qX){let X;(function(r5){r5.start=l1({before:"start"}),r5.fromUri=(Z)=>({before:{uri:Z}}),r5.fromUid=(Z)=>({before:{uid:Z}})})(X=qX.before||(qX.before={}));let $;(function(s5){s5.end=l1({after:"end"}),s5.fromUri=(Z)=>({before:{uri:Z}}),s5.fromUid=(Z)=>({before:{uid:Z}})})($=qX.after||(qX.after={}))})(KX||(KX={}));//! Does location actually point to document.body?
var _G=(X,$=1000,Q=document.body,Y)=>new Promise((J)=>{const Z=(D)=>{V.disconnect(),J(D)},V=new MutationObserver(()=>{const D=document.querySelector(X);if(D&&(!Y||D!==Y))return Z(D)});if(V.observe(Q,{childList:!0,subtree:!0}),$)setTimeout(()=>Z(null),$)});var BX=(X)=>new Promise(($)=>setTimeout($,X));var BQ=(X)=>Spicetify.Platform.LibraryAPI.contains(...X),cG=(X,$)=>Spicetify.Platform.LibraryAPI[$?"add":"remove"](...X),xG=async(X)=>{const $=await BQ(X);return await K(X,S.reduceWithIndex([[],[]],(Q,Y,J)=>(Y[Number($[Q])].push(J),Y)),([Q,Y])=>{const J=[];if(Q.length)J.push(cG(Q,!0));if(Y.length)J.push(cG(Y,!1));return Promise.all(J)})};var{URI:Hu}=Spicetify,dG=async(X,$=0,Q=487)=>(await Spicetify.GraphQL.Request(Spicetify.GraphQL.Definitions.getAlbum,{uri:X,locale:Spicetify.Locale.getLocale(),offset:$,limit:Q})).data.albumUnion;var nG=async(X,$)=>Spicetify.CosmosAsync.del(`https://api.spotify.com/v1/playlists/${X}/tracks`,{tracks:$.map((Q)=>({uri:Q}))}),ju=N7(50)(async(X)=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/artists?ids=${X.join(",")}`)).artists),Pu=N7(1)(async([X])=>[await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/playlists/${X}`)]),zu=N7(50)(async(X)=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/albums?ids=${X.join(",")}`)).albums),Gu=N7(50)(async(X)=>(await Spicetify.CosmosAsync.get(`https://api.spotify.com/v1/tracks?ids=${X.join(",")}`)).tracks);var fG=async(X,$=0,Q=100)=>(await Spicetify.Platform.LibraryAPI.getTracks({uri:X,offset:$,limit:Q})).items,LX=async(X)=>(await Spicetify.Platform.PlaylistAPI.getContents(X)).items,pG=async(X,$={})=>await Spicetify.Platform.RootlistAPI.createFolder(X,$);var oG=async(X,$={})=>await Spicetify.Platform.RootlistAPI.createPlaylist(X,$);var iG=async(X,$)=>await Spicetify.Platform.PlaylistPermissionsAPI.setBasePermission(X,$?"VIEWER":"BLOCKED");var rG=async(X)=>await Spicetify.Platform.RootlistAPI.getContents({folderUri:X});var sG=async(X,$,Q={})=>await Spicetify.Platform.PlaylistAPI.add(X,$,Q);var qI=async(X,$,Q,Y="")=>{const J=new URL("https://ws.audioscrobbler.com/2.0/");return J.searchParams.append("method","track.getInfo"),J.searchParams.append("api_key",X),J.searchParams.append("artist",$),J.searchParams.append("track",Q),J.searchParams.append("format","json"),J.searchParams.append("username",Y),await fetch(J).then((Z)=>Z.json())},Vu=mG(qI);var x=RX(aG(),1),$V=RX(XV(),1);class q0{X;$;Q;stopHistoryListener;setRerender=null;constructor(X,$,Q={}){this.name=X;this.sectionId=$;this.sectionFields=Q}static waitForReact=async()=>{while(!(Spicetify.React&&Spicetify.ReactDOM))BX(100);return this};pushSettings=async()=>{while(!Spicetify?.Platform?.History?.listen)await BX(100);if(this.stopHistoryListener)this.stopHistoryListener();if(this.stopHistoryListener=Spicetify.Platform.History.listen(({pathname:X=""})=>{if(X==="/preferences")this.render()}),Spicetify.Platform.History.location.pathname==="/preferences")await this.render()};toObject=()=>new Proxy({},{get:(X,$)=>q0.getFieldValue(this.getId($.toString()))});rerender=()=>{if(this.setRerender)this.setRerender(Math.random())};render=async()=>{while(!document.getElementById("desktop.settings.selectLanguage")){if(Spicetify.Platform.History.location.pathname!=="/preferences")return;await BX(100)}const X=document.querySelector(".x-settings-container");let $=Array.from(X.children).find(({id:Q})=>Q===this.sectionId);if(!$)$=document.createElement("div"),$.id=this.sectionId,$.className="settingsContainer",X.appendChild($);$V.default.render(x.default.createElement(this.FieldsContainer,null),$)};addButton=(X,$,Q,Y=a5,J={})=>{const Z=this.getId(X);return J.onClick=Y,this.sectionFields[X]={id:Z,type:d0.BUTTON,description:$,text:Q,events:J},this};addToggle=(X,$,Q=F1.of(!0),Y=a5,J={})=>{const Z=this.getId(X);return q0.setDefaultFieldValue(Z,Q),J.onChange=Y,this.sectionFields[X]={id:Z,type:d0.TOGGLE,description:$,events:J},this};addInput=(X,$,Q,Y=a5,J="text",Z={})=>{const V=this.getId(X);return q0.setDefaultFieldValue(V,Q),Z.onChange=Y,this.sectionFields[X]={id:V,type:d0.INPUT,description:$,inputType:J,events:Z},this};addDropDown=(X,$,Q,Y=F1.of(0),J=a5,Z={})=>{const V=this.getId(X);return q0.setDefaultFieldValue(V,Y),Z.onChange=J,this.sectionFields[X]={id:V,type:d0.DROPDOWN,description:$,options:Q,events:Z},this};addHidden=(X,$)=>{const Q=this.getId(X);return q0.setDefaultFieldValue(Q,$),this.sectionFields[X]={id:Q,type:d0.HIDDEN,description:""},this};getId=(X)=>`extensions:${this.sectionId}:${X}`;useStateFor=(X)=>{const[$,Q]=x.useState(q0.getFieldValue(X));return[$,(Y)=>{if(Y!==void 0)Q(Y),q0.setFieldValue(X,Y)}]};static getFieldValue=(X)=>{return JSON.parse(Spicetify.LocalStorage.get(X)??"null")};static setFieldValue=(X,$)=>{Spicetify.LocalStorage.set(X,JSON.stringify($))};static setDefaultFieldValue=async(X,$)=>{if(q0.getFieldValue(X)===null)q0.setFieldValue(X,await $())};FieldsContainer=()=>{const[X,$]=x.useState(0);return this.setRerender=$,x.default.createElement("div",{className:"x-settings-section",key:X},x.default.createElement("h2",{className:"Type__TypeElement-sc-goli3j-0 TypeElement-cello-textBase-type"},this.name),Object.entries(this.sectionFields).map(([Q,Y])=>{return x.default.createElement(this.Field,{field:Y})}))};Field=({field:X})=>{const $=lG("type");return x.default.createElement("div",{className:"x-settings-row"},x.default.createElement(this.SettingDescription,{id:X.id,description:X.description}),x.default.createElement("div",{className:"x-settings-secondColumn"},kG([[$(d0.INPUT),this.SettingInputField],[$(d0.BUTTON),this.SettingButtonField],[$(d0.TOGGLE),this.SettingToggleField],[$(d0.DROPDOWN),this.SettingDropdownField]])(this.SettingHidden)(X)))};SettingDescription=({id:X,description:$})=>x.default.createElement("div",{className:"x-settings-firstColumn"},x.default.createElement("label",{className:"Type__TypeElement-sc-goli3j-0 TypeElement-viola-textSubdued-type",htmlFor:X},$));SettingButtonField=(X)=>x.default.createElement("span",{className:""},x.default.createElement("button",{id:X.id,className:"Button-sc-y0gtbx-0 Button-sm-buttonSecondary-useBrowserDefaultFocusStyle x-settings-button",...X.events,type:X.type},X.text));SettingToggleField=(X)=>{const[$,Q]=this.useStateFor(X.id);return x.default.createElement("label",{className:"x-settings-secondColumn x-toggle-wrapper"},x.default.createElement("input",{id:X.id,className:"x-toggle-input",type:"checkbox",checked:q0.getFieldValue(X.id),...X.events,onChange:(Y)=>{Q(Y.currentTarget.checked),X.events.onChange?.(Y)}}),x.default.createElement("span",{className:"x-toggle-indicatorWrapper"},x.default.createElement("span",{className:"x-toggle-indicator"})))};SettingInputField=(X)=>{const[$,Q]=this.useStateFor(X.id);return x.default.createElement("input",{className:"x-settings-input",id:X.id,dir:"ltr",value:q0.getFieldValue(X.id),type:X.inputType,...X.events,onChange:(Y)=>{Q(Y.currentTarget.value),X.events.onChange?.(Y)}})};SettingDropdownField=(X)=>{const[$,Q]=this.useStateFor(X.id);return x.default.createElement("select",{className:"main-dropDown-dropDown",id:X.id,...X.events,onChange:(Y)=>{Q(Y.currentTarget.selectedIndex),X.events.onChange?.(Y)}},X.options.map((Y,J)=>x.default.createElement("option",{selected:J===q0.getFieldValue(X.id),value:J+1},Y)))};SettingHidden=()=>x.default.createElement(x.default.Fragment,null)}var d0;(function(Z){Z["HIDDEN"]="hidden";Z["INPUT"]="input";Z["DROPDOWN"]="dropdown";Z["BUTTON"]="button";Z["TOGGLE"]="toggle"})(d0||(d0={}));var{URI:QV}=Spicetify,KI=(X,$,Q)=>{const J=document.createElementNS("http://www.w3.org/2000/svg","svg"),Z=`${X}-${$}`;J.id=Z,J.style.minHeight=`${Q}px`,J.style.minWidth=`${Q}px`,J.setAttributeNS(null,"width",`${Q}px`),J.setAttributeNS(null,"height",`${Q}px`),J.setAttributeNS(null,"viewBox","0 0 32 32");const V=document.createElementNS("http://www.w3.org/2000/svg","defs");J.append(V);const D=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");V.append(D),D.id=`${Z}-gradient`;const L=document.createElementNS("http://www.w3.org/2000/svg","stop");D.append(L),L.id=`${Z}-gradient-left`,L.setAttributeNS(null,"offset","50%"),L.setAttributeNS(null,"stop-color","var(--spice-button-disabled)");const B=document.createElementNS("http://www.w3.org/2000/svg","stop");D.append(B),B.id=`${Z}-gradient-right`,B.setAttributeNS(null,"offset","50%"),B.setAttributeNS(null,"stop-color","var(--spice-button-disabled)");const R=document.createElementNS("http://www.w3.org/2000/svg","path");return J.append(R),R.setAttributeNS(null,"fill",`url(#${D.id})`),R.setAttributeNS(null,"d","M20.388,10.918L32,12.118l-8.735,7.749L25.914,31.4l-9.893-6.088L6.127,31.4l2.695-11.533L0,12.118l11.547-1.2L16.026,0.6L20.388,10.918z"),[J,[L,B]]},wX=(X,$)=>{const Q=`stars-${X}`,Y=document.createElement("span");Y.className="stars",Y.id=Q,Y.style.whiteSpace="nowrap",Y.style.alignItems="center",Y.style.display="flex";const J=C5.range(1,5).map((Z)=>KI(Q,Z,$));return K(J,S.unzip,([Z])=>Z,S.map((Z)=>Y.append(Z))),[Y,J]},u1=(X)=>($)=>{const Q=(Y)=>(J)=>$[Math.floor(J/2)][J%2].setAttributeNS(null,"stop-color",`var(--spice-button${Y?"":"-disabled"})`);K(C5.range(0,9),S.spanLeft((Y)=>Y<X),({init:Y,rest:J})=>{Y.map(Q(!0)),J.map(Q(!1))})},LQ=(X,$)=>(Q)=>{const Y=X.getBoundingClientRect(),J=Q.clientX-Y.left,Z=T0.halfStarRatings&&J<JV;return 2*($+1)-Number(Z)},YV=(X,$,Q)=>async(Y)=>{const J=Q(),Z=n0[J];let V=LQ($,X)(Y);const D=UX(T0.heartThreshold);if(D){const B=V>=D,[R]=await BQ([J]);if(R!==B)xG([J])}if(Z===V)V=0;if(Z)K(t5.slice(0,Z+1),S.filter(Boolean),S.map((B)=>QV.from(B).id),S.map((B)=>nG(B,[J])));if(n0[J]=V,V){let B=t5[V];if(!B)B=await oG(CX(V),KX.after.fromUri(T0.ratingsFolderUri)),iG(B,!1),t5[V]=B;sG(B,[J])}TX();const L=V5(`${QV.fromString(J).id}`);if(L)K(L,NX(V)),L.style.visibility=V?"visible":"hidden"};var ZV="Ratings",T7=16,JV=T7/2,UX=(X)=>Number(X)*2,CX=(X)=>(X/2).toFixed(1),HV=(X)=>Array.from(X.children),BI=(X)=>Array.from(X.firstChild.firstChild.childNodes),jV=I(HV,S.map(BI)),NX=(X)=>I(jV,u1(X)),V5=(X)=>document.getElementById(`stars-${X}`),bu=I(V5,HV),PV=I(V5,jV),zV=()=>Array.from(document.querySelectorAll(".main-trackList-indexable")),GV=(X)=>X.querySelector(".main-trackList-trackListHeader")?.firstChild,VV=(X)=>Array.from(X.querySelectorAll("div.main-trackList-trackListRow")),DV=(X)=>{const $=X.querySelector("div.main-trackList-rowSectionEnd");return[Number($.getAttribute("aria-colindex")),$]},qV=(X)=>X.querySelector(".Button-sm-16-buttonTertiary-iconOnly-useBrowserDefaultFocusStyle, .Button-textBrightAccent-sm-16-buttonTertiary-iconOnly-useBrowserDefaultFocusStyle"),KV=(X)=>(X=Object.values(X)[0].child.child.child.child,X.pendingProps.uri??X.child.pendingProps.uri);var BV=new q0("Star Ratings","star-ratings").addToggle("hideHearts","Hide Hearts").addToggle("halfStarRatings","Half star ratings").addToggle("showInTrackLists","Show in tracklists").addToggle("nowPlayingStarsOnRight","Place the stars for now playing track on the right").addInput("heartThreshold","Threshold for liking trakcs",F1.of("3.5")).addInput("skipThreshold","Threshold for skipping trakcs",F1.of("1.5")).addInput("ratingsFolderUri","Ratings folder uri",async()=>(await pG(ZV)).uri,vX);BV.pushSettings();var T0=BV.toObject();var LI=(X)=>Math.exp(X),LV=(X)=>K(X,S.map(($)=>n0[$]),S.filter(Boolean),S.map(($)=>[$,LI($)]),T1.unzip,([$,Q])=>T1.reduceWithIndex(0,(Y,J,Z)=>J+Z*Q[Y])($)/T1.reduce(0,(Y,J)=>Y+J)(Q)||0),wQ=([X,$],Q)=>{const[Y,J]=K($,T1.unzip);X.addEventListener("mouseout",()=>u1(n0[Q()]??0)(J)),K(Y,T1.mapWithIndex((Z,V)=>{V.addEventListener("mousemove",I(LQ(V,Z),W7(u1)(J))),V.addEventListener("click",YV(Z,Y[Z],Q))}))},vX=async()=>{const X=await rG(T0.ratingsFolderUri),$=K(P4(0,10),S.map((Q)=>[CX(Q),Q]),u9.fromEntries);t5=K(X.items,S.map((Q)=>[Q.type,Q.uri,$[Q.name]]),S.reduce([],(Q,[Y,J,Z])=>(Y==="playlist"&&Z?Q[Z]=J:[],Q))),globalThis.tracksRatings=n0=await K(t5,S.map(LX),(Q)=>Promise.all(Q),i5(S.map((Q)=>Q??[])),i5(S.map(S.map((Q)=>Q.uri))),i5(S.flatMap((Q,Y)=>Q.map((J)=>[J,Y]))),i5(S.reduce({},(Q,[Y,J])=>Object.assign(Q,{[Y]:Math.max(J,Q[Y]??0)}))))},t5=[],n0={};var{URI:f0}=Spicetify,wI=[null,null,null,null,"[index] 16px [first] 4fr [var1] 2fr [var2] 1fr [last] minmax(120px,1fr)","[index] 16px [first] 6fr [var1] 4fr [var2] 3fr [var3] 2fr [last] minmax(120px,1fr)","[index] 16px [first] 6fr [var1] 4fr [var2] 3fr [var3] minmax(120px,2fr) [var3] 2fr [last] minmax(120px,1fr)"];vX();var UI=I(zV,S.map((X)=>{const $=VV(X);if($.length===0)return;const Q=(D)=>D.getElementsByClassName("stars").length>0,Y=f0.fromString(Spicetify.Platform.History.location.pathname),J=f0.isArtist(Y)?$[0]:GV(X)??$[0],[Z]=DV(J),V=wI[Z-K(J,Q,Number)];if(!V)return;J.style.gridTemplateColumns=V,K($,S.map((D)=>{const L=qV(D);if(L)L.style.display=T0.hideHearts?"none":"flex";if(Q(D))return;let B=D.querySelector(".starRatings");if(!B){const R7=D.querySelector(".main-trackList-rowSectionEnd"),S7=Number(R7?.getAttribute("aria-colindex"));B=document.createElement("div"),B.setAttribute("aria-colindex",String(S7)),R7?.setAttribute("aria-colindex",String(S7+1)),B.role="gridcell",B.style.display="flex",B.classList.add("main-trackList-rowSectionVariable"),B.classList.add("starRatings"),D.insertBefore(B,R7),D.style.gridTemplateColumns=V}const R=KV(D),K0=f0.fromString(R);if(!f0.isTrack(K0))return;const[O0,S1]=wX(K0.id,T7);B.appendChild(O0),K(S1,S.unzip,([R7,S7])=>S7,u1(n0[R]??0)),wQ([O0,S1],()=>R);const p0=()=>O0.style.visibility=n0[R]?"visible":"hidden";D.addEventListener("mouseover",()=>O0.style.visibility="visible"),D.addEventListener("mouseout",p0),p0()}))})),v7,wV=new MutationObserver(()=>T0.showInTrackLists?UI():void 0);new MutationObserver(()=>{const X=v7;if(v7=document.querySelector("main"),v7&&!v7.isEqualNode(X)){if(X)wV.disconnect();wV.observe(v7,{childList:!0,subtree:!0})}}).observe(document.body,{childList:!0,subtree:!0});var CI=async(X,$)=>{const Q=f0.fromString(X);if(!$)$=PV("collection");let Y;if(f0.isAlbum(Q))Y=K(await dG(`${Q}`),u,A7.get("tracks.items"),S.map(I(u,A7.get("track.uri"))));else if(f0.isArtist(Q))Y=K(await fG(`${Q}`),S.map(A7.get("uri")));else if(f0.isPlaylistV1OrV2(Q))Y=K(await LX(`${Q}`),S.map(A7.get("uri")));else throw"me out the window";u1(LV(Y))($)},UQ;Spicetify.Platform.History.listen(async({pathname:X})=>{if(!sH([f0.isAlbum,f0.isArtist,f0.isPlaylistV1OrV2])(X))return;UQ=await _G(".main-actionBar-ActionBar .main-playButton-PlayButton",0,document.body,UQ);const[Q,Y]=wX("collection",T7*2);V5("collection")?.remove(),UQ.after(Q);const J=K(Y,S.unzip,([Z,V])=>V);CI(X,J)});var NI=()=>{if(document.querySelectorAll(".stars-now-playing").length!==0)return;const X=T0.nowPlayingStarsOnRight?".main-nowPlayingBar-extraControls":".main-nowPlayingWidget-trackInfo",$=document.querySelector(X);if(!$)return;const[Q,Y]=wX("now-playing",T7);if(Q.style.display="none",Q.style.marginLeft="8px",Q.style.marginRight="8px",!T0.nowPlayingStarsOnRight)$.after(Q);else $.prepend(Q);wQ([Q,Y],()=>Spicetify.Player.data.track?.uri)};NI();var TX=()=>{const X=Spicetify.Player.data.track?.uri,$=V5("now-playing");$.style.display=Spicetify.URI.isTrack(X)?"flex":"none",K($,NX(n0[X]??0))};Spicetify.Player.addEventListener("songchange",()=>{const X=Spicetify.Player.data.track?.uri;if(Number(T0.skipThreshold)&&(n0[X]||Number.MAX_SAFE_INTEGER)<=UX(T0.skipThreshold))return Spicetify.Player.next();TX()});TX();export{TX as updateNowPlayingStars};

//# debugId=DC5885914AA5F65064756e2164756e21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2xpYi9mdW5jdGlvbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvbGliL0Z1bmN0b3IuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2xpYi9Db25zdC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvbGliL2ludGVybmFsLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9saWIvQXBwbHkuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2xpYi9DaGFpbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvbGliL3BpcGVhYmxlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9saWIvRXEuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2xpYi9Gcm9tRWl0aGVyLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9saWIvbnVtYmVyLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9saWIvT3JkLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9saWIvTWFnbWEuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2xpYi9TZW1pZ3JvdXAuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2xpYi9SZWFkb25seU5vbkVtcHR5QXJyYXkuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2xpYi9TZXBhcmF0ZWQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2xpYi9XaXRoZXJhYmxlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9saWIvWmVyby5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvbGliL1JlYWRvbmx5QXJyYXkuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2xpYi9zdHJpbmcuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2xpYi9SZWFkb25seVJlY29yZC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvbGliL0FwcGxpY2F0aXZlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9saWIvUHJlZGljYXRlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9saWIvT3B0aW9uLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9saWIvQ2hhaW5SZWMuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2xpYi9FaXRoZXIuanMiLCAiLi4vbm9kZV9tb2R1bGVzL21vbm9jbGUtdHMvbGliL2ludGVybmFsLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9tb25vY2xlLXRzL2xpYi9UcmF2ZXJzYWwuanMiLCAiLi4vbm9kZV9tb2R1bGVzL21vbm9jbGUtdHMvbGliL0xlbnMuanMiLCAiLi4vbm9kZV9tb2R1bGVzL21vbm9jbGUtdHMvbGliL09wdGlvbmFsLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zcGVjdGFjbGVzLXRzL2Rpc3QvdXRpbC9tb25vY2xlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zcGVjdGFjbGVzLXRzL2Rpc3QvdmFsdWVzL2dldC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3BlY3RhY2xlcy10cy9kaXN0L3ZhbHVlcy9zZXQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NwZWN0YWNsZXMtdHMvZGlzdC92YWx1ZXMvc2V0T3B0aW9uLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zcGVjdGFjbGVzLXRzL2Rpc3QvdmFsdWVzL21vZGlmeS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3BlY3RhY2xlcy10cy9kaXN0L3ZhbHVlcy9tb2RpZnlPcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NwZWN0YWNsZXMtdHMvZGlzdC92YWx1ZXMvbW9kaWZ5Vy5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3BlY3RhY2xlcy10cy9kaXN0L3ZhbHVlcy9tb2RpZnlPcHRpb25XLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zcGVjdGFjbGVzLXRzL2Rpc3QvdmFsdWVzL21vZGlmeUYuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NwZWN0YWNsZXMtdHMvZGlzdC92YWx1ZXMvdXBzZXJ0LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zcGVjdGFjbGVzLXRzL2Rpc3QvdmFsdWVzL3JlbW92ZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3BlY3RhY2xlcy10cy9kaXN0L3ZhbHVlcy9yZW5hbWUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NwZWN0YWNsZXMtdHMvZGlzdC9pbmRleC5qcyIsICJyZWFjdCIsICJyZWFjdC1kb20iLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9mdW5jdGlvbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L2Z1bmN0aW9uLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvZnVuY3Rpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9mdW5jdGlvbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L2Z1bmN0aW9uLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvZnVuY3Rpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9mdW5jdGlvbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L2Z1bmN0aW9uLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvZnVuY3Rpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9pbnRlcm5hbC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L2ludGVybmFsLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvaW50ZXJuYWwuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9BcHBseS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L0Z1bmN0b3IuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9GdW5jdG9yLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvQXBwbGljYXRpdmUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9DaGFpbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L0Zyb21FaXRoZXIuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9Gcm9tRWl0aGVyLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvRXEuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcmQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcmQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcmQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcmQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9NYWdtYS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1NlbWlncm91cC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1NlbWlncm91cC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1NlbWlncm91cC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1NlbWlncm91cC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5Tm9uRW1wdHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L05vbkVtcHR5QXJyYXkuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9Ob25FbXB0eUFycmF5LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvbnVtYmVyLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvbnVtYmVyLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvU2VwYXJhdGVkLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvV2l0aGVyYWJsZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1plcm8uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9SZWFkb25seUFycmF5LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvUmVhZG9ubHlBcnJheS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L0FycmF5LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvQXJyYXkuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9QcmVkaWNhdGUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9QcmVkaWNhdGUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9PcHRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9FbmRvbW9ycGhpc20uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9Gcm9tSU8uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9Gcm9tSU8uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9SZWFkb25seU1hcC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L01hcC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L01vbm9pZC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L01vbm9pZC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L01vbm9pZC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1Rhc2suanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9UYXNrLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvc3RyaW5nLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvUmVhZG9ubHlSZWNvcmQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9SZWFkb25seVJlY29yZC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5UmVjb3JkLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvUmVhZG9ubHlSZWNvcmQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzL2VzNi9SZWFkb25seVJlY29yZC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMvZXM2L1JlYWRvbmx5UmVjb3JkLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy9lczYvUmVjb3JkLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy1zdGQvZGlzdC9lc20vRnVuY3Rpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzLXN0ZC9kaXN0L2VzbS9GdW5jdGlvbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMtc3RkL2Rpc3QvZXNtL0Z1bmN0aW9uLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy1zdGQvZGlzdC9lc20vRnVuY3Rpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzLXN0ZC9kaXN0L2VzbS9GdW5jdGlvbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvZnAtdHMtc3RkL2Rpc3QvZXNtL0Z1bmN0aW9uLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9mcC10cy1zdGQvZGlzdC9lc20vRnVuY3Rpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2ZwLXRzLXN0ZC9kaXN0L2VzbS9QcmVkaWNhdGUuanMiLCAiLi4vZXh0ZW5zaW9ucy9zdGFyLXJhdGluZ3MvYXBwLnRzeCIsICIuLi9zaGFyZWQvZnAudHN4IiwgIi4uL3NoYXJlZC9mcC50c3giLCAiLi4vc2hhcmVkL2ZwLnRzeCIsICIuLi9zaGFyZWQvZnAudHN4IiwgIi4uL3NoYXJlZC91dGlsLnRzeCIsICIuLi9zaGFyZWQvdXRpbC50c3giLCAiLi4vc2hhcmVkL3V0aWwudHN4IiwgIi4uL3NoYXJlZC91dGlsLnRzeCIsICIuLi9zaGFyZWQvYXBpLnRzeCIsICIuLi9zaGFyZWQvYXBpLnRzeCIsICIuLi9zaGFyZWQvYXBpLnRzeCIsICIuLi9zaGFyZWQvYXBpLnRzeCIsICIuLi9zaGFyZWQvYXBpLnRzeCIsICIuLi9zaGFyZWQvYXBpLnRzeCIsICIuLi9zaGFyZWQvYXBpLnRzeCIsICIuLi9zaGFyZWQvYXBpLnRzeCIsICIuLi9zaGFyZWQvc2V0dGluZ3MudHN4IiwgIi4uL3NoYXJlZC9zZXR0aW5ncy50c3giLCAiLi4vZXh0ZW5zaW9ucy9zdGFyLXJhdGluZ3Mvc3RhcnMudHN4IiwgIi4uL2V4dGVuc2lvbnMvc3Rhci1yYXRpbmdzL3V0aWwudHN4IiwgIi4uL2V4dGVuc2lvbnMvc3Rhci1yYXRpbmdzL3NldHRpbmdzLnRzeCIsICIuLi9leHRlbnNpb25zL3N0YXItcmF0aW5ncy9yYXRpbmdzLnRzeCIsICIuLi9leHRlbnNpb25zL3N0YXItcmF0aW5ncy9hcHAudHN4Il0sCiAgInNvdXJjZXNDb250ZW50IjogWwogICAgIlwidXNlIHN0cmljdFwiO1xudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kdWFsID0gZXhwb3J0cy5nZXRFbmRvbW9ycGhpc21Nb25vaWQgPSBleHBvcnRzLm5vdCA9IGV4cG9ydHMuU0sgPSBleHBvcnRzLmhvbGUgPSBleHBvcnRzLnBpcGUgPSBleHBvcnRzLnVudHVwbGVkID0gZXhwb3J0cy50dXBsZWQgPSBleHBvcnRzLmFic3VyZCA9IGV4cG9ydHMuZGVjcmVtZW50ID0gZXhwb3J0cy5pbmNyZW1lbnQgPSBleHBvcnRzLnR1cGxlID0gZXhwb3J0cy5mbG93ID0gZXhwb3J0cy5mbGlwID0gZXhwb3J0cy5jb25zdFZvaWQgPSBleHBvcnRzLmNvbnN0VW5kZWZpbmVkID0gZXhwb3J0cy5jb25zdE51bGwgPSBleHBvcnRzLmNvbnN0RmFsc2UgPSBleHBvcnRzLmNvbnN0VHJ1ZSA9IGV4cG9ydHMuY29uc3RhbnQgPSBleHBvcnRzLnVuc2FmZUNvZXJjZSA9IGV4cG9ydHMuaWRlbnRpdHkgPSBleHBvcnRzLmFwcGx5ID0gZXhwb3J0cy5nZXRSaW5nID0gZXhwb3J0cy5nZXRTZW1pcmluZyA9IGV4cG9ydHMuZ2V0TW9ub2lkID0gZXhwb3J0cy5nZXRTZW1pZ3JvdXAgPSBleHBvcnRzLmdldEJvb2xlYW5BbGdlYnJhID0gdm9pZCAwO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gaW5zdGFuY2VzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIGdldEJvb2xlYW5BbGdlYnJhID0gZnVuY3Rpb24gKEIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgbWVldDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBCLm1lZXQoeChhKSwgeShhKSk7IH07IH0sXG4gICAgICAgIGpvaW46IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5qb2luKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBCLnplcm87IH0sXG4gICAgICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gQi5vbmU7IH0sXG4gICAgICAgIGltcGxpZXM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5pbXBsaWVzKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICBub3Q6IGZ1bmN0aW9uICh4KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5ub3QoeChhKSk7IH07IH1cbiAgICB9KTsgfTtcbn07XG5leHBvcnRzLmdldEJvb2xlYW5BbGdlYnJhID0gZ2V0Qm9vbGVhbkFsZ2VicmE7XG4vKipcbiAqIFVuYXJ5IGZ1bmN0aW9ucyBmb3JtIGEgc2VtaWdyb3VwIGFzIGxvbmcgYXMgeW91IGNhbiBwcm92aWRlIGEgc2VtaWdyb3VwIGZvciB0aGUgY29kb21haW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFByZWRpY2F0ZSwgZ2V0U2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBTMSA9IGdldFNlbWlncm91cChCLlNlbWlncm91cEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgUzIgPSBnZXRTZW1pZ3JvdXAoQi5TZW1pZ3JvdXBBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgZ2V0U2VtaWdyb3VwID0gZnVuY3Rpb24gKFMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIFMuY29uY2F0KGYoYSksIGcoYSkpOyB9OyB9XG4gICAgfSk7IH07XG59O1xuZXhwb3J0cy5nZXRTZW1pZ3JvdXAgPSBnZXRTZW1pZ3JvdXA7XG4vKipcbiAqIFVuYXJ5IGZ1bmN0aW9ucyBmb3JtIGEgbW9ub2lkIGFzIGxvbmcgYXMgeW91IGNhbiBwcm92aWRlIGEgbW9ub2lkIGZvciB0aGUgY29kb21haW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJ2ZwLXRzL1ByZWRpY2F0ZSdcbiAqIGltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICogaW1wb3J0ICogYXMgQiBmcm9tICdmcC10cy9ib29sZWFuJ1xuICpcbiAqIGNvbnN0IGY6IFByZWRpY2F0ZTxudW1iZXI+ID0gKG4pID0+IG4gPD0gMlxuICogY29uc3QgZzogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA+PSAwXG4gKlxuICogY29uc3QgTTEgPSBnZXRNb25vaWQoQi5Nb25vaWRBbGwpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTEuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoZiwgZykoMyksIGZhbHNlKVxuICpcbiAqIGNvbnN0IE0yID0gZ2V0TW9ub2lkKEIuTW9ub2lkQW55KTxudW1iZXI+KClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0yLmNvbmNhdChmLCBnKSgxKSwgdHJ1ZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KGYsIGcpKDMpLCB0cnVlKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGdldFNlbWlncm91cE0gPSAoMCwgZXhwb3J0cy5nZXRTZW1pZ3JvdXApKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgICAgICBjb25jYXQ6IGdldFNlbWlncm91cE0oKS5jb25jYXQsXG4gICAgICAgIGVtcHR5OiBmdW5jdGlvbiAoKSB7IHJldHVybiBNLmVtcHR5OyB9XG4gICAgfSk7IH07XG59O1xuZXhwb3J0cy5nZXRNb25vaWQgPSBnZXRNb25vaWQ7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIGdldFNlbWlyaW5nID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgYWRkOiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFMuYWRkKGYoeCksIGcoeCkpOyB9OyB9LFxuICAgIHplcm86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFMuemVybzsgfSxcbiAgICBtdWw6IGZ1bmN0aW9uIChmLCBnKSB7IHJldHVybiBmdW5jdGlvbiAoeCkgeyByZXR1cm4gUy5tdWwoZih4KSwgZyh4KSk7IH07IH0sXG4gICAgb25lOiBmdW5jdGlvbiAoKSB7IHJldHVybiBTLm9uZTsgfVxufSk7IH07XG5leHBvcnRzLmdldFNlbWlyaW5nID0gZ2V0U2VtaXJpbmc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIGdldFJpbmcgPSBmdW5jdGlvbiAoUikge1xuICAgIHZhciBTID0gKDAsIGV4cG9ydHMuZ2V0U2VtaXJpbmcpKFIpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFkZDogUy5hZGQsXG4gICAgICAgIG11bDogUy5tdWwsXG4gICAgICAgIG9uZTogUy5vbmUsXG4gICAgICAgIHplcm86IFMuemVybyxcbiAgICAgICAgc3ViOiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFIuc3ViKGYoeCksIGcoeCkpOyB9OyB9XG4gICAgfTtcbn07XG5leHBvcnRzLmdldFJpbmcgPSBnZXRSaW5nO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgYXBwbHkgPSBmdW5jdGlvbiAoYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZihhKTtcbiAgICB9O1xufTtcbmV4cG9ydHMuYXBwbHkgPSBhcHBseTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5KGEpIHtcbiAgICByZXR1cm4gYTtcbn1cbmV4cG9ydHMuaWRlbnRpdHkgPSBpZGVudGl0eTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMudW5zYWZlQ29lcmNlID0gaWRlbnRpdHk7XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5mdW5jdGlvbiBjb25zdGFudChhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH07XG59XG5leHBvcnRzLmNvbnN0YW50ID0gY29uc3RhbnQ7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdHJ1ZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuY29uc3RUcnVlID0gY29uc3RhbnQodHJ1ZSk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgZmFsc2VgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLmNvbnN0RmFsc2UgPSBjb25zdGFudChmYWxzZSk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgbnVsbGAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuY29uc3ROdWxsID0gY29uc3RhbnQobnVsbCk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5jb25zdFVuZGVmaW5lZCA9IGNvbnN0YW50KHVuZGVmaW5lZCk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdm9pZGAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuY29uc3RWb2lkID0gZXhwb3J0cy5jb25zdFVuZGVmaW5lZDtcbmZ1bmN0aW9uIGZsaXAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGYoYXJnc1sxXSwgYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBmKGEpKGFyZ3NbMF0pOyB9O1xuICAgIH07XG59XG5leHBvcnRzLmZsaXAgPSBmbGlwO1xuZnVuY3Rpb24gZmxvdyhhYiwgYmMsIGNkLCBkZSwgZWYsIGZnLCBnaCwgaGksIGlqKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBhYjtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjZChiYyhhYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZShjZChiYyhhYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmZyhlZihkZShjZChiYyhhYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSkpKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBnaChmZyhlZihkZShjZChiYyhhYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpaihoaShnaChmZyhlZihkZShjZChiYyhhYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSkpKSkpKSk7XG4gICAgICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm47XG59XG5leHBvcnRzLmZsb3cgPSBmbG93O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZnVuY3Rpb24gdHVwbGUoKSB7XG4gICAgdmFyIHQgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICB0W19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiB0O1xufVxuZXhwb3J0cy50dXBsZSA9IHR1cGxlO1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZnVuY3Rpb24gaW5jcmVtZW50KG4pIHtcbiAgICByZXR1cm4gbiArIDE7XG59XG5leHBvcnRzLmluY3JlbWVudCA9IGluY3JlbWVudDtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmZ1bmN0aW9uIGRlY3JlbWVudChuKSB7XG4gICAgcmV0dXJuIG4gLSAxO1xufVxuZXhwb3J0cy5kZWNyZW1lbnQgPSBkZWNyZW1lbnQ7XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5mdW5jdGlvbiBhYnN1cmQoXykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FsbGVkIGBhYnN1cmRgIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1bmNhbGxhYmxlJyk7XG59XG5leHBvcnRzLmFic3VyZCA9IGFic3VyZDtcbi8qKlxuICogQ3JlYXRlcyBhIHR1cGxlZCB2ZXJzaW9uIG9mIHRoaXMgZnVuY3Rpb246IGluc3RlYWQgb2YgYG5gIGFyZ3VtZW50cywgaXQgYWNjZXB0cyBhIHNpbmdsZSB0dXBsZSBhcmd1bWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdHVwbGVkIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgYWRkID0gdHVwbGVkKCh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciA9PiB4ICsgeSlcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoYWRkKFsxLCAyXSksIDMpXG4gKlxuICogQHNpbmNlIDIuNC4wXG4gKi9cbmZ1bmN0aW9uIHR1cGxlZChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBmLmFwcGx5KHZvaWQgMCwgYSk7IH07XG59XG5leHBvcnRzLnR1cGxlZCA9IHR1cGxlZDtcbi8qKlxuICogSW52ZXJzZSBmdW5jdGlvbiBvZiBgdHVwbGVkYFxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5mdW5jdGlvbiB1bnR1cGxlZChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZihhKTtcbiAgICB9O1xufVxuZXhwb3J0cy51bnR1cGxlZCA9IHVudHVwbGVkO1xuZnVuY3Rpb24gcGlwZShhLCBhYiwgYmMsIGNkLCBkZSwgZWYsIGZnLCBnaCwgaGkpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBhYihhKTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGJjKGFiKGEpKTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGNkKGJjKGFiKGEpKSk7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBkZShjZChiYyhhYihhKSkpKTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGVmKGRlKGNkKGJjKGFiKGEpKSkpKTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZnKGVmKGRlKGNkKGJjKGFiKGEpKSkpKSk7XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBnaChmZyhlZihkZShjZChiYyhhYihhKSkpKSkpKTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGhpKGdoKGZnKGVmKGRlKGNkKGJjKGFiKGEpKSkpKSkpKTtcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgdmFyIHJldCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmV0ID0gYXJndW1lbnRzW2ldKHJldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5waXBlID0gcGlwZTtcbi8qKlxuICogVHlwZSBob2xlIHNpbXVsYXRpb25cbiAqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5ob2xlID0gYWJzdXJkO1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBTSyA9IGZ1bmN0aW9uIChfLCBiKSB7IHJldHVybiBiOyB9O1xuZXhwb3J0cy5TSyA9IFNLO1xuLyoqXG4gKiBVc2UgYFByZWRpY2F0ZWAgbW9kdWxlIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZnVuY3Rpb24gbm90KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIXByZWRpY2F0ZShhKTsgfTtcbn1cbmV4cG9ydHMubm90ID0gbm90O1xuLyoqXG4gKiBVc2UgYEVuZG9tb3JwaGlzbWAgbW9kdWxlIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbnZhciBnZXRFbmRvbW9ycGhpc21Nb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZsb3coZmlyc3QsIHNlY29uZCk7IH0sXG4gICAgZW1wdHk6IGlkZW50aXR5XG59KTsgfTtcbmV4cG9ydHMuZ2V0RW5kb21vcnBoaXNtTW9ub2lkID0gZ2V0RW5kb21vcnBoaXNtTW9ub2lkO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGR1YWwgPSBmdW5jdGlvbiAoYXJpdHksIGJvZHkpIHtcbiAgICB2YXIgaXNEYXRhRmlyc3QgPSB0eXBlb2YgYXJpdHkgPT09ICdudW1iZXInID8gZnVuY3Rpb24gKGFyZ3MpIHsgcmV0dXJuIGFyZ3MubGVuZ3RoID49IGFyaXR5OyB9IDogYXJpdHk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5mcm9tKGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChpc0RhdGFGaXJzdChhcmd1bWVudHMpKSB7XG4gICAgICAgICAgICByZXR1cm4gYm9keS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNlbGYpIHsgcmV0dXJuIGJvZHkuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFtzZWxmXSwgYXJncywgZmFsc2UpKTsgfTtcbiAgICB9O1xufTtcbmV4cG9ydHMuZHVhbCA9IGR1YWw7XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuYXNVbml0ID0gZXhwb3J0cy5hcyA9IGV4cG9ydHMuZ2V0RnVuY3RvckNvbXBvc2l0aW9uID0gZXhwb3J0cy5sZXQgPSBleHBvcnRzLmJpbmRUbyA9IGV4cG9ydHMuZmxhcCA9IGV4cG9ydHMubWFwID0gdm9pZCAwO1xuLyoqXG4gKiBBIGBGdW5jdG9yYCBpcyBhIHR5cGUgY29uc3RydWN0b3Igd2hpY2ggc3VwcG9ydHMgYSBtYXBwaW5nIG9wZXJhdGlvbiBgbWFwYC5cbiAqXG4gKiBgbWFwYCBjYW4gYmUgdXNlZCB0byB0dXJuIGZ1bmN0aW9ucyBgYSAtPiBiYCBpbnRvIGZ1bmN0aW9ucyBgZiBhIC0+IGYgYmAgd2hvc2UgYXJndW1lbnQgYW5kIHJldHVybiB0eXBlcyB1c2UgdGhlIHR5cGVcbiAqIGNvbnN0cnVjdG9yIGBmYCB0byByZXByZXNlbnQgc29tZSBjb21wdXRhdGlvbmFsIGNvbnRleHQuXG4gKlxuICogSW5zdGFuY2VzIG11c3Qgc2F0aXNmeSB0aGUgZm9sbG93aW5nIGxhd3M6XG4gKlxuICogMS4gSWRlbnRpdHk6IGBGLm1hcChmYSwgYSA9PiBhKSA8LT4gZmFgXG4gKiAyLiBDb21wb3NpdGlvbjogYEYubWFwKGZhLCBhID0+IGJjKGFiKGEpKSkgPC0+IEYubWFwKEYubWFwKGZhLCBhYiksIGJjKWBcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiLi9mdW5jdGlvblwiKTtcbmZ1bmN0aW9uIG1hcChGLCBHKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYubWFwKGZhLCBmdW5jdGlvbiAoZ2EpIHsgcmV0dXJuIEcubWFwKGdhLCBmKTsgfSk7IH07IH07XG59XG5leHBvcnRzLm1hcCA9IG1hcDtcbmZ1bmN0aW9uIGZsYXAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKGZhYikgeyByZXR1cm4gRi5tYXAoZmFiLCBmdW5jdGlvbiAoZikgeyByZXR1cm4gZihhKTsgfSk7IH07IH07XG59XG5leHBvcnRzLmZsYXAgPSBmbGFwO1xuZnVuY3Rpb24gYmluZFRvKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5tYXAoZmEsIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHt9LCBfYVtuYW1lXSA9IGEsIF9hKTtcbiAgICB9KTsgfTsgfTtcbn1cbmV4cG9ydHMuYmluZFRvID0gYmluZFRvO1xuZnVuY3Rpb24gbGV0XyhGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYubWFwKGZhLCBmdW5jdGlvbiAoYSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBhLCAoX2EgPSB7fSwgX2FbbmFtZV0gPSBmKGEpLCBfYSkpO1xuICAgIH0pOyB9OyB9O1xufVxuZXhwb3J0cy5sZXQgPSBsZXRfO1xuLyoqIEBkZXByZWNhdGVkICovXG5mdW5jdGlvbiBnZXRGdW5jdG9yQ29tcG9zaXRpb24oRiwgRykge1xuICAgIHZhciBfbWFwID0gbWFwKEYsIEcpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG1hcDogZnVuY3Rpb24gKGZnYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmdhLCBfbWFwKGYpKTsgfVxuICAgIH07XG59XG5leHBvcnRzLmdldEZ1bmN0b3JDb21wb3NpdGlvbiA9IGdldEZ1bmN0b3JDb21wb3NpdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIGFzKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlbGYsIGIpIHsgcmV0dXJuIEYubWFwKHNlbGYsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGI7IH0pOyB9O1xufVxuZXhwb3J0cy5hcyA9IGFzO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gYXNVbml0KEYpIHtcbiAgICB2YXIgYXNNID0gYXMoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmKSB7IHJldHVybiBhc00oc2VsZiwgdW5kZWZpbmVkKTsgfTtcbn1cbmV4cG9ydHMuYXNVbml0ID0gYXNVbml0O1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNvbnN0XyA9IGV4cG9ydHMuQmlmdW5jdG9yID0gZXhwb3J0cy5Db250cmF2YXJpYW50ID0gZXhwb3J0cy5mbGFwID0gZXhwb3J0cy5GdW5jdG9yID0gZXhwb3J0cy5VUkkgPSBleHBvcnRzLm1hcExlZnQgPSBleHBvcnRzLmJpbWFwID0gZXhwb3J0cy5tYXAgPSBleHBvcnRzLmNvbnRyYW1hcCA9IGV4cG9ydHMuZ2V0QXBwbGljYXRpdmUgPSBleHBvcnRzLmdldEFwcGx5ID0gZXhwb3J0cy5nZXRCb29sZWFuQWxnZWJyYSA9IGV4cG9ydHMuZ2V0SGV5dGluZ0FsZ2VicmEgPSBleHBvcnRzLmdldFJpbmcgPSBleHBvcnRzLmdldFNlbWlyaW5nID0gZXhwb3J0cy5nZXRNb25vaWQgPSBleHBvcnRzLmdldFNlbWlncm91cCA9IGV4cG9ydHMuZ2V0Qm91bmRlZCA9IGV4cG9ydHMuZ2V0T3JkID0gZXhwb3J0cy5nZXRFcSA9IGV4cG9ydHMuZ2V0U2hvdyA9IGV4cG9ydHMubWFrZSA9IHZvaWQgMDtcbnZhciBmdW5jdGlvbl8xID0gcmVxdWlyZShcIi4vZnVuY3Rpb25cIik7XG52YXIgRnVuY3Rvcl8xID0gcmVxdWlyZShcIi4vRnVuY3RvclwiKTtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMubWFrZSA9IGZ1bmN0aW9uXzEudW5zYWZlQ29lcmNlO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZnVuY3Rpb24gZ2V0U2hvdyhTKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2hvdzogZnVuY3Rpb24gKGMpIHsgcmV0dXJuIFwibWFrZShcIi5jb25jYXQoUy5zaG93KGMpLCBcIilcIik7IH1cbiAgICB9O1xufVxuZXhwb3J0cy5nZXRTaG93ID0gZ2V0U2hvdztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuZ2V0RXEgPSBmdW5jdGlvbl8xLmlkZW50aXR5O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi42LjBcbiAqL1xuZXhwb3J0cy5nZXRPcmQgPSBmdW5jdGlvbl8xLmlkZW50aXR5O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi42LjBcbiAqL1xuZXhwb3J0cy5nZXRCb3VuZGVkID0gZnVuY3Rpb25fMS5pZGVudGl0eTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNi4wXG4gKi9cbmV4cG9ydHMuZ2V0U2VtaWdyb3VwID0gZnVuY3Rpb25fMS5pZGVudGl0eTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNi4wXG4gKi9cbmV4cG9ydHMuZ2V0TW9ub2lkID0gZnVuY3Rpb25fMS5pZGVudGl0eTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNi4wXG4gKi9cbmV4cG9ydHMuZ2V0U2VtaXJpbmcgPSBmdW5jdGlvbl8xLmlkZW50aXR5O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi42LjBcbiAqL1xuZXhwb3J0cy5nZXRSaW5nID0gZnVuY3Rpb25fMS5pZGVudGl0eTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNi4wXG4gKi9cbmV4cG9ydHMuZ2V0SGV5dGluZ0FsZ2VicmEgPSBmdW5jdGlvbl8xLmlkZW50aXR5O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi42LjBcbiAqL1xuZXhwb3J0cy5nZXRCb29sZWFuQWxnZWJyYSA9IGZ1bmN0aW9uXzEuaWRlbnRpdHk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5mdW5jdGlvbiBnZXRBcHBseShTKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICAgICAgX0U6IHVuZGVmaW5lZCxcbiAgICAgICAgbWFwOiBfbWFwLFxuICAgICAgICBhcDogZnVuY3Rpb24gKGZhYiwgZmEpIHsgcmV0dXJuICgwLCBleHBvcnRzLm1ha2UpKFMuY29uY2F0KGZhYiwgZmEpKTsgfVxuICAgIH07XG59XG5leHBvcnRzLmdldEFwcGx5ID0gZ2V0QXBwbHk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5mdW5jdGlvbiBnZXRBcHBsaWNhdGl2ZShNKSB7XG4gICAgdmFyIEEgPSBnZXRBcHBseShNKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgICAgICBfRTogdW5kZWZpbmVkLFxuICAgICAgICBtYXA6IEEubWFwLFxuICAgICAgICBhcDogQS5hcCxcbiAgICAgICAgb2Y6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICgwLCBleHBvcnRzLm1ha2UpKE0uZW1wdHkpOyB9XG4gICAgfTtcbn1cbmV4cG9ydHMuZ2V0QXBwbGljYXRpdmUgPSBnZXRBcHBsaWNhdGl2ZTtcbnZhciBfY29udHJhbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMuY29udHJhbWFwKShmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9tYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5tYXApKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2JpbWFwID0gZnVuY3Rpb24gKGZhLCBmLCBnKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMuYmltYXApKGYsIGcpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX21hcExlZnQgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5tYXBMZWZ0KShmKSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgY29udHJhbWFwID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb25fMS51bnNhZmVDb2VyY2U7IH07XG5leHBvcnRzLmNvbnRyYW1hcCA9IGNvbnRyYW1hcDtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBtYXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbl8xLnVuc2FmZUNvZXJjZTsgfTtcbmV4cG9ydHMubWFwID0gbWFwO1xuLyoqXG4gKiBNYXAgYSBwYWlyIG9mIGZ1bmN0aW9ucyBvdmVyIHRoZSB0d28gdHlwZSBhcmd1bWVudHMgb2YgdGhlIGJpZnVuY3Rvci5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbnZhciBiaW1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMubWFrZSkoZihmYSkpO1xufTsgfTtcbmV4cG9ydHMuYmltYXAgPSBiaW1hcDtcbi8qKlxuICogTWFwIGEgZnVuY3Rpb24gb3ZlciB0aGUgZmlyc3QgdHlwZSBhcmd1bWVudCBvZiBhIGJpZnVuY3Rvci5cbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjYuMlxuICovXG52YXIgbWFwTGVmdCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuICgwLCBleHBvcnRzLm1ha2UpKGYoZmEpKTsgfTsgfTtcbmV4cG9ydHMubWFwTGVmdCA9IG1hcExlZnQ7XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLlVSSSA9ICdDb25zdCc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkZ1bmN0b3IgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMuZmxhcCA9ICgwLCBGdW5jdG9yXzEuZmxhcCkoZXhwb3J0cy5GdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuQ29udHJhdmFyaWFudCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIGNvbnRyYW1hcDogX2NvbnRyYW1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuQmlmdW5jdG9yID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgYmltYXA6IF9iaW1hcCxcbiAgICBtYXBMZWZ0OiBfbWFwTGVmdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgQy5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBDLmNvbnN0X2BcbiAqICh3aGVyZSBgQ2AgaXMgZnJvbSBgaW1wb3J0IEMgZnJvbSAnZnAtdHMvQ29uc3QnYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLmNvbnN0XyA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBjb250cmFtYXA6IF9jb250cmFtYXAsXG4gICAgYmltYXA6IF9iaW1hcCxcbiAgICBtYXBMZWZ0OiBfbWFwTGVmdFxufTtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5mbGF0TWFwUmVhZGVyID0gZXhwb3J0cy5mbGF0TWFwVGFzayA9IGV4cG9ydHMuZmxhdE1hcElPID0gZXhwb3J0cy5mbGF0TWFwRWl0aGVyID0gZXhwb3J0cy5mbGF0TWFwT3B0aW9uID0gZXhwb3J0cy5mbGF0TWFwTnVsbGFibGUgPSBleHBvcnRzLmxpZnRPcHRpb24gPSBleHBvcnRzLmxpZnROdWxsYWJsZSA9IGV4cG9ydHMuZnJvbVJlYWRvbmx5Tm9uRW1wdHlBcnJheSA9IGV4cG9ydHMuaGFzID0gZXhwb3J0cy5lbXB0eVJlY29yZCA9IGV4cG9ydHMuZW1wdHlSZWFkb25seUFycmF5ID0gZXhwb3J0cy50YWlsID0gZXhwb3J0cy5oZWFkID0gZXhwb3J0cy5pc05vbkVtcHR5ID0gZXhwb3J0cy5zaW5nbGV0b24gPSBleHBvcnRzLnJpZ2h0ID0gZXhwb3J0cy5sZWZ0ID0gZXhwb3J0cy5pc1JpZ2h0ID0gZXhwb3J0cy5pc0xlZnQgPSBleHBvcnRzLnNvbWUgPSBleHBvcnRzLm5vbmUgPSBleHBvcnRzLmlzU29tZSA9IGV4cG9ydHMuaXNOb25lID0gdm9pZCAwO1xudmFyIGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiLi9mdW5jdGlvblwiKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIE9wdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGlzTm9uZSA9IGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZmEuX3RhZyA9PT0gJ05vbmUnOyB9O1xuZXhwb3J0cy5pc05vbmUgPSBpc05vbmU7XG4vKiogQGludGVybmFsICovXG52YXIgaXNTb21lID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmYS5fdGFnID09PSAnU29tZSc7IH07XG5leHBvcnRzLmlzU29tZSA9IGlzU29tZTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMubm9uZSA9IHsgX3RhZzogJ05vbmUnIH07XG4vKiogQGludGVybmFsICovXG52YXIgc29tZSA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoeyBfdGFnOiAnU29tZScsIHZhbHVlOiBhIH0pOyB9O1xuZXhwb3J0cy5zb21lID0gc29tZTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEVpdGhlclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGlzTGVmdCA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gbWEuX3RhZyA9PT0gJ0xlZnQnOyB9O1xuZXhwb3J0cy5pc0xlZnQgPSBpc0xlZnQ7XG4vKiogQGludGVybmFsICovXG52YXIgaXNSaWdodCA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gbWEuX3RhZyA9PT0gJ1JpZ2h0JzsgfTtcbmV4cG9ydHMuaXNSaWdodCA9IGlzUmlnaHQ7XG4vKiogQGludGVybmFsICovXG52YXIgbGVmdCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiAoeyBfdGFnOiAnTGVmdCcsIGxlZnQ6IGUgfSk7IH07XG5leHBvcnRzLmxlZnQgPSBsZWZ0O1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIHJpZ2h0ID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuICh7IF90YWc6ICdSaWdodCcsIHJpZ2h0OiBhIH0pOyB9O1xuZXhwb3J0cy5yaWdodCA9IHJpZ2h0O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gUmVhZG9ubHlOb25FbXB0eUFycmF5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiogQGludGVybmFsICovXG52YXIgc2luZ2xldG9uID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIFthXTsgfTtcbmV4cG9ydHMuc2luZ2xldG9uID0gc2luZ2xldG9uO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGlzTm9uRW1wdHkgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzLmxlbmd0aCA+IDA7IH07XG5leHBvcnRzLmlzTm9uRW1wdHkgPSBpc05vbkVtcHR5O1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGhlYWQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzWzBdOyB9O1xuZXhwb3J0cy5oZWFkID0gaGVhZDtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciB0YWlsID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgxKTsgfTtcbmV4cG9ydHMudGFpbCA9IHRhaWw7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBlbXB0eVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5lbXB0eVJlYWRvbmx5QXJyYXkgPSBbXTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuZW1wdHlSZWNvcmQgPSB7fTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFJlY29yZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5oYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gTm9uRW1wdHlBcnJheVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2FzWzBdXSwgYXMuc2xpY2UoMSksIHRydWUpOyB9O1xuZXhwb3J0cy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5ID0gZnJvbVJlYWRvbmx5Tm9uRW1wdHlBcnJheTtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBsaWZ0TnVsbGFibGUgPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZiwgb25OdWxsYWJsZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYVtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG8gPSBmLmFwcGx5KHZvaWQgMCwgYSk7XG4gICAgICAgICAgICByZXR1cm4gRi5mcm9tRWl0aGVyKG8gPT0gbnVsbCA/ICgwLCBleHBvcnRzLmxlZnQpKG9uTnVsbGFibGUuYXBwbHkodm9pZCAwLCBhKSkgOiAoMCwgZXhwb3J0cy5yaWdodCkobykpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuZXhwb3J0cy5saWZ0TnVsbGFibGUgPSBsaWZ0TnVsbGFibGU7XG4vKiogQGludGVybmFsICovXG52YXIgbGlmdE9wdGlvbiA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmLCBvbk5vbmUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvID0gZi5hcHBseSh2b2lkIDAsIGEpO1xuICAgICAgICAgICAgcmV0dXJuIEYuZnJvbUVpdGhlcigoMCwgZXhwb3J0cy5pc05vbmUpKG8pID8gKDAsIGV4cG9ydHMubGVmdCkob25Ob25lLmFwcGx5KHZvaWQgMCwgYSkpIDogKDAsIGV4cG9ydHMucmlnaHQpKG8udmFsdWUpKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbmV4cG9ydHMubGlmdE9wdGlvbiA9IGxpZnRPcHRpb247XG4vKiogQGludGVybmFsICovXG52YXIgZmxhdE1hcE51bGxhYmxlID0gZnVuY3Rpb24gKEYsIE0pIHtcbiAgICAvKiNfX1BVUkVfXyovIHJldHVybiAoMCwgZnVuY3Rpb25fMS5kdWFsKSgzLCBmdW5jdGlvbiAoc2VsZiwgZiwgb25OdWxsYWJsZSkge1xuICAgICAgICByZXR1cm4gTS5mbGF0TWFwKHNlbGYsICgwLCBleHBvcnRzLmxpZnROdWxsYWJsZSkoRikoZiwgb25OdWxsYWJsZSkpO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuZmxhdE1hcE51bGxhYmxlID0gZmxhdE1hcE51bGxhYmxlO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGZsYXRNYXBPcHRpb24gPSBmdW5jdGlvbiAoRiwgTSkge1xuICAgIC8qI19fUFVSRV9fKi8gcmV0dXJuICgwLCBmdW5jdGlvbl8xLmR1YWwpKDMsIGZ1bmN0aW9uIChzZWxmLCBmLCBvbk5vbmUpIHsgcmV0dXJuIE0uZmxhdE1hcChzZWxmLCAoMCwgZXhwb3J0cy5saWZ0T3B0aW9uKShGKShmLCBvbk5vbmUpKTsgfSk7XG59O1xuZXhwb3J0cy5mbGF0TWFwT3B0aW9uID0gZmxhdE1hcE9wdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBmbGF0TWFwRWl0aGVyID0gZnVuY3Rpb24gKEYsIE0pIHtcbiAgICAvKiNfX1BVUkVfXyovIHJldHVybiAoMCwgZnVuY3Rpb25fMS5kdWFsKSgyLCBmdW5jdGlvbiAoc2VsZiwgZikge1xuICAgICAgICByZXR1cm4gTS5mbGF0TWFwKHNlbGYsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLmZyb21FaXRoZXIoZihhKSk7IH0pO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuZmxhdE1hcEVpdGhlciA9IGZsYXRNYXBFaXRoZXI7XG4vKiogQGludGVybmFsICovXG52YXIgZmxhdE1hcElPID0gZnVuY3Rpb24gKEYsIE0pIHtcbiAgICAvKiNfX1BVUkVfXyovIHJldHVybiAoMCwgZnVuY3Rpb25fMS5kdWFsKSgyLCBmdW5jdGlvbiAoc2VsZiwgZikge1xuICAgICAgICByZXR1cm4gTS5mbGF0TWFwKHNlbGYsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLmZyb21JTyhmKGEpKTsgfSk7XG4gICAgfSk7XG59O1xuZXhwb3J0cy5mbGF0TWFwSU8gPSBmbGF0TWFwSU87XG4vKiogQGludGVybmFsICovXG52YXIgZmxhdE1hcFRhc2sgPSBmdW5jdGlvbiAoRiwgTSkge1xuICAgIC8qI19fUFVSRV9fKi8gcmV0dXJuICgwLCBmdW5jdGlvbl8xLmR1YWwpKDIsIGZ1bmN0aW9uIChzZWxmLCBmKSB7XG4gICAgICAgIHJldHVybiBNLmZsYXRNYXAoc2VsZiwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIEYuZnJvbVRhc2soZihhKSk7IH0pO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuZmxhdE1hcFRhc2sgPSBmbGF0TWFwVGFzaztcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBmbGF0TWFwUmVhZGVyID0gZnVuY3Rpb24gKEYsIE0pIHtcbiAgICAvKiNfX1BVUkVfXyovIHJldHVybiAoMCwgZnVuY3Rpb25fMS5kdWFsKSgyLCBmdW5jdGlvbiAoc2VsZiwgZikge1xuICAgICAgICByZXR1cm4gTS5mbGF0TWFwKHNlbGYsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLmZyb21SZWFkZXIoZihhKSk7IH0pO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuZmxhdE1hcFJlYWRlciA9IGZsYXRNYXBSZWFkZXI7XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5zZXF1ZW5jZVMgPSBleHBvcnRzLnNlcXVlbmNlVCA9IGV4cG9ydHMuZ2V0QXBwbHlTZW1pZ3JvdXAgPSBleHBvcnRzLmFwUyA9IGV4cG9ydHMuYXBTZWNvbmQgPSBleHBvcnRzLmFwRmlyc3QgPSBleHBvcnRzLmFwID0gdm9pZCAwO1xuLyoqXG4gKiBUaGUgYEFwcGx5YCBjbGFzcyBwcm92aWRlcyB0aGUgYGFwYCB3aGljaCBpcyB1c2VkIHRvIGFwcGx5IGEgZnVuY3Rpb24gdG8gYW4gYXJndW1lbnQgdW5kZXIgYSB0eXBlIGNvbnN0cnVjdG9yLlxuICpcbiAqIGBBcHBseWAgY2FuIGJlIHVzZWQgdG8gbGlmdCBmdW5jdGlvbnMgb2YgdHdvIG9yIG1vcmUgYXJndW1lbnRzIHRvIHdvcmsgb24gdmFsdWVzIHdyYXBwZWQgd2l0aCB0aGUgdHlwZSBjb25zdHJ1Y3RvclxuICogYGZgLlxuICpcbiAqIEluc3RhbmNlcyBtdXN0IHNhdGlzZnkgdGhlIGZvbGxvd2luZyBsYXcgaW4gYWRkaXRpb24gdG8gdGhlIGBGdW5jdG9yYCBsYXdzOlxuICpcbiAqIDEuIEFzc29jaWF0aXZlIGNvbXBvc2l0aW9uOiBgRi5hcChGLmFwKEYubWFwKGZiYywgYmMgPT4gYWIgPT4gYSA9PiBiYyhhYihhKSkpLCBmYWIpLCBmYSkgPC0+IEYuYXAoZmJjLCBGLmFwKGZhYiwgZmEpKWBcbiAqXG4gKiBGb3JtYWxseSwgYEFwcGx5YCByZXByZXNlbnRzIGEgc3Ryb25nIGxheCBzZW1pLW1vbm9pZGFsIGVuZG9mdW5jdG9yLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBPIGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBmID0gKGE6IHN0cmluZykgPT4gKGI6IG51bWJlcikgPT4gKGM6IGJvb2xlYW4pID0+IGEgKyBTdHJpbmcoYikgKyBTdHJpbmcoYylcbiAqIGNvbnN0IGZhOiBPLk9wdGlvbjxzdHJpbmc+ID0gTy5zb21lKCdzJylcbiAqIGNvbnN0IGZiOiBPLk9wdGlvbjxudW1iZXI+ID0gTy5zb21lKDEpXG4gKiBjb25zdCBmYzogTy5PcHRpb248Ym9vbGVhbj4gPSBPLnNvbWUodHJ1ZSlcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIC8vIGxpZnQgYSBmdW5jdGlvblxuICogICAgIE8uc29tZShmKSxcbiAqICAgICAvLyBhcHBseSB0aGUgZmlyc3QgYXJndW1lbnRcbiAqICAgICBPLmFwKGZhKSxcbiAqICAgICAvLyBhcHBseSB0aGUgc2Vjb25kIGFyZ3VtZW50XG4gKiAgICAgTy5hcChmYiksXG4gKiAgICAgLy8gYXBwbHkgdGhlIHRoaXJkIGFyZ3VtZW50XG4gKiAgICAgTy5hcChmYylcbiAqICAgKSxcbiAqICAgTy5zb21lKCdzMXRydWUnKVxuICogKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2Z1bmN0aW9uXCIpO1xudmFyIF8gPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vaW50ZXJuYWxcIikpO1xuZnVuY3Rpb24gYXAoRiwgRykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmYWIpIHtcbiAgICAgICAgICAgIHJldHVybiBGLmFwKEYubWFwKGZhYiwgZnVuY3Rpb24gKGdhYikgeyByZXR1cm4gZnVuY3Rpb24gKGdhKSB7IHJldHVybiBHLmFwKGdhYiwgZ2EpOyB9OyB9KSwgZmEpO1xuICAgICAgICB9O1xuICAgIH07XG59XG5leHBvcnRzLmFwID0gYXA7XG5mdW5jdGlvbiBhcEZpcnN0KEEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkgeyByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgIHJldHVybiBBLmFwKEEubWFwKGZpcnN0LCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfTsgfSksIHNlY29uZCk7XG4gICAgfTsgfTtcbn1cbmV4cG9ydHMuYXBGaXJzdCA9IGFwRmlyc3Q7XG5mdW5jdGlvbiBhcFNlY29uZChBKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICAgICAgcmV0dXJuIEEuYXAoQS5tYXAoZmlyc3QsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7IHJldHVybiBiOyB9OyB9KSwgc2Vjb25kKTtcbiAgICAgICAgfTtcbiAgICB9O1xufVxuZXhwb3J0cy5hcFNlY29uZCA9IGFwU2Vjb25kO1xuZnVuY3Rpb24gYXBTKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUsIGZiKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgICAgIHJldHVybiBGLmFwKEYubWFwKGZhLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGEsIChfYSA9IHt9LCBfYVtuYW1lXSA9IGIsIF9hKSk7XG4gICAgICAgICAgICB9OyB9KSwgZmIpO1xuICAgICAgICB9O1xuICAgIH07XG59XG5leHBvcnRzLmFwUyA9IGFwUztcbmZ1bmN0aW9uIGdldEFwcGx5U2VtaWdyb3VwKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgICAgIHJldHVybiBGLmFwKEYubWFwKGZpcnN0LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4gZnVuY3Rpb24gKHkpIHsgcmV0dXJuIFMuY29uY2F0KHgsIHkpOyB9OyB9KSwgc2Vjb25kKTtcbiAgICAgICAgfVxuICAgIH0pOyB9O1xufVxuZXhwb3J0cy5nZXRBcHBseVNlbWlncm91cCA9IGdldEFwcGx5U2VtaWdyb3VwO1xuZnVuY3Rpb24gY3VycmllZChmLCBuLCBhY2MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgdmFyIGNvbWJpbmVkID0gQXJyYXkoYWNjLmxlbmd0aCArIDEpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFjYy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29tYmluZWRbaV0gPSBhY2NbaV07XG4gICAgICAgIH1cbiAgICAgICAgY29tYmluZWRbYWNjLmxlbmd0aF0gPSB4O1xuICAgICAgICByZXR1cm4gbiA9PT0gMCA/IGYuYXBwbHkobnVsbCwgY29tYmluZWQpIDogY3VycmllZChmLCBuIC0gMSwgY29tYmluZWQpO1xuICAgIH07XG59XG52YXIgdHVwbGVDb25zdHJ1Y3RvcnMgPSB7XG4gICAgMTogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIFthXTsgfSxcbiAgICAyOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIFthLCBiXTsgfTsgfSxcbiAgICAzOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGZ1bmN0aW9uIChjKSB7IHJldHVybiBbYSwgYiwgY107IH07IH07IH0sXG4gICAgNDogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7IHJldHVybiBmdW5jdGlvbiAoYykgeyByZXR1cm4gZnVuY3Rpb24gKGQpIHsgcmV0dXJuIFthLCBiLCBjLCBkXTsgfTsgfTsgfTsgfSxcbiAgICA1OiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGZ1bmN0aW9uIChjKSB7IHJldHVybiBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIFthLCBiLCBjLCBkLCBlXTsgfTsgfTsgfTsgfTsgfVxufTtcbmZ1bmN0aW9uIGdldFR1cGxlQ29uc3RydWN0b3IobGVuKSB7XG4gICAgaWYgKCFfLmhhcy5jYWxsKHR1cGxlQ29uc3RydWN0b3JzLCBsZW4pKSB7XG4gICAgICAgIHR1cGxlQ29uc3RydWN0b3JzW2xlbl0gPSBjdXJyaWVkKGZ1bmN0aW9uXzEudHVwbGUsIGxlbiAtIDEsIFtdKTtcbiAgICB9XG4gICAgcmV0dXJuIHR1cGxlQ29uc3RydWN0b3JzW2xlbl07XG59XG5mdW5jdGlvbiBzZXF1ZW5jZVQoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuICAgICAgICB2YXIgZiA9IGdldFR1cGxlQ29uc3RydWN0b3IobGVuKTtcbiAgICAgICAgdmFyIGZhcyA9IEYubWFwKGFyZ3NbMF0sIGYpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBmYXMgPSBGLmFwKGZhcywgYXJnc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhcztcbiAgICB9O1xufVxuZXhwb3J0cy5zZXF1ZW5jZVQgPSBzZXF1ZW5jZVQ7XG5mdW5jdGlvbiBnZXRSZWNvcmRDb25zdHJ1Y3RvcihrZXlzKSB7XG4gICAgdmFyIGxlbiA9IGtleXMubGVuZ3RoO1xuICAgIHN3aXRjaCAobGVuKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9hID0ge30sIF9hW2tleXNbMF1dID0gYSwgX2EpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9hID0ge30sIF9hW2tleXNbMF1dID0gYSwgX2Fba2V5c1sxXV0gPSBiLCBfYSk7XG4gICAgICAgICAgICB9OyB9O1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7IHJldHVybiBmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9hID0ge30sIF9hW2tleXNbMF1dID0gYSwgX2Fba2V5c1sxXV0gPSBiLCBfYVtrZXlzWzJdXSA9IGMsIF9hKTtcbiAgICAgICAgICAgIH07IH07IH07XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGZ1bmN0aW9uIChjKSB7IHJldHVybiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9hID0ge30sXG4gICAgICAgICAgICAgICAgICAgIF9hW2tleXNbMF1dID0gYSxcbiAgICAgICAgICAgICAgICAgICAgX2Fba2V5c1sxXV0gPSBiLFxuICAgICAgICAgICAgICAgICAgICBfYVtrZXlzWzJdXSA9IGMsXG4gICAgICAgICAgICAgICAgICAgIF9hW2tleXNbM11dID0gZCxcbiAgICAgICAgICAgICAgICAgICAgX2EpO1xuICAgICAgICAgICAgfTsgfTsgfTsgfTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAoYikgeyByZXR1cm4gZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGZ1bmN0aW9uIChkKSB7IHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9hID0ge30sXG4gICAgICAgICAgICAgICAgICAgIF9hW2tleXNbMF1dID0gYSxcbiAgICAgICAgICAgICAgICAgICAgX2Fba2V5c1sxXV0gPSBiLFxuICAgICAgICAgICAgICAgICAgICBfYVtrZXlzWzJdXSA9IGMsXG4gICAgICAgICAgICAgICAgICAgIF9hW2tleXNbM11dID0gZCxcbiAgICAgICAgICAgICAgICAgICAgX2Fba2V5c1s0XV0gPSBlLFxuICAgICAgICAgICAgICAgICAgICBfYSk7XG4gICAgICAgICAgICB9OyB9OyB9OyB9OyB9O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGN1cnJpZWQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgciA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcltrZXlzW2ldXSA9IGFyZ3NbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfSwgbGVuIC0gMSwgW10pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNlcXVlbmNlUyhGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocik7XG4gICAgICAgIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgdmFyIGYgPSBnZXRSZWNvcmRDb25zdHJ1Y3RvcihrZXlzKTtcbiAgICAgICAgdmFyIGZyID0gRi5tYXAocltrZXlzWzBdXSwgZik7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGZyID0gRi5hcChmciwgcltrZXlzW2ldXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyO1xuICAgIH07XG59XG5leHBvcnRzLnNlcXVlbmNlUyA9IHNlcXVlbmNlUztcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5iaW5kID0gZXhwb3J0cy50YXAgPSBleHBvcnRzLmNoYWluRmlyc3QgPSB2b2lkIDA7XG5mdW5jdGlvbiBjaGFpbkZpcnN0KE0pIHtcbiAgICB2YXIgdGFwTSA9IHRhcChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdGFwTShmaXJzdCwgZik7IH07IH07XG59XG5leHBvcnRzLmNoYWluRmlyc3QgPSBjaGFpbkZpcnN0O1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gdGFwKE0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0LCBmKSB7IHJldHVybiBNLmNoYWluKGZpcnN0LCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gTS5tYXAoZihhKSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfSk7IH0pOyB9O1xufVxuZXhwb3J0cy50YXAgPSB0YXA7XG5mdW5jdGlvbiBiaW5kKE0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gTS5jaGFpbihtYSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIE0ubWFwKGYoYSksIGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGEsIChfYSA9IHt9LCBfYVtuYW1lXSA9IGIsIF9hKSk7XG4gICAgfSk7IH0pOyB9OyB9O1xufVxuZXhwb3J0cy5iaW5kID0gYmluZDtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5waXBlID0gZXhwb3J0cy5waXBlYWJsZSA9IGV4cG9ydHMuY29tcG9zZSA9IGV4cG9ydHMucHJvbWFwID0gZXhwb3J0cy5wYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBleHBvcnRzLnBhcnRpdGlvbldpdGhJbmRleCA9IGV4cG9ydHMuZmlsdGVyTWFwV2l0aEluZGV4ID0gZXhwb3J0cy5maWx0ZXJXaXRoSW5kZXggPSBleHBvcnRzLnBhcnRpdGlvbk1hcCA9IGV4cG9ydHMucGFydGl0aW9uID0gZXhwb3J0cy5maWx0ZXJNYXAgPSBleHBvcnRzLmZpbHRlciA9IGV4cG9ydHMuYWx0ID0gZXhwb3J0cy5yZWR1Y2VSaWdodFdpdGhJbmRleCA9IGV4cG9ydHMuZm9sZE1hcFdpdGhJbmRleCA9IGV4cG9ydHMucmVkdWNlV2l0aEluZGV4ID0gZXhwb3J0cy5yZWR1Y2VSaWdodCA9IGV4cG9ydHMuZm9sZE1hcCA9IGV4cG9ydHMucmVkdWNlID0gZXhwb3J0cy5leHRlbmQgPSBleHBvcnRzLm1hcExlZnQgPSBleHBvcnRzLmJpbWFwID0gZXhwb3J0cy5jaGFpbiA9IGV4cG9ydHMuYXAgPSBleHBvcnRzLm1hcFdpdGhJbmRleCA9IGV4cG9ydHMuY29udHJhbWFwID0gZXhwb3J0cy5tYXAgPSB2b2lkIDA7XG52YXIgQXBwbHlfMSA9IHJlcXVpcmUoXCIuL0FwcGx5XCIpO1xudmFyIENoYWluXzEgPSByZXF1aXJlKFwiLi9DaGFpblwiKTtcbnZhciBmdW5jdGlvbl8xID0gcmVxdWlyZShcIi4vZnVuY3Rpb25cIik7XG5mdW5jdGlvbiBtYXAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLm1hcChmYSwgZik7IH07IH07XG59XG5leHBvcnRzLm1hcCA9IG1hcDtcbmZ1bmN0aW9uIGNvbnRyYW1hcChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYuY29udHJhbWFwKGZhLCBmKTsgfTsgfTtcbn1cbmV4cG9ydHMuY29udHJhbWFwID0gY29udHJhbWFwO1xuZnVuY3Rpb24gbWFwV2l0aEluZGV4KEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5tYXBXaXRoSW5kZXgoZmEsIGYpOyB9OyB9O1xufVxuZXhwb3J0cy5tYXBXaXRoSW5kZXggPSBtYXBXaXRoSW5kZXg7XG5mdW5jdGlvbiBhcChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZnVuY3Rpb24gKGZhYikgeyByZXR1cm4gRi5hcChmYWIsIGZhKTsgfTsgfTtcbn1cbmV4cG9ydHMuYXAgPSBhcDtcbmZ1bmN0aW9uIGNoYWluKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5jaGFpbihmYSwgZik7IH07IH07XG59XG5leHBvcnRzLmNoYWluID0gY2hhaW47XG5mdW5jdGlvbiBiaW1hcChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmLCBnKSB7IHJldHVybiBmdW5jdGlvbiAoZmVhKSB7IHJldHVybiBGLmJpbWFwKGZlYSwgZiwgZyk7IH07IH07XG59XG5leHBvcnRzLmJpbWFwID0gYmltYXA7XG5mdW5jdGlvbiBtYXBMZWZ0KEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmZWEpIHsgcmV0dXJuIEYubWFwTGVmdChmZWEsIGYpOyB9OyB9O1xufVxuZXhwb3J0cy5tYXBMZWZ0ID0gbWFwTGVmdDtcbmZ1bmN0aW9uIGV4dGVuZChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAod2EpIHsgcmV0dXJuIEYuZXh0ZW5kKHdhLCBmKTsgfTsgfTtcbn1cbmV4cG9ydHMuZXh0ZW5kID0gZXh0ZW5kO1xuZnVuY3Rpb24gcmVkdWNlKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5yZWR1Y2UoZmEsIGIsIGYpOyB9OyB9O1xufVxuZXhwb3J0cy5yZWR1Y2UgPSByZWR1Y2U7XG5mdW5jdGlvbiBmb2xkTWFwKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKE0pIHtcbiAgICAgICAgdmFyIGZvbGRNYXBNID0gRi5mb2xkTWFwKE0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZm9sZE1hcE0oZmEsIGYpOyB9OyB9O1xuICAgIH07XG59XG5leHBvcnRzLmZvbGRNYXAgPSBmb2xkTWFwO1xuZnVuY3Rpb24gcmVkdWNlUmlnaHQoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLnJlZHVjZVJpZ2h0KGZhLCBiLCBmKTsgfTsgfTtcbn1cbmV4cG9ydHMucmVkdWNlUmlnaHQgPSByZWR1Y2VSaWdodDtcbmZ1bmN0aW9uIHJlZHVjZVdpdGhJbmRleChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYucmVkdWNlV2l0aEluZGV4KGZhLCBiLCBmKTsgfTsgfTtcbn1cbmV4cG9ydHMucmVkdWNlV2l0aEluZGV4ID0gcmVkdWNlV2l0aEluZGV4O1xuZnVuY3Rpb24gZm9sZE1hcFdpdGhJbmRleChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChNKSB7XG4gICAgICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TSA9IEYuZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZvbGRNYXBXaXRoSW5kZXhNKGZhLCBmKTsgfTsgfTtcbiAgICB9O1xufVxuZXhwb3J0cy5mb2xkTWFwV2l0aEluZGV4ID0gZm9sZE1hcFdpdGhJbmRleDtcbmZ1bmN0aW9uIHJlZHVjZVJpZ2h0V2l0aEluZGV4KEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5yZWR1Y2VSaWdodFdpdGhJbmRleChmYSwgYiwgZik7IH07IH07XG59XG5leHBvcnRzLnJlZHVjZVJpZ2h0V2l0aEluZGV4ID0gcmVkdWNlUmlnaHRXaXRoSW5kZXg7XG5mdW5jdGlvbiBhbHQoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGhhdCkgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLmFsdChmYSwgdGhhdCk7IH07IH07XG59XG5leHBvcnRzLmFsdCA9IGFsdDtcbmZ1bmN0aW9uIGZpbHRlcihGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwcmVkaWNhdGUpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5maWx0ZXIoZmEsIHByZWRpY2F0ZSk7IH07IH07XG59XG5leHBvcnRzLmZpbHRlciA9IGZpbHRlcjtcbmZ1bmN0aW9uIGZpbHRlck1hcChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYuZmlsdGVyTWFwKGZhLCBmKTsgfTsgfTtcbn1cbmV4cG9ydHMuZmlsdGVyTWFwID0gZmlsdGVyTWFwO1xuZnVuY3Rpb24gcGFydGl0aW9uKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5wYXJ0aXRpb24oZmEsIGYpOyB9OyB9O1xufVxuZXhwb3J0cy5wYXJ0aXRpb24gPSBwYXJ0aXRpb247XG5mdW5jdGlvbiBwYXJ0aXRpb25NYXAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLnBhcnRpdGlvbk1hcChmYSwgZik7IH07IH07XG59XG5leHBvcnRzLnBhcnRpdGlvbk1hcCA9IHBhcnRpdGlvbk1hcDtcbmZ1bmN0aW9uIGZpbHRlcldpdGhJbmRleChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwcmVkaWNhdGUpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5maWx0ZXJXaXRoSW5kZXgoZmEsIHByZWRpY2F0ZSk7IH07IH07XG59XG5leHBvcnRzLmZpbHRlcldpdGhJbmRleCA9IGZpbHRlcldpdGhJbmRleDtcbmZ1bmN0aW9uIGZpbHRlck1hcFdpdGhJbmRleChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYuZmlsdGVyTWFwV2l0aEluZGV4KGZhLCBmKTsgfTsgfTtcbn1cbmV4cG9ydHMuZmlsdGVyTWFwV2l0aEluZGV4ID0gZmlsdGVyTWFwV2l0aEluZGV4O1xuZnVuY3Rpb24gcGFydGl0aW9uV2l0aEluZGV4KEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5wYXJ0aXRpb25XaXRoSW5kZXgoZmEsIGYpOyB9OyB9O1xufVxuZXhwb3J0cy5wYXJ0aXRpb25XaXRoSW5kZXggPSBwYXJ0aXRpb25XaXRoSW5kZXg7XG5mdW5jdGlvbiBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLnBhcnRpdGlvbk1hcFdpdGhJbmRleChmYSwgZik7IH07IH07XG59XG5leHBvcnRzLnBhcnRpdGlvbk1hcFdpdGhJbmRleCA9IHBhcnRpdGlvbk1hcFdpdGhJbmRleDtcbmZ1bmN0aW9uIHByb21hcChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmLCBnKSB7IHJldHVybiBmdW5jdGlvbiAoZmJjKSB7IHJldHVybiBGLnByb21hcChmYmMsIGYsIGcpOyB9OyB9O1xufVxuZXhwb3J0cy5wcm9tYXAgPSBwcm9tYXA7XG5mdW5jdGlvbiBjb21wb3NlKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGVhKSB7IHJldHVybiBmdW5jdGlvbiAoYWIpIHsgcmV0dXJuIEYuY29tcG9zZShhYiwgZWEpOyB9OyB9O1xufVxuZXhwb3J0cy5jb21wb3NlID0gY29tcG9zZTtcbnZhciBpc0Z1bmN0b3IgPSBmdW5jdGlvbiAoSSkgeyByZXR1cm4gdHlwZW9mIEkubWFwID09PSAnZnVuY3Rpb24nOyB9O1xudmFyIGlzQ29udHJhdmFyaWFudCA9IGZ1bmN0aW9uIChJKSB7IHJldHVybiB0eXBlb2YgSS5jb250cmFtYXAgPT09ICdmdW5jdGlvbic7IH07XG52YXIgaXNGdW5jdG9yV2l0aEluZGV4ID0gZnVuY3Rpb24gKEkpIHsgcmV0dXJuIHR5cGVvZiBJLm1hcFdpdGhJbmRleCA9PT0gJ2Z1bmN0aW9uJzsgfTtcbnZhciBpc0FwcGx5ID0gZnVuY3Rpb24gKEkpIHsgcmV0dXJuIHR5cGVvZiBJLmFwID09PSAnZnVuY3Rpb24nOyB9O1xudmFyIGlzQ2hhaW4gPSBmdW5jdGlvbiAoSSkgeyByZXR1cm4gdHlwZW9mIEkuY2hhaW4gPT09ICdmdW5jdGlvbic7IH07XG52YXIgaXNCaWZ1bmN0b3IgPSBmdW5jdGlvbiAoSSkgeyByZXR1cm4gdHlwZW9mIEkuYmltYXAgPT09ICdmdW5jdGlvbic7IH07XG52YXIgaXNFeHRlbmQgPSBmdW5jdGlvbiAoSSkgeyByZXR1cm4gdHlwZW9mIEkuZXh0ZW5kID09PSAnZnVuY3Rpb24nOyB9O1xudmFyIGlzRm9sZGFibGUgPSBmdW5jdGlvbiAoSSkgeyByZXR1cm4gdHlwZW9mIEkucmVkdWNlID09PSAnZnVuY3Rpb24nOyB9O1xudmFyIGlzRm9sZGFibGVXaXRoSW5kZXggPSBmdW5jdGlvbiAoSSkgeyByZXR1cm4gdHlwZW9mIEkucmVkdWNlV2l0aEluZGV4ID09PSAnZnVuY3Rpb24nOyB9O1xudmFyIGlzQWx0ID0gZnVuY3Rpb24gKEkpIHsgcmV0dXJuIHR5cGVvZiBJLmFsdCA9PT0gJ2Z1bmN0aW9uJzsgfTtcbnZhciBpc0NvbXBhY3RhYmxlID0gZnVuY3Rpb24gKEkpIHsgcmV0dXJuIHR5cGVvZiBJLmNvbXBhY3QgPT09ICdmdW5jdGlvbic7IH07XG52YXIgaXNGaWx0ZXJhYmxlID0gZnVuY3Rpb24gKEkpIHsgcmV0dXJuIHR5cGVvZiBJLmZpbHRlciA9PT0gJ2Z1bmN0aW9uJzsgfTtcbnZhciBpc0ZpbHRlcmFibGVXaXRoSW5kZXggPSBmdW5jdGlvbiAoSSkge1xuICAgIHJldHVybiB0eXBlb2YgSS5maWx0ZXJXaXRoSW5kZXggPT09ICdmdW5jdGlvbic7XG59O1xudmFyIGlzUHJvZnVuY3RvciA9IGZ1bmN0aW9uIChJKSB7IHJldHVybiB0eXBlb2YgSS5wcm9tYXAgPT09ICdmdW5jdGlvbic7IH07XG52YXIgaXNTZW1pZ3JvdXBvaWQgPSBmdW5jdGlvbiAoSSkgeyByZXR1cm4gdHlwZW9mIEkuY29tcG9zZSA9PT0gJ2Z1bmN0aW9uJzsgfTtcbnZhciBpc01vbmFkVGhyb3cgPSBmdW5jdGlvbiAoSSkgeyByZXR1cm4gdHlwZW9mIEkudGhyb3dFcnJvciA9PT0gJ2Z1bmN0aW9uJzsgfTtcbi8qKiBAZGVwcmVjYXRlZCAqL1xuZnVuY3Rpb24gcGlwZWFibGUoSSkge1xuICAgIHZhciByID0ge307XG4gICAgaWYgKGlzRnVuY3RvcihJKSkge1xuICAgICAgICByLm1hcCA9IG1hcChJKTtcbiAgICB9XG4gICAgaWYgKGlzQ29udHJhdmFyaWFudChJKSkge1xuICAgICAgICByLmNvbnRyYW1hcCA9IGNvbnRyYW1hcChJKTtcbiAgICB9XG4gICAgaWYgKGlzRnVuY3RvcldpdGhJbmRleChJKSkge1xuICAgICAgICByLm1hcFdpdGhJbmRleCA9IG1hcFdpdGhJbmRleChJKTtcbiAgICB9XG4gICAgaWYgKGlzQXBwbHkoSSkpIHtcbiAgICAgICAgci5hcCA9IGFwKEkpO1xuICAgICAgICByLmFwRmlyc3QgPSAoMCwgQXBwbHlfMS5hcEZpcnN0KShJKTtcbiAgICAgICAgci5hcFNlY29uZCA9ICgwLCBBcHBseV8xLmFwU2Vjb25kKShJKTtcbiAgICB9XG4gICAgaWYgKGlzQ2hhaW4oSSkpIHtcbiAgICAgICAgci5jaGFpbiA9IGNoYWluKEkpO1xuICAgICAgICByLmNoYWluRmlyc3QgPSAoMCwgQ2hhaW5fMS5jaGFpbkZpcnN0KShJKTtcbiAgICAgICAgci5mbGF0dGVuID0gci5jaGFpbihmdW5jdGlvbl8xLmlkZW50aXR5KTtcbiAgICB9XG4gICAgaWYgKGlzQmlmdW5jdG9yKEkpKSB7XG4gICAgICAgIHIuYmltYXAgPSBiaW1hcChJKTtcbiAgICAgICAgci5tYXBMZWZ0ID0gbWFwTGVmdChJKTtcbiAgICB9XG4gICAgaWYgKGlzRXh0ZW5kKEkpKSB7XG4gICAgICAgIHIuZXh0ZW5kID0gZXh0ZW5kKEkpO1xuICAgICAgICByLmR1cGxpY2F0ZSA9IHIuZXh0ZW5kKGZ1bmN0aW9uXzEuaWRlbnRpdHkpO1xuICAgIH1cbiAgICBpZiAoaXNGb2xkYWJsZShJKSkge1xuICAgICAgICByLnJlZHVjZSA9IHJlZHVjZShJKTtcbiAgICAgICAgci5mb2xkTWFwID0gZm9sZE1hcChJKTtcbiAgICAgICAgci5yZWR1Y2VSaWdodCA9IHJlZHVjZVJpZ2h0KEkpO1xuICAgIH1cbiAgICBpZiAoaXNGb2xkYWJsZVdpdGhJbmRleChJKSkge1xuICAgICAgICByLnJlZHVjZVdpdGhJbmRleCA9IHJlZHVjZVdpdGhJbmRleChJKTtcbiAgICAgICAgci5mb2xkTWFwV2l0aEluZGV4ID0gZm9sZE1hcFdpdGhJbmRleChJKTtcbiAgICAgICAgci5yZWR1Y2VSaWdodFdpdGhJbmRleCA9IHJlZHVjZVJpZ2h0V2l0aEluZGV4KEkpO1xuICAgIH1cbiAgICBpZiAoaXNBbHQoSSkpIHtcbiAgICAgICAgci5hbHQgPSBhbHQoSSk7XG4gICAgfVxuICAgIGlmIChpc0NvbXBhY3RhYmxlKEkpKSB7XG4gICAgICAgIHIuY29tcGFjdCA9IEkuY29tcGFjdDtcbiAgICAgICAgci5zZXBhcmF0ZSA9IEkuc2VwYXJhdGU7XG4gICAgfVxuICAgIGlmIChpc0ZpbHRlcmFibGUoSSkpIHtcbiAgICAgICAgci5maWx0ZXIgPSBmaWx0ZXIoSSk7XG4gICAgICAgIHIuZmlsdGVyTWFwID0gZmlsdGVyTWFwKEkpO1xuICAgICAgICByLnBhcnRpdGlvbiA9IHBhcnRpdGlvbihJKTtcbiAgICAgICAgci5wYXJ0aXRpb25NYXAgPSBwYXJ0aXRpb25NYXAoSSk7XG4gICAgfVxuICAgIGlmIChpc0ZpbHRlcmFibGVXaXRoSW5kZXgoSSkpIHtcbiAgICAgICAgci5maWx0ZXJXaXRoSW5kZXggPSBmaWx0ZXJXaXRoSW5kZXgoSSk7XG4gICAgICAgIHIuZmlsdGVyTWFwV2l0aEluZGV4ID0gZmlsdGVyTWFwV2l0aEluZGV4KEkpO1xuICAgICAgICByLnBhcnRpdGlvbldpdGhJbmRleCA9IHBhcnRpdGlvbldpdGhJbmRleChJKTtcbiAgICAgICAgci5wYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoSSk7XG4gICAgfVxuICAgIGlmIChpc1Byb2Z1bmN0b3IoSSkpIHtcbiAgICAgICAgci5wcm9tYXAgPSBwcm9tYXAoSSk7XG4gICAgfVxuICAgIGlmIChpc1NlbWlncm91cG9pZChJKSkge1xuICAgICAgICByLmNvbXBvc2UgPSBjb21wb3NlKEkpO1xuICAgIH1cbiAgICBpZiAoaXNNb25hZFRocm93KEkpKSB7XG4gICAgICAgIHZhciBmcm9tT3B0aW9uID0gZnVuY3Rpb24gKG9uTm9uZSkgeyByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgICAgICByZXR1cm4gbWEuX3RhZyA9PT0gJ05vbmUnID8gSS50aHJvd0Vycm9yKG9uTm9uZSgpKSA6IEkub2YobWEudmFsdWUpO1xuICAgICAgICB9OyB9O1xuICAgICAgICB2YXIgZnJvbUVpdGhlciA9IGZ1bmN0aW9uIChtYSkge1xuICAgICAgICAgICAgcmV0dXJuIG1hLl90YWcgPT09ICdMZWZ0JyA/IEkudGhyb3dFcnJvcihtYS5sZWZ0KSA6IEkub2YobWEucmlnaHQpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZnJvbVByZWRpY2F0ZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIG9uRmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmVkaWNhdGUoYSkgPyBJLm9mKGEpIDogSS50aHJvd0Vycm9yKG9uRmFsc2UoYSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGZpbHRlck9yRWxzZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIG9uRmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSS5jaGFpbihtYSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChwcmVkaWNhdGUoYSkgPyBJLm9mKGEpIDogSS50aHJvd0Vycm9yKG9uRmFsc2UoYSkpKTsgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICByLmZyb21PcHRpb24gPSBmcm9tT3B0aW9uO1xuICAgICAgICByLmZyb21FaXRoZXIgPSBmcm9tRWl0aGVyO1xuICAgICAgICByLmZyb21QcmVkaWNhdGUgPSBmcm9tUHJlZGljYXRlO1xuICAgICAgICByLmZpbHRlck9yRWxzZSA9IGZpbHRlck9yRWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5leHBvcnRzLnBpcGVhYmxlID0gcGlwZWFibGU7XG4vKipcbiAqIFVzZSBbYHBpcGVgXShodHRwczovL2djYW50aS5naXRodWIuaW8vZnAtdHMvbW9kdWxlcy9mdW5jdGlvbi50cy5odG1sI3BpcGUpIGZyb20gYGZ1bmN0aW9uYCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMucGlwZSA9IGZ1bmN0aW9uXzEucGlwZTtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5lcURhdGUgPSBleHBvcnRzLmVxTnVtYmVyID0gZXhwb3J0cy5lcVN0cmluZyA9IGV4cG9ydHMuZXFCb29sZWFuID0gZXhwb3J0cy5lcSA9IGV4cG9ydHMuc3RyaWN0RXF1YWwgPSBleHBvcnRzLmdldFN0cnVjdEVxID0gZXhwb3J0cy5nZXRUdXBsZUVxID0gZXhwb3J0cy5Db250cmF2YXJpYW50ID0gZXhwb3J0cy5nZXRNb25vaWQgPSBleHBvcnRzLmdldFNlbWlncm91cCA9IGV4cG9ydHMuZXFTdHJpY3QgPSBleHBvcnRzLlVSSSA9IGV4cG9ydHMuY29udHJhbWFwID0gZXhwb3J0cy50dXBsZSA9IGV4cG9ydHMuc3RydWN0ID0gZXhwb3J0cy5mcm9tRXF1YWxzID0gdm9pZCAwO1xudmFyIGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiLi9mdW5jdGlvblwiKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIGZyb21FcXVhbHMgPSBmdW5jdGlvbiAoZXF1YWxzKSB7IHJldHVybiAoe1xuICAgIGVxdWFsczogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggPT09IHkgfHwgZXF1YWxzKHgsIHkpOyB9XG59KTsgfTtcbmV4cG9ydHMuZnJvbUVxdWFscyA9IGZyb21FcXVhbHM7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciBzdHJ1Y3QgPSBmdW5jdGlvbiAoZXFzKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmZyb21FcXVhbHMpKGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBlcXMpIHtcbiAgICAgICAgICAgIGlmICghZXFzW2tleV0uZXF1YWxzKGZpcnN0W2tleV0sIHNlY29uZFtrZXldKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbn07XG5leHBvcnRzLnN0cnVjdCA9IHN0cnVjdDtcbi8qKlxuICogR2l2ZW4gYSB0dXBsZSBvZiBgRXFgcyByZXR1cm5zIGEgYEVxYCBmb3IgdGhlIHR1cGxlXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlIH0gZnJvbSAnZnAtdHMvRXEnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0ICogYXMgQiBmcm9tICdmcC10cy9ib29sZWFuJ1xuICpcbiAqIGNvbnN0IEUgPSB0dXBsZShTLkVxLCBOLkVxLCBCLkVxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsnYScsIDEsIHRydWVdLCBbJ2EnLCAxLCB0cnVlXSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWydhJywgMSwgdHJ1ZV0sIFsnYicsIDEsIHRydWVdKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWydhJywgMSwgdHJ1ZV0sIFsnYScsIDIsIHRydWVdKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWydhJywgMSwgdHJ1ZV0sIFsnYScsIDEsIGZhbHNlXSksIGZhbHNlKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIHR1cGxlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBlcXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBlcXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmZyb21FcXVhbHMpKGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBlcXMuZXZlcnkoZnVuY3Rpb24gKEUsIGkpIHsgcmV0dXJuIEUuZXF1YWxzKGZpcnN0W2ldLCBzZWNvbmRbaV0pOyB9KTsgfSk7XG59O1xuZXhwb3J0cy50dXBsZSA9IHR1cGxlO1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBjb250cmFtYXBfID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMuY29udHJhbWFwKShmKSk7IH07XG4vKipcbiAqIEEgdHlwaWNhbCB1c2UgY2FzZSBmb3IgYGNvbnRyYW1hcGAgd291bGQgYmUgbGlrZSwgZ2l2ZW4gc29tZSBgVXNlcmAgdHlwZSwgdG8gY29uc3RydWN0IGFuIGBFcTxVc2VyPmAuXG4gKlxuICogV2UgY2FuIGRvIHNvIHdpdGggYSBmdW5jdGlvbiBmcm9tIGBVc2VyIC0+IFhgIHdoZXJlIGBYYCBpcyBzb21lIHZhbHVlIHRoYXQgd2Uga25vdyBob3cgdG8gY29tcGFyZVxuICogZm9yIGVxdWFsaXR5IChtZWFuaW5nIHdlIGhhdmUgYW4gYEVxPFg+YClcbiAqXG4gKiBGb3IgZXhhbXBsZSwgZ2l2ZW4gdGhlIGZvbGxvd2luZyBgVXNlcmAgdHlwZSwgd2Ugd2FudCB0byBjb25zdHJ1Y3QgYW4gYEVxPFVzZXI+YCB0aGF0IGp1c3QgbG9va3MgYXQgdGhlIGBrZXlgIGZpZWxkXG4gKiBmb3IgZWFjaCB1c2VyIChzaW5jZSBpdCdzIGtub3duIHRvIGJlIHVuaXF1ZSkuXG4gKlxuICogSWYgd2UgaGF2ZSBhIHdheSBvZiBjb21wYXJpbmcgYFVVSURgcyBmb3IgZXF1YWxpdHkgKGBlcVVVSUQ6IEVxPFVVSUQ+YCkgYW5kIHdlIGtub3cgaG93IHRvIGdvIGZyb20gYFVzZXIgLT4gVVVJRGAsXG4gKiB1c2luZyBgY29udHJhbWFwYCB3ZSBjYW4gZG8gdGhpc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBjb250cmFtYXAsIEVxIH0gZnJvbSAnZnAtdHMvRXEnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiB0eXBlIFVVSUQgPSBzdHJpbmdcbiAqXG4gKiBpbnRlcmZhY2UgVXNlciB7XG4gKiAgIHJlYWRvbmx5IGtleTogVVVJRFxuICogICByZWFkb25seSBmaXJzdE5hbWU6IHN0cmluZ1xuICogICByZWFkb25seSBsYXN0TmFtZTogc3RyaW5nXG4gKiB9XG4gKlxuICogY29uc3QgZXFVVUlEOiBFcTxVVUlEPiA9IFMuRXFcbiAqXG4gKiBjb25zdCBlcVVzZXJCeUtleTogRXE8VXNlcj4gPSBwaXBlKFxuICogICBlcVVVSUQsXG4gKiAgIGNvbnRyYW1hcCgodXNlcikgPT4gdXNlci5rZXkpXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgZXFVc2VyQnlLZXkuZXF1YWxzKFxuICogICAgIHsga2V5OiAnazEnLCBmaXJzdE5hbWU6ICdhMScsIGxhc3ROYW1lOiAnYjEnIH0sXG4gKiAgICAgeyBrZXk6ICdrMicsIGZpcnN0TmFtZTogJ2ExJywgbGFzdE5hbWU6ICdiMScgfVxuICogICApLFxuICogICBmYWxzZVxuICogKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgZXFVc2VyQnlLZXkuZXF1YWxzKFxuICogICAgIHsga2V5OiAnazEnLCBmaXJzdE5hbWU6ICdhMScsIGxhc3ROYW1lOiAnYjEnIH0sXG4gKiAgICAgeyBrZXk6ICdrMScsIGZpcnN0TmFtZTogJ2EyJywgbGFzdE5hbWU6ICdiMScgfVxuICogICApLFxuICogICB0cnVlXG4gKiApXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBjb250cmFtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmZyb21FcXVhbHMpKGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmYS5lcXVhbHMoZih4KSwgZih5KSk7IH0pO1xufTsgfTtcbmV4cG9ydHMuY29udHJhbWFwID0gY29udHJhbWFwO1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5VUkkgPSAnRXEnO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0cy5lcVN0cmljdCA9IHtcbiAgICBlcXVhbHM6IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhID09PSBiOyB9XG59O1xudmFyIGVtcHR5ID0ge1xuICAgIGVxdWFsczogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgZ2V0U2VtaWdyb3VwID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiAoMCwgZXhwb3J0cy5mcm9tRXF1YWxzKShmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4geC5lcXVhbHMoYSwgYikgJiYgeS5lcXVhbHMoYSwgYik7IH0pOyB9XG59KTsgfTtcbmV4cG9ydHMuZ2V0U2VtaWdyb3VwID0gZ2V0U2VtaWdyb3VwO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi42LjBcbiAqL1xudmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiAoMCwgZXhwb3J0cy5nZXRTZW1pZ3JvdXApKCkuY29uY2F0LFxuICAgIGVtcHR5OiBlbXB0eVxufSk7IH07XG5leHBvcnRzLmdldE1vbm9pZCA9IGdldE1vbm9pZDtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuQ29udHJhdmFyaWFudCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIGNvbnRyYW1hcDogY29udHJhbWFwX1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIFtgdHVwbGVgXSgjdHVwbGUpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5nZXRUdXBsZUVxID0gZXhwb3J0cy50dXBsZTtcbi8qKlxuICogVXNlIFtgc3RydWN0YF0oI3N0cnVjdCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLmdldFN0cnVjdEVxID0gZXhwb3J0cy5zdHJ1Y3Q7XG4vKipcbiAqIFVzZSBbYGVxU3RyaWN0YF0oI2Vxc3RyaWN0KSBpbnN0ZWFkXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5zdHJpY3RFcXVhbCA9IGV4cG9ydHMuZXFTdHJpY3QuZXF1YWxzO1xuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYENvbnRyYXZhcmlhbnRgIGluc3RhbmNlLCBwYXNzIGBFLkNvbnRyYXZhcmlhbnRgIGluc3RlYWQgb2YgYEUuZXFgXG4gKiAod2hlcmUgYEVgIGlzIGZyb20gYGltcG9ydCBFIGZyb20gJ2ZwLXRzL0VxJ2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5lcSA9IGV4cG9ydHMuQ29udHJhdmFyaWFudDtcbi8qKlxuICogVXNlIFtgRXFgXSguL2Jvb2xlYW4udHMuaHRtbCNlcSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLmVxQm9vbGVhbiA9IGV4cG9ydHMuZXFTdHJpY3Q7XG4vKipcbiAqIFVzZSBbYEVxYF0oLi9zdHJpbmcudHMuaHRtbCNlcSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLmVxU3RyaW5nID0gZXhwb3J0cy5lcVN0cmljdDtcbi8qKlxuICogVXNlIFtgRXFgXSguL251bWJlci50cy5odG1sI2VxKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuZXFOdW1iZXIgPSBleHBvcnRzLmVxU3RyaWN0O1xuLyoqXG4gKiBVc2UgW2BFcWBdKC4vRGF0ZS50cy5odG1sI2VxKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuZXFEYXRlID0ge1xuICAgIGVxdWFsczogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0LnZhbHVlT2YoKSA9PT0gc2Vjb25kLnZhbHVlT2YoKTsgfVxufTtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBUaGUgYEZyb21FaXRoZXJgIHR5cGUgY2xhc3MgcmVwcmVzZW50cyB0aG9zZSBkYXRhIHR5cGVzIHdoaWNoIHN1cHBvcnQgZXJyb3JzLlxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnRhcEVpdGhlciA9IGV4cG9ydHMuZmlsdGVyT3JFbHNlID0gZXhwb3J0cy5jaGFpbkZpcnN0RWl0aGVySyA9IGV4cG9ydHMuY2hhaW5FaXRoZXJLID0gZXhwb3J0cy5mcm9tRWl0aGVySyA9IGV4cG9ydHMuY2hhaW5PcHRpb25LID0gZXhwb3J0cy5mcm9tT3B0aW9uSyA9IGV4cG9ydHMuZnJvbVByZWRpY2F0ZSA9IGV4cG9ydHMuZnJvbU9wdGlvbiA9IHZvaWQgMDtcbnZhciBDaGFpbl8xID0gcmVxdWlyZShcIi4vQ2hhaW5cIik7XG52YXIgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2Z1bmN0aW9uXCIpO1xudmFyIF8gPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vaW50ZXJuYWxcIikpO1xuZnVuY3Rpb24gZnJvbU9wdGlvbihGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvbk5vbmUpIHsgcmV0dXJuIGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gRi5mcm9tRWl0aGVyKF8uaXNOb25lKG1hKSA/IF8ubGVmdChvbk5vbmUoKSkgOiBfLnJpZ2h0KG1hLnZhbHVlKSk7IH07IH07XG59XG5leHBvcnRzLmZyb21PcHRpb24gPSBmcm9tT3B0aW9uO1xuZnVuY3Rpb24gZnJvbVByZWRpY2F0ZShGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwcmVkaWNhdGUsIG9uRmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gRi5mcm9tRWl0aGVyKHByZWRpY2F0ZShhKSA/IF8ucmlnaHQoYSkgOiBfLmxlZnQob25GYWxzZShhKSkpO1xuICAgICAgICB9O1xuICAgIH07XG59XG5leHBvcnRzLmZyb21QcmVkaWNhdGUgPSBmcm9tUHJlZGljYXRlO1xuZnVuY3Rpb24gZnJvbU9wdGlvbksoRikge1xuICAgIHZhciBmcm9tT3B0aW9uRiA9IGZyb21PcHRpb24oRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvbk5vbmUpIHtcbiAgICAgICAgdmFyIGZyb20gPSBmcm9tT3B0aW9uRihvbk5vbmUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLmZsb3cpKGYsIGZyb20pOyB9O1xuICAgIH07XG59XG5leHBvcnRzLmZyb21PcHRpb25LID0gZnJvbU9wdGlvbks7XG5mdW5jdGlvbiBjaGFpbk9wdGlvbksoRiwgTSkge1xuICAgIHZhciBmcm9tT3B0aW9uS0YgPSBmcm9tT3B0aW9uSyhGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG9uTm9uZSkge1xuICAgICAgICB2YXIgZnJvbSA9IGZyb21PcHRpb25LRihvbk5vbmUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gTS5jaGFpbihtYSwgZnJvbShmKSk7IH07IH07XG4gICAgfTtcbn1cbmV4cG9ydHMuY2hhaW5PcHRpb25LID0gY2hhaW5PcHRpb25LO1xuZnVuY3Rpb24gZnJvbUVpdGhlcksoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEuZmxvdykoZiwgRi5mcm9tRWl0aGVyKTsgfTtcbn1cbmV4cG9ydHMuZnJvbUVpdGhlcksgPSBmcm9tRWl0aGVySztcbmZ1bmN0aW9uIGNoYWluRWl0aGVySyhGLCBNKSB7XG4gICAgdmFyIGZyb21FaXRoZXJLRiA9IGZyb21FaXRoZXJLKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBNLmNoYWluKG1hLCBmcm9tRWl0aGVyS0YoZikpOyB9OyB9O1xufVxuZXhwb3J0cy5jaGFpbkVpdGhlcksgPSBjaGFpbkVpdGhlcks7XG5mdW5jdGlvbiBjaGFpbkZpcnN0RWl0aGVySyhGLCBNKSB7XG4gICAgdmFyIHRhcEVpdGhlck0gPSB0YXBFaXRoZXIoRiwgTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIHRhcEVpdGhlck0obWEsIGYpOyB9OyB9O1xufVxuZXhwb3J0cy5jaGFpbkZpcnN0RWl0aGVySyA9IGNoYWluRmlyc3RFaXRoZXJLO1xuZnVuY3Rpb24gZmlsdGVyT3JFbHNlKEYsIE0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHByZWRpY2F0ZSwgb25GYWxzZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgICAgICByZXR1cm4gTS5jaGFpbihtYSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIEYuZnJvbUVpdGhlcihwcmVkaWNhdGUoYSkgPyBfLnJpZ2h0KGEpIDogXy5sZWZ0KG9uRmFsc2UoYSkpKTsgfSk7XG4gICAgICAgIH07XG4gICAgfTtcbn1cbmV4cG9ydHMuZmlsdGVyT3JFbHNlID0gZmlsdGVyT3JFbHNlO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gdGFwRWl0aGVyKEYsIE0pIHtcbiAgICB2YXIgZnJvbUVpdGhlciA9IGZyb21FaXRoZXJLKEYpO1xuICAgIHZhciB0YXBNID0gKDAsIENoYWluXzEudGFwKShNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlbGYsIGYpIHsgcmV0dXJuIHRhcE0oc2VsZiwgZnJvbUVpdGhlcihmKSk7IH07XG59XG5leHBvcnRzLnRhcEVpdGhlciA9IHRhcEVpdGhlcjtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5GaWVsZCA9IGV4cG9ydHMuTW9ub2lkUHJvZHVjdCA9IGV4cG9ydHMuTW9ub2lkU3VtID0gZXhwb3J0cy5TZW1pZ3JvdXBQcm9kdWN0ID0gZXhwb3J0cy5TZW1pZ3JvdXBTdW0gPSBleHBvcnRzLk1hZ21hU3ViID0gZXhwb3J0cy5TaG93ID0gZXhwb3J0cy5Cb3VuZGVkID0gZXhwb3J0cy5PcmQgPSBleHBvcnRzLkVxID0gZXhwb3J0cy5pc051bWJlciA9IHZvaWQgMDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgaXNOdW1iZXIgPSBmdW5jdGlvbiAodSkgeyByZXR1cm4gdHlwZW9mIHUgPT09ICdudW1iZXInOyB9O1xuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gaW5zdGFuY2VzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5FcSA9IHtcbiAgICBlcXVhbHM6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBmaXJzdCA9PT0gc2Vjb25kOyB9XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMuT3JkID0ge1xuICAgIGVxdWFsczogZXhwb3J0cy5FcS5lcXVhbHMsXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIChmaXJzdCA8IHNlY29uZCA/IC0xIDogZmlyc3QgPiBzZWNvbmQgPyAxIDogMCk7IH1cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5Cb3VuZGVkID0ge1xuICAgIGVxdWFsczogZXhwb3J0cy5FcS5lcXVhbHMsXG4gICAgY29tcGFyZTogZXhwb3J0cy5PcmQuY29tcGFyZSxcbiAgICB0b3A6IEluZmluaXR5LFxuICAgIGJvdHRvbTogLUluZmluaXR5XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMuU2hvdyA9IHtcbiAgICBzaG93OiBmdW5jdGlvbiAobikgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkobik7IH1cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0cy5NYWdtYVN1YiA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBmaXJzdCAtIHNlY29uZDsgfVxufTtcbi8qKlxuICogYG51bWJlcmAgc2VtaWdyb3VwIHVuZGVyIGFkZGl0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTZW1pZ3JvdXBTdW0uY29uY2F0KDIsIDMpLCA1KVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5TZW1pZ3JvdXBTdW0gPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmlyc3QgKyBzZWNvbmQ7IH1cbn07XG4vKipcbiAqIGBudW1iZXJgIHNlbWlncm91cCB1bmRlciBtdWx0aXBsaWNhdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgU2VtaWdyb3VwUHJvZHVjdCB9IGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFNlbWlncm91cFByb2R1Y3QuY29uY2F0KDIsIDMpLCA2KVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5TZW1pZ3JvdXBQcm9kdWN0ID0ge1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0ICogc2Vjb25kOyB9XG59O1xuLyoqXG4gKiBgbnVtYmVyYCBtb25vaWQgdW5kZXIgYWRkaXRpb24uXG4gKlxuICogVGhlIGBlbXB0eWAgdmFsdWUgaXMgYDBgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBNb25vaWRTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNb25vaWRTdW0uY29uY2F0KDIsIE1vbm9pZFN1bS5lbXB0eSksIDIpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLk1vbm9pZFN1bSA9IHtcbiAgICBjb25jYXQ6IGV4cG9ydHMuU2VtaWdyb3VwU3VtLmNvbmNhdCxcbiAgICBlbXB0eTogMFxufTtcbi8qKlxuICogYG51bWJlcmAgbW9ub2lkIHVuZGVyIG11bHRpcGxpY2F0aW9uLlxuICpcbiAqIFRoZSBgZW1wdHlgIHZhbHVlIGlzIGAxYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgTW9ub2lkUHJvZHVjdCB9IGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE1vbm9pZFByb2R1Y3QuY29uY2F0KDIsIE1vbm9pZFByb2R1Y3QuZW1wdHkpLCAyKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5Nb25vaWRQcm9kdWN0ID0ge1xuICAgIGNvbmNhdDogZXhwb3J0cy5TZW1pZ3JvdXBQcm9kdWN0LmNvbmNhdCxcbiAgICBlbXB0eTogMVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLkZpZWxkID0ge1xuICAgIGFkZDogZXhwb3J0cy5TZW1pZ3JvdXBTdW0uY29uY2F0LFxuICAgIHplcm86IDAsXG4gICAgbXVsOiBleHBvcnRzLlNlbWlncm91cFByb2R1Y3QuY29uY2F0LFxuICAgIG9uZTogMSxcbiAgICBzdWI6IGV4cG9ydHMuTWFnbWFTdWIuY29uY2F0LFxuICAgIGRlZ3JlZTogZnVuY3Rpb24gKF8pIHsgcmV0dXJuIDE7IH0sXG4gICAgZGl2OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmlyc3QgLyBzZWNvbmQ7IH0sXG4gICAgbW9kOiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmlyc3QgJSBzZWNvbmQ7IH1cbn07XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMub3JkRGF0ZSA9IGV4cG9ydHMub3JkTnVtYmVyID0gZXhwb3J0cy5vcmRTdHJpbmcgPSBleHBvcnRzLm9yZEJvb2xlYW4gPSBleHBvcnRzLm9yZCA9IGV4cG9ydHMuZ2V0RHVhbE9yZCA9IGV4cG9ydHMuZ2V0VHVwbGVPcmQgPSBleHBvcnRzLmJldHdlZW4gPSBleHBvcnRzLmNsYW1wID0gZXhwb3J0cy5tYXggPSBleHBvcnRzLm1pbiA9IGV4cG9ydHMuZ2VxID0gZXhwb3J0cy5sZXEgPSBleHBvcnRzLmd0ID0gZXhwb3J0cy5sdCA9IGV4cG9ydHMuZXF1YWxzID0gZXhwb3J0cy50cml2aWFsID0gZXhwb3J0cy5Db250cmF2YXJpYW50ID0gZXhwb3J0cy5nZXRNb25vaWQgPSBleHBvcnRzLmdldFNlbWlncm91cCA9IGV4cG9ydHMuVVJJID0gZXhwb3J0cy5jb250cmFtYXAgPSBleHBvcnRzLnJldmVyc2UgPSBleHBvcnRzLnR1cGxlID0gZXhwb3J0cy5mcm9tQ29tcGFyZSA9IGV4cG9ydHMuZXF1YWxzRGVmYXVsdCA9IHZvaWQgMDtcbnZhciBFcV8xID0gcmVxdWlyZShcIi4vRXFcIik7XG52YXIgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2Z1bmN0aW9uXCIpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVmYXVsdHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGRlZmF1bHRzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciBlcXVhbHNEZWZhdWx0ID0gZnVuY3Rpb24gKGNvbXBhcmUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZpcnN0ID09PSBzZWNvbmQgfHwgY29tcGFyZShmaXJzdCwgc2Vjb25kKSA9PT0gMDtcbiAgICB9O1xufTtcbmV4cG9ydHMuZXF1YWxzRGVmYXVsdCA9IGVxdWFsc0RlZmF1bHQ7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBmcm9tQ29tcGFyZSA9IGZ1bmN0aW9uIChjb21wYXJlKSB7IHJldHVybiAoe1xuICAgIGVxdWFsczogKDAsIGV4cG9ydHMuZXF1YWxzRGVmYXVsdCkoY29tcGFyZSksXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIChmaXJzdCA9PT0gc2Vjb25kID8gMCA6IGNvbXBhcmUoZmlyc3QsIHNlY29uZCkpOyB9XG59KTsgfTtcbmV4cG9ydHMuZnJvbUNvbXBhcmUgPSBmcm9tQ29tcGFyZTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbWJpbmF0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEdpdmVuIGEgdHVwbGUgb2YgYE9yZGBzIHJldHVybnMgYW4gYE9yZGAgZm9yIHRoZSB0dXBsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdHVwbGUgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE8gPSB0dXBsZShTLk9yZCwgTi5PcmQsIEIuT3JkKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShbJ2EnLCAxLCB0cnVlXSwgWydiJywgMiwgdHJ1ZV0pLCAtMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoWydhJywgMSwgdHJ1ZV0sIFsnYScsIDIsIHRydWVdKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKFsnYScsIDEsIHRydWVdLCBbJ2EnLCAxLCBmYWxzZV0pLCAxKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIHR1cGxlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcmRzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb3Jkc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuZnJvbUNvbXBhcmUpKGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBvcmRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgdmFyIHIgPSBvcmRzW2ldLmNvbXBhcmUoZmlyc3RbaV0sIHNlY29uZFtpXSk7XG4gICAgICAgICAgICBpZiAociAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmRzW2ldLmNvbXBhcmUoZmlyc3RbaV0sIHNlY29uZFtpXSk7XG4gICAgfSk7XG59O1xuZXhwb3J0cy50dXBsZSA9IHR1cGxlO1xuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciByZXZlcnNlID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICgwLCBleHBvcnRzLmZyb21Db21wYXJlKShmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gTy5jb21wYXJlKHNlY29uZCwgZmlyc3QpOyB9KTsgfTtcbmV4cG9ydHMucmV2ZXJzZSA9IHJldmVyc2U7XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIGNvbnRyYW1hcF8gPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5jb250cmFtYXApKGYpKTsgfTtcbi8qKlxuICogQSB0eXBpY2FsIHVzZSBjYXNlIGZvciBgY29udHJhbWFwYCB3b3VsZCBiZSBsaWtlLCBnaXZlbiBzb21lIGBVc2VyYCB0eXBlLCB0byBjb25zdHJ1Y3QgYW4gYE9yZDxVc2VyPmAuXG4gKlxuICogV2UgY2FuIGRvIHNvIHdpdGggYSBmdW5jdGlvbiBmcm9tIGBVc2VyIC0+IFhgIHdoZXJlIGBYYCBpcyBzb21lIHZhbHVlIHRoYXQgd2Uga25vdyBob3cgdG8gY29tcGFyZVxuICogZm9yIG9yZGVyaW5nIChtZWFuaW5nIHdlIGhhdmUgYW4gYE9yZDxYPmApXG4gKlxuICogRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBmb2xsb3dpbmcgYFVzZXJgIHR5cGUsIHRoZXJlIGFyZSBsb3RzIG9mIHBvc3NpYmxlIGNob2ljZXMgZm9yIGBYYCxcbiAqIGJ1dCBsZXQncyBzYXkgd2Ugd2FudCB0byBzb3J0IGEgbGlzdCBvZiB1c2VycyBieSBgbGFzdE5hbWVgLlxuICpcbiAqIElmIHdlIGhhdmUgYSB3YXkgb2YgY29tcGFyaW5nIGBsYXN0TmFtZWBzIGZvciBvcmRlcmluZyAoYG9yZExhc3ROYW1lOiBPcmQ8c3RyaW5nPmApIGFuZCB3ZSBrbm93IGhvdyB0byBnbyBmcm9tIGBVc2VyIC0+IHN0cmluZ2AsXG4gKiB1c2luZyBgY29udHJhbWFwYCB3ZSBjYW4gZG8gdGhpc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgeyBjb250cmFtYXAsIE9yZCB9IGZyb20gJ2ZwLXRzL09yZCdcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBpbnRlcmZhY2UgVXNlciB7XG4gKiAgIHJlYWRvbmx5IGZpcnN0TmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGxhc3ROYW1lOiBzdHJpbmdcbiAqIH1cbiAqXG4gKiBjb25zdCBvcmRMYXN0TmFtZTogT3JkPHN0cmluZz4gPSBTLk9yZFxuICpcbiAqIGNvbnN0IG9yZEJ5TGFzdE5hbWU6IE9yZDxVc2VyPiA9IHBpcGUoXG4gKiAgIG9yZExhc3ROYW1lLFxuICogICBjb250cmFtYXAoKHVzZXIpID0+IHVzZXIubGFzdE5hbWUpXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgUkEuc29ydChvcmRCeUxhc3ROYW1lKShbXG4gKiAgICAgeyBmaXJzdE5hbWU6ICdhJywgbGFzdE5hbWU6ICdkJyB9LFxuICogICAgIHsgZmlyc3ROYW1lOiAnYycsIGxhc3ROYW1lOiAnYicgfVxuICogICBdKSxcbiAqICAgW1xuICogICAgIHsgZmlyc3ROYW1lOiAnYycsIGxhc3ROYW1lOiAnYicgfSxcbiAqICAgICB7IGZpcnN0TmFtZTogJ2EnLCBsYXN0TmFtZTogJ2QnIH1cbiAqICAgXVxuICogKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgY29udHJhbWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5mcm9tQ29tcGFyZSkoZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZhLmNvbXBhcmUoZihmaXJzdCksIGYoc2Vjb25kKSk7IH0pO1xufTsgfTtcbmV4cG9ydHMuY29udHJhbWFwID0gY29udHJhbWFwO1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5VUkkgPSAnT3JkJztcbi8qKlxuICogQSB0eXBpY2FsIHVzZSBjYXNlIGZvciB0aGUgYFNlbWlncm91cGAgaW5zdGFuY2Ugb2YgYE9yZGAgaXMgbWVyZ2luZyB0d28gb3IgbW9yZSBvcmRlcmluZ3MuXG4gKlxuICogRm9yIGV4YW1wbGUgdGhlIGZvbGxvd2luZyBzbmlwcGV0IGJ1aWxkcyBhbiBgT3JkYCBmb3IgYSB0eXBlIGBVc2VyYCB3aGljaFxuICogc29ydHMgYnkgYGNyZWF0ZWRgIGRhdGUgZGVzY2VuZGluZywgYW5kICoqdGhlbioqIGBsYXN0TmFtZWBcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgRCBmcm9tICdmcC10cy9EYXRlJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICogaW1wb3J0IHsgY29udHJhbWFwLCBnZXRTZW1pZ3JvdXAsIE9yZCwgcmV2ZXJzZSB9IGZyb20gJ2ZwLXRzL09yZCdcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBpbnRlcmZhY2UgVXNlciB7XG4gKiAgIHJlYWRvbmx5IGlkOiBzdHJpbmdcbiAqICAgcmVhZG9ubHkgbGFzdE5hbWU6IHN0cmluZ1xuICogICByZWFkb25seSBjcmVhdGVkOiBEYXRlXG4gKiB9XG4gKlxuICogY29uc3Qgb3JkQnlMYXN0TmFtZTogT3JkPFVzZXI+ID0gcGlwZShcbiAqICAgUy5PcmQsXG4gKiAgIGNvbnRyYW1hcCgodXNlcikgPT4gdXNlci5sYXN0TmFtZSlcbiAqIClcbiAqXG4gKiBjb25zdCBvcmRCeUNyZWF0ZWQ6IE9yZDxVc2VyPiA9IHBpcGUoXG4gKiAgIEQuT3JkLFxuICogICBjb250cmFtYXAoKHVzZXIpID0+IHVzZXIuY3JlYXRlZClcbiAqIClcbiAqXG4gKiBjb25zdCBvcmRVc2VyQnlDcmVhdGVkRGVzY1RoZW5MYXN0TmFtZSA9IGdldFNlbWlncm91cDxVc2VyPigpLmNvbmNhdChcbiAqICAgcmV2ZXJzZShvcmRCeUNyZWF0ZWQpLFxuICogICBvcmRCeUxhc3ROYW1lXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgUkEuc29ydChvcmRVc2VyQnlDcmVhdGVkRGVzY1RoZW5MYXN0TmFtZSkoW1xuICogICAgIHsgaWQ6ICdjJywgbGFzdE5hbWU6ICdkJywgY3JlYXRlZDogbmV3IERhdGUoMTk3MywgMTAsIDMwKSB9LFxuICogICAgIHsgaWQ6ICdhJywgbGFzdE5hbWU6ICdiJywgY3JlYXRlZDogbmV3IERhdGUoMTk3MywgMTAsIDMwKSB9LFxuICogICAgIHsgaWQ6ICdlJywgbGFzdE5hbWU6ICdmJywgY3JlYXRlZDogbmV3IERhdGUoMTk4MCwgMTAsIDMwKSB9XG4gKiAgIF0pLFxuICogICBbXG4gKiAgICAgeyBpZDogJ2UnLCBsYXN0TmFtZTogJ2YnLCBjcmVhdGVkOiBuZXcgRGF0ZSgxOTgwLCAxMCwgMzApIH0sXG4gKiAgICAgeyBpZDogJ2EnLCBsYXN0TmFtZTogJ2InLCBjcmVhdGVkOiBuZXcgRGF0ZSgxOTczLCAxMCwgMzApIH0sXG4gKiAgICAgeyBpZDogJ2MnLCBsYXN0TmFtZTogJ2QnLCBjcmVhdGVkOiBuZXcgRGF0ZSgxOTczLCAxMCwgMzApIH1cbiAqICAgXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgZ2V0U2VtaWdyb3VwID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5mcm9tQ29tcGFyZSkoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHZhciBveCA9IGZpcnN0LmNvbXBhcmUoYSwgYik7XG4gICAgICAgICAgICByZXR1cm4gb3ggIT09IDAgPyBveCA6IHNlY29uZC5jb21wYXJlKGEsIGIpO1xuICAgICAgICB9KTtcbiAgICB9XG59KTsgfTtcbmV4cG9ydHMuZ2V0U2VtaWdyb3VwID0gZ2V0U2VtaWdyb3VwO1xuLyoqXG4gKiBSZXR1cm5zIGEgYE1vbm9pZGAgc3VjaCB0aGF0OlxuICpcbiAqIC0gaXRzIGBjb25jYXQob3JkMSwgb3JkMilgIG9wZXJhdGlvbiB3aWxsIG9yZGVyIGZpcnN0IGJ5IGBvcmQxYCwgYW5kIHRoZW4gYnkgYG9yZDJgXG4gKiAtIGl0cyBgZW1wdHlgIHZhbHVlIGlzIGFuIGBPcmRgIHRoYXQgYWx3YXlzIGNvbnNpZGVycyBjb21wYXJlZCBlbGVtZW50cyBlcXVhbFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb3J0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAsIHJldmVyc2UsIGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL09yZCdcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0ICogYXMgQiBmcm9tICdmcC10cy9ib29sZWFuJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICogaW1wb3J0IHsgY29uY2F0QWxsIH0gZnJvbSAnZnAtdHMvTW9ub2lkJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogaW50ZXJmYWNlIFVzZXIge1xuICogICByZWFkb25seSBpZDogbnVtYmVyXG4gKiAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZ1xuICogICByZWFkb25seSBhZ2U6IG51bWJlclxuICogICByZWFkb25seSByZW1lbWJlck1lOiBib29sZWFuXG4gKiB9XG4gKlxuICogY29uc3QgYnlOYW1lID0gcGlwZShcbiAqICAgUy5PcmQsXG4gKiAgIGNvbnRyYW1hcCgocDogVXNlcikgPT4gcC5uYW1lKVxuICogKVxuICpcbiAqIGNvbnN0IGJ5QWdlID0gcGlwZShcbiAqICAgTi5PcmQsXG4gKiAgIGNvbnRyYW1hcCgocDogVXNlcikgPT4gcC5hZ2UpXG4gKiApXG4gKlxuICogY29uc3QgYnlSZW1lbWJlck1lID0gcGlwZShcbiAqICAgQi5PcmQsXG4gKiAgIGNvbnRyYW1hcCgocDogVXNlcikgPT4gcC5yZW1lbWJlck1lKVxuICogKVxuICpcbiAqIGNvbnN0IE0gPSBnZXRNb25vaWQ8VXNlcj4oKVxuICpcbiAqIGNvbnN0IHVzZXJzOiBBcnJheTxVc2VyPiA9IFtcbiAqICAgeyBpZDogMSwgbmFtZTogJ0d1aWRvJywgYWdlOiA0NywgcmVtZW1iZXJNZTogZmFsc2UgfSxcbiAqICAgeyBpZDogMiwgbmFtZTogJ0d1aWRvJywgYWdlOiA0NiwgcmVtZW1iZXJNZTogdHJ1ZSB9LFxuICogICB7IGlkOiAzLCBuYW1lOiAnR2l1bGlvJywgYWdlOiA0NCwgcmVtZW1iZXJNZTogZmFsc2UgfSxcbiAqICAgeyBpZDogNCwgbmFtZTogJ0dpdWxpbycsIGFnZTogNDQsIHJlbWVtYmVyTWU6IHRydWUgfVxuICogXVxuICpcbiAqIC8vIHNvcnQgYnkgbmFtZSwgdGhlbiBieSBhZ2UsIHRoZW4gYnkgYHJlbWVtYmVyTWVgXG4gKiBjb25zdCBPMSA9IGNvbmNhdEFsbChNKShbYnlOYW1lLCBieUFnZSwgYnlSZW1lbWJlck1lXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydChPMSkodXNlcnMpLCBbXG4gKiAgIHsgaWQ6IDMsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiA0LCBuYW1lOiAnR2l1bGlvJywgYWdlOiA0NCwgcmVtZW1iZXJNZTogdHJ1ZSB9LFxuICogICB7IGlkOiAyLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ2LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDEsIG5hbWU6ICdHdWlkbycsIGFnZTogNDcsIHJlbWVtYmVyTWU6IGZhbHNlIH1cbiAqIF0pXG4gKlxuICogLy8gbm93IGByZW1lbWJlck1lID0gdHJ1ZWAgZmlyc3QsIHRoZW4gYnkgbmFtZSwgdGhlbiBieSBhZ2VcbiAqIGNvbnN0IE8yID0gY29uY2F0QWxsKE0pKFtyZXZlcnNlKGJ5UmVtZW1iZXJNZSksIGJ5TmFtZSwgYnlBZ2VdKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb3J0KE8yKSh1c2VycyksIFtcbiAqICAgeyBpZDogNCwgbmFtZTogJ0dpdWxpbycsIGFnZTogNDQsIHJlbWVtYmVyTWU6IHRydWUgfSxcbiAqICAgeyBpZDogMiwgbmFtZTogJ0d1aWRvJywgYWdlOiA0NiwgcmVtZW1iZXJNZTogdHJ1ZSB9LFxuICogICB7IGlkOiAzLCBuYW1lOiAnR2l1bGlvJywgYWdlOiA0NCwgcmVtZW1iZXJNZTogZmFsc2UgfSxcbiAqICAgeyBpZDogMSwgbmFtZTogJ0d1aWRvJywgYWdlOiA0NywgcmVtZW1iZXJNZTogZmFsc2UgfVxuICogXSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi40LjBcbiAqL1xudmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiAoMCwgZXhwb3J0cy5nZXRTZW1pZ3JvdXApKCkuY29uY2F0LFxuICAgIGVtcHR5OiAoMCwgZXhwb3J0cy5mcm9tQ29tcGFyZSkoZnVuY3Rpb24gKCkgeyByZXR1cm4gMDsgfSlcbn0pOyB9O1xuZXhwb3J0cy5nZXRNb25vaWQgPSBnZXRNb25vaWQ7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkNvbnRyYXZhcmlhbnQgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBjb250cmFtYXA6IGNvbnRyYW1hcF9cbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydHMudHJpdmlhbCA9IHtcbiAgICBlcXVhbHM6IGZ1bmN0aW9uXzEuY29uc3RUcnVlLFxuICAgIGNvbXBhcmU6IC8qI19fUFVSRV9fKi8gKDAsIGZ1bmN0aW9uXzEuY29uc3RhbnQpKDApXG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBlcXVhbHMgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdCA9PT0gc2Vjb25kIHx8IE8uY29tcGFyZShmaXJzdCwgc2Vjb25kKSA9PT0gMDtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbmV4cG9ydHMuZXF1YWxzID0gZXF1YWxzO1xuLy8gVE9ETzogY3VycnkgaW4gdjNcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9uZSB2YWx1ZSBpcyBfc3RyaWN0bHkgbGVzcyB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBsdCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IC0xO1xuICAgIH07XG59O1xuZXhwb3J0cy5sdCA9IGx0O1xuLy8gVE9ETzogY3VycnkgaW4gdjNcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9uZSB2YWx1ZSBpcyBfc3RyaWN0bHkgZ3JlYXRlciB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBndCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IDE7XG4gICAgfTtcbn07XG5leHBvcnRzLmd0ID0gZ3Q7XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb25lIHZhbHVlIGlzIF9ub24tc3RyaWN0bHkgbGVzcyB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBsZXEgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gTy5jb21wYXJlKGZpcnN0LCBzZWNvbmQpICE9PSAxO1xuICAgIH07XG59O1xuZXhwb3J0cy5sZXEgPSBsZXE7XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb25lIHZhbHVlIGlzIF9ub24tc3RyaWN0bHkgZ3JlYXRlciB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBnZXEgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gTy5jb21wYXJlKGZpcnN0LCBzZWNvbmQpICE9PSAtMTtcbiAgICB9O1xufTtcbmV4cG9ydHMuZ2VxID0gZ2VxO1xuLy8gVE9ETzogY3VycnkgaW4gdjNcbi8qKlxuICogVGFrZSB0aGUgbWluaW11bSBvZiB0d28gdmFsdWVzLiBJZiB0aGV5IGFyZSBjb25zaWRlcmVkIGVxdWFsLCB0aGUgZmlyc3QgYXJndW1lbnQgaXMgY2hvc2VuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBtaW4gPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPCAxID8gZmlyc3QgOiBzZWNvbmQ7XG4gICAgfTtcbn07XG5leHBvcnRzLm1pbiA9IG1pbjtcbi8vIFRPRE86IGN1cnJ5IGluIHYzXG4vKipcbiAqIFRha2UgdGhlIG1heGltdW0gb2YgdHdvIHZhbHVlcy4gSWYgdGhleSBhcmUgY29uc2lkZXJlZCBlcXVhbCwgdGhlIGZpcnN0IGFyZ3VtZW50IGlzIGNob3NlblxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgbWF4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZpcnN0ID09PSBzZWNvbmQgfHwgTy5jb21wYXJlKGZpcnN0LCBzZWNvbmQpID4gLTEgPyBmaXJzdCA6IHNlY29uZDtcbiAgICB9O1xufTtcbmV4cG9ydHMubWF4ID0gbWF4O1xuLyoqXG4gKiBDbGFtcCBhIHZhbHVlIGJldHdlZW4gYSBtaW5pbXVtIGFuZCBhIG1heGltdW1cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIGNsYW1wID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgbWluTyA9ICgwLCBleHBvcnRzLm1pbikoTyk7XG4gICAgdmFyIG1heE8gPSAoMCwgZXhwb3J0cy5tYXgpKE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAobG93LCBoaSkgeyByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1heE8obWluTyhhLCBoaSksIGxvdyk7IH07IH07XG59O1xuZXhwb3J0cy5jbGFtcCA9IGNsYW1wO1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYSB2YWx1ZSBpcyBiZXR3ZWVuIGEgbWluaW11bSBhbmQgYSBtYXhpbXVtIChpbmNsdXNpdmUpXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBiZXR3ZWVuID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgbHRPID0gKDAsIGV4cG9ydHMubHQpKE8pO1xuICAgIHZhciBndE8gPSAoMCwgZXhwb3J0cy5ndCkoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChsb3csIGhpKSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbHRPKGEsIGxvdykgfHwgZ3RPKGEsIGhpKSA/IGZhbHNlIDogdHJ1ZTsgfTsgfTtcbn07XG5leHBvcnRzLmJldHdlZW4gPSBiZXR3ZWVuO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgW2B0dXBsZWBdKCN0dXBsZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLmdldFR1cGxlT3JkID0gZXhwb3J0cy50dXBsZTtcbi8qKlxuICogVXNlIFtgcmV2ZXJzZWBdKCNyZXZlcnNlKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuZ2V0RHVhbE9yZCA9IGV4cG9ydHMucmV2ZXJzZTtcbi8qKlxuICogVXNlIFtgQ29udHJhdmFyaWFudGBdKCNjb250cmF2YXJpYW50KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMub3JkID0gZXhwb3J0cy5Db250cmF2YXJpYW50O1xuLy8gZGVmYXVsdCBjb21wYXJlIGZvciBwcmltaXRpdmUgdHlwZXNcbmZ1bmN0aW9uIGNvbXBhcmUoZmlyc3QsIHNlY29uZCkge1xuICAgIHJldHVybiBmaXJzdCA8IHNlY29uZCA/IC0xIDogZmlyc3QgPiBzZWNvbmQgPyAxIDogMDtcbn1cbnZhciBzdHJpY3RPcmQgPSB7XG4gICAgZXF1YWxzOiBFcV8xLmVxU3RyaWN0LmVxdWFscyxcbiAgICBjb21wYXJlOiBjb21wYXJlXG59O1xuLyoqXG4gKiBVc2UgW2BPcmRgXSguL2Jvb2xlYW4udHMuaHRtbCNvcmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5vcmRCb29sZWFuID0gc3RyaWN0T3JkO1xuLyoqXG4gKiBVc2UgW2BPcmRgXSguL3N0cmluZy50cy5odG1sI29yZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLm9yZFN0cmluZyA9IHN0cmljdE9yZDtcbi8qKlxuICogVXNlIFtgT3JkYF0oLi9udW1iZXIudHMuaHRtbCNvcmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5vcmROdW1iZXIgPSBzdHJpY3RPcmQ7XG4vKipcbiAqIFVzZSBbYE9yZGBdKC4vRGF0ZS50cy5odG1sI29yZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLm9yZERhdGUgPSAoMCwgZnVuY3Rpb25fMS5waXBlKShleHBvcnRzLm9yZE51bWJlciwgXG4vKiNfX1BVUkVfXyovXG4oMCwgZXhwb3J0cy5jb250cmFtYXApKGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLnZhbHVlT2YoKTsgfSkpO1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEEgYE1hZ21hYCBpcyBhIHBhaXIgYChBLCBjb25jYXQpYCBpbiB3aGljaCBgQWAgaXMgYSBub24tZW1wdHkgc2V0IGFuZCBgY29uY2F0YCBpcyBhIGJpbmFyeSBvcGVyYXRpb24gb24gYEFgXG4gKlxuICogU2VlIFtTZW1pZ3JvdXBdKGh0dHBzOi8vZ2NhbnRpLmdpdGh1Yi5pby9mcC10cy9tb2R1bGVzL1NlbWlncm91cC50cy5odG1sKSBmb3Igc29tZSBpbnN0YW5jZXMuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY29uY2F0QWxsID0gZXhwb3J0cy5lbmRvID0gZXhwb3J0cy5maWx0ZXJTZWNvbmQgPSBleHBvcnRzLmZpbHRlckZpcnN0ID0gZXhwb3J0cy5yZXZlcnNlID0gdm9pZCAwO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29tYmluYXRvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVGhlIGR1YWwgb2YgYSBgTWFnbWFgLCBvYnRhaW5lZCBieSBzd2FwcGluZyB0aGUgYXJndW1lbnRzIG9mIGBjb25jYXRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXZlcnNlLCBjb25jYXRBbGwgfSBmcm9tICdmcC10cy9NYWdtYSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IHN1YkFsbCA9IGNvbmNhdEFsbChyZXZlcnNlKE4uTWFnbWFTdWIpKSgwKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc3ViQWxsKFsxLCAyLCAzXSksIDIpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgcmV2ZXJzZSA9IGZ1bmN0aW9uIChNKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIE0uY29uY2F0KHNlY29uZCwgZmlyc3QpOyB9XG59KTsgfTtcbmV4cG9ydHMucmV2ZXJzZSA9IHJldmVyc2U7XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIGZpbHRlckZpcnN0ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoTSkgeyByZXR1cm4gKHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gKHByZWRpY2F0ZShmaXJzdCkgPyBNLmNvbmNhdChmaXJzdCwgc2Vjb25kKSA6IHNlY29uZCk7IH1cbiAgICB9KTsgfTtcbn07XG5leHBvcnRzLmZpbHRlckZpcnN0ID0gZmlsdGVyRmlyc3Q7XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIGZpbHRlclNlY29uZCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKE0pIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIChwcmVkaWNhdGUoc2Vjb25kKSA/IE0uY29uY2F0KGZpcnN0LCBzZWNvbmQpIDogZmlyc3QpOyB9XG4gICAgfSk7IH07XG59O1xuZXhwb3J0cy5maWx0ZXJTZWNvbmQgPSBmaWx0ZXJTZWNvbmQ7XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIGVuZG8gPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoTSkgeyByZXR1cm4gKHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gTS5jb25jYXQoZihmaXJzdCksIGYoc2Vjb25kKSk7IH1cbiAgICB9KTsgfTtcbn07XG5leHBvcnRzLmVuZG8gPSBlbmRvO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2l2ZW4gYSBzZXF1ZW5jZSBvZiBgYXNgLCBjb25jYXQgdGhlbSBhbmQgcmV0dXJuIHRoZSB0b3RhbC5cbiAqXG4gKiBJZiBgYXNgIGlzIGVtcHR5LCByZXR1cm4gdGhlIHByb3ZpZGVkIGBzdGFydFdpdGhgIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tICdmcC10cy9NYWdtYSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IHN1YkFsbCA9IGNvbmNhdEFsbChOLk1hZ21hU3ViKSgwKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc3ViQWxsKFsxLCAyLCAzXSksIC02KVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIGNvbmNhdEFsbCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGFydFdpdGgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYSwgYWNjKSB7IHJldHVybiBNLmNvbmNhdChhLCBhY2MpOyB9LCBzdGFydFdpdGgpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuZXhwb3J0cy5jb25jYXRBbGwgPSBjb25jYXRBbGw7XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5zZW1pZ3JvdXBQcm9kdWN0ID0gZXhwb3J0cy5zZW1pZ3JvdXBTdW0gPSBleHBvcnRzLnNlbWlncm91cFN0cmluZyA9IGV4cG9ydHMuZ2V0RnVuY3Rpb25TZW1pZ3JvdXAgPSBleHBvcnRzLnNlbWlncm91cEFueSA9IGV4cG9ydHMuc2VtaWdyb3VwQWxsID0gZXhwb3J0cy5mb2xkID0gZXhwb3J0cy5nZXRJbnRlcmNhbGF0ZVNlbWlncm91cCA9IGV4cG9ydHMuZ2V0TWVldFNlbWlncm91cCA9IGV4cG9ydHMuZ2V0Sm9pblNlbWlncm91cCA9IGV4cG9ydHMuZ2V0RHVhbFNlbWlncm91cCA9IGV4cG9ydHMuZ2V0U3RydWN0U2VtaWdyb3VwID0gZXhwb3J0cy5nZXRUdXBsZVNlbWlncm91cCA9IGV4cG9ydHMuZ2V0Rmlyc3RTZW1pZ3JvdXAgPSBleHBvcnRzLmdldExhc3RTZW1pZ3JvdXAgPSBleHBvcnRzLmdldE9iamVjdFNlbWlncm91cCA9IGV4cG9ydHMuc2VtaWdyb3VwVm9pZCA9IGV4cG9ydHMuY29uY2F0QWxsID0gZXhwb3J0cy5sYXN0ID0gZXhwb3J0cy5maXJzdCA9IGV4cG9ydHMuaW50ZXJjYWxhdGUgPSBleHBvcnRzLnR1cGxlID0gZXhwb3J0cy5zdHJ1Y3QgPSBleHBvcnRzLnJldmVyc2UgPSBleHBvcnRzLmNvbnN0YW50ID0gZXhwb3J0cy5tYXggPSBleHBvcnRzLm1pbiA9IHZvaWQgMDtcbi8qKlxuICogSWYgYSB0eXBlIGBBYCBjYW4gZm9ybSBhIGBTZW1pZ3JvdXBgIGl0IGhhcyBhbiAqKmFzc29jaWF0aXZlKiogYmluYXJ5IG9wZXJhdGlvbi5cbiAqXG4gKiBgYGB0c1xuICogaW50ZXJmYWNlIFNlbWlncm91cDxBPiB7XG4gKiAgIHJlYWRvbmx5IGNvbmNhdDogKHg6IEEsIHk6IEEpID0+IEFcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEFzc29jaWF0aXZpdHkgbWVhbnMgdGhlIGZvbGxvd2luZyBlcXVhbGl0eSBtdXN0IGhvbGQgZm9yIGFueSBjaG9pY2Ugb2YgYHhgLCBgeWAsIGFuZCBgemAuXG4gKlxuICogYGBgdHNcbiAqIGNvbmNhdCh4LCBjb25jYXQoeSwgeikpID0gY29uY2F0KGNvbmNhdCh4LCB5KSwgeilcbiAqIGBgYFxuICpcbiAqIEEgY29tbW9uIGV4YW1wbGUgb2YgYSBzZW1pZ3JvdXAgaXMgdGhlIHR5cGUgYHN0cmluZ2Agd2l0aCB0aGUgb3BlcmF0aW9uIGArYC5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgU2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICpcbiAqIGNvbnN0IHNlbWlncm91cFN0cmluZzogU2VtaWdyb3VwPHN0cmluZz4gPSB7XG4gKiAgIGNvbmNhdDogKHgsIHkpID0+IHggKyB5XG4gKiB9XG4gKlxuICogY29uc3QgeCA9ICd4J1xuICogY29uc3QgeSA9ICd5J1xuICogY29uc3QgeiA9ICd6J1xuICpcbiAqIHNlbWlncm91cFN0cmluZy5jb25jYXQoeCwgeSkgLy8gJ3h5J1xuICpcbiAqIHNlbWlncm91cFN0cmluZy5jb25jYXQoeCwgc2VtaWdyb3VwU3RyaW5nLmNvbmNhdCh5LCB6KSkgLy8gJ3h5eidcbiAqXG4gKiBzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHNlbWlncm91cFN0cmluZy5jb25jYXQoeCwgeSksIHopIC8vICd4eXonXG4gKiBgYGBcbiAqXG4gKiAqQWRhcHRlZCBmcm9tIGh0dHBzOi8vdHlwZWxldmVsLm9yZy9jYXRzKlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2Z1bmN0aW9uXCIpO1xudmFyIF8gPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vaW50ZXJuYWxcIikpO1xudmFyIE0gPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vTWFnbWFcIikpO1xudmFyIE9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL09yZFwiKSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2V0IGEgc2VtaWdyb3VwIHdoZXJlIGBjb25jYXRgIHdpbGwgcmV0dXJuIHRoZSBtaW5pbXVtLCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgb3JkZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKlxuICogY29uc3QgUzEgPSBTLm1pbihOLk9yZClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdCgxLCAyKSwgMSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciBtaW4gPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IE9yLm1pbihPKVxufSk7IH07XG5leHBvcnRzLm1pbiA9IG1pbjtcbi8qKlxuICogR2V0IGEgc2VtaWdyb3VwIHdoZXJlIGBjb25jYXRgIHdpbGwgcmV0dXJuIHRoZSBtYXhpbXVtLCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgb3JkZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKlxuICogY29uc3QgUzEgPSBTLm1heChOLk9yZClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdCgxLCAyKSwgMilcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciBtYXggPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IE9yLm1heChPKVxufSk7IH07XG5leHBvcnRzLm1heCA9IG1heDtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgY29uc3RhbnQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH1cbn0pOyB9O1xuZXhwb3J0cy5jb25zdGFudCA9IGNvbnN0YW50O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29tYmluYXRvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVGhlIGR1YWwgb2YgYSBgU2VtaWdyb3VwYCwgb2J0YWluZWQgYnkgc3dhcHBpbmcgdGhlIGFyZ3VtZW50cyBvZiBgY29uY2F0YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmV2ZXJzZSB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmV2ZXJzZShTLlNlbWlncm91cCkuY29uY2F0KCdhJywgJ2InKSwgJ2JhJylcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMucmV2ZXJzZSA9IE0ucmV2ZXJzZTtcbi8qKlxuICogR2l2ZW4gYSBzdHJ1Y3Qgb2Ygc2VtaWdyb3VwcyByZXR1cm5zIGEgc2VtaWdyb3VwIGZvciB0aGUgc3RydWN0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzdHJ1Y3QgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBpbnRlcmZhY2UgUG9pbnQge1xuICogICByZWFkb25seSB4OiBudW1iZXJcbiAqICAgcmVhZG9ubHkgeTogbnVtYmVyXG4gKiB9XG4gKlxuICogY29uc3QgUyA9IHN0cnVjdDxQb2ludD4oe1xuICogICB4OiBOLlNlbWlncm91cFN1bSxcbiAqICAgeTogTi5TZW1pZ3JvdXBTdW1cbiAqIH0pXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLmNvbmNhdCh7IHg6IDEsIHk6IDIgfSwgeyB4OiAzLCB5OiA0IH0pLCB7IHg6IDQsIHk6IDYgfSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciBzdHJ1Y3QgPSBmdW5jdGlvbiAoc2VtaWdyb3VwcykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHZhciByID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gc2VtaWdyb3Vwcykge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwoc2VtaWdyb3VwcywgaykpIHtcbiAgICAgICAgICAgICAgICByW2tdID0gc2VtaWdyb3Vwc1trXS5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxufSk7IH07XG5leHBvcnRzLnN0cnVjdCA9IHN0cnVjdDtcbi8qKlxuICogR2l2ZW4gYSB0dXBsZSBvZiBzZW1pZ3JvdXBzIHJldHVybnMgYSBzZW1pZ3JvdXAgZm9yIHRoZSB0dXBsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdHVwbGUgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIGNvbnN0IFMxID0gdHVwbGUoUy5TZW1pZ3JvdXAsIE4uU2VtaWdyb3VwU3VtKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMS5jb25jYXQoWydhJywgMV0sIFsnYicsIDJdKSwgWydhYicsIDNdKVxuICpcbiAqIGNvbnN0IFMyID0gdHVwbGUoUy5TZW1pZ3JvdXAsIE4uU2VtaWdyb3VwU3VtLCBCLlNlbWlncm91cEFsbClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzIuY29uY2F0KFsnYScsIDEsIHRydWVdLCBbJ2InLCAyLCBmYWxzZV0pLCBbJ2FiJywgMywgZmFsc2VdKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIHR1cGxlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZW1pZ3JvdXBzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgc2VtaWdyb3Vwc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gKHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gc2VtaWdyb3Vwcy5tYXAoZnVuY3Rpb24gKHMsIGkpIHsgcmV0dXJuIHMuY29uY2F0KGZpcnN0W2ldLCBzZWNvbmRbaV0pOyB9KTsgfVxuICAgIH0pO1xufTtcbmV4cG9ydHMudHVwbGUgPSB0dXBsZTtcbi8qKlxuICogQmV0d2VlbiBlYWNoIHBhaXIgb2YgZWxlbWVudHMgaW5zZXJ0IGBtaWRkbGVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcmNhbGF0ZSB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IFMxID0gcGlwZShTLlNlbWlncm91cCwgaW50ZXJjYWxhdGUoJyArICcpKVxuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChTMS5jb25jYXQoJ2EnLCAnYicpLCAnYSArIGInKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIGludGVyY2FsYXRlID0gZnVuY3Rpb24gKG1pZGRsZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gUy5jb25jYXQoeCwgUy5jb25jYXQobWlkZGxlLCB5KSk7IH1cbiAgICB9KTsgfTtcbn07XG5leHBvcnRzLmludGVyY2FsYXRlID0gaW50ZXJjYWxhdGU7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWx3YXlzIHJldHVybiB0aGUgZmlyc3QgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5maXJzdDxudW1iZXI+KCkuY29uY2F0KDEsIDIpLCAxKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIGZpcnN0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHsgY29uY2F0OiBmdW5jdGlvbl8xLmlkZW50aXR5IH0pOyB9O1xuZXhwb3J0cy5maXJzdCA9IGZpcnN0O1xuLyoqXG4gKiBBbHdheXMgcmV0dXJuIHRoZSBsYXN0IGFyZ3VtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMubGFzdDxudW1iZXI+KCkuY29uY2F0KDEsIDIpLCAyKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIGxhc3QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoeyBjb25jYXQ6IGZ1bmN0aW9uIChfLCB5KSB7IHJldHVybiB5OyB9IH0pOyB9O1xuZXhwb3J0cy5sYXN0ID0gbGFzdDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEdpdmVuIGEgc2VxdWVuY2Ugb2YgYGFzYCwgY29uY2F0IHRoZW0gYW5kIHJldHVybiB0aGUgdG90YWwuXG4gKlxuICogSWYgYGFzYCBpcyBlbXB0eSwgcmV0dXJuIHRoZSBwcm92aWRlZCBgc3RhcnRXaXRoYCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29uY2F0QWxsIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3Qgc3VtID0gY29uY2F0QWxsKE4uU2VtaWdyb3VwU3VtKSgwKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc3VtKFsxLCAyLCAzXSksIDYpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHN1bShbXSksIDApXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLmNvbmNhdEFsbCA9IE0uY29uY2F0QWxsO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgYHZvaWRgIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuc2VtaWdyb3VwVm9pZCA9ICgwLCBleHBvcnRzLmNvbnN0YW50KSh1bmRlZmluZWQpO1xuLyoqXG4gKiBVc2UgW2BnZXRBc3NpZ25TZW1pZ3JvdXBgXSguL3N0cnVjdC50cy5odG1sI2dldEFzc2lnblNlbWlncm91cCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG52YXIgZ2V0T2JqZWN0U2VtaWdyb3VwID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBmaXJzdCwgc2Vjb25kKTsgfVxufSk7IH07XG5leHBvcnRzLmdldE9iamVjdFNlbWlncm91cCA9IGdldE9iamVjdFNlbWlncm91cDtcbi8qKlxuICogVXNlIFtgbGFzdGBdKCNsYXN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuZ2V0TGFzdFNlbWlncm91cCA9IGV4cG9ydHMubGFzdDtcbi8qKlxuICogVXNlIFtgZmlyc3RgXSgjZmlyc3QpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5nZXRGaXJzdFNlbWlncm91cCA9IGV4cG9ydHMuZmlyc3Q7XG4vKipcbiAqIFVzZSBbYHR1cGxlYF0oI3R1cGxlKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuZ2V0VHVwbGVTZW1pZ3JvdXAgPSBleHBvcnRzLnR1cGxlO1xuLyoqXG4gKiBVc2UgW2BzdHJ1Y3RgXSgjc3RydWN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuZ2V0U3RydWN0U2VtaWdyb3VwID0gZXhwb3J0cy5zdHJ1Y3Q7XG4vKipcbiAqIFVzZSBbYHJldmVyc2VgXSgjcmV2ZXJzZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLmdldER1YWxTZW1pZ3JvdXAgPSBleHBvcnRzLnJldmVyc2U7XG4vKipcbiAqIFVzZSBbYG1heGBdKCNtYXgpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5nZXRKb2luU2VtaWdyb3VwID0gZXhwb3J0cy5tYXg7XG4vKipcbiAqIFVzZSBbYG1pbmBdKCNtaW4pIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5nZXRNZWV0U2VtaWdyb3VwID0gZXhwb3J0cy5taW47XG4vKipcbiAqIFVzZSBbYGludGVyY2FsYXRlYF0oI2ludGVyY2FsYXRlKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuZ2V0SW50ZXJjYWxhdGVTZW1pZ3JvdXAgPSBleHBvcnRzLmludGVyY2FsYXRlO1xuZnVuY3Rpb24gZm9sZChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSAoMCwgZXhwb3J0cy5jb25jYXRBbGwpKFMpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RhcnRXaXRoLCBhcykgeyByZXR1cm4gKGFzID09PSB1bmRlZmluZWQgPyBjb25jYXRBbGxTKHN0YXJ0V2l0aCkgOiBjb25jYXRBbGxTKHN0YXJ0V2l0aCkoYXMpKTsgfTtcbn1cbmV4cG9ydHMuZm9sZCA9IGZvbGQ7XG4vKipcbiAqIFVzZSBbYFNlbWlncm91cEFsbGBdKC4vYm9vbGVhbi50cy5odG1sI1NlbWlncm91cEFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLnNlbWlncm91cEFsbCA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ICYmIHk7IH1cbn07XG4vKipcbiAqIFVzZSBbYFNlbWlncm91cEFueWBdKC4vYm9vbGVhbi50cy5odG1sI1NlbWlncm91cEFueSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLnNlbWlncm91cEFueSA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4IHx8IHk7IH1cbn07XG4vKipcbiAqIFVzZSBbYGdldFNlbWlncm91cGBdKC4vZnVuY3Rpb24udHMuaHRtbCNnZXRTZW1pZ3JvdXApIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5nZXRGdW5jdGlvblNlbWlncm91cCA9IGZ1bmN0aW9uXzEuZ2V0U2VtaWdyb3VwO1xuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBgXSguL3N0cmluZy50cy5odG1sI1NlbWlncm91cCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLnNlbWlncm91cFN0cmluZyA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ICsgeTsgfVxufTtcbi8qKlxuICogVXNlIFtgU2VtaWdyb3VwU3VtYF0oLi9udW1iZXIudHMuaHRtbCNTZW1pZ3JvdXBTdW0pIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5zZW1pZ3JvdXBTdW0gPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCArIHk7IH1cbn07XG4vKipcbiAqIFVzZSBbYFNlbWlncm91cFByb2R1Y3RgXSguL251bWJlci50cy5odG1sI1NlbWlncm91cFByb2R1Y3QpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5zZW1pZ3JvdXBQcm9kdWN0ID0ge1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggKiB5OyB9XG59O1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVkdWNlUmlnaHQgPSBleHBvcnRzLmZvbGRNYXAgPSBleHBvcnRzLnJlZHVjZSA9IGV4cG9ydHMubWFwV2l0aEluZGV4ID0gZXhwb3J0cy5tYXAgPSBleHBvcnRzLmZsYXR0ZW4gPSBleHBvcnRzLmR1cGxpY2F0ZSA9IGV4cG9ydHMuZXh0ZW5kID0gZXhwb3J0cy5mbGF0TWFwID0gZXhwb3J0cy5hcCA9IGV4cG9ydHMuYWx0ID0gZXhwb3J0cy5hbHRXID0gZXhwb3J0cy5vZiA9IGV4cG9ydHMuY2h1bmtzT2YgPSBleHBvcnRzLnNwbGl0QXQgPSBleHBvcnRzLmNob3AgPSBleHBvcnRzLmNoYWluV2l0aEluZGV4ID0gZXhwb3J0cy5pbnRlcnNwZXJzZSA9IGV4cG9ydHMucHJlcGVuZEFsbCA9IGV4cG9ydHMudW56aXAgPSBleHBvcnRzLnppcCA9IGV4cG9ydHMuemlwV2l0aCA9IGV4cG9ydHMubW9kaWZ5QXQgPSBleHBvcnRzLnVwZGF0ZUF0ID0gZXhwb3J0cy5zb3J0ID0gZXhwb3J0cy5ncm91cEJ5ID0gZXhwb3J0cy5ncm91cCA9IGV4cG9ydHMucmV2ZXJzZSA9IGV4cG9ydHMuY29uY2F0ID0gZXhwb3J0cy5jb25jYXRXID0gZXhwb3J0cy5mcm9tQXJyYXkgPSBleHBvcnRzLnVuYXBwZW5kID0gZXhwb3J0cy51bnByZXBlbmQgPSBleHBvcnRzLnJhbmdlID0gZXhwb3J0cy5yZXBsaWNhdGUgPSBleHBvcnRzLm1ha2VCeSA9IGV4cG9ydHMuZnJvbVJlYWRvbmx5QXJyYXkgPSBleHBvcnRzLnJvdGF0ZSA9IGV4cG9ydHMudW5pb24gPSBleHBvcnRzLnNvcnRCeSA9IGV4cG9ydHMudW5pcSA9IGV4cG9ydHMudW5zYWZlVXBkYXRlQXQgPSBleHBvcnRzLnVuc2FmZUluc2VydEF0ID0gZXhwb3J0cy5hcHBlbmQgPSBleHBvcnRzLmFwcGVuZFcgPSBleHBvcnRzLnByZXBlbmQgPSBleHBvcnRzLnByZXBlbmRXID0gZXhwb3J0cy5pc091dE9mQm91bmQgPSBleHBvcnRzLmlzTm9uRW1wdHkgPSBleHBvcnRzLmVtcHR5ID0gdm9pZCAwO1xuZXhwb3J0cy5ncm91cFNvcnQgPSBleHBvcnRzLmNoYWluID0gZXhwb3J0cy5pbnRlcmNhbGF0ZSA9IGV4cG9ydHMudXBkYXRlTGFzdCA9IGV4cG9ydHMubW9kaWZ5TGFzdCA9IGV4cG9ydHMudXBkYXRlSGVhZCA9IGV4cG9ydHMubW9kaWZ5SGVhZCA9IGV4cG9ydHMubWF0Y2hSaWdodCA9IGV4cG9ydHMubWF0Y2hMZWZ0ID0gZXhwb3J0cy5jb25jYXRBbGwgPSBleHBvcnRzLm1heCA9IGV4cG9ydHMubWluID0gZXhwb3J0cy5pbml0ID0gZXhwb3J0cy5sYXN0ID0gZXhwb3J0cy50YWlsID0gZXhwb3J0cy5oZWFkID0gZXhwb3J0cy5hcFMgPSBleHBvcnRzLmJpbmQgPSBleHBvcnRzLmxldCA9IGV4cG9ydHMuYmluZFRvID0gZXhwb3J0cy5EbyA9IGV4cG9ydHMuQ29tb25hZCA9IGV4cG9ydHMuQWx0ID0gZXhwb3J0cy5UcmF2ZXJzYWJsZVdpdGhJbmRleCA9IGV4cG9ydHMuVHJhdmVyc2FibGUgPSBleHBvcnRzLkZvbGRhYmxlV2l0aEluZGV4ID0gZXhwb3J0cy5Gb2xkYWJsZSA9IGV4cG9ydHMuTW9uYWQgPSBleHBvcnRzLmNoYWluRmlyc3QgPSBleHBvcnRzLkNoYWluID0gZXhwb3J0cy5BcHBsaWNhdGl2ZSA9IGV4cG9ydHMuYXBTZWNvbmQgPSBleHBvcnRzLmFwRmlyc3QgPSBleHBvcnRzLkFwcGx5ID0gZXhwb3J0cy5GdW5jdG9yV2l0aEluZGV4ID0gZXhwb3J0cy5Qb2ludGVkID0gZXhwb3J0cy5mbGFwID0gZXhwb3J0cy5GdW5jdG9yID0gZXhwb3J0cy5nZXRVbmlvblNlbWlncm91cCA9IGV4cG9ydHMuZ2V0RXEgPSBleHBvcnRzLmdldFNlbWlncm91cCA9IGV4cG9ydHMuZ2V0U2hvdyA9IGV4cG9ydHMuVVJJID0gZXhwb3J0cy5leHRyYWN0ID0gZXhwb3J0cy50cmF2ZXJzZVdpdGhJbmRleCA9IGV4cG9ydHMuc2VxdWVuY2UgPSBleHBvcnRzLnRyYXZlcnNlID0gZXhwb3J0cy5yZWR1Y2VSaWdodFdpdGhJbmRleCA9IGV4cG9ydHMuZm9sZE1hcFdpdGhJbmRleCA9IGV4cG9ydHMucmVkdWNlV2l0aEluZGV4ID0gdm9pZCAwO1xuZXhwb3J0cy5yZWFkb25seU5vbkVtcHR5QXJyYXkgPSBleHBvcnRzLmZvbGQgPSBleHBvcnRzLnByZXBlbmRUb0FsbCA9IGV4cG9ydHMuaW5zZXJ0QXQgPSBleHBvcnRzLnNub2MgPSBleHBvcnRzLmNvbnMgPSBleHBvcnRzLnVuc25vYyA9IGV4cG9ydHMudW5jb25zID0gZXhwb3J0cy5maWx0ZXJXaXRoSW5kZXggPSBleHBvcnRzLmZpbHRlciA9IHZvaWQgMDtcbnZhciBBcHBseV8xID0gcmVxdWlyZShcIi4vQXBwbHlcIik7XG52YXIgQ2hhaW5fMSA9IHJlcXVpcmUoXCIuL0NoYWluXCIpO1xudmFyIEVxXzEgPSByZXF1aXJlKFwiLi9FcVwiKTtcbnZhciBmdW5jdGlvbl8xID0gcmVxdWlyZShcIi4vZnVuY3Rpb25cIik7XG52YXIgRnVuY3Rvcl8xID0gcmVxdWlyZShcIi4vRnVuY3RvclwiKTtcbnZhciBfID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL2ludGVybmFsXCIpKTtcbnZhciBPcmRfMSA9IHJlcXVpcmUoXCIuL09yZFwiKTtcbnZhciBTZSA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9TZW1pZ3JvdXBcIikpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gaW50ZXJuYWxcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydHMuZW1wdHkgPSBfLmVtcHR5UmVhZG9ubHlBcnJheTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydHMuaXNOb25FbXB0eSA9IF8uaXNOb25FbXB0eTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbnZhciBpc091dE9mQm91bmQgPSBmdW5jdGlvbiAoaSwgYXMpIHsgcmV0dXJuIGkgPCAwIHx8IGkgPj0gYXMubGVuZ3RoOyB9O1xuZXhwb3J0cy5pc091dE9mQm91bmQgPSBpc091dE9mQm91bmQ7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgcHJlcGVuZFcgPSBmdW5jdGlvbiAoaGVhZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFpbCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbaGVhZF0sIHRhaWwsIHRydWUpO1xuICAgIH07XG59O1xuZXhwb3J0cy5wcmVwZW5kVyA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0cy5wcmVwZW5kID0gZXhwb3J0cy5wcmVwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbnZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbmV4cG9ydHMuYXBwZW5kVyA9IGFwcGVuZFc7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnRzLmFwcGVuZCA9IGV4cG9ydHMuYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbnZhciB1bnNhZmVJbnNlcnRBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmICgoMCwgZXhwb3J0cy5pc05vbkVtcHR5KShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuZXhwb3J0cy51bnNhZmVJbnNlcnRBdCA9IHVuc2FmZUluc2VydEF0O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIHVuc2FmZVVwZGF0ZUF0ID0gZnVuY3Rpb24gKGksIGEsIGFzKSB7XG4gICAgaWYgKGFzW2ldID09PSBhKSB7XG4gICAgICAgIHJldHVybiBhcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciB4cyA9IF8uZnJvbVJlYWRvbmx5Tm9uRW1wdHlBcnJheShhcyk7XG4gICAgICAgIHhzW2ldID0gYTtcbiAgICAgICAgcmV0dXJuIHhzO1xuICAgIH1cbn07XG5leHBvcnRzLnVuc2FmZVVwZGF0ZUF0ID0gdW5zYWZlVXBkYXRlQXQ7XG4vKipcbiAqIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwga2VlcGluZyB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1bmlxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmlxKE4uRXEpKFsxLCAyLCAxXSksIFsxLCAyXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciB1bmlxID0gZnVuY3Rpb24gKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIGlmIChhcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBhcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gWygwLCBleHBvcnRzLmhlYWQpKGFzKV07XG4gICAgICAgIHZhciByZXN0ID0gKDAsIGV4cG9ydHMudGFpbCkoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG5leHBvcnRzLnVuaXEgPSB1bmlxO1xuLyoqXG4gKiBTb3J0IHRoZSBlbGVtZW50cyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGluIGluY3JlYXNpbmcgb3JkZXIsIHdoZXJlIGVsZW1lbnRzIGFyZSBjb21wYXJlZCB1c2luZyBmaXJzdCBgb3Jkc1swXWAsIHRoZW4gYG9yZHNbMV1gLFxuICogZXRjLi4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJORUEgZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgY29udHJhbWFwIH0gZnJvbSAnZnAtdHMvT3JkJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgUGVyc29uIHtcbiAqICAgbmFtZTogc3RyaW5nXG4gKiAgIGFnZTogbnVtYmVyXG4gKiB9XG4gKlxuICogY29uc3QgYnlOYW1lID0gcGlwZShTLk9yZCwgY29udHJhbWFwKChwOiBQZXJzb24pID0+IHAubmFtZSkpXG4gKlxuICogY29uc3QgYnlBZ2UgPSBwaXBlKE4uT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5hZ2UpKVxuICpcbiAqIGNvbnN0IHNvcnRCeU5hbWVCeUFnZSA9IFJORUEuc29ydEJ5KFtieU5hbWUsIGJ5QWdlXSlcbiAqXG4gKiBjb25zdCBwZXJzb25zOiBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxQZXJzb24+ID0gW1xuICogICB7IG5hbWU6ICdhJywgYWdlOiAxIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDMgfSxcbiAqICAgeyBuYW1lOiAnYycsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAyIH1cbiAqIF1cbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvcnRCeU5hbWVCeUFnZShwZXJzb25zKSwgW1xuICogICB7IG5hbWU6ICdhJywgYWdlOiAxIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH1cbiAqIF0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoKDAsIGV4cG9ydHMuaXNOb25FbXB0eSkob3JkcykpIHtcbiAgICAgICAgdmFyIE0gPSAoMCwgT3JkXzEuZ2V0TW9ub2lkKSgpO1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuc29ydCkob3Jkcy5yZWR1Y2UoTS5jb25jYXQsIE0uZW1wdHkpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uXzEuaWRlbnRpdHk7XG59O1xuZXhwb3J0cy5zb3J0QnkgPSBzb3J0Qnk7XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIHVuaW9uID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgdW5pcUUgPSAoMCwgZXhwb3J0cy51bmlxKShFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkgeyByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiB1bmlxRSgoMCwgZnVuY3Rpb25fMS5waXBlKShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG5leHBvcnRzLnVuaW9uID0gdW5pb247XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgcm90YXRlID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBsZW4gPSBhcy5sZW5ndGg7XG4gICAgICAgIHZhciBtID0gTWF0aC5yb3VuZChuKSAlIGxlbjtcbiAgICAgICAgaWYgKCgwLCBleHBvcnRzLmlzT3V0T2ZCb3VuZCkoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSAoMCwgZXhwb3J0cy5zcGxpdEF0KSgtbSkoYXMpLCBmID0gX2FbMF0sIHMgPSBfYVsxXTtcbiAgICAgICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShzLCBjb25jYXQoZikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLnJvdGF0ZSkobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5leHBvcnRzLnJvdGF0ZSA9IHJvdGF0ZTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBSZXR1cm4gYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBmcm9tIGEgYFJlYWRvbmx5QXJyYXlgIHJldHVybmluZyBgbm9uZWAgaWYgdGhlIGlucHV0IGlzIGVtcHR5LlxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBmcm9tUmVhZG9ubHlBcnJheSA9IGZ1bmN0aW9uIChhcykge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc05vbkVtcHR5KShhcykgPyBfLnNvbWUoYXMpIDogXy5ub25lO1xufTtcbmV4cG9ydHMuZnJvbVJlYWRvbmx5QXJyYXkgPSBmcm9tUmVhZG9ubHlBcnJheTtcbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgb2YgbGVuZ3RoIGBuYCB3aXRoIGVsZW1lbnQgYGlgIGluaXRpYWxpemVkIHdpdGggYGYoaSlgLlxuICpcbiAqICoqTm90ZSoqLiBgbmAgaXMgbm9ybWFsaXplZCB0byBhIG5hdHVyYWwgbnVtYmVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYWtlQnkgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgZG91YmxlID0gKG46IG51bWJlcik6IG51bWJlciA9PiBuICogMlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKDUsIG1ha2VCeShkb3VibGUpKSwgWzAsIDIsIDQsIDYsIDhdKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIG1ha2VCeSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIHZhciBqID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihuKSk7XG4gICAgICAgIHZhciBvdXQgPSBbZigwKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKGkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuZXhwb3J0cy5tYWtlQnkgPSBtYWtlQnk7XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciByZXBsaWNhdGUgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKDAsIGV4cG9ydHMubWFrZUJ5KShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbmV4cG9ydHMucmVwbGljYXRlID0gcmVwbGljYXRlO1xuLyoqXG4gKiBDcmVhdGUgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb250YWluaW5nIGEgcmFuZ2Ugb2YgaW50ZWdlcnMsIGluY2x1ZGluZyBib3RoIGVuZHBvaW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmFuZ2UgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyYW5nZSgxLCA1KSwgWzEsIDIsIDMsIDQsIDVdKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIHJhbmdlID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gc3RhcnQgPD0gZW5kID8gKDAsIGV4cG9ydHMubWFrZUJ5KShmdW5jdGlvbiAoaSkgeyByZXR1cm4gc3RhcnQgKyBpOyB9KShlbmQgLSBzdGFydCArIDEpIDogW3N0YXJ0XTtcbn07XG5leHBvcnRzLnJhbmdlID0gcmFuZ2U7XG4vKipcbiAqIFJldHVybiB0aGUgdHVwbGUgb2YgdGhlIGBoZWFkYCBhbmQgdGhlIGB0YWlsYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5wcmVwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5wcmVwZW5kKFsxLCAyLCAzLCA0XSksIFsxLCBbMiwgMywgNF1dKVxuICpcbiAqIEBzaW5jZSAyLjkuMFxuICovXG52YXIgdW5wcmVwZW5kID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBbKDAsIGV4cG9ydHMuaGVhZCkoYXMpLCAoMCwgZXhwb3J0cy50YWlsKShhcyldOyB9O1xuZXhwb3J0cy51bnByZXBlbmQgPSB1bnByZXBlbmQ7XG4vKipcbiAqIFJldHVybiB0aGUgdHVwbGUgb2YgdGhlIGBpbml0YCBhbmQgdGhlIGBsYXN0YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5hcHBlbmQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmFwcGVuZChbMSwgMiwgMywgNF0pLCBbWzEsIDIsIDNdLCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xudmFyIHVuYXBwZW5kID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBbKDAsIGV4cG9ydHMuaW5pdCkoYXMpLCAoMCwgZXhwb3J0cy5sYXN0KShhcyldOyB9O1xuZXhwb3J0cy51bmFwcGVuZCA9IHVuYXBwZW5kO1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgZnJvbUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoMCwgZXhwb3J0cy5mcm9tUmVhZG9ubHlBcnJheSkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnRzLmZyb21BcnJheSA9IGZyb21BcnJheTtcbmZ1bmN0aW9uIGNvbmNhdFcoc2Vjb25kKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gZmlyc3QuY29uY2F0KHNlY29uZCk7IH07XG59XG5leHBvcnRzLmNvbmNhdFcgPSBjb25jYXRXO1xuZnVuY3Rpb24gY29uY2F0KHgsIHkpIHtcbiAgICByZXR1cm4geSA/IHguY29uY2F0KHkpIDogZnVuY3Rpb24gKHkpIHsgcmV0dXJuIHkuY29uY2F0KHgpOyB9O1xufVxuZXhwb3J0cy5jb25jYXQgPSBjb25jYXQ7XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgcmV2ZXJzZSA9IGZ1bmN0aW9uIChhcykge1xuICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IF9fc3ByZWFkQXJyYXkoWygwLCBleHBvcnRzLmxhc3QpKGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydHMucmV2ZXJzZSA9IHJldmVyc2U7XG5mdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5lbXB0eTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgIHZhciBoZWFkID0gYXNbMF07XG4gICAgICAgIHZhciBuZWEgPSBbaGVhZF07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBhID0gYXNbaV07XG4gICAgICAgICAgICBpZiAoRS5lcXVhbHMoYSwgaGVhZCkpIHtcbiAgICAgICAgICAgICAgICBuZWEucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKG5lYSk7XG4gICAgICAgICAgICAgICAgaGVhZCA9IGE7XG4gICAgICAgICAgICAgICAgbmVhID0gW2hlYWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG91dC5wdXNoKG5lYSk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbmV4cG9ydHMuZ3JvdXAgPSBncm91cDtcbi8qKlxuICogU3BsaXRzIGFuIGFycmF5IGludG8gc3ViLW5vbi1lbXB0eS1hcnJheXMgc3RvcmVkIGluIGFuIG9iamVjdCwgYmFzZWQgb24gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGEgYHN0cmluZ2AtcmV0dXJuaW5nXG4gKiBmdW5jdGlvbiBvbiBlYWNoIGVsZW1lbnQsIGFuZCBncm91cGluZyB0aGUgcmVzdWx0cyBhY2NvcmRpbmcgdG8gdmFsdWVzIHJldHVybmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdyb3VwQnkgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChncm91cEJ5KChzOiBzdHJpbmcpID0+IFN0cmluZyhzLmxlbmd0aCkpKFsnYScsICdiJywgJ2FiJ10pLCB7XG4gKiAgICcxJzogWydhJywgJ2InXSxcbiAqICAgJzInOiBbJ2FiJ11cbiAqIH0pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBncm91cEJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBhc18xID0gYXM7IF9pIDwgYXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBhID0gYXNfMVtfaV07XG4gICAgICAgICAgICB2YXIgayA9IGYoYSk7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChvdXQsIGspKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXRba10gPSBbYV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbmV4cG9ydHMuZ3JvdXBCeSA9IGdyb3VwQnk7XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgc29ydCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBhcy5zbGljZSgpLnNvcnQoTy5jb21wYXJlKTtcbiAgICB9O1xufTtcbmV4cG9ydHMuc29ydCA9IHNvcnQ7XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgdXBkYXRlQXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5tb2RpZnlBdCkoaSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfSk7XG59O1xuZXhwb3J0cy51cGRhdGVBdCA9IHVwZGF0ZUF0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIG1vZGlmeUF0ID0gZnVuY3Rpb24gKGksIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc091dE9mQm91bmQpKGksIGFzKSA/IF8ubm9uZSA6IF8uc29tZSgoMCwgZXhwb3J0cy51bnNhZmVVcGRhdGVBdCkoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG5leHBvcnRzLm1vZGlmeUF0ID0gbW9kaWZ5QXQ7XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG52YXIgemlwV2l0aCA9IGZ1bmN0aW9uIChhcywgYnMsIGYpIHtcbiAgICB2YXIgY3MgPSBbZihhc1swXSwgYnNbMF0pXTtcbiAgICB2YXIgbGVuID0gTWF0aC5taW4oYXMubGVuZ3RoLCBicy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY3NbaV0gPSBmKGFzW2ldLCBic1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBjcztcbn07XG5leHBvcnRzLnppcFdpdGggPSB6aXBXaXRoO1xuZnVuY3Rpb24gemlwKGFzLCBicykge1xuICAgIGlmIChicyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYnMpIHsgcmV0dXJuIHppcChicywgYXMpOyB9O1xuICAgIH1cbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuemlwV2l0aCkoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbmV4cG9ydHMuemlwID0gemlwO1xuLyoqXG4gKiBAc2luY2UgMi41LjFcbiAqL1xudmFyIHVuemlwID0gZnVuY3Rpb24gKGFicykge1xuICAgIHZhciBmYSA9IFthYnNbMF1bMF1dO1xuICAgIHZhciBmYiA9IFthYnNbMF1bMV1dO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYWJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZhW2ldID0gYWJzW2ldWzBdO1xuICAgICAgICBmYltpXSA9IGFic1tpXVsxXTtcbiAgICB9XG4gICAgcmV0dXJuIFtmYSwgZmJdO1xufTtcbmV4cG9ydHMudW56aXAgPSB1bnppcDtcbi8qKlxuICogUHJlcGVuZCBhbiBlbGVtZW50IHRvIGV2ZXJ5IG1lbWJlciBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwcmVwZW5kQWxsIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocHJlcGVuZEFsbCg5KShbMSwgMiwgMywgNF0pLCBbOSwgMSwgOSwgMiwgOSwgMywgOSwgNF0pXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG5leHBvcnRzLnByZXBlbmRBbGwgPSBwcmVwZW5kQWxsO1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaW50ZXJzcGVyc2UgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcnNwZXJzZSg5KShbMSwgMiwgMywgNF0pLCBbMSwgOSwgMiwgOSwgMywgOSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbnZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gKDAsIGV4cG9ydHMudGFpbCkoYXMpO1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNOb25FbXB0eSkocmVzdCkgPyAoMCwgZnVuY3Rpb25fMS5waXBlKShyZXN0LCAoMCwgZXhwb3J0cy5wcmVwZW5kQWxsKShtaWRkbGUpLCAoMCwgZXhwb3J0cy5wcmVwZW5kKSgoMCwgZXhwb3J0cy5oZWFkKShhcykpKSA6IGFzO1xuICAgIH07XG59O1xuZXhwb3J0cy5pbnRlcnNwZXJzZSA9IGludGVyc3BlcnNlO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgY2hhaW5XaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IF8uZnJvbVJlYWRvbmx5Tm9uRW1wdHlBcnJheShmKDAsICgwLCBleHBvcnRzLmhlYWQpKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuZXhwb3J0cy5jaGFpbldpdGhJbmRleCA9IGNoYWluV2l0aEluZGV4O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgY2hvcCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgX2EgPSBmKGFzKSwgYiA9IF9hWzBdLCByZXN0ID0gX2FbMV07XG4gICAgICAgIHZhciBvdXQgPSBbYl07XG4gICAgICAgIHZhciBuZXh0ID0gcmVzdDtcbiAgICAgICAgd2hpbGUgKCgwLCBleHBvcnRzLmlzTm9uRW1wdHkpKG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuZXhwb3J0cy5jaG9wID0gY2hvcDtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byB0d28gcGllY2VzLCB0aGUgZmlyc3QgcGllY2UgaGFzIG1heCBgbmAgZWxlbWVudHMuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGV4cG9ydHMuZW1wdHldIDogWygwLCBmdW5jdGlvbl8xLnBpcGUpKGFzLnNsaWNlKDEsIG0pLCAoMCwgZXhwb3J0cy5wcmVwZW5kKSgoMCwgZXhwb3J0cy5oZWFkKShhcykpKSwgYXMuc2xpY2UobSldO1xuICAgIH07XG59O1xuZXhwb3J0cy5zcGxpdEF0ID0gc3BsaXRBdDtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciBjaHVua3NPZiA9IGZ1bmN0aW9uIChuKSB7IHJldHVybiAoMCwgZXhwb3J0cy5jaG9wKSgoMCwgZXhwb3J0cy5zcGxpdEF0KShuKSk7IH07XG5leHBvcnRzLmNodW5rc09mID0gY2h1bmtzT2Y7XG52YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLm1hcCkoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMubWFwV2l0aEluZGV4KShmKSk7IH07XG52YXIgX2FwID0gZnVuY3Rpb24gKGZhYiwgZmEpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhYiwgKDAsIGV4cG9ydHMuYXApKGZhKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9leHRlbmQgPSBmdW5jdGlvbiAod2EsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKHdhLCAoMCwgZXhwb3J0cy5leHRlbmQpKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLnJlZHVjZSkoYiwgZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBNID0gKDAsIGV4cG9ydHMuZm9sZE1hcCkoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsIGZvbGRNYXBNKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLnJlZHVjZVJpZ2h0KShiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9ICgwLCBleHBvcnRzLnRyYXZlcnNlKShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKSh0YSwgdHJhdmVyc2VGKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9hbHQgPSBmdW5jdGlvbiAoZmEsIHRoYXQpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5hbHQpKHRoYXQpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgYiwgZikge1xuICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMucmVkdWNlV2l0aEluZGV4KShiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gKDAsIGV4cG9ydHMuZm9sZE1hcFdpdGhJbmRleCkoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsIGZvbGRNYXBXaXRoSW5kZXhNKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9yZWR1Y2VSaWdodFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgYiwgZikge1xuICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMucmVkdWNlUmlnaHRXaXRoSW5kZXgpKGIsIGYpKTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4RiA9ICgwLCBleHBvcnRzLnRyYXZlcnNlV2l0aEluZGV4KShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLm9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xudmFyIGFsdFcgPSBmdW5jdGlvbiAodGhhdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5hbHRXID0gYWx0Vztcbi8qKlxuICogSWRlbnRpZmllcyBhbiBhc3NvY2lhdGl2ZSBvcGVyYXRpb24gb24gYSB0eXBlIGNvbnN0cnVjdG9yLiBJdCBpcyBzaW1pbGFyIHRvIGBTZW1pZ3JvdXBgLCBleGNlcHQgdGhhdCBpdCBhcHBsaWVzIHRvXG4gKiB0eXBlcyBvZiBraW5kIGAqIC0+ICpgLlxuICpcbiAqIEluIGNhc2Ugb2YgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29uY2F0ZW5hdGVzIHRoZSBpbnB1dHMgaW50byBhIHNpbmdsZSBhcnJheS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5hbHQoKCkgPT4gWzQsIDVdKVxuICogICApLFxuICogICBbMSwgMiwgMywgNCwgNV1cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjYuMlxuICovXG5leHBvcnRzLmFsdCA9IGV4cG9ydHMuYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBhcCA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKDAsIGV4cG9ydHMuZmxhdE1hcCkoZnVuY3Rpb24gKGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFzLCAoMCwgZXhwb3J0cy5tYXApKGYpKTsgfSk7IH07XG5leHBvcnRzLmFwID0gYXA7XG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmZsYXRNYXAoKG4pID0+IFtgYSR7bn1gLCBgYiR7bn1gXSlcbiAqICAgKSxcbiAqICAgWydhMScsICdiMScsICdhMicsICdiMicsICdhMycsICdiMyddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjE0LjBcbiAqL1xuZXhwb3J0cy5mbGF0TWFwID0gKDAsIGZ1bmN0aW9uXzEuZHVhbCkoMiwgZnVuY3Rpb24gKG1hLCBmKSB7XG4gICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKG1hLCAoMCwgZXhwb3J0cy5jaGFpbldpdGhJbmRleCkoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIGV4dGVuZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbmV4dCA9ICgwLCBleHBvcnRzLnRhaWwpKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlICgoMCwgZXhwb3J0cy5pc05vbkVtcHR5KShuZXh0KSkge1xuICAgICAgICAgICAgb3V0LnB1c2goZihuZXh0KSk7XG4gICAgICAgICAgICBuZXh0ID0gKDAsIGV4cG9ydHMudGFpbCkobmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbmV4cG9ydHMuZXh0ZW5kID0gZXh0ZW5kO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0cy5kdXBsaWNhdGUgPSBcbi8qI19fUFVSRV9fKi8gKDAsIGV4cG9ydHMuZXh0ZW5kKShmdW5jdGlvbl8xLmlkZW50aXR5KTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmZsYXR0ZW4gPSBcbi8qI19fUFVSRV9fKi8gKDAsIGV4cG9ydHMuZmxhdE1hcCkoZnVuY3Rpb25fMS5pZGVudGl0eSk7XG4vKipcbiAqIGBtYXBgIGNhbiBiZSB1c2VkIHRvIHR1cm4gZnVuY3Rpb25zIGAoYTogQSkgPT4gQmAgaW50byBmdW5jdGlvbnMgYChmYTogRjxBPikgPT4gRjxCPmAgd2hvc2UgYXJndW1lbnQgYW5kIHJldHVybiB0eXBlc1xuICogdXNlIHRoZSB0eXBlIGNvbnN0cnVjdG9yIGBGYCB0byByZXByZXNlbnQgc29tZSBjb21wdXRhdGlvbmFsIGNvbnRleHQuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMubWFwV2l0aEluZGV4KShmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59O1xuZXhwb3J0cy5tYXAgPSBtYXA7XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIG1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgb3V0ID0gW2YoMCwgKDAsIGV4cG9ydHMuaGVhZCkoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuZXhwb3J0cy5tYXBXaXRoSW5kZXggPSBtYXBXaXRoSW5kZXg7XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIHJlZHVjZSA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLnJlZHVjZVdpdGhJbmRleCkoYiwgZnVuY3Rpb24gKF8sIGIsIGEpIHsgcmV0dXJuIGYoYiwgYSk7IH0pO1xufTtcbmV4cG9ydHMucmVkdWNlID0gcmVkdWNlO1xuLyoqXG4gKiAqKk5vdGUqKi4gVGhlIGNvbnN0cmFpbnQgaXMgcmVsYXhlZDogYSBgU2VtaWdyb3VwYCBpbnN0ZWFkIG9mIGEgYE1vbm9pZGAuXG4gKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG5leHBvcnRzLmZvbGRNYXAgPSBmb2xkTWFwO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLnJlZHVjZVJpZ2h0V2l0aEluZGV4KShiLCBmdW5jdGlvbiAoXywgYiwgYSkgeyByZXR1cm4gZihiLCBhKTsgfSk7XG59O1xuZXhwb3J0cy5yZWR1Y2VSaWdodCA9IHJlZHVjZVJpZ2h0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG5leHBvcnRzLnJlZHVjZVdpdGhJbmRleCA9IHJlZHVjZVdpdGhJbmRleDtcbi8qKlxuICogKipOb3RlKiouIFRoZSBjb25zdHJhaW50IGlzIHJlbGF4ZWQ6IGEgYFNlbWlncm91cGAgaW5zdGVhZCBvZiBhIGBNb25vaWRgLlxuICpcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIGZvbGRNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgICAgICByZXR1cm4gYXMuc2xpY2UoMSkucmVkdWNlKGZ1bmN0aW9uIChzLCBhLCBpKSB7IHJldHVybiBTLmNvbmNhdChzLCBmKGkgKyAxLCBhKSk7IH0sIGYoMCwgYXNbMF0pKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbmV4cG9ydHMuZm9sZE1hcFdpdGhJbmRleCA9IGZvbGRNYXBXaXRoSW5kZXg7XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIHJlZHVjZVJpZ2h0V2l0aEluZGV4ID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5yZWR1Y2VSaWdodChmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBhLCBiKTsgfSwgYik7XG4gICAgfTtcbn07XG5leHBvcnRzLnJlZHVjZVJpZ2h0V2l0aEluZGV4ID0gcmVkdWNlUmlnaHRXaXRoSW5kZXg7XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xudmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gKDAsIGV4cG9ydHMudHJhdmVyc2VXaXRoSW5kZXgpKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gdHJhdmVyc2VXaXRoSW5kZXhGKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbn07XG5leHBvcnRzLnRyYXZlcnNlID0gdHJhdmVyc2U7XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xudmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuICgwLCBleHBvcnRzLnRyYXZlcnNlV2l0aEluZGV4KShGKShmdW5jdGlvbl8xLlNLKTsgfTtcbmV4cG9ydHMuc2VxdWVuY2UgPSBzZXF1ZW5jZTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG52YXIgdHJhdmVyc2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgICAgICB2YXIgb3V0ID0gRi5tYXAoZigwLCAoMCwgZXhwb3J0cy5oZWFkKShhcykpLCBleHBvcnRzLm9mKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBvdXQgPSBGLmFwKEYubWFwKG91dCwgZnVuY3Rpb24gKGJzKSB7IHJldHVybiBmdW5jdGlvbiAoYikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoYnMsICgwLCBleHBvcnRzLmFwcGVuZCkoYikpOyB9OyB9KSwgZihpLCBhc1tpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbmV4cG9ydHMudHJhdmVyc2VXaXRoSW5kZXggPSB0cmF2ZXJzZVdpdGhJbmRleDtcbi8qKlxuICogQGNhdGVnb3J5IENvbW9uYWRcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnRzLmV4dHJhY3QgPSBfLmhlYWQ7XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLlVSSSA9ICdSZWFkb25seU5vbkVtcHR5QXJyYXknO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuZXhwb3J0cy5nZXRTaG93ID0gZ2V0U2hvdztcbi8qKlxuICogQnVpbGRzIGEgYFNlbWlncm91cGAgaW5zdGFuY2UgZm9yIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbmV4cG9ydHMuZ2V0U2VtaWdyb3VwID0gZ2V0U2VtaWdyb3VwO1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0RXEgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBFID0gZ2V0RXEoTi5FcSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhbMSwgMl0sIFsxLCAyXSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgM10pLCBmYWxzZSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIGdldEVxID0gZnVuY3Rpb24gKEUpIHtcbiAgICByZXR1cm4gKDAsIEVxXzEuZnJvbUVxdWFscykoZnVuY3Rpb24gKHhzLCB5cykgeyByZXR1cm4geHMubGVuZ3RoID09PSB5cy5sZW5ndGggJiYgeHMuZXZlcnkoZnVuY3Rpb24gKHgsIGkpIHsgcmV0dXJuIEUuZXF1YWxzKHgsIHlzW2ldKTsgfSk7IH0pO1xufTtcbmV4cG9ydHMuZ2V0RXEgPSBnZXRFcTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgZ2V0VW5pb25TZW1pZ3JvdXAgPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlvbkUgPSAoMCwgZXhwb3J0cy51bmlvbikoRSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gdW5pb25FKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG5leHBvcnRzLmdldFVuaW9uU2VtaWdyb3VwID0gZ2V0VW5pb25TZW1pZ3JvdXA7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkZ1bmN0b3IgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMuZmxhcCA9ICgwLCBGdW5jdG9yXzEuZmxhcCkoZXhwb3J0cy5GdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLlBvaW50ZWQgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBvZjogZXhwb3J0cy5vZlxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuRnVuY3RvcldpdGhJbmRleCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5BcHBseSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwXG59O1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmFwRmlyc3QgPSAoMCwgQXBwbHlfMS5hcEZpcnN0KShleHBvcnRzLkFwcGx5KTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBzZWNvbmQuXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydHMuYXBTZWNvbmQgPSAoMCwgQXBwbHlfMS5hcFNlY29uZCkoZXhwb3J0cy5BcHBseSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkFwcGxpY2F0aXZlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IGV4cG9ydHMub2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5DaGFpbiA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBleHBvcnRzLmZsYXRNYXBcbn07XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIFJBLmNoYWluRmlyc3QoKCkgPT4gWydhJywgJ2InXSlcbiAqICAgKSxcbiAqICAgWzEsIDEsIDIsIDIsIDMsIDNdXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmNoYWluRmlyc3QgPSAoMCwgQ2hhaW5fMS5jaGFpbkZpcnN0KShleHBvcnRzLkNoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuTW9uYWQgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogZXhwb3J0cy5vZixcbiAgICBjaGFpbjogZXhwb3J0cy5mbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5Gb2xkYWJsZSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5Gb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5UcmF2ZXJzYWJsZSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBleHBvcnRzLnNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5UcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogZXhwb3J0cy5zZXF1ZW5jZSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleCxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogX3RyYXZlcnNlV2l0aEluZGV4XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5BbHQgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5Db21vbmFkID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGV4dGVuZDogX2V4dGVuZCxcbiAgICBleHRyYWN0OiBleHBvcnRzLmV4dHJhY3Rcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkbyBub3RhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnRzLkRvID0gKDAsIGV4cG9ydHMub2YpKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnRzLmJpbmRUbyA9ICgwLCBGdW5jdG9yXzEuYmluZFRvKShleHBvcnRzLkZ1bmN0b3IpO1xudmFyIGxldF8gPSAvKiNfX1BVUkVfXyovICgwLCBGdW5jdG9yXzEubGV0KShleHBvcnRzLkZ1bmN0b3IpO1xuZXhwb3J0cy5sZXQgPSBsZXRfO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnRzLmJpbmQgPSAoMCwgQ2hhaW5fMS5iaW5kKShleHBvcnRzLkNoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0cy5hcFMgPSAoMCwgQXBwbHlfMS5hcFMpKGV4cG9ydHMuQXBwbHkpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydHMuaGVhZCA9IGV4cG9ydHMuZXh0cmFjdDtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydHMudGFpbCA9IF8udGFpbDtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbmV4cG9ydHMubGFzdCA9IGxhc3Q7XG4vKipcbiAqIEdldCBhbGwgYnV0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYSBub24gZW1wdHkgYXJyYXksIGNyZWF0aW5nIGEgbmV3IGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbml0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMSwgMiwgM10pLCBbMSwgMl0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGluaXQoWzFdKSwgW10pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG5leHBvcnRzLmluaXQgPSBpbml0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG5leHBvcnRzLm1pbiA9IG1pbjtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBtYXggPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciBTID0gU2UubWF4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7IH07XG59O1xuZXhwb3J0cy5tYXggPSBtYXg7XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIGNvbmNhdEFsbCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTtcbiAgICB9O1xufTtcbmV4cG9ydHMuY29uY2F0QWxsID0gY29uY2F0QWxsO1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBmaXJzdCBlbGVtZW50IGFuZCByZW1haW5pbmcgZWxlbWVudHMuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZigoMCwgZXhwb3J0cy5oZWFkKShhcyksICgwLCBleHBvcnRzLnRhaWwpKGFzKSk7XG4gICAgfTtcbn07XG5leHBvcnRzLm1hdGNoTGVmdCA9IG1hdGNoTGVmdDtcbi8qKlxuICogQnJlYWsgYSBgUmVhZG9ubHlBcnJheWAgaW50byBpdHMgaW5pdGlhbCBlbGVtZW50cyBhbmQgdGhlIGxhc3QgZWxlbWVudC5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZigoMCwgZXhwb3J0cy5pbml0KShhcyksICgwLCBleHBvcnRzLmxhc3QpKGFzKSk7XG4gICAgfTtcbn07XG5leHBvcnRzLm1hdGNoUmlnaHQgPSBtYXRjaFJpZ2h0O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBtb2RpZnlIZWFkID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBfX3NwcmVhZEFycmF5KFtmKCgwLCBleHBvcnRzLmhlYWQpKGFzKSldLCAoMCwgZXhwb3J0cy50YWlsKShhcyksIHRydWUpO1xuICAgIH07XG59O1xuZXhwb3J0cy5tb2RpZnlIZWFkID0gbW9kaWZ5SGVhZDtcbi8qKlxuICogQ2hhbmdlIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciB1cGRhdGVIZWFkID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuICgwLCBleHBvcnRzLm1vZGlmeUhlYWQpKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuZXhwb3J0cy51cGRhdGVIZWFkID0gdXBkYXRlSGVhZDtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBtb2RpZnlMYXN0ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKSgoMCwgZXhwb3J0cy5pbml0KShhcyksICgwLCBleHBvcnRzLmFwcGVuZCkoZigoMCwgZXhwb3J0cy5sYXN0KShhcykpKSk7XG4gICAgfTtcbn07XG5leHBvcnRzLm1vZGlmeUxhc3QgPSBtb2RpZnlMYXN0O1xuLyoqXG4gKiBDaGFuZ2UgdGhlIGxhc3QgZWxlbWVudCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoMCwgZXhwb3J0cy5tb2RpZnlMYXN0KShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbmV4cG9ydHMudXBkYXRlTGFzdCA9IHVwZGF0ZUxhc3Q7XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLCB0aGVuIGZvbGRzIHRoZSByZXN1bHRzIHVzaW5nIHRoZSBwcm92aWRlZCBgU2VtaWdyb3VwYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBpbnRlcmNhbGF0ZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyY2FsYXRlKFMuU2VtaWdyb3VwKSgnLScpKFsnYScsICdiJywgJ2MnXSksICdhLWItYycpXG4gKlxuICogQHNpbmNlIDIuMTIuMFxuICovXG52YXIgaW50ZXJjYWxhdGUgPSBmdW5jdGlvbiAoUykge1xuICAgIHZhciBjb25jYXRBbGxTID0gKDAsIGV4cG9ydHMuY29uY2F0QWxsKShTKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1pZGRsZSkgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEuZmxvdykoKDAsIGV4cG9ydHMuaW50ZXJzcGVyc2UpKG1pZGRsZSksIGNvbmNhdEFsbFMpOyB9O1xufTtcbmV4cG9ydHMuaW50ZXJjYWxhdGUgPSBpbnRlcmNhbGF0ZTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxlZ2FjeVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBBbGlhcyBvZiBgZmxhdE1hcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydHMuY2hhaW4gPSBleHBvcnRzLmZsYXRNYXA7XG5mdW5jdGlvbiBncm91cFNvcnQoTykge1xuICAgIHZhciBzb3J0TyA9ICgwLCBleHBvcnRzLnNvcnQpKE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoKDAsIGV4cG9ydHMuaXNOb25FbXB0eSkoYXMpID8gZ3JvdXBPKHNvcnRPKGFzKSkgOiBleHBvcnRzLmVtcHR5KTsgfTtcbn1cbmV4cG9ydHMuZ3JvdXBTb3J0ID0gZ3JvdXBTb3J0O1xuZnVuY3Rpb24gZmlsdGVyKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5maWx0ZXJXaXRoSW5kZXgpKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBwcmVkaWNhdGUoYSk7IH0pO1xufVxuZXhwb3J0cy5maWx0ZXIgPSBmaWx0ZXI7XG4vKipcbiAqIFVzZSBbYGZpbHRlcldpdGhJbmRleGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2ZpbHRlcndpdGhpbmRleCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG52YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmZyb21SZWFkb25seUFycmF5KShhcy5maWx0ZXIoZnVuY3Rpb24gKGEsIGkpIHsgcmV0dXJuIHByZWRpY2F0ZShpLCBhKTsgfSkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5maWx0ZXJXaXRoSW5kZXggPSBmaWx0ZXJXaXRoSW5kZXg7XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMudW5jb25zID0gZXhwb3J0cy51bnByZXBlbmQ7XG4vKipcbiAqIFVzZSBbYHVuYXBwZW5kYF0oI3VuYXBwZW5kKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4xMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLnVuc25vYyA9IGV4cG9ydHMudW5hcHBlbmQ7XG5mdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gKDAsIGV4cG9ydHMucHJlcGVuZCkoaGVhZCkgOiAoMCwgZnVuY3Rpb25fMS5waXBlKSh0YWlsLCAoMCwgZXhwb3J0cy5wcmVwZW5kKShoZWFkKSk7XG59XG5leHBvcnRzLmNvbnMgPSBjb25zO1xuLyoqXG4gKiBVc2UgW2BhcHBlbmRgXSguL1JlYWRvbmx5QXJyYXkudHMuaHRtbCNhcHBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xudmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShpbml0LCBjb25jYXQoW2VuZF0pKTsgfTtcbmV4cG9ydHMuc25vYyA9IHNub2M7XG4vKipcbiAqIFVzZSBbYGluc2VydEF0YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjaW5zZXJ0YXQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xudmFyIGluc2VydEF0ID0gZnVuY3Rpb24gKGksIGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpIDwgMCB8fCBpID4gYXMubGVuZ3RoID8gXy5ub25lIDogXy5zb21lKCgwLCBleHBvcnRzLnVuc2FmZUluc2VydEF0KShpLCBhLCBhcykpO1xuICAgIH07XG59O1xuZXhwb3J0cy5pbnNlcnRBdCA9IGluc2VydEF0O1xuLyoqXG4gKiBVc2UgW2BwcmVwZW5kQWxsYF0oI3ByZXBlbmRhbGwpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjkuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5wcmVwZW5kVG9BbGwgPSBleHBvcnRzLnByZXBlbmRBbGw7XG4vKipcbiAqIFVzZSBbYGNvbmNhdEFsbGBdKCNjb25jYXRhbGwpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5mb2xkID0gZXhwb3J0cy5jb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMucmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgb2Y6IGV4cG9ydHMub2YsXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBleHBvcnRzLmZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4cG9ydHMuZXh0cmFjdCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBleHBvcnRzLnNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXgsXG4gICAgYWx0OiBfYWx0XG59O1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIGBgYHRzXG4gKiBpbnRlcmZhY2UgU2VwYXJhdGVkPEUsIEE+IHtcbiAqICAgIHJlYWRvbmx5IGxlZnQ6IEVcbiAqICAgIHJlYWRvbmx5IHJpZ2h0OiBBXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBSZXByZXNlbnRzIGEgcmVzdWx0IG9mIHNlcGFyYXRpbmcgYSB3aG9sZSBpbnRvIHR3byBwYXJ0cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmlnaHQgPSBleHBvcnRzLmxlZnQgPSBleHBvcnRzLmZsYXAgPSBleHBvcnRzLkZ1bmN0b3IgPSBleHBvcnRzLkJpZnVuY3RvciA9IGV4cG9ydHMuVVJJID0gZXhwb3J0cy5iaW1hcCA9IGV4cG9ydHMubWFwTGVmdCA9IGV4cG9ydHMubWFwID0gZXhwb3J0cy5zZXBhcmF0ZWQgPSB2b2lkIDA7XG52YXIgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2Z1bmN0aW9uXCIpO1xudmFyIEZ1bmN0b3JfMSA9IHJlcXVpcmUoXCIuL0Z1bmN0b3JcIik7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgc2VwYXJhdGVkID0gZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7IHJldHVybiAoeyBsZWZ0OiBsZWZ0LCByaWdodDogcmlnaHQgfSk7IH07XG5leHBvcnRzLnNlcGFyYXRlZCA9IHNlcGFyYXRlZDtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMubWFwKShmKSk7IH07XG52YXIgX21hcExlZnQgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5tYXBMZWZ0KShmKSk7IH07XG52YXIgX2JpbWFwID0gZnVuY3Rpb24gKGZhLCBnLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMuYmltYXApKGcsIGYpKTsgfTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5zZXBhcmF0ZWQpKCgwLCBleHBvcnRzLmxlZnQpKGZhKSwgZigoMCwgZXhwb3J0cy5yaWdodCkoZmEpKSk7XG4gICAgfTtcbn07XG5leHBvcnRzLm1hcCA9IG1hcDtcbi8qKlxuICogTWFwIGEgZnVuY3Rpb24gb3ZlciB0aGUgZmlyc3QgdHlwZSBhcmd1bWVudCBvZiBhIGJpZnVuY3Rvci5cbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIG1hcExlZnQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLnNlcGFyYXRlZCkoZigoMCwgZXhwb3J0cy5sZWZ0KShmYSkpLCAoMCwgZXhwb3J0cy5yaWdodCkoZmEpKTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWFwTGVmdCA9IG1hcExlZnQ7XG4vKipcbiAqIE1hcCBhIHBhaXIgb2YgZnVuY3Rpb25zIG92ZXIgdGhlIHR3byB0eXBlIGFyZ3VtZW50cyBvZiB0aGUgYmlmdW5jdG9yLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciBiaW1hcCA9IGZ1bmN0aW9uIChmLCBnKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuc2VwYXJhdGVkKShmKCgwLCBleHBvcnRzLmxlZnQpKGZhKSksIGcoKDAsIGV4cG9ydHMucmlnaHQpKGZhKSkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5iaW1hcCA9IGJpbWFwO1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMuVVJJID0gJ1NlcGFyYXRlZCc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5CaWZ1bmN0b3IgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXBMZWZ0OiBfbWFwTGVmdCxcbiAgICBiaW1hcDogX2JpbWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMuRnVuY3RvciA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5mbGFwID0gKDAsIEZ1bmN0b3JfMS5mbGFwKShleHBvcnRzLkZ1bmN0b3IpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgbGVmdCA9IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLmxlZnQ7IH07XG5leHBvcnRzLmxlZnQgPSBsZWZ0O1xuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciByaWdodCA9IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnJpZ2h0OyB9O1xuZXhwb3J0cy5yaWdodCA9IHJpZ2h0O1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZmlsdGVyRSA9IGV4cG9ydHMud2l0aGVyRGVmYXVsdCA9IGV4cG9ydHMud2lsdERlZmF1bHQgPSB2b2lkIDA7XG52YXIgXyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9pbnRlcm5hbFwiKSk7XG5mdW5jdGlvbiB3aWx0RGVmYXVsdChULCBDKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB0cmF2ZXJzZUYgPSBULnRyYXZlcnNlKEYpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHdhLCBmKSB7IHJldHVybiBGLm1hcCh0cmF2ZXJzZUYod2EsIGYpLCBDLnNlcGFyYXRlKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0cy53aWx0RGVmYXVsdCA9IHdpbHREZWZhdWx0O1xuZnVuY3Rpb24gd2l0aGVyRGVmYXVsdChULCBDKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB0cmF2ZXJzZUYgPSBULnRyYXZlcnNlKEYpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHdhLCBmKSB7IHJldHVybiBGLm1hcCh0cmF2ZXJzZUYod2EsIGYpLCBDLmNvbXBhY3QpOyB9O1xuICAgIH07XG59XG5leHBvcnRzLndpdGhlckRlZmF1bHQgPSB3aXRoZXJEZWZhdWx0O1xuZnVuY3Rpb24gZmlsdGVyRShXKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB3aXRoZXJGID0gVy53aXRoZXIoRik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocHJlZGljYXRlKSB7IHJldHVybiBmdW5jdGlvbiAoZ2EpIHsgcmV0dXJuIHdpdGhlckYoZ2EsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLm1hcChwcmVkaWNhdGUoYSksIGZ1bmN0aW9uIChiKSB7IHJldHVybiAoYiA/IF8uc29tZShhKSA6IF8ubm9uZSk7IH0pOyB9KTsgfTsgfTtcbiAgICB9O1xufVxuZXhwb3J0cy5maWx0ZXJFID0gZmlsdGVyRTtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5ndWFyZCA9IHZvaWQgMDtcbmZ1bmN0aW9uIGd1YXJkKEYsIFApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIChiID8gUC5vZih1bmRlZmluZWQpIDogRi56ZXJvKCkpOyB9O1xufVxuZXhwb3J0cy5ndWFyZCA9IGd1YXJkO1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc29ydCA9IGV4cG9ydHMubGVmdHMgPSBleHBvcnRzLnJpZ2h0cyA9IGV4cG9ydHMucmV2ZXJzZSA9IGV4cG9ydHMubW9kaWZ5QXQgPSBleHBvcnRzLmRlbGV0ZUF0ID0gZXhwb3J0cy51cGRhdGVBdCA9IGV4cG9ydHMuaW5zZXJ0QXQgPSBleHBvcnRzLmZpbmRMYXN0SW5kZXggPSBleHBvcnRzLmZpbmRMYXN0TWFwID0gZXhwb3J0cy5maW5kTGFzdCA9IGV4cG9ydHMuZmluZEZpcnN0TWFwID0gZXhwb3J0cy5maW5kRmlyc3QgPSBleHBvcnRzLmZpbmRJbmRleCA9IGV4cG9ydHMuZHJvcExlZnRXaGlsZSA9IGV4cG9ydHMuZHJvcFJpZ2h0ID0gZXhwb3J0cy5kcm9wTGVmdCA9IGV4cG9ydHMuc3BhbkxlZnQgPSBleHBvcnRzLnRha2VMZWZ0V2hpbGUgPSBleHBvcnRzLnRha2VSaWdodCA9IGV4cG9ydHMudGFrZUxlZnQgPSBleHBvcnRzLmluaXQgPSBleHBvcnRzLnRhaWwgPSBleHBvcnRzLmxhc3QgPSBleHBvcnRzLmhlYWQgPSBleHBvcnRzLmxvb2t1cCA9IGV4cG9ydHMuaXNPdXRPZkJvdW5kID0gZXhwb3J0cy5zaXplID0gZXhwb3J0cy5zY2FuUmlnaHQgPSBleHBvcnRzLnNjYW5MZWZ0ID0gZXhwb3J0cy5jaGFpbldpdGhJbmRleCA9IGV4cG9ydHMuZm9sZFJpZ2h0ID0gZXhwb3J0cy5tYXRjaFJpZ2h0ID0gZXhwb3J0cy5tYXRjaFJpZ2h0VyA9IGV4cG9ydHMuZm9sZExlZnQgPSBleHBvcnRzLm1hdGNoTGVmdCA9IGV4cG9ydHMubWF0Y2hMZWZ0VyA9IGV4cG9ydHMubWF0Y2ggPSBleHBvcnRzLm1hdGNoVyA9IGV4cG9ydHMuZnJvbUVpdGhlciA9IGV4cG9ydHMuZnJvbU9wdGlvbiA9IGV4cG9ydHMuZnJvbVByZWRpY2F0ZSA9IGV4cG9ydHMucmVwbGljYXRlID0gZXhwb3J0cy5tYWtlQnkgPSBleHBvcnRzLmFwcGVuZFcgPSBleHBvcnRzLmFwcGVuZCA9IGV4cG9ydHMucHJlcGVuZFcgPSBleHBvcnRzLnByZXBlbmQgPSBleHBvcnRzLmlzTm9uRW1wdHkgPSBleHBvcnRzLmlzRW1wdHkgPSB2b2lkIDA7XG5leHBvcnRzLnNlcXVlbmNlID0gZXhwb3J0cy50cmF2ZXJzZSA9IGV4cG9ydHMucmVkdWNlUmlnaHRXaXRoSW5kZXggPSBleHBvcnRzLnJlZHVjZVJpZ2h0ID0gZXhwb3J0cy5yZWR1Y2VXaXRoSW5kZXggPSBleHBvcnRzLmZvbGRNYXAgPSBleHBvcnRzLnJlZHVjZSA9IGV4cG9ydHMuZm9sZE1hcFdpdGhJbmRleCA9IGV4cG9ydHMuZHVwbGljYXRlID0gZXhwb3J0cy5leHRlbmQgPSBleHBvcnRzLmZpbHRlcldpdGhJbmRleCA9IGV4cG9ydHMucGFydGl0aW9uTWFwV2l0aEluZGV4ID0gZXhwb3J0cy5wYXJ0aXRpb25NYXAgPSBleHBvcnRzLnBhcnRpdGlvbldpdGhJbmRleCA9IGV4cG9ydHMucGFydGl0aW9uID0gZXhwb3J0cy5jb21wYWN0ID0gZXhwb3J0cy5maWx0ZXJNYXAgPSBleHBvcnRzLmZpbHRlck1hcFdpdGhJbmRleCA9IGV4cG9ydHMuZmlsdGVyID0gZXhwb3J0cy5zZXBhcmF0ZSA9IGV4cG9ydHMubWFwV2l0aEluZGV4ID0gZXhwb3J0cy5tYXAgPSBleHBvcnRzLmZsYXR0ZW4gPSBleHBvcnRzLmZsYXRNYXAgPSBleHBvcnRzLmFwID0gZXhwb3J0cy5hbHQgPSBleHBvcnRzLmFsdFcgPSBleHBvcnRzLnplcm8gPSBleHBvcnRzLm9mID0gZXhwb3J0cy5fY2hhaW5SZWNCcmVhZHRoRmlyc3QgPSBleHBvcnRzLl9jaGFpblJlY0RlcHRoRmlyc3QgPSBleHBvcnRzLmRpZmZlcmVuY2UgPSBleHBvcnRzLmludGVyc2VjdGlvbiA9IGV4cG9ydHMudW5pb24gPSBleHBvcnRzLmNvbmNhdCA9IGV4cG9ydHMuY29uY2F0VyA9IGV4cG9ydHMuY29tcHJlaGVuc2lvbiA9IGV4cG9ydHMuZnJvbU9wdGlvbksgPSBleHBvcnRzLmNodW5rc09mID0gZXhwb3J0cy5zcGxpdEF0ID0gZXhwb3J0cy5jaG9wID0gZXhwb3J0cy5zb3J0QnkgPSBleHBvcnRzLnVuaXEgPSBleHBvcnRzLmVsZW0gPSBleHBvcnRzLnJvdGF0ZSA9IGV4cG9ydHMuaW50ZXJzcGVyc2UgPSBleHBvcnRzLnByZXBlbmRBbGwgPSBleHBvcnRzLnVuemlwID0gZXhwb3J0cy56aXAgPSBleHBvcnRzLnppcFdpdGggPSB2b2lkIDA7XG5leHBvcnRzLnRvQXJyYXkgPSBleHBvcnRzLnVuc2FmZURlbGV0ZUF0ID0gZXhwb3J0cy51bnNhZmVVcGRhdGVBdCA9IGV4cG9ydHMudW5zYWZlSW5zZXJ0QXQgPSBleHBvcnRzLmZyb21FaXRoZXJLID0gZXhwb3J0cy5Gcm9tRWl0aGVyID0gZXhwb3J0cy5maWx0ZXJFID0gZXhwb3J0cy5XaXRoZXJhYmxlID0gZXhwb3J0cy5DaGFpblJlY0JyZWFkdGhGaXJzdCA9IGV4cG9ydHMuY2hhaW5SZWNCcmVhZHRoRmlyc3QgPSBleHBvcnRzLkNoYWluUmVjRGVwdGhGaXJzdCA9IGV4cG9ydHMuY2hhaW5SZWNEZXB0aEZpcnN0ID0gZXhwb3J0cy5UcmF2ZXJzYWJsZVdpdGhJbmRleCA9IGV4cG9ydHMuVHJhdmVyc2FibGUgPSBleHBvcnRzLkZvbGRhYmxlV2l0aEluZGV4ID0gZXhwb3J0cy5Gb2xkYWJsZSA9IGV4cG9ydHMuRmlsdGVyYWJsZVdpdGhJbmRleCA9IGV4cG9ydHMuRmlsdGVyYWJsZSA9IGV4cG9ydHMuQ29tcGFjdGFibGUgPSBleHBvcnRzLkV4dGVuZCA9IGV4cG9ydHMuQWx0ZXJuYXRpdmUgPSBleHBvcnRzLmd1YXJkID0gZXhwb3J0cy5aZXJvID0gZXhwb3J0cy5BbHQgPSBleHBvcnRzLlVuZm9sZGFibGUgPSBleHBvcnRzLmNoYWluRmlyc3QgPSBleHBvcnRzLk1vbmFkID0gZXhwb3J0cy5DaGFpbiA9IGV4cG9ydHMuQXBwbGljYXRpdmUgPSBleHBvcnRzLmFwU2Vjb25kID0gZXhwb3J0cy5hcEZpcnN0ID0gZXhwb3J0cy5BcHBseSA9IGV4cG9ydHMuRnVuY3RvcldpdGhJbmRleCA9IGV4cG9ydHMuUG9pbnRlZCA9IGV4cG9ydHMuZmxhcCA9IGV4cG9ydHMuRnVuY3RvciA9IGV4cG9ydHMuZ2V0RGlmZmVyZW5jZU1hZ21hID0gZXhwb3J0cy5nZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAgPSBleHBvcnRzLmdldFVuaW9uTW9ub2lkID0gZXhwb3J0cy5nZXRVbmlvblNlbWlncm91cCA9IGV4cG9ydHMuZ2V0T3JkID0gZXhwb3J0cy5nZXRFcSA9IGV4cG9ydHMuZ2V0TW9ub2lkID0gZXhwb3J0cy5nZXRTZW1pZ3JvdXAgPSBleHBvcnRzLmdldFNob3cgPSBleHBvcnRzLlVSSSA9IGV4cG9ydHMudW5mb2xkID0gZXhwb3J0cy53aWx0ID0gZXhwb3J0cy53aXRoZXIgPSBleHBvcnRzLnRyYXZlcnNlV2l0aEluZGV4ID0gdm9pZCAwO1xuZXhwb3J0cy5yZWFkb25seUFycmF5ID0gZXhwb3J0cy5wcmVwZW5kVG9BbGwgPSBleHBvcnRzLnNub2MgPSBleHBvcnRzLmNvbnMgPSBleHBvcnRzLnJhbmdlID0gZXhwb3J0cy5jaGFpbiA9IGV4cG9ydHMuYXBTID0gZXhwb3J0cy5iaW5kID0gZXhwb3J0cy5sZXQgPSBleHBvcnRzLmJpbmRUbyA9IGV4cG9ydHMuRG8gPSBleHBvcnRzLmludGVyY2FsYXRlID0gZXhwb3J0cy5leGlzdHMgPSBleHBvcnRzLnNvbWUgPSBleHBvcnRzLmV2ZXJ5ID0gZXhwb3J0cy5lbXB0eSA9IGV4cG9ydHMuZnJvbUFycmF5ID0gdm9pZCAwO1xudmFyIEFwcGx5XzEgPSByZXF1aXJlKFwiLi9BcHBseVwiKTtcbnZhciBDaGFpbl8xID0gcmVxdWlyZShcIi4vQ2hhaW5cIik7XG52YXIgRXFfMSA9IHJlcXVpcmUoXCIuL0VxXCIpO1xudmFyIEZyb21FaXRoZXJfMSA9IHJlcXVpcmUoXCIuL0Zyb21FaXRoZXJcIik7XG52YXIgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2Z1bmN0aW9uXCIpO1xudmFyIEZ1bmN0b3JfMSA9IHJlcXVpcmUoXCIuL0Z1bmN0b3JcIik7XG52YXIgXyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9pbnRlcm5hbFwiKSk7XG52YXIgTiA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9udW1iZXJcIikpO1xudmFyIE9yZF8xID0gcmVxdWlyZShcIi4vT3JkXCIpO1xudmFyIFJORUEgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vUmVhZG9ubHlOb25FbXB0eUFycmF5XCIpKTtcbnZhciBTZXBhcmF0ZWRfMSA9IHJlcXVpcmUoXCIuL1NlcGFyYXRlZFwiKTtcbnZhciBXaXRoZXJhYmxlXzEgPSByZXF1aXJlKFwiLi9XaXRoZXJhYmxlXCIpO1xudmFyIFplcm9fMSA9IHJlcXVpcmUoXCIuL1plcm9cIik7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyByZWZpbmVtZW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYSBgUmVhZG9ubHlBcnJheWAgaXMgZW1wdHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc0VtcHR5KFtdKSwgdHJ1ZSlcbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMubGVuZ3RoID09PSAwOyB9O1xuZXhwb3J0cy5pc0VtcHR5ID0gaXNFbXB0eTtcbi8qKlxuICogVGVzdCB3aGV0aGVyIGEgYFJlYWRvbmx5QXJyYXlgIGlzIG5vbiBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmlzTm9uRW1wdHkgPSBSTkVBLmlzTm9uRW1wdHk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUHJlcGVuZCBhbiBlbGVtZW50IHRvIHRoZSBmcm9udCBvZiBhIGBSZWFkb25seUFycmF5YCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbMiwgMywgNF0sIHByZXBlbmQoMSkpLCBbMSwgMiwgMywgNF0pXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLnByZXBlbmQgPSBSTkVBLnByZXBlbmQ7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BwcmVwZW5kYF0oI3ByZXBlbmQpLlxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0cy5wcmVwZW5kVyA9IFJORUEucHJlcGVuZFc7XG4vKipcbiAqIEFwcGVuZCBhbiBlbGVtZW50IHRvIHRoZSBlbmQgb2YgYSBgUmVhZG9ubHlBcnJheWAsIGNyZWF0aW5nIGEgbmV3IGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBhcHBlbmQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbMSwgMiwgM10sIGFwcGVuZCg0KSksIFsxLCAyLCAzLCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMuYXBwZW5kID0gUk5FQS5hcHBlbmQ7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhcHBlbmRgXSgjYXBwZW5kKS5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydHMuYXBwZW5kVyA9IFJORUEuYXBwZW5kVztcbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBub24gbmVnYXRpdmUgaW50ZWdlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBjb25zdCBkb3VibGUgPSAobjogbnVtYmVyKTogbnVtYmVyID0+IG4gKiAyXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG1ha2VCeSg1LCBkb3VibGUpLCBbMCwgMiwgNCwgNiwgOF0pXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBtYWtlQnkgPSBmdW5jdGlvbiAobiwgZikgeyByZXR1cm4gKG4gPD0gMCA/IGV4cG9ydHMuZW1wdHkgOiBSTkVBLm1ha2VCeShmKShuKSk7IH07XG5leHBvcnRzLm1ha2VCeSA9IG1ha2VCeTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBub24gbmVnYXRpdmUgaW50ZWdlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJlcGxpY2F0ZSgzLCAnYScpLCBbJ2EnLCAnYScsICdhJ10pXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciByZXBsaWNhdGUgPSBmdW5jdGlvbiAobiwgYSkgeyByZXR1cm4gKDAsIGV4cG9ydHMubWFrZUJ5KShuLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbmV4cG9ydHMucmVwbGljYXRlID0gcmVwbGljYXRlO1xuZnVuY3Rpb24gZnJvbVByZWRpY2F0ZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChwcmVkaWNhdGUoYSkgPyBbYV0gOiBleHBvcnRzLmVtcHR5KTsgfTtcbn1cbmV4cG9ydHMuZnJvbVByZWRpY2F0ZSA9IGZyb21QcmVkaWNhdGU7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb252ZXJzaW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIGZyb21PcHRpb24gPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChfLmlzTm9uZShtYSkgPyBleHBvcnRzLmVtcHR5IDogW21hLnZhbHVlXSk7IH07XG5leHBvcnRzLmZyb21PcHRpb24gPSBmcm9tT3B0aW9uO1xuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGBFaXRoZXJgIHRvIGEgYFJlYWRvbmx5QXJyYXlgLlxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgZnJvbUVpdGhlciA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiAoXy5pc0xlZnQoZSkgPyBleHBvcnRzLmVtcHR5IDogW2UucmlnaHRdKTsgfTtcbmV4cG9ydHMuZnJvbUVpdGhlciA9IGZyb21FaXRoZXI7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaGBdKCNtYXRjaCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBtYXRjaFcgPSBmdW5jdGlvbiAob25FbXB0eSwgb25Ob25FbXB0eSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTm9uRW1wdHkpKGFzKSA/IG9uTm9uRW1wdHkoYXMpIDogb25FbXB0eSgpO1xuICAgIH07XG59O1xuZXhwb3J0cy5tYXRjaFcgPSBtYXRjaFc7XG4vKipcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydHMubWF0Y2ggPSBleHBvcnRzLm1hdGNoVztcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYG1hdGNoTGVmdGBdKCNtYXRjaGxlZnQpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBtYXRjaExlZnRXID0gZnVuY3Rpb24gKG9uRW1wdHksIG9uTm9uRW1wdHkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc05vbkVtcHR5KShhcykgPyBvbk5vbkVtcHR5KFJORUEuaGVhZChhcyksIFJORUEudGFpbChhcykpIDogb25FbXB0eSgpO1xuICAgIH07XG59O1xuZXhwb3J0cy5tYXRjaExlZnRXID0gbWF0Y2hMZWZ0Vztcbi8qKlxuICogQnJlYWsgYSBgUmVhZG9ubHlBcnJheWAgaW50byBpdHMgZmlyc3QgZWxlbWVudCBhbmQgcmVtYWluaW5nIGVsZW1lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYXRjaExlZnQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGNvbnN0IGxlbjogPEE+KGFzOiBSZWFkb25seUFycmF5PEE+KSA9PiBudW1iZXIgPSBtYXRjaExlZnQoKCkgPT4gMCwgKF8sIHRhaWwpID0+IDEgKyBsZW4odGFpbCkpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwobGVuKFsxLCAyLCAzXSksIDMpXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5tYXRjaExlZnQgPSBleHBvcnRzLm1hdGNoTGVmdFc7XG4vKipcbiAqIEFsaWFzIG9mIFtgbWF0Y2hMZWZ0YF0oI21hdGNobGVmdCkuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmZvbGRMZWZ0ID0gZXhwb3J0cy5tYXRjaExlZnQ7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaFJpZ2h0YF0oI21hdGNocmlnaHQpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBtYXRjaFJpZ2h0VyA9IGZ1bmN0aW9uIChvbkVtcHR5LCBvbk5vbkVtcHR5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNOb25FbXB0eSkoYXMpID8gb25Ob25FbXB0eShSTkVBLmluaXQoYXMpLCBSTkVBLmxhc3QoYXMpKSA6IG9uRW1wdHkoKTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWF0Y2hSaWdodFcgPSBtYXRjaFJpZ2h0Vztcbi8qKlxuICogQnJlYWsgYSBgUmVhZG9ubHlBcnJheWAgaW50byBpdHMgaW5pdGlhbCBlbGVtZW50cyBhbmQgdGhlIGxhc3QgZWxlbWVudC5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLm1hdGNoUmlnaHQgPSBleHBvcnRzLm1hdGNoUmlnaHRXO1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoUmlnaHRgXSgjbWF0Y2hyaWdodCkuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmZvbGRSaWdodCA9IGV4cG9ydHMubWF0Y2hSaWdodDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbWJpbmF0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi43LjBcbiAqL1xudmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIGlmICgoMCwgZXhwb3J0cy5pc0VtcHR5KShhcykpIHtcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmVtcHR5O1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgb3V0LnB1c2guYXBwbHkob3V0LCBmKGksIGFzW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbmV4cG9ydHMuY2hhaW5XaXRoSW5kZXggPSBjaGFpbldpdGhJbmRleDtcbi8qKlxuICogU2FtZSBhcyBgcmVkdWNlYCBidXQgaXQgY2FycmllcyBvdmVyIHRoZSBpbnRlcm1lZGlhdGUgc3RlcHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNjYW5MZWZ0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNjYW5MZWZ0KDEwLCAoYiwgYTogbnVtYmVyKSA9PiBiIC0gYSkoWzEsIDIsIDNdKSwgWzEwLCA5LCA3LCA0XSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIHNjYW5MZWZ0ID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBsZW4gPSBhcy5sZW5ndGg7XG4gICAgICAgIHZhciBvdXQgPSBuZXcgQXJyYXkobGVuICsgMSk7XG4gICAgICAgIG91dFswXSA9IGI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIG91dFtpICsgMV0gPSBmKG91dFtpXSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG5leHBvcnRzLnNjYW5MZWZ0ID0gc2NhbkxlZnQ7XG4vKipcbiAqIEZvbGQgYW4gYXJyYXkgZnJvbSB0aGUgcmlnaHQsIGtlZXBpbmcgYWxsIGludGVybWVkaWF0ZSByZXN1bHRzIGluc3RlYWQgb2Ygb25seSB0aGUgZmluYWwgcmVzdWx0XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNjYW5SaWdodCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzY2FuUmlnaHQoMTAsIChhOiBudW1iZXIsIGIpID0+IGIgLSBhKShbMSwgMiwgM10pLCBbNCwgNSwgNywgMTBdKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgc2NhblJpZ2h0ID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBsZW4gPSBhcy5sZW5ndGg7XG4gICAgICAgIHZhciBvdXQgPSBuZXcgQXJyYXkobGVuICsgMSk7XG4gICAgICAgIG91dFtsZW5dID0gYjtcbiAgICAgICAgZm9yICh2YXIgaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBvdXRbaV0gPSBmKGFzW2ldLCBvdXRbaSArIDFdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuZXhwb3J0cy5zY2FuUmlnaHQgPSBzY2FuUmlnaHQ7XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIGEgYFJlYWRvbmx5QXJyYXlgLlxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIHNpemUgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzLmxlbmd0aDsgfTtcbmV4cG9ydHMuc2l6ZSA9IHNpemU7XG4vKipcbiAqIFRlc3Qgd2hldGhlciBhbiBhcnJheSBjb250YWlucyBhIHBhcnRpY3VsYXIgaW5kZXhcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0cy5pc091dE9mQm91bmQgPSBSTkVBLmlzT3V0T2ZCb3VuZDtcbmZ1bmN0aW9uIGxvb2t1cChpLCBhcykge1xuICAgIHJldHVybiBhcyA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBsb29rdXAoaSwgYXMpOyB9IDogKDAsIGV4cG9ydHMuaXNPdXRPZkJvdW5kKShpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUoYXNbaV0pO1xufVxuZXhwb3J0cy5sb29rdXAgPSBsb29rdXA7XG4vKipcbiAqIEdldCB0aGUgZmlyc3QgZWxlbWVudCBpbiBhbiBhcnJheSwgb3IgYE5vbmVgIGlmIHRoZSBhcnJheSBpcyBlbXB0eVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBoZWFkIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChoZWFkKFsxLCAyLCAzXSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGhlYWQoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgaGVhZCA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKCgwLCBleHBvcnRzLmlzTm9uRW1wdHkpKGFzKSA/IF8uc29tZShSTkVBLmhlYWQoYXMpKSA6IF8ubm9uZSk7IH07XG5leHBvcnRzLmhlYWQgPSBoZWFkO1xuLyoqXG4gKiBHZXQgdGhlIGxhc3QgZWxlbWVudCBpbiBhbiBhcnJheSwgb3IgYE5vbmVgIGlmIHRoZSBhcnJheSBpcyBlbXB0eVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBsYXN0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChsYXN0KFsxLCAyLCAzXSksIHNvbWUoMykpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGxhc3QoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgbGFzdCA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKCgwLCBleHBvcnRzLmlzTm9uRW1wdHkpKGFzKSA/IF8uc29tZShSTkVBLmxhc3QoYXMpKSA6IF8ubm9uZSk7IH07XG5leHBvcnRzLmxhc3QgPSBsYXN0O1xuLyoqXG4gKiBHZXQgYWxsIGJ1dCB0aGUgZmlyc3QgZWxlbWVudCBvZiBhbiBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXksIG9yIGBOb25lYCBpZiB0aGUgYXJyYXkgaXMgZW1wdHlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdGFpbCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodGFpbChbMSwgMiwgM10pLCBzb21lKFsyLCAzXSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRhaWwoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgdGFpbCA9IGZ1bmN0aW9uIChhcykge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc05vbkVtcHR5KShhcykgPyBfLnNvbWUoUk5FQS50YWlsKGFzKSkgOiBfLm5vbmU7XG59O1xuZXhwb3J0cy50YWlsID0gdGFpbDtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhbiBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXksIG9yIGBOb25lYCBpZiB0aGUgYXJyYXkgaXMgZW1wdHlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaW5pdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMSwgMiwgM10pLCBzb21lKFsxLCAyXSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGluaXQoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgaW5pdCA9IGZ1bmN0aW9uIChhcykge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc05vbkVtcHR5KShhcykgPyBfLnNvbWUoUk5FQS5pbml0KGFzKSkgOiBfLm5vbmU7XG59O1xuZXhwb3J0cy5pbml0ID0gaW5pdDtcbi8qKlxuICogS2VlcCBvbmx5IGEgbWF4IG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZiBhbiBgUmVhZG9ubHlBcnJheWAsIGNyZWF0aW5nIGEgbmV3IGBSZWFkb25seUFycmF5YC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBub24gbmVnYXRpdmUgaW50ZWdlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUkEgZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBpbnB1dDogUmVhZG9ubHlBcnJheTxudW1iZXI+ID0gWzEsIDIsIDNdXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLnRha2VMZWZ0KDIpKSwgWzEsIDJdKVxuICpcbiAqIC8vIG91dCBvZiBib3VuZHNcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChwaXBlKGlucHV0LCBSQS50YWtlTGVmdCg0KSksIGlucHV0KVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLnRha2VMZWZ0KC0xKSksIGlucHV0KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgdGFrZUxlZnQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmlzT3V0T2ZCb3VuZCkobiwgYXMpID8gYXMgOiBuID09PSAwID8gZXhwb3J0cy5lbXB0eSA6IGFzLnNsaWNlKDAsIG4pO1xuICAgIH07XG59O1xuZXhwb3J0cy50YWtlTGVmdCA9IHRha2VMZWZ0O1xuLyoqXG4gKiBLZWVwIG9ubHkgYSBtYXggbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiBhbiBgUmVhZG9ubHlBcnJheWAsIGNyZWF0aW5nIGEgbmV3IGBSZWFkb25seUFycmF5YC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBub24gbmVnYXRpdmUgaW50ZWdlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUkEgZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBpbnB1dDogUmVhZG9ubHlBcnJheTxudW1iZXI+ID0gWzEsIDIsIDNdXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLnRha2VSaWdodCgyKSksIFsyLCAzXSlcbiAqXG4gKiAvLyBvdXQgb2YgYm91bmRzXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwocGlwZShpbnB1dCwgUkEudGFrZVJpZ2h0KDQpKSwgaW5wdXQpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwocGlwZShpbnB1dCwgUkEudGFrZVJpZ2h0KC0xKSksIGlucHV0KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgdGFrZVJpZ2h0ID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc091dE9mQm91bmQpKG4sIGFzKSA/IGFzIDogbiA9PT0gMCA/IGV4cG9ydHMuZW1wdHkgOiBhcy5zbGljZSgtbik7XG4gICAgfTtcbn07XG5leHBvcnRzLnRha2VSaWdodCA9IHRha2VSaWdodDtcbmZ1bmN0aW9uIHRha2VMZWZ0V2hpbGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgYXNfMSA9IGFzOyBfaSA8IGFzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzXzFbX2ldO1xuICAgICAgICAgICAgaWYgKCFwcmVkaWNhdGUoYSkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dC5wdXNoKGEpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsZW4gPSBvdXQubGVuZ3RoO1xuICAgICAgICByZXR1cm4gbGVuID09PSBhcy5sZW5ndGggPyBhcyA6IGxlbiA9PT0gMCA/IGV4cG9ydHMuZW1wdHkgOiBvdXQ7XG4gICAgfTtcbn1cbmV4cG9ydHMudGFrZUxlZnRXaGlsZSA9IHRha2VMZWZ0V2hpbGU7XG52YXIgc3BhbkxlZnRJbmRleCA9IGZ1bmN0aW9uIChhcywgcHJlZGljYXRlKSB7XG4gICAgdmFyIGwgPSBhcy5sZW5ndGg7XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmICghcHJlZGljYXRlKGFzW2ldKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGk7XG59O1xuZnVuY3Rpb24gc3BhbkxlZnQocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgX2EgPSAoMCwgZXhwb3J0cy5zcGxpdEF0KShzcGFuTGVmdEluZGV4KGFzLCBwcmVkaWNhdGUpKShhcyksIGluaXQgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICByZXR1cm4geyBpbml0OiBpbml0LCByZXN0OiByZXN0IH07XG4gICAgfTtcbn1cbmV4cG9ydHMuc3BhbkxlZnQgPSBzcGFuTGVmdDtcbi8qKlxuICogRHJvcCBhIG1heCBudW1iZXIgb2YgZWxlbWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgYW4gYFJlYWRvbmx5QXJyYXlgLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlBcnJheWAuXG4gKlxuICogKipOb3RlKiouIGBuYCBpcyBub3JtYWxpemVkIHRvIGEgbm9uIG5lZ2F0aXZlIGludGVnZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgaW5wdXQ6IFJlYWRvbmx5QXJyYXk8bnVtYmVyPiA9IFsxLCAyLCAzXVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKGlucHV0LCBSQS5kcm9wTGVmdCgyKSksIFszXSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChwaXBlKGlucHV0LCBSQS5kcm9wTGVmdCgwKSksIGlucHV0KVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLmRyb3BMZWZ0KC0xKSksIGlucHV0KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgZHJvcExlZnQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIG4gPD0gMCB8fCAoMCwgZXhwb3J0cy5pc0VtcHR5KShhcykgPyBhcyA6IG4gPj0gYXMubGVuZ3RoID8gZXhwb3J0cy5lbXB0eSA6IGFzLnNsaWNlKG4sIGFzLmxlbmd0aCk7XG4gICAgfTtcbn07XG5leHBvcnRzLmRyb3BMZWZ0ID0gZHJvcExlZnQ7XG4vKipcbiAqIERyb3AgYSBtYXggbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiBhbiBgUmVhZG9ubHlBcnJheWAsIGNyZWF0aW5nIGEgbmV3IGBSZWFkb25seUFycmF5YC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBub24gbmVnYXRpdmUgaW50ZWdlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUkEgZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBpbnB1dDogUmVhZG9ubHlBcnJheTxudW1iZXI+ID0gWzEsIDIsIDNdXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLmRyb3BSaWdodCgyKSksIFsxXSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChwaXBlKGlucHV0LCBSQS5kcm9wUmlnaHQoMCkpLCBpbnB1dClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChwaXBlKGlucHV0LCBSQS5kcm9wUmlnaHQoLTEpKSwgaW5wdXQpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBkcm9wUmlnaHQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIG4gPD0gMCB8fCAoMCwgZXhwb3J0cy5pc0VtcHR5KShhcykgPyBhcyA6IG4gPj0gYXMubGVuZ3RoID8gZXhwb3J0cy5lbXB0eSA6IGFzLnNsaWNlKDAsIGFzLmxlbmd0aCAtIG4pO1xuICAgIH07XG59O1xuZXhwb3J0cy5kcm9wUmlnaHQgPSBkcm9wUmlnaHQ7XG5mdW5jdGlvbiBkcm9wTGVmdFdoaWxlKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIGkgPSBzcGFuTGVmdEluZGV4KGFzLCBwcmVkaWNhdGUpO1xuICAgICAgICByZXR1cm4gaSA9PT0gMCA/IGFzIDogaSA9PT0gYXMubGVuZ3RoID8gZXhwb3J0cy5lbXB0eSA6IGFzLnNsaWNlKGkpO1xuICAgIH07XG59XG5leHBvcnRzLmRyb3BMZWZ0V2hpbGUgPSBkcm9wTGVmdFdoaWxlO1xuLyoqXG4gKiBGaW5kIHRoZSBmaXJzdCBpbmRleCBmb3Igd2hpY2ggYSBwcmVkaWNhdGUgaG9sZHNcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmluZEluZGV4IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kSW5kZXgoKG46IG51bWJlcikgPT4gbiA9PT0gMikoWzEsIDIsIDNdKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmluZEluZGV4KChuOiBudW1iZXIpID0+IG4gPT09IDIpKFtdKSwgbm9uZSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIGZpbmRJbmRleCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUoYXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uc29tZShpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgIH07XG59O1xuZXhwb3J0cy5maW5kSW5kZXggPSBmaW5kSW5kZXg7XG5mdW5jdGlvbiBmaW5kRmlyc3QocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKGFzW2ldKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLnNvbWUoYXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgfTtcbn1cbmV4cG9ydHMuZmluZEZpcnN0ID0gZmluZEZpcnN0O1xuLyoqXG4gKiBGaW5kIHRoZSBmaXJzdCBlbGVtZW50IHJldHVybmVkIGJ5IGFuIG9wdGlvbiBiYXNlZCBzZWxlY3RvciBmdW5jdGlvblxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaW5kRmlyc3RNYXAgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgUGVyc29uIHtcbiAqICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGFnZT86IG51bWJlclxuICogfVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJlYWRvbmx5QXJyYXk8UGVyc29uPiA9IFt7IG5hbWU6ICdKb2huJyB9LCB7IG5hbWU6ICdNYXJ5JywgYWdlOiA0NSB9LCB7IG5hbWU6ICdKb2V5JywgYWdlOiAyOCB9XVxuICpcbiAqIC8vIHJldHVybnMgdGhlIG5hbWUgb2YgdGhlIGZpcnN0IHBlcnNvbiB0aGF0IGhhcyBhbiBhZ2VcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmluZEZpcnN0TWFwKChwOiBQZXJzb24pID0+IChwLmFnZSA9PT0gdW5kZWZpbmVkID8gbm9uZSA6IHNvbWUocC5uYW1lKSkpKHBlcnNvbnMpLCBzb21lKCdNYXJ5JykpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBmaW5kRmlyc3RNYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG91dCA9IGYoYXNbaV0pO1xuICAgICAgICAgICAgaWYgKF8uaXNTb21lKG91dCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgfTtcbn07XG5leHBvcnRzLmZpbmRGaXJzdE1hcCA9IGZpbmRGaXJzdE1hcDtcbmZ1bmN0aW9uIGZpbmRMYXN0KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IGFzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKGFzW2ldKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLnNvbWUoYXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgfTtcbn1cbmV4cG9ydHMuZmluZExhc3QgPSBmaW5kTGFzdDtcbi8qKlxuICogRmluZCB0aGUgbGFzdCBlbGVtZW50IHJldHVybmVkIGJ5IGFuIG9wdGlvbiBiYXNlZCBzZWxlY3RvciBmdW5jdGlvblxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaW5kTGFzdE1hcCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICByZWFkb25seSBuYW1lOiBzdHJpbmdcbiAqICAgcmVhZG9ubHkgYWdlPzogbnVtYmVyXG4gKiB9XG4gKlxuICogY29uc3QgcGVyc29uczogUmVhZG9ubHlBcnJheTxQZXJzb24+ID0gW3sgbmFtZTogJ0pvaG4nIH0sIHsgbmFtZTogJ01hcnknLCBhZ2U6IDQ1IH0sIHsgbmFtZTogJ0pvZXknLCBhZ2U6IDI4IH1dXG4gKlxuICogLy8gcmV0dXJucyB0aGUgbmFtZSBvZiB0aGUgbGFzdCBwZXJzb24gdGhhdCBoYXMgYW4gYWdlXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRMYXN0TWFwKChwOiBQZXJzb24pID0+IChwLmFnZSA9PT0gdW5kZWZpbmVkID8gbm9uZSA6IHNvbWUocC5uYW1lKSkpKHBlcnNvbnMpLCBzb21lKCdKb2V5JykpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBmaW5kTGFzdE1hcCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICBmb3IgKHZhciBpID0gYXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciBvdXQgPSBmKGFzW2ldKTtcbiAgICAgICAgICAgIGlmIChfLmlzU29tZShvdXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgIH07XG59O1xuZXhwb3J0cy5maW5kTGFzdE1hcCA9IGZpbmRMYXN0TWFwO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBsaXN0IHdoaWNoIG1hdGNoZXMgdGhlIHByZWRpY2F0ZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaW5kTGFzdEluZGV4IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogaW50ZXJmYWNlIFgge1xuICogICByZWFkb25seSBhOiBudW1iZXJcbiAqICAgcmVhZG9ubHkgYjogbnVtYmVyXG4gKiB9XG4gKiBjb25zdCB4czogUmVhZG9ubHlBcnJheTxYPiA9IFt7IGE6IDEsIGI6IDAgfSwgeyBhOiAxLCBiOiAxIH1dXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRMYXN0SW5kZXgoKHg6IHsgcmVhZG9ubHkgYTogbnVtYmVyIH0pID0+IHguYSA9PT0gMSkoeHMpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kTGFzdEluZGV4KCh4OiB7IHJlYWRvbmx5IGE6IG51bWJlciB9KSA9PiB4LmEgPT09IDQpKHhzKSwgbm9uZSlcbiAqXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBmaW5kTGFzdEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IGFzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKGFzW2ldKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLnNvbWUoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF8ubm9uZTtcbiAgICB9O1xufTtcbmV4cG9ydHMuZmluZExhc3RJbmRleCA9IGZpbmRMYXN0SW5kZXg7XG4vKipcbiAqIEluc2VydCBhbiBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXgsIGNyZWF0aW5nIGEgbmV3IGFycmF5LCBvciByZXR1cm5pbmcgYE5vbmVgIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluc2VydEF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnNlcnRBdCgyLCA1KShbMSwgMiwgMywgNF0pLCBzb21lKFsxLCAyLCA1LCAzLCA0XSkpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBpbnNlcnRBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gaSA8IDAgfHwgaSA+IGFzLmxlbmd0aCA/IF8ubm9uZSA6IF8uc29tZShSTkVBLnVuc2FmZUluc2VydEF0KGksIGEsIGFzKSk7XG4gICAgfTtcbn07XG5leHBvcnRzLmluc2VydEF0ID0gaW5zZXJ0QXQ7XG4vKipcbiAqIENoYW5nZSB0aGUgZWxlbWVudCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LCBjcmVhdGluZyBhIG5ldyBhcnJheSwgb3IgcmV0dXJuaW5nIGBOb25lYCBpZiB0aGUgaW5kZXggaXMgb3V0IG9mIGJvdW5kc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1cGRhdGVBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBkYXRlQXQoMSwgMSkoWzEsIDIsIDNdKSwgc29tZShbMSwgMSwgM10pKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cGRhdGVBdCgxLCAxKShbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLm1vZGlmeUF0KShpLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTtcbn07XG5leHBvcnRzLnVwZGF0ZUF0ID0gdXBkYXRlQXQ7XG4vKipcbiAqIERlbGV0ZSB0aGUgZWxlbWVudCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LCBjcmVhdGluZyBhIG5ldyBhcnJheSwgb3IgcmV0dXJuaW5nIGBOb25lYCBpZiB0aGUgaW5kZXggaXMgb3V0IG9mIGJvdW5kc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBkZWxldGVBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZGVsZXRlQXQoMCkoWzEsIDIsIDNdKSwgc29tZShbMiwgM10pKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkZWxldGVBdCgxKShbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBkZWxldGVBdCA9IGZ1bmN0aW9uIChpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNPdXRPZkJvdW5kKShpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUoKDAsIGV4cG9ydHMudW5zYWZlRGVsZXRlQXQpKGksIGFzKSk7XG4gICAgfTtcbn07XG5leHBvcnRzLmRlbGV0ZUF0ID0gZGVsZXRlQXQ7XG4vKipcbiAqIEFwcGx5IGEgZnVuY3Rpb24gdG8gdGhlIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleCwgY3JlYXRpbmcgYSBuZXcgYXJyYXksIG9yIHJldHVybmluZyBgTm9uZWAgaWYgdGhlIGluZGV4IGlzIG91dFxuICogb2YgYm91bmRzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1vZGlmeUF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgZG91YmxlID0gKHg6IG51bWJlcik6IG51bWJlciA9PiB4ICogMlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtb2RpZnlBdCgxLCBkb3VibGUpKFsxLCAyLCAzXSksIHNvbWUoWzEsIDQsIDNdKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobW9kaWZ5QXQoMSwgZG91YmxlKShbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBtb2RpZnlBdCA9IGZ1bmN0aW9uIChpLCBmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNPdXRPZkJvdW5kKShpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUoKDAsIGV4cG9ydHMudW5zYWZlVXBkYXRlQXQpKGksIGYoYXNbaV0pLCBhcykpO1xuICAgIH07XG59O1xuZXhwb3J0cy5tb2RpZnlBdCA9IG1vZGlmeUF0O1xuLyoqXG4gKiBSZXZlcnNlIGFuIGFycmF5LCBjcmVhdGluZyBhIG5ldyBhcnJheVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXZlcnNlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJldmVyc2UoWzEsIDIsIDNdKSwgWzMsIDIsIDFdKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgcmV2ZXJzZSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGFzLmxlbmd0aCA8PSAxID8gYXMgOiBhcy5zbGljZSgpLnJldmVyc2UoKSk7IH07XG5leHBvcnRzLnJldmVyc2UgPSByZXZlcnNlO1xuLyoqXG4gKiBFeHRyYWN0cyBmcm9tIGFuIGFycmF5IG9mIGBFaXRoZXJgIGFsbCB0aGUgYFJpZ2h0YCBlbGVtZW50cy4gQWxsIHRoZSBgUmlnaHRgIGVsZW1lbnRzIGFyZSBleHRyYWN0ZWQgaW4gb3JkZXJcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmlnaHRzIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHJpZ2h0LCBsZWZ0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmlnaHRzKFtyaWdodCgxKSwgbGVmdCgnZm9vJyksIHJpZ2h0KDIpXSksIFsxLCAyXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIHJpZ2h0cyA9IGZ1bmN0aW9uIChhcykge1xuICAgIHZhciByID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICBpZiAoYS5fdGFnID09PSAnUmlnaHQnKSB7XG4gICAgICAgICAgICByLnB1c2goYS5yaWdodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHI7XG59O1xuZXhwb3J0cy5yaWdodHMgPSByaWdodHM7XG4vKipcbiAqIEV4dHJhY3RzIGZyb20gYW4gYXJyYXkgb2YgYEVpdGhlcmAgYWxsIHRoZSBgTGVmdGAgZWxlbWVudHMuIEFsbCB0aGUgYExlZnRgIGVsZW1lbnRzIGFyZSBleHRyYWN0ZWQgaW4gb3JkZXJcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbGVmdHMgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgbGVmdCwgcmlnaHQgfSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChsZWZ0cyhbcmlnaHQoMSksIGxlZnQoJ2ZvbycpLCByaWdodCgyKV0pLCBbJ2ZvbyddKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgbGVmdHMgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICB2YXIgciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGEgPSBhc1tpXTtcbiAgICAgICAgaWYgKGEuX3RhZyA9PT0gJ0xlZnQnKSB7XG4gICAgICAgICAgICByLnB1c2goYS5sZWZ0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcjtcbn07XG5leHBvcnRzLmxlZnRzID0gbGVmdHM7XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGFuIGFycmF5IGluIGluY3JlYXNpbmcgb3JkZXIsIGNyZWF0aW5nIGEgbmV3IGFycmF5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvcnQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb3J0KE4uT3JkKShbMywgMiwgMV0pLCBbMSwgMiwgM10pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPD0gMSA/IGFzIDogYXMuc2xpY2UoKS5zb3J0KE8uY29tcGFyZSk7XG4gICAgfTtcbn07XG5leHBvcnRzLnNvcnQgPSBzb3J0O1xuLy8gVE9ETzogY3VycnkgYW5kIG1ha2UgZGF0YS1sYXN0IGluIHYzXG4vKipcbiAqIEFwcGx5IGEgZnVuY3Rpb24gdG8gcGFpcnMgb2YgZWxlbWVudHMgYXQgdGhlIHNhbWUgaW5kZXggaW4gdHdvIGFycmF5cywgY29sbGVjdGluZyB0aGUgcmVzdWx0cyBpbiBhIG5ldyBhcnJheS4gSWYgb25lXG4gKiBpbnB1dCBhcnJheSBpcyBzaG9ydCwgZXhjZXNzIGVsZW1lbnRzIG9mIHRoZSBsb25nZXIgYXJyYXkgYXJlIGRpc2NhcmRlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgemlwV2l0aCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh6aXBXaXRoKFsxLCAyLCAzXSwgWydhJywgJ2InLCAnYycsICdkJ10sIChuLCBzKSA9PiBzICsgbiksIFsnYTEnLCAnYjInLCAnYzMnXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIHppcFdpdGggPSBmdW5jdGlvbiAoZmEsIGZiLCBmKSB7XG4gICAgdmFyIGZjID0gW107XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGZhLmxlbmd0aCwgZmIubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGZjW2ldID0gZihmYVtpXSwgZmJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZmM7XG59O1xuZXhwb3J0cy56aXBXaXRoID0gemlwV2l0aDtcbmZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLnppcFdpdGgpKGFzLCBicywgZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIFthLCBiXTsgfSk7XG59XG5leHBvcnRzLnppcCA9IHppcDtcbi8qKlxuICogVGhlIGZ1bmN0aW9uIGlzIHJldmVyc2Ugb2YgYHppcGAuIFRha2VzIGFuIGFycmF5IG9mIHBhaXJzIGFuZCByZXR1cm4gdHdvIGNvcnJlc3BvbmRpbmcgYXJyYXlzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuemlwIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuemlwKFtbMSwgJ2EnXSwgWzIsICdiJ10sIFszLCAnYyddXSksIFtbMSwgMiwgM10sIFsnYScsICdiJywgJ2MnXV0pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciB1bnppcCA9IGZ1bmN0aW9uIChhcykge1xuICAgIHZhciBmYSA9IFtdO1xuICAgIHZhciBmYiA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhc1tpXVswXTtcbiAgICAgICAgZmJbaV0gPSBhc1tpXVsxXTtcbiAgICB9XG4gICAgcmV0dXJuIFtmYSwgZmJdO1xufTtcbmV4cG9ydHMudW56aXAgPSB1bnppcDtcbi8qKlxuICogUHJlcGVuZCBhbiBlbGVtZW50IHRvIGV2ZXJ5IG1lbWJlciBvZiBhbiBhcnJheVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwcmVwZW5kQWxsIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHByZXBlbmRBbGwoOSkoWzEsIDIsIDMsIDRdKSwgWzksIDEsIDksIDIsIDksIDMsIDksIDRdKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIHByZXBlbmRBbGwgPSBmdW5jdGlvbiAobWlkZGxlKSB7XG4gICAgdmFyIGYgPSBSTkVBLnByZXBlbmRBbGwobWlkZGxlKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoKDAsIGV4cG9ydHMuaXNOb25FbXB0eSkoYXMpID8gZihhcykgOiBhcyk7IH07XG59O1xuZXhwb3J0cy5wcmVwZW5kQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogUGxhY2VzIGFuIGVsZW1lbnQgaW4gYmV0d2VlbiBtZW1iZXJzIG9mIGFuIGFycmF5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGludGVyc3BlcnNlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xudmFyIGludGVyc3BlcnNlID0gZnVuY3Rpb24gKG1pZGRsZSkge1xuICAgIHZhciBmID0gUk5FQS5pbnRlcnNwZXJzZShtaWRkbGUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuICgoMCwgZXhwb3J0cy5pc05vbkVtcHR5KShhcykgPyBmKGFzKSA6IGFzKTsgfTtcbn07XG5leHBvcnRzLmludGVyc3BlcnNlID0gaW50ZXJzcGVyc2U7XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seUFycmF5YCBieSBgbmAgc3RlcHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJvdGF0ZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyb3RhdGUoMikoWzEsIDIsIDMsIDQsIDVdKSwgWzQsIDUsIDEsIDIsIDNdKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgcm90YXRlID0gZnVuY3Rpb24gKG4pIHtcbiAgICB2YXIgZiA9IFJORUEucm90YXRlKG4pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuICgoMCwgZXhwb3J0cy5pc05vbkVtcHR5KShhcykgPyBmKGFzKSA6IGFzKTsgfTtcbn07XG5leHBvcnRzLnJvdGF0ZSA9IHJvdGF0ZTtcbmZ1bmN0aW9uIGVsZW0oRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYXMpIHtcbiAgICAgICAgaWYgKGFzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtRV8xID0gZWxlbShFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGVsZW1FXzEoYSwgYXMpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcmVkaWNhdGUgPSBmdW5jdGlvbiAoZWxlbWVudCkgeyByZXR1cm4gRS5lcXVhbHMoZWxlbWVudCwgYSk7IH07XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShhc1tpXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cbmV4cG9ydHMuZWxlbSA9IGVsZW07XG4vKipcbiAqIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gYW4gYXJyYXksIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuaXEoTi5FcSkoWzEsIDIsIDFdKSwgWzEsIDJdKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgdW5pcSA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIGYgPSBSTkVBLnVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKCgwLCBleHBvcnRzLmlzTm9uRW1wdHkpKGFzKSA/IGYoYXMpIDogYXMpOyB9O1xufTtcbmV4cG9ydHMudW5pcSA9IHVuaXE7XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGFuIGFycmF5IGluIGluY3JlYXNpbmcgb3JkZXIsIHdoZXJlIGVsZW1lbnRzIGFyZSBjb21wYXJlZCB1c2luZyBmaXJzdCBgb3Jkc1swXWAsIHRoZW4gYG9yZHNbMV1gLFxuICogZXRjLi4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICByZWFkb25seSBuYW1lOiBzdHJpbmdcbiAqICAgcmVhZG9ubHkgYWdlOiBudW1iZXJcbiAqIH1cbiAqIGNvbnN0IGJ5TmFtZSA9IHBpcGUoUy5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLm5hbWUpKVxuICogY29uc3QgYnlBZ2UgPSBwaXBlKE4uT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5hZ2UpKVxuICpcbiAqIGNvbnN0IHNvcnRCeU5hbWVCeUFnZSA9IHNvcnRCeShbYnlOYW1lLCBieUFnZV0pXG4gKlxuICogY29uc3QgcGVyc29ucyA9IFt7IG5hbWU6ICdhJywgYWdlOiAxIH0sIHsgbmFtZTogJ2InLCBhZ2U6IDMgfSwgeyBuYW1lOiAnYycsIGFnZTogMiB9LCB7IG5hbWU6ICdiJywgYWdlOiAyIH1dXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvcnRCeU5hbWVCeUFnZShwZXJzb25zKSwgW1xuICogICB7IG5hbWU6ICdhJywgYWdlOiAxIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH1cbiAqIF0pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBzb3J0QnkgPSBmdW5jdGlvbiAob3Jkcykge1xuICAgIHZhciBmID0gUk5FQS5zb3J0Qnkob3Jkcyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKCgwLCBleHBvcnRzLmlzTm9uRW1wdHkpKGFzKSA/IGYoYXMpIDogYXMpOyB9O1xufTtcbmV4cG9ydHMuc29ydEJ5ID0gc29ydEJ5O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seUFycmF5YCB0byBwcm9kdWNlIGEgbmV3IGBSZWFkb25seUFycmF5YCwgb2Z0ZW4gdXNlZCBmb3IgXCJjaG9wcGluZ1wiIHVwIHRoZSBpbnB1dFxuICogYFJlYWRvbmx5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seUFycmF5YCBhbmQgcHJvZHVjZSBhXG4gKiB2YWx1ZSBhbmQgdGhlIHRhaWwgb2YgdGhlIGBSZWFkb25seUFycmF5YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgRXEgfSBmcm9tICdmcC10cy9FcSdcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBncm91cCA9IDxBPihTOiBFcTxBPik6ICgoYXM6IFJlYWRvbmx5QXJyYXk8QT4pID0+IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHlBcnJheTxBPj4pID0+IHtcbiAqICAgcmV0dXJuIFJBLmNob3AoYXMgPT4ge1xuICogICAgIGNvbnN0IHsgaW5pdCwgcmVzdCB9ID0gcGlwZShhcywgUkEuc3BhbkxlZnQoKGE6IEEpID0+IFMuZXF1YWxzKGEsIGFzWzBdKSkpXG4gKiAgICAgcmV0dXJuIFtpbml0LCByZXN0XVxuICogICB9KVxuICogfVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChncm91cChOLkVxKShbMSwgMSwgMiwgMywgMywgNF0pLCBbWzEsIDFdLCBbMl0sIFszLCAzXSwgWzRdXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHZhciBnID0gUk5FQS5jaG9wKGYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuICgoMCwgZXhwb3J0cy5pc05vbkVtcHR5KShhcykgPyBnKGFzKSA6IGV4cG9ydHMuZW1wdHkpOyB9O1xufTtcbmV4cG9ydHMuY2hvcCA9IGNob3A7XG4vKipcbiAqIFNwbGl0cyBhIGBSZWFkb25seUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc3BsaXRBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzcGxpdEF0KDIpKFsxLCAyLCAzLCA0LCA1XSksIFtbMSwgMl0sIFszLCA0LCA1XV0pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBzcGxpdEF0ID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBuID49IDEgJiYgKDAsIGV4cG9ydHMuaXNOb25FbXB0eSkoYXMpID8gUk5FQS5zcGxpdEF0KG4pKGFzKSA6ICgwLCBleHBvcnRzLmlzRW1wdHkpKGFzKSA/IFthcywgZXhwb3J0cy5lbXB0eV0gOiBbZXhwb3J0cy5lbXB0eSwgYXNdO1xuICAgIH07XG59O1xuZXhwb3J0cy5zcGxpdEF0ID0gc3BsaXRBdDtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gbGVuZ3RoLWBuYCBwaWVjZXMuIFRoZSBsYXN0IHBpZWNlIHdpbGwgYmUgc2hvcnRlciBpZiBgbmAgZG9lcyBub3QgZXZlbmx5IGRpdmlkZSB0aGUgbGVuZ3RoIG9mXG4gKiB0aGUgYFJlYWRvbmx5QXJyYXlgLiBOb3RlIHRoYXQgYGNodW5rc09mKG4pKFtdKWAgaXMgYFtdYCwgbm90IGBbW11dYC4gVGhpcyBpcyBpbnRlbnRpb25hbCwgYW5kIGlzIGNvbnNpc3RlbnQgd2l0aCBhIHJlY3Vyc2l2ZVxuICogZGVmaW5pdGlvbiBvZiBgY2h1bmtzT2ZgOyBpdCBzYXRpc2ZpZXMgdGhlIHByb3BlcnR5IHRoYXQ6XG4gKlxuICogYGBgdHNcbiAqIGNodW5rc09mKG4pKHhzKS5jb25jYXQoY2h1bmtzT2YobikoeXMpKSA9PSBjaHVua3NPZihuKSh4cy5jb25jYXQoeXMpKSlcbiAqIGBgYFxuICpcbiAqIHdoZW5ldmVyIGBuYCBldmVubHkgZGl2aWRlcyB0aGUgbGVuZ3RoIG9mIGBhc2AuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGNodW5rc09mIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNodW5rc09mKDIpKFsxLCAyLCAzLCA0LCA1XSksIFtbMSwgMl0sIFszLCA0XSwgWzVdXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIGNodW5rc09mID0gZnVuY3Rpb24gKG4pIHtcbiAgICB2YXIgZiA9IFJORUEuY2h1bmtzT2Yobik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKCgwLCBleHBvcnRzLmlzTm9uRW1wdHkpKGFzKSA/IGYoYXMpIDogZXhwb3J0cy5lbXB0eSk7IH07XG59O1xuZXhwb3J0cy5jaHVua3NPZiA9IGNodW5rc09mO1xuLyoqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgZnJvbU9wdGlvbksgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmZyb21PcHRpb24pKGYuYXBwbHkodm9pZCAwLCBhKSk7XG4gICAgfTtcbn07XG5leHBvcnRzLmZyb21PcHRpb25LID0gZnJvbU9wdGlvbks7XG5mdW5jdGlvbiBjb21wcmVoZW5zaW9uKGlucHV0LCBmLCBnKSB7XG4gICAgaWYgKGcgPT09IHZvaWQgMCkgeyBnID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfTsgfVxuICAgIHZhciBnbyA9IGZ1bmN0aW9uIChzY29wZSwgaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTm9uRW1wdHkpKGlucHV0KVxuICAgICAgICAgICAgPyAoMCwgZXhwb3J0cy5mbGF0TWFwKShSTkVBLmhlYWQoaW5wdXQpLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZ28oKDAsIGZ1bmN0aW9uXzEucGlwZSkoc2NvcGUsICgwLCBleHBvcnRzLmFwcGVuZCkoYSkpLCBSTkVBLnRhaWwoaW5wdXQpKTsgfSlcbiAgICAgICAgICAgIDogZy5hcHBseSh2b2lkIDAsIHNjb3BlKSA/IFtmLmFwcGx5KHZvaWQgMCwgc2NvcGUpXVxuICAgICAgICAgICAgICAgIDogZXhwb3J0cy5lbXB0eTtcbiAgICB9O1xuICAgIHJldHVybiBnbyhleHBvcnRzLmVtcHR5LCBpbnB1dCk7XG59XG5leHBvcnRzLmNvbXByZWhlbnNpb24gPSBjb21wcmVoZW5zaW9uO1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBjb25jYXRXID0gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmlzRW1wdHkpKGZpcnN0KSA/IHNlY29uZCA6ICgwLCBleHBvcnRzLmlzRW1wdHkpKHNlY29uZCkgPyBmaXJzdCA6IGZpcnN0LmNvbmNhdChzZWNvbmQpO1xuICAgIH07XG59O1xuZXhwb3J0cy5jb25jYXRXID0gY29uY2F0Vztcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnRzLmNvbmNhdCA9IGV4cG9ydHMuY29uY2F0VztcbmZ1bmN0aW9uIHVuaW9uKEUpIHtcbiAgICB2YXIgdW5pb25FID0gUk5FQS51bmlvbihFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgaWYgKHNlY29uZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgdW5pb25FXzEgPSB1bmlvbihFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7IHJldHVybiB1bmlvbkVfMShzZWNvbmQsIGZpcnN0KTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNOb25FbXB0eSkoZmlyc3QpICYmICgwLCBleHBvcnRzLmlzTm9uRW1wdHkpKHNlY29uZCkgPyB1bmlvbkUoc2Vjb25kKShmaXJzdCkgOiAoMCwgZXhwb3J0cy5pc05vbkVtcHR5KShmaXJzdCkgPyBmaXJzdCA6IHNlY29uZDtcbiAgICB9O1xufVxuZXhwb3J0cy51bmlvbiA9IHVuaW9uO1xuZnVuY3Rpb24gaW50ZXJzZWN0aW9uKEUpIHtcbiAgICB2YXIgZWxlbUUgPSBlbGVtKEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoeHMsIHlzKSB7XG4gICAgICAgIGlmICh5cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgaW50ZXJzZWN0aW9uRV8xID0gaW50ZXJzZWN0aW9uKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh5cykgeyByZXR1cm4gaW50ZXJzZWN0aW9uRV8xKHlzLCB4cyk7IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHhzLmZpbHRlcihmdW5jdGlvbiAoYSkgeyByZXR1cm4gZWxlbUUoYSwgeXMpOyB9KTtcbiAgICB9O1xufVxuZXhwb3J0cy5pbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3Rpb247XG5mdW5jdGlvbiBkaWZmZXJlbmNlKEUpIHtcbiAgICB2YXIgZWxlbUUgPSBlbGVtKEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoeHMsIHlzKSB7XG4gICAgICAgIGlmICh5cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZGlmZmVyZW5jZUVfMSA9IGRpZmZlcmVuY2UoRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHlzKSB7IHJldHVybiBkaWZmZXJlbmNlRV8xKHlzLCB4cyk7IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHhzLmZpbHRlcihmdW5jdGlvbiAoYSkgeyByZXR1cm4gIWVsZW1FKGEsIHlzKTsgfSk7XG4gICAgfTtcbn1cbmV4cG9ydHMuZGlmZmVyZW5jZSA9IGRpZmZlcmVuY2U7XG52YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLm1hcCkoZikpOyB9O1xudmFyIF9tYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5tYXBXaXRoSW5kZXgpKGYpKTsgfTtcbnZhciBfYXAgPSBmdW5jdGlvbiAoZmFiLCBmYSkgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmFiLCAoMCwgZXhwb3J0cy5hcCkoZmEpKTsgfTtcbnZhciBfZmlsdGVyID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLmZpbHRlcikocHJlZGljYXRlKSk7XG59O1xudmFyIF9maWx0ZXJNYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5maWx0ZXJNYXApKGYpKTsgfTtcbnZhciBfcGFydGl0aW9uID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLnBhcnRpdGlvbikocHJlZGljYXRlKSk7XG59O1xudmFyIF9wYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5wYXJ0aXRpb25NYXApKGYpKTsgfTtcbnZhciBfcGFydGl0aW9uV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGVXaXRoSW5kZXgpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5wYXJ0aXRpb25XaXRoSW5kZXgpKHByZWRpY2F0ZVdpdGhJbmRleCkpOyB9O1xudmFyIF9wYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5wYXJ0aXRpb25NYXBXaXRoSW5kZXgpKGYpKTsgfTtcbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMuYWx0KSh0aGF0KSk7IH07XG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLnJlZHVjZSkoYiwgZikpOyB9O1xudmFyIF9mb2xkTWFwID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcE0gPSAoMCwgZXhwb3J0cy5mb2xkTWFwKShNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbnZhciBfcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5yZWR1Y2VSaWdodCkoYiwgZikpOyB9O1xudmFyIF9yZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLnJlZHVjZVdpdGhJbmRleCkoYiwgZikpO1xufTtcbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gKDAsIGV4cG9ydHMuZm9sZE1hcFdpdGhJbmRleCkoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsIGZvbGRNYXBXaXRoSW5kZXhNKGYpKTsgfTtcbn07XG52YXIgX3JlZHVjZVJpZ2h0V2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5yZWR1Y2VSaWdodFdpdGhJbmRleCkoYiwgZikpO1xufTtcbnZhciBfZmlsdGVyTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMuZmlsdGVyTWFwV2l0aEluZGV4KShmKSk7IH07XG52YXIgX2ZpbHRlcldpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlV2l0aEluZGV4KSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMuZmlsdGVyV2l0aEluZGV4KShwcmVkaWNhdGVXaXRoSW5kZXgpKTsgfTtcbnZhciBfZXh0ZW5kID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMuZXh0ZW5kKShmKSk7IH07XG52YXIgX3RyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gKDAsIGV4cG9ydHMudHJhdmVyc2UpKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKHRhLCB0cmF2ZXJzZUYoZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gKDAsIGV4cG9ydHMudHJhdmVyc2VXaXRoSW5kZXgpKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKHRhLCB0cmF2ZXJzZVdpdGhJbmRleEYoZikpOyB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBfY2hhaW5SZWNEZXB0aEZpcnN0ID0gZnVuY3Rpb24gKGEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGEsICgwLCBleHBvcnRzLmNoYWluUmVjRGVwdGhGaXJzdCkoZikpOyB9O1xuZXhwb3J0cy5fY2hhaW5SZWNEZXB0aEZpcnN0ID0gX2NoYWluUmVjRGVwdGhGaXJzdDtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBfY2hhaW5SZWNCcmVhZHRoRmlyc3QgPSBmdW5jdGlvbiAoYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoYSwgKDAsIGV4cG9ydHMuY2hhaW5SZWNCcmVhZHRoRmlyc3QpKGYpKTsgfTtcbmV4cG9ydHMuX2NoYWluUmVjQnJlYWR0aEZpcnN0ID0gX2NoYWluUmVjQnJlYWR0aEZpcnN0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0cy5vZiA9IFJORUEub2Y7XG4vKipcbiAqIEBzaW5jZSAyLjcuMFxuICovXG52YXIgemVybyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV4cG9ydHMuZW1wdHk7IH07XG5leHBvcnRzLnplcm8gPSB6ZXJvO1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgYWx0YF0oI2FsdCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUkEgZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSQS5hbHRXKCgpID0+IFsnYScsICdiJ10pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCAnYScsICdiJ11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG52YXIgYWx0VyA9IGZ1bmN0aW9uICh0aGF0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gZmEuY29uY2F0KHRoYXQoKSk7XG4gICAgfTtcbn07XG5leHBvcnRzLmFsdFcgPSBhbHRXO1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlBcnJheWAgY29uY2F0ZW5hdGVzIHRoZSBpbnB1dHMgaW50byBhIHNpbmdsZSBhcnJheS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUkEgZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSQS5hbHQoKCkgPT4gWzQsIDVdKVxuICogICApLFxuICogICBbMSwgMiwgMywgNCwgNV1cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmFsdCA9IGV4cG9ydHMuYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBhcCA9IGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5mbGF0TWFwKShmdW5jdGlvbiAoZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLm1hcCkoZikpOyB9KTtcbn07XG5leHBvcnRzLmFwID0gYXA7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIFJBLmZsYXRNYXAoKG4pID0+IFtgYSR7bn1gLCBgYiR7bn1gXSlcbiAqICAgKSxcbiAqICAgWydhMScsICdiMScsICdhMicsICdiMicsICdhMycsICdiMyddXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSQS5mbGF0TWFwKCgpID0+IFtdKVxuICogICApLFxuICogICBbXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydHMuZmxhdE1hcCA9ICgwLCBmdW5jdGlvbl8xLmR1YWwpKDIsIGZ1bmN0aW9uIChtYSwgZikge1xuICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShtYSwgKDAsIGV4cG9ydHMuY2hhaW5XaXRoSW5kZXgpKGZ1bmN0aW9uIChpLCBhKSB7IHJldHVybiBmKGEsIGkpOyB9KSk7XG59KTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmZsYXR0ZW4gPSAoMCwgZXhwb3J0cy5mbGF0TWFwKShmdW5jdGlvbl8xLmlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGZhLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKTsgfSk7XG59OyB9O1xuZXhwb3J0cy5tYXAgPSBtYXA7XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIG1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gZmEubWFwKGZ1bmN0aW9uIChhLCBpKSB7IHJldHVybiBmKGksIGEpOyB9KTtcbn07IH07XG5leHBvcnRzLm1hcFdpdGhJbmRleCA9IG1hcFdpdGhJbmRleDtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBzZXBhcmF0ZSA9IGZ1bmN0aW9uIChmYSkge1xuICAgIHZhciBsZWZ0ID0gW107XG4gICAgdmFyIHJpZ2h0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwLCBmYV8xID0gZmE7IF9pIDwgZmFfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGUgPSBmYV8xW19pXTtcbiAgICAgICAgaWYgKGUuX3RhZyA9PT0gJ0xlZnQnKSB7XG4gICAgICAgICAgICBsZWZ0LnB1c2goZS5sZWZ0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJpZ2h0LnB1c2goZS5yaWdodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICgwLCBTZXBhcmF0ZWRfMS5zZXBhcmF0ZWQpKGxlZnQsIHJpZ2h0KTtcbn07XG5leHBvcnRzLnNlcGFyYXRlID0gc2VwYXJhdGU7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgZmlsdGVyID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLmZpbHRlcihwcmVkaWNhdGUpO1xuICAgIH07XG59O1xuZXhwb3J0cy5maWx0ZXIgPSBmaWx0ZXI7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgZmlsdGVyTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbkIgPSBmKGksIGZhW2ldKTtcbiAgICAgICAgICAgIGlmIChfLmlzU29tZShvcHRpb25CKSkge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKG9wdGlvbkIudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG5leHBvcnRzLmZpbHRlck1hcFdpdGhJbmRleCA9IGZpbHRlck1hcFdpdGhJbmRleDtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBmaWx0ZXJNYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5maWx0ZXJNYXBXaXRoSW5kZXgpKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG5leHBvcnRzLmZpbHRlck1hcCA9IGZpbHRlck1hcDtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydHMuY29tcGFjdCA9ICgwLCBleHBvcnRzLmZpbHRlck1hcCkoZnVuY3Rpb25fMS5pZGVudGl0eSk7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5wYXJ0aXRpb25XaXRoSW5kZXgpKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBwcmVkaWNhdGUoYSk7IH0pO1xufTtcbmV4cG9ydHMucGFydGl0aW9uID0gcGFydGl0aW9uO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIHBhcnRpdGlvbldpdGhJbmRleCA9IGZ1bmN0aW9uIChwcmVkaWNhdGVXaXRoSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBsZWZ0ID0gW107XG4gICAgICAgIHZhciByaWdodCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZVdpdGhJbmRleChpLCBhKSkge1xuICAgICAgICAgICAgICAgIHJpZ2h0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZWZ0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgwLCBTZXBhcmF0ZWRfMS5zZXBhcmF0ZWQpKGxlZnQsIHJpZ2h0KTtcbiAgICB9O1xufTtcbmV4cG9ydHMucGFydGl0aW9uV2l0aEluZGV4ID0gcGFydGl0aW9uV2l0aEluZGV4O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIHBhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLnBhcnRpdGlvbk1hcFdpdGhJbmRleCkoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbmV4cG9ydHMucGFydGl0aW9uTWFwID0gcGFydGl0aW9uTWFwO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIHBhcnRpdGlvbk1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgbGVmdCA9IFtdO1xuICAgICAgICB2YXIgcmlnaHQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGUgPSBmKGksIGZhW2ldKTtcbiAgICAgICAgICAgIGlmIChlLl90YWcgPT09ICdMZWZ0Jykge1xuICAgICAgICAgICAgICAgIGxlZnQucHVzaChlLmxlZnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmlnaHQucHVzaChlLnJpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDAsIFNlcGFyYXRlZF8xLnNlcGFyYXRlZCkobGVmdCwgcmlnaHQpO1xuICAgIH07XG59O1xuZXhwb3J0cy5wYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBwYXJ0aXRpb25NYXBXaXRoSW5kZXg7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlV2l0aEluZGV4KGksIGEpOyB9KTtcbiAgICB9O1xufTtcbmV4cG9ydHMuZmlsdGVyV2l0aEluZGV4ID0gZmlsdGVyV2l0aEluZGV4O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIGV4dGVuZCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAod2EpIHtcbiAgICByZXR1cm4gd2EubWFwKGZ1bmN0aW9uIChfLCBpKSB7IHJldHVybiBmKHdhLnNsaWNlKGkpKTsgfSk7XG59OyB9O1xuZXhwb3J0cy5leHRlbmQgPSBleHRlbmQ7XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmR1cGxpY2F0ZSA9ICgwLCBleHBvcnRzLmV4dGVuZCkoZnVuY3Rpb25fMS5pZGVudGl0eSk7XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIGZvbGRNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoTSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgICAgICByZXR1cm4gZmEucmVkdWNlKGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBNLmNvbmNhdChiLCBmKGksIGEpKTsgfSwgTS5lbXB0eSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG5leHBvcnRzLmZvbGRNYXBXaXRoSW5kZXggPSBmb2xkTWFwV2l0aEluZGV4O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciByZWR1Y2UgPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5yZWR1Y2VXaXRoSW5kZXgpKGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG5leHBvcnRzLnJlZHVjZSA9IHJlZHVjZTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gKDAsIGV4cG9ydHMuZm9sZE1hcFdpdGhJbmRleCkoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmb2xkTWFwV2l0aEluZGV4TShmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG59O1xuZXhwb3J0cy5mb2xkTWFwID0gZm9sZE1hcDtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHZhciBsZW4gPSBmYS5sZW5ndGg7XG4gICAgdmFyIG91dCA9IGI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBvdXQgPSBmKGksIG91dCwgZmFbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTsgfTtcbmV4cG9ydHMucmVkdWNlV2l0aEluZGV4ID0gcmVkdWNlV2l0aEluZGV4O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLnJlZHVjZVJpZ2h0V2l0aEluZGV4KShiLCBmdW5jdGlvbiAoXywgYSwgYikgeyByZXR1cm4gZihhLCBiKTsgfSk7XG59O1xuZXhwb3J0cy5yZWR1Y2VSaWdodCA9IHJlZHVjZVJpZ2h0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciByZWR1Y2VSaWdodFdpdGhJbmRleCA9IGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gZmEucmVkdWNlUmlnaHQoZnVuY3Rpb24gKGIsIGEsIGkpIHsgcmV0dXJuIGYoaSwgYSwgYik7IH0sIGIpO1xufTsgfTtcbmV4cG9ydHMucmVkdWNlUmlnaHRXaXRoSW5kZXggPSByZWR1Y2VSaWdodFdpdGhJbmRleDtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG52YXIgdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleEYgPSAoMCwgZXhwb3J0cy50cmF2ZXJzZVdpdGhJbmRleCkoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbmV4cG9ydHMudHJhdmVyc2UgPSB0cmF2ZXJzZTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG52YXIgc2VxdWVuY2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHtcbiAgICAgICAgcmV0dXJuIF9yZWR1Y2UodGEsIEYub2YoKDAsIGV4cG9ydHMuemVybykoKSksIGZ1bmN0aW9uIChmYXMsIGZhKSB7XG4gICAgICAgICAgICByZXR1cm4gRi5hcChGLm1hcChmYXMsIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFzLCAoMCwgZXhwb3J0cy5hcHBlbmQpKGEpKTsgfTsgfSksIGZhKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn07XG5leHBvcnRzLnNlcXVlbmNlID0gc2VxdWVuY2U7XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xudmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLnJlZHVjZVdpdGhJbmRleCkoRi5vZigoMCwgZXhwb3J0cy56ZXJvKSgpKSwgZnVuY3Rpb24gKGksIGZicywgYSkge1xuICAgICAgICAgICAgcmV0dXJuIEYuYXAoRi5tYXAoZmJzLCBmdW5jdGlvbiAoYnMpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShicywgKDAsIGV4cG9ydHMuYXBwZW5kKShiKSk7IH07IH0pLCBmKGksIGEpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn07XG5leHBvcnRzLnRyYXZlcnNlV2l0aEluZGV4ID0gdHJhdmVyc2VXaXRoSW5kZXg7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG52YXIgd2l0aGVyID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpdGhlckYgPSBfd2l0aGVyKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2l0aGVyRihmYSwgZik7IH07IH07XG59O1xuZXhwb3J0cy53aXRoZXIgPSB3aXRoZXI7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG52YXIgd2lsdCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aWx0RiA9IF93aWx0KEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2lsdEYoZmEsIGYpOyB9OyB9O1xufTtcbmV4cG9ydHMud2lsdCA9IHdpbHQ7XG4vKipcbiAqIEBzaW5jZSAyLjYuNlxuICovXG52YXIgdW5mb2xkID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgdmFyIGJiID0gYjtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIG10ID0gZihiYik7XG4gICAgICAgIGlmIChfLmlzU29tZShtdCkpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IG10LnZhbHVlLCBhID0gX2FbMF0sIGJfMSA9IF9hWzFdO1xuICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICBiYiA9IGJfMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuZXhwb3J0cy51bmZvbGQgPSB1bmZvbGQ7XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLlVSSSA9ICdSZWFkb25seUFycmF5Jztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBnZXRTaG93ID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgc2hvdzogZnVuY3Rpb24gKGFzKSB7IHJldHVybiBcIltcIi5jb25jYXQoYXMubWFwKFMuc2hvdykuam9pbignLCAnKSwgXCJdXCIpOyB9XG59KTsgfTtcbmV4cG9ydHMuZ2V0U2hvdyA9IGdldFNob3c7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgZ2V0U2VtaWdyb3VwID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiAoKDAsIGV4cG9ydHMuaXNFbXB0eSkoZmlyc3QpID8gc2Vjb25kIDogKDAsIGV4cG9ydHMuaXNFbXB0eSkoc2Vjb25kKSA/IGZpcnN0IDogZmlyc3QuY29uY2F0KHNlY29uZCkpOyB9XG59KTsgfTtcbmV4cG9ydHMuZ2V0U2VtaWdyb3VwID0gZ2V0U2VtaWdyb3VwO1xuLyoqXG4gKiBSZXR1cm5zIGEgYE1vbm9pZGAgZm9yIGBSZWFkb25seUFycmF5PEE+YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBjb25zdCBNID0gZ2V0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChbMSwgMl0sIFszLCA0XSksIFsxLCAyLCAzLCA0XSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiAoMCwgZXhwb3J0cy5nZXRTZW1pZ3JvdXApKCkuY29uY2F0LFxuICAgIGVtcHR5OiBleHBvcnRzLmVtcHR5XG59KTsgfTtcbmV4cG9ydHMuZ2V0TW9ub2lkID0gZ2V0TW9ub2lkO1xuLyoqXG4gKiBEZXJpdmVzIGFuIGBFcWAgb3ZlciB0aGUgYFJlYWRvbmx5QXJyYXlgIG9mIGEgZ2l2ZW4gZWxlbWVudCB0eXBlIGZyb20gdGhlIGBFcWAgb2YgdGhhdCB0eXBlLiBUaGUgZGVyaXZlZCBgRXFgIGRlZmluZXMgdHdvXG4gKiBhcnJheXMgYXMgZXF1YWwgaWYgYWxsIGVsZW1lbnRzIG9mIGJvdGggYXJyYXlzIGFyZSBjb21wYXJlZCBlcXVhbCBwYWlyd2lzZSB3aXRoIHRoZSBnaXZlbiBgRWAuIEluIGNhc2Ugb2YgYXJyYXlzIG9mXG4gKiBkaWZmZXJlbnQgbGVuZ3RocywgdGhlIHJlc3VsdCBpcyBub24gZXF1YWxpdHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgZ2V0RXEgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGNvbnN0IEUgPSBnZXRFcShTLkVxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsnYScsICdiJ10sIFsnYScsICdiJ10pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsnYSddLCBbXSksIGZhbHNlKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiAoMCwgRXFfMS5mcm9tRXF1YWxzKShmdW5jdGlvbiAoeHMsIHlzKSB7IHJldHVybiB4cy5sZW5ndGggPT09IHlzLmxlbmd0aCAmJiB4cy5ldmVyeShmdW5jdGlvbiAoeCwgaSkgeyByZXR1cm4gRS5lcXVhbHMoeCwgeXNbaV0pOyB9KTsgfSk7XG59O1xuZXhwb3J0cy5nZXRFcSA9IGdldEVxO1xuLyoqXG4gKiBEZXJpdmVzIGFuIGBPcmRgIG92ZXIgdGhlIGBSZWFkb25seUFycmF5YCBvZiBhIGdpdmVuIGVsZW1lbnQgdHlwZSBmcm9tIHRoZSBgT3JkYCBvZiB0aGF0IHR5cGUuIFRoZSBvcmRlcmluZyBiZXR3ZWVuIHR3byBzdWNoXG4gKiBhcnJheXMgaXMgZXF1YWwgdG86IHRoZSBmaXJzdCBub24gZXF1YWwgY29tcGFyaXNvbiBvZiBlYWNoIGFycmF5cyBlbGVtZW50cyB0YWtlbiBwYWlyd2lzZSBpbiBpbmNyZWFzaW5nIG9yZGVyLCBpblxuICogY2FzZSBvZiBlcXVhbGl0eSBvdmVyIGFsbCB0aGUgcGFpcndpc2UgZWxlbWVudHM7IHRoZSBsb25nZXN0IGFycmF5IGlzIGNvbnNpZGVyZWQgdGhlIGdyZWF0ZXN0LCBpZiBib3RoIGFycmF5cyBoYXZlXG4gKiB0aGUgc2FtZSBsZW5ndGgsIHRoZSByZXN1bHQgaXMgZXF1YWxpdHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldE9yZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBjb25zdCBPID0gZ2V0T3JkKFMuT3JkKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShbJ2InXSwgWydhJ10pLCAxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShbJ2EnXSwgWydhJ10pLCAwKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShbJ2EnXSwgWydiJ10pLCAtMSlcbiAqXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBnZXRPcmQgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiAoMCwgT3JkXzEuZnJvbUNvbXBhcmUpKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHZhciBhTGVuID0gYS5sZW5ndGg7XG4gICAgICAgIHZhciBiTGVuID0gYi5sZW5ndGg7XG4gICAgICAgIHZhciBsZW4gPSBNYXRoLm1pbihhTGVuLCBiTGVuKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIG9yZGVyaW5nID0gTy5jb21wYXJlKGFbaV0sIGJbaV0pO1xuICAgICAgICAgICAgaWYgKG9yZGVyaW5nICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yZGVyaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOLk9yZC5jb21wYXJlKGFMZW4sIGJMZW4pO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuZ2V0T3JkID0gZ2V0T3JkO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuZXhwb3J0cy5nZXRVbmlvblNlbWlncm91cCA9IGdldFVuaW9uU2VtaWdyb3VwO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBnZXRVbmlvbk1vbm9pZCA9IGZ1bmN0aW9uIChFKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogKDAsIGV4cG9ydHMuZ2V0VW5pb25TZW1pZ3JvdXApKEUpLmNvbmNhdCxcbiAgICBlbXB0eTogZXhwb3J0cy5lbXB0eVxufSk7IH07XG5leHBvcnRzLmdldFVuaW9uTW9ub2lkID0gZ2V0VW5pb25Nb25vaWQ7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIGdldEludGVyc2VjdGlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIGludGVyc2VjdGlvbkUgPSBpbnRlcnNlY3Rpb24oRSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gaW50ZXJzZWN0aW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuZXhwb3J0cy5nZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAgPSBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXA7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIGdldERpZmZlcmVuY2VNYWdtYSA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIGRpZmZlcmVuY2VFID0gZGlmZmVyZW5jZShFKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBkaWZmZXJlbmNlRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuZXhwb3J0cy5nZXREaWZmZXJlbmNlTWFnbWEgPSBnZXREaWZmZXJlbmNlTWFnbWE7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkZ1bmN0b3IgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMuZmxhcCA9ICgwLCBGdW5jdG9yXzEuZmxhcCkoZXhwb3J0cy5GdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLlBvaW50ZWQgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBvZjogZXhwb3J0cy5vZlxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuRnVuY3RvcldpdGhJbmRleCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5BcHBseSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwXG59O1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmFwRmlyc3QgPSAoMCwgQXBwbHlfMS5hcEZpcnN0KShleHBvcnRzLkFwcGx5KTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBzZWNvbmQuXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydHMuYXBTZWNvbmQgPSAoMCwgQXBwbHlfMS5hcFNlY29uZCkoZXhwb3J0cy5BcHBseSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkFwcGxpY2F0aXZlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IGV4cG9ydHMub2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5DaGFpbiA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBleHBvcnRzLmZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLk1vbmFkID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IGV4cG9ydHMub2YsXG4gICAgY2hhaW46IGV4cG9ydHMuZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIFJBLmNoYWluRmlyc3QoKCkgPT4gW10pXG4gKiAgICksXG4gKiAgIFtdXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmNoYWluRmlyc3QgPSBcbi8qI19fUFVSRV9fKi8gKDAsIENoYWluXzEuY2hhaW5GaXJzdCkoZXhwb3J0cy5DaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLlVuZm9sZGFibGUgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICB1bmZvbGQ6IGV4cG9ydHMudW5mb2xkXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5BbHQgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydHMuWmVybyA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIHplcm86IGV4cG9ydHMuemVyb1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydHMuZ3VhcmQgPSAoMCwgWmVyb18xLmd1YXJkKShleHBvcnRzLlplcm8sIGV4cG9ydHMuUG9pbnRlZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkFsdGVybmF0aXZlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IGV4cG9ydHMub2YsXG4gICAgYWx0OiBfYWx0LFxuICAgIHplcm86IGV4cG9ydHMuemVyb1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuRXh0ZW5kID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGV4dGVuZDogX2V4dGVuZFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuQ29tcGFjdGFibGUgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBjb21wYWN0OiBleHBvcnRzLmNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IGV4cG9ydHMuc2VwYXJhdGVcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkZpbHRlcmFibGUgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgY29tcGFjdDogZXhwb3J0cy5jb21wYWN0LFxuICAgIHNlcGFyYXRlOiBleHBvcnRzLnNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuRmlsdGVyYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgY29tcGFjdDogZXhwb3J0cy5jb21wYWN0LFxuICAgIHNlcGFyYXRlOiBleHBvcnRzLnNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IF9wYXJ0aXRpb25NYXBXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uV2l0aEluZGV4OiBfcGFydGl0aW9uV2l0aEluZGV4LFxuICAgIGZpbHRlck1hcFdpdGhJbmRleDogX2ZpbHRlck1hcFdpdGhJbmRleCxcbiAgICBmaWx0ZXJXaXRoSW5kZXg6IF9maWx0ZXJXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkZvbGRhYmxlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHRcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkZvbGRhYmxlV2l0aEluZGV4ID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLlRyYXZlcnNhYmxlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IGV4cG9ydHMuc2VxdWVuY2Vcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLlRyYXZlcnNhYmxlV2l0aEluZGV4ID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBleHBvcnRzLnNlcXVlbmNlLFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBjaGFpblJlY0RlcHRoRmlyc3QgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgICB2YXIgdG9kbyA9IF9fc3ByZWFkQXJyYXkoW10sIGYoYSksIHRydWUpO1xuICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgIHdoaWxlICh0b2RvLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBlID0gdG9kby5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKF8uaXNMZWZ0KGUpKSB7XG4gICAgICAgICAgICAgICAgdG9kby51bnNoaWZ0LmFwcGx5KHRvZG8sIGYoZS5sZWZ0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChlLnJpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuZXhwb3J0cy5jaGFpblJlY0RlcHRoRmlyc3QgPSBjaGFpblJlY0RlcHRoRmlyc3Q7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0cy5DaGFpblJlY0RlcHRoRmlyc3QgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZXhwb3J0cy5mbGF0TWFwLFxuICAgIGNoYWluUmVjOiBleHBvcnRzLl9jaGFpblJlY0RlcHRoRmlyc3Rcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBjaGFpblJlY0JyZWFkdGhGaXJzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHZhciBpbml0aWFsID0gZihhKTtcbiAgICAgICAgdmFyIHRvZG8gPSBbXTtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICBmdW5jdGlvbiBnbyhlKSB7XG4gICAgICAgICAgICBpZiAoXy5pc0xlZnQoZSkpIHtcbiAgICAgICAgICAgICAgICBmKGUubGVmdCkuZm9yRWFjaChmdW5jdGlvbiAodikgeyByZXR1cm4gdG9kby5wdXNoKHYpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGUucmlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgaW5pdGlhbF8xID0gaW5pdGlhbDsgX2kgPCBpbml0aWFsXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgZSA9IGluaXRpYWxfMVtfaV07XG4gICAgICAgICAgICBnbyhlKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodG9kby5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBnbyh0b2RvLnNoaWZ0KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG5leHBvcnRzLmNoYWluUmVjQnJlYWR0aEZpcnN0ID0gY2hhaW5SZWNCcmVhZHRoRmlyc3Q7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0cy5DaGFpblJlY0JyZWFkdGhGaXJzdCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBleHBvcnRzLmZsYXRNYXAsXG4gICAgY2hhaW5SZWM6IGV4cG9ydHMuX2NoYWluUmVjQnJlYWR0aEZpcnN0XG59O1xudmFyIF93aXRoZXIgPSAvKiNfX1BVUkVfXyovICgwLCBXaXRoZXJhYmxlXzEud2l0aGVyRGVmYXVsdCkoZXhwb3J0cy5UcmF2ZXJzYWJsZSwgZXhwb3J0cy5Db21wYWN0YWJsZSk7XG52YXIgX3dpbHQgPSAvKiNfX1BVUkVfXyovICgwLCBXaXRoZXJhYmxlXzEud2lsdERlZmF1bHQpKGV4cG9ydHMuVHJhdmVyc2FibGUsIGV4cG9ydHMuQ29tcGFjdGFibGUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5XaXRoZXJhYmxlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGV4cG9ydHMuY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogZXhwb3J0cy5zZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogZXhwb3J0cy5zZXF1ZW5jZSxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4vKipcbiAqIEZpbHRlciB2YWx1ZXMgaW5zaWRlIGEgY29udGV4dC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICogaW1wb3J0ICogYXMgUkEgZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIFQgZnJvbSAnZnAtdHMvVGFzaydcbiAqXG4gKiBjb25zdCBmaWx0ZXJFID0gUkEuZmlsdGVyRShULkFwcGxpY2F0aXZlUGFyKVxuICogYXN5bmMgZnVuY3Rpb24gdGVzdCgpIHtcbiAqICAgYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgICBhd2FpdCBwaXBlKFxuICogICAgICAgWy0xLCAyLCAzXSxcbiAqICAgICAgIGZpbHRlckUoKG4pID0+IFQub2YobiA+IDApKVxuICogICAgICkoKSxcbiAqICAgICBbMiwgM11cbiAqICAgKVxuICogfVxuICogdGVzdCgpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnRzLmZpbHRlckUgPSAoMCwgV2l0aGVyYWJsZV8xLmZpbHRlckUpKGV4cG9ydHMuV2l0aGVyYWJsZSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0cy5Gcm9tRWl0aGVyID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgZnJvbUVpdGhlcjogZXhwb3J0cy5mcm9tRWl0aGVyXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnRzLmZyb21FaXRoZXJLID0gKDAsIEZyb21FaXRoZXJfMS5mcm9tRWl0aGVySykoZXhwb3J0cy5Gcm9tRWl0aGVyKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHVuc2FmZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgdW5zYWZlXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0cy51bnNhZmVJbnNlcnRBdCA9IFJORUEudW5zYWZlSW5zZXJ0QXQ7XG4vKipcbiAqIEBjYXRlZ29yeSB1bnNhZmVcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgdW5zYWZlVXBkYXRlQXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNOb25FbXB0eSkoYXMpID8gUk5FQS51bnNhZmVVcGRhdGVBdChpLCBhLCBhcykgOiBhcztcbn07XG5leHBvcnRzLnVuc2FmZVVwZGF0ZUF0ID0gdW5zYWZlVXBkYXRlQXQ7XG4vKipcbiAqIEBjYXRlZ29yeSB1bnNhZmVcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgdW5zYWZlRGVsZXRlQXQgPSBmdW5jdGlvbiAoaSwgYXMpIHtcbiAgICB2YXIgeHMgPSBhcy5zbGljZSgpO1xuICAgIHhzLnNwbGljZShpLCAxKTtcbiAgICByZXR1cm4geHM7XG59O1xuZXhwb3J0cy51bnNhZmVEZWxldGVBdCA9IHVuc2FmZURlbGV0ZUF0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgdG9BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMuc2xpY2UoKTsgfTtcbmV4cG9ydHMudG9BcnJheSA9IHRvQXJyYXk7XG4vKipcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBmcm9tQXJyYXkgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuICgoMCwgZXhwb3J0cy5pc0VtcHR5KShhcykgPyBleHBvcnRzLmVtcHR5IDogYXMuc2xpY2UoKSk7IH07XG5leHBvcnRzLmZyb21BcnJheSA9IGZyb21BcnJheTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFuIGVtcHR5IGFycmF5XG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydHMuZW1wdHkgPSBSTkVBLmVtcHR5O1xuZnVuY3Rpb24gZXZlcnkocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMuZXZlcnkocHJlZGljYXRlKTsgfTtcbn1cbmV4cG9ydHMuZXZlcnkgPSBldmVyeTtcbi8qKlxuICogQ2hlY2sgaWYgYSBwcmVkaWNhdGUgaG9sZHMgdHJ1ZSBmb3IgYW55IGFycmF5IG1lbWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgaXNQb3NpdGl2ZSA9IChuOiBudW1iZXIpOiBib29sZWFuID0+IG4gPiAwXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFstMSwgLTIsIDNdLCBzb21lKGlzUG9zaXRpdmUpKSwgdHJ1ZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbLTEsIC0yLCAtM10sIHNvbWUoaXNQb3NpdGl2ZSkpLCBmYWxzZSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xudmFyIHNvbWUgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMuc29tZShwcmVkaWNhdGUpO1xuICAgIH07XG59O1xuZXhwb3J0cy5zb21lID0gc29tZTtcbi8qKlxuICogQWxpYXMgb2YgW2Bzb21lYF0oI3NvbWUpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnRzLmV4aXN0cyA9IGV4cG9ydHMuc29tZTtcbi8qKlxuICogUGxhY2VzIGFuIGVsZW1lbnQgaW4gYmV0d2VlbiBtZW1iZXJzIG9mIGEgYFJlYWRvbmx5QXJyYXlgLCB0aGVuIGZvbGRzIHRoZSByZXN1bHRzIHVzaW5nIHRoZSBwcm92aWRlZCBgTW9ub2lkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBpbnRlcmNhbGF0ZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLk1vbm9pZCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xudmFyIGludGVyY2FsYXRlID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgaW50ZXJjYWxhdGVNID0gUk5FQS5pbnRlcmNhbGF0ZShNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1pZGRsZSkgeyByZXR1cm4gKDAsIGV4cG9ydHMubWF0Y2gpKGZ1bmN0aW9uICgpIHsgcmV0dXJuIE0uZW1wdHk7IH0sIGludGVyY2FsYXRlTShtaWRkbGUpKTsgfTtcbn07XG5leHBvcnRzLmludGVyY2FsYXRlID0gaW50ZXJjYWxhdGU7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkbyBub3RhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnRzLkRvID0gKDAsIGV4cG9ydHMub2YpKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnRzLmJpbmRUbyA9ICgwLCBGdW5jdG9yXzEuYmluZFRvKShleHBvcnRzLkZ1bmN0b3IpO1xudmFyIGxldF8gPSAvKiNfX1BVUkVfXyovICgwLCBGdW5jdG9yXzEubGV0KShleHBvcnRzLkZ1bmN0b3IpO1xuZXhwb3J0cy5sZXQgPSBsZXRfO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnRzLmJpbmQgPSAoMCwgQ2hhaW5fMS5iaW5kKShleHBvcnRzLkNoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0cy5hcFMgPSAoMCwgQXBwbHlfMS5hcFMpKGV4cG9ydHMuQXBwbHkpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0cy5jaGFpbiA9IGV4cG9ydHMuZmxhdE1hcDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMucmFuZ2UgPSBSTkVBLnJhbmdlO1xuLyoqXG4gKiBVc2UgW2BwcmVwZW5kYF0oI3ByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5jb25zID0gUk5FQS5jb25zO1xuLyoqXG4gKiBVc2UgW2BhcHBlbmRgXSgjYXBwZW5kKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuc25vYyA9IFJORUEuc25vYztcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMucHJlcGVuZFRvQWxsID0gZXhwb3J0cy5wcmVwZW5kQWxsO1xuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYEZ1bmN0b3JgIGluc3RhbmNlLCBwYXNzIGBSQS5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBSQS5yZWFkb25seUFycmF5YFxuICogKHdoZXJlIGBSQWAgaXMgZnJvbSBgaW1wb3J0IFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLnJlYWRvbmx5QXJyYXkgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBjb21wYWN0OiBleHBvcnRzLmNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IGV4cG9ydHMuc2VwYXJhdGUsXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IGV4cG9ydHMub2YsXG4gICAgY2hhaW46IGV4cG9ydHMuZmxhdE1hcCxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbk1hcFdpdGhJbmRleDogX3BhcnRpdGlvbk1hcFdpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25XaXRoSW5kZXg6IF9wYXJ0aXRpb25XaXRoSW5kZXgsXG4gICAgZmlsdGVyTWFwV2l0aEluZGV4OiBfZmlsdGVyTWFwV2l0aEluZGV4LFxuICAgIGZpbHRlcldpdGhJbmRleDogX2ZpbHRlcldpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHQsXG4gICAgemVybzogZXhwb3J0cy56ZXJvLFxuICAgIHVuZm9sZDogZXhwb3J0cy51bmZvbGQsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogZXhwb3J0cy5zZXF1ZW5jZSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleCxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogX3RyYXZlcnNlV2l0aEluZGV4LFxuICAgIGV4dGVuZDogX2V4dGVuZCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZW5kc1dpdGggPSBleHBvcnRzLnN0YXJ0c1dpdGggPSBleHBvcnRzLmluY2x1ZGVzID0gZXhwb3J0cy5zcGxpdCA9IGV4cG9ydHMuc2l6ZSA9IGV4cG9ydHMuaXNFbXB0eSA9IGV4cG9ydHMuc2xpY2UgPSBleHBvcnRzLnRyaW1SaWdodCA9IGV4cG9ydHMudHJpbUxlZnQgPSBleHBvcnRzLnRyaW0gPSBleHBvcnRzLnJlcGxhY2UgPSBleHBvcnRzLnRvTG93ZXJDYXNlID0gZXhwb3J0cy50b1VwcGVyQ2FzZSA9IGV4cG9ydHMuaXNTdHJpbmcgPSBleHBvcnRzLlNob3cgPSBleHBvcnRzLk9yZCA9IGV4cG9ydHMuTW9ub2lkID0gZXhwb3J0cy5lbXB0eSA9IGV4cG9ydHMuU2VtaWdyb3VwID0gZXhwb3J0cy5FcSA9IHZvaWQgMDtcbnZhciBSZWFkb25seU5vbkVtcHR5QXJyYXlfMSA9IHJlcXVpcmUoXCIuL1JlYWRvbmx5Tm9uRW1wdHlBcnJheVwiKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGluc3RhbmNlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLkVxLmVxdWFscygnYScsICdhJyksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuRXEuZXF1YWxzKCdhJywgJ2InKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLkVxID0ge1xuICAgIGVxdWFsczogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0ID09PSBzZWNvbmQ7IH1cbn07XG4vKipcbiAqIGBzdHJpbmdgIHNlbWlncm91cCB1bmRlciBjb25jYXRlbmF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuU2VtaWdyb3VwLmNvbmNhdCgnYScsICdiJyksICdhYicpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLlNlbWlncm91cCA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBmaXJzdCArIHNlY29uZDsgfVxufTtcbi8qKlxuICogQW4gZW1wdHkgYHN0cmluZ2AuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLmVtcHR5ID0gJyc7XG4vKipcbiAqIGBzdHJpbmdgIG1vbm9pZCB1bmRlciBjb25jYXRlbmF0aW9uLlxuICpcbiAqIFRoZSBgZW1wdHlgIHZhbHVlIGlzIGAnJ2AuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5Nb25vaWQuY29uY2F0KCdhJywgJ2InKSwgJ2FiJylcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5Nb25vaWQuY29uY2F0KCdhJywgUy5Nb25vaWQuZW1wdHkpLCAnYScpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLk1vbm9pZCA9IHtcbiAgICBjb25jYXQ6IGV4cG9ydHMuU2VtaWdyb3VwLmNvbmNhdCxcbiAgICBlbXB0eTogZXhwb3J0cy5lbXB0eVxufTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5PcmQuY29tcGFyZSgnYScsICdhJyksIDApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuT3JkLmNvbXBhcmUoJ2EnLCAnYicpLCAtMSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5PcmQuY29tcGFyZSgnYicsICdhJyksIDEpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLk9yZCA9IHtcbiAgICBlcXVhbHM6IGV4cG9ydHMuRXEuZXF1YWxzLFxuICAgIGNvbXBhcmU6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiAoZmlyc3QgPCBzZWNvbmQgPyAtMSA6IGZpcnN0ID4gc2Vjb25kID8gMSA6IDApOyB9XG59O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLlNob3cuc2hvdygnYScpLCAnXCJhXCInKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5TaG93ID0ge1xuICAgIHNob3c6IGZ1bmN0aW9uIChzKSB7IHJldHVybiBKU09OLnN0cmluZ2lmeShzKTsgfVxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuaXNTdHJpbmcoJ2EnKSwgdHJ1ZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5pc1N0cmluZygxKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBpc1N0cmluZyA9IGZ1bmN0aW9uICh1KSB7IHJldHVybiB0eXBlb2YgdSA9PT0gJ3N0cmluZyc7IH07XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCdhJywgUy50b1VwcGVyQ2FzZSksICdBJylcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciB0b1VwcGVyQ2FzZSA9IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnRvVXBwZXJDYXNlKCk7IH07XG5leHBvcnRzLnRvVXBwZXJDYXNlID0gdG9VcHBlckNhc2U7XG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoJ0EnLCBTLnRvTG93ZXJDYXNlKSwgJ2EnKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIHRvTG93ZXJDYXNlID0gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudG9Mb3dlckNhc2UoKTsgfTtcbmV4cG9ydHMudG9Mb3dlckNhc2UgPSB0b0xvd2VyQ2FzZTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnYWJjJywgUy5yZXBsYWNlKCdiJywgJ2QnKSksICdhZGMnKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIHJlcGxhY2UgPSBmdW5jdGlvbiAoc2VhcmNoVmFsdWUsIHJlcGxhY2VWYWx1ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgICByZXR1cm4gcy5yZXBsYWNlKHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpO1xuICAgIH07XG59O1xuZXhwb3J0cy5yZXBsYWNlID0gcmVwbGFjZTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnIGEgJywgUy50cmltKSwgJ2EnKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIHRyaW0gPSBmdW5jdGlvbiAocykgeyByZXR1cm4gcy50cmltKCk7IH07XG5leHBvcnRzLnRyaW0gPSB0cmltO1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCcgYSAnLCBTLnRyaW1MZWZ0KSwgJ2EgJylcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciB0cmltTGVmdCA9IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnRyaW1MZWZ0KCk7IH07XG5leHBvcnRzLnRyaW1MZWZ0ID0gdHJpbUxlZnQ7XG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoJyBhICcsIFMudHJpbVJpZ2h0KSwgJyBhJylcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciB0cmltUmlnaHQgPSBmdW5jdGlvbiAocykgeyByZXR1cm4gcy50cmltUmlnaHQoKTsgfTtcbmV4cG9ydHMudHJpbVJpZ2h0ID0gdHJpbVJpZ2h0O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCdhYmNkJywgUy5zbGljZSgxLCAzKSksICdiYycpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgc2xpY2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgICByZXR1cm4gcy5zbGljZShzdGFydCwgZW5kKTtcbiAgICB9O1xufTtcbmV4cG9ydHMuc2xpY2UgPSBzbGljZTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIGBzdHJpbmdgIGlzIGVtcHR5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoJycsIFMuaXNFbXB0eSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoJ2EnLCBTLmlzRW1wdHkpLCBmYWxzZSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciBpc0VtcHR5ID0gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMubGVuZ3RoID09PSAwOyB9O1xuZXhwb3J0cy5pc0VtcHR5ID0gaXNFbXB0eTtcbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyBpbiBhIGBzdHJpbmdgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoJ2FiYycsIFMuc2l6ZSksIDMpXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgc2l6ZSA9IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLmxlbmd0aDsgfTtcbmV4cG9ydHMuc2l6ZSA9IHNpemU7XG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoJ2FiYycsIFMuc3BsaXQoJycpKSwgWydhJywgJ2InLCAnYyddKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCcnLCBTLnNwbGl0KCcnKSksIFsnJ10pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgc3BsaXQgPSBmdW5jdGlvbiAoc2VwYXJhdG9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZhciBvdXQgPSBzLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIHJldHVybiAoMCwgUmVhZG9ubHlOb25FbXB0eUFycmF5XzEuaXNOb25FbXB0eSkob3V0KSA/IG91dCA6IFtzXTtcbiAgICB9O1xufTtcbmV4cG9ydHMuc3BsaXQgPSBzcGxpdDtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnYWJjJywgUy5pbmNsdWRlcygnYicpKSwgdHJ1ZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnYWJjJywgUy5pbmNsdWRlcygnZCcpKSwgZmFsc2UpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgaW5jbHVkZXMgPSBmdW5jdGlvbiAoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgICByZXR1cm4gcy5pbmNsdWRlcyhzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKTtcbiAgICB9O1xufTtcbmV4cG9ydHMuaW5jbHVkZXMgPSBpbmNsdWRlcztcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnYWJjJywgUy5zdGFydHNXaXRoKCdhJykpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCdiYycsIFMuc3RhcnRzV2l0aCgnYScpKSwgZmFsc2UpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgc3RhcnRzV2l0aCA9IGZ1bmN0aW9uIChzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHJldHVybiBzLnN0YXJ0c1dpdGgoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbik7XG4gICAgfTtcbn07XG5leHBvcnRzLnN0YXJ0c1dpdGggPSBzdGFydHNXaXRoO1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCdhYmMnLCBTLmVuZHNXaXRoKCdjJykpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCdhYicsIFMuZW5kc1dpdGgoJ2MnKSksIGZhbHNlKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIGVuZHNXaXRoID0gZnVuY3Rpb24gKHNlYXJjaFN0cmluZywgcG9zaXRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcmV0dXJuIHMuZW5kc1dpdGgoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbik7XG4gICAgfTtcbn07XG5leHBvcnRzLmVuZHNXaXRoID0gZW5kc1dpdGg7XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5fcGFydGl0aW9uID0gZXhwb3J0cy5fZmlsdGVyTWFwID0gZXhwb3J0cy5fZmlsdGVyID0gZXhwb3J0cy5fcmVkdWNlUmlnaHQgPSBleHBvcnRzLl9mb2xkTWFwID0gZXhwb3J0cy5fcmVkdWNlID0gZXhwb3J0cy5fbWFwV2l0aEluZGV4ID0gZXhwb3J0cy5fbWFwID0gZXhwb3J0cy5kaWZmZXJlbmNlID0gZXhwb3J0cy5pbnRlcnNlY3Rpb24gPSBleHBvcnRzLnVuaW9uID0gZXhwb3J0cy5lbGVtID0gZXhwb3J0cy5zb21lID0gZXhwb3J0cy5ldmVyeSA9IGV4cG9ydHMuZnJvbUVudHJpZXMgPSBleHBvcnRzLnRvRW50cmllcyA9IGV4cG9ydHMuZnJvbUZvbGRhYmxlTWFwID0gZXhwb3J0cy5mcm9tRm9sZGFibGUgPSBleHBvcnRzLmZpbHRlcldpdGhJbmRleCA9IGV4cG9ydHMuZmlsdGVyTWFwV2l0aEluZGV4ID0gZXhwb3J0cy5wYXJ0aXRpb25XaXRoSW5kZXggPSBleHBvcnRzLnBhcnRpdGlvbk1hcFdpdGhJbmRleCA9IGV4cG9ydHMud2lsdCA9IGV4cG9ydHMud2l0aGVyID0gZXhwb3J0cy5zZXF1ZW5jZSA9IGV4cG9ydHMudHJhdmVyc2UgPSBleHBvcnRzLnRyYXZlcnNlV2l0aEluZGV4ID0gZXhwb3J0cy5zaW5nbGV0b24gPSBleHBvcnRzLnJlZHVjZVJpZ2h0V2l0aEluZGV4ID0gZXhwb3J0cy5mb2xkTWFwV2l0aEluZGV4ID0gZXhwb3J0cy5yZWR1Y2VXaXRoSW5kZXggPSBleHBvcnRzLm1hcCA9IGV4cG9ydHMubWFwV2l0aEluZGV4ID0gZXhwb3J0cy5lbXB0eSA9IGV4cG9ydHMubG9va3VwID0gZXhwb3J0cy5pc1N1YnJlY29yZCA9IGV4cG9ydHMucG9wID0gZXhwb3J0cy5tb2RpZnlBdCA9IGV4cG9ydHMudXBkYXRlQXQgPSBleHBvcnRzLmRlbGV0ZUF0ID0gZXhwb3J0cy5oYXMgPSBleHBvcnRzLnVwc2VydEF0ID0gZXhwb3J0cy50b1VuZm9sZGFibGUgPSBleHBvcnRzLnRvUmVhZG9ubHlBcnJheSA9IGV4cG9ydHMuY29sbGVjdCA9IGV4cG9ydHMua2V5cyA9IGV4cG9ydHMuaXNFbXB0eSA9IGV4cG9ydHMuc2l6ZSA9IGV4cG9ydHMudG9SZWNvcmQgPSBleHBvcnRzLmZyb21SZWNvcmQgPSB2b2lkIDA7XG5leHBvcnRzLnJlYWRvbmx5UmVjb3JkID0gZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eSA9IGV4cG9ydHMuaW5zZXJ0QXQgPSBleHBvcnRzLldpdGhlcmFibGUgPSBleHBvcnRzLlRyYXZlcnNhYmxlV2l0aEluZGV4ID0gZXhwb3J0cy5UcmF2ZXJzYWJsZSA9IGV4cG9ydHMuRm9sZGFibGVXaXRoSW5kZXggPSBleHBvcnRzLkZvbGRhYmxlID0gZXhwb3J0cy5nZXREaWZmZXJlbmNlTWFnbWEgPSBleHBvcnRzLmdldEludGVyc2VjdGlvblNlbWlncm91cCA9IGV4cG9ydHMuZ2V0VW5pb25Nb25vaWQgPSBleHBvcnRzLmdldFVuaW9uU2VtaWdyb3VwID0gZXhwb3J0cy5nZXRXaXRoZXJhYmxlID0gZXhwb3J0cy5nZXRUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IGV4cG9ydHMuZ2V0VHJhdmVyc2FibGUgPSBleHBvcnRzLkZpbHRlcmFibGVXaXRoSW5kZXggPSBleHBvcnRzLkZpbHRlcmFibGUgPSBleHBvcnRzLkNvbXBhY3RhYmxlID0gZXhwb3J0cy5nZXRGb2xkYWJsZVdpdGhJbmRleCA9IGV4cG9ydHMuZ2V0Rm9sZGFibGUgPSBleHBvcnRzLkZ1bmN0b3JXaXRoSW5kZXggPSBleHBvcnRzLmZsYXAgPSBleHBvcnRzLkZ1bmN0b3IgPSBleHBvcnRzLmdldE1vbm9pZCA9IGV4cG9ydHMuZ2V0RXEgPSBleHBvcnRzLmdldFNob3cgPSBleHBvcnRzLlVSSSA9IGV4cG9ydHMuc2VwYXJhdGUgPSBleHBvcnRzLmNvbXBhY3QgPSBleHBvcnRzLnJlZHVjZVJpZ2h0ID0gZXhwb3J0cy5mb2xkTWFwID0gZXhwb3J0cy5yZWR1Y2UgPSBleHBvcnRzLnBhcnRpdGlvbk1hcCA9IGV4cG9ydHMucGFydGl0aW9uID0gZXhwb3J0cy5maWx0ZXJNYXAgPSBleHBvcnRzLmZpbHRlciA9IGV4cG9ydHMuX3NlcXVlbmNlID0gZXhwb3J0cy5fdHJhdmVyc2UgPSBleHBvcnRzLl9maWx0ZXJXaXRoSW5kZXggPSBleHBvcnRzLl9maWx0ZXJNYXBXaXRoSW5kZXggPSBleHBvcnRzLl9wYXJ0aXRpb25XaXRoSW5kZXggPSBleHBvcnRzLl9wYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBleHBvcnRzLl9yZWR1Y2VSaWdodFdpdGhJbmRleCA9IGV4cG9ydHMuX2ZvbGRNYXBXaXRoSW5kZXggPSBleHBvcnRzLl9yZWR1Y2VXaXRoSW5kZXggPSBleHBvcnRzLl9wYXJ0aXRpb25NYXAgPSB2b2lkIDA7XG52YXIgRXFfMSA9IHJlcXVpcmUoXCIuL0VxXCIpO1xudmFyIGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiLi9mdW5jdGlvblwiKTtcbnZhciBGdW5jdG9yXzEgPSByZXF1aXJlKFwiLi9GdW5jdG9yXCIpO1xudmFyIF8gPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vaW50ZXJuYWxcIikpO1xudmFyIFNlcGFyYXRlZF8xID0gcmVxdWlyZShcIi4vU2VwYXJhdGVkXCIpO1xudmFyIFMgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vc3RyaW5nXCIpKTtcbnZhciBXaXRoZXJhYmxlXzEgPSByZXF1aXJlKFwiLi9XaXRoZXJhYmxlXCIpO1xuLyoqXG4gKiBCdWlsZHMgYSBgUmVhZG9ubHlSZWNvcmRgIGJ5IGNvcHlpbmcgYSBgUmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUmVhZG9ubHlSZWNvcmQsIGZyb21SZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGNvbnN0IHg6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7IGE6IDEsIGI6IDIgfTtcbiAqIGNvbnN0IHk6IFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IGZyb21SZWNvcmQoeCk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHgseSk7XG4gKiAvLyBgeS5hID0gNWAgZ2l2ZXMgY29tcGlsZXIgZXJyb3JcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgZnJvbVJlY29yZCA9IGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByKTsgfTtcbmV4cG9ydHMuZnJvbVJlY29yZCA9IGZyb21SZWNvcmQ7XG4vKipcbiAqIEJ1aWxkcyBhIG11dGFibGUgYFJlY29yZGAgZnJvbSBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFJlYWRvbmx5UmVjb3JkLCB0b1JlY29yZCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogY29uc3QgeDogUmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0geyBhOiAxLCBiOiAyIH07XG4gKiBjb25zdCB5OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0gdG9SZWNvcmQoeCk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHgseSk7XG4gKiB5LmEgPSA1OyAvLyBpdCdzIG9rLCB5IGlzIG11dGFibGVcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgdG9SZWNvcmQgPSBmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcik7IH07XG5leHBvcnRzLnRvUmVjb3JkID0gdG9SZWNvcmQ7XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGtleS92YWx1ZSBwYWlycyBpbiBhIGBSZWFkb25seVJlY29yZGAsXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNpemUgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNpemUoeyBhOiB0cnVlLCBiOiAyLCBjOiBcInRocmVlXCIgfSksIDMpO1xuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgc2l6ZSA9IGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3Qua2V5cyhyKS5sZW5ndGg7IH07XG5leHBvcnRzLnNpemUgPSBzaXplO1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYSBgUmVhZG9ubHlSZWNvcmRgIGlzIGVtcHR5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGlzRW1wdHkoe30pLCB0cnVlKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaXNFbXB0eSh7IGE6IDMgfSksIGZhbHNlKTtcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIChyKSB7XG4gICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59O1xuZXhwb3J0cy5pc0VtcHR5ID0gaXNFbXB0eTtcbnZhciBrZXlzXyA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhyKS5zb3J0KE8uY29tcGFyZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLmtleXMgPSBrZXlzXyhTLk9yZCk7XG5mdW5jdGlvbiBjb2xsZWN0KE8pIHtcbiAgICBpZiAodHlwZW9mIE8gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGNvbGxlY3QoUy5PcmQpKE8pO1xuICAgIH1cbiAgICB2YXIga2V5c08gPSBrZXlzXyhPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0ga2V5c08ocik7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChmKGtleSwgcltrZXldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59XG5leHBvcnRzLmNvbGxlY3QgPSBjb2xsZWN0O1xuLyoqXG4gKiBHZXQgYSBzb3J0ZWQgYFJlYWRvbmx5QXJyYXlgIG9mIHRoZSBrZXkvdmFsdWUgcGFpcnMgY29udGFpbmVkIGluIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdG9SZWFkb25seUFycmF5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogY29uc3QgeCA9IHsgYzogMywgYTogXCJmb29cIiwgYjogZmFsc2UgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodG9SZWFkb25seUFycmF5KHgpLCBbXG4gKiAgIFtcImFcIiwgXCJmb29cIl0sXG4gKiAgIFtcImJcIiwgZmFsc2VdLFxuICogICBbXCJjXCIsIDNdLFxuICogXSk7XG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0cy50b1JlYWRvbmx5QXJyYXkgPSBcbi8qI19fUFVSRV9fKi8gY29sbGVjdChTLk9yZCkoZnVuY3Rpb24gKGssIGEpIHsgcmV0dXJuIFtrLCBhXTsgfSk7XG5mdW5jdGlvbiB0b1VuZm9sZGFibGUoVSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgc2FzID0gKDAsIGV4cG9ydHMudG9SZWFkb25seUFycmF5KShyKTtcbiAgICAgICAgdmFyIGxlbiA9IHNhcy5sZW5ndGg7XG4gICAgICAgIHJldHVybiBVLnVuZm9sZCgwLCBmdW5jdGlvbiAoYikgeyByZXR1cm4gKGIgPCBsZW4gPyBfLnNvbWUoW3Nhc1tiXSwgYiArIDFdKSA6IF8ubm9uZSk7IH0pO1xuICAgIH07XG59XG5leHBvcnRzLnRvVW5mb2xkYWJsZSA9IHRvVW5mb2xkYWJsZTtcbi8qKlxuICogSW5zZXJ0IG9yIHJlcGxhY2UgYSBrZXkvdmFsdWUgcGFpciBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVwc2VydEF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cHNlcnRBdChcImFcIiwgNSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDUsIGI6IDIgfSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwc2VydEF0KFwiY1wiLCA1KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogMSwgYjogMiwgYzogNSB9KTtcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciB1cHNlcnRBdCA9IGZ1bmN0aW9uIChrLCBhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspICYmIHJba10gPT09IGEpIHtcbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBPYmplY3QuYXNzaWduKHt9LCByKTtcbiAgICAgICAgb3V0W2tdID0gYTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbmV4cG9ydHMudXBzZXJ0QXQgPSB1cHNlcnRBdDtcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9yIG5vdCBhIGtleSBleGlzdHMgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIE5vdGUuIFRoaXMgZnVuY3Rpb24gaXMgbm90IHBpcGVhYmxlIGJlY2F1c2UgaXMgYSBgUmVmaW5lbWVudGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGhhcyB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaGFzKFwiYVwiLCB7IGE6IDEsIGI6IDIgfSksIHRydWUpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChoYXMoXCJjXCIsIHsgYTogMSwgYjogMiB9KSwgZmFsc2UpO1xuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIGhhcyA9IGZ1bmN0aW9uIChrLCByKSB7IHJldHVybiBfLmhhcy5jYWxsKHIsIGspOyB9O1xuZXhwb3J0cy5oYXMgPSBoYXM7XG5mdW5jdGlvbiBkZWxldGVBdChrKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGlmICghXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IE9iamVjdC5hc3NpZ24oe30sIHIpO1xuICAgICAgICBkZWxldGUgb3V0W2tdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG5leHBvcnRzLmRlbGV0ZUF0ID0gZGVsZXRlQXQ7XG4vKipcbiAqIFJlcGxhY2UgYSBrZXkvdmFsdWUgcGFpciBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQHJldHVybnMgSWYgdGhlIHNwZWNpZmllZCBrZXkgZXhpc3RzIGl0IHJldHVybnMgYW4gYE9wdGlvbmAgY29udGFpbmluZyBhIG5ldyBgUmVjb3JkYFxuICogd2l0aCB0aGUgZW50cnkgdXBkYXRlZCwgb3RoZXJ3aXNlIGl0IHJldHVybnMgYE5vbmVgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVwZGF0ZUF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tICdmcC10cydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwZGF0ZUF0KFwiYVwiLCAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5zb21lKHsgYTogMywgYjogMiB9KSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwZGF0ZUF0KFwiY1wiLCAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5ub25lKTtcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIHVwZGF0ZUF0ID0gZnVuY3Rpb24gKGssIGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgaWYgKCEoMCwgZXhwb3J0cy5oYXMpKGssIHIpKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyW2tdID09PSBhKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5zb21lKHIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBPYmplY3QuYXNzaWduKHt9LCByKTtcbiAgICAgICAgb3V0W2tdID0gYTtcbiAgICAgICAgcmV0dXJuIF8uc29tZShvdXQpO1xuICAgIH07XG59O1xuZXhwb3J0cy51cGRhdGVBdCA9IHVwZGF0ZUF0O1xuLyoqXG4gKiBBcHBsaWVzIGEgbWFwcGluZyBmdW5jdGlvbiB0byBvbmUgc3BlY2lmaWMga2V5L3ZhbHVlIHBhaXIgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEByZXR1cm5zIElmIHRoZSBzcGVjaWZpZWQga2V5IGV4aXN0cyBpdCByZXR1cm5zIGFuIGBPcHRpb25gIGNvbnRhaW5pbmcgYSBuZXcgYFJlY29yZGBcbiAqIHdpdGggdGhlIGVudHJ5IHVwZGF0ZWQsIG90aGVyd2lzZSBpdCByZXR1cm5zIGBOb25lYFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtb2RpZnlBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtb2RpZnlBdChcImFcIiwgKHg6IG51bWJlcikgPT4geCAqIDMpKHsgYTogMSwgYjogMiB9KSwgb3B0aW9uLnNvbWUoeyBhOiAzLCBiOiAyIH0pKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobW9kaWZ5QXQoXCJjXCIsICh4OiBudW1iZXIpID0+IHggKiAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5ub25lKTtcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIG1vZGlmeUF0ID0gZnVuY3Rpb24gKGssIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgaWYgKCEoMCwgZXhwb3J0cy5oYXMpKGssIHIpKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXh0ID0gZihyW2tdKTtcbiAgICAgICAgaWYgKG5leHQgPT09IHJba10pIHtcbiAgICAgICAgICAgIHJldHVybiBfLnNvbWUocik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IE9iamVjdC5hc3NpZ24oe30sIHIpO1xuICAgICAgICBvdXRba10gPSBuZXh0O1xuICAgICAgICByZXR1cm4gXy5zb21lKG91dCk7XG4gICAgfTtcbn07XG5leHBvcnRzLm1vZGlmeUF0ID0gbW9kaWZ5QXQ7XG5mdW5jdGlvbiBwb3Aoaykge1xuICAgIHZhciBkZWxldGVBdGsgPSBkZWxldGVBdChrKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIG9hID0gbG9va3VwKGssIHIpO1xuICAgICAgICByZXR1cm4gXy5pc05vbmUob2EpID8gXy5ub25lIDogXy5zb21lKFtvYS52YWx1ZSwgZGVsZXRlQXRrKHIpXSk7XG4gICAgfTtcbn1cbmV4cG9ydHMucG9wID0gcG9wO1xuZnVuY3Rpb24gaXNTdWJyZWNvcmQoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWUsIHRoYXQpIHtcbiAgICAgICAgaWYgKHRoYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGlzU3VicmVjb3JkRV8xID0gaXNTdWJyZWNvcmQoRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRoYXQpIHsgcmV0dXJuIGlzU3VicmVjb3JkRV8xKHRoYXQsIG1lKTsgfTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrIGluIG1lKSB7XG4gICAgICAgICAgICBpZiAoIV8uaGFzLmNhbGwodGhhdCwgaykgfHwgIUUuZXF1YWxzKG1lW2tdLCB0aGF0W2tdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuZXhwb3J0cy5pc1N1YnJlY29yZCA9IGlzU3VicmVjb3JkO1xuZnVuY3Rpb24gbG9va3VwKGssIHIpIHtcbiAgICBpZiAociA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocikgeyByZXR1cm4gbG9va3VwKGssIHIpOyB9O1xuICAgIH1cbiAgICByZXR1cm4gXy5oYXMuY2FsbChyLCBrKSA/IF8uc29tZShyW2tdKSA6IF8ubm9uZTtcbn1cbmV4cG9ydHMubG9va3VwID0gbG9va3VwO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0cy5lbXB0eSA9IHt9O1xuZnVuY3Rpb24gbWFwV2l0aEluZGV4KGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdID0gZihrLCByW2tdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG5leHBvcnRzLm1hcFdpdGhJbmRleCA9IG1hcFdpdGhJbmRleDtcbmZ1bmN0aW9uIG1hcChmKSB7XG4gICAgcmV0dXJuIG1hcFdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59XG5leHBvcnRzLm1hcCA9IG1hcDtcbmZ1bmN0aW9uIHJlZHVjZVdpdGhJbmRleCgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJldHVybiByZWR1Y2VXaXRoSW5kZXgoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgfVxuICAgIHZhciBrZXlzTyA9IGtleXNfKGFyZ3NbMF0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBvdXQgPSBiO1xuICAgICAgICB2YXIga3MgPSBrZXlzTyhmYSk7XG4gICAgICAgIHZhciBsZW4gPSBrcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrID0ga3NbaV07XG4gICAgICAgICAgICBvdXQgPSBmKGssIG91dCwgZmFba10pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTsgfTtcbn1cbmV4cG9ydHMucmVkdWNlV2l0aEluZGV4ID0gcmVkdWNlV2l0aEluZGV4O1xuZnVuY3Rpb24gZm9sZE1hcFdpdGhJbmRleChPKSB7XG4gICAgaWYgKCdjb21wYXJlJyBpbiBPKSB7XG4gICAgICAgIHZhciBrZXlzT18xID0ga2V5c18oTyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoTSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3V0ID0gTS5lbXB0eTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtzID0ga2V5c09fMShmYSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW4gPSBrcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0ga3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQgPSBNLmNvbmNhdChvdXQsIGYoaywgZmFba10pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZm9sZE1hcFdpdGhJbmRleChTLk9yZCkoTyk7XG59XG5leHBvcnRzLmZvbGRNYXBXaXRoSW5kZXggPSBmb2xkTWFwV2l0aEluZGV4O1xuZnVuY3Rpb24gcmVkdWNlUmlnaHRXaXRoSW5kZXgoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICByZXR1cm4gcmVkdWNlUmlnaHRXaXRoSW5kZXgoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgfVxuICAgIHZhciBrZXlzTyA9IGtleXNfKGFyZ3NbMF0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBvdXQgPSBiO1xuICAgICAgICB2YXIga3MgPSBrZXlzTyhmYSk7XG4gICAgICAgIHZhciBsZW4gPSBrcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgdmFyIGsgPSBrc1tpXTtcbiAgICAgICAgICAgIG91dCA9IGYoaywgZmFba10sIG91dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9OyB9O1xufVxuZXhwb3J0cy5yZWR1Y2VSaWdodFdpdGhJbmRleCA9IHJlZHVjZVJpZ2h0V2l0aEluZGV4O1xuLyoqXG4gKiBDcmVhdGUgYSBgUmVhZG9ubHlSZWNvcmRgIHdpdGggb25lIGtleS92YWx1ZSBwYWlyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzaW5nbGV0b24gfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNpbmdsZXRvbihcImFcIiwgMSksIHsgYTogMSB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIHNpbmdsZXRvbiA9IGZ1bmN0aW9uIChrLCBhKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSB7fSwgX2Fba10gPSBhLCBfYSk7XG59O1xuZXhwb3J0cy5zaW5nbGV0b24gPSBzaW5nbGV0b247XG5mdW5jdGlvbiB0cmF2ZXJzZVdpdGhJbmRleChGKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4T0YgPSBfdHJhdmVyc2VXaXRoSW5kZXgoUy5PcmQpKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHRhKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleE9GKHRhLCBmKTsgfTsgfTtcbn1cbmV4cG9ydHMudHJhdmVyc2VXaXRoSW5kZXggPSB0cmF2ZXJzZVdpdGhJbmRleDtcbmZ1bmN0aW9uIHRyYXZlcnNlKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VPRiA9ICgwLCBleHBvcnRzLl90cmF2ZXJzZSkoUy5PcmQpKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHRhKSB7IHJldHVybiB0cmF2ZXJzZU9GKHRhLCBmKTsgfTsgfTtcbn1cbmV4cG9ydHMudHJhdmVyc2UgPSB0cmF2ZXJzZTtcbmZ1bmN0aW9uIHNlcXVlbmNlKEYpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuX3NlcXVlbmNlKShTLk9yZCkoRik7XG59XG5leHBvcnRzLnNlcXVlbmNlID0gc2VxdWVuY2U7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG52YXIgd2l0aGVyID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYubWFwKCgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCB0cmF2ZXJzZUYoZikpLCBleHBvcnRzLmNvbXBhY3QpOyB9OyB9O1xufTtcbmV4cG9ydHMud2l0aGVyID0gd2l0aGVyO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xudmFyIHdpbHQgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZUYgPSB0cmF2ZXJzZShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5tYXAoKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsIHRyYXZlcnNlRihmKSksIGV4cG9ydHMuc2VwYXJhdGUpOyB9OyB9O1xufTtcbmV4cG9ydHMud2lsdCA9IHdpbHQ7XG5mdW5jdGlvbiBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgbGVmdCA9IHt9O1xuICAgICAgICB2YXIgcmlnaHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gZihrLCByW2tdKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUuX3RhZykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdMZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRba10gPSBlLmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRba10gPSBlLnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoMCwgU2VwYXJhdGVkXzEuc2VwYXJhdGVkKShsZWZ0LCByaWdodCk7XG4gICAgfTtcbn1cbmV4cG9ydHMucGFydGl0aW9uTWFwV2l0aEluZGV4ID0gcGFydGl0aW9uTWFwV2l0aEluZGV4O1xuZnVuY3Rpb24gcGFydGl0aW9uV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgbGVmdCA9IHt9O1xuICAgICAgICB2YXIgcmlnaHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciBhID0gcltrXTtcbiAgICAgICAgICAgICAgICBpZiAocHJlZGljYXRlV2l0aEluZGV4KGssIGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0W2tdID0gYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnRba10gPSBhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDAsIFNlcGFyYXRlZF8xLnNlcGFyYXRlZCkobGVmdCwgcmlnaHQpO1xuICAgIH07XG59XG5leHBvcnRzLnBhcnRpdGlvbldpdGhJbmRleCA9IHBhcnRpdGlvbldpdGhJbmRleDtcbmZ1bmN0aW9uIGZpbHRlck1hcFdpdGhJbmRleChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciBvYiA9IGYoaywgcltrXSk7XG4gICAgICAgICAgICAgICAgaWYgKF8uaXNTb21lKG9iKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBvYi52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxuZXhwb3J0cy5maWx0ZXJNYXBXaXRoSW5kZXggPSBmaWx0ZXJNYXBXaXRoSW5kZXg7XG5mdW5jdGlvbiBmaWx0ZXJXaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBmYSkge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwoZmEsIGtleSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGZhW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKHByZWRpY2F0ZVdpdGhJbmRleChrZXksIGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrZXldID0gYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhbmdlZCA/IG91dCA6IGZhO1xuICAgIH07XG59XG5leHBvcnRzLmZpbHRlcldpdGhJbmRleCA9IGZpbHRlcldpdGhJbmRleDtcbmZ1bmN0aW9uIGZyb21Gb2xkYWJsZShNLCBGKSB7XG4gICAgdmFyIGZyb21Gb2xkYWJsZU1hcE0gPSBmcm9tRm9sZGFibGVNYXAoTSwgRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChma2EpIHsgcmV0dXJuIGZyb21Gb2xkYWJsZU1hcE0oZmthLCBmdW5jdGlvbl8xLmlkZW50aXR5KTsgfTtcbn1cbmV4cG9ydHMuZnJvbUZvbGRhYmxlID0gZnJvbUZvbGRhYmxlO1xuZnVuY3Rpb24gZnJvbUZvbGRhYmxlTWFwKE0sIEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7XG4gICAgICAgIHJldHVybiBGLnJlZHVjZSh0YSwge30sIGZ1bmN0aW9uIChyLCBhKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBmKGEpLCBrID0gX2FbMF0sIGIgPSBfYVsxXTtcbiAgICAgICAgICAgIHJba10gPSBfLmhhcy5jYWxsKHIsIGspID8gTS5jb25jYXQocltrXSwgYikgOiBiO1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5leHBvcnRzLmZyb21Gb2xkYWJsZU1hcCA9IGZyb21Gb2xkYWJsZU1hcDtcbi8qKlxuICogQWxpYXMgb2YgW2B0b1JlYWRvbmx5QXJyYXlgXSgjdG9yZWFkb25seWFycmF5KS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdG9FbnRyaWVzIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0b0VudHJpZXMoeyBiOiAyLCBhOiAxIH0pLCBbWydhJywgMV0sIFsnYicsIDJdXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0cy50b0VudHJpZXMgPSBleHBvcnRzLnRvUmVhZG9ubHlBcnJheTtcbi8qKlxuICogQ29udmVydHMgYSBgUmVhZG9ubHlBcnJheWAgb2YgYFtrZXksIHZhbHVlXWAgdHVwbGVzIGludG8gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmcm9tRW50cmllcyB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbUVudHJpZXMoW1snYScsIDFdLCBbJ2InLCAyXSwgWydhJywgM11dKSwgeyBiOiAyLCBhOiAzIH0pXG4gKlxuICogQHNpbmNlIDIuMTIuMFxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKi9cbnZhciBmcm9tRW50cmllcyA9IGZ1bmN0aW9uIChmYSkge1xuICAgIHZhciBvdXQgPSB7fTtcbiAgICBmb3IgKHZhciBfaSA9IDAsIGZhXzEgPSBmYTsgX2kgPCBmYV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgYSA9IGZhXzFbX2ldO1xuICAgICAgICBvdXRbYVswXV0gPSBhWzFdO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTtcbmV4cG9ydHMuZnJvbUVudHJpZXMgPSBmcm9tRW50cmllcztcbmZ1bmN0aW9uIGV2ZXJ5KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmICghcHJlZGljYXRlKHJba10pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5leHBvcnRzLmV2ZXJ5ID0gZXZlcnk7XG4vKipcbiAqIFRlc3QgaWYgYXQgbGVhc3Qgb25lIHZhbHVlIGluIGEgYFJlYWRvbmx5UmVjb3JkYCBzYXRpc2ZpZXMgdGhlIHByZWRpY2F0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb21lKChuOiBudW1iZXIpID0+IG4gPj0gMCkoeyBhOiAxLCBiOiAtMiB9KSwgdHJ1ZSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvbWUoKG46IG51bWJlcikgPT4gbiA+PSAwKSh7IGE6IC0xLCBiOiAtMiB9KSwgZmFsc2UpO1xuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5mdW5jdGlvbiBzb21lKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUocltrXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cbmV4cG9ydHMuc29tZSA9IHNvbWU7XG5mdW5jdGlvbiBlbGVtKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGZhKSB7XG4gICAgICAgIGlmIChmYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZWxlbUVfMSA9IGVsZW0oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBlbGVtRV8xKGEsIGZhKTsgfTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrIGluIGZhKSB7XG4gICAgICAgICAgICBpZiAoRS5lcXVhbHMoZmFba10sIGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG5leHBvcnRzLmVsZW0gPSBlbGVtO1xuLyoqXG4gKiBVbmlvbiBvZiB0d28gYFJlYWRvbmx5UmVjb3JkYHMuXG4gKiBUYWtlcyB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYW5kIHByb2R1Y2VzIGEgYFJlYWRvbmx5UmVjb3JkYCBjb21iaW5pbmcgYWxsIHRoZVxuICogZW50cmllcyBvZiB0aGUgdHdvIGlucHV0cy5cbiAqIEl0IHVzZXMgdGhlIGBjb25jYXRgIGZ1bmN0aW9uIG9mIHRoZSBwcm92aWRlZCBgTWFnbWFgIHRvXG4gKiBjb21iaW5lIHRoZSBlbGVtZW50cyB3aXRoIHRoZSBzYW1lIGtleS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pb24gfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqIGltcG9ydCB7IE1hZ21hIH0gZnJvbSBcImZwLXRzL01hZ21hXCI7XG4gKlxuICogY29uc3QgbTE6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB4ICsgeSB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmlvbihtMSkoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiA0LCBiOiAyLCBjOiAzIH0pO1xuICogY29uc3QgbTI6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlcikgPT4geCB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmlvbihtMikoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiAxLCBiOiAyLCBjOiAzIH0pO1xuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIHVuaW9uID0gZnVuY3Rpb24gKE0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICBpZiAoKDAsIGV4cG9ydHMuaXNFbXB0eSkoZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoMCwgZXhwb3J0cy5pc0VtcHR5KShzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBmaXJzdCkge1xuICAgICAgICAgICAgICAgIGlmICgoMCwgZXhwb3J0cy5oYXMpKGssIHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tdID0gTS5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBmaXJzdFtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIHNlY29uZCkge1xuICAgICAgICAgICAgICAgIGlmICghKDAsIGV4cG9ydHMuaGFzKShrLCBvdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IHNlY29uZFtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuZXhwb3J0cy51bmlvbiA9IHVuaW9uO1xuLyoqXG4gKiBJbnRlcnNlY3Rpb24gb2YgdHdvIGBSZWFkb25seVJlY29yZGBzLlxuICogVGFrZXMgdHdvIGBSZWFkb25seVJlY29yZGBzIGFuZCBwcm9kdWNlcyBhIGBSZWFkb25seVJlY29yZGAgY29tYmluaW5nIG9ubHkgdGhlXG4gKiBlbnRyaWVzIG9mIHRoZSB0d28gaW5wdXRzd2l0aCB0aGUgc2FtZSBrZXkuXG4gKiBJdCB1c2VzIHRoZSBgY29uY2F0YCBmdW5jdGlvbiBvZiB0aGUgcHJvdmlkZWQgYE1hZ21hYCB0b1xuICogY29tYmluZSB0aGUgZWxlbWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGludGVyc2VjdGlvbiB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiO1xuICogaW1wb3J0IHsgTWFnbWEgfSBmcm9tIFwiZnAtdHMvTWFnbWFcIjtcbiAqXG4gKiBjb25zdCBtMTogTWFnbWE8bnVtYmVyPiA9IHsgY29uY2F0OiAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IHggKyB5IH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc2VjdGlvbihtMSkoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiA0fSk7XG4gKiBjb25zdCBtMjogTWFnbWE8bnVtYmVyPiA9IHsgY29uY2F0OiAoeDogbnVtYmVyKSA9PiB4IH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc2VjdGlvbihtMikoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiAxfSk7XG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgaW50ZXJzZWN0aW9uID0gZnVuY3Rpb24gKE0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICBpZiAoKDAsIGV4cG9ydHMuaXNFbXB0eSkoZmlyc3QpIHx8ICgwLCBleHBvcnRzLmlzRW1wdHkpKHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5lbXB0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gZmlyc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoKDAsIGV4cG9ydHMuaGFzKShrLCBzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IE0uY29uY2F0KGZpcnN0W2tdLCBzZWNvbmRba10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG5leHBvcnRzLmludGVyc2VjdGlvbiA9IGludGVyc2VjdGlvbjtcbi8qKlxuICogRGlmZmVyZW5jZSBiZXR3ZWVuIHR3byBgUmVhZG9ubHlSZWNvcmRgcy5cbiAqIFRha2VzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBhbmQgcHJvZHVjZXMgYSBgUmVhZG9ubHlSZWNvcmRgIGNvbXBvc2VkIGJ5IHRoZVxuICogZW50cmllcyBvZiB0aGUgdHdvIGlucHV0cywgcmVtb3ZpbmcgdGhlIGVudHJpZXMgd2l0aCB0aGUgc2FtZVxuICoga2V5IGluIGJvdGggaW5wdXRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBkaWZmZXJlbmNlIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCI7XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkaWZmZXJlbmNlKHsgYTogMSB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYjogMiB9KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZGlmZmVyZW5jZSh7IGE6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGI6IDIgfSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRpZmZlcmVuY2UoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBiOiAyLCBjOiAzIH0pO1xuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIGRpZmZlcmVuY2UgPSBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICBpZiAoKDAsIGV4cG9ydHMuaXNFbXB0eSkoZmlyc3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Vjb25kO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoMCwgZXhwb3J0cy5pc0VtcHR5KShzZWNvbmQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3Q7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIGZpcnN0KSB7XG4gICAgICAgICAgICBpZiAoISgwLCBleHBvcnRzLmhhcykoaywgc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IGZpcnN0W2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGsgaW4gc2Vjb25kKSB7XG4gICAgICAgICAgICBpZiAoISgwLCBleHBvcnRzLmhhcykoaywgZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdID0gc2Vjb25kW2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG5leHBvcnRzLmRpZmZlcmVuY2UgPSBkaWZmZXJlbmNlO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIF9tYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCBtYXAoZikpOyB9O1xuZXhwb3J0cy5fbWFwID0gX21hcDtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX21hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsIG1hcFdpdGhJbmRleChmKSk7IH07XG5leHBvcnRzLl9tYXBXaXRoSW5kZXggPSBfbWFwV2l0aEluZGV4O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgcmVkdWNlTyA9IHJlZHVjZShPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgcmVkdWNlTyhiLCBmKSk7IH07XG59O1xuZXhwb3J0cy5fcmVkdWNlID0gX3JlZHVjZTtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTykoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsIGZvbGRNYXBNKGYpKTsgfTtcbn07IH07XG5leHBvcnRzLl9mb2xkTWFwID0gX2ZvbGRNYXA7XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHJlZHVjZVJpZ2h0TyA9IHJlZHVjZVJpZ2h0KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCByZWR1Y2VSaWdodE8oYiwgZikpOyB9O1xufTtcbmV4cG9ydHMuX3JlZHVjZVJpZ2h0ID0gX3JlZHVjZVJpZ2h0O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZmlsdGVyID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLmZpbHRlcikocHJlZGljYXRlKSk7XG59O1xuZXhwb3J0cy5fZmlsdGVyID0gX2ZpbHRlcjtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZpbHRlck1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLmZpbHRlck1hcCkoZikpOyB9O1xuZXhwb3J0cy5fZmlsdGVyTWFwID0gX2ZpbHRlck1hcDtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbiA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMucGFydGl0aW9uKShwcmVkaWNhdGUpKTsgfTtcbmV4cG9ydHMuX3BhcnRpdGlvbiA9IF9wYXJ0aXRpb247XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9wYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5wYXJ0aXRpb25NYXApKGYpKTsgfTtcbmV4cG9ydHMuX3BhcnRpdGlvbk1hcCA9IF9wYXJ0aXRpb25NYXA7XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9yZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciByZWR1Y2VXaXRoSW5kZXhPID0gcmVkdWNlV2l0aEluZGV4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCByZWR1Y2VXaXRoSW5kZXhPKGIsIGYpKTsgfTtcbn07XG5leHBvcnRzLl9yZWR1Y2VXaXRoSW5kZXggPSBfcmVkdWNlV2l0aEluZGV4O1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIF9mb2xkTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE8gPSBmb2xkTWFwV2l0aEluZGV4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoTSkge1xuICAgICAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE0gPSBmb2xkTWFwV2l0aEluZGV4TyhNKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsIGZvbGRNYXBXaXRoSW5kZXhNKGYpKTsgfTtcbiAgICB9O1xufTtcbmV4cG9ydHMuX2ZvbGRNYXBXaXRoSW5kZXggPSBfZm9sZE1hcFdpdGhJbmRleDtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0V2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXhPID0gcmVkdWNlUmlnaHRXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsIHJlZHVjZVJpZ2h0V2l0aEluZGV4TyhiLCBmKSk7IH07XG59O1xuZXhwb3J0cy5fcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBfcmVkdWNlUmlnaHRXaXRoSW5kZXg7XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9wYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZikpOyB9O1xuZXhwb3J0cy5fcGFydGl0aW9uTWFwV2l0aEluZGV4ID0gX3BhcnRpdGlvbk1hcFdpdGhJbmRleDtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbldpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCBwYXJ0aXRpb25XaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSk7XG59O1xuZXhwb3J0cy5fcGFydGl0aW9uV2l0aEluZGV4ID0gX3BhcnRpdGlvbldpdGhJbmRleDtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZpbHRlck1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsIGZpbHRlck1hcFdpdGhJbmRleChmKSk7IH07XG5leHBvcnRzLl9maWx0ZXJNYXBXaXRoSW5kZXggPSBfZmlsdGVyTWFwV2l0aEluZGV4O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGVXaXRoSW5kZXgpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCBmaWx0ZXJXaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSk7IH07XG5leHBvcnRzLl9maWx0ZXJXaXRoSW5kZXggPSBfZmlsdGVyV2l0aEluZGV4O1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4TyA9IF90cmF2ZXJzZVdpdGhJbmRleChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKEYpIHtcbiAgICAgICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4T0YgPSB0cmF2ZXJzZVdpdGhJbmRleE8oRik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4T0YodGEsICgwLCBmdW5jdGlvbl8xLmZsb3cpKGZ1bmN0aW9uXzEuU0ssIGYpKTsgfTtcbiAgICB9O1xufTtcbmV4cG9ydHMuX3RyYXZlcnNlID0gX3RyYXZlcnNlO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIF9zZXF1ZW5jZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHRyYXZlcnNlTyA9ICgwLCBleHBvcnRzLl90cmF2ZXJzZSkoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB0cmF2ZXJzZU9GID0gdHJhdmVyc2VPKEYpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7IHJldHVybiB0cmF2ZXJzZU9GKHRhLCBmdW5jdGlvbl8xLmlkZW50aXR5KTsgfTtcbiAgICB9O1xufTtcbmV4cG9ydHMuX3NlcXVlbmNlID0gX3NlcXVlbmNlO1xudmFyIF90cmF2ZXJzZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciBrZXlzTyA9IGtleXNfKE8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7XG4gICAgICAgICAgICB2YXIga3MgPSBrZXlzTyh0YSk7XG4gICAgICAgICAgICBpZiAoa3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEYub2YoZXhwb3J0cy5lbXB0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnIgPSBGLm9mKHt9KTtcbiAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGZyID0gRi5hcChGLm1hcChmciwgZnVuY3Rpb24gKHIpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHIsIChfYSA9IHt9LCBfYVtrZXldID0gYiwgX2EpKTtcbiAgICAgICAgICAgICAgICB9OyB9KSwgZihrZXksIHRhW2tleV0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtzXzEgPSBrczsgX2kgPCBrc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrc18xW19pXTtcbiAgICAgICAgICAgICAgICBfbG9vcF8xKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZnI7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEdpdmVuIGEgYFByZWRpY2F0ZWAsIGl0IHByb2R1Y2VzIGEgbmV3IGBSZWFkb25seVJlY29yZGAga2VlcGluZyBvbmx5IHRoZSBlbnRyaWVzIHdpdGggYVxuICogdmFsdWUgdGhhdCBzYXRpc2ZpZXMgdGhlIHByb3ZpZGVkIHByZWRpY2F0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbHRlcigoczogc3RyaW5nKSA9PiBzLmxlbmd0aCA8IDQpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiwgYzogXCJ2ZXJ5bG9uZ1wiIH0pLCB7XG4gKiAgIGE6IFwiZm9vXCIsXG4gKiAgIGI6IFwiYmFyXCIsXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xudmFyIGZpbHRlciA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZmlsdGVyV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBwcmVkaWNhdGUoYSk7IH0pO1xufTtcbmV4cG9ydHMuZmlsdGVyID0gZmlsdGVyO1xuLyoqXG4gKiBNYXBzIGEgYFJlYWRvbmx5UmVjb3JkYCB3aXRoIGFuIGl0ZXJhdGluZyBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gYE9wdGlvbmBcbiAqIGFuZCBpdCBrZWVwcyBvbmx5IHRoZSBgU29tZWAgdmFsdWVzIGRpc2NhcmRpbmcgdGhlIGBOb25lYHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZpbHRlck1hcCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tIFwiZnAtdHNcIlxuICpcbiAqIGNvbnN0IGYgPSAoczogc3RyaW5nKSA9PiBzLmxlbmd0aCA8IDQgPyBvcHRpb24uc29tZShgJHtzfSBpcyBzaG9ydGApOiBvcHRpb24ubm9uZVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaWx0ZXJNYXAoZikoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcInZlcnlsb25nXCIgfSksIHtcbiAqICAgYTogXCJmb28gaXMgc2hvcnRcIixcbiAqICAgYjogXCJiYXIgaXMgc2hvcnRcIixcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgZmlsdGVyTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZpbHRlck1hcFdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG5leHBvcnRzLmZpbHRlck1hcCA9IGZpbHRlck1hcDtcbi8qKlxuICogUGFydGl0aW9uIGEgYFJlYWRvbmx5UmVjb3JkYCBpbnRvIHR3byBwYXJ0cyBhY2NvcmRpbmcgdG8gYSBgUHJlZGljYXRlYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGFydGl0aW9uIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBhcnRpdGlvbigoczogc3RyaW5nKSA9PiBzLmxlbmd0aCA8IDQpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiwgYzogXCJ2ZXJ5bG9uZ1wiIH0pLCB7XG4gKiAgIGxlZnQ6e1xuICogICAgIGM6IFwidmVyeWxvbmdcIlxuICogICB9LFxuICogICByaWdodDoge1xuICogICAgIGE6IFwiZm9vXCIsXG4gKiAgICAgYjogXCJiYXJcIixcbiAqICAgfSxcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG52YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwYXJ0aXRpb25XaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIHByZWRpY2F0ZShhKTsgfSk7XG59O1xuZXhwb3J0cy5wYXJ0aXRpb24gPSBwYXJ0aXRpb247XG4vKipcbiAqIE1hcHMgYSBgUmVhZG9ubHlSZWNvcmRgIHdpdGggYSBmdW5jdGlvbiByZXR1cm5pbmcgYW4gYEVpdGhlcmAgYW5kXG4gKiBwYXJ0aXRpb25zIHRoZSByZXN1bHRpbmcgYFJlYWRvbmx5UmVjb3JkYCBpbnRvIGBMZWZ0YHMgYW5kIGBSaWdodGBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwYXJ0aXRpb25NYXAgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgZWl0aGVyIH0gZnJvbSBcImZwLXRzXCJcbiAqXG4gKiBjb25zdCBmID0gKHM6IHN0cmluZykgPT4gKHMubGVuZ3RoIDwgNCA/IGVpdGhlci5yaWdodChgJHtzfSBpcyBzaG9ydGApIDogZWl0aGVyLmxlZnQoYCR7c30gaXMgbm90IHNob3J0YCkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb25NYXAoZikoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcInZlcnlsb25nXCIgfSksIHtcbiAqICAgbGVmdDoge1xuICogICAgIGM6IFwidmVyeWxvbmcgaXMgbm90IHNob3J0XCIsXG4gKiAgIH0sXG4gKiAgIHJpZ2h0OiB7XG4gKiAgICAgYTogXCJmb28gaXMgc2hvcnRcIixcbiAqICAgICBiOiBcImJhciBpcyBzaG9ydFwiLFxuICogICB9LFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBwYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbmV4cG9ydHMucGFydGl0aW9uTWFwID0gcGFydGl0aW9uTWFwO1xuZnVuY3Rpb24gcmVkdWNlKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdmFyIHJlZHVjZVdpdGhJbmRleE9fMSA9IHJlZHVjZVdpdGhJbmRleChhcmdzWzBdKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiByZWR1Y2VXaXRoSW5kZXhPXzEoYiwgZnVuY3Rpb24gKF8sIGIsIGEpIHsgcmV0dXJuIGYoYiwgYSk7IH0pOyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVkdWNlKFMuT3JkKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufVxuZXhwb3J0cy5yZWR1Y2UgPSByZWR1Y2U7XG5mdW5jdGlvbiBmb2xkTWFwKE8pIHtcbiAgICBpZiAoJ2NvbXBhcmUnIGluIE8pIHtcbiAgICAgICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhPXzEgPSBmb2xkTWFwV2l0aEluZGV4KE8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKE0pIHtcbiAgICAgICAgICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TSA9IGZvbGRNYXBXaXRoSW5kZXhPXzEoTSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZvbGRNYXBXaXRoSW5kZXhNKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZvbGRNYXAoUy5PcmQpKE8pO1xufVxuZXhwb3J0cy5mb2xkTWFwID0gZm9sZE1hcDtcbmZ1bmN0aW9uIHJlZHVjZVJpZ2h0KCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdmFyIHJlZHVjZVJpZ2h0V2l0aEluZGV4T18xID0gcmVkdWNlUmlnaHRXaXRoSW5kZXgoYXJnc1swXSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gcmVkdWNlUmlnaHRXaXRoSW5kZXhPXzEoYiwgZnVuY3Rpb24gKF8sIGIsIGEpIHsgcmV0dXJuIGYoYiwgYSk7IH0pOyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVkdWNlUmlnaHQoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG59XG5leHBvcnRzLnJlZHVjZVJpZ2h0ID0gcmVkdWNlUmlnaHQ7XG4vKipcbiAqIENvbXBhY3QgYSBgUmVhZG9ubHlSZWNvcmRgIG9mIGBPcHRpb25gcyBkaXNjYXJkaW5nIHRoZSBgTm9uZWAgdmFsdWVzIGFuZFxuICoga2VlcGluZyB0aGUgYFNvbWVgIHZhbHVlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29tcGFjdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wYWN0KHsgYTogb3B0aW9uLnNvbWUoXCJmb29cIiksIGI6IG9wdGlvbi5ub25lLCBjOiBvcHRpb24uc29tZShcImJhclwiKSB9KSwge1xuICogICBhOiBcImZvb1wiLFxuICogICBjOiBcImJhclwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBjb21wYWN0ID0gZnVuY3Rpb24gKHIpIHtcbiAgICB2YXIgb3V0ID0ge307XG4gICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICB2YXIgb2EgPSByW2tdO1xuICAgICAgICAgICAgaWYgKF8uaXNTb21lKG9hKSkge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IG9hLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuZXhwb3J0cy5jb21wYWN0ID0gY29tcGFjdDtcbi8qKlxuICogU2VwYXJhdGUgYSBgUmVhZG9ubHlSZWNvcmRgIG9mIGBFaXRoZXJgcyBpbnRvIGBMZWZ0YHMgYW5kIGBSaWdodGBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzZXBhcmF0ZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICogaW1wb3J0IHsgZWl0aGVyIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgc2VwYXJhdGUoeyBhOiBlaXRoZXIucmlnaHQoXCJmb29cIiksIGI6IGVpdGhlci5sZWZ0KFwiYmFyXCIpLCBjOiBlaXRoZXIucmlnaHQoXCJiYXpcIikgfSksXG4gKiAgIHtcbiAqICAgICByaWdodDoge1xuICogICAgICAgYTogXCJmb29cIixcbiAqICAgICAgIGM6IFwiYmF6XCIsXG4gKiAgICAgfSxcbiAqICAgICBsZWZ0OiB7XG4gKiAgICAgICBiOiBcImJhclwiLFxuICogICAgIH0sXG4gKiAgIH1cbiAqICk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbnZhciBzZXBhcmF0ZSA9IGZ1bmN0aW9uIChyKSB7XG4gICAgdmFyIGxlZnQgPSB7fTtcbiAgICB2YXIgcmlnaHQgPSB7fTtcbiAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgIHZhciBlID0gcltrXTtcbiAgICAgICAgICAgIGlmIChfLmlzTGVmdChlKSkge1xuICAgICAgICAgICAgICAgIGxlZnRba10gPSBlLmxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByaWdodFtrXSA9IGUucmlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICgwLCBTZXBhcmF0ZWRfMS5zZXBhcmF0ZWQpKGxlZnQsIHJpZ2h0KTtcbn07XG5leHBvcnRzLnNlcGFyYXRlID0gc2VwYXJhdGU7XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnRzLlVSSSA9ICdSZWFkb25seVJlY29yZCc7XG5mdW5jdGlvbiBnZXRTaG93KE8pIHtcbiAgICBpZiAoJ2NvbXBhcmUnIGluIE8pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBjb2xsZWN0KE8pKGZ1bmN0aW9uIChrLCBhKSB7IHJldHVybiBcIlwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShrKSwgXCI6IFwiKS5jb25jYXQoUy5zaG93KGEpKTsgfSkocikuam9pbignLCAnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudHMgPT09ICcnID8gJ3t9JyA6IFwieyBcIi5jb25jYXQoZWxlbWVudHMsIFwiIH1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pOyB9O1xuICAgIH1cbiAgICByZXR1cm4gZ2V0U2hvdyhTLk9yZCkoTyk7XG59XG5leHBvcnRzLmdldFNob3cgPSBnZXRTaG93O1xuZnVuY3Rpb24gZ2V0RXEoRSkge1xuICAgIHZhciBpc1N1YnJlY29yZEUgPSBpc1N1YnJlY29yZChFKTtcbiAgICByZXR1cm4gKDAsIEVxXzEuZnJvbUVxdWFscykoZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGlzU3VicmVjb3JkRSh4KSh5KSAmJiBpc1N1YnJlY29yZEUoeSkoeCk7IH0pO1xufVxuZXhwb3J0cy5nZXRFcSA9IGdldEVxO1xuZnVuY3Rpb24gZ2V0TW9ub2lkKFMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgICAgICBpZiAoKDAsIGV4cG9ydHMuaXNFbXB0eSkoZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoMCwgZXhwb3J0cy5pc0VtcHR5KShzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHIgPSBPYmplY3QuYXNzaWduKHt9LCBmaXJzdCk7XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIHNlY29uZCkge1xuICAgICAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHNlY29uZCwgaykpIHtcbiAgICAgICAgICAgICAgICAgICAgcltrXSA9IF8uaGFzLmNhbGwoZmlyc3QsIGspID8gUy5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSkgOiBzZWNvbmRba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0sXG4gICAgICAgIGVtcHR5OiBleHBvcnRzLmVtcHR5XG4gICAgfTtcbn1cbmV4cG9ydHMuZ2V0TW9ub2lkID0gZ2V0TW9ub2lkO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5GdW5jdG9yID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBleHBvcnRzLl9tYXBcbn07XG4vKipcbiAqIFRha2VzIGEgdmFsdWUgYW5kIGEgYFJlYWRvbmx5UmVjb3JkYCBvZiBmdW5jdGlvbnMgYW5kIHJldHVybnMgYVxuICogYFJlYWRvbmx5UmVjb3JkYCBieSBhcHBseWluZyBlYWNoIGZ1bmN0aW9uIHRvIHRoZSBpbnB1dCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmxhcCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogY29uc3QgZmFiID0geyB4OiAobjogbnVtYmVyKSA9PiBgJHtufSB0aW1lcyAyYCwgeTogKG46IG51bWJlcikgPT4gYCR7biAqIDJ9YCB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmbGFwKDMpKGZhYiksIHtcbiAqICAgeDogXCIzIHRpbWVzIDJcIixcbiAqICAgeTogXCI2XCIsXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLmZsYXAgPSAoMCwgRnVuY3Rvcl8xLmZsYXApKGV4cG9ydHMuRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkZ1bmN0b3JXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IGV4cG9ydHMuX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IGV4cG9ydHMuX21hcFdpdGhJbmRleFxufTtcbi8qKlxuICogUHJvZHVjZXMgYSBgRm9sZGFibGVgIGluc3RhbmNlIGZvciBhIGBSZWFkb25seVJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlYWRvbmx5UmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBnZXRGb2xkYWJsZSA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgcmVkdWNlOiAoMCwgZXhwb3J0cy5fcmVkdWNlKShPKSxcbiAgICBmb2xkTWFwOiAoMCwgZXhwb3J0cy5fZm9sZE1hcCkoTyksXG4gICAgcmVkdWNlUmlnaHQ6ICgwLCBleHBvcnRzLl9yZWR1Y2VSaWdodCkoTylcbn0pOyB9O1xuZXhwb3J0cy5nZXRGb2xkYWJsZSA9IGdldEZvbGRhYmxlO1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBGb2xkYWJsZVdpdGhJbmRleDFgIGluc3RhbmNlIGZvciBhIGBSZWFkb25seVJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlYWRvbmx5UmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBnZXRGb2xkYWJsZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgcmVkdWNlOiAoMCwgZXhwb3J0cy5fcmVkdWNlKShPKSxcbiAgICBmb2xkTWFwOiAoMCwgZXhwb3J0cy5fZm9sZE1hcCkoTyksXG4gICAgcmVkdWNlUmlnaHQ6ICgwLCBleHBvcnRzLl9yZWR1Y2VSaWdodCkoTyksXG4gICAgcmVkdWNlV2l0aEluZGV4OiAoMCwgZXhwb3J0cy5fcmVkdWNlV2l0aEluZGV4KShPKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiAoMCwgZXhwb3J0cy5fZm9sZE1hcFdpdGhJbmRleCkoTyksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6ICgwLCBleHBvcnRzLl9yZWR1Y2VSaWdodFdpdGhJbmRleCkoTylcbn0pOyB9O1xuZXhwb3J0cy5nZXRGb2xkYWJsZVdpdGhJbmRleCA9IGdldEZvbGRhYmxlV2l0aEluZGV4O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5Db21wYWN0YWJsZSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIGNvbXBhY3Q6IGV4cG9ydHMuY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogZXhwb3J0cy5zZXBhcmF0ZVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuRmlsdGVyYWJsZSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogZXhwb3J0cy5fbWFwLFxuICAgIGNvbXBhY3Q6IGV4cG9ydHMuY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogZXhwb3J0cy5zZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IGV4cG9ydHMuX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IGV4cG9ydHMuX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IGV4cG9ydHMuX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IGV4cG9ydHMuX3BhcnRpdGlvbk1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuRmlsdGVyYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogZXhwb3J0cy5fbWFwLFxuICAgIG1hcFdpdGhJbmRleDogZXhwb3J0cy5fbWFwV2l0aEluZGV4LFxuICAgIGNvbXBhY3Q6IGV4cG9ydHMuY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogZXhwb3J0cy5zZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IGV4cG9ydHMuX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IGV4cG9ydHMuX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IGV4cG9ydHMuX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IGV4cG9ydHMuX3BhcnRpdGlvbk1hcCxcbiAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IGV4cG9ydHMuX2ZpbHRlck1hcFdpdGhJbmRleCxcbiAgICBmaWx0ZXJXaXRoSW5kZXg6IGV4cG9ydHMuX2ZpbHRlcldpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IGV4cG9ydHMuX3BhcnRpdGlvbk1hcFdpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25XaXRoSW5kZXg6IGV4cG9ydHMuX3BhcnRpdGlvbldpdGhJbmRleFxufTtcbi8qKlxuICogUHJvZHVjZXMgYSBgVHJhdmVyc2FibGVgIGluc3RhbmNlIGZvciBhIGBSZWFkb25seVJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlYWRvbmx5UmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBnZXRUcmF2ZXJzYWJsZSA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBleHBvcnRzLl9tYXAsXG4gICAgcmVkdWNlOiAoMCwgZXhwb3J0cy5fcmVkdWNlKShPKSxcbiAgICBmb2xkTWFwOiAoMCwgZXhwb3J0cy5fZm9sZE1hcCkoTyksXG4gICAgcmVkdWNlUmlnaHQ6ICgwLCBleHBvcnRzLl9yZWR1Y2VSaWdodCkoTyksXG4gICAgdHJhdmVyc2U6ICgwLCBleHBvcnRzLl90cmF2ZXJzZSkoTyksXG4gICAgc2VxdWVuY2U6ICgwLCBleHBvcnRzLl9zZXF1ZW5jZSkoTylcbn0pOyB9O1xuZXhwb3J0cy5nZXRUcmF2ZXJzYWJsZSA9IGdldFRyYXZlcnNhYmxlO1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBUcmF2ZXJzYWJsZVdpdGhJbmRleGAgaW5zdGFuY2UgZm9yIGEgYFJlYWRvbmx5UmVjb3JkYCwgdXNpbmcgdGhlXG4gKiBwcm92aWRlZCBgT3JkYCB0byBzb3J0IHRoZSBgUmVhZG9ubHlSZWNvcmRgJ3MgZW50cmllcyBieSBrZXkuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xudmFyIGdldFRyYXZlcnNhYmxlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IGV4cG9ydHMuX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IGV4cG9ydHMuX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2U6ICgwLCBleHBvcnRzLl9yZWR1Y2UpKE8pLFxuICAgIGZvbGRNYXA6ICgwLCBleHBvcnRzLl9mb2xkTWFwKShPKSxcbiAgICByZWR1Y2VSaWdodDogKDAsIGV4cG9ydHMuX3JlZHVjZVJpZ2h0KShPKSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6ICgwLCBleHBvcnRzLl9yZWR1Y2VXaXRoSW5kZXgpKE8pLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6ICgwLCBleHBvcnRzLl9mb2xkTWFwV2l0aEluZGV4KShPKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogKDAsIGV4cG9ydHMuX3JlZHVjZVJpZ2h0V2l0aEluZGV4KShPKSxcbiAgICB0cmF2ZXJzZTogKDAsIGV4cG9ydHMuX3RyYXZlcnNlKShPKSxcbiAgICBzZXF1ZW5jZTogKDAsIGV4cG9ydHMuX3NlcXVlbmNlKShPKSxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogX3RyYXZlcnNlV2l0aEluZGV4KE8pXG59KTsgfTtcbmV4cG9ydHMuZ2V0VHJhdmVyc2FibGVXaXRoSW5kZXggPSBnZXRUcmF2ZXJzYWJsZVdpdGhJbmRleDtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgZ2V0V2l0aGVyYWJsZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFQgPSAoMCwgZXhwb3J0cy5nZXRUcmF2ZXJzYWJsZSkoTyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICAgICAgbWFwOiBleHBvcnRzLl9tYXAsXG4gICAgICAgIHJlZHVjZTogKDAsIGV4cG9ydHMuX3JlZHVjZSkoTyksXG4gICAgICAgIGZvbGRNYXA6ICgwLCBleHBvcnRzLl9mb2xkTWFwKShPKSxcbiAgICAgICAgcmVkdWNlUmlnaHQ6ICgwLCBleHBvcnRzLl9yZWR1Y2VSaWdodCkoTyksXG4gICAgICAgIHRyYXZlcnNlOiBULnRyYXZlcnNlLFxuICAgICAgICBzZXF1ZW5jZTogVC5zZXF1ZW5jZSxcbiAgICAgICAgY29tcGFjdDogZXhwb3J0cy5jb21wYWN0LFxuICAgICAgICBzZXBhcmF0ZTogZXhwb3J0cy5zZXBhcmF0ZSxcbiAgICAgICAgZmlsdGVyOiBleHBvcnRzLl9maWx0ZXIsXG4gICAgICAgIGZpbHRlck1hcDogZXhwb3J0cy5fZmlsdGVyTWFwLFxuICAgICAgICBwYXJ0aXRpb246IGV4cG9ydHMuX3BhcnRpdGlvbixcbiAgICAgICAgcGFydGl0aW9uTWFwOiBleHBvcnRzLl9wYXJ0aXRpb25NYXAsXG4gICAgICAgIHdpdGhlcjogKDAsIFdpdGhlcmFibGVfMS53aXRoZXJEZWZhdWx0KShULCBleHBvcnRzLkNvbXBhY3RhYmxlKSxcbiAgICAgICAgd2lsdDogKDAsIFdpdGhlcmFibGVfMS53aWx0RGVmYXVsdCkoVCwgZXhwb3J0cy5Db21wYWN0YWJsZSlcbiAgICB9O1xufTtcbmV4cG9ydHMuZ2V0V2l0aGVyYWJsZSA9IGdldFdpdGhlcmFibGU7XG4vKipcbiAqIEdpdmVuIGEgYFNlbWlncm91cGAgaW4gdGhlIGJhc2UgdHlwZSwgaXQgcHJvZHVjZXMgYSBgU2VtaWdyb3VwYFxuICogaW4gdGhlIGBSZWFkb25seVJlY29yZGAgb2YgdGhlIGJhc2UgdHlwZS5cbiAqIFRoZSByZXN1bHRpbmcgYFNlbWlncm91cGAgY29uY2F0ZW5hdGVzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBieVxuICogYHVuaW9uYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0VW5pb25TZW1pZ3JvdXAsIFJlYWRvbmx5UmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IFNlbWlncm91cCB9IGZyb20gXCJmcC10cy9TZW1pZ3JvdXBcIlxuICpcbiAqIGNvbnN0IHNOdW1iZXI6IFNlbWlncm91cDxudW1iZXI+ID0geyBjb25jYXQ6ICh4LCB5KSA9PiB4IC0geSB9O1xuICogY29uc3Qgc1JlYWRvbmx5UmVjb3JkOiBTZW1pZ3JvdXA8UmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PiA9IGdldFVuaW9uU2VtaWdyb3VwKHNOdW1iZXIpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzUmVhZG9ubHlSZWNvcmQuY29uY2F0KHsgYTogMSwgYjogMiB9LCB7IGI6IDMsIGM6IDQgfSksIHsgYTogMSwgYjogLTEsIGM6IDQgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgZ2V0VW5pb25TZW1pZ3JvdXAgPSBmdW5jdGlvbiAoUykge1xuICAgIHZhciB1bmlvblMgPSAoMCwgZXhwb3J0cy51bmlvbikoUyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gdW5pb25TKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG5leHBvcnRzLmdldFVuaW9uU2VtaWdyb3VwID0gZ2V0VW5pb25TZW1pZ3JvdXA7XG4vKipcbiAqIFNhbWUgYXMgYGdldE1vbm9pZGAuXG4gKiBSZXR1cm5zIGEgYE1vbm9pZGAgaW5zdGFuY2UgZm9yIGBSZWFkb25seVJlY29yZGBzIGdpdmVuIGEgYFNlbWlncm91cGBcbiAqIGluc3RhbmNlIGZvciB0aGUgYmFzZSB0eXBlLlxuICogVGhlIGBNb25vaWRgIG1ha2VzIHRoZSB1bmlvbiBvZiB0d28gYFJlYWRvbmx5UmVjb3JkYHMgY29tYmluaW5nIHRoZVxuICogZW50cmllcyB0aGF0IGhhdmUgdGhlIHNhbWUga2V5IHdpdGggdGhlIHByb3ZpZGVkIGBTZW1pZ3JvdXBgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgeyBnZXRVbmlvbk1vbm9pZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRVbmlvbk1vbm9pZChTZW1pZ3JvdXBTdW0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdCh7IGZvbzogMTIzLCBiYXI6IDIzNCB9LCB7IGZvbzogNDU2LCBiYXo6IDU2NyB9KSwgeyBmb286IDU3OSAsIGJhcjogMjM0LCBiYXo6IDU2NyB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBnZXRVbmlvbk1vbm9pZCA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogKDAsIGV4cG9ydHMuZ2V0VW5pb25TZW1pZ3JvdXApKFMpLmNvbmNhdCxcbiAgICBlbXB0eTogZXhwb3J0cy5lbXB0eVxufSk7IH07XG5leHBvcnRzLmdldFVuaW9uTW9ub2lkID0gZ2V0VW5pb25Nb25vaWQ7XG4vKipcbiAqIEdpdmVuIGEgYFNlbWlncm91cGAgaW4gdGhlIGJhc2UgdHlwZSwgaXQgcHJvZHVjZXMgYSBgU2VtaWdyb3VwYFxuICogaW4gdGhlIGBSZWFkb25seVJlY29yZGAgb2YgdGhlIGJhc2UgdHlwZS5cbiAqIFRoZSByZXN1bHRpbmcgYFNlbWlncm91cGAgY29uY2F0ZW5hdGVzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBieVxuICogYGludGVyc2VjdGlvbmAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEludGVyc2VjdGlvblNlbWlncm91cCwgUmVhZG9ubHlSZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgU2VtaWdyb3VwIH0gZnJvbSBcImZwLXRzL1NlbWlncm91cFwiXG4gKlxuICogY29uc3Qgc051bWJlcjogU2VtaWdyb3VwPG51bWJlcj4gPSB7IGNvbmNhdDogKHgsIHkpID0+IHggLSB5IH07XG4gKiBjb25zdCBzUmVhZG9ubHlSZWNvcmQ6IFNlbWlncm91cDxSZWFkb25seVJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0gZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwKHNOdW1iZXIpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzUmVhZG9ubHlSZWNvcmQuY29uY2F0KHsgYTogMSwgYjogMiB9LCB7IGI6IDMsIGM6IDQgfSksIHsgYjogLTEgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwID0gZnVuY3Rpb24gKFMpIHtcbiAgICB2YXIgaW50ZXJzZWN0aW9uUyA9ICgwLCBleHBvcnRzLmludGVyc2VjdGlvbikoUyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gaW50ZXJzZWN0aW9uUyhzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuZXhwb3J0cy5nZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAgPSBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXA7XG4vKipcbiAqIFByb2R1Y2VzIGEgYE1hZ21hYCB3aXRoIGEgYGNvbmNhdGAgZnVuY3Rpb24gdGhhdCBjb21iaW5lc1xuICogdHdvIGBSZWFkb25seVJlY29yZGBzIGJ5IG1ha2luZyB0aGUgYGRpZmZlcmVuY2VgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXREaWZmZXJlbmNlTWFnbWEsIGRpZmZlcmVuY2UsIFJlYWRvbmx5UmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IE1hZ21hIH0gZnJvbSBcImZwLXRzL01hZ21hXCJcbiAqXG4gKiBjb25zdCByMSA9IHsgYTogMywgYzogMyB9O1xuICogY29uc3QgcjIgPSB7IGE6IDEsIGI6IDIgfTtcbiAqIGNvbnN0IG06IE1hZ21hPFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPj4gPSBnZXREaWZmZXJlbmNlTWFnbWE8bnVtYmVyPigpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtLmNvbmNhdChyMSwgcjIpLCBkaWZmZXJlbmNlKHIyKShyMSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtLmNvbmNhdChyMSwgcjIpLCB7IGM6IDMsIGI6IDIgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgZ2V0RGlmZmVyZW5jZU1hZ21hID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiAoMCwgZXhwb3J0cy5kaWZmZXJlbmNlKShzZWNvbmQpKGZpcnN0KTsgfVxufSk7IH07XG5leHBvcnRzLmdldERpZmZlcmVuY2VNYWdtYSA9IGdldERpZmZlcmVuY2VNYWdtYTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIGBnZXRGb2xkYWJsZWAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLkZvbGRhYmxlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLl9yZWR1Y2UpKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLl9mb2xkTWFwKShTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gKDAsIGV4cG9ydHMuX3JlZHVjZVJpZ2h0KShTLk9yZClcbn07XG4vKipcbiAqIFVzZSBgZ2V0Rm9sZGFibGVXaXRoSW5kZXhgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5Gb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy5fcmVkdWNlKShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy5fZm9sZE1hcCkoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLl9yZWR1Y2VSaWdodCkoUy5PcmQpLFxuICAgIHJlZHVjZVdpdGhJbmRleDogLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy5fcmVkdWNlV2l0aEluZGV4KShTLk9yZCksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy5fZm9sZE1hcFdpdGhJbmRleCkoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiAvKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLl9yZWR1Y2VSaWdodFdpdGhJbmRleCkoUy5PcmQpXG59O1xuLyoqXG4gKiBVc2UgYGdldFRyYXZlcnNhYmxlYCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IGV4cG9ydHMuX21hcCxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gKDAsIGV4cG9ydHMuX3JlZHVjZSkoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gKDAsIGV4cG9ydHMuX2ZvbGRNYXApKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy5fcmVkdWNlUmlnaHQpKFMuT3JkKSxcbiAgICB0cmF2ZXJzZTogLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy5fdHJhdmVyc2UpKFMuT3JkKSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2Vcbn07XG4vKipcbiAqIFVzZSBgZ2V0VHJhdmVyc2FibGVXaXRoSW5kZXhgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5UcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogZXhwb3J0cy5fbWFwLFxuICAgIG1hcFdpdGhJbmRleDogZXhwb3J0cy5fbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy5fcmVkdWNlKShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy5fZm9sZE1hcCkoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLl9yZWR1Y2VSaWdodCkoUy5PcmQpLFxuICAgIHJlZHVjZVdpdGhJbmRleDogLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy5fcmVkdWNlV2l0aEluZGV4KShTLk9yZCksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy5fZm9sZE1hcFdpdGhJbmRleCkoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiAvKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLl9yZWR1Y2VSaWdodFdpdGhJbmRleCkoUy5PcmQpLFxuICAgIHRyYXZlcnNlOiAvKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLl90cmF2ZXJzZSkoUy5PcmQpLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfdHJhdmVyc2VXaXRoSW5kZXgoUy5PcmQpXG59O1xudmFyIF93aXRoZXIgPSAvKiNfX1BVUkVfXyovICgwLCBXaXRoZXJhYmxlXzEud2l0aGVyRGVmYXVsdCkoZXhwb3J0cy5UcmF2ZXJzYWJsZSwgZXhwb3J0cy5Db21wYWN0YWJsZSk7XG52YXIgX3dpbHQgPSAvKiNfX1BVUkVfXyovICgwLCBXaXRoZXJhYmxlXzEud2lsdERlZmF1bHQpKGV4cG9ydHMuVHJhdmVyc2FibGUsIGV4cG9ydHMuQ29tcGFjdGFibGUpO1xuLyoqXG4gKiBVc2UgYGdldFdpdGhlcmFibGVgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5XaXRoZXJhYmxlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBleHBvcnRzLl9tYXAsXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLl9yZWR1Y2UpKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLl9mb2xkTWFwKShTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gKDAsIGV4cG9ydHMuX3JlZHVjZVJpZ2h0KShTLk9yZCksXG4gICAgdHJhdmVyc2U6IC8qI19fUFVSRV9fKi8gKDAsIGV4cG9ydHMuX3RyYXZlcnNlKShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIGNvbXBhY3Q6IGV4cG9ydHMuY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogZXhwb3J0cy5zZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IGV4cG9ydHMuX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IGV4cG9ydHMuX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IGV4cG9ydHMuX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IGV4cG9ydHMuX3BhcnRpdGlvbk1hcCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4vKipcbiAqIFVzZSBbYHVwc2VydEF0YF0oI3Vwc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuaW5zZXJ0QXQgPSBleHBvcnRzLnVwc2VydEF0O1xuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkoaywgcikge1xuICAgIHJldHVybiBfLmhhcy5jYWxsKHIgPT09IHVuZGVmaW5lZCA/IHRoaXMgOiByLCBrKTtcbn1cbmV4cG9ydHMuaGFzT3duUHJvcGVydHkgPSBoYXNPd25Qcm9wZXJ0eTtcbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgUlIuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUlIucmVhZG9ubHlSZWNvcmRgXG4gKiAod2hlcmUgYFJSYCBpcyBmcm9tIGBpbXBvcnQgUlIgZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnRzLnJlYWRvbmx5UmVjb3JkID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBleHBvcnRzLl9tYXAsXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLl9yZWR1Y2UpKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLl9mb2xkTWFwKShTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gKDAsIGV4cG9ydHMuX3JlZHVjZVJpZ2h0KShTLk9yZCksXG4gICAgdHJhdmVyc2U6IC8qI19fUFVSRV9fKi8gKDAsIGV4cG9ydHMuX3RyYXZlcnNlKShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIGNvbXBhY3Q6IGV4cG9ydHMuY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogZXhwb3J0cy5zZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IGV4cG9ydHMuX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IGV4cG9ydHMuX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IGV4cG9ydHMuX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IGV4cG9ydHMuX3BhcnRpdGlvbk1hcCxcbiAgICBtYXBXaXRoSW5kZXg6IGV4cG9ydHMuX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gKDAsIGV4cG9ydHMuX3JlZHVjZVdpdGhJbmRleCkoUy5PcmQpLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gKDAsIGV4cG9ydHMuX2ZvbGRNYXBXaXRoSW5kZXgpKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy5fcmVkdWNlUmlnaHRXaXRoSW5kZXgpKFMuT3JkKSxcbiAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IGV4cG9ydHMuX2ZpbHRlck1hcFdpdGhJbmRleCxcbiAgICBmaWx0ZXJXaXRoSW5kZXg6IGV4cG9ydHMuX2ZpbHRlcldpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IGV4cG9ydHMuX3BhcnRpdGlvbk1hcFdpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25XaXRoSW5kZXg6IGV4cG9ydHMuX3BhcnRpdGlvbldpdGhJbmRleCxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfdHJhdmVyc2VXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRBcHBsaWNhdGl2ZUNvbXBvc2l0aW9uID0gZXhwb3J0cy5nZXRBcHBsaWNhdGl2ZU1vbm9pZCA9IHZvaWQgMDtcbi8qKlxuICogVGhlIGBBcHBsaWNhdGl2ZWAgdHlwZSBjbGFzcyBleHRlbmRzIHRoZSBgQXBwbHlgIHR5cGUgY2xhc3Mgd2l0aCBhIGBvZmAgZnVuY3Rpb24sIHdoaWNoIGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSB2YWx1ZXNcbiAqIG9mIHR5cGUgYGYgYWAgZnJvbSB2YWx1ZXMgb2YgdHlwZSBgYWAuXG4gKlxuICogV2hlcmUgYEFwcGx5YCBwcm92aWRlcyB0aGUgYWJpbGl0eSB0byBsaWZ0IGZ1bmN0aW9ucyBvZiB0d28gb3IgbW9yZSBhcmd1bWVudHMgdG8gZnVuY3Rpb25zIHdob3NlIGFyZ3VtZW50cyBhcmVcbiAqIHdyYXBwZWQgdXNpbmcgYGZgLCBhbmQgYEZ1bmN0b3JgIHByb3ZpZGVzIHRoZSBhYmlsaXR5IHRvIGxpZnQgZnVuY3Rpb25zIG9mIG9uZSBhcmd1bWVudCwgYHB1cmVgIGNhbiBiZSBzZWVuIGFzIHRoZVxuICogZnVuY3Rpb24gd2hpY2ggbGlmdHMgZnVuY3Rpb25zIG9mIF96ZXJvXyBhcmd1bWVudHMuIFRoYXQgaXMsIGBBcHBsaWNhdGl2ZWAgZnVuY3RvcnMgc3VwcG9ydCBhIGxpZnRpbmcgb3BlcmF0aW9uIGZvclxuICogYW55IG51bWJlciBvZiBmdW5jdGlvbiBhcmd1bWVudHMuXG4gKlxuICogSW5zdGFuY2VzIG11c3Qgc2F0aXNmeSB0aGUgZm9sbG93aW5nIGxhd3MgaW4gYWRkaXRpb24gdG8gdGhlIGBBcHBseWAgbGF3czpcbiAqXG4gKiAxLiBJZGVudGl0eTogYEEuYXAoQS5vZihhID0+IGEpLCBmYSkgPC0+IGZhYFxuICogMi4gSG9tb21vcnBoaXNtOiBgQS5hcChBLm9mKGFiKSwgQS5vZihhKSkgPC0+IEEub2YoYWIoYSkpYFxuICogMy4gSW50ZXJjaGFuZ2U6IGBBLmFwKGZhYiwgQS5vZihhKSkgPC0+IEEuYXAoQS5vZihhYiA9PiBhYihhKSksIGZhYilgXG4gKlxuICogTm90ZS4gYEZ1bmN0b3JgJ3MgYG1hcGAgY2FuIGJlIGRlcml2ZWQ6IGBBLm1hcCh4LCBmKSA9IEEuYXAoQS5vZihmKSwgeClgXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBBcHBseV8xID0gcmVxdWlyZShcIi4vQXBwbHlcIik7XG52YXIgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2Z1bmN0aW9uXCIpO1xudmFyIEZ1bmN0b3JfMSA9IHJlcXVpcmUoXCIuL0Z1bmN0b3JcIik7XG5mdW5jdGlvbiBnZXRBcHBsaWNhdGl2ZU1vbm9pZChGKSB7XG4gICAgdmFyIGYgPSAoMCwgQXBwbHlfMS5nZXRBcHBseVNlbWlncm91cCkoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChNKSB7IHJldHVybiAoe1xuICAgICAgICBjb25jYXQ6IGYoTSkuY29uY2F0LFxuICAgICAgICBlbXB0eTogRi5vZihNLmVtcHR5KVxuICAgIH0pOyB9O1xufVxuZXhwb3J0cy5nZXRBcHBsaWNhdGl2ZU1vbm9pZCA9IGdldEFwcGxpY2F0aXZlTW9ub2lkO1xuLyoqIEBkZXByZWNhdGVkICovXG5mdW5jdGlvbiBnZXRBcHBsaWNhdGl2ZUNvbXBvc2l0aW9uKEYsIEcpIHtcbiAgICB2YXIgbWFwID0gKDAsIEZ1bmN0b3JfMS5nZXRGdW5jdG9yQ29tcG9zaXRpb24pKEYsIEcpLm1hcDtcbiAgICB2YXIgX2FwID0gKDAsIEFwcGx5XzEuYXApKEYsIEcpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG1hcDogbWFwLFxuICAgICAgICBvZjogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIEYub2YoRy5vZihhKSk7IH0sXG4gICAgICAgIGFwOiBmdW5jdGlvbiAoZmdhYiwgZmdhKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmZ2FiLCBfYXAoZmdhKSk7IH1cbiAgICB9O1xufVxuZXhwb3J0cy5nZXRBcHBsaWNhdGl2ZUNvbXBvc2l0aW9uID0gZ2V0QXBwbGljYXRpdmVDb21wb3NpdGlvbjtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5hbmQgPSBleHBvcnRzLm9yID0gZXhwb3J0cy5ub3QgPSBleHBvcnRzLkNvbnRyYXZhcmlhbnQgPSBleHBvcnRzLmdldE1vbm9pZEFsbCA9IGV4cG9ydHMuZ2V0U2VtaWdyb3VwQWxsID0gZXhwb3J0cy5nZXRNb25vaWRBbnkgPSBleHBvcnRzLmdldFNlbWlncm91cEFueSA9IGV4cG9ydHMuVVJJID0gZXhwb3J0cy5jb250cmFtYXAgPSB2b2lkIDA7XG52YXIgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2Z1bmN0aW9uXCIpO1xudmFyIGNvbnRyYW1hcF8gPSBmdW5jdGlvbiAocHJlZGljYXRlLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShwcmVkaWNhdGUsICgwLCBleHBvcnRzLmNvbnRyYW1hcCkoZikpOyB9O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBjb250cmFtYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5mbG93KShmLCBwcmVkaWNhdGUpO1xuICAgIH07XG59O1xuZXhwb3J0cy5jb250cmFtYXAgPSBjb250cmFtYXA7XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0cy5VUkkgPSAnUHJlZGljYXRlJztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgZ2V0U2VtaWdyb3VwQW55ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmaXJzdCwgKDAsIGV4cG9ydHMub3IpKHNlY29uZCkpOyB9XG59KTsgfTtcbmV4cG9ydHMuZ2V0U2VtaWdyb3VwQW55ID0gZ2V0U2VtaWdyb3VwQW55O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBnZXRNb25vaWRBbnkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogKDAsIGV4cG9ydHMuZ2V0U2VtaWdyb3VwQW55KSgpLmNvbmNhdCxcbiAgICBlbXB0eTogZnVuY3Rpb25fMS5jb25zdEZhbHNlXG59KTsgfTtcbmV4cG9ydHMuZ2V0TW9ub2lkQW55ID0gZ2V0TW9ub2lkQW55O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBnZXRTZW1pZ3JvdXBBbGwgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZpcnN0LCAoMCwgZXhwb3J0cy5hbmQpKHNlY29uZCkpOyB9XG59KTsgfTtcbmV4cG9ydHMuZ2V0U2VtaWdyb3VwQWxsID0gZ2V0U2VtaWdyb3VwQWxsO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBnZXRNb25vaWRBbGwgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogKDAsIGV4cG9ydHMuZ2V0U2VtaWdyb3VwQWxsKSgpLmNvbmNhdCxcbiAgICBlbXB0eTogZnVuY3Rpb25fMS5jb25zdFRydWVcbn0pOyB9O1xuZXhwb3J0cy5nZXRNb25vaWRBbGwgPSBnZXRNb25vaWRBbGw7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0cy5Db250cmF2YXJpYW50ID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgY29udHJhbWFwOiBjb250cmFtYXBfXG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgbm90ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgICByZXR1cm4gIXByZWRpY2F0ZShhKTtcbiAgICB9O1xufTtcbmV4cG9ydHMubm90ID0gbm90O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciBvciA9IGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0KGEpIHx8IHNlY29uZChhKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbmV4cG9ydHMub3IgPSBvcjtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgYW5kID0gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3QoYSkgJiYgc2Vjb25kKGEpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuZXhwb3J0cy5hbmQgPSBhbmQ7XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5XaXRoZXJhYmxlID0gZXhwb3J0cy53aWx0ID0gZXhwb3J0cy53aXRoZXIgPSBleHBvcnRzLlRyYXZlcnNhYmxlID0gZXhwb3J0cy5zZXF1ZW5jZSA9IGV4cG9ydHMudHJhdmVyc2UgPSBleHBvcnRzLkZpbHRlcmFibGUgPSBleHBvcnRzLnBhcnRpdGlvbk1hcCA9IGV4cG9ydHMucGFydGl0aW9uID0gZXhwb3J0cy5maWx0ZXJNYXAgPSBleHBvcnRzLmZpbHRlciA9IGV4cG9ydHMuQ29tcGFjdGFibGUgPSBleHBvcnRzLnNlcGFyYXRlID0gZXhwb3J0cy5jb21wYWN0ID0gZXhwb3J0cy5FeHRlbmQgPSBleHBvcnRzLmV4dGVuZCA9IGV4cG9ydHMuQWx0ZXJuYXRpdmUgPSBleHBvcnRzLmd1YXJkID0gZXhwb3J0cy5aZXJvID0gZXhwb3J0cy56ZXJvID0gZXhwb3J0cy5BbHQgPSBleHBvcnRzLmFsdCA9IGV4cG9ydHMuYWx0VyA9IGV4cG9ydHMub3JFbHNlID0gZXhwb3J0cy5Gb2xkYWJsZSA9IGV4cG9ydHMucmVkdWNlUmlnaHQgPSBleHBvcnRzLmZvbGRNYXAgPSBleHBvcnRzLnJlZHVjZSA9IGV4cG9ydHMuTW9uYWQgPSBleHBvcnRzLkNoYWluID0gZXhwb3J0cy5mbGF0TWFwID0gZXhwb3J0cy5BcHBsaWNhdGl2ZSA9IGV4cG9ydHMuQXBwbHkgPSBleHBvcnRzLmFwID0gZXhwb3J0cy5Qb2ludGVkID0gZXhwb3J0cy5vZiA9IGV4cG9ydHMuYXNVbml0ID0gZXhwb3J0cy5hcyA9IGV4cG9ydHMuRnVuY3RvciA9IGV4cG9ydHMubWFwID0gZXhwb3J0cy5nZXRNb25vaWQgPSBleHBvcnRzLmdldE9yZCA9IGV4cG9ydHMuZ2V0RXEgPSBleHBvcnRzLmdldFNob3cgPSBleHBvcnRzLlVSSSA9IGV4cG9ydHMuZ2V0UmlnaHQgPSBleHBvcnRzLmdldExlZnQgPSBleHBvcnRzLmZyb21QcmVkaWNhdGUgPSBleHBvcnRzLnNvbWUgPSBleHBvcnRzLm5vbmUgPSB2b2lkIDA7XG5leHBvcnRzLmdldEZpcnN0TW9ub2lkID0gZXhwb3J0cy5nZXRBcHBseU1vbm9pZCA9IGV4cG9ydHMuZ2V0QXBwbHlTZW1pZ3JvdXAgPSBleHBvcnRzLm9wdGlvbiA9IGV4cG9ydHMubWFwTnVsbGFibGUgPSBleHBvcnRzLmdldFJlZmluZW1lbnQgPSBleHBvcnRzLmNoYWluRmlyc3QgPSBleHBvcnRzLmNoYWluID0gZXhwb3J0cy5zZXF1ZW5jZUFycmF5ID0gZXhwb3J0cy50cmF2ZXJzZUFycmF5ID0gZXhwb3J0cy50cmF2ZXJzZUFycmF5V2l0aEluZGV4ID0gZXhwb3J0cy50cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXggPSBleHBvcnRzLnRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4ID0gZXhwb3J0cy5BcFQgPSBleHBvcnRzLmFwUyA9IGV4cG9ydHMuYmluZCA9IGV4cG9ydHMubGV0ID0gZXhwb3J0cy5iaW5kVG8gPSBleHBvcnRzLkRvID0gZXhwb3J0cy5leGlzdHMgPSBleHBvcnRzLmVsZW0gPSBleHBvcnRzLnRvVW5kZWZpbmVkID0gZXhwb3J0cy50b051bGxhYmxlID0gZXhwb3J0cy5jaGFpbk51bGxhYmxlSyA9IGV4cG9ydHMuZnJvbU51bGxhYmxlSyA9IGV4cG9ydHMudHJ5Q2F0Y2hLID0gZXhwb3J0cy50cnlDYXRjaCA9IGV4cG9ydHMuZnJvbU51bGxhYmxlID0gZXhwb3J0cy5jaGFpbkZpcnN0RWl0aGVySyA9IGV4cG9ydHMuY2hhaW5FaXRoZXJLID0gZXhwb3J0cy5mcm9tRWl0aGVySyA9IGV4cG9ydHMuZHVwbGljYXRlID0gZXhwb3J0cy50YXBFaXRoZXIgPSBleHBvcnRzLnRhcCA9IGV4cG9ydHMuZmxhdHRlbiA9IGV4cG9ydHMuYXBTZWNvbmQgPSBleHBvcnRzLmFwRmlyc3QgPSBleHBvcnRzLmZsYXAgPSBleHBvcnRzLmdldE9yRWxzZSA9IGV4cG9ydHMuZ2V0T3JFbHNlVyA9IGV4cG9ydHMuZm9sZCA9IGV4cG9ydHMubWF0Y2ggPSBleHBvcnRzLmZvbGRXID0gZXhwb3J0cy5tYXRjaFcgPSBleHBvcnRzLmlzTm9uZSA9IGV4cG9ydHMuaXNTb21lID0gZXhwb3J0cy5Gcm9tRWl0aGVyID0gZXhwb3J0cy5mcm9tRWl0aGVyID0gZXhwb3J0cy5Nb25hZFRocm93ID0gZXhwb3J0cy50aHJvd0Vycm9yID0gdm9pZCAwO1xuZXhwb3J0cy5nZXRMYXN0TW9ub2lkID0gdm9pZCAwO1xudmFyIEFwcGxpY2F0aXZlXzEgPSByZXF1aXJlKFwiLi9BcHBsaWNhdGl2ZVwiKTtcbnZhciBBcHBseV8xID0gcmVxdWlyZShcIi4vQXBwbHlcIik7XG52YXIgY2hhaW5hYmxlID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL0NoYWluXCIpKTtcbnZhciBGcm9tRWl0aGVyXzEgPSByZXF1aXJlKFwiLi9Gcm9tRWl0aGVyXCIpO1xudmFyIGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiLi9mdW5jdGlvblwiKTtcbnZhciBGdW5jdG9yXzEgPSByZXF1aXJlKFwiLi9GdW5jdG9yXCIpO1xudmFyIF8gPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vaW50ZXJuYWxcIikpO1xudmFyIFByZWRpY2F0ZV8xID0gcmVxdWlyZShcIi4vUHJlZGljYXRlXCIpO1xudmFyIFNlbWlncm91cF8xID0gcmVxdWlyZShcIi4vU2VtaWdyb3VwXCIpO1xudmFyIFNlcGFyYXRlZF8xID0gcmVxdWlyZShcIi4vU2VwYXJhdGVkXCIpO1xudmFyIFdpdGhlcmFibGVfMSA9IHJlcXVpcmUoXCIuL1dpdGhlcmFibGVcIik7XG52YXIgWmVyb18xID0gcmVxdWlyZShcIi4vWmVyb1wiKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBgTm9uZWAgZG9lc24ndCBoYXZlIGEgY29uc3RydWN0b3IsIGluc3RlYWQgeW91IGNhbiB1c2UgaXQgZGlyZWN0bHkgYXMgYSB2YWx1ZS4gUmVwcmVzZW50cyBhIG1pc3NpbmcgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMubm9uZSA9IF8ubm9uZTtcbi8qKlxuICogQ29uc3RydWN0cyBhIGBTb21lYC4gUmVwcmVzZW50cyBhbiBvcHRpb25hbCB2YWx1ZSB0aGF0IGV4aXN0cy5cbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5zb21lID0gXy5zb21lO1xuZnVuY3Rpb24gZnJvbVByZWRpY2F0ZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChwcmVkaWNhdGUoYSkgPyAoMCwgZXhwb3J0cy5zb21lKShhKSA6IGV4cG9ydHMubm9uZSk7IH07XG59XG5leHBvcnRzLmZyb21QcmVkaWNhdGUgPSBmcm9tUHJlZGljYXRlO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBgTGVmdGAgdmFsdWUgb2YgYW4gYEVpdGhlcmAgaWYgcG9zc2libGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldExlZnQsIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyByaWdodCwgbGVmdCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldExlZnQocmlnaHQoMSkpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRMZWZ0KGxlZnQoJ2EnKSksIHNvbWUoJ2EnKSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIGdldExlZnQgPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChtYS5fdGFnID09PSAnUmlnaHQnID8gZXhwb3J0cy5ub25lIDogKDAsIGV4cG9ydHMuc29tZSkobWEubGVmdCkpOyB9O1xuZXhwb3J0cy5nZXRMZWZ0ID0gZ2V0TGVmdDtcbi8qKlxuICogUmV0dXJucyB0aGUgYFJpZ2h0YCB2YWx1ZSBvZiBhbiBgRWl0aGVyYCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0UmlnaHQsIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyByaWdodCwgbGVmdCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldFJpZ2h0KHJpZ2h0KDEpKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0UmlnaHQobGVmdCgnYScpKSwgbm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIGdldFJpZ2h0ID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAobWEuX3RhZyA9PT0gJ0xlZnQnID8gZXhwb3J0cy5ub25lIDogKDAsIGV4cG9ydHMuc29tZSkobWEucmlnaHQpKTsgfTtcbmV4cG9ydHMuZ2V0UmlnaHQgPSBnZXRSaWdodDtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMubWFwKShmKSk7IH07XG52YXIgX2FwID0gZnVuY3Rpb24gKGZhYiwgZmEpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhYiwgKDAsIGV4cG9ydHMuYXApKGZhKSk7IH07XG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLnJlZHVjZSkoYiwgZikpOyB9O1xudmFyIF9mb2xkTWFwID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcE0gPSAoMCwgZXhwb3J0cy5mb2xkTWFwKShNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbnZhciBfcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5yZWR1Y2VSaWdodCkoYiwgZikpOyB9O1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9ICgwLCBleHBvcnRzLnRyYXZlcnNlKShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKSh0YSwgdHJhdmVyc2VGKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9hbHQgPSBmdW5jdGlvbiAoZmEsIHRoYXQpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5hbHQpKHRoYXQpKTsgfTtcbnZhciBfZmlsdGVyID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5maWx0ZXIpKHByZWRpY2F0ZSkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZmlsdGVyTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMuZmlsdGVyTWFwKShmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9leHRlbmQgPSBmdW5jdGlvbiAod2EsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKHdhLCAoMCwgZXhwb3J0cy5leHRlbmQpKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbiA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7XG4gICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5wYXJ0aXRpb24pKHByZWRpY2F0ZSkpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLnBhcnRpdGlvbk1hcCkoZikpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5VUkkgPSAnT3B0aW9uJztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBnZXRTaG93ID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgc2hvdzogZnVuY3Rpb24gKG1hKSB7IHJldHVybiAoKDAsIGV4cG9ydHMuaXNOb25lKShtYSkgPyAnbm9uZScgOiBcInNvbWUoXCIuY29uY2F0KFMuc2hvdyhtYS52YWx1ZSksIFwiKVwiKSk7IH1cbn0pOyB9O1xuZXhwb3J0cy5nZXRTaG93ID0gZ2V0U2hvdztcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGdldEVxIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMobm9uZSwgbm9uZSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMobm9uZSwgc29tZSgxKSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIG5vbmUpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBzb21lKDIpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgc29tZSgxKSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBnZXRFcSA9IGZ1bmN0aW9uIChFKSB7IHJldHVybiAoe1xuICAgIGVxdWFsczogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggPT09IHkgfHwgKCgwLCBleHBvcnRzLmlzTm9uZSkoeCkgPyAoMCwgZXhwb3J0cy5pc05vbmUpKHkpIDogKDAsIGV4cG9ydHMuaXNOb25lKSh5KSA/IGZhbHNlIDogRS5lcXVhbHMoeC52YWx1ZSwgeS52YWx1ZSkpOyB9XG59KTsgfTtcbmV4cG9ydHMuZ2V0RXEgPSBnZXRFcTtcbi8qKlxuICogVGhlIGBPcmRgIGluc3RhbmNlIGFsbG93cyBgT3B0aW9uYCB2YWx1ZXMgdG8gYmUgY29tcGFyZWQgd2l0aFxuICogYGNvbXBhcmVgLCB3aGVuZXZlciB0aGVyZSBpcyBhbiBgT3JkYCBpbnN0YW5jZSBmb3JcbiAqIHRoZSB0eXBlIHRoZSBgT3B0aW9uYCBjb250YWlucy5cbiAqXG4gKiBgTm9uZWAgaXMgY29uc2lkZXJlZCB0byBiZSBsZXNzIHRoYW4gYW55IGBTb21lYCB2YWx1ZS5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGdldE9yZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE8gPSBnZXRPcmQoTi5PcmQpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKG5vbmUsIG5vbmUpLCAwKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShub25lLCBzb21lKDEpKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIG5vbmUpLCAxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBzb21lKDIpKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIHNvbWUoMSkpLCAwKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgZ2V0T3JkID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgZXF1YWxzOiAoMCwgZXhwb3J0cy5nZXRFcSkoTykuZXF1YWxzLFxuICAgIGNvbXBhcmU6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiAoeCA9PT0geSA/IDAgOiAoMCwgZXhwb3J0cy5pc1NvbWUpKHgpID8gKCgwLCBleHBvcnRzLmlzU29tZSkoeSkgPyBPLmNvbXBhcmUoeC52YWx1ZSwgeS52YWx1ZSkgOiAxKSA6IC0xKTsgfVxufSk7IH07XG5leHBvcnRzLmdldE9yZCA9IGdldE9yZDtcbi8qKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgbGVmdC1tb3N0IG5vbi1gTm9uZWAgdmFsdWUuIElmIGJvdGggb3BlcmFuZHMgYXJlIGBTb21lYHMgdGhlbiB0aGUgaW5uZXIgdmFsdWVzIGFyZVxuICogY29uY2F0ZW5hdGVkIHVzaW5nIHRoZSBwcm92aWRlZCBgU2VtaWdyb3VwYFxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgICAgICAgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShjb25jYXQoYSwgYikpIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgU2VtaWdyb3VwU3VtIH0gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRNb25vaWQoU2VtaWdyb3VwU3VtKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMSkpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgzKSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuICgoMCwgZXhwb3J0cy5pc05vbmUpKHgpID8geSA6ICgwLCBleHBvcnRzLmlzTm9uZSkoeSkgPyB4IDogKDAsIGV4cG9ydHMuc29tZSkoUy5jb25jYXQoeC52YWx1ZSwgeS52YWx1ZSkpKTsgfSxcbiAgICBlbXB0eTogZXhwb3J0cy5ub25lXG59KTsgfTtcbmV4cG9ydHMuZ2V0TW9ub2lkID0gZ2V0TW9ub2lkO1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTm9uZSkoZmEpID8gZXhwb3J0cy5ub25lIDogKDAsIGV4cG9ydHMuc29tZSkoZihmYS52YWx1ZSkpO1xufTsgfTtcbmV4cG9ydHMubWFwID0gbWFwO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5GdW5jdG9yID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwXG59O1xuLyoqXG4gKiBNYXBzIHRoZSBgU29tZWAgdmFsdWUgb2YgdGhpcyBgT3B0aW9uYCB0byB0aGUgc3BlY2lmaWVkIGNvbnN0YW50IHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydHMuYXMgPSAoMCwgZnVuY3Rpb25fMS5kdWFsKSgyLCAoMCwgRnVuY3Rvcl8xLmFzKShleHBvcnRzLkZ1bmN0b3IpKTtcbi8qKlxuICogTWFwcyB0aGUgYFNvbWVgIHZhbHVlIG9mIHRoaXMgYE9wdGlvbmAgdG8gdGhlIHZvaWQgY29uc3RhbnQgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0cy5hc1VuaXQgPSAoMCwgRnVuY3Rvcl8xLmFzVW5pdCkoZXhwb3J0cy5GdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMub2YgPSBleHBvcnRzLnNvbWU7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5Qb2ludGVkID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgb2Y6IGV4cG9ydHMub2Zcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgYXAgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYWIpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNOb25lKShmYWIpID8gZXhwb3J0cy5ub25lIDogKDAsIGV4cG9ydHMuaXNOb25lKShmYSkgPyBleHBvcnRzLm5vbmUgOiAoMCwgZXhwb3J0cy5zb21lKShmYWIudmFsdWUoZmEudmFsdWUpKTtcbn07IH07XG5leHBvcnRzLmFwID0gYXA7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5BcHBseSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5BcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBleHBvcnRzLm9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTQuMFxuICovXG5leHBvcnRzLmZsYXRNYXAgPSAoMCwgZnVuY3Rpb25fMS5kdWFsKSgyLCBmdW5jdGlvbiAobWEsIGYpIHsgcmV0dXJuICgoMCwgZXhwb3J0cy5pc05vbmUpKG1hKSA/IGV4cG9ydHMubm9uZSA6IGYobWEudmFsdWUpKTsgfSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5DaGFpbiA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBleHBvcnRzLmZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLk1vbmFkID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IGV4cG9ydHMub2YsXG4gICAgY2hhaW46IGV4cG9ydHMuZmxhdE1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc05vbmUpKGZhKSA/IGIgOiBmKGIsIGZhLnZhbHVlKTtcbn07IH07XG5leHBvcnRzLnJlZHVjZSA9IHJlZHVjZTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7IHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTm9uZSkoZmEpID8gTS5lbXB0eSA6IGYoZmEudmFsdWUpO1xufTsgfTsgfTtcbmV4cG9ydHMuZm9sZE1hcCA9IGZvbGRNYXA7XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIHJlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc05vbmUpKGZhKSA/IGIgOiBmKGZhLnZhbHVlLCBiKTtcbn07IH07XG5leHBvcnRzLnJlZHVjZVJpZ2h0ID0gcmVkdWNlUmlnaHQ7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkZvbGRhYmxlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHRcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIHByb3ZpZGVkIGBPcHRpb25gIGB0aGF0YCBpZiBgc2VsZmAgaXMgYE5vbmVgLCBvdGhlcndpc2UgcmV0dXJucyBgc2VsZmAuXG4gKlxuICogQHBhcmFtIHNlbGYgLSBUaGUgZmlyc3QgYE9wdGlvbmAgdG8gYmUgY2hlY2tlZC5cbiAqIEBwYXJhbSB0aGF0IC0gVGhlIGBPcHRpb25gIHRvIHJldHVybiBpZiBgc2VsZmAgaXMgYE5vbmVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBPIGZyb20gXCJmcC10cy9PcHRpb25cIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5ub25lLCAoKSA9PiBPLm5vbmUpLCBPLm5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8uc29tZSgxKSwgKCkgPT4gTy5ub25lKSwgTy5zb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLm5vbmUsICgpID0+IE8uc29tZSgnYicpKSwgTy5zb21lKCdiJykpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8uc29tZSgxKSwgKCkgPT4gTy5zb21lKCdiJykpLCBPLnNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydHMub3JFbHNlID0gKDAsIGZ1bmN0aW9uXzEuZHVhbCkoMiwgZnVuY3Rpb24gKHNlbGYsIHRoYXQpIHsgcmV0dXJuICgoMCwgZXhwb3J0cy5pc05vbmUpKHNlbGYpID8gdGhhdCgpIDogc2VsZik7IH0pO1xuLyoqXG4gKiBBbGlhcyBvZiBgb3JFbHNlYC5cbiAqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgYWx0YF0oI2FsdCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0cy5hbHRXID0gZXhwb3J0cy5vckVsc2U7XG4vKipcbiAqIEFsaWFzIG9mIGBvckVsc2VgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLmFsdCA9IGV4cG9ydHMub3JFbHNlO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5BbHQgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xudmFyIHplcm8gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBleHBvcnRzLm5vbmU7IH07XG5leHBvcnRzLnplcm8gPSB6ZXJvO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydHMuWmVybyA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIHplcm86IGV4cG9ydHMuemVyb1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydHMuZ3VhcmQgPSAoMCwgWmVyb18xLmd1YXJkKShleHBvcnRzLlplcm8sIGV4cG9ydHMuUG9pbnRlZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkFsdGVybmF0aXZlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IGV4cG9ydHMub2YsXG4gICAgYWx0OiBfYWx0LFxuICAgIHplcm86IGV4cG9ydHMuemVyb1xufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHdhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTm9uZSkod2EpID8gZXhwb3J0cy5ub25lIDogKDAsIGV4cG9ydHMuc29tZSkoZih3YSkpO1xufTsgfTtcbmV4cG9ydHMuZXh0ZW5kID0gZXh0ZW5kO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5FeHRlbmQgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5jb21wYWN0ID0gKDAsIGV4cG9ydHMuZmxhdE1hcCkoZnVuY3Rpb25fMS5pZGVudGl0eSk7XG52YXIgZGVmYXVsdFNlcGFyYXRlZCA9IC8qI19fUFVSRV9fKi8gKDAsIFNlcGFyYXRlZF8xLnNlcGFyYXRlZCkoZXhwb3J0cy5ub25lLCBleHBvcnRzLm5vbmUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIHNlcGFyYXRlID0gZnVuY3Rpb24gKG1hKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTm9uZSkobWEpID8gZGVmYXVsdFNlcGFyYXRlZCA6ICgwLCBTZXBhcmF0ZWRfMS5zZXBhcmF0ZWQpKCgwLCBleHBvcnRzLmdldExlZnQpKG1hLnZhbHVlKSwgKDAsIGV4cG9ydHMuZ2V0UmlnaHQpKG1hLnZhbHVlKSk7XG59O1xuZXhwb3J0cy5zZXBhcmF0ZSA9IHNlcGFyYXRlO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5Db21wYWN0YWJsZSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIGNvbXBhY3Q6IGV4cG9ydHMuY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogZXhwb3J0cy5zZXBhcmF0ZVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBmaWx0ZXIgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNOb25lKShmYSkgPyBleHBvcnRzLm5vbmUgOiBwcmVkaWNhdGUoZmEudmFsdWUpID8gZmEgOiBleHBvcnRzLm5vbmU7XG4gICAgfTtcbn07XG5leHBvcnRzLmZpbHRlciA9IGZpbHRlcjtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBmaWx0ZXJNYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTm9uZSkoZmEpID8gZXhwb3J0cy5ub25lIDogZihmYS52YWx1ZSk7XG59OyB9O1xuZXhwb3J0cy5maWx0ZXJNYXAgPSBmaWx0ZXJNYXA7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuICgwLCBTZXBhcmF0ZWRfMS5zZXBhcmF0ZWQpKF9maWx0ZXIoZmEsICgwLCBQcmVkaWNhdGVfMS5ub3QpKHByZWRpY2F0ZSkpLCBfZmlsdGVyKGZhLCBwcmVkaWNhdGUpKTtcbiAgICB9O1xufTtcbmV4cG9ydHMucGFydGl0aW9uID0gcGFydGl0aW9uO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIHBhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5mbG93KSgoMCwgZXhwb3J0cy5tYXApKGYpLCBleHBvcnRzLnNlcGFyYXRlKTsgfTtcbmV4cG9ydHMucGFydGl0aW9uTWFwID0gcGFydGl0aW9uTWFwO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5GaWx0ZXJhYmxlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGV4cG9ydHMuY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogZXhwb3J0cy5zZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xudmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTm9uZSkodGEpID8gRi5vZihleHBvcnRzLm5vbmUpIDogRi5tYXAoZih0YS52YWx1ZSksIGV4cG9ydHMuc29tZSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG5leHBvcnRzLnRyYXZlcnNlID0gdHJhdmVyc2U7XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xudmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc05vbmUpKHRhKSA/IEYub2YoZXhwb3J0cy5ub25lKSA6IEYubWFwKHRhLnZhbHVlLCBleHBvcnRzLnNvbWUpO1xuICAgIH07XG59O1xuZXhwb3J0cy5zZXF1ZW5jZSA9IHNlcXVlbmNlO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5UcmF2ZXJzYWJsZSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBleHBvcnRzLnNlcXVlbmNlXG59O1xudmFyIF93aXRoZXIgPSAvKiNfX1BVUkVfXyovICgwLCBXaXRoZXJhYmxlXzEud2l0aGVyRGVmYXVsdCkoZXhwb3J0cy5UcmF2ZXJzYWJsZSwgZXhwb3J0cy5Db21wYWN0YWJsZSk7XG52YXIgX3dpbHQgPSAvKiNfX1BVUkVfXyovICgwLCBXaXRoZXJhYmxlXzEud2lsdERlZmF1bHQpKGV4cG9ydHMuVHJhdmVyc2FibGUsIGV4cG9ydHMuQ29tcGFjdGFibGUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xudmFyIHdpdGhlciA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aXRoZXJGID0gX3dpdGhlcihGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3dpdGhlckYoZmEsIGYpOyB9OyB9O1xufTtcbmV4cG9ydHMud2l0aGVyID0gd2l0aGVyO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xudmFyIHdpbHQgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciBfd2lsdEYgPSBfd2lsdChGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3dpbHRGKGZhLCBmKTsgfTsgfTtcbn07XG5leHBvcnRzLndpbHQgPSB3aWx0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5XaXRoZXJhYmxlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IGV4cG9ydHMuc2VxdWVuY2UsXG4gICAgY29tcGFjdDogZXhwb3J0cy5jb21wYWN0LFxuICAgIHNlcGFyYXRlOiBleHBvcnRzLnNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4vKipcbiAqIEBzaW5jZSAyLjcuMFxuICovXG52YXIgdGhyb3dFcnJvciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV4cG9ydHMubm9uZTsgfTtcbmV4cG9ydHMudGhyb3dFcnJvciA9IHRocm93RXJyb3I7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLk1vbmFkVGhyb3cgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogZXhwb3J0cy5vZixcbiAgICBjaGFpbjogZXhwb3J0cy5mbGF0TWFwLFxuICAgIHRocm93RXJyb3I6IGV4cG9ydHMudGhyb3dFcnJvclxufTtcbi8qKlxuICogVHJhbnNmb3JtcyBhbiBgRWl0aGVyYCB0byBhbiBgT3B0aW9uYCBkaXNjYXJkaW5nIHRoZSBlcnJvci5cbiAqXG4gKiBBbGlhcyBvZiBbZ2V0UmlnaHRdKCNnZXRyaWdodClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLmZyb21FaXRoZXIgPSBleHBvcnRzLmdldFJpZ2h0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydHMuRnJvbUVpdGhlciA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIGZyb21FaXRoZXI6IGV4cG9ydHMuZnJvbUVpdGhlclxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBvcHRpb24gaXMgYW4gaW5zdGFuY2Ugb2YgYFNvbWVgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgaXNTb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc1NvbWUoc29tZSgxKSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNTb21lKG5vbmUpLCBmYWxzZSlcbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLmlzU29tZSA9IF8uaXNTb21lO1xuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb3B0aW9uIGlzIGBOb25lYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGlzTm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNOb25lKHNvbWUoMSkpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc05vbmUobm9uZSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIGlzTm9uZSA9IGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZmEuX3RhZyA9PT0gJ05vbmUnOyB9O1xuZXhwb3J0cy5pc05vbmUgPSBpc05vbmU7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaGBdKCNtYXRjaCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciBtYXRjaFcgPSBmdW5jdGlvbiAob25Ob25lLCBvblNvbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc05vbmUpKG1hKSA/IG9uTm9uZSgpIDogb25Tb21lKG1hLnZhbHVlKTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWF0Y2hXID0gbWF0Y2hXO1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoV2BdKCNtYXRjaHcpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMuZm9sZFcgPSBleHBvcnRzLm1hdGNoVztcbi8qKlxuICogVGFrZXMgYSAobGF6eSkgZGVmYXVsdCB2YWx1ZSwgYSBmdW5jdGlvbiwgYW5kIGFuIGBPcHRpb25gIHZhbHVlLCBpZiB0aGUgYE9wdGlvbmAgdmFsdWUgaXMgYE5vbmVgIHRoZSBkZWZhdWx0IHZhbHVlIGlzXG4gKiByZXR1cm5lZCwgb3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSB2YWx1ZSBpbnNpZGUgdGhlIGBTb21lYCBhbmQgdGhlIHJlc3VsdCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgbWF0Y2ggfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgbWF0Y2goKCkgPT4gJ2Egbm9uZScsIGEgPT4gYGEgc29tZSBjb250YWluaW5nICR7YX1gKVxuICogICApLFxuICogICAnYSBzb21lIGNvbnRhaW5pbmcgMSdcbiAqIClcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBtYXRjaCgoKSA9PiAnYSBub25lJywgYSA9PiBgYSBzb21lIGNvbnRhaW5pbmcgJHthfWApXG4gKiAgICksXG4gKiAgICdhIG5vbmUnXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5tYXRjaCA9IGV4cG9ydHMubWF0Y2hXO1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuZm9sZCA9IGV4cG9ydHMubWF0Y2g7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BnZXRPckVsc2VgXSgjZ2V0b3JlbHNlKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZSB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjYuMFxuICovXG52YXIgZ2V0T3JFbHNlVyA9IGZ1bmN0aW9uIChvbk5vbmUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc05vbmUpKG1hKSA/IG9uTm9uZSgpIDogbWEudmFsdWU7XG4gICAgfTtcbn07XG5leHBvcnRzLmdldE9yRWxzZVcgPSBnZXRPckVsc2VXO1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgdGhlIGdpdmVuIGRlZmF1bHQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZ2V0T3JFbHNlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGdldE9yRWxzZSgoKSA9PiAwKVxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBnZXRPckVsc2UoKCkgPT4gMClcbiAqICAgKSxcbiAqICAgMFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuZ2V0T3JFbHNlID0gZXhwb3J0cy5nZXRPckVsc2VXO1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLmZsYXAgPSAoMCwgRnVuY3Rvcl8xLmZsYXApKGV4cG9ydHMuRnVuY3Rvcik7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuYXBGaXJzdCA9ICgwLCBBcHBseV8xLmFwRmlyc3QpKGV4cG9ydHMuQXBwbHkpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIHNlY29uZC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5hcFNlY29uZCA9ICgwLCBBcHBseV8xLmFwU2Vjb25kKShleHBvcnRzLkFwcGx5KTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLmZsYXR0ZW4gPSBleHBvcnRzLmNvbXBhY3Q7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTUuMFxuICovXG5leHBvcnRzLnRhcCA9ICgwLCBmdW5jdGlvbl8xLmR1YWwpKDIsIGNoYWluYWJsZS50YXAoZXhwb3J0cy5DaGFpbikpO1xuLyoqXG4gKiBDb21wb3NlcyBjb21wdXRhdGlvbnMgaW4gc2VxdWVuY2UsIHVzaW5nIHRoZSByZXR1cm4gdmFsdWUgb2Ygb25lIGNvbXB1dGF0aW9uIHRvIGRldGVybWluZSB0aGUgbmV4dCBjb21wdXRhdGlvbiBhbmRcbiAqIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICogaW1wb3J0ICogYXMgTyBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBFIGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBjb25zdCBjb21wdXRlID0gKHZhbHVlOiBudW1iZXIpID0+IHBpcGUoXG4gKiAgIE8ub2YodmFsdWUpLFxuICogICBPLnRhcEVpdGhlcigodmFsdWUpID0+IHZhbHVlID4gMCA/IEUucmlnaHQoJ29rJykgOiBFLmxlZnQoJ2Vycm9yJykpLFxuICogKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcHV0ZSgxKSwgTy5vZigxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcHV0ZSgtNDIpLCBPLm5vbmUpXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydHMudGFwRWl0aGVyID0gKDAsIGZ1bmN0aW9uXzEuZHVhbCkoMiwgKDAsIEZyb21FaXRoZXJfMS50YXBFaXRoZXIpKGV4cG9ydHMuRnJvbUVpdGhlciwgZXhwb3J0cy5DaGFpbikpO1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5kdXBsaWNhdGUgPSAoMCwgZXhwb3J0cy5leHRlbmQpKGZ1bmN0aW9uXzEuaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnRzLmZyb21FaXRoZXJLID0gKDAsIEZyb21FaXRoZXJfMS5mcm9tRWl0aGVySykoZXhwb3J0cy5Gcm9tRWl0aGVyKTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0cy5jaGFpbkVpdGhlcksgPSBcbi8qI19fUFVSRV9fKi8gKDAsIEZyb21FaXRoZXJfMS5jaGFpbkVpdGhlckspKGV4cG9ydHMuRnJvbUVpdGhlciwgZXhwb3J0cy5DaGFpbik7XG4vKipcbiAqIEFsaWFzIG9mIGB0YXBFaXRoZXJgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0cy5jaGFpbkZpcnN0RWl0aGVySyA9IGV4cG9ydHMudGFwRWl0aGVyO1xuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGBPcHRpb25gIGZyb20gYSBudWxsYWJsZSB0eXBlLiBJZiB0aGUgdmFsdWUgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLCByZXR1cm5zIGBOb25lYCwgb3RoZXJ3aXNlXG4gKiByZXR1cm5zIHRoZSB2YWx1ZSB3cmFwcGVkIGluIGEgYFNvbWVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBmcm9tTnVsbGFibGUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUodW5kZWZpbmVkKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKG51bGwpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUoMSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIGZyb21OdWxsYWJsZSA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoYSA9PSBudWxsID8gZXhwb3J0cy5ub25lIDogKDAsIGV4cG9ydHMuc29tZSkoYSkpOyB9O1xuZXhwb3J0cy5mcm9tTnVsbGFibGUgPSBmcm9tTnVsbGFibGU7XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gZXhjZXB0aW9uIGludG8gYW4gYE9wdGlvbmAuIElmIGBmYCB0aHJvd3MsIHJldHVybnMgYE5vbmVgLCBvdGhlcndpc2UgcmV0dXJucyB0aGUgb3V0cHV0IHdyYXBwZWQgaW4gYVxuICogYFNvbWVgLlxuICpcbiAqIFNlZSBhbHNvIFtgdHJ5Q2F0Y2hLYF0oI3RyeWNhdGNoaykuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIHRyeUNhdGNoIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHRyeUNhdGNoKCgpID0+IHtcbiAqICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICogICB9KSxcbiAqICAgbm9uZVxuICogKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0cnlDYXRjaCgoKSA9PiAxKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW50ZXJvcFxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciB0cnlDYXRjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLnNvbWUpKGYoKSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLm5vbmU7XG4gICAgfVxufTtcbmV4cG9ydHMudHJ5Q2F0Y2ggPSB0cnlDYXRjaDtcbi8qKlxuICogQ29udmVydHMgYSBmdW5jdGlvbiB0aGF0IG1heSB0aHJvdyB0byBvbmUgcmV0dXJuaW5nIGEgYE9wdGlvbmAuXG4gKlxuICogQGNhdGVnb3J5IGludGVyb3BcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIHRyeUNhdGNoSyA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMudHJ5Q2F0Y2gpKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfSk7XG4gICAgfTtcbn07XG5leHBvcnRzLnRyeUNhdGNoSyA9IHRyeUNhdGNoSztcbi8qKlxuICogUmV0dXJucyBhICpzbWFydCBjb25zdHJ1Y3RvciogZnJvbSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIG51bGxhYmxlIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmcm9tTnVsbGFibGVLLCBub25lLCBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IGYgPSAoczogc3RyaW5nKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAqICAgY29uc3QgbiA9IHBhcnNlRmxvYXQocylcbiAqICAgcmV0dXJuIGlzTmFOKG4pID8gdW5kZWZpbmVkIDogblxuICogfVxuICpcbiAqIGNvbnN0IGcgPSBmcm9tTnVsbGFibGVLKGYpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnKCcxJyksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGcoJ2EnKSwgbm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbnZhciBmcm9tTnVsbGFibGVLID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLmZsb3cpKGYsIGV4cG9ydHMuZnJvbU51bGxhYmxlKTsgfTtcbmV4cG9ydHMuZnJvbU51bGxhYmxlSyA9IGZyb21OdWxsYWJsZUs7XG4vKipcbiAqIFRoaXMgaXMgYGNoYWluYCArIGBmcm9tTnVsbGFibGVgLCB1c2VmdWwgd2hlbiB3b3JraW5nIHdpdGggb3B0aW9uYWwgdmFsdWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBmcm9tTnVsbGFibGUsIGNoYWluTnVsbGFibGVLIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBFbXBsb3llZSB7XG4gKiAgIHJlYWRvbmx5IGNvbXBhbnk/OiB7XG4gKiAgICAgcmVhZG9ubHkgYWRkcmVzcz86IHtcbiAqICAgICAgIHJlYWRvbmx5IHN0cmVldD86IHtcbiAqICAgICAgICAgcmVhZG9ubHkgbmFtZT86IHN0cmluZ1xuICogICAgICAgfVxuICogICAgIH1cbiAqICAgfVxuICogfVxuICpcbiAqIGNvbnN0IGVtcGxveWVlMTogRW1wbG95ZWUgPSB7IGNvbXBhbnk6IHsgYWRkcmVzczogeyBzdHJlZXQ6IHsgbmFtZTogJ2hpZ2ggc3RyZWV0JyB9IH0gfSB9XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBmcm9tTnVsbGFibGUoZW1wbG95ZWUxLmNvbXBhbnkpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGNvbXBhbnkgPT4gY29tcGFueS5hZGRyZXNzKSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhhZGRyZXNzID0+IGFkZHJlc3Muc3RyZWV0KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhzdHJlZXQgPT4gc3RyZWV0Lm5hbWUpXG4gKiAgICksXG4gKiAgIHNvbWUoJ2hpZ2ggc3RyZWV0JylcbiAqIClcbiAqXG4gKiBjb25zdCBlbXBsb3llZTI6IEVtcGxveWVlID0geyBjb21wYW55OiB7IGFkZHJlc3M6IHsgc3RyZWV0OiB7fSB9IH0gfVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgZnJvbU51bGxhYmxlKGVtcGxveWVlMi5jb21wYW55KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhjb21wYW55ID0+IGNvbXBhbnkuYWRkcmVzcyksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoYWRkcmVzcyA9PiBhZGRyZXNzLnN0cmVldCksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoc3RyZWV0ID0+IHN0cmVldC5uYW1lKVxuICogICApLFxuICogICBub25lXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG52YXIgY2hhaW5OdWxsYWJsZUsgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTm9uZSkobWEpID8gZXhwb3J0cy5ub25lIDogKDAsIGV4cG9ydHMuZnJvbU51bGxhYmxlKShmKG1hLnZhbHVlKSk7XG4gICAgfTtcbn07XG5leHBvcnRzLmNoYWluTnVsbGFibGVLID0gY2hhaW5OdWxsYWJsZUs7XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyBgbnVsbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIHRvTnVsbGFibGUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgdG9OdWxsYWJsZVxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICB0b051bGxhYmxlXG4gKiAgICksXG4gKiAgIG51bGxcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLnRvTnVsbGFibGUgPSAoMCwgZXhwb3J0cy5tYXRjaCkoZnVuY3Rpb25fMS5jb25zdE51bGwsIGZ1bmN0aW9uXzEuaWRlbnRpdHkpO1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgYHVuZGVmaW5lZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIHRvVW5kZWZpbmVkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIHRvVW5kZWZpbmVkXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIHRvVW5kZWZpbmVkXG4gKiAgICksXG4gKiAgIHVuZGVmaW5lZFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMudG9VbmRlZmluZWQgPSAoMCwgZXhwb3J0cy5tYXRjaCkoZnVuY3Rpb25fMS5jb25zdFVuZGVmaW5lZCwgZnVuY3Rpb25fMS5pZGVudGl0eSk7XG5mdW5jdGlvbiBlbGVtKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEsIG1hKSB7XG4gICAgICAgIGlmIChtYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZWxlbUVfMSA9IGVsZW0oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBlbGVtRV8xKGEsIG1hKTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNOb25lKShtYSkgPyBmYWxzZSA6IEUuZXF1YWxzKGEsIG1hLnZhbHVlKTtcbiAgICB9O1xufVxuZXhwb3J0cy5lbGVtID0gZWxlbTtcbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHByZWRpY2F0ZSBpcyBzYXRpc2ZpZWQgYnkgdGhlIHdyYXBwZWQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZXhpc3RzIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAwKVxuICogICApLFxuICogICB0cnVlXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMSlcbiAqICAgKSxcbiAqICAgZmFsc2VcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAwKVxuICogICApLFxuICogICBmYWxzZVxuICogKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgZXhpc3RzID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTm9uZSkobWEpID8gZmFsc2UgOiBwcmVkaWNhdGUobWEudmFsdWUpO1xuICAgIH07XG59O1xuZXhwb3J0cy5leGlzdHMgPSBleGlzdHM7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkbyBub3RhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnRzLkRvID0gKDAsIGV4cG9ydHMub2YpKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnRzLmJpbmRUbyA9ICgwLCBGdW5jdG9yXzEuYmluZFRvKShleHBvcnRzLkZ1bmN0b3IpO1xudmFyIGxldF8gPSAvKiNfX1BVUkVfXyovICgwLCBGdW5jdG9yXzEubGV0KShleHBvcnRzLkZ1bmN0b3IpO1xuZXhwb3J0cy5sZXQgPSBsZXRfO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnRzLmJpbmQgPSBjaGFpbmFibGUuYmluZChleHBvcnRzLkNoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0cy5hcFMgPSAoMCwgQXBwbHlfMS5hcFMpKGV4cG9ydHMuQXBwbHkpO1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydHMuQXBUID0gKDAsIGV4cG9ydHMub2YpKF8uZW1wdHlSZWFkb25seUFycmF5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGFycmF5IHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5Tm9uRW1wdHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbyA9IGYoMCwgXy5oZWFkKGFzKSk7XG4gICAgICAgIGlmICgoMCwgZXhwb3J0cy5pc05vbmUpKG8pKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5ub25lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbby52YWx1ZV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvXzEgPSBmKGksIGFzW2ldKTtcbiAgICAgICAgICAgIGlmICgoMCwgZXhwb3J0cy5pc05vbmUpKG9fMSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5ub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0LnB1c2gob18xLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuc29tZSkob3V0KTtcbiAgICB9O1xufTtcbmV4cG9ydHMudHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXggPSB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleDtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHZhciBnID0gKDAsIGV4cG9ydHMudHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXgpKGYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChfLmlzTm9uRW1wdHkoYXMpID8gZyhhcykgOiBleHBvcnRzLkFwVCk7IH07XG59O1xuZXhwb3J0cy50cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXggPSB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXg7XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydHMudHJhdmVyc2VBcnJheVdpdGhJbmRleCA9IGV4cG9ydHMudHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlKEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG52YXIgdHJhdmVyc2VBcnJheSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLnRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleCkoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbmV4cG9ydHMudHJhdmVyc2VBcnJheSA9IHRyYXZlcnNlQXJyYXk7XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjc2VxdWVuY2UoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydHMuc2VxdWVuY2VBcnJheSA9IFxuLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy50cmF2ZXJzZUFycmF5KShmdW5jdGlvbl8xLmlkZW50aXR5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxlZ2FjeVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBBbGlhcyBvZiBgZmxhdE1hcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuY2hhaW4gPSBleHBvcnRzLmZsYXRNYXA7XG4vKipcbiAqIEFsaWFzIG9mIGB0YXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLmNoYWluRmlyc3QgPSBleHBvcnRzLnRhcDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIGBSZWZpbmVtZW50YCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5mdW5jdGlvbiBnZXRSZWZpbmVtZW50KGdldE9wdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKDAsIGV4cG9ydHMuaXNTb21lKShnZXRPcHRpb24oYSkpOyB9O1xufVxuZXhwb3J0cy5nZXRSZWZpbmVtZW50ID0gZ2V0UmVmaW5lbWVudDtcbi8qKlxuICogVXNlIFtgY2hhaW5OdWxsYWJsZUtgXSgjY2hhaW5udWxsYWJsZWspIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5tYXBOdWxsYWJsZSA9IGV4cG9ydHMuY2hhaW5OdWxsYWJsZUs7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYE8uRnVuY3RvcmAgaW5zdGVhZCBvZiBgTy5vcHRpb25gXG4gKiAod2hlcmUgYE9gIGlzIGZyb20gYGltcG9ydCBPIGZyb20gJ2ZwLXRzL09wdGlvbidgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMub3B0aW9uID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG9mOiBleHBvcnRzLm9mLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGV4cG9ydHMuZmxhdE1hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBleHBvcnRzLnNlcXVlbmNlLFxuICAgIHplcm86IGV4cG9ydHMuemVybyxcbiAgICBhbHQ6IF9hbHQsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGNvbXBhY3Q6IGV4cG9ydHMuY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogZXhwb3J0cy5zZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0LFxuICAgIHRocm93RXJyb3I6IGV4cG9ydHMudGhyb3dFcnJvclxufTtcbi8qKlxuICogVXNlIFtgZ2V0QXBwbHlTZW1pZ3JvdXBgXSguL0FwcGx5LnRzLmh0bWwjZ2V0YXBwbHlzZW1pZ3JvdXApIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5nZXRBcHBseVNlbWlncm91cCA9ICgwLCBBcHBseV8xLmdldEFwcGx5U2VtaWdyb3VwKShleHBvcnRzLkFwcGx5KTtcbi8qKlxuICogVXNlIFtgZ2V0QXBwbGljYXRpdmVNb25vaWRgXSguL0FwcGxpY2F0aXZlLnRzLmh0bWwjZ2V0YXBwbGljYXRpdmVtb25vaWQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5nZXRBcHBseU1vbm9pZCA9ICgwLCBBcHBsaWNhdGl2ZV8xLmdldEFwcGxpY2F0aXZlTW9ub2lkKShleHBvcnRzLkFwcGxpY2F0aXZlKTtcbi8qKlxuICogVXNlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZpcnN0IH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGdldE1vbm9pZChmaXJzdCgpKVxuICogYGBgXG4gKlxuICogaW5zdGVhZC5cbiAqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSBsZWZ0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZVxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShhKSAgICAgIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0Rmlyc3RNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgTSA9IGdldEZpcnN0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMikpLCBzb21lKDIpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG52YXIgZ2V0Rmlyc3RNb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoMCwgZXhwb3J0cy5nZXRNb25vaWQpKCgwLCBTZW1pZ3JvdXBfMS5maXJzdCkoKSk7IH07XG5leHBvcnRzLmdldEZpcnN0TW9ub2lkID0gZ2V0Rmlyc3RNb25vaWQ7XG4vKipcbiAqIFVzZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBsYXN0IH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGdldE1vbm9pZChsYXN0KCkpXG4gKiBgYGBcbiAqXG4gKiBpbnN0ZWFkLlxuICpcbiAqIE1vbm9pZCByZXR1cm5pbmcgdGhlIHJpZ2h0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZVxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShiKSAgICAgIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TGFzdE1vbm9pZCwgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBjb25zdCBNID0gZ2V0TGFzdE1vbm9pZDxudW1iZXI+KClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgbm9uZSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIG5vbmUpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgc29tZSgyKSksIHNvbWUoMikpXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xudmFyIGdldExhc3RNb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoMCwgZXhwb3J0cy5nZXRNb25vaWQpKCgwLCBTZW1pZ3JvdXBfMS5sYXN0KSgpKTsgfTtcbmV4cG9ydHMuZ2V0TGFzdE1vbm9pZCA9IGdldExhc3RNb25vaWQ7XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudGFpbFJlYyA9IHZvaWQgMDtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciB0YWlsUmVjID0gZnVuY3Rpb24gKHN0YXJ0V2l0aCwgZikge1xuICAgIHZhciBhYiA9IGYoc3RhcnRXaXRoKTtcbiAgICB3aGlsZSAoYWIuX3RhZyA9PT0gJ0xlZnQnKSB7XG4gICAgICAgIGFiID0gZihhYi5sZWZ0KTtcbiAgICB9XG4gICAgcmV0dXJuIGFiLnJpZ2h0O1xufTtcbmV4cG9ydHMudGFpbFJlYyA9IHRhaWxSZWM7XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5tYXRjaCA9IGV4cG9ydHMuZm9sZFcgPSBleHBvcnRzLm1hdGNoVyA9IGV4cG9ydHMuaXNSaWdodCA9IGV4cG9ydHMuaXNMZWZ0ID0gZXhwb3J0cy5mcm9tT3B0aW9uID0gZXhwb3J0cy5mcm9tUHJlZGljYXRlID0gZXhwb3J0cy5Gcm9tRWl0aGVyID0gZXhwb3J0cy5Nb25hZFRocm93ID0gZXhwb3J0cy50aHJvd0Vycm9yID0gZXhwb3J0cy5DaGFpblJlYyA9IGV4cG9ydHMuRXh0ZW5kID0gZXhwb3J0cy5leHRlbmQgPSBleHBvcnRzLkFsdCA9IGV4cG9ydHMuYWx0ID0gZXhwb3J0cy5hbHRXID0gZXhwb3J0cy5CaWZ1bmN0b3IgPSBleHBvcnRzLm1hcExlZnQgPSBleHBvcnRzLmJpbWFwID0gZXhwb3J0cy5UcmF2ZXJzYWJsZSA9IGV4cG9ydHMuc2VxdWVuY2UgPSBleHBvcnRzLnRyYXZlcnNlID0gZXhwb3J0cy5Gb2xkYWJsZSA9IGV4cG9ydHMucmVkdWNlUmlnaHQgPSBleHBvcnRzLmZvbGRNYXAgPSBleHBvcnRzLnJlZHVjZSA9IGV4cG9ydHMuTW9uYWQgPSBleHBvcnRzLkNoYWluID0gZXhwb3J0cy5BcHBsaWNhdGl2ZSA9IGV4cG9ydHMuQXBwbHkgPSBleHBvcnRzLmFwID0gZXhwb3J0cy5hcFcgPSBleHBvcnRzLlBvaW50ZWQgPSBleHBvcnRzLm9mID0gZXhwb3J0cy5hc1VuaXQgPSBleHBvcnRzLmFzID0gZXhwb3J0cy5GdW5jdG9yID0gZXhwb3J0cy5tYXAgPSBleHBvcnRzLmdldEFsdFZhbGlkYXRpb24gPSBleHBvcnRzLmdldEFwcGxpY2F0aXZlVmFsaWRhdGlvbiA9IGV4cG9ydHMuZ2V0V2l0aGVyYWJsZSA9IGV4cG9ydHMuZ2V0RmlsdGVyYWJsZSA9IGV4cG9ydHMuZ2V0Q29tcGFjdGFibGUgPSBleHBvcnRzLmdldFNlbWlncm91cCA9IGV4cG9ydHMuZ2V0RXEgPSBleHBvcnRzLmdldFNob3cgPSBleHBvcnRzLlVSSSA9IGV4cG9ydHMuZmxhdE1hcCA9IGV4cG9ydHMucmlnaHQgPSBleHBvcnRzLmxlZnQgPSB2b2lkIDA7XG5leHBvcnRzLmNoYWluRmlyc3RXID0gZXhwb3J0cy5jaGFpbkZpcnN0ID0gZXhwb3J0cy5jaGFpbiA9IGV4cG9ydHMuY2hhaW5XID0gZXhwb3J0cy5zZXF1ZW5jZUFycmF5ID0gZXhwb3J0cy50cmF2ZXJzZUFycmF5ID0gZXhwb3J0cy50cmF2ZXJzZUFycmF5V2l0aEluZGV4ID0gZXhwb3J0cy50cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXggPSBleHBvcnRzLnRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4ID0gZXhwb3J0cy5BcFQgPSBleHBvcnRzLmFwU1cgPSBleHBvcnRzLmFwUyA9IGV4cG9ydHMuYmluZFcgPSBleHBvcnRzLmJpbmQgPSBleHBvcnRzLmxldCA9IGV4cG9ydHMuYmluZFRvID0gZXhwb3J0cy5EbyA9IGV4cG9ydHMuZXhpc3RzID0gZXhwb3J0cy5lbGVtID0gZXhwb3J0cy50b0Vycm9yID0gZXhwb3J0cy50b1VuaW9uID0gZXhwb3J0cy5jaGFpbk51bGxhYmxlSyA9IGV4cG9ydHMuZnJvbU51bGxhYmxlSyA9IGV4cG9ydHMudHJ5Q2F0Y2hLID0gZXhwb3J0cy50cnlDYXRjaCA9IGV4cG9ydHMuZnJvbU51bGxhYmxlID0gZXhwb3J0cy5vckVsc2UgPSBleHBvcnRzLm9yRWxzZVcgPSBleHBvcnRzLnN3YXAgPSBleHBvcnRzLmZpbHRlck9yRWxzZVcgPSBleHBvcnRzLmZpbHRlck9yRWxzZSA9IGV4cG9ydHMuZmxhdE1hcE9wdGlvbiA9IGV4cG9ydHMuZmxhdE1hcE51bGxhYmxlID0gZXhwb3J0cy5saWZ0T3B0aW9uID0gZXhwb3J0cy5saWZ0TnVsbGFibGUgPSBleHBvcnRzLmNoYWluT3B0aW9uS1cgPSBleHBvcnRzLmNoYWluT3B0aW9uSyA9IGV4cG9ydHMuZnJvbU9wdGlvbksgPSBleHBvcnRzLmR1cGxpY2F0ZSA9IGV4cG9ydHMuZmxhdHRlbiA9IGV4cG9ydHMuZmxhdHRlblcgPSBleHBvcnRzLnRhcCA9IGV4cG9ydHMuYXBTZWNvbmRXID0gZXhwb3J0cy5hcFNlY29uZCA9IGV4cG9ydHMuYXBGaXJzdFcgPSBleHBvcnRzLmFwRmlyc3QgPSBleHBvcnRzLmZsYXAgPSBleHBvcnRzLmdldE9yRWxzZSA9IGV4cG9ydHMuZ2V0T3JFbHNlVyA9IGV4cG9ydHMuZm9sZCA9IHZvaWQgMDtcbmV4cG9ydHMuZ2V0VmFsaWRhdGlvbiA9IGV4cG9ydHMuZ2V0VmFsaWRhdGlvbk1vbm9pZCA9IGV4cG9ydHMuZ2V0VmFsaWRhdGlvblNlbWlncm91cCA9IGV4cG9ydHMuZ2V0QXBwbHlNb25vaWQgPSBleHBvcnRzLmdldEFwcGx5U2VtaWdyb3VwID0gZXhwb3J0cy5laXRoZXIgPSBleHBvcnRzLnN0cmluZ2lmeUpTT04gPSBleHBvcnRzLnBhcnNlSlNPTiA9IHZvaWQgMDtcbnZhciBBcHBsaWNhdGl2ZV8xID0gcmVxdWlyZShcIi4vQXBwbGljYXRpdmVcIik7XG52YXIgQXBwbHlfMSA9IHJlcXVpcmUoXCIuL0FwcGx5XCIpO1xudmFyIGNoYWluYWJsZSA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9DaGFpblwiKSk7XG52YXIgQ2hhaW5SZWNfMSA9IHJlcXVpcmUoXCIuL0NoYWluUmVjXCIpO1xudmFyIEZyb21FaXRoZXJfMSA9IHJlcXVpcmUoXCIuL0Zyb21FaXRoZXJcIik7XG52YXIgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2Z1bmN0aW9uXCIpO1xudmFyIEZ1bmN0b3JfMSA9IHJlcXVpcmUoXCIuL0Z1bmN0b3JcIik7XG52YXIgXyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9pbnRlcm5hbFwiKSk7XG52YXIgU2VwYXJhdGVkXzEgPSByZXF1aXJlKFwiLi9TZXBhcmF0ZWRcIik7XG52YXIgV2l0aGVyYWJsZV8xID0gcmVxdWlyZShcIi4vV2l0aGVyYWJsZVwiKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGBFaXRoZXJgIGhvbGRpbmcgYSBgTGVmdGAgdmFsdWUuIFRoaXMgdXN1YWxseSByZXByZXNlbnRzIGEgZmFpbHVyZSwgZHVlIHRvIHRoZSByaWdodC1iaWFzIG9mIHRoaXNcbiAqIHN0cnVjdHVyZS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5sZWZ0ID0gXy5sZWZ0O1xuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGBFaXRoZXJgIGhvbGRpbmcgYSBgUmlnaHRgIHZhbHVlLiBUaGlzIHVzdWFsbHkgcmVwcmVzZW50cyBhIHN1Y2Nlc3NmdWwgdmFsdWUgZHVlIHRvIHRoZSByaWdodCBiaWFzXG4gKiBvZiB0aGlzIHN0cnVjdHVyZS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5yaWdodCA9IF8ucmlnaHQ7XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydHMuZmxhdE1hcCA9ICgwLCBmdW5jdGlvbl8xLmR1YWwpKDIsIGZ1bmN0aW9uIChtYSwgZikgeyByZXR1cm4gKCgwLCBleHBvcnRzLmlzTGVmdCkobWEpID8gbWEgOiBmKG1hLnJpZ2h0KSk7IH0pO1xudmFyIF9tYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5tYXApKGYpKTsgfTtcbnZhciBfYXAgPSBmdW5jdGlvbiAoZmFiLCBmYSkgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmFiLCAoMCwgZXhwb3J0cy5hcCkoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLnJlZHVjZSkoYiwgZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7IHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHtcbiAgICB2YXIgZm9sZE1hcE0gPSAoMCwgZXhwb3J0cy5mb2xkTWFwKShNKTtcbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsIGZvbGRNYXBNKGYpKTtcbn07IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoZmEsICgwLCBleHBvcnRzLnJlZHVjZVJpZ2h0KShiLCBmKSk7IH07XG52YXIgX3RyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gKDAsIGV4cG9ydHMudHJhdmVyc2UpKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKHRhLCB0cmF2ZXJzZUYoZikpOyB9O1xufTtcbnZhciBfYmltYXAgPSBmdW5jdGlvbiAoZmEsIGYsIGcpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGZhLCAoMCwgZXhwb3J0cy5iaW1hcCkoZiwgZykpOyB9O1xudmFyIF9tYXBMZWZ0ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMubWFwTGVmdCkoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShmYSwgKDAsIGV4cG9ydHMuYWx0KSh0aGF0KSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9leHRlbmQgPSBmdW5jdGlvbiAod2EsIGYpIHsgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKHdhLCAoMCwgZXhwb3J0cy5leHRlbmQpKGYpKTsgfTtcbnZhciBfY2hhaW5SZWMgPSBmdW5jdGlvbiAoYSwgZikge1xuICAgIHJldHVybiAoMCwgQ2hhaW5SZWNfMS50YWlsUmVjKShmKGEpLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNMZWZ0KShlKSA/ICgwLCBleHBvcnRzLnJpZ2h0KSgoMCwgZXhwb3J0cy5sZWZ0KShlLmxlZnQpKSA6ICgwLCBleHBvcnRzLmlzTGVmdCkoZS5yaWdodCkgPyAoMCwgZXhwb3J0cy5sZWZ0KShmKGUucmlnaHQubGVmdCkpIDogKDAsIGV4cG9ydHMucmlnaHQpKCgwLCBleHBvcnRzLnJpZ2h0KShlLnJpZ2h0LnJpZ2h0KSk7XG4gICAgfSk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5VUkkgPSAnRWl0aGVyJztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBnZXRTaG93ID0gZnVuY3Rpb24gKFNFLCBTQSkgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuICgoMCwgZXhwb3J0cy5pc0xlZnQpKG1hKSA/IFwibGVmdChcIi5jb25jYXQoU0Uuc2hvdyhtYS5sZWZ0KSwgXCIpXCIpIDogXCJyaWdodChcIi5jb25jYXQoU0Euc2hvdyhtYS5yaWdodCksIFwiKVwiKSk7IH1cbn0pOyB9O1xuZXhwb3J0cy5nZXRTaG93ID0gZ2V0U2hvdztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBnZXRFcSA9IGZ1bmN0aW9uIChFTCwgRUEpIHsgcmV0dXJuICh7XG4gICAgZXF1YWxzOiBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICByZXR1cm4geCA9PT0geSB8fCAoKDAsIGV4cG9ydHMuaXNMZWZ0KSh4KSA/ICgwLCBleHBvcnRzLmlzTGVmdCkoeSkgJiYgRUwuZXF1YWxzKHgubGVmdCwgeS5sZWZ0KSA6ICgwLCBleHBvcnRzLmlzUmlnaHQpKHkpICYmIEVBLmVxdWFscyh4LnJpZ2h0LCB5LnJpZ2h0KSk7XG4gICAgfVxufSk7IH07XG5leHBvcnRzLmdldEVxID0gZ2V0RXE7XG4vKipcbiAqIFNlbWlncm91cCByZXR1cm5pbmcgdGhlIGxlZnQtbW9zdCBub24tYExlZnRgIHZhbHVlLiBJZiBib3RoIG9wZXJhbmRzIGFyZSBgUmlnaHRgcyB0aGVuIHRoZSBpbm5lciB2YWx1ZXMgYXJlXG4gKiBjb25jYXRlbmF0ZWQgdXNpbmcgdGhlIHByb3ZpZGVkIGBTZW1pZ3JvdXBgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldFNlbWlncm91cCwgbGVmdCwgcmlnaHQgfSBmcm9tICdmcC10cy9FaXRoZXInXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgUyA9IGdldFNlbWlncm91cDxzdHJpbmcsIG51bWJlcj4oU2VtaWdyb3VwU3VtKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLmNvbmNhdChsZWZ0KCdhJyksIGxlZnQoJ2InKSksIGxlZnQoJ2EnKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5jb25jYXQobGVmdCgnYScpLCByaWdodCgyKSksIHJpZ2h0KDIpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLmNvbmNhdChyaWdodCgxKSwgbGVmdCgnYicpKSwgcmlnaHQoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuY29uY2F0KHJpZ2h0KDEpLCByaWdodCgyKSksIHJpZ2h0KDMpKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgZ2V0U2VtaWdyb3VwID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gKCgwLCBleHBvcnRzLmlzTGVmdCkoeSkgPyB4IDogKDAsIGV4cG9ydHMuaXNMZWZ0KSh4KSA/IHkgOiAoMCwgZXhwb3J0cy5yaWdodCkoUy5jb25jYXQoeC5yaWdodCwgeS5yaWdodCkpKTsgfVxufSk7IH07XG5leHBvcnRzLmdldFNlbWlncm91cCA9IGdldFNlbWlncm91cDtcbi8qKlxuICogQnVpbGRzIGEgYENvbXBhY3RhYmxlYCBpbnN0YW5jZSBmb3IgYEVpdGhlcmAgZ2l2ZW4gYE1vbm9pZGAgZm9yIHRoZSBsZWZ0IHNpZGUuXG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgZ2V0Q29tcGFjdGFibGUgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBlbXB0eSA9ICgwLCBleHBvcnRzLmxlZnQpKE0uZW1wdHkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgICAgIF9FOiB1bmRlZmluZWQsXG4gICAgICAgIGNvbXBhY3Q6IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKCgwLCBleHBvcnRzLmlzTGVmdCkobWEpID8gbWEgOiBtYS5yaWdodC5fdGFnID09PSAnTm9uZScgPyBlbXB0eSA6ICgwLCBleHBvcnRzLnJpZ2h0KShtYS5yaWdodC52YWx1ZSkpOyB9LFxuICAgICAgICBzZXBhcmF0ZTogZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNMZWZ0KShtYSlcbiAgICAgICAgICAgICAgICA/ICgwLCBTZXBhcmF0ZWRfMS5zZXBhcmF0ZWQpKG1hLCBtYSlcbiAgICAgICAgICAgICAgICA6ICgwLCBleHBvcnRzLmlzTGVmdCkobWEucmlnaHQpXG4gICAgICAgICAgICAgICAgICAgID8gKDAsIFNlcGFyYXRlZF8xLnNlcGFyYXRlZCkoKDAsIGV4cG9ydHMucmlnaHQpKG1hLnJpZ2h0LmxlZnQpLCBlbXB0eSlcbiAgICAgICAgICAgICAgICAgICAgOiAoMCwgU2VwYXJhdGVkXzEuc2VwYXJhdGVkKShlbXB0eSwgKDAsIGV4cG9ydHMucmlnaHQpKG1hLnJpZ2h0LnJpZ2h0KSk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcbmV4cG9ydHMuZ2V0Q29tcGFjdGFibGUgPSBnZXRDb21wYWN0YWJsZTtcbi8qKlxuICogQnVpbGRzIGEgYEZpbHRlcmFibGVgIGluc3RhbmNlIGZvciBgRWl0aGVyYCBnaXZlbiBgTW9ub2lkYCBmb3IgdGhlIGxlZnQgc2lkZVxuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIGdldEZpbHRlcmFibGUgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBlbXB0eSA9ICgwLCBleHBvcnRzLmxlZnQpKE0uZW1wdHkpO1xuICAgIHZhciBfYSA9ICgwLCBleHBvcnRzLmdldENvbXBhY3RhYmxlKShNKSwgY29tcGFjdCA9IF9hLmNvbXBhY3QsIHNlcGFyYXRlID0gX2Euc2VwYXJhdGU7XG4gICAgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIChtYSwgcHJlZGljYXRlKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc0xlZnQpKG1hKSA/IG1hIDogcHJlZGljYXRlKG1hLnJpZ2h0KSA/IG1hIDogZW1wdHk7XG4gICAgfTtcbiAgICB2YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKG1hLCBwKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc0xlZnQpKG1hKVxuICAgICAgICAgICAgPyAoMCwgU2VwYXJhdGVkXzEuc2VwYXJhdGVkKShtYSwgbWEpXG4gICAgICAgICAgICA6IHAobWEucmlnaHQpXG4gICAgICAgICAgICAgICAgPyAoMCwgU2VwYXJhdGVkXzEuc2VwYXJhdGVkKShlbXB0eSwgKDAsIGV4cG9ydHMucmlnaHQpKG1hLnJpZ2h0KSlcbiAgICAgICAgICAgICAgICA6ICgwLCBTZXBhcmF0ZWRfMS5zZXBhcmF0ZWQpKCgwLCBleHBvcnRzLnJpZ2h0KShtYS5yaWdodCksIGVtcHR5KTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgICAgIF9FOiB1bmRlZmluZWQsXG4gICAgICAgIG1hcDogX21hcCxcbiAgICAgICAgY29tcGFjdDogY29tcGFjdCxcbiAgICAgICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgICAgICBmaWx0ZXI6IGZpbHRlcixcbiAgICAgICAgZmlsdGVyTWFwOiBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICAgICAgICAgIGlmICgoMCwgZXhwb3J0cy5pc0xlZnQpKG1hKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvYiA9IGYobWEucmlnaHQpO1xuICAgICAgICAgICAgcmV0dXJuIG9iLl90YWcgPT09ICdOb25lJyA/IGVtcHR5IDogKDAsIGV4cG9ydHMucmlnaHQpKG9iLnZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgcGFydGl0aW9uOiBwYXJ0aXRpb24sXG4gICAgICAgIHBhcnRpdGlvbk1hcDogZnVuY3Rpb24gKG1hLCBmKSB7XG4gICAgICAgICAgICBpZiAoKDAsIGV4cG9ydHMuaXNMZWZ0KShtYSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKDAsIFNlcGFyYXRlZF8xLnNlcGFyYXRlZCkobWEsIG1hKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlID0gZihtYS5yaWdodCk7XG4gICAgICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNMZWZ0KShlKSA/ICgwLCBTZXBhcmF0ZWRfMS5zZXBhcmF0ZWQpKCgwLCBleHBvcnRzLnJpZ2h0KShlLmxlZnQpLCBlbXB0eSkgOiAoMCwgU2VwYXJhdGVkXzEuc2VwYXJhdGVkKShlbXB0eSwgKDAsIGV4cG9ydHMucmlnaHQpKGUucmlnaHQpKTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuZXhwb3J0cy5nZXRGaWx0ZXJhYmxlID0gZ2V0RmlsdGVyYWJsZTtcbi8qKlxuICogQnVpbGRzIGBXaXRoZXJhYmxlYCBpbnN0YW5jZSBmb3IgYEVpdGhlcmAgZ2l2ZW4gYE1vbm9pZGAgZm9yIHRoZSBsZWZ0IHNpZGVcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIGdldFdpdGhlcmFibGUgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBGXyA9ICgwLCBleHBvcnRzLmdldEZpbHRlcmFibGUpKE0pO1xuICAgIHZhciBDID0gKDAsIGV4cG9ydHMuZ2V0Q29tcGFjdGFibGUpKE0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgICAgIF9FOiB1bmRlZmluZWQsXG4gICAgICAgIG1hcDogX21hcCxcbiAgICAgICAgY29tcGFjdDogRl8uY29tcGFjdCxcbiAgICAgICAgc2VwYXJhdGU6IEZfLnNlcGFyYXRlLFxuICAgICAgICBmaWx0ZXI6IEZfLmZpbHRlcixcbiAgICAgICAgZmlsdGVyTWFwOiBGXy5maWx0ZXJNYXAsXG4gICAgICAgIHBhcnRpdGlvbjogRl8ucGFydGl0aW9uLFxuICAgICAgICBwYXJ0aXRpb25NYXA6IEZfLnBhcnRpdGlvbk1hcCxcbiAgICAgICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICAgICAgc2VxdWVuY2U6IGV4cG9ydHMuc2VxdWVuY2UsXG4gICAgICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICAgICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgICAgIHdpdGhlcjogKDAsIFdpdGhlcmFibGVfMS53aXRoZXJEZWZhdWx0KShleHBvcnRzLlRyYXZlcnNhYmxlLCBDKSxcbiAgICAgICAgd2lsdDogKDAsIFdpdGhlcmFibGVfMS53aWx0RGVmYXVsdCkoZXhwb3J0cy5UcmF2ZXJzYWJsZSwgQylcbiAgICB9O1xufTtcbmV4cG9ydHMuZ2V0V2l0aGVyYWJsZSA9IGdldFdpdGhlcmFibGU7XG4vKipcbiAqIFRoZSBkZWZhdWx0IFtgQXBwbGljYXRpdmVgXSgjYXBwbGljYXRpdmUpIGluc3RhbmNlIHJldHVybnMgdGhlIGZpcnN0IGVycm9yLCBpZiB5b3Ugd2FudCB0b1xuICogZ2V0IGFsbCBlcnJvcnMgeW91IG5lZWQgdG8gcHJvdmlkZSBhIHdheSB0byBjb25jYXRlbmF0ZSB0aGVtIHZpYSBhIGBTZW1pZ3JvdXBgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBBIGZyb20gJ2ZwLXRzL0FwcGx5J1xuICogaW1wb3J0ICogYXMgRSBmcm9tICdmcC10cy9FaXRoZXInXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCAqIGFzIHN0cmluZyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogY29uc3QgcGFyc2VTdHJpbmcgPSAodTogdW5rbm93bik6IEUuRWl0aGVyPHN0cmluZywgc3RyaW5nPiA9PlxuICogICB0eXBlb2YgdSA9PT0gJ3N0cmluZycgPyBFLnJpZ2h0KHUpIDogRS5sZWZ0KCdub3QgYSBzdHJpbmcnKVxuICpcbiAqIGNvbnN0IHBhcnNlTnVtYmVyID0gKHU6IHVua25vd24pOiBFLkVpdGhlcjxzdHJpbmcsIG51bWJlcj4gPT5cbiAqICAgdHlwZW9mIHUgPT09ICdudW1iZXInID8gRS5yaWdodCh1KSA6IEUubGVmdCgnbm90IGEgbnVtYmVyJylcbiAqXG4gKiBpbnRlcmZhY2UgUGVyc29uIHtcbiAqICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGFnZTogbnVtYmVyXG4gKiB9XG4gKlxuICogY29uc3QgcGFyc2VQZXJzb24gPSAoXG4gKiAgIGlucHV0OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICogKTogRS5FaXRoZXI8c3RyaW5nLCBQZXJzb24+ID0+XG4gKiAgIHBpcGUoXG4gKiAgICAgRS5EbyxcbiAqICAgICBFLmFwUygnbmFtZScsIHBhcnNlU3RyaW5nKGlucHV0Lm5hbWUpKSxcbiAqICAgICBFLmFwUygnYWdlJywgcGFyc2VOdW1iZXIoaW5wdXQuYWdlKSlcbiAqICAgKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGFyc2VQZXJzb24oe30pLCBFLmxlZnQoJ25vdCBhIHN0cmluZycpKSAvLyA8PSBmaXJzdCBlcnJvclxuICpcbiAqIGNvbnN0IEFwcGxpY2F0aXZlID0gRS5nZXRBcHBsaWNhdGl2ZVZhbGlkYXRpb24oXG4gKiAgIHBpcGUoc3RyaW5nLlNlbWlncm91cCwgUy5pbnRlcmNhbGF0ZSgnLCAnKSlcbiAqIClcbiAqXG4gKiBjb25zdCBhcFMgPSBBLmFwUyhBcHBsaWNhdGl2ZSlcbiAqXG4gKiBjb25zdCBwYXJzZVBlcnNvbkFsbCA9IChcbiAqICAgaW5wdXQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gKiApOiBFLkVpdGhlcjxzdHJpbmcsIFBlcnNvbj4gPT5cbiAqICAgcGlwZShcbiAqICAgICBFLkRvLFxuICogICAgIGFwUygnbmFtZScsIHBhcnNlU3RyaW5nKGlucHV0Lm5hbWUpKSxcbiAqICAgICBhcFMoJ2FnZScsIHBhcnNlTnVtYmVyKGlucHV0LmFnZSkpXG4gKiAgIClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBhcnNlUGVyc29uQWxsKHt9KSwgRS5sZWZ0KCdub3QgYSBzdHJpbmcsIG5vdCBhIG51bWJlcicpKSAvLyA8PSBhbGwgZXJyb3JzXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi43LjBcbiAqL1xudmFyIGdldEFwcGxpY2F0aXZlVmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChTRSkgeyByZXR1cm4gKHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIF9FOiB1bmRlZmluZWQsXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBmdW5jdGlvbiAoZmFiLCBmYSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNMZWZ0KShmYWIpXG4gICAgICAgICAgICA/ICgwLCBleHBvcnRzLmlzTGVmdCkoZmEpXG4gICAgICAgICAgICAgICAgPyAoMCwgZXhwb3J0cy5sZWZ0KShTRS5jb25jYXQoZmFiLmxlZnQsIGZhLmxlZnQpKVxuICAgICAgICAgICAgICAgIDogZmFiXG4gICAgICAgICAgICA6ICgwLCBleHBvcnRzLmlzTGVmdCkoZmEpXG4gICAgICAgICAgICAgICAgPyBmYVxuICAgICAgICAgICAgICAgIDogKDAsIGV4cG9ydHMucmlnaHQpKGZhYi5yaWdodChmYS5yaWdodCkpO1xuICAgIH0sXG4gICAgb2Y6IGV4cG9ydHMub2Zcbn0pOyB9O1xuZXhwb3J0cy5nZXRBcHBsaWNhdGl2ZVZhbGlkYXRpb24gPSBnZXRBcHBsaWNhdGl2ZVZhbGlkYXRpb247XG4vKipcbiAqIFRoZSBkZWZhdWx0IFtgQWx0YF0oI2FsdCkgaW5zdGFuY2UgcmV0dXJucyB0aGUgbGFzdCBlcnJvciwgaWYgeW91IHdhbnQgdG9cbiAqIGdldCBhbGwgZXJyb3JzIHlvdSBuZWVkIHRvIHByb3ZpZGUgYSB3YXkgdG8gY29uY2F0ZW5hdGUgdGhlbSB2aWEgYSBgU2VtaWdyb3VwYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgRSBmcm9tICdmcC10cy9FaXRoZXInXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCAqIGFzIHN0cmluZyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogY29uc3QgcGFyc2VTdHJpbmcgPSAodTogdW5rbm93bik6IEUuRWl0aGVyPHN0cmluZywgc3RyaW5nPiA9PlxuICogICB0eXBlb2YgdSA9PT0gJ3N0cmluZycgPyBFLnJpZ2h0KHUpIDogRS5sZWZ0KCdub3QgYSBzdHJpbmcnKVxuICpcbiAqIGNvbnN0IHBhcnNlTnVtYmVyID0gKHU6IHVua25vd24pOiBFLkVpdGhlcjxzdHJpbmcsIG51bWJlcj4gPT5cbiAqICAgdHlwZW9mIHUgPT09ICdudW1iZXInID8gRS5yaWdodCh1KSA6IEUubGVmdCgnbm90IGEgbnVtYmVyJylcbiAqXG4gKiBjb25zdCBwYXJzZSA9ICh1OiB1bmtub3duKTogRS5FaXRoZXI8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+ID0+XG4gKiAgIHBpcGUoXG4gKiAgICAgcGFyc2VTdHJpbmcodSksXG4gKiAgICAgRS5hbHQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+KCgpID0+IHBhcnNlTnVtYmVyKHUpKVxuICogICApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJzZSh0cnVlKSwgRS5sZWZ0KCdub3QgYSBudW1iZXInKSkgLy8gPD0gbGFzdCBlcnJvclxuICpcbiAqIGNvbnN0IEFsdCA9IEUuZ2V0QWx0VmFsaWRhdGlvbihwaXBlKHN0cmluZy5TZW1pZ3JvdXAsIFMuaW50ZXJjYWxhdGUoJywgJykpKVxuICpcbiAqIGNvbnN0IHBhcnNlQWxsID0gKHU6IHVua25vd24pOiBFLkVpdGhlcjxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj4gPT5cbiAqICAgQWx0LmFsdDxzdHJpbmcgfCBudW1iZXI+KHBhcnNlU3RyaW5nKHUpLCAoKSA9PiBwYXJzZU51bWJlcih1KSlcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBhcnNlQWxsKHRydWUpLCBFLmxlZnQoJ25vdCBhIHN0cmluZywgbm90IGEgbnVtYmVyJykpIC8vIDw9IGFsbCBlcnJvcnNcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjcuMFxuICovXG52YXIgZ2V0QWx0VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChTRSkgeyByZXR1cm4gKHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIF9FOiB1bmRlZmluZWQsXG4gICAgbWFwOiBfbWFwLFxuICAgIGFsdDogZnVuY3Rpb24gKG1lLCB0aGF0KSB7XG4gICAgICAgIGlmICgoMCwgZXhwb3J0cy5pc1JpZ2h0KShtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBtZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWEgPSB0aGF0KCk7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc0xlZnQpKGVhKSA/ICgwLCBleHBvcnRzLmxlZnQpKFNFLmNvbmNhdChtZS5sZWZ0LCBlYS5sZWZ0KSkgOiBlYTtcbiAgICB9XG59KTsgfTtcbmV4cG9ydHMuZ2V0QWx0VmFsaWRhdGlvbiA9IGdldEFsdFZhbGlkYXRpb247XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIG1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNMZWZ0KShmYSkgPyBmYSA6ICgwLCBleHBvcnRzLnJpZ2h0KShmKGZhLnJpZ2h0KSk7XG59OyB9O1xuZXhwb3J0cy5tYXAgPSBtYXA7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkZ1bmN0b3IgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIE1hcHMgdGhlIGBSaWdodGAgdmFsdWUgb2YgdGhpcyBgRWl0aGVyYCB0byB0aGUgc3BlY2lmaWVkIGNvbnN0YW50IHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydHMuYXMgPSAoMCwgZnVuY3Rpb25fMS5kdWFsKSgyLCAoMCwgRnVuY3Rvcl8xLmFzKShleHBvcnRzLkZ1bmN0b3IpKTtcbi8qKlxuICogTWFwcyB0aGUgYFJpZ2h0YCB2YWx1ZSBvZiB0aGlzIGBFaXRoZXJgIHRvIHRoZSB2b2lkIGNvbnN0YW50IHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydHMuYXNVbml0ID0gKDAsIEZ1bmN0b3JfMS5hc1VuaXQpKGV4cG9ydHMuRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLm9mID0gZXhwb3J0cy5yaWdodDtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLlBvaW50ZWQgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBvZjogZXhwb3J0cy5vZlxufTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFwYF0oI2FwKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgZXJyb3IgdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQHNpbmNlIDIuOC4wXG4gKi9cbnZhciBhcFcgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYWIpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNMZWZ0KShmYWIpID8gZmFiIDogKDAsIGV4cG9ydHMuaXNMZWZ0KShmYSkgPyBmYSA6ICgwLCBleHBvcnRzLnJpZ2h0KShmYWIucmlnaHQoZmEucmlnaHQpKTtcbn07IH07XG5leHBvcnRzLmFwVyA9IGFwVztcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuYXAgPSBleHBvcnRzLmFwVztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnRzLkFwcGx5ID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkFwcGxpY2F0aXZlID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IGV4cG9ydHMub2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5DaGFpbiA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBleHBvcnRzLmZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLk1vbmFkID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IGV4cG9ydHMub2YsXG4gICAgY2hhaW46IGV4cG9ydHMuZmxhdE1hcFxufTtcbi8qKlxuICogTGVmdC1hc3NvY2lhdGl2ZSBmb2xkIG9mIGEgc3RydWN0dXJlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBFIGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBjb25zdCBzdGFydFdpdGggPSAncHJlZml4J1xuICogY29uc3QgY29uY2F0ID0gKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PiBgJHthfToke2J9YFxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoRS5yaWdodCgnYScpLCBFLnJlZHVjZShzdGFydFdpdGgsIGNvbmNhdCkpLFxuICogICAncHJlZml4OmEnXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShFLmxlZnQoJ2UnKSwgRS5yZWR1Y2Uoc3RhcnRXaXRoLCBjb25jYXQpKSxcbiAqICAgJ3ByZWZpeCdcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciByZWR1Y2UgPSBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTGVmdCkoZmEpID8gYiA6IGYoYiwgZmEucmlnaHQpO1xufTsgfTtcbmV4cG9ydHMucmVkdWNlID0gcmVkdWNlO1xuLyoqXG4gKiBNYXAgZWFjaCBlbGVtZW50IG9mIHRoZSBzdHJ1Y3R1cmUgdG8gYSBtb25vaWQsIGFuZCBjb21iaW5lIHRoZSByZXN1bHRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBFIGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIGNvbnN0IHllbGwgPSAoYTogc3RyaW5nKSA9PiBgJHthfSFgXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShFLnJpZ2h0KCdhJyksIEUuZm9sZE1hcChTLk1vbm9pZCkoeWVsbCkpLFxuICogICAnYSEnXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShFLmxlZnQoJ2UnKSwgRS5mb2xkTWFwKFMuTW9ub2lkKSh5ZWxsKSksXG4gKiAgIFMuTW9ub2lkLmVtcHR5XG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7IHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTGVmdCkoZmEpID8gTS5lbXB0eSA6IGYoZmEucmlnaHQpO1xufTsgfTsgfTtcbmV4cG9ydHMuZm9sZE1hcCA9IGZvbGRNYXA7XG4vKipcbiAqIFJpZ2h0LWFzc29jaWF0aXZlIGZvbGQgb2YgYSBzdHJ1Y3R1cmUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCAqIGFzIEUgZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGNvbnN0IHN0YXJ0V2l0aCA9ICdwb3N0Zml4J1xuICogY29uc3QgY29uY2F0ID0gKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PiBgJHthfToke2J9YFxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoRS5yaWdodCgnYScpLCBFLnJlZHVjZVJpZ2h0KHN0YXJ0V2l0aCwgY29uY2F0KSksXG4gKiAgICdhOnBvc3RmaXgnXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShFLmxlZnQoJ2UnKSwgRS5yZWR1Y2VSaWdodChzdGFydFdpdGgsIGNvbmNhdCkpLFxuICogICAncG9zdGZpeCdcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNMZWZ0KShmYSkgPyBiIDogZihmYS5yaWdodCwgYik7XG59OyB9O1xuZXhwb3J0cy5yZWR1Y2VSaWdodCA9IHJlZHVjZVJpZ2h0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5Gb2xkYWJsZSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBNYXAgZWFjaCBlbGVtZW50IG9mIGEgc3RydWN0dXJlIHRvIGFuIGFjdGlvbiwgZXZhbHVhdGUgdGhlc2UgYWN0aW9ucyBmcm9tIGxlZnQgdG8gcmlnaHQsIGFuZCBjb2xsZWN0IHRoZSByZXN1bHRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0ICogYXMgRSBmcm9tICdmcC10cy9FaXRoZXInXG4gKiBpbXBvcnQgKiBhcyBPIGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKEUucmlnaHQoWydhJ10pLCBFLnRyYXZlcnNlKE8uQXBwbGljYXRpdmUpKFJBLmhlYWQpKSxcbiAqICAgTy5zb21lKEUucmlnaHQoJ2EnKSlcbiAqICApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShFLnJpZ2h0KFtdKSwgRS50cmF2ZXJzZShPLkFwcGxpY2F0aXZlKShSQS5oZWFkKSksXG4gKiAgIE8ubm9uZVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xudmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTGVmdCkodGEpID8gRi5vZigoMCwgZXhwb3J0cy5sZWZ0KSh0YS5sZWZ0KSkgOiBGLm1hcChmKHRhLnJpZ2h0KSwgZXhwb3J0cy5yaWdodCk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG5leHBvcnRzLnRyYXZlcnNlID0gdHJhdmVyc2U7XG4vKipcbiAqIEV2YWx1YXRlIGVhY2ggbW9uYWRpYyBhY3Rpb24gaW4gdGhlIHN0cnVjdHVyZSBmcm9tIGxlZnQgdG8gcmlnaHQsIGFuZCBjb2xsZWN0IHRoZSByZXN1bHRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBFIGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqIGltcG9ydCAqIGFzIE8gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoRS5yaWdodChPLnNvbWUoJ2EnKSksIEUuc2VxdWVuY2UoTy5BcHBsaWNhdGl2ZSkpLFxuICogICBPLnNvbWUoRS5yaWdodCgnYScpKVxuICogIClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKEUucmlnaHQoTy5ub25lKSwgRS5zZXF1ZW5jZShPLkFwcGxpY2F0aXZlKSksXG4gKiAgIE8ubm9uZVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xudmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc0xlZnQpKG1hKSA/IEYub2YoKDAsIGV4cG9ydHMubGVmdCkobWEubGVmdCkpIDogRi5tYXAobWEucmlnaHQsIGV4cG9ydHMucmlnaHQpO1xuICAgIH07XG59O1xuZXhwb3J0cy5zZXF1ZW5jZSA9IHNlcXVlbmNlO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5UcmF2ZXJzYWJsZSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBleHBvcnRzLnNlcXVlbmNlXG59O1xuLyoqXG4gKiBNYXAgYSBwYWlyIG9mIGZ1bmN0aW9ucyBvdmVyIHRoZSB0d28gdHlwZSBhcmd1bWVudHMgb2YgdGhlIGJpZnVuY3Rvci5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBiaW1hcCA9IGZ1bmN0aW9uIChmLCBnKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNMZWZ0KShmYSkgPyAoMCwgZXhwb3J0cy5sZWZ0KShmKGZhLmxlZnQpKSA6ICgwLCBleHBvcnRzLnJpZ2h0KShnKGZhLnJpZ2h0KSk7XG59OyB9O1xuZXhwb3J0cy5iaW1hcCA9IGJpbWFwO1xuLyoqXG4gKiBNYXAgYSBmdW5jdGlvbiBvdmVyIHRoZSBmaXJzdCB0eXBlIGFyZ3VtZW50IG9mIGEgYmlmdW5jdG9yLlxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBtYXBMZWZ0ID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc0xlZnQpKGZhKSA/ICgwLCBleHBvcnRzLmxlZnQpKGYoZmEubGVmdCkpIDogZmE7XG59OyB9O1xuZXhwb3J0cy5tYXBMZWZ0ID0gbWFwTGVmdDtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydHMuQmlmdW5jdG9yID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgYmltYXA6IF9iaW1hcCxcbiAgICBtYXBMZWZ0OiBfbWFwTGVmdFxufTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFsdGBdKCNhbHQpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBlcnJvciBhbmQgdGhlIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG52YXIgYWx0VyA9IGZ1bmN0aW9uICh0aGF0KSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNMZWZ0KShmYSkgPyB0aGF0KCkgOiBmYTtcbn07IH07XG5leHBvcnRzLmFsdFcgPSBhbHRXO1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgRWl0aGVyYCByZXR1cm5zIHRoZSBsZWZ0LW1vc3Qgbm9uLWBMZWZ0YCB2YWx1ZSAob3IgdGhlIHJpZ2h0LW1vc3QgYExlZnRgIHZhbHVlIGlmIGJvdGggdmFsdWVzIGFyZSBgTGVmdGApLlxuICpcbiAqIHwgeCAgICAgICAgfCB5ICAgICAgICB8IHBpcGUoeCwgYWx0KCgpID0+IHkpIHxcbiAqIHwgLS0tLS0tLS0gfCAtLS0tLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLS0tIHxcbiAqIHwgbGVmdChhKSAgfCBsZWZ0KGIpICB8IGxlZnQoYikgICAgICAgICAgICAgIHxcbiAqIHwgbGVmdChhKSAgfCByaWdodCgyKSB8IHJpZ2h0KDIpICAgICAgICAgICAgIHxcbiAqIHwgcmlnaHQoMSkgfCBsZWZ0KGIpICB8IHJpZ2h0KDEpICAgICAgICAgICAgIHxcbiAqIHwgcmlnaHQoMSkgfCByaWdodCgyKSB8IHJpZ2h0KDEpICAgICAgICAgICAgIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgRSBmcm9tICdmcC10cy9FaXRoZXInXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBFLmxlZnQoJ2EnKSxcbiAqICAgICBFLmFsdCgoKSA9PiBFLmxlZnQoJ2InKSlcbiAqICAgKSxcbiAqICAgRS5sZWZ0KCdiJylcbiAqIClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgRS5sZWZ0KCdhJyksXG4gKiAgICAgRS5hbHQoKCkgPT4gRS5yaWdodCgyKSlcbiAqICAgKSxcbiAqICAgRS5yaWdodCgyKVxuICogKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBFLnJpZ2h0KDEpLFxuICogICAgIEUuYWx0KCgpID0+IEUubGVmdCgnYicpKVxuICogICApLFxuICogICBFLnJpZ2h0KDEpXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIEUucmlnaHQoMSksXG4gKiAgICAgRS5hbHQoKCkgPT4gRS5yaWdodCgyKSlcbiAqICAgKSxcbiAqICAgRS5yaWdodCgxKVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuYWx0ID0gZXhwb3J0cy5hbHRXO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5BbHQgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIGV4dGVuZCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAod2EpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNMZWZ0KSh3YSkgPyB3YSA6ICgwLCBleHBvcnRzLnJpZ2h0KShmKHdhKSk7XG59OyB9O1xuZXhwb3J0cy5leHRlbmQgPSBleHRlbmQ7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkV4dGVuZCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmRcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnRzLkNoYWluUmVjID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGV4cG9ydHMuZmxhdE1hcCxcbiAgICBjaGFpblJlYzogX2NoYWluUmVjXG59O1xuLyoqXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0cy50aHJvd0Vycm9yID0gZXhwb3J0cy5sZWZ0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0cy5Nb25hZFRocm93ID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IGV4cG9ydHMub2YsXG4gICAgY2hhaW46IGV4cG9ydHMuZmxhdE1hcCxcbiAgICB0aHJvd0Vycm9yOiBleHBvcnRzLnRocm93RXJyb3Jcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5Gcm9tRWl0aGVyID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgZnJvbUVpdGhlcjogZnVuY3Rpb25fMS5pZGVudGl0eVxufTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZyb21QcmVkaWNhdGUsIGxlZnQsIHJpZ2h0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgMSxcbiAqICAgICBmcm9tUHJlZGljYXRlKFxuICogICAgICAgKG4pID0+IG4gPiAwLFxuICogICAgICAgKCkgPT4gJ2Vycm9yJ1xuICogICAgIClcbiAqICAgKSxcbiAqICAgcmlnaHQoMSlcbiAqIClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgLTEsXG4gKiAgICAgZnJvbVByZWRpY2F0ZShcbiAqICAgICAgIChuKSA9PiBuID4gMCxcbiAqICAgICAgICgpID0+ICdlcnJvcidcbiAqICAgICApXG4gKiAgICksXG4gKiAgIGxlZnQoJ2Vycm9yJylcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuZnJvbVByZWRpY2F0ZSA9ICgwLCBGcm9tRWl0aGVyXzEuZnJvbVByZWRpY2F0ZSkoZXhwb3J0cy5Gcm9tRWl0aGVyKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnZlcnNpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBFIGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCAqIGFzIE8gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgTy5zb21lKDEpLFxuICogICAgIEUuZnJvbU9wdGlvbigoKSA9PiAnZXJyb3InKVxuICogICApLFxuICogICBFLnJpZ2h0KDEpXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIE8ubm9uZSxcbiAqICAgICBFLmZyb21PcHRpb24oKCkgPT4gJ2Vycm9yJylcbiAqICAgKSxcbiAqICAgRS5sZWZ0KCdlcnJvcicpXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5mcm9tT3B0aW9uID0gXG4vKiNfX1BVUkVfXyovICgwLCBGcm9tRWl0aGVyXzEuZnJvbU9wdGlvbikoZXhwb3J0cy5Gcm9tRWl0aGVyKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBlaXRoZXIgaXMgYW4gaW5zdGFuY2Ugb2YgYExlZnRgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLmlzTGVmdCA9IF8uaXNMZWZ0O1xuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZWl0aGVyIGlzIGFuIGluc3RhbmNlIG9mIGBSaWdodGAsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuaXNSaWdodCA9IF8uaXNSaWdodDtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xudmFyIG1hdGNoVyA9IGZ1bmN0aW9uIChvbkxlZnQsIG9uUmlnaHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc0xlZnQpKG1hKSA/IG9uTGVmdChtYS5sZWZ0KSA6IG9uUmlnaHQobWEucmlnaHQpO1xuICAgIH07XG59O1xuZXhwb3J0cy5tYXRjaFcgPSBtYXRjaFc7XG4vKipcbiAqIEFsaWFzIG9mIFtgbWF0Y2hXYF0oI21hdGNodykuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5mb2xkVyA9IGV4cG9ydHMubWF0Y2hXO1xuLyoqXG4gKiBUYWtlcyB0d28gZnVuY3Rpb25zIGFuZCBhbiBgRWl0aGVyYCB2YWx1ZSwgaWYgdGhlIHZhbHVlIGlzIGEgYExlZnRgIHRoZSBpbm5lciB2YWx1ZSBpcyBhcHBsaWVkIHRvIHRoZSBmaXJzdCBmdW5jdGlvbixcbiAqIGlmIHRoZSB2YWx1ZSBpcyBhIGBSaWdodGAgdGhlIGlubmVyIHZhbHVlIGlzIGFwcGxpZWQgdG8gdGhlIHNlY29uZCBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWF0Y2gsIGxlZnQsIHJpZ2h0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGZ1bmN0aW9uIG9uTGVmdChlcnJvcnM6IEFycmF5PHN0cmluZz4pOiBzdHJpbmcge1xuICogICByZXR1cm4gYEVycm9yczogJHtlcnJvcnMuam9pbignLCAnKX1gXG4gKiB9XG4gKlxuICogZnVuY3Rpb24gb25SaWdodCh2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAqICAgcmV0dXJuIGBPazogJHt2YWx1ZX1gXG4gKiB9XG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHJpZ2h0KDEpLFxuICogICAgIG1hdGNoKG9uTGVmdCwgb25SaWdodClcbiAqICAgKSxcbiAqICAgJ09rOiAxJ1xuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIGxlZnQoWydlcnJvciAxJywgJ2Vycm9yIDInXSksXG4gKiAgICAgbWF0Y2gob25MZWZ0LCBvblJpZ2h0KVxuICogICApLFxuICogICAnRXJyb3JzOiBlcnJvciAxLCBlcnJvciAyJ1xuICogKVxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMubWF0Y2ggPSBleHBvcnRzLm1hdGNoVztcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaGBdKCNtYXRjaCkuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLmZvbGQgPSBleHBvcnRzLm1hdGNoO1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgZ2V0T3JFbHNlYF0oI2dldG9yZWxzZSkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGUgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi42LjBcbiAqL1xudmFyIGdldE9yRWxzZVcgPSBmdW5jdGlvbiAob25MZWZ0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMuaXNMZWZ0KShtYSkgPyBvbkxlZnQobWEubGVmdCkgOiBtYS5yaWdodDtcbiAgICB9O1xufTtcbmV4cG9ydHMuZ2V0T3JFbHNlVyA9IGdldE9yRWxzZVc7XG4vKipcbiAqIFJldHVybnMgdGhlIHdyYXBwZWQgdmFsdWUgaWYgaXQncyBhIGBSaWdodGAgb3IgYSBkZWZhdWx0IHZhbHVlIGlmIGlzIGEgYExlZnRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRPckVsc2UsIGxlZnQsIHJpZ2h0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgcmlnaHQoMSksXG4gKiAgICAgZ2V0T3JFbHNlKCgpID0+IDApXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbGVmdCgnZXJyb3InKSxcbiAqICAgICBnZXRPckVsc2UoKCkgPT4gMClcbiAqICAgKSxcbiAqICAgMFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuZ2V0T3JFbHNlID0gZXhwb3J0cy5nZXRPckVsc2VXO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29tYmluYXRvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5mbGFwID0gKDAsIEZ1bmN0b3JfMS5mbGFwKShleHBvcnRzLkZ1bmN0b3IpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLmFwRmlyc3QgPSAoMCwgQXBwbHlfMS5hcEZpcnN0KShleHBvcnRzLkFwcGx5KTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFwRmlyc3RgXSgjYXBmaXJzdClcbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgZXJyb3IgdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQHNpbmNlIDIuMTIuMFxuICovXG5leHBvcnRzLmFwRmlyc3RXID0gZXhwb3J0cy5hcEZpcnN0O1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIHNlY29uZC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5hcFNlY29uZCA9ICgwLCBBcHBseV8xLmFwU2Vjb25kKShleHBvcnRzLkFwcGx5KTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFwU2Vjb25kYF0oI2Fwc2Vjb25kKVxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBlcnJvciB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAc2luY2UgMi4xMi4wXG4gKi9cbmV4cG9ydHMuYXBTZWNvbmRXID0gZXhwb3J0cy5hcFNlY29uZDtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xNS4wXG4gKi9cbmV4cG9ydHMudGFwID0gKDAsIGZ1bmN0aW9uXzEuZHVhbCkoMiwgY2hhaW5hYmxlLnRhcChleHBvcnRzLkNoYWluKSk7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BmbGF0dGVuYF0oI2ZsYXR0ZW4pLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBlcnJvciB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnRzLmZsYXR0ZW5XID0gXG4vKiNfX1BVUkVfXyovICgwLCBleHBvcnRzLmZsYXRNYXApKGZ1bmN0aW9uXzEuaWRlbnRpdHkpO1xuLyoqXG4gKiBUaGUgYGZsYXR0ZW5gIGZ1bmN0aW9uIGlzIHRoZSBjb252ZW50aW9uYWwgbW9uYWQgam9pbiBvcGVyYXRvci4gSXQgaXMgdXNlZCB0byByZW1vdmUgb25lIGxldmVsIG9mIG1vbmFkaWMgc3RydWN0dXJlLCBwcm9qZWN0aW5nIGl0cyBib3VuZCBhcmd1bWVudCBpbnRvIHRoZSBvdXRlciBsZXZlbC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgRSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChFLmZsYXR0ZW4oRS5yaWdodChFLnJpZ2h0KCdhJykpKSwgRS5yaWdodCgnYScpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChFLmZsYXR0ZW4oRS5yaWdodChFLmxlZnQoJ2UnKSkpLCBFLmxlZnQoJ2UnKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoRS5mbGF0dGVuKEUubGVmdCgnZScpKSwgRS5sZWZ0KCdlJykpXG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLmZsYXR0ZW4gPSBleHBvcnRzLmZsYXR0ZW5XO1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5kdXBsaWNhdGUgPSAoMCwgZXhwb3J0cy5leHRlbmQpKGZ1bmN0aW9uXzEuaWRlbnRpdHkpO1xuLyoqXG4gKiBVc2UgYGxpZnRPcHRpb25gLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0cy5mcm9tT3B0aW9uSyA9IFxuLyojX19QVVJFX18qLyAoMCwgRnJvbUVpdGhlcl8xLmZyb21PcHRpb25LKShleHBvcnRzLkZyb21FaXRoZXIpO1xuLyoqXG4gKiBVc2UgYGZsYXRNYXBPcHRpb25gLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0cy5jaGFpbk9wdGlvbksgPSAoMCwgRnJvbUVpdGhlcl8xLmNoYWluT3B0aW9uSykoZXhwb3J0cy5Gcm9tRWl0aGVyLCBleHBvcnRzLkNoYWluKTtcbi8qKlxuICogVXNlIGBmbGF0TWFwT3B0aW9uYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4xMy4yXG4gKi9cbmV4cG9ydHMuY2hhaW5PcHRpb25LVyA9IGV4cG9ydHMuY2hhaW5PcHRpb25LO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIF9Gcm9tRWl0aGVyID0ge1xuICAgIGZyb21FaXRoZXI6IGV4cG9ydHMuRnJvbUVpdGhlci5mcm9tRWl0aGVyXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuMTUuMFxuICovXG5leHBvcnRzLmxpZnROdWxsYWJsZSA9IF8ubGlmdE51bGxhYmxlKF9Gcm9tRWl0aGVyKTtcbi8qKlxuICogQGNhdGVnb3J5IGxpZnRpbmdcbiAqIEBzaW5jZSAyLjE1LjBcbiAqL1xuZXhwb3J0cy5saWZ0T3B0aW9uID0gXy5saWZ0T3B0aW9uKF9Gcm9tRWl0aGVyKTtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBfRmxhdE1hcCA9IHtcbiAgICBmbGF0TWFwOiBleHBvcnRzLmZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNS4wXG4gKi9cbmV4cG9ydHMuZmxhdE1hcE51bGxhYmxlID0gXy5mbGF0TWFwTnVsbGFibGUoX0Zyb21FaXRoZXIsIF9GbGF0TWFwKTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjE1LjBcbiAqL1xuZXhwb3J0cy5mbGF0TWFwT3B0aW9uID0gXy5mbGF0TWFwT3B0aW9uKF9Gcm9tRWl0aGVyLCBfRmxhdE1hcCk7XG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBFIGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIEUucmlnaHQoMSksXG4gKiAgICAgRS5maWx0ZXJPckVsc2UoXG4gKiAgICAgICAobikgPT4gbiA+IDAsXG4gKiAgICAgICAoKSA9PiAnZXJyb3InXG4gKiAgICAgKVxuICogICApLFxuICogICBFLnJpZ2h0KDEpXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIEUucmlnaHQoLTEpLFxuICogICAgIEUuZmlsdGVyT3JFbHNlKFxuICogICAgICAgKG4pID0+IG4gPiAwLFxuICogICAgICAgKCkgPT4gJ2Vycm9yJ1xuICogICAgIClcbiAqICAgKSxcbiAqICAgRS5sZWZ0KCdlcnJvcicpXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIEUubGVmdCgnYScpLFxuICogICAgIEUuZmlsdGVyT3JFbHNlKFxuICogICAgICAgKG4pID0+IG4gPiAwLFxuICogICAgICAgKCkgPT4gJ2Vycm9yJ1xuICogICAgIClcbiAqICAgKSxcbiAqICAgRS5sZWZ0KCdhJylcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5maWx0ZXJPckVsc2UgPSAoMCwgRnJvbUVpdGhlcl8xLmZpbHRlck9yRWxzZSkoZXhwb3J0cy5Gcm9tRWl0aGVyLCBleHBvcnRzLkNoYWluKTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGZpbHRlck9yRWxzZWBdKCNmaWx0ZXJvcmVsc2UpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBlcnJvciB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0cy5maWx0ZXJPckVsc2VXID0gZXhwb3J0cy5maWx0ZXJPckVsc2U7XG4vKipcbiAqIFJldHVybnMgYSBgUmlnaHRgIGlmIGlzIGEgYExlZnRgIChhbmQgdmljZSB2ZXJzYSkuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbnZhciBzd2FwID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAoKDAsIGV4cG9ydHMuaXNMZWZ0KShtYSkgPyAoMCwgZXhwb3J0cy5yaWdodCkobWEubGVmdCkgOiAoMCwgZXhwb3J0cy5sZWZ0KShtYS5yaWdodCkpOyB9O1xuZXhwb3J0cy5zd2FwID0gc3dhcDtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYG9yRWxzZWBdKCNvcmVsc2UpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbnZhciBvckVsc2VXID0gZnVuY3Rpb24gKG9uTGVmdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTGVmdCkobWEpID8gb25MZWZ0KG1hLmxlZnQpIDogbWE7XG4gICAgfTtcbn07XG5leHBvcnRzLm9yRWxzZVcgPSBvckVsc2VXO1xuLyoqXG4gKiBVc2VmdWwgZm9yIHJlY292ZXJpbmcgZnJvbSBlcnJvcnMuXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0cy5vckVsc2UgPSBleHBvcnRzLm9yRWxzZVc7XG4vKipcbiAqIFRha2VzIGEgZGVmYXVsdCBhbmQgYSBudWxsYWJsZSB2YWx1ZSwgaWYgdGhlIHZhbHVlIGlzIG5vdCBudWxseSwgdHVybiBpdCBpbnRvIGEgYFJpZ2h0YCwgaWYgdGhlIHZhbHVlIGlzIG51bGx5IHVzZVxuICogdGhlIHByb3ZpZGVkIGRlZmF1bHQgYXMgYSBgTGVmdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZyb21OdWxsYWJsZSwgbGVmdCwgcmlnaHQgfSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogY29uc3QgcGFyc2UgPSBmcm9tTnVsbGFibGUoJ251bGx5JylcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBhcnNlKDEpLCByaWdodCgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGFyc2UobnVsbCksIGxlZnQoJ251bGx5JykpXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIGZyb21OdWxsYWJsZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHJldHVybiBhID09IG51bGwgPyAoMCwgZXhwb3J0cy5sZWZ0KShlKSA6ICgwLCBleHBvcnRzLnJpZ2h0KShhKTtcbiAgICB9O1xufTtcbmV4cG9ydHMuZnJvbU51bGxhYmxlID0gZnJvbU51bGxhYmxlO1xuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGBFaXRoZXJgIGZyb20gYSBmdW5jdGlvbiB0aGF0IG1pZ2h0IHRocm93LlxuICpcbiAqIFNlZSBhbHNvIFtgdHJ5Q2F0Y2hLYF0oI3RyeWNhdGNoaykuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIEUgZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGNvbnN0IHVuc2FmZUhlYWQgPSA8QT4oYXM6IFJlYWRvbmx5QXJyYXk8QT4pOiBBID0+IHtcbiAqICAgaWYgKGFzLmxlbmd0aCA+IDApIHtcbiAqICAgICByZXR1cm4gYXNbMF1cbiAqICAgfSBlbHNlIHtcbiAqICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VtcHR5IGFycmF5JylcbiAqICAgfVxuICogfVxuICpcbiAqIGNvbnN0IGhlYWQgPSA8QT4oYXM6IFJlYWRvbmx5QXJyYXk8QT4pOiBFLkVpdGhlcjxFcnJvciwgQT4gPT5cbiAqICAgRS50cnlDYXRjaCgoKSA9PiB1bnNhZmVIZWFkKGFzKSwgZSA9PiAoZSBpbnN0YW5jZW9mIEVycm9yID8gZSA6IG5ldyBFcnJvcigndW5rbm93biBlcnJvcicpKSlcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGhlYWQoW10pLCBFLmxlZnQobmV3IEVycm9yKCdlbXB0eSBhcnJheScpKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaGVhZChbMSwgMiwgM10pLCBFLnJpZ2h0KDEpKVxuICpcbiAqIEBjYXRlZ29yeSBpbnRlcm9wXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xudmFyIHRyeUNhdGNoID0gZnVuY3Rpb24gKGYsIG9uVGhyb3cpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMucmlnaHQpKGYoKSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5sZWZ0KShvblRocm93KGUpKTtcbiAgICB9XG59O1xuZXhwb3J0cy50cnlDYXRjaCA9IHRyeUNhdGNoO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGZ1bmN0aW9uIHRoYXQgbWF5IHRocm93IHRvIG9uZSByZXR1cm5pbmcgYSBgRWl0aGVyYC5cbiAqXG4gKiBAY2F0ZWdvcnkgaW50ZXJvcFxuICogQHNpbmNlIDIuMTAuMFxuICovXG52YXIgdHJ5Q2F0Y2hLID0gZnVuY3Rpb24gKGYsIG9uVGhyb3cpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYVtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy50cnlDYXRjaCkoZnVuY3Rpb24gKCkgeyByZXR1cm4gZi5hcHBseSh2b2lkIDAsIGEpOyB9LCBvblRocm93KTtcbiAgICB9O1xufTtcbmV4cG9ydHMudHJ5Q2F0Y2hLID0gdHJ5Q2F0Y2hLO1xuLyoqXG4gKiBVc2UgYGxpZnROdWxsYWJsZWAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuOS4wXG4gKi9cbnZhciBmcm9tTnVsbGFibGVLID0gZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgZnJvbSA9ICgwLCBleHBvcnRzLmZyb21OdWxsYWJsZSkoZSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiAoMCwgZnVuY3Rpb25fMS5mbG93KShmLCBmcm9tKTsgfTtcbn07XG5leHBvcnRzLmZyb21OdWxsYWJsZUsgPSBmcm9tTnVsbGFibGVLO1xuLyoqXG4gKiBVc2UgYGZsYXRNYXBOdWxsYWJsZWAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuOS4wXG4gKi9cbnZhciBjaGFpbk51bGxhYmxlSyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGZyb20gPSAoMCwgZXhwb3J0cy5mcm9tTnVsbGFibGVLKShlKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuICgwLCBleHBvcnRzLmZsYXRNYXApKGZyb20oZikpOyB9O1xufTtcbmV4cG9ydHMuY2hhaW5OdWxsYWJsZUsgPSBjaGFpbk51bGxhYmxlSztcbi8qKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydHMudG9VbmlvbiA9ICgwLCBleHBvcnRzLmZvbGRXKShmdW5jdGlvbl8xLmlkZW50aXR5LCBmdW5jdGlvbl8xLmlkZW50aXR5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIERlZmF1bHQgdmFsdWUgZm9yIHRoZSBgb25FcnJvcmAgYXJndW1lbnQgb2YgYHRyeUNhdGNoYFxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5mdW5jdGlvbiB0b0Vycm9yKGUpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yID8gZSA6IG5ldyBFcnJvcihTdHJpbmcoZSkpO1xufVxuZXhwb3J0cy50b0Vycm9yID0gdG9FcnJvcjtcbmZ1bmN0aW9uIGVsZW0oRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSwgbWEpIHtcbiAgICAgICAgaWYgKG1hID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtRV8xID0gZWxlbShFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIGVsZW1FXzEoYSwgbWEpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5pc0xlZnQpKG1hKSA/IGZhbHNlIDogRS5lcXVhbHMoYSwgbWEucmlnaHQpO1xuICAgIH07XG59XG5leHBvcnRzLmVsZW0gPSBlbGVtO1xuLyoqXG4gKiBSZXR1cm5zIGBmYWxzZWAgaWYgYExlZnRgIG9yIHJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgYXBwbGljYXRpb24gb2YgdGhlIGdpdmVuIHByZWRpY2F0ZSB0byB0aGUgYFJpZ2h0YCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZXhpc3RzLCBsZWZ0LCByaWdodCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBjb25zdCBndDIgPSBleGlzdHMoKG46IG51bWJlcikgPT4gbiA+IDIpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGd0MihsZWZ0KCdhJykpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChndDIocmlnaHQoMSkpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChndDIocmlnaHQoMykpLCB0cnVlKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG52YXIgZXhpc3RzID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmlzTGVmdCkobWEpID8gZmFsc2UgOiBwcmVkaWNhdGUobWEucmlnaHQpO1xuICAgIH07XG59O1xuZXhwb3J0cy5leGlzdHMgPSBleGlzdHM7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkbyBub3RhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnRzLkRvID0gKDAsIGV4cG9ydHMub2YpKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnRzLmJpbmRUbyA9ICgwLCBGdW5jdG9yXzEuYmluZFRvKShleHBvcnRzLkZ1bmN0b3IpO1xudmFyIGxldF8gPSAvKiNfX1BVUkVfXyovICgwLCBGdW5jdG9yXzEubGV0KShleHBvcnRzLkZ1bmN0b3IpO1xuZXhwb3J0cy5sZXQgPSBsZXRfO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnRzLmJpbmQgPSBjaGFpbmFibGUuYmluZChleHBvcnRzLkNoYWluKTtcbi8qKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGVycm9yIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydHMuYmluZFcgPSBleHBvcnRzLmJpbmQ7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydHMuYXBTID0gKDAsIEFwcGx5XzEuYXBTKShleHBvcnRzLkFwcGx5KTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFwU2BdKCNhcHMpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBlcnJvciB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnRzLmFwU1cgPSBleHBvcnRzLmFwUztcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnRzLkFwVCA9ICgwLCBleHBvcnRzLm9mKShfLmVtcHR5UmVhZG9ubHlBcnJheSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBhcnJheSB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seU5vbkVtcHR5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG52YXIgdHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIGUgPSBmKDAsIF8uaGVhZChhcykpO1xuICAgICAgICBpZiAoKDAsIGV4cG9ydHMuaXNMZWZ0KShlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtlLnJpZ2h0XTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGVfMSA9IGYoaSwgYXNbaV0pO1xuICAgICAgICAgICAgaWYgKCgwLCBleHBvcnRzLmlzTGVmdCkoZV8xKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlXzE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXQucHVzaChlXzEucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5yaWdodCkob3V0KTtcbiAgICB9O1xufTtcbmV4cG9ydHMudHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXggPSB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleDtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbnZhciB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHZhciBnID0gKDAsIGV4cG9ydHMudHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXgpKGYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChfLmlzTm9uRW1wdHkoYXMpID8gZyhhcykgOiBleHBvcnRzLkFwVCk7IH07XG59O1xuZXhwb3J0cy50cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXggPSB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXg7XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydHMudHJhdmVyc2VBcnJheVdpdGhJbmRleCA9IGV4cG9ydHMudHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlKEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG52YXIgdHJhdmVyc2VBcnJheSA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiAoMCwgZXhwb3J0cy50cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXgpKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbmV4cG9ydHMudHJhdmVyc2VBcnJheSA9IHRyYXZlcnNlQXJyYXk7XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjc2VxdWVuY2UoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydHMuc2VxdWVuY2VBcnJheSA9IFxuLyojX19QVVJFX18qLyAoMCwgZXhwb3J0cy50cmF2ZXJzZUFycmF5KShmdW5jdGlvbl8xLmlkZW50aXR5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxlZ2FjeVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBBbGlhcyBvZiBgZmxhdE1hcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuNi4wXG4gKi9cbmV4cG9ydHMuY2hhaW5XID0gZXhwb3J0cy5mbGF0TWFwO1xuLyoqXG4gKiBBbGlhcyBvZiBgZmxhdE1hcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydHMuY2hhaW4gPSBleHBvcnRzLmZsYXRNYXA7XG4vKipcbiAqIEFsaWFzIG9mIGB0YXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnRzLmNoYWluRmlyc3QgPSBleHBvcnRzLnRhcDtcbi8qKlxuICogQWxpYXMgb2YgYHRhcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydHMuY2hhaW5GaXJzdFcgPSBleHBvcnRzLnRhcDtcbi8qKlxuICogVXNlIFtgcGFyc2VgXSguL0pzb24udHMuaHRtbCNwYXJzZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5mdW5jdGlvbiBwYXJzZUpTT04ocywgb25FcnJvcikge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy50cnlDYXRjaCkoZnVuY3Rpb24gKCkgeyByZXR1cm4gSlNPTi5wYXJzZShzKTsgfSwgb25FcnJvcik7XG59XG5leHBvcnRzLnBhcnNlSlNPTiA9IHBhcnNlSlNPTjtcbi8qKlxuICogVXNlIFtgc3RyaW5naWZ5YF0oLi9Kc29uLnRzLmh0bWwjc3RyaW5naWZ5KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbnZhciBzdHJpbmdpZnlKU09OID0gZnVuY3Rpb24gKHUsIG9uRXJyb3IpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMudHJ5Q2F0Y2gpKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHMgPSBKU09OLnN0cmluZ2lmeSh1KTtcbiAgICAgICAgaWYgKHR5cGVvZiBzICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb252ZXJ0aW5nIHVuc3VwcG9ydGVkIHN0cnVjdHVyZSB0byBKU09OJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfSwgb25FcnJvcik7XG59O1xuZXhwb3J0cy5zdHJpbmdpZnlKU09OID0gc3RyaW5naWZ5SlNPTjtcbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgRS5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBFLmVpdGhlcmBcbiAqICh3aGVyZSBgRWAgaXMgZnJvbSBgaW1wb3J0IEUgZnJvbSAnZnAtdHMvRWl0aGVyJ2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5laXRoZXIgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgb2Y6IGV4cG9ydHMub2YsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZXhwb3J0cy5mbGF0TWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IGV4cG9ydHMuc2VxdWVuY2UsXG4gICAgYmltYXA6IF9iaW1hcCxcbiAgICBtYXBMZWZ0OiBfbWFwTGVmdCxcbiAgICBhbHQ6IF9hbHQsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGNoYWluUmVjOiBfY2hhaW5SZWMsXG4gICAgdGhyb3dFcnJvcjogZXhwb3J0cy50aHJvd0Vycm9yXG59O1xuLyoqXG4gKiBVc2UgW2BnZXRBcHBseVNlbWlncm91cGBdKC4vQXBwbHkudHMuaHRtbCNnZXRhcHBseXNlbWlncm91cCkgaW5zdGVhZC5cbiAqXG4gKiBTZW1pZ3JvdXAgcmV0dXJuaW5nIHRoZSBsZWZ0LW1vc3QgYExlZnRgIHZhbHVlLiBJZiBib3RoIG9wZXJhbmRzIGFyZSBgUmlnaHRgcyB0aGVuIHRoZSBpbm5lciB2YWx1ZXNcbiAqIGFyZSBjb25jYXRlbmF0ZWQgdXNpbmcgdGhlIHByb3ZpZGVkIGBTZW1pZ3JvdXBgXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0cy5nZXRBcHBseVNlbWlncm91cCA9IFxuLyojX19QVVJFX18qLyAoMCwgQXBwbHlfMS5nZXRBcHBseVNlbWlncm91cCkoZXhwb3J0cy5BcHBseSk7XG4vKipcbiAqIFVzZSBbYGdldEFwcGxpY2F0aXZlTW9ub2lkYF0oLi9BcHBsaWNhdGl2ZS50cy5odG1sI2dldGFwcGxpY2F0aXZlbW9ub2lkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydHMuZ2V0QXBwbHlNb25vaWQgPSBcbi8qI19fUFVSRV9fKi8gKDAsIEFwcGxpY2F0aXZlXzEuZ2V0QXBwbGljYXRpdmVNb25vaWQpKGV4cG9ydHMuQXBwbGljYXRpdmUpO1xuLyoqXG4gKiBVc2UgW2BnZXRBcHBseVNlbWlncm91cGBdKC4vQXBwbHkudHMuaHRtbCNnZXRhcHBseXNlbWlncm91cCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG52YXIgZ2V0VmFsaWRhdGlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChTRSwgU0EpIHtcbiAgICByZXR1cm4gKDAsIEFwcGx5XzEuZ2V0QXBwbHlTZW1pZ3JvdXApKCgwLCBleHBvcnRzLmdldEFwcGxpY2F0aXZlVmFsaWRhdGlvbikoU0UpKShTQSk7XG59O1xuZXhwb3J0cy5nZXRWYWxpZGF0aW9uU2VtaWdyb3VwID0gZ2V0VmFsaWRhdGlvblNlbWlncm91cDtcbi8qKlxuICogVXNlIFtgZ2V0QXBwbGljYXRpdmVNb25vaWRgXSguL0FwcGxpY2F0aXZlLnRzLmh0bWwjZ2V0YXBwbGljYXRpdmVtb25vaWQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xudmFyIGdldFZhbGlkYXRpb25Nb25vaWQgPSBmdW5jdGlvbiAoU0UsIE1BKSB7XG4gICAgcmV0dXJuICgwLCBBcHBsaWNhdGl2ZV8xLmdldEFwcGxpY2F0aXZlTW9ub2lkKSgoMCwgZXhwb3J0cy5nZXRBcHBsaWNhdGl2ZVZhbGlkYXRpb24pKFNFKSkoTUEpO1xufTtcbmV4cG9ydHMuZ2V0VmFsaWRhdGlvbk1vbm9pZCA9IGdldFZhbGlkYXRpb25Nb25vaWQ7XG4vKipcbiAqIFVzZSBbYGdldEFwcGxpY2F0aXZlVmFsaWRhdGlvbmBdKCNnZXRhcHBsaWNhdGl2ZXZhbGlkYXRpb24pIGFuZCBbYGdldEFsdFZhbGlkYXRpb25gXSgjZ2V0YWx0dmFsaWRhdGlvbikgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5mdW5jdGlvbiBnZXRWYWxpZGF0aW9uKFNFKSB7XG4gICAgdmFyIGFwID0gKDAsIGV4cG9ydHMuZ2V0QXBwbGljYXRpdmVWYWxpZGF0aW9uKShTRSkuYXA7XG4gICAgdmFyIGFsdCA9ICgwLCBleHBvcnRzLmdldEFsdFZhbGlkYXRpb24pKFNFKS5hbHQ7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICAgICAgX0U6IHVuZGVmaW5lZCxcbiAgICAgICAgbWFwOiBfbWFwLFxuICAgICAgICBvZjogZXhwb3J0cy5vZixcbiAgICAgICAgY2hhaW46IGV4cG9ydHMuZmxhdE1hcCxcbiAgICAgICAgYmltYXA6IF9iaW1hcCxcbiAgICAgICAgbWFwTGVmdDogX21hcExlZnQsXG4gICAgICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICAgICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgICAgIGV4dGVuZDogX2V4dGVuZCxcbiAgICAgICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICAgICAgc2VxdWVuY2U6IGV4cG9ydHMuc2VxdWVuY2UsXG4gICAgICAgIGNoYWluUmVjOiBfY2hhaW5SZWMsXG4gICAgICAgIHRocm93RXJyb3I6IGV4cG9ydHMudGhyb3dFcnJvcixcbiAgICAgICAgYXA6IGFwLFxuICAgICAgICBhbHQ6IGFsdFxuICAgIH07XG59XG5leHBvcnRzLmdldFZhbGlkYXRpb24gPSBnZXRWYWxpZGF0aW9uO1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmF0UmVhZG9ubHlSZWNvcmQgPSBleHBvcnRzLmF0ID0gZXhwb3J0cy5pbmRleFJlYWRvbmx5UmVjb3JkID0gZXhwb3J0cy5pbmRleFJlYWRvbmx5Tm9uRW1wdHlBcnJheSA9IGV4cG9ydHMuaW5kZXhSZWFkb25seUFycmF5ID0gZXhwb3J0cy5pbmRleCA9IGV4cG9ydHMudHJhdmVyc2FsVHJhdmVyc2UgPSBleHBvcnRzLmZyb21UcmF2ZXJzYWJsZSA9IGV4cG9ydHMuQXBwbGljYXRpdmVJZGVudGl0eSA9IGV4cG9ydHMudHJhdmVyc2FsQ29tcG9zZVRyYXZlcnNhbCA9IGV4cG9ydHMudHJhdmVyc2FsID0gZXhwb3J0cy5vcHRpb25hbEZpbmRGaXJzdE5vbkVtcHR5ID0gZXhwb3J0cy5vcHRpb25hbEZpbmRGaXJzdCA9IGV4cG9ydHMub3B0aW9uYWxLZXkgPSBleHBvcnRzLm9wdGlvbmFsSW5kZXhOb25FbXB0eSA9IGV4cG9ydHMub3B0aW9uYWxJbmRleCA9IGV4cG9ydHMub3B0aW9uYWxDb21wb3NlT3B0aW9uYWwgPSBleHBvcnRzLm9wdGlvbmFsTW9kaWZ5ID0gZXhwb3J0cy5vcHRpb25hbE1vZGlmeU9wdGlvbiA9IGV4cG9ydHMub3B0aW9uYWxBc1RyYXZlcnNhbCA9IGV4cG9ydHMub3B0aW9uYWwgPSBleHBvcnRzLnByaXNtTGVmdCA9IGV4cG9ydHMucHJpc21SaWdodCA9IGV4cG9ydHMucHJpc21Tb21lID0gZXhwb3J0cy5wcmlzbUZyb21QcmVkaWNhdGUgPSBleHBvcnRzLnByaXNtRnJvbU51bGxhYmxlID0gZXhwb3J0cy5wcmlzbUNvbXBvc2VMZW5zID0gZXhwb3J0cy5wcmlzbVNldCA9IGV4cG9ydHMucHJpc21Nb2RpZnkgPSBleHBvcnRzLnByaXNtTW9kaWZ5T3B0aW9uID0gZXhwb3J0cy5wcmlzbUFzVHJhdmVyc2FsID0gZXhwb3J0cy5wcmlzbUFzT3B0aW9uYWwgPSBleHBvcnRzLnByaXNtID0gZXhwb3J0cy5sZW5zQXRLZXkgPSBleHBvcnRzLmxlbnNDb21wb25lbnQgPSBleHBvcnRzLmxlbnNQcm9wcyA9IGV4cG9ydHMubGVuc1Byb3AgPSBleHBvcnRzLmxlbnNJZCA9IGV4cG9ydHMubGVuc0NvbXBvc2VQcmlzbSA9IGV4cG9ydHMucHJpc21Db21wb3NlUHJpc20gPSBleHBvcnRzLmxlbnNDb21wb3NlTGVucyA9IGV4cG9ydHMubGVuc0FzVHJhdmVyc2FsID0gZXhwb3J0cy5sZW5zQXNPcHRpb25hbCA9IGV4cG9ydHMubGVucyA9IGV4cG9ydHMuaXNvQXNUcmF2ZXJzYWwgPSBleHBvcnRzLmlzb0FzT3B0aW9uYWwgPSBleHBvcnRzLmlzb0FzUHJpc20gPSBleHBvcnRzLmlzb0FzTGVucyA9IGV4cG9ydHMuaXNvID0gdm9pZCAwO1xudmFyIFJBID0gcmVxdWlyZShcImZwLXRzL2xpYi9SZWFkb25seUFycmF5XCIpO1xudmFyIFJSID0gcmVxdWlyZShcImZwLXRzL2xpYi9SZWFkb25seVJlY29yZFwiKTtcbnZhciBmdW5jdGlvbl8xID0gcmVxdWlyZShcImZwLXRzL2xpYi9mdW5jdGlvblwiKTtcbnZhciBPID0gcmVxdWlyZShcImZwLXRzL2xpYi9PcHRpb25cIik7XG52YXIgRSA9IHJlcXVpcmUoXCJmcC10cy9saWIvRWl0aGVyXCIpO1xudmFyIHBpcGVhYmxlXzEgPSByZXF1aXJlKFwiZnAtdHMvbGliL3BpcGVhYmxlXCIpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSXNvXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiogQGludGVybmFsICovXG52YXIgaXNvID0gZnVuY3Rpb24gKGdldCwgcmV2ZXJzZUdldCkgeyByZXR1cm4gKHtcbiAgICBnZXQ6IGdldCxcbiAgICByZXZlcnNlR2V0OiByZXZlcnNlR2V0XG59KTsgfTtcbmV4cG9ydHMuaXNvID0gaXNvO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGlzb0FzTGVucyA9IGZ1bmN0aW9uIChzYSkgeyByZXR1cm4gKDAsIGV4cG9ydHMubGVucykoc2EuZ2V0LCAoMCwgZnVuY3Rpb25fMS5mbG93KShzYS5yZXZlcnNlR2V0LCBmdW5jdGlvbl8xLmNvbnN0YW50KSk7IH07XG5leHBvcnRzLmlzb0FzTGVucyA9IGlzb0FzTGVucztcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBpc29Bc1ByaXNtID0gZnVuY3Rpb24gKHNhKSB7IHJldHVybiAoMCwgZXhwb3J0cy5wcmlzbSkoKDAsIGZ1bmN0aW9uXzEuZmxvdykoc2EuZ2V0LCBPLnNvbWUpLCBzYS5yZXZlcnNlR2V0KTsgfTtcbmV4cG9ydHMuaXNvQXNQcmlzbSA9IGlzb0FzUHJpc207XG4vKiogQGludGVybmFsICovXG52YXIgaXNvQXNPcHRpb25hbCA9IGZ1bmN0aW9uIChzYSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5vcHRpb25hbCkoKDAsIGZ1bmN0aW9uXzEuZmxvdykoc2EuZ2V0LCBPLnNvbWUpLCAoMCwgZnVuY3Rpb25fMS5mbG93KShzYS5yZXZlcnNlR2V0LCBmdW5jdGlvbl8xLmNvbnN0YW50KSk7XG59O1xuZXhwb3J0cy5pc29Bc09wdGlvbmFsID0gaXNvQXNPcHRpb25hbDtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBpc29Bc1RyYXZlcnNhbCA9IGZ1bmN0aW9uIChzYSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy50cmF2ZXJzYWwpKGZ1bmN0aW9uIChGKSB7IHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcmV0dXJuIEYubWFwKGYoc2EuZ2V0KHMpKSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHNhLnJldmVyc2VHZXQoYSk7IH0pO1xuICAgIH07IH07IH0pO1xufTtcbmV4cG9ydHMuaXNvQXNUcmF2ZXJzYWwgPSBpc29Bc1RyYXZlcnNhbDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIExlbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBsZW5zID0gZnVuY3Rpb24gKGdldCwgc2V0KSB7IHJldHVybiAoeyBnZXQ6IGdldCwgc2V0OiBzZXQgfSk7IH07XG5leHBvcnRzLmxlbnMgPSBsZW5zO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGxlbnNBc09wdGlvbmFsID0gZnVuY3Rpb24gKHNhKSB7IHJldHVybiAoMCwgZXhwb3J0cy5vcHRpb25hbCkoKDAsIGZ1bmN0aW9uXzEuZmxvdykoc2EuZ2V0LCBPLnNvbWUpLCBzYS5zZXQpOyB9O1xuZXhwb3J0cy5sZW5zQXNPcHRpb25hbCA9IGxlbnNBc09wdGlvbmFsO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGxlbnNBc1RyYXZlcnNhbCA9IGZ1bmN0aW9uIChzYSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy50cmF2ZXJzYWwpKGZ1bmN0aW9uIChGKSB7IHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIEYubWFwKGYoc2EuZ2V0KHMpKSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHNhLnNldChhKShzKTsgfSk7IH07IH07IH0pO1xufTtcbmV4cG9ydHMubGVuc0FzVHJhdmVyc2FsID0gbGVuc0FzVHJhdmVyc2FsO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGxlbnNDb21wb3NlTGVucyA9IGZ1bmN0aW9uIChhYikgeyByZXR1cm4gZnVuY3Rpb24gKHNhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmxlbnMpKGZ1bmN0aW9uIChzKSB7IHJldHVybiBhYi5nZXQoc2EuZ2V0KHMpKTsgfSwgZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGZ1bmN0aW9uIChzKSB7IHJldHVybiBzYS5zZXQoYWIuc2V0KGIpKHNhLmdldChzKSkpKHMpOyB9OyB9KTtcbn07IH07XG5leHBvcnRzLmxlbnNDb21wb3NlTGVucyA9IGxlbnNDb21wb3NlTGVucztcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBwcmlzbUNvbXBvc2VQcmlzbSA9IGZ1bmN0aW9uIChhYikgeyByZXR1cm4gZnVuY3Rpb24gKHNhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLnByaXNtKSgoMCwgZnVuY3Rpb25fMS5mbG93KShzYS5nZXRPcHRpb24sIE8uY2hhaW4oYWIuZ2V0T3B0aW9uKSksICgwLCBmdW5jdGlvbl8xLmZsb3cpKGFiLnJldmVyc2VHZXQsIHNhLnJldmVyc2VHZXQpKTtcbn07IH07XG5leHBvcnRzLnByaXNtQ29tcG9zZVByaXNtID0gcHJpc21Db21wb3NlUHJpc207XG4vKiogQGludGVybmFsICovXG52YXIgbGVuc0NvbXBvc2VQcmlzbSA9IGZ1bmN0aW9uIChhYikgeyByZXR1cm4gZnVuY3Rpb24gKHNhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLm9wdGlvbmFsQ29tcG9zZU9wdGlvbmFsKSgoMCwgZXhwb3J0cy5wcmlzbUFzT3B0aW9uYWwpKGFiKSkoKDAsIGV4cG9ydHMubGVuc0FzT3B0aW9uYWwpKHNhKSk7XG59OyB9O1xuZXhwb3J0cy5sZW5zQ29tcG9zZVByaXNtID0gbGVuc0NvbXBvc2VQcmlzbTtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBsZW5zSWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoMCwgZXhwb3J0cy5sZW5zKShmdW5jdGlvbl8xLmlkZW50aXR5LCBmdW5jdGlvbl8xLmNvbnN0YW50KTsgfTtcbmV4cG9ydHMubGVuc0lkID0gbGVuc0lkO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGxlbnNQcm9wID0gZnVuY3Rpb24gKHByb3ApIHsgcmV0dXJuIGZ1bmN0aW9uIChzYSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5sZW5zKShmdW5jdGlvbiAocykgeyByZXR1cm4gc2EuZ2V0KHMpW3Byb3BdOyB9LCBmdW5jdGlvbiAoYXApIHsgcmV0dXJuIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIG9hID0gc2EuZ2V0KHMpO1xuICAgICAgICBpZiAoYXAgPT09IG9hW3Byb3BdKSB7XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2Euc2V0KE9iamVjdC5hc3NpZ24oe30sIG9hLCAoX2EgPSB7fSwgX2FbcHJvcF0gPSBhcCwgX2EpKSkocyk7XG4gICAgfTsgfSk7XG59OyB9O1xuZXhwb3J0cy5sZW5zUHJvcCA9IGxlbnNQcm9wO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGxlbnNQcm9wcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcHJvcHMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBwcm9wc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHNhKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5sZW5zKShmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgdmFyIGEgPSBzYS5nZXQocyk7XG4gICAgICAgICAgICB2YXIgciA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBwcm9wc18xID0gcHJvcHM7IF9pIDwgcHJvcHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgayA9IHByb3BzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHJba10gPSBhW2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgdmFyIG9hID0gc2EuZ2V0KHMpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBwcm9wc18yID0gcHJvcHM7IF9pIDwgcHJvcHNfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgayA9IHByb3BzXzJbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChhW2tdICE9PSBvYVtrXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Euc2V0KE9iamVjdC5hc3NpZ24oe30sIG9hLCBhKSkocyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH07IH0pO1xuICAgIH07XG59O1xuZXhwb3J0cy5sZW5zUHJvcHMgPSBsZW5zUHJvcHM7XG4vKiogQGludGVybmFsICovXG52YXIgbGVuc0NvbXBvbmVudCA9IGZ1bmN0aW9uIChwcm9wKSB7IHJldHVybiBmdW5jdGlvbiAoc2EpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMubGVucykoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHNhLmdldChzKVtwcm9wXTsgfSwgZnVuY3Rpb24gKGFwKSB7IHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgICB2YXIgb2EgPSBzYS5nZXQocyk7XG4gICAgICAgIGlmIChhcCA9PT0gb2FbcHJvcF0pIHtcbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb3B5ID0gb2Euc2xpY2UoKTtcbiAgICAgICAgY29weVtwcm9wXSA9IGFwO1xuICAgICAgICByZXR1cm4gc2Euc2V0KGNvcHkpKHMpO1xuICAgIH07IH0pO1xufTsgfTtcbmV4cG9ydHMubGVuc0NvbXBvbmVudCA9IGxlbnNDb21wb25lbnQ7XG4vKiogQGludGVybmFsICovXG52YXIgbGVuc0F0S2V5ID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZnVuY3Rpb24gKHNhKSB7XG4gICAgcmV0dXJuICgwLCBwaXBlYWJsZV8xLnBpcGUpKHNhLCAoMCwgZXhwb3J0cy5sZW5zQ29tcG9zZUxlbnMpKGF0UmVhZG9ubHlSZWNvcmQoKS5hdChrZXkpKSk7XG59OyB9O1xuZXhwb3J0cy5sZW5zQXRLZXkgPSBsZW5zQXRLZXk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBQcmlzbVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xudmFyIHByaXNtID0gZnVuY3Rpb24gKGdldE9wdGlvbiwgcmV2ZXJzZUdldCkgeyByZXR1cm4gKHsgZ2V0T3B0aW9uOiBnZXRPcHRpb24sIHJldmVyc2VHZXQ6IHJldmVyc2VHZXQgfSk7IH07XG5leHBvcnRzLnByaXNtID0gcHJpc207XG4vKiogQGludGVybmFsICovXG52YXIgcHJpc21Bc09wdGlvbmFsID0gZnVuY3Rpb24gKHNhKSB7IHJldHVybiAoMCwgZXhwb3J0cy5vcHRpb25hbCkoc2EuZ2V0T3B0aW9uLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKDAsIGV4cG9ydHMucHJpc21TZXQpKGEpKHNhKTsgfSk7IH07XG5leHBvcnRzLnByaXNtQXNPcHRpb25hbCA9IHByaXNtQXNPcHRpb25hbDtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBwcmlzbUFzVHJhdmVyc2FsID0gZnVuY3Rpb24gKHNhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLnRyYXZlcnNhbCkoZnVuY3Rpb24gKEYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgICByZXR1cm4gKDAsIHBpcGVhYmxlXzEucGlwZSkoc2EuZ2V0T3B0aW9uKHMpLCBPLmZvbGQoZnVuY3Rpb24gKCkgeyByZXR1cm4gRi5vZihzKTsgfSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIEYubWFwKGYoYSksIGZ1bmN0aW9uIChhKSB7IHJldHVybiAoMCwgZXhwb3J0cy5wcmlzbVNldCkoYSkoc2EpKHMpOyB9KTsgfSkpO1xuICAgIH07IH07IH0pO1xufTtcbmV4cG9ydHMucHJpc21Bc1RyYXZlcnNhbCA9IHByaXNtQXNUcmF2ZXJzYWw7XG4vKiogQGludGVybmFsICovXG52YXIgcHJpc21Nb2RpZnlPcHRpb24gPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHNhKSB7IHJldHVybiBmdW5jdGlvbiAocykge1xuICAgIHJldHVybiAoMCwgcGlwZWFibGVfMS5waXBlKShzYS5nZXRPcHRpb24ocyksIE8ubWFwKGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHZhciBuID0gZihvKTtcbiAgICAgICAgcmV0dXJuIG4gPT09IG8gPyBzIDogc2EucmV2ZXJzZUdldChuKTtcbiAgICB9KSk7XG59OyB9OyB9O1xuZXhwb3J0cy5wcmlzbU1vZGlmeU9wdGlvbiA9IHByaXNtTW9kaWZ5T3B0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIHByaXNtTW9kaWZ5ID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChzYSkge1xuICAgIHZhciBnID0gKDAsIGV4cG9ydHMucHJpc21Nb2RpZnlPcHRpb24pKGYpKHNhKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBwaXBlYWJsZV8xLnBpcGUpKGcocyksIE8uZ2V0T3JFbHNlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHM7IH0pKTtcbiAgICB9O1xufTsgfTtcbmV4cG9ydHMucHJpc21Nb2RpZnkgPSBwcmlzbU1vZGlmeTtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBwcmlzbVNldCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoMCwgZXhwb3J0cy5wcmlzbU1vZGlmeSkoZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfSk7IH07XG5leHBvcnRzLnByaXNtU2V0ID0gcHJpc21TZXQ7XG4vKiogQGludGVybmFsICovXG52YXIgcHJpc21Db21wb3NlTGVucyA9IGZ1bmN0aW9uIChhYikgeyByZXR1cm4gZnVuY3Rpb24gKHNhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLm9wdGlvbmFsQ29tcG9zZU9wdGlvbmFsKSgoMCwgZXhwb3J0cy5sZW5zQXNPcHRpb25hbCkoYWIpKSgoMCwgZXhwb3J0cy5wcmlzbUFzT3B0aW9uYWwpKHNhKSk7XG59OyB9O1xuZXhwb3J0cy5wcmlzbUNvbXBvc2VMZW5zID0gcHJpc21Db21wb3NlTGVucztcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBwcmlzbUZyb21OdWxsYWJsZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICgwLCBleHBvcnRzLnByaXNtKShPLmZyb21OdWxsYWJsZSwgZnVuY3Rpb25fMS5pZGVudGl0eSk7IH07XG5leHBvcnRzLnByaXNtRnJvbU51bGxhYmxlID0gcHJpc21Gcm9tTnVsbGFibGU7XG4vKiogQGludGVybmFsICovXG52YXIgcHJpc21Gcm9tUHJlZGljYXRlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5wcmlzbSkoTy5mcm9tUHJlZGljYXRlKHByZWRpY2F0ZSksIGZ1bmN0aW9uXzEuaWRlbnRpdHkpO1xufTtcbmV4cG9ydHMucHJpc21Gcm9tUHJlZGljYXRlID0gcHJpc21Gcm9tUHJlZGljYXRlO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIHByaXNtU29tZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICgwLCBleHBvcnRzLnByaXNtKShmdW5jdGlvbl8xLmlkZW50aXR5LCBPLnNvbWUpOyB9O1xuZXhwb3J0cy5wcmlzbVNvbWUgPSBwcmlzbVNvbWU7XG4vKiogQGludGVybmFsICovXG52YXIgcHJpc21SaWdodCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICgwLCBleHBvcnRzLnByaXNtKShPLmZyb21FaXRoZXIsIEUucmlnaHQpOyB9O1xuZXhwb3J0cy5wcmlzbVJpZ2h0ID0gcHJpc21SaWdodDtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBwcmlzbUxlZnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLnByaXNtKShmdW5jdGlvbiAocykgeyByZXR1cm4gKEUuaXNMZWZ0KHMpID8gTy5zb21lKHMubGVmdCkgOiBPLm5vbmUpOyB9LCAvLyBUT0RPOiByZXBsYWNlIHdpdGggRS5nZXRMZWZ0IGluIHYzXG4gICAgRS5sZWZ0KTtcbn07XG5leHBvcnRzLnByaXNtTGVmdCA9IHByaXNtTGVmdDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIE9wdGlvbmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiogQGludGVybmFsICovXG52YXIgb3B0aW9uYWwgPSBmdW5jdGlvbiAoZ2V0T3B0aW9uLCBzZXQpIHsgcmV0dXJuICh7XG4gICAgZ2V0T3B0aW9uOiBnZXRPcHRpb24sXG4gICAgc2V0OiBzZXRcbn0pOyB9O1xuZXhwb3J0cy5vcHRpb25hbCA9IG9wdGlvbmFsO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIG9wdGlvbmFsQXNUcmF2ZXJzYWwgPSBmdW5jdGlvbiAoc2EpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMudHJhdmVyc2FsKShmdW5jdGlvbiAoRikgeyByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHJldHVybiAoMCwgcGlwZWFibGVfMS5waXBlKShzYS5nZXRPcHRpb24ocyksIE8uZm9sZChmdW5jdGlvbiAoKSB7IHJldHVybiBGLm9mKHMpOyB9LCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gRi5tYXAoZihhKSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHNhLnNldChhKShzKTsgfSk7IH0pKTtcbiAgICB9OyB9OyB9KTtcbn07XG5leHBvcnRzLm9wdGlvbmFsQXNUcmF2ZXJzYWwgPSBvcHRpb25hbEFzVHJhdmVyc2FsO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIG9wdGlvbmFsTW9kaWZ5T3B0aW9uID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChvcHRpb25hbCkgeyByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICByZXR1cm4gKDAsIHBpcGVhYmxlXzEucGlwZSkob3B0aW9uYWwuZ2V0T3B0aW9uKHMpLCBPLm1hcChmdW5jdGlvbiAoYSkge1xuICAgICAgICB2YXIgbiA9IGYoYSk7XG4gICAgICAgIHJldHVybiBuID09PSBhID8gcyA6IG9wdGlvbmFsLnNldChuKShzKTtcbiAgICB9KSk7XG59OyB9OyB9O1xuZXhwb3J0cy5vcHRpb25hbE1vZGlmeU9wdGlvbiA9IG9wdGlvbmFsTW9kaWZ5T3B0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIG9wdGlvbmFsTW9kaWZ5ID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChvcHRpb25hbCkge1xuICAgIHZhciBnID0gKDAsIGV4cG9ydHMub3B0aW9uYWxNb2RpZnlPcHRpb24pKGYpKG9wdGlvbmFsKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBwaXBlYWJsZV8xLnBpcGUpKGcocyksIE8uZ2V0T3JFbHNlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHM7IH0pKTtcbiAgICB9O1xufTsgfTtcbmV4cG9ydHMub3B0aW9uYWxNb2RpZnkgPSBvcHRpb25hbE1vZGlmeTtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBvcHRpb25hbENvbXBvc2VPcHRpb25hbCA9IGZ1bmN0aW9uIChhYikgeyByZXR1cm4gZnVuY3Rpb24gKHNhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLm9wdGlvbmFsKSgoMCwgZnVuY3Rpb25fMS5mbG93KShzYS5nZXRPcHRpb24sIE8uY2hhaW4oYWIuZ2V0T3B0aW9uKSksIGZ1bmN0aW9uIChiKSB7IHJldHVybiAoMCwgZXhwb3J0cy5vcHRpb25hbE1vZGlmeSkoYWIuc2V0KGIpKShzYSk7IH0pO1xufTsgfTtcbmV4cG9ydHMub3B0aW9uYWxDb21wb3NlT3B0aW9uYWwgPSBvcHRpb25hbENvbXBvc2VPcHRpb25hbDtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBvcHRpb25hbEluZGV4ID0gZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGZ1bmN0aW9uIChzYSkge1xuICAgIHJldHVybiAoMCwgcGlwZWFibGVfMS5waXBlKShzYSwgKDAsIGV4cG9ydHMub3B0aW9uYWxDb21wb3NlT3B0aW9uYWwpKCgwLCBleHBvcnRzLmluZGV4UmVhZG9ubHlBcnJheSkoKS5pbmRleChpKSkpO1xufTsgfTtcbmV4cG9ydHMub3B0aW9uYWxJbmRleCA9IG9wdGlvbmFsSW5kZXg7XG4vKiogQGludGVybmFsICovXG52YXIgb3B0aW9uYWxJbmRleE5vbkVtcHR5ID0gZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGZ1bmN0aW9uIChzYSkgeyByZXR1cm4gKDAsIHBpcGVhYmxlXzEucGlwZSkoc2EsICgwLCBleHBvcnRzLm9wdGlvbmFsQ29tcG9zZU9wdGlvbmFsKSgoMCwgZXhwb3J0cy5pbmRleFJlYWRvbmx5Tm9uRW1wdHlBcnJheSkoKS5pbmRleChpKSkpOyB9OyB9O1xuZXhwb3J0cy5vcHRpb25hbEluZGV4Tm9uRW1wdHkgPSBvcHRpb25hbEluZGV4Tm9uRW1wdHk7XG4vKiogQGludGVybmFsICovXG52YXIgb3B0aW9uYWxLZXkgPSBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBmdW5jdGlvbiAoc2EpIHtcbiAgICByZXR1cm4gKDAsIHBpcGVhYmxlXzEucGlwZSkoc2EsICgwLCBleHBvcnRzLm9wdGlvbmFsQ29tcG9zZU9wdGlvbmFsKSgoMCwgZXhwb3J0cy5pbmRleFJlYWRvbmx5UmVjb3JkKSgpLmluZGV4KGtleSkpKTtcbn07IH07XG5leHBvcnRzLm9wdGlvbmFsS2V5ID0gb3B0aW9uYWxLZXk7XG4vKiogQGludGVybmFsICovXG52YXIgb3B0aW9uYWxGaW5kRmlyc3QgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLm9wdGlvbmFsKShSQS5maW5kRmlyc3QocHJlZGljYXRlKSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHJldHVybiAoMCwgcGlwZWFibGVfMS5waXBlKShSQS5maW5kSW5kZXgocHJlZGljYXRlKShzKSwgTy5mb2xkKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHM7IH0sIGZ1bmN0aW9uIChpKSB7IHJldHVybiBSQS51bnNhZmVVcGRhdGVBdChpLCBhLCBzKTsgfSkpO1xuICAgIH07IH0pO1xufTtcbmV4cG9ydHMub3B0aW9uYWxGaW5kRmlyc3QgPSBvcHRpb25hbEZpbmRGaXJzdDtcbnZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfX3NwcmVhZEFycmF5KFthc1swXV0sIGFzLnNsaWNlKDEpLCB0cnVlKTtcbiAgICAgICAgeHNbaV0gPSBhO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxufTtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBvcHRpb25hbEZpbmRGaXJzdE5vbkVtcHR5ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5vcHRpb25hbCkoUkEuZmluZEZpcnN0KHByZWRpY2F0ZSksIGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBwaXBlYWJsZV8xLnBpcGUpKFJBLmZpbmRJbmRleChwcmVkaWNhdGUpKGFzKSwgTy5mb2xkKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFzOyB9LCBmdW5jdGlvbiAoaSkgeyByZXR1cm4gdW5zYWZlVXBkYXRlQXQoaSwgYSwgYXMpOyB9KSk7XG4gICAgfTsgfSk7XG59O1xuZXhwb3J0cy5vcHRpb25hbEZpbmRGaXJzdE5vbkVtcHR5ID0gb3B0aW9uYWxGaW5kRmlyc3ROb25FbXB0eTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYXZlcnNhbFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xudmFyIHRyYXZlcnNhbCA9IGZ1bmN0aW9uIChtb2RpZnlGKSB7IHJldHVybiAoe1xuICAgIG1vZGlmeUY6IG1vZGlmeUZcbn0pOyB9O1xuZXhwb3J0cy50cmF2ZXJzYWwgPSB0cmF2ZXJzYWw7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiB0cmF2ZXJzYWxDb21wb3NlVHJhdmVyc2FsKGFiKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzYSkgeyByZXR1cm4gKDAsIGV4cG9ydHMudHJhdmVyc2FsKShmdW5jdGlvbiAoRikgeyByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHNhLm1vZGlmeUYoRikoYWIubW9kaWZ5RihGKShmKSk7IH07IH0pOyB9O1xufVxuZXhwb3J0cy50cmF2ZXJzYWxDb21wb3NlVHJhdmVyc2FsID0gdHJhdmVyc2FsQ29tcG9zZVRyYXZlcnNhbDtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQXBwbGljYXRpdmVJZGVudGl0eSA9IHtcbiAgICBVUkk6ICdJZGVudGl0eScsXG4gICAgbWFwOiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIGYoZmEpOyB9LFxuICAgIG9mOiBmdW5jdGlvbl8xLmlkZW50aXR5LFxuICAgIGFwOiBcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBmYWIoZmEpOyB9XG59O1xudmFyIGlzSWRlbnRpdHkgPSBmdW5jdGlvbiAoRikgeyByZXR1cm4gRi5VUkkgPT09ICdJZGVudGl0eSc7IH07XG5mdW5jdGlvbiBmcm9tVHJhdmVyc2FibGUoVCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy50cmF2ZXJzYWwpKGZ1bmN0aW9uIChGKSB7XG4gICAgICAgICAgICAvLyBpZiBgRmAgaXMgYElkZW50aXR5YCB0aGVuIGB0cmF2ZXJzZUYgPSBtYXBgXG4gICAgICAgICAgICB2YXIgdHJhdmVyc2VGID0gaXNJZGVudGl0eShGKVxuICAgICAgICAgICAgICAgID8gVC5tYXBcbiAgICAgICAgICAgICAgICA6IFQudHJhdmVyc2UoRik7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChzKSB7IHJldHVybiB0cmF2ZXJzZUYocywgZik7IH07IH07XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5leHBvcnRzLmZyb21UcmF2ZXJzYWJsZSA9IGZyb21UcmF2ZXJzYWJsZTtcbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIHRyYXZlcnNhbFRyYXZlcnNlKFQpIHtcbiAgICByZXR1cm4gdHJhdmVyc2FsQ29tcG9zZVRyYXZlcnNhbChmcm9tVHJhdmVyc2FibGUoVCkoKSk7XG59XG5leHBvcnRzLnRyYXZlcnNhbFRyYXZlcnNlID0gdHJhdmVyc2FsVHJhdmVyc2U7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBJeFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7IHJldHVybiAoeyBpbmRleDogaW5kZXggfSk7IH07XG5leHBvcnRzLmluZGV4ID0gaW5kZXg7XG4vKiogQGludGVybmFsICovXG52YXIgaW5kZXhSZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5pbmRleCkoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLm9wdGlvbmFsKShmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFJBLmxvb2t1cChpLCBhcyk7IH0sIGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiAoMCwgcGlwZWFibGVfMS5waXBlKShSQS5sb29rdXAoaSwgYXMpLCBPLmZvbGQoZnVuY3Rpb24gKCkgeyByZXR1cm4gYXM7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFJBLnVuc2FmZVVwZGF0ZUF0KGksIGEsIGFzKTsgfSkpO1xuICAgICAgICB9OyB9KTtcbiAgICB9KTtcbn07XG5leHBvcnRzLmluZGV4UmVhZG9ubHlBcnJheSA9IGluZGV4UmVhZG9ubHlBcnJheTtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBpbmRleFJlYWRvbmx5Tm9uRW1wdHlBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuaW5kZXgpKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5vcHRpb25hbCkoZnVuY3Rpb24gKGFzKSB7IHJldHVybiBSQS5sb29rdXAoaSwgYXMpOyB9LCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgICAgICByZXR1cm4gKDAsIHBpcGVhYmxlXzEucGlwZSkoUkEubG9va3VwKGksIGFzKSwgTy5mb2xkKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFzOyB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiB1bnNhZmVVcGRhdGVBdChpLCBhLCBhcyk7IH0pKTtcbiAgICAgICAgfTsgfSk7XG4gICAgfSk7XG59O1xuZXhwb3J0cy5pbmRleFJlYWRvbmx5Tm9uRW1wdHlBcnJheSA9IGluZGV4UmVhZG9ubHlOb25FbXB0eUFycmF5O1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIGluZGV4UmVhZG9ubHlSZWNvcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmluZGV4KShmdW5jdGlvbiAoaykge1xuICAgICAgICByZXR1cm4gKDAsIGV4cG9ydHMub3B0aW9uYWwpKGZ1bmN0aW9uIChyKSB7IHJldHVybiBSUi5sb29rdXAoaywgcik7IH0sIGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgaWYgKHJba10gPT09IGEgfHwgTy5pc05vbmUoUlIubG9va3VwKGssIHIpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFJSLmluc2VydEF0KGssIGEpKHIpO1xuICAgICAgICB9OyB9KTtcbiAgICB9KTtcbn07XG5leHBvcnRzLmluZGV4UmVhZG9ubHlSZWNvcmQgPSBpbmRleFJlYWRvbmx5UmVjb3JkO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQXRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBhdCA9IGZ1bmN0aW9uIChhdCkgeyByZXR1cm4gKHsgYXQ6IGF0IH0pOyB9O1xuZXhwb3J0cy5hdCA9IGF0O1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gYXRSZWFkb25seVJlY29yZCgpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuYXQpKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleHBvcnRzLmxlbnMpKGZ1bmN0aW9uIChyKSB7IHJldHVybiBSUi5sb29rdXAoa2V5LCByKTsgfSwgTy5mb2xkKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFJSLmRlbGV0ZUF0KGtleSk7IH0sIGZ1bmN0aW9uIChhKSB7IHJldHVybiBSUi5pbnNlcnRBdChrZXksIGEpOyB9KSk7XG4gICAgfSk7XG59XG5leHBvcnRzLmF0UmVhZG9ubHlSZWNvcmQgPSBhdFJlYWRvbmx5UmVjb3JkO1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNhdGVnb3J5ID0gZXhwb3J0cy5TZW1pZ3JvdXBvaWQgPSBleHBvcnRzLlVSSSA9IGV4cG9ydHMuZ2V0QWxsID0gZXhwb3J0cy5mb2xkID0gZXhwb3J0cy5mb2xkTWFwID0gZXhwb3J0cy5maW5kRmlyc3ROb25FbXB0eSA9IGV4cG9ydHMuZmluZEZpcnN0ID0gZXhwb3J0cy50cmF2ZXJzZSA9IGV4cG9ydHMubGVmdCA9IGV4cG9ydHMucmlnaHQgPSBleHBvcnRzLnNvbWUgPSBleHBvcnRzLmF0S2V5ID0gZXhwb3J0cy5rZXkgPSBleHBvcnRzLmluZGV4Tm9uRW1wdHkgPSBleHBvcnRzLmluZGV4ID0gZXhwb3J0cy5jb21wb25lbnQgPSBleHBvcnRzLnByb3BzID0gZXhwb3J0cy5wcm9wID0gZXhwb3J0cy5maWx0ZXIgPSBleHBvcnRzLmZyb21OdWxsYWJsZSA9IGV4cG9ydHMuc2V0ID0gZXhwb3J0cy5tb2RpZnkgPSBleHBvcnRzLmNvbXBvc2VPcHRpb25hbCA9IGV4cG9ydHMuY29tcG9zZVByaXNtID0gZXhwb3J0cy5jb21wb3NlTGVucyA9IGV4cG9ydHMuY29tcG9zZUlzbyA9IGV4cG9ydHMuY29tcG9zZVRyYXZlcnNhbCA9IGV4cG9ydHMuY29tcG9zZSA9IGV4cG9ydHMuZnJvbVRyYXZlcnNhYmxlID0gZXhwb3J0cy5pZCA9IGV4cG9ydHMudHJhdmVyc2FsID0gdm9pZCAwO1xudmFyIEMgPSByZXF1aXJlKFwiZnAtdHMvbGliL0NvbnN0XCIpO1xudmFyIGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiZnAtdHMvbGliL2Z1bmN0aW9uXCIpO1xudmFyIHBpcGVhYmxlXzEgPSByZXF1aXJlKFwiZnAtdHMvbGliL3BpcGVhYmxlXCIpO1xudmFyIFJBID0gcmVxdWlyZShcImZwLXRzL2xpYi9SZWFkb25seUFycmF5XCIpO1xudmFyIF8gPSByZXF1aXJlKFwiLi9pbnRlcm5hbFwiKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4zLjhcbiAqL1xuZXhwb3J0cy50cmF2ZXJzYWwgPSBfLnRyYXZlcnNhbDtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBpZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICgwLCBleHBvcnRzLnRyYXZlcnNhbCkoZnVuY3Rpb24gKF8pIHsgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmOyB9OyB9KTsgfTtcbmV4cG9ydHMuaWQgPSBpZDtcbi8qKlxuICogQ3JlYXRlIGEgYFRyYXZlcnNhbGAgZnJvbSBhIGBUcmF2ZXJzYWJsZWAuXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5mcm9tVHJhdmVyc2FibGUgPSBfLmZyb21UcmF2ZXJzYWJsZTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbXBvc2l0aW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBDb21wb3NlIGEgYFRyYXZlcnNhbGAgd2l0aCBhIGBUcmF2ZXJzYWxgLlxuICpcbiAqIEBjYXRlZ29yeSBjb21wb3NpdGlvbnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5leHBvcnRzLmNvbXBvc2UgPSBfLnRyYXZlcnNhbENvbXBvc2VUcmF2ZXJzYWw7XG4vKipcbiAqIEFsaWFzIG9mIGBjb21wb3NlYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tcG9zaXRpb25zXG4gKiBAc2luY2UgMi4zLjhcbiAqL1xuZXhwb3J0cy5jb21wb3NlVHJhdmVyc2FsID0gZXhwb3J0cy5jb21wb3NlO1xuLyoqXG4gKiBDb21wb3NlIGEgYFRyYXZlcnNhbGAgd2l0aCBhIGBJc29gLlxuICpcbiAqIEBjYXRlZ29yeSBjb21wb3NpdGlvbnNcbiAqIEBzaW5jZSAyLjMuOFxuICovXG5leHBvcnRzLmNvbXBvc2VJc28gPSBcbi8qI19fUFVSRV9fKi9cbigwLCBmdW5jdGlvbl8xLmZsb3cpKF8uaXNvQXNUcmF2ZXJzYWwsIGV4cG9ydHMuY29tcG9zZSk7XG4vKipcbiAqIENvbXBvc2UgYSBgVHJhdmVyc2FsYCB3aXRoIGEgYExlbnNgLlxuICpcbiAqIEBjYXRlZ29yeSBjb21wb3NpdGlvbnNcbiAqIEBzaW5jZSAyLjMuOFxuICovXG5leHBvcnRzLmNvbXBvc2VMZW5zID0gXG4vKiNfX1BVUkVfXyovXG4oMCwgZnVuY3Rpb25fMS5mbG93KShfLmxlbnNBc1RyYXZlcnNhbCwgXy50cmF2ZXJzYWxDb21wb3NlVHJhdmVyc2FsKTtcbi8qKlxuICogQ29tcG9zZSBhIGBUcmF2ZXJzYWxgIHdpdGggYSBgUHJpc21gLlxuICpcbiAqIEBjYXRlZ29yeSBjb21wb3NpdGlvbnNcbiAqIEBzaW5jZSAyLjMuOFxuICovXG5leHBvcnRzLmNvbXBvc2VQcmlzbSA9IFxuLyojX19QVVJFX18qL1xuKDAsIGZ1bmN0aW9uXzEuZmxvdykoXy5wcmlzbUFzVHJhdmVyc2FsLCBfLnRyYXZlcnNhbENvbXBvc2VUcmF2ZXJzYWwpO1xuLyoqXG4gKiBDb21wb3NlIGEgYFRyYXZlcnNhbGAgd2l0aCBhIGBPcHRpb25hbGAuXG4gKlxuICogQGNhdGVnb3J5IGNvbXBvc2l0aW9uc1xuICogQHNpbmNlIDIuMy44XG4gKi9cbmV4cG9ydHMuY29tcG9zZU9wdGlvbmFsID0gXG4vKiNfX1BVUkVfXyovXG4oMCwgZnVuY3Rpb25fMS5mbG93KShfLm9wdGlvbmFsQXNUcmF2ZXJzYWwsIF8udHJhdmVyc2FsQ29tcG9zZVRyYXZlcnNhbCk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG52YXIgbW9kaWZ5ID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChzYSkge1xuICAgIHJldHVybiBzYS5tb2RpZnlGKF8uQXBwbGljYXRpdmVJZGVudGl0eSkoZik7XG59OyB9O1xuZXhwb3J0cy5tb2RpZnkgPSBtb2RpZnk7XG4vKipcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBzZXQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKDAsIGV4cG9ydHMubW9kaWZ5KShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbmV4cG9ydHMuc2V0ID0gc2V0O1xuLyoqXG4gKiBSZXR1cm4gYSBgVHJhdmVyc2FsYCBmcm9tIGEgYFRyYXZlcnNhbGAgZm9jdXNlZCBvbiBhIG51bGxhYmxlIHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBmcm9tTnVsbGFibGUgPSBmdW5jdGlvbiAoc2EpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuY29tcG9zZVByaXNtKShfLnByaXNtRnJvbU51bGxhYmxlKCkpKHNhKTtcbn07XG5leHBvcnRzLmZyb21OdWxsYWJsZSA9IGZyb21OdWxsYWJsZTtcbmZ1bmN0aW9uIGZpbHRlcihwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuY29tcG9zZSkoXy5wcmlzbUFzVHJhdmVyc2FsKF8ucHJpc21Gcm9tUHJlZGljYXRlKHByZWRpY2F0ZSkpKTtcbn1cbmV4cG9ydHMuZmlsdGVyID0gZmlsdGVyO1xuLyoqXG4gKiBSZXR1cm4gYSBgVHJhdmVyc2FsYCBmcm9tIGEgYFRyYXZlcnNhbGAgYW5kIGEgcHJvcC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG52YXIgcHJvcCA9IGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmNvbXBvc2UpKCgwLCBwaXBlYWJsZV8xLnBpcGUpKF8ubGVuc0lkKCksIF8ubGVuc1Byb3AocHJvcCksIF8ubGVuc0FzVHJhdmVyc2FsKSk7XG59O1xuZXhwb3J0cy5wcm9wID0gcHJvcDtcbi8qKlxuICogUmV0dXJuIGEgYFRyYXZlcnNhbGAgZnJvbSBhIGBUcmF2ZXJzYWxgIGFuZCBhIGxpc3Qgb2YgcHJvcHMuXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xudmFyIHByb3BzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9wcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHByb3BzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiAoMCwgZXhwb3J0cy5jb21wb3NlKSgoMCwgcGlwZWFibGVfMS5waXBlKShfLmxlbnNJZCgpLCBfLmxlbnNQcm9wcy5hcHBseShfLCBwcm9wcyksIF8ubGVuc0FzVHJhdmVyc2FsKSk7XG59O1xuZXhwb3J0cy5wcm9wcyA9IHByb3BzO1xuLyoqXG4gKiBSZXR1cm4gYSBgVHJhdmVyc2FsYCBmcm9tIGEgYFRyYXZlcnNhbGAgZm9jdXNlZCBvbiBhIGNvbXBvbmVudCBvZiBhIHR1cGxlLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBjb21wb25lbnQgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5jb21wb3NlKSgoMCwgcGlwZWFibGVfMS5waXBlKShfLmxlbnNJZCgpLCBfLmxlbnNDb21wb25lbnQocHJvcCksIF8ubGVuc0FzVHJhdmVyc2FsKSk7XG59O1xuZXhwb3J0cy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4vKipcbiAqIFJldHVybiBhIGBUcmF2ZXJzYWxgIGZyb20gYSBgVHJhdmVyc2FsYCBmb2N1c2VkIG9uIGFuIGluZGV4IG9mIGEgYFJlYWRvbmx5QXJyYXlgLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBpbmRleCA9IGZ1bmN0aW9uIChpKSB7IHJldHVybiBmdW5jdGlvbiAoc2EpIHtcbiAgICByZXR1cm4gKDAsIHBpcGVhYmxlXzEucGlwZSkoc2EsICgwLCBleHBvcnRzLmNvbXBvc2UpKF8ub3B0aW9uYWxBc1RyYXZlcnNhbChfLmluZGV4UmVhZG9ubHlBcnJheSgpLmluZGV4KGkpKSkpO1xufTsgfTtcbmV4cG9ydHMuaW5kZXggPSBpbmRleDtcbi8qKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4zLjhcbiAqL1xudmFyIGluZGV4Tm9uRW1wdHkgPSBmdW5jdGlvbiAoaSkgeyByZXR1cm4gZnVuY3Rpb24gKHNhKSB7XG4gICAgcmV0dXJuICgwLCBwaXBlYWJsZV8xLnBpcGUpKHNhLCAoMCwgZXhwb3J0cy5jb21wb3NlKShfLm9wdGlvbmFsQXNUcmF2ZXJzYWwoXy5pbmRleFJlYWRvbmx5Tm9uRW1wdHlBcnJheSgpLmluZGV4KGkpKSkpO1xufTsgfTtcbmV4cG9ydHMuaW5kZXhOb25FbXB0eSA9IGluZGV4Tm9uRW1wdHk7XG4vKipcbiAqIFJldHVybiBhIGBUcmF2ZXJzYWxgIGZyb20gYSBgVHJhdmVyc2FsYCBmb2N1c2VkIG9uIGEga2V5IG9mIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG52YXIga2V5ID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZnVuY3Rpb24gKHNhKSB7XG4gICAgcmV0dXJuICgwLCBwaXBlYWJsZV8xLnBpcGUpKHNhLCAoMCwgZXhwb3J0cy5jb21wb3NlKShfLm9wdGlvbmFsQXNUcmF2ZXJzYWwoXy5pbmRleFJlYWRvbmx5UmVjb3JkKCkuaW5kZXgoa2V5KSkpKTtcbn07IH07XG5leHBvcnRzLmtleSA9IGtleTtcbi8qKlxuICogUmV0dXJuIGEgYFRyYXZlcnNhbGAgZnJvbSBhIGBUcmF2ZXJzYWxgIGZvY3VzZWQgb24gYSByZXF1aXJlZCBrZXkgb2YgYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBhdEtleSA9IGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGZ1bmN0aW9uIChzYSkge1xuICAgIHJldHVybiAoMCwgcGlwZWFibGVfMS5waXBlKShzYSwgKDAsIGV4cG9ydHMuY29tcG9zZSkoXy5sZW5zQXNUcmF2ZXJzYWwoXy5hdFJlYWRvbmx5UmVjb3JkKCkuYXQoa2V5KSkpKTtcbn07IH07XG5leHBvcnRzLmF0S2V5ID0gYXRLZXk7XG4vKipcbiAqIFJldHVybiBhIGBUcmF2ZXJzYWxgIGZyb20gYSBgVHJhdmVyc2FsYCBmb2N1c2VkIG9uIHRoZSBgU29tZWAgb2YgYSBgT3B0aW9uYCB0eXBlLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMuc29tZSA9IFxuLyojX19QVVJFX18qL1xuKDAsIGV4cG9ydHMuY29tcG9zZSkoLyojX19QVVJFX18qLyBfLnByaXNtQXNUcmF2ZXJzYWwoLyojX19QVVJFX18qLyBfLnByaXNtU29tZSgpKSk7XG4vKipcbiAqIFJldHVybiBhIGBUcmF2ZXJzYWxgIGZyb20gYSBgVHJhdmVyc2FsYCBmb2N1c2VkIG9uIHRoZSBgUmlnaHRgIG9mIGEgYEVpdGhlcmAgdHlwZS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5leHBvcnRzLnJpZ2h0ID0gXG4vKiNfX1BVUkVfXyovXG4oMCwgZXhwb3J0cy5jb21wb3NlKSgvKiNfX1BVUkVfXyovIF8ucHJpc21Bc1RyYXZlcnNhbCgvKiNfX1BVUkVfXyovIF8ucHJpc21SaWdodCgpKSk7XG4vKipcbiAqIFJldHVybiBhIGBUcmF2ZXJzYWxgIGZyb20gYSBgVHJhdmVyc2FsYCBmb2N1c2VkIG9uIHRoZSBgTGVmdGAgb2YgYSBgRWl0aGVyYCB0eXBlLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMubGVmdCA9IFxuLyojX19QVVJFX18qL1xuKDAsIGV4cG9ydHMuY29tcG9zZSkoLyojX19QVVJFX18qLyBfLnByaXNtQXNUcmF2ZXJzYWwoLyojX19QVVJFX18qLyBfLnByaXNtTGVmdCgpKSk7XG4vKipcbiAqIFJldHVybiBhIGBUcmF2ZXJzYWxgIGZyb20gYSBgVHJhdmVyc2FsYCBmb2N1c2VkIG9uIGEgYFRyYXZlcnNhYmxlYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5leHBvcnRzLnRyYXZlcnNlID0gXy50cmF2ZXJzYWxUcmF2ZXJzZTtcbmZ1bmN0aW9uIGZpbmRGaXJzdChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuY29tcG9zZU9wdGlvbmFsKShfLm9wdGlvbmFsRmluZEZpcnN0KHByZWRpY2F0ZSkpO1xufVxuZXhwb3J0cy5maW5kRmlyc3QgPSBmaW5kRmlyc3Q7XG5mdW5jdGlvbiBmaW5kRmlyc3ROb25FbXB0eShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuY29tcG9zZU9wdGlvbmFsKShfLm9wdGlvbmFsRmluZEZpcnN0Tm9uRW1wdHkocHJlZGljYXRlKSk7XG59XG5leHBvcnRzLmZpbmRGaXJzdE5vbkVtcHR5ID0gZmluZEZpcnN0Tm9uRW1wdHk7XG4vKipcbiAqIE1hcCBlYWNoIHRhcmdldCB0byBhIGBNb25vaWRgIGFuZCBjb21iaW5lIHRoZSByZXN1bHRzLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBmb2xkTWFwID0gZnVuY3Rpb24gKE0pIHsgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoc2EpIHtcbiAgICByZXR1cm4gc2EubW9kaWZ5RihDLmdldEFwcGxpY2F0aXZlKE0pKShmdW5jdGlvbiAoYSkgeyByZXR1cm4gQy5tYWtlKGYoYSkpOyB9KTtcbn07IH07IH07XG5leHBvcnRzLmZvbGRNYXAgPSBmb2xkTWFwO1xuLyoqXG4gKiBNYXAgZWFjaCB0YXJnZXQgdG8gYSBgTW9ub2lkYCBhbmQgY29tYmluZSB0aGUgcmVzdWx0cy5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG52YXIgZm9sZCA9IGZ1bmN0aW9uIChNKSB7IHJldHVybiAoMCwgZXhwb3J0cy5mb2xkTWFwKShNKShmdW5jdGlvbl8xLmlkZW50aXR5KTsgfTtcbmV4cG9ydHMuZm9sZCA9IGZvbGQ7XG4vKipcbiAqIEdldCBhbGwgdGhlIHRhcmdldHMgb2YgYSBgVHJhdmVyc2FsYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG52YXIgZ2V0QWxsID0gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIGZ1bmN0aW9uIChzYSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5mb2xkTWFwKShSQS5nZXRNb25vaWQoKSkoUkEub2YpKHNhKShzKTtcbn07IH07XG5leHBvcnRzLmdldEFsbCA9IGdldEFsbDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGluc3RhbmNlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5VUkkgPSAnbW9ub2NsZS10cy9UcmF2ZXJzYWwnO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4zLjhcbiAqL1xuZXhwb3J0cy5TZW1pZ3JvdXBvaWQgPSB7XG4gICAgVVJJOiBleHBvcnRzLlVSSSxcbiAgICBjb21wb3NlOiBmdW5jdGlvbiAoYWIsIGVhKSB7IHJldHVybiAoMCwgZXhwb3J0cy5jb21wb3NlKShhYikoZWEpOyB9XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5DYXRlZ29yeSA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIGNvbXBvc2U6IGV4cG9ydHMuU2VtaWdyb3Vwb2lkLmNvbXBvc2UsXG4gICAgaWQ6IGV4cG9ydHMuaWRcbn07XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ2F0ZWdvcnkgPSBleHBvcnRzLlNlbWlncm91cG9pZCA9IGV4cG9ydHMuSW52YXJpYW50ID0gZXhwb3J0cy5VUkkgPSBleHBvcnRzLmltYXAgPSBleHBvcnRzLmZpbmRGaXJzdE5vbkVtcHR5ID0gZXhwb3J0cy5maW5kRmlyc3QgPSBleHBvcnRzLnRyYXZlcnNlID0gZXhwb3J0cy5sZWZ0ID0gZXhwb3J0cy5yaWdodCA9IGV4cG9ydHMuc29tZSA9IGV4cG9ydHMuYXRLZXkgPSBleHBvcnRzLmtleSA9IGV4cG9ydHMuaW5kZXhOb25FbXB0eSA9IGV4cG9ydHMuaW5kZXggPSBleHBvcnRzLmNvbXBvbmVudCA9IGV4cG9ydHMucHJvcHMgPSBleHBvcnRzLnByb3AgPSBleHBvcnRzLmZpbHRlciA9IGV4cG9ydHMuZnJvbU51bGxhYmxlID0gZXhwb3J0cy5tb2RpZnlGID0gZXhwb3J0cy5tb2RpZnkgPSBleHBvcnRzLmNvbXBvc2VUcmF2ZXJzYWwgPSBleHBvcnRzLmNvbXBvc2VPcHRpb25hbCA9IGV4cG9ydHMuY29tcG9zZVByaXNtID0gZXhwb3J0cy5jb21wb3NlSXNvID0gZXhwb3J0cy5jb21wb3NlTGVucyA9IGV4cG9ydHMuY29tcG9zZSA9IGV4cG9ydHMuYXNUcmF2ZXJzYWwgPSBleHBvcnRzLmFzT3B0aW9uYWwgPSBleHBvcnRzLmlkID0gZXhwb3J0cy5sZW5zID0gdm9pZCAwO1xudmFyIGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiZnAtdHMvbGliL2Z1bmN0aW9uXCIpO1xudmFyIHBpcGVhYmxlXzEgPSByZXF1aXJlKFwiZnAtdHMvbGliL3BpcGVhYmxlXCIpO1xudmFyIF8gPSByZXF1aXJlKFwiLi9pbnRlcm5hbFwiKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4zLjhcbiAqL1xuZXhwb3J0cy5sZW5zID0gXy5sZW5zO1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5pZCA9IF8ubGVuc0lkO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29udmVydGVyc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBWaWV3IGEgYExlbnNgIGFzIGEgYE9wdGlvbmFsYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVydGVyc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMuYXNPcHRpb25hbCA9IF8ubGVuc0FzT3B0aW9uYWw7XG4vKipcbiAqIFZpZXcgYSBgTGVuc2AgYXMgYSBgVHJhdmVyc2FsYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVydGVyc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMuYXNUcmF2ZXJzYWwgPSBfLmxlbnNBc1RyYXZlcnNhbDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbXBvc2l0aW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBDb21wb3NlIGEgYExlbnNgIHdpdGggYSBgTGVuc2AuXG4gKlxuICogQGNhdGVnb3J5IGNvbXBvc2l0aW9uc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMuY29tcG9zZSA9IF8ubGVuc0NvbXBvc2VMZW5zO1xuLyoqXG4gKiBBbGlhcyBvZiBgY29tcG9zZWAuXG4gKlxuICogQGNhdGVnb3J5IGNvbXBvc2l0aW9uc1xuICogQHNpbmNlIDIuMy44XG4gKi9cbmV4cG9ydHMuY29tcG9zZUxlbnMgPSBleHBvcnRzLmNvbXBvc2U7XG4vKipcbiAqIENvbXBvc2UgYSBgTGVuc2Agd2l0aCBhIGBJc29gLlxuICpcbiAqIEBjYXRlZ29yeSBjb21wb3NpdGlvbnNcbiAqIEBzaW5jZSAyLjMuOFxuICovXG5leHBvcnRzLmNvbXBvc2VJc28gPSBcbi8qI19fUFVSRV9fKi9cbigwLCBmdW5jdGlvbl8xLmZsb3cpKF8uaXNvQXNMZW5zLCBleHBvcnRzLmNvbXBvc2UpO1xuLyoqXG4gKiBDb21wb3NlIGEgYExlbnNgIHdpdGggYSBgUHJpc21gLlxuICpcbiAqIEBjYXRlZ29yeSBjb21wb3NpdGlvbnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5leHBvcnRzLmNvbXBvc2VQcmlzbSA9IF8ubGVuc0NvbXBvc2VQcmlzbTtcbi8qKlxuICogQ29tcG9zZSBhIGBMZW5zYCB3aXRoIGFuIGBPcHRpb25hbGAuXG4gKlxuICogQGNhdGVnb3J5IGNvbXBvc2l0aW9uc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBjb21wb3NlT3B0aW9uYWwgPSBmdW5jdGlvbiAoYWIpIHtcbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEuZmxvdykoZXhwb3J0cy5hc09wdGlvbmFsLCBfLm9wdGlvbmFsQ29tcG9zZU9wdGlvbmFsKGFiKSk7XG59O1xuZXhwb3J0cy5jb21wb3NlT3B0aW9uYWwgPSBjb21wb3NlT3B0aW9uYWw7XG4vKipcbiAqIENvbXBvc2UgYSBgTGVuc2Agd2l0aCBhbiBgVHJhdmVyc2FsYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tcG9zaXRpb25zXG4gKiBAc2luY2UgMi4zLjhcbiAqL1xudmFyIGNvbXBvc2VUcmF2ZXJzYWwgPSBmdW5jdGlvbiAoYWIpIHtcbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEuZmxvdykoZXhwb3J0cy5hc1RyYXZlcnNhbCwgXy50cmF2ZXJzYWxDb21wb3NlVHJhdmVyc2FsKGFiKSk7XG59O1xuZXhwb3J0cy5jb21wb3NlVHJhdmVyc2FsID0gY29tcG9zZVRyYXZlcnNhbDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbWJpbmF0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBtb2RpZnkgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHNhKSB7IHJldHVybiBmdW5jdGlvbiAocykge1xuICAgIHZhciBvID0gc2EuZ2V0KHMpO1xuICAgIHZhciBuID0gZihvKTtcbiAgICByZXR1cm4gbyA9PT0gbiA/IHMgOiBzYS5zZXQobikocyk7XG59OyB9OyB9O1xuZXhwb3J0cy5tb2RpZnkgPSBtb2RpZnk7XG5mdW5jdGlvbiBtb2RpZnlGKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChzYSkgeyByZXR1cm4gZnVuY3Rpb24gKHMpIHsgcmV0dXJuICgwLCBwaXBlYWJsZV8xLnBpcGUpKHNhLmdldChzKSwgZiwgZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLm1hcChmYSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHNhLnNldChhKShzKTsgfSk7IH0pOyB9OyB9OyB9O1xufVxuZXhwb3J0cy5tb2RpZnlGID0gbW9kaWZ5Rjtcbi8qKlxuICogUmV0dXJuIGEgYE9wdGlvbmFsYCBmcm9tIGEgYExlbnNgIGZvY3VzZWQgb24gYSBudWxsYWJsZSB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG52YXIgZnJvbU51bGxhYmxlID0gZnVuY3Rpb24gKHNhKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmNvbXBvc2VQcmlzbSkoXy5wcmlzbUZyb21OdWxsYWJsZSgpKShzYSk7XG59O1xuZXhwb3J0cy5mcm9tTnVsbGFibGUgPSBmcm9tTnVsbGFibGU7XG5mdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmNvbXBvc2VQcmlzbSkoXy5wcmlzbUZyb21QcmVkaWNhdGUocHJlZGljYXRlKSk7XG59XG5leHBvcnRzLmZpbHRlciA9IGZpbHRlcjtcbi8qKlxuICogUmV0dXJuIGEgYExlbnNgIGZyb20gYSBgTGVuc2AgYW5kIGEgcHJvcC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5leHBvcnRzLnByb3AgPSBfLmxlbnNQcm9wO1xuLyoqXG4gKiBSZXR1cm4gYSBgTGVuc2AgZnJvbSBhIGBMZW5zYCBhbmQgYSBsaXN0IG9mIHByb3BzLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMucHJvcHMgPSBfLmxlbnNQcm9wcztcbi8qKlxuICogUmV0dXJuIGEgYExlbnNgIGZyb20gYSBgTGVuc2AgZm9jdXNlZCBvbiBhIGNvbXBvbmVudCBvZiBhIHR1cGxlLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMuY29tcG9uZW50ID0gXy5sZW5zQ29tcG9uZW50O1xuLyoqXG4gKiBSZXR1cm4gYSBgT3B0aW9uYWxgIGZyb20gYSBgTGVuc2AgZm9jdXNlZCBvbiBhbiBpbmRleCBvZiBhIGBSZWFkb25seUFycmF5YC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG52YXIgaW5kZXggPSBmdW5jdGlvbiAoaSkge1xuICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5mbG93KShleHBvcnRzLmFzT3B0aW9uYWwsIF8ub3B0aW9uYWxJbmRleChpKSk7XG59O1xuZXhwb3J0cy5pbmRleCA9IGluZGV4O1xuLyoqXG4gKiBSZXR1cm4gYSBgT3B0aW9uYWxgIGZyb20gYSBgTGVuc2AgZm9jdXNlZCBvbiBhbiBpbmRleCBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy44XG4gKi9cbnZhciBpbmRleE5vbkVtcHR5ID0gZnVuY3Rpb24gKGkpIHtcbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEuZmxvdykoZXhwb3J0cy5hc09wdGlvbmFsLCBfLm9wdGlvbmFsSW5kZXhOb25FbXB0eShpKSk7XG59O1xuZXhwb3J0cy5pbmRleE5vbkVtcHR5ID0gaW5kZXhOb25FbXB0eTtcbi8qKlxuICogUmV0dXJuIGEgYE9wdGlvbmFsYCBmcm9tIGEgYExlbnNgIGZvY3VzZWQgb24gYSBrZXkgb2YgYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBrZXkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLmZsb3cpKGV4cG9ydHMuYXNPcHRpb25hbCwgXy5vcHRpb25hbEtleShrZXkpKTtcbn07XG5leHBvcnRzLmtleSA9IGtleTtcbi8qKlxuICogUmV0dXJuIGEgYExlbnNgIGZyb20gYSBgTGVuc2AgZm9jdXNlZCBvbiBhIHJlcXVpcmVkIGtleSBvZiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5hdEtleSA9IF8ubGVuc0F0S2V5O1xuLyoqXG4gKiBSZXR1cm4gYSBgT3B0aW9uYWxgIGZyb20gYSBgTGVuc2AgZm9jdXNlZCBvbiB0aGUgYFNvbWVgIG9mIGEgYE9wdGlvbmAgdHlwZS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5leHBvcnRzLnNvbWUgPSBcbi8qI19fUFVSRV9fKi9cbigwLCBleHBvcnRzLmNvbXBvc2VQcmlzbSkoLyojX19QVVJFX18qLyBfLnByaXNtU29tZSgpKTtcbi8qKlxuICogUmV0dXJuIGEgYE9wdGlvbmFsYCBmcm9tIGEgYExlbnNgIGZvY3VzZWQgb24gdGhlIGBSaWdodGAgb2YgYSBgRWl0aGVyYCB0eXBlLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMucmlnaHQgPSBcbi8qI19fUFVSRV9fKi9cbigwLCBleHBvcnRzLmNvbXBvc2VQcmlzbSkoLyojX19QVVJFX18qLyBfLnByaXNtUmlnaHQoKSk7XG4vKipcbiAqIFJldHVybiBhIGBPcHRpb25hbGAgZnJvbSBhIGBMZW5zYCBmb2N1c2VkIG9uIHRoZSBgTGVmdGAgb2YgYSBgRWl0aGVyYCB0eXBlLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMubGVmdCA9IFxuLyojX19QVVJFX18qL1xuKDAsIGV4cG9ydHMuY29tcG9zZVByaXNtKSgvKiNfX1BVUkVfXyovIF8ucHJpc21MZWZ0KCkpO1xuLyoqXG4gKiBSZXR1cm4gYSBgVHJhdmVyc2FsYCBmcm9tIGEgYExlbnNgIGZvY3VzZWQgb24gYSBgVHJhdmVyc2FibGVgLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlKFQpIHtcbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEuZmxvdykoZXhwb3J0cy5hc1RyYXZlcnNhbCwgXy50cmF2ZXJzYWxUcmF2ZXJzZShUKSk7XG59XG5leHBvcnRzLnRyYXZlcnNlID0gdHJhdmVyc2U7XG5mdW5jdGlvbiBmaW5kRmlyc3QocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmNvbXBvc2VPcHRpb25hbCkoXy5vcHRpb25hbEZpbmRGaXJzdChwcmVkaWNhdGUpKTtcbn1cbmV4cG9ydHMuZmluZEZpcnN0ID0gZmluZEZpcnN0O1xuZnVuY3Rpb24gZmluZEZpcnN0Tm9uRW1wdHkocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmNvbXBvc2VPcHRpb25hbCkoXy5vcHRpb25hbEZpbmRGaXJzdE5vbkVtcHR5KHByZWRpY2F0ZSkpO1xufVxuZXhwb3J0cy5maW5kRmlyc3ROb25FbXB0eSA9IGZpbmRGaXJzdE5vbkVtcHR5O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gcGlwZWFibGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBJbnZhcmlhbnRcbiAqIEBzaW5jZSAyLjMuMFxuICovXG52YXIgaW1hcCA9IGZ1bmN0aW9uIChmLCBnKSB7IHJldHVybiBmdW5jdGlvbiAoZWEpIHtcbiAgICByZXR1cm4gaW1hcF8oZWEsIGYsIGcpO1xufTsgfTtcbmV4cG9ydHMuaW1hcCA9IGltYXA7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnZhciBpbWFwXyA9IGZ1bmN0aW9uIChlYSwgYWIsIGJhKSB7IHJldHVybiAoMCwgZXhwb3J0cy5sZW5zKSgoMCwgZnVuY3Rpb25fMS5mbG93KShlYS5nZXQsIGFiKSwgKDAsIGZ1bmN0aW9uXzEuZmxvdykoYmEsIGVhLnNldCkpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5VUkkgPSAnbW9ub2NsZS10cy9MZW5zJztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMuSW52YXJpYW50ID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgaW1hcDogaW1hcF9cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjMuOFxuICovXG5leHBvcnRzLlNlbWlncm91cG9pZCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIGNvbXBvc2U6IGZ1bmN0aW9uIChhYiwgZWEpIHsgcmV0dXJuICgwLCBleHBvcnRzLmNvbXBvc2UpKGFiKShlYSk7IH1cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5leHBvcnRzLkNhdGVnb3J5ID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgY29tcG9zZTogZXhwb3J0cy5TZW1pZ3JvdXBvaWQuY29tcG9zZSxcbiAgICBpZDogZXhwb3J0cy5pZFxufTtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DYXRlZ29yeSA9IGV4cG9ydHMuU2VtaWdyb3Vwb2lkID0gZXhwb3J0cy5JbnZhcmlhbnQgPSBleHBvcnRzLlVSSSA9IGV4cG9ydHMuaW1hcCA9IGV4cG9ydHMuZmluZEZpcnN0Tm9uRW1wdHkgPSBleHBvcnRzLmZpbmRGaXJzdCA9IGV4cG9ydHMudHJhdmVyc2UgPSBleHBvcnRzLmxlZnQgPSBleHBvcnRzLnJpZ2h0ID0gZXhwb3J0cy5zb21lID0gZXhwb3J0cy5hdEtleSA9IGV4cG9ydHMua2V5ID0gZXhwb3J0cy5pbmRleE5vbkVtcHR5ID0gZXhwb3J0cy5pbmRleCA9IGV4cG9ydHMuY29tcG9uZW50ID0gZXhwb3J0cy5wcm9wcyA9IGV4cG9ydHMucHJvcCA9IGV4cG9ydHMuZmlsdGVyID0gZXhwb3J0cy5mcm9tTnVsbGFibGUgPSBleHBvcnRzLm1vZGlmeUYgPSBleHBvcnRzLm1vZGlmeSA9IGV4cG9ydHMuc2V0T3B0aW9uID0gZXhwb3J0cy5tb2RpZnlPcHRpb24gPSBleHBvcnRzLmNvbXBvc2VUcmF2ZXJzYWwgPSBleHBvcnRzLmNvbXBvc2VQcmlzbSA9IGV4cG9ydHMuY29tcG9zZUxlbnMgPSBleHBvcnRzLmNvbXBvc2VJc28gPSBleHBvcnRzLmNvbXBvc2VPcHRpb25hbCA9IGV4cG9ydHMuY29tcG9zZSA9IGV4cG9ydHMuYXNUcmF2ZXJzYWwgPSBleHBvcnRzLmlkID0gZXhwb3J0cy5vcHRpb25hbCA9IHZvaWQgMDtcbnZhciBmdW5jdGlvbl8xID0gcmVxdWlyZShcImZwLXRzL2xpYi9mdW5jdGlvblwiKTtcbnZhciBPID0gcmVxdWlyZShcImZwLXRzL2xpYi9PcHRpb25cIik7XG52YXIgcGlwZWFibGVfMSA9IHJlcXVpcmUoXCJmcC10cy9saWIvcGlwZWFibGVcIik7XG52YXIgXyA9IHJlcXVpcmUoXCIuL2ludGVybmFsXCIpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29uc3RydWN0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjMuOFxuICovXG5leHBvcnRzLm9wdGlvbmFsID0gXy5vcHRpb25hbDtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBpZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICgwLCBleHBvcnRzLm9wdGlvbmFsKShPLnNvbWUsIGZ1bmN0aW9uXzEuY29uc3RhbnQpOyB9O1xuZXhwb3J0cy5pZCA9IGlkO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29udmVydGVyc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBWaWV3IGEgYE9wdGlvbmFsYCBhcyBhIGBUcmF2ZXJzYWxgLlxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJ0ZXJzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5hc1RyYXZlcnNhbCA9IF8ub3B0aW9uYWxBc1RyYXZlcnNhbDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbXBvc2l0aW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBDb21wb3NlIGEgYE9wdGlvbmFsYCB3aXRoIGEgYE9wdGlvbmFsYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tcG9zaXRpb25zXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5jb21wb3NlID0gXy5vcHRpb25hbENvbXBvc2VPcHRpb25hbDtcbi8qKlxuICogQWxpYXMgb2YgYGNvbXBvc2VgLlxuICpcbiAqIEBjYXRlZ29yeSBjb21wb3NpdGlvbnNcbiAqIEBzaW5jZSAyLjMuOFxuICovXG5leHBvcnRzLmNvbXBvc2VPcHRpb25hbCA9IGV4cG9ydHMuY29tcG9zZTtcbi8qKlxuICogQ29tcG9zZSBhIGBPcHRpb25hbGAgd2l0aCBhIGBJc29gLlxuICpcbiAqIEBjYXRlZ29yeSBjb21wb3NpdGlvbnNcbiAqIEBzaW5jZSAyLjMuOFxuICovXG5leHBvcnRzLmNvbXBvc2VJc28gPSBcbi8qI19fUFVSRV9fKi9cbigwLCBmdW5jdGlvbl8xLmZsb3cpKF8uaXNvQXNPcHRpb25hbCwgZXhwb3J0cy5jb21wb3NlKTtcbi8qKlxuICogQ29tcG9zZSBhIGBPcHRpb25hbGAgd2l0aCBhIGBMZW5zYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tcG9zaXRpb25zXG4gKiBAc2luY2UgMi4zLjdcbiAqL1xuZXhwb3J0cy5jb21wb3NlTGVucyA9IFxuLyojX19QVVJFX18qL1xuKDAsIGZ1bmN0aW9uXzEuZmxvdykoXy5sZW5zQXNPcHRpb25hbCwgXy5vcHRpb25hbENvbXBvc2VPcHRpb25hbCk7XG4vKipcbiAqIENvbXBvc2UgYSBgT3B0aW9uYWxgIHdpdGggYSBgUHJpc21gLlxuICpcbiAqIEBjYXRlZ29yeSBjb21wb3NpdGlvbnNcbiAqIEBzaW5jZSAyLjMuN1xuICovXG5leHBvcnRzLmNvbXBvc2VQcmlzbSA9IFxuLyojX19QVVJFX18qL1xuKDAsIGZ1bmN0aW9uXzEuZmxvdykoXy5wcmlzbUFzT3B0aW9uYWwsIF8ub3B0aW9uYWxDb21wb3NlT3B0aW9uYWwpO1xuLyoqXG4gKiBDb21wb3NlIGEgYE9wdGlvbmFsYCB3aXRoIGFuIGBUcmF2ZXJzYWxgLlxuICpcbiAqIEBjYXRlZ29yeSBjb21wb3NpdGlvbnNcbiAqIEBzaW5jZSAyLjMuOFxuICovXG52YXIgY29tcG9zZVRyYXZlcnNhbCA9IGZ1bmN0aW9uIChhYikge1xuICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5mbG93KShleHBvcnRzLmFzVHJhdmVyc2FsLCBfLnRyYXZlcnNhbENvbXBvc2VUcmF2ZXJzYWwoYWIpKTtcbn07XG5leHBvcnRzLmNvbXBvc2VUcmF2ZXJzYWwgPSBjb21wb3NlVHJhdmVyc2FsO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29tYmluYXRvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5tb2RpZnlPcHRpb24gPSBfLm9wdGlvbmFsTW9kaWZ5T3B0aW9uO1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuN1xuICovXG52YXIgc2V0T3B0aW9uID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuICgwLCBleHBvcnRzLm1vZGlmeU9wdGlvbikoZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfSk7IH07XG5leHBvcnRzLnNldE9wdGlvbiA9IHNldE9wdGlvbjtcbi8qKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5tb2RpZnkgPSBfLm9wdGlvbmFsTW9kaWZ5O1xuZnVuY3Rpb24gbW9kaWZ5RihGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoc2EpIHsgcmV0dXJuIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHJldHVybiAoMCwgcGlwZWFibGVfMS5waXBlKShzYS5nZXRPcHRpb24ocyksIE8uZm9sZChmdW5jdGlvbiAoKSB7IHJldHVybiBGLm9mKHMpOyB9LCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gRi5tYXAoZihhKSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHNhLnNldChhKShzKTsgfSk7IH0pKTtcbiAgICB9OyB9OyB9O1xufVxuZXhwb3J0cy5tb2RpZnlGID0gbW9kaWZ5Rjtcbi8qKlxuICogUmV0dXJuIGFuIGBPcHRpb25hbGAgZnJvbSBhIGBPcHRpb25hbGAgZm9jdXNlZCBvbiBhIG51bGxhYmxlIHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4zXG4gKi9cbmV4cG9ydHMuZnJvbU51bGxhYmxlID0gXG4vKiNfX1BVUkVfXyovXG4oMCwgZXhwb3J0cy5jb21wb3NlKSgvKiNfX1BVUkVfXyovIF8ucHJpc21Bc09wdGlvbmFsKC8qI19fUFVSRV9fKi8gXy5wcmlzbUZyb21OdWxsYWJsZSgpKSk7XG5mdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLmNvbXBvc2UpKF8ucHJpc21Bc09wdGlvbmFsKF8ucHJpc21Gcm9tUHJlZGljYXRlKHByZWRpY2F0ZSkpKTtcbn1cbmV4cG9ydHMuZmlsdGVyID0gZmlsdGVyO1xuLyoqXG4gKiBSZXR1cm4gYSBgT3B0aW9uYWxgIGZyb20gYSBgT3B0aW9uYWxgIGFuZCBhIHByb3AuXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xudmFyIHByb3AgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5jb21wb3NlKSgoMCwgcGlwZWFibGVfMS5waXBlKShfLmxlbnNJZCgpLCBfLmxlbnNQcm9wKHByb3ApLCBfLmxlbnNBc09wdGlvbmFsKSk7XG59O1xuZXhwb3J0cy5wcm9wID0gcHJvcDtcbi8qKlxuICogUmV0dXJuIGEgYE9wdGlvbmFsYCBmcm9tIGEgYE9wdGlvbmFsYCBhbmQgYSBsaXN0IG9mIHByb3BzLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbnZhciBwcm9wcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcHJvcHMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBwcm9wc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuY29tcG9zZSkoKDAsIHBpcGVhYmxlXzEucGlwZSkoXy5sZW5zSWQoKSwgXy5sZW5zUHJvcHMuYXBwbHkoXywgcHJvcHMpLCBfLmxlbnNBc09wdGlvbmFsKSk7XG59O1xuZXhwb3J0cy5wcm9wcyA9IHByb3BzO1xuLyoqXG4gKiBSZXR1cm4gYSBgT3B0aW9uYWxgIGZyb20gYSBgT3B0aW9uYWxgIGZvY3VzZWQgb24gYSBjb21wb25lbnQgb2YgYSB0dXBsZS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG52YXIgY29tcG9uZW50ID0gZnVuY3Rpb24gKHByb3ApIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuY29tcG9zZSkoKDAsIHBpcGVhYmxlXzEucGlwZSkoXy5sZW5zSWQoKSwgXy5sZW5zQ29tcG9uZW50KHByb3ApLCBfLmxlbnNBc09wdGlvbmFsKSk7XG59O1xuZXhwb3J0cy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4vKipcbiAqIFJldHVybiBhIGBPcHRpb25hbGAgZnJvbSBhIGBPcHRpb25hbGAgZm9jdXNlZCBvbiBhbiBpbmRleCBvZiBhIGBSZWFkb25seUFycmF5YC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5leHBvcnRzLmluZGV4ID0gXy5vcHRpb25hbEluZGV4O1xuLyoqXG4gKiBSZXR1cm4gYSBgT3B0aW9uYWxgIGZyb20gYSBgT3B0aW9uYWxgIGZvY3VzZWQgb24gYW4gaW5kZXggb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuOFxuICovXG5leHBvcnRzLmluZGV4Tm9uRW1wdHkgPSBfLm9wdGlvbmFsSW5kZXhOb25FbXB0eTtcbi8qKlxuICogUmV0dXJuIGEgYE9wdGlvbmFsYCBmcm9tIGEgYE9wdGlvbmFsYCBmb2N1c2VkIG9uIGEga2V5IG9mIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5leHBvcnRzLmtleSA9IF8ub3B0aW9uYWxLZXk7XG4vKipcbiAqIFJldHVybiBhIGBPcHRpb25hbGAgZnJvbSBhIGBPcHRpb25hbGAgZm9jdXNlZCBvbiBhIHJlcXVpcmVkIGtleSBvZiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xudmFyIGF0S2V5ID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZnVuY3Rpb24gKHNhKSB7XG4gICAgcmV0dXJuICgwLCBwaXBlYWJsZV8xLnBpcGUpKHNhLCAoMCwgZXhwb3J0cy5jb21wb3NlKShfLmxlbnNBc09wdGlvbmFsKF8uYXRSZWFkb25seVJlY29yZCgpLmF0KGtleSkpKSk7XG59OyB9O1xuZXhwb3J0cy5hdEtleSA9IGF0S2V5O1xuLyoqXG4gKiBSZXR1cm4gYSBgT3B0aW9uYWxgIGZyb20gYSBgT3B0aW9uYWxgIGZvY3VzZWQgb24gdGhlIGBTb21lYCBvZiBhIGBPcHRpb25gIHR5cGUuXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5zb21lID0gXG4vKiNfX1BVUkVfXyovXG4oMCwgZXhwb3J0cy5jb21wb3NlKSgvKiNfX1BVUkVfXyovIF8ucHJpc21Bc09wdGlvbmFsKC8qI19fUFVSRV9fKi8gXy5wcmlzbVNvbWUoKSkpO1xuLyoqXG4gKiBSZXR1cm4gYSBgT3B0aW9uYWxgIGZyb20gYSBgT3B0aW9uYWxgIGZvY3VzZWQgb24gdGhlIGBSaWdodGAgb2YgYSBgRWl0aGVyYCB0eXBlLlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMucmlnaHQgPSBcbi8qI19fUFVSRV9fKi9cbigwLCBleHBvcnRzLmNvbXBvc2UpKC8qI19fUFVSRV9fKi8gXy5wcmlzbUFzT3B0aW9uYWwoLyojX19QVVJFX18qLyBfLnByaXNtUmlnaHQoKSkpO1xuLyoqXG4gKiBSZXR1cm4gYSBgT3B0aW9uYWxgIGZyb20gYSBgT3B0aW9uYWxgIGZvY3VzZWQgb24gdGhlIGBMZWZ0YCBvZiBhIGBFaXRoZXJgIHR5cGUuXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4zLjBcbiAqL1xuZXhwb3J0cy5sZWZ0ID0gXG4vKiNfX1BVUkVfXyovXG4oMCwgZXhwb3J0cy5jb21wb3NlKSgvKiNfX1BVUkVfXyovIF8ucHJpc21Bc09wdGlvbmFsKC8qI19fUFVSRV9fKi8gXy5wcmlzbUxlZnQoKSkpO1xuLyoqXG4gKiBSZXR1cm4gYSBgVHJhdmVyc2FsYCBmcm9tIGEgYE9wdGlvbmFsYCBmb2N1c2VkIG9uIGEgYFRyYXZlcnNhYmxlYC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZShUKSB7XG4gICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLmZsb3cpKGV4cG9ydHMuYXNUcmF2ZXJzYWwsIF8udHJhdmVyc2FsVHJhdmVyc2UoVCkpO1xufVxuZXhwb3J0cy50cmF2ZXJzZSA9IHRyYXZlcnNlO1xuZnVuY3Rpb24gZmluZEZpcnN0KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiAoMCwgZXhwb3J0cy5jb21wb3NlKShfLm9wdGlvbmFsRmluZEZpcnN0KHByZWRpY2F0ZSkpO1xufVxuZXhwb3J0cy5maW5kRmlyc3QgPSBmaW5kRmlyc3Q7XG5mdW5jdGlvbiBmaW5kRmlyc3ROb25FbXB0eShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuY29tcG9zZSkoXy5vcHRpb25hbEZpbmRGaXJzdE5vbkVtcHR5KHByZWRpY2F0ZSkpO1xufVxuZXhwb3J0cy5maW5kRmlyc3ROb25FbXB0eSA9IGZpbmRGaXJzdE5vbkVtcHR5O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gcGlwZWFibGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBJbnZhcmlhbnRcbiAqIEBzaW5jZSAyLjMuMFxuICovXG52YXIgaW1hcCA9IGZ1bmN0aW9uIChmLCBnKSB7IHJldHVybiBmdW5jdGlvbiAoZWEpIHsgcmV0dXJuIGltYXBfKGVhLCBmLCBnKTsgfTsgfTtcbmV4cG9ydHMuaW1hcCA9IGltYXA7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnZhciBpbWFwXyA9IGZ1bmN0aW9uIChlYSwgYWIsIGJhKSB7IHJldHVybiAoMCwgZXhwb3J0cy5vcHRpb25hbCkoKDAsIGZ1bmN0aW9uXzEuZmxvdykoZWEuZ2V0T3B0aW9uLCBPLm1hcChhYikpLCAoMCwgZnVuY3Rpb25fMS5mbG93KShiYSwgZWEuc2V0KSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5leHBvcnRzLlVSSSA9ICdtb25vY2xlLXRzL09wdGlvbmFsJztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMy4wXG4gKi9cbmV4cG9ydHMuSW52YXJpYW50ID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgaW1hcDogaW1hcF9cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjMuOFxuICovXG5leHBvcnRzLlNlbWlncm91cG9pZCA9IHtcbiAgICBVUkk6IGV4cG9ydHMuVVJJLFxuICAgIGNvbXBvc2U6IGZ1bmN0aW9uIChhYiwgZWEpIHsgcmV0dXJuICgwLCBleHBvcnRzLmNvbXBvc2UpKGFiKShlYSk7IH1cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjMuMFxuICovXG5leHBvcnRzLkNhdGVnb3J5ID0ge1xuICAgIFVSSTogZXhwb3J0cy5VUkksXG4gICAgY29tcG9zZTogZXhwb3J0cy5TZW1pZ3JvdXBvaWQuY29tcG9zZSxcbiAgICBpZDogZXhwb3J0cy5pZFxufTtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmxlbnNGcm9tUGF0aCA9IGV4cG9ydHMudHJhdmVyc2FsRnJvbVBhdGggPSBleHBvcnRzLm9wdGlvbmFsRnJvbVBhdGggPSBleHBvcnRzLmlzUGF0aFRyYXZlcnNhbCA9IGV4cG9ydHMuaXNQYXRoTGVucyA9IHZvaWQgMDtcbmNvbnN0IGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiZnAtdHMvZnVuY3Rpb25cIik7XG5jb25zdCBBID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJmcC10cy9SZWFkb25seUFycmF5XCIpKTtcbmNvbnN0IFIgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCIpKTtcbmNvbnN0IHN0cmluZ18xID0gcmVxdWlyZShcImZwLXRzL3N0cmluZ1wiKTtcbmNvbnN0IEwgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIm1vbm9jbGUtdHMvbGliL0xlbnNcIikpO1xuY29uc3QgT3AgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIm1vbm9jbGUtdHMvbGliL09wdGlvbmFsXCIpKTtcbmNvbnN0IFRyID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJtb25vY2xlLXRzL2xpYi9UcmF2ZXJzYWxcIikpO1xuY29uc3QgaXNQYXRoTGVucyA9IChwYXRoKSA9PiAhc3BsaXQocGF0aCkuc29tZSgocykgPT4gW1wiP1wiLCBcIj9zb21lXCIsIFwiP2xlZnRcIiwgXCJyaWdodFwiLCBcIltdPlwiLCBcInt9PlwiLCBcIltudW1iZXJdXCIsIFwiW3N0cmluZ11cIl0uaW5jbHVkZXMocykgfHxcbiAgICAoIXMuc3RhcnRzV2l0aChcIihcIikgJiYgcy5pbmNsdWRlcyhcIjpcIikpKTtcbmV4cG9ydHMuaXNQYXRoTGVucyA9IGlzUGF0aExlbnM7XG5jb25zdCBpc1BhdGhUcmF2ZXJzYWwgPSAocGF0aCkgPT4gc3BsaXQocGF0aCkuc29tZSgocykgPT4gW1wiW10+XCIsIFwie30+XCJdLmluY2x1ZGVzKHMpKTtcbmV4cG9ydHMuaXNQYXRoVHJhdmVyc2FsID0gaXNQYXRoVHJhdmVyc2FsO1xuY29uc3QgbGFzdFNlZ21lbnQgPSAocGF0aCkgPT4ge1xuICAgIGlmIChwYXRoID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cbiAgICBjb25zdCBlc2NhcGVhYmxlID0gcGF0aC5tYXRjaCgvXFwoKC4qKVxcKiguKilcXCkkLyk7XG4gICAgaWYgKGVzY2FwZWFibGUpIHtcbiAgICAgICAgcmV0dXJuIGVzY2FwZWFibGVbMl07XG4gICAgfVxuICAgIGNvbnN0IGVzY2FwZWFibGUyID0gcGF0aC5tYXRjaCgvXFwoKC4qKVxcKSQvKTtcbiAgICBpZiAoZXNjYXBlYWJsZTIpIHtcbiAgICAgICAgcmV0dXJuIGVzY2FwZWFibGUyWzBdO1xuICAgIH1cbiAgICBjb25zdCBmaW5hbFNlZ21lbnQgPSBwYXRoLm1hdGNoKC8oLiopXFwuKC4qKS8pO1xuICAgIGlmIChmaW5hbFNlZ21lbnQpIHtcbiAgICAgICAgcmV0dXJuIGZpbmFsU2VnbWVudFsyXTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG59O1xuY29uc3QgaW5pdFNlZ21lbnQgPSAocGF0aCkgPT4ge1xuICAgIGlmIChwYXRoID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cbiAgICBjb25zdCBlc2NhcGVhYmxlID0gcGF0aC5tYXRjaCgvKC4qKVxcLlxcKCguKilcXCooLiopXFwpJC8pO1xuICAgIGlmIChlc2NhcGVhYmxlKSB7XG4gICAgICAgIHJldHVybiBlc2NhcGVhYmxlWzFdO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sYXN0SW5kZXhPZihsYXN0U2VnbWVudChwYXRoKSkgLSAxKTtcbn07XG5jb25zdCBzcGxpdEludG9TZWdtZW50cyA9IChwYXRoLCBhY2MgPSBbXSkgPT4ge1xuICAgIGNvbnN0IGluaXQgPSBpbml0U2VnbWVudChwYXRoKTtcbiAgICBjb25zdCBsYXN0ID0gbGFzdFNlZ21lbnQocGF0aCk7XG4gICAgaWYgKGluaXQgPT09IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIFtsYXN0LCAuLi5hY2NdO1xuICAgIH1cbiAgICByZXR1cm4gc3BsaXRJbnRvU2VnbWVudHMoaW5pdCwgW2xhc3QsIC4uLmFjY10pO1xufTtcbmNvbnN0IHNwbGl0ID0gKHBhdGgpID0+IHtcbiAgICBjb25zdCBzZWdtZW50cyA9IHNwbGl0SW50b1NlZ21lbnRzKHBhdGgsIFtdKTtcbiAgICByZXR1cm4gc2VnbWVudHMuZmxhdE1hcCgoc2VnbWVudCkgPT4ge1xuICAgICAgICBpZiAoc2VnbWVudC5pbmNsdWRlcyhcIj9zb21lXCIpIHx8XG4gICAgICAgICAgICBzZWdtZW50LmluY2x1ZGVzKFwiP2xlZnRcIikgfHxcbiAgICAgICAgICAgIHNlZ21lbnQuaW5jbHVkZXMoXCI/cmlnaHRcIikgfHxcbiAgICAgICAgICAgICFzZWdtZW50LmluY2x1ZGVzKFwiP1wiKSkge1xuICAgICAgICAgICAgcmV0dXJuIFtzZWdtZW50XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZSA9IHNlZ21lbnQuc3Vic3RyaW5nKDAsIHNlZ21lbnQubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBpZiAoYmVmb3JlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2JlZm9yZSwgXCI/XCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtcIj9cIl07XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5jb25zdCBvcHRpb25hbEZyb21QYXRoID0gKHBhdGgsIF9pbmRpY2llcykgPT4ge1xuICAgIGNvbnN0IGluZGljaWVzID0gWy4uLl9pbmRpY2llc107XG4gICAgY29uc3Qgb3B0ID0gc3BsaXQocGF0aCkucmVkdWNlKChhY2MsIGN1cikgPT4ge1xuICAgICAgICBpZiAoY3VyID09PSBcIj9cIikge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFjYywgT3AuZnJvbU51bGxhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIgPT09IFwiP3NvbWVcIikge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFjYywgT3Auc29tZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VyID09PSBcIj9sZWZ0XCIpIHtcbiAgICAgICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShhY2MsIE9wLmxlZnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGN1ciA9PT0gXCI/cmlnaHRcIikge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFjYywgT3AubGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VyID09PSBcIltudW1iZXJdXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShhY2MsIE9wLmluZGV4KGluZGljaWVzLnNoaWZ0KCkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIgPT09IFwiW3N0cmluZ11cIikge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFjYywgT3Aua2V5KGluZGljaWVzLnNoaWZ0KCkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIuaW5jbHVkZXMoXCJbXCIpICYmIGN1ci5pbmNsdWRlcyhcIl1cIikgJiYgY3VyLmluZGV4T2YoXCJbXCIpIDwgY3VyLmluZGV4T2YoXCJdXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBOdW1iZXIucGFyc2VJbnQoY3VyLnN1YnN0cmluZyhjdXIuaW5kZXhPZihcIltcIikgKyAxLCBjdXIuaW5kZXhPZihcIl1cIikpLCAxMCk7XG4gICAgICAgICAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoYWNjLCBPcC5jb21wb25lbnQoY29tcG9uZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VyLmluY2x1ZGVzKFwiOlwiKSkge1xuICAgICAgICAgICAgY29uc3QgaSA9IGN1ci5pbmRleE9mKFwiOlwiKTtcbiAgICAgICAgICAgIGNvbnN0IGRpc2NyaW1pbmFudCA9IGN1ci5zdWJzdHJpbmcoMCwgaSk7XG4gICAgICAgICAgICBjb25zdCBtZW1iZXIgPSBjdXIuc3Vic3RyaW5nKGkgKyAxLCBjdXIubGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShhY2MsIE9wLmZpbHRlcigoYSkgPT4gYVtkaXNjcmltaW5hbnRdID09PSBtZW1iZXIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoYWNjLCBPcC5wcm9wKGN1cikpO1xuICAgIH0sIE9wLmlkKCkpO1xuICAgIHJldHVybiBvcHQ7XG59O1xuZXhwb3J0cy5vcHRpb25hbEZyb21QYXRoID0gb3B0aW9uYWxGcm9tUGF0aDtcbmNvbnN0IHRyYXZlcnNhbEZyb21QYXRoID0gKHBhdGgsIF9pbmRpY2llcykgPT4ge1xuICAgIGNvbnN0IGluZGljaWVzID0gWy4uLl9pbmRpY2llc107XG4gICAgY29uc3Qgb3B0ID0gc3BsaXQocGF0aCkucmVkdWNlKChhY2MsIGN1cikgPT4ge1xuICAgICAgICBpZiAoY3VyID09PSBcIj9cIikge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFjYywgVHIuZnJvbU51bGxhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIgPT09IFwiP3NvbWVcIikge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFjYywgVHIuc29tZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VyID09PSBcIj9sZWZ0XCIpIHtcbiAgICAgICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShhY2MsIFRyLmxlZnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGN1ciA9PT0gXCI/cmlnaHRcIikge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFjYywgVHIubGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VyID09PSBcIltudW1iZXJdXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShhY2MsIFRyLmluZGV4KGluZGljaWVzLnNoaWZ0KCkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIgPT09IFwiW3N0cmluZ11cIikge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFjYywgVHIua2V5KGluZGljaWVzLnNoaWZ0KCkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIgPT09IFwiW10+XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSAoMCwgZnVuY3Rpb25fMS5waXBlKShhY2MsIFRyLnRyYXZlcnNlKEEuVHJhdmVyc2FibGUpKTtcbiAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGN1ciA9PT0gXCJ7fT5cIikge1xuICAgICAgICAgICAgY29uc3QgYSA9ICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFjYywgVHIudHJhdmVyc2UoUi5nZXRUcmF2ZXJzYWJsZShzdHJpbmdfMS5PcmQpKSk7XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIuaW5jbHVkZXMoXCJbXCIpICYmIGN1ci5pbmNsdWRlcyhcIl1cIikgJiYgY3VyLmluZGV4T2YoXCJbXCIpIDwgY3VyLmluZGV4T2YoXCJdXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBOdW1iZXIucGFyc2VJbnQoY3VyLnN1YnN0cmluZyhjdXIuaW5kZXhPZihcIltcIikgKyAxLCBjdXIuaW5kZXhPZihcIl1cIikpLCAxMCk7XG4gICAgICAgICAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoYWNjLCBUci5jb21wb25lbnQoY29tcG9uZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VyLmluY2x1ZGVzKFwiOlwiKSkge1xuICAgICAgICAgICAgY29uc3QgaSA9IGN1ci5pbmRleE9mKFwiOlwiKTtcbiAgICAgICAgICAgIGNvbnN0IGRpc2NyaW1pbmFudCA9IGN1ci5zdWJzdHJpbmcoMCwgaSk7XG4gICAgICAgICAgICBjb25zdCBtZW1iZXIgPSBjdXIuc3Vic3RyaW5nKGkgKyAxLCBjdXIubGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKShhY2MsIFRyLmZpbHRlcigoYSkgPT4gYVtkaXNjcmltaW5hbnRdID09PSBtZW1iZXIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoYWNjLCBUci5wcm9wKGN1cikpO1xuICAgIH0sIFRyLmlkKCkpO1xuICAgIHJldHVybiBvcHQ7XG59O1xuZXhwb3J0cy50cmF2ZXJzYWxGcm9tUGF0aCA9IHRyYXZlcnNhbEZyb21QYXRoO1xuY29uc3QgbGVuc0Zyb21QYXRoID0gKHBhdGgpID0+IHtcbiAgICBjb25zdCBsZW5zID0gc3BsaXQocGF0aCkucmVkdWNlKChhY2MsIGN1cikgPT4ge1xuICAgICAgICBpZiAoY3VyLmluY2x1ZGVzKFwiW1wiKSAmJiBjdXIuaW5jbHVkZXMoXCJdXCIpICYmIGN1ci5pbmRleE9mKFwiW1wiKSA8IGN1ci5pbmRleE9mKFwiXVwiKSkge1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gY3VyLnN1YnN0cmluZyhjdXIuaW5kZXhPZihcIltcIikgKyAxLCBjdXIuaW5kZXhPZihcIl1cIikpO1xuICAgICAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFjYywgTC5jb21wb25lbnQoTnVtYmVyLnBhcnNlSW50KGNvbXBvbmVudCwgMTApKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKGFjYywgTC5wcm9wKGN1cikpO1xuICAgIH0sIEwuaWQoKSk7XG4gICAgcmV0dXJuIGxlbnM7XG59O1xuZXhwb3J0cy5sZW5zRnJvbVBhdGggPSBsZW5zRnJvbVBhdGg7XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXQgPSB2b2lkIDA7XG5jb25zdCBmdW5jdGlvbl8xID0gcmVxdWlyZShcImZwLXRzL2Z1bmN0aW9uXCIpO1xuY29uc3QgVHIgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIm1vbm9jbGUtdHMvbGliL1RyYXZlcnNhbFwiKSk7XG5jb25zdCBtb25vY2xlXzEgPSByZXF1aXJlKFwiLi4vdXRpbC9tb25vY2xlXCIpO1xuY29uc3QgZ2V0ID0gKHBhdGgsIC4uLmluZGljaWVzKSA9PiB7XG4gICAgaWYgKCgwLCBtb25vY2xlXzEuaXNQYXRoTGVucykocGF0aCkpIHtcbiAgICAgICAgcmV0dXJuICgwLCBtb25vY2xlXzEubGVuc0Zyb21QYXRoKShwYXRoKS5nZXQ7XG4gICAgfVxuICAgIGlmICgoMCwgbW9ub2NsZV8xLmlzUGF0aFRyYXZlcnNhbCkocGF0aCkpIHtcbiAgICAgICAgcmV0dXJuICh2KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoKDAsIG1vbm9jbGVfMS50cmF2ZXJzYWxGcm9tUGF0aCkocGF0aCwgaW5kaWNpZXMpLCBUci5nZXRBbGwodikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gKDAsIG1vbm9jbGVfMS5vcHRpb25hbEZyb21QYXRoKShwYXRoLCBpbmRpY2llcykuZ2V0T3B0aW9uO1xufTtcbmV4cG9ydHMuZ2V0ID0gZ2V0O1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2V0ID0gdm9pZCAwO1xuY29uc3QgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCJmcC10cy9mdW5jdGlvblwiKTtcbmNvbnN0IFRyID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJtb25vY2xlLXRzL2xpYi9UcmF2ZXJzYWxcIikpO1xuY29uc3QgbW9ub2NsZV8xID0gcmVxdWlyZShcIi4uL3V0aWwvbW9ub2NsZVwiKTtcbmNvbnN0IHNldCA9IChwYXRoLCAuLi5hcmdzKSA9PiAob2JqKSA9PiB7XG4gICAgY29uc3QgaW5kaWNpZXMgPSBhcmdzLnNsaWNlKDAsIGFyZ3MubGVuZ3RoIC0gMSk7XG4gICAgY29uc3QgdmFsID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgIGlmICgoMCwgbW9ub2NsZV8xLmlzUGF0aExlbnMpKHBhdGgpKSB7XG4gICAgICAgIHJldHVybiAoMCwgbW9ub2NsZV8xLmxlbnNGcm9tUGF0aCkocGF0aCkuc2V0KHZhbCkob2JqKTtcbiAgICB9XG4gICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKCgwLCBtb25vY2xlXzEudHJhdmVyc2FsRnJvbVBhdGgpKHBhdGgsIGluZGljaWVzKSwgVHIuc2V0KHZhbCkpKG9iaik7XG59O1xuZXhwb3J0cy5zZXQgPSBzZXQ7XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2V0T3B0aW9uID0gdm9pZCAwO1xuY29uc3QgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCJmcC10cy9mdW5jdGlvblwiKTtcbmNvbnN0IE9wdGlvbmFsXzEgPSByZXF1aXJlKFwibW9ub2NsZS10cy9PcHRpb25hbFwiKTtcbmNvbnN0IFRyYXZlcnNhbF8xID0gcmVxdWlyZShcIm1vbm9jbGUtdHMvVHJhdmVyc2FsXCIpO1xuY29uc3QgbW9ub2NsZV8xID0gcmVxdWlyZShcIi4uL3V0aWwvbW9ub2NsZVwiKTtcbmNvbnN0IHNldE9wdGlvbiA9IChwYXRoLCAuLi5hcmdzKSA9PiAob2JqKSA9PiB7XG4gICAgY29uc3QgaW5kaWNpZXMgPSBhcmdzLnNsaWNlKDAsIGFyZ3MubGVuZ3RoIC0gMSk7XG4gICAgY29uc3QgdmFsID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgIGlmICgoMCwgbW9ub2NsZV8xLmlzUGF0aExlbnMpKHBhdGgpKSB7XG4gICAgICAgIHJldHVybiAoMCwgbW9ub2NsZV8xLmxlbnNGcm9tUGF0aCkocGF0aCkuc2V0KHZhbCkob2JqKTtcbiAgICB9XG4gICAgaWYgKCgwLCBtb25vY2xlXzEuaXNQYXRoVHJhdmVyc2FsKShwYXRoKSkge1xuICAgICAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoKDAsIG1vbm9jbGVfMS50cmF2ZXJzYWxGcm9tUGF0aCkocGF0aCwgaW5kaWNpZXMpLCAoMCwgVHJhdmVyc2FsXzEuc2V0KSh2YWwpKShvYmopO1xuICAgIH1cbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoKDAsIG1vbm9jbGVfMS5vcHRpb25hbEZyb21QYXRoKShwYXRoLCBpbmRpY2llcyksICgwLCBPcHRpb25hbF8xLnNldE9wdGlvbikodmFsKSkob2JqKTtcbn07XG5leHBvcnRzLnNldE9wdGlvbiA9IHNldE9wdGlvbjtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1vZGlmeSA9IHZvaWQgMDtcbmNvbnN0IGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiZnAtdHMvZnVuY3Rpb25cIik7XG5jb25zdCBMID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJtb25vY2xlLXRzL2xpYi9MZW5zXCIpKTtcbmNvbnN0IFRyYXZlcnNhbF8xID0gcmVxdWlyZShcIm1vbm9jbGUtdHMvVHJhdmVyc2FsXCIpO1xuY29uc3QgbW9ub2NsZV8xID0gcmVxdWlyZShcIi4uL3V0aWwvbW9ub2NsZVwiKTtcbmNvbnN0IG1vZGlmeSA9IChwYXRoLCAuLi5hcmdzKSA9PiAoYSkgPT4ge1xuICAgIGNvbnN0IGluZGljaWVzID0gYXJncy5zbGljZSgwLCBhcmdzLmxlbmd0aCAtIDEpO1xuICAgIGNvbnN0IG1vZEZ1bmMgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gICAgaWYgKCgwLCBtb25vY2xlXzEuaXNQYXRoTGVucykocGF0aCkpIHtcbiAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKCgwLCBtb25vY2xlXzEubGVuc0Zyb21QYXRoKShwYXRoKSwgTC5tb2RpZnkobW9kRnVuYykpKGEpO1xuICAgIH1cbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoKDAsIG1vbm9jbGVfMS50cmF2ZXJzYWxGcm9tUGF0aCkocGF0aCwgaW5kaWNpZXMpLCAoMCwgVHJhdmVyc2FsXzEubW9kaWZ5KShtb2RGdW5jKSkoYSk7XG59O1xuZXhwb3J0cy5tb2RpZnkgPSBtb2RpZnk7XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5tb2RpZnlPcHRpb24gPSB2b2lkIDA7XG5jb25zdCBmdW5jdGlvbl8xID0gcmVxdWlyZShcImZwLXRzL2Z1bmN0aW9uXCIpO1xuY29uc3QgTCA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwibW9ub2NsZS10cy9saWIvTGVuc1wiKSk7XG5jb25zdCBPcCA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwibW9ub2NsZS10cy9saWIvT3B0aW9uYWxcIikpO1xuY29uc3QgVHIgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIm1vbm9jbGUtdHMvbGliL1RyYXZlcnNhbFwiKSk7XG5jb25zdCBtb25vY2xlXzEgPSByZXF1aXJlKFwiLi4vdXRpbC9tb25vY2xlXCIpO1xuY29uc3QgbW9kaWZ5T3B0aW9uID0gKHBhdGgsIC4uLmFyZ3MpID0+IChhKSA9PiB7XG4gICAgY29uc3QgaW5kaWNpZXMgPSBhcmdzLnNsaWNlKDAsIGFyZ3MubGVuZ3RoIC0gMSk7XG4gICAgY29uc3QgbW9kRnVuYyA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgICBpZiAoKDAsIG1vbm9jbGVfMS5pc1BhdGhMZW5zKShwYXRoKSkge1xuICAgICAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoKDAsIG1vbm9jbGVfMS5sZW5zRnJvbVBhdGgpKHBhdGgpLCBMLm1vZGlmeShtb2RGdW5jKSkoYSk7XG4gICAgfVxuICAgIGlmICgoMCwgbW9ub2NsZV8xLmlzUGF0aFRyYXZlcnNhbCkocGF0aCkpIHtcbiAgICAgICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKCgwLCBtb25vY2xlXzEudHJhdmVyc2FsRnJvbVBhdGgpKHBhdGgsIGluZGljaWVzKSwgVHIubW9kaWZ5KG1vZEZ1bmMpKShhKTtcbiAgICB9XG4gICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKCgwLCBtb25vY2xlXzEub3B0aW9uYWxGcm9tUGF0aCkocGF0aCwgaW5kaWNpZXMpLCBPcC5tb2RpZnlPcHRpb24obW9kRnVuYykpKGEpO1xufTtcbmV4cG9ydHMubW9kaWZ5T3B0aW9uID0gbW9kaWZ5T3B0aW9uO1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubW9kaWZ5VyA9IHZvaWQgMDtcbmNvbnN0IGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiZnAtdHMvZnVuY3Rpb25cIik7XG5jb25zdCBMID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJtb25vY2xlLXRzL2xpYi9MZW5zXCIpKTtcbmNvbnN0IFRyYXZlcnNhbF8xID0gcmVxdWlyZShcIm1vbm9jbGUtdHMvVHJhdmVyc2FsXCIpO1xuY29uc3QgbW9ub2NsZV8xID0gcmVxdWlyZShcIi4uL3V0aWwvbW9ub2NsZVwiKTtcbmNvbnN0IG1vZGlmeVcgPSAocGF0aCwgLi4uYXJncykgPT4gKGEpID0+IHtcbiAgICBjb25zdCBpbmRpY2llcyA9IGFyZ3Muc2xpY2UoMCwgYXJncy5sZW5ndGggLSAxKTtcbiAgICBjb25zdCBtb2RGdW5jID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgIGlmICgoMCwgbW9ub2NsZV8xLmlzUGF0aExlbnMpKHBhdGgpKSB7XG4gICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKSgoMCwgbW9ub2NsZV8xLmxlbnNGcm9tUGF0aCkocGF0aCksIEwubW9kaWZ5KG1vZEZ1bmMpKShhKTtcbiAgICB9XG4gICAgcmV0dXJuICgwLCBmdW5jdGlvbl8xLnBpcGUpKCgwLCBtb25vY2xlXzEudHJhdmVyc2FsRnJvbVBhdGgpKHBhdGgsIGluZGljaWVzKSwgKDAsIFRyYXZlcnNhbF8xLm1vZGlmeSkobW9kRnVuYykpKGEpO1xufTtcbmV4cG9ydHMubW9kaWZ5VyA9IG1vZGlmeVc7XG4iLAogICJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5tb2RpZnlPcHRpb25XID0gdm9pZCAwO1xuY29uc3QgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCJmcC10cy9mdW5jdGlvblwiKTtcbmNvbnN0IEwgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIm1vbm9jbGUtdHMvbGliL0xlbnNcIikpO1xuY29uc3QgT3AgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIm1vbm9jbGUtdHMvbGliL09wdGlvbmFsXCIpKTtcbmNvbnN0IFRyID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJtb25vY2xlLXRzL2xpYi9UcmF2ZXJzYWxcIikpO1xuY29uc3QgbW9ub2NsZV8xID0gcmVxdWlyZShcIi4uL3V0aWwvbW9ub2NsZVwiKTtcbmNvbnN0IG1vZGlmeU9wdGlvblcgPSAocGF0aCwgLi4uYXJncykgPT4gKGEpID0+IHtcbiAgICBjb25zdCBpbmRpY2llcyA9IGFyZ3Muc2xpY2UoMCwgYXJncy5sZW5ndGggLSAxKTtcbiAgICBjb25zdCBtb2RGdW5jID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgIGlmICgoMCwgbW9ub2NsZV8xLmlzUGF0aExlbnMpKHBhdGgpKSB7XG4gICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKSgoMCwgbW9ub2NsZV8xLmxlbnNGcm9tUGF0aCkocGF0aCksIEwubW9kaWZ5KG1vZEZ1bmMpKShhKTtcbiAgICB9XG4gICAgaWYgKCgwLCBtb25vY2xlXzEuaXNQYXRoVHJhdmVyc2FsKShwYXRoKSkge1xuICAgICAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoKDAsIG1vbm9jbGVfMS50cmF2ZXJzYWxGcm9tUGF0aCkocGF0aCwgaW5kaWNpZXMpLCBUci5tb2RpZnkobW9kRnVuYykpKGEpO1xuICAgIH1cbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoKDAsIG1vbm9jbGVfMS5vcHRpb25hbEZyb21QYXRoKShwYXRoLCBpbmRpY2llcyksIE9wLm1vZGlmeU9wdGlvbihtb2RGdW5jKSkoYSk7XG59O1xuZXhwb3J0cy5tb2RpZnlPcHRpb25XID0gbW9kaWZ5T3B0aW9uVztcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1vZGlmeUYgPSB2b2lkIDA7XG5jb25zdCBmdW5jdGlvbl8xID0gcmVxdWlyZShcImZwLXRzL2Z1bmN0aW9uXCIpO1xuY29uc3QgTCA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwibW9ub2NsZS10cy9saWIvTGVuc1wiKSk7XG5jb25zdCBtb25vY2xlXzEgPSByZXF1aXJlKFwiLi4vdXRpbC9tb25vY2xlXCIpO1xuY29uc3QgbW9kaWZ5RiA9IChGKSA9PiAocGF0aCwgLi4uYXJncykgPT4gKGEpID0+IHtcbiAgICBjb25zdCBpbmRpY2llcyA9IGFyZ3Muc2xpY2UoMCwgYXJncy5sZW5ndGggLSAxKTtcbiAgICBjb25zdCBtb2RGdW5jID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgIGlmICgoMCwgbW9ub2NsZV8xLmlzUGF0aExlbnMpKHBhdGgpKSB7XG4gICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKSgoMCwgbW9ub2NsZV8xLmxlbnNGcm9tUGF0aCkocGF0aCksIEwubW9kaWZ5RihGKShtb2RGdW5jKSkoYSk7XG4gICAgfVxuICAgIHJldHVybiAoMCwgbW9ub2NsZV8xLnRyYXZlcnNhbEZyb21QYXRoKShwYXRoLCBpbmRpY2llcykubW9kaWZ5RihGKShtb2RGdW5jKShhKTtcbn07XG5leHBvcnRzLm1vZGlmeUYgPSBtb2RpZnlGO1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudXBzZXJ0ID0gdm9pZCAwO1xuY29uc3QgZnVuY3Rpb25fMSA9IHJlcXVpcmUoXCJmcC10cy9mdW5jdGlvblwiKTtcbmNvbnN0IEwgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIm1vbm9jbGUtdHMvbGliL0xlbnNcIikpO1xuY29uc3QgVHIgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIm1vbm9jbGUtdHMvbGliL1RyYXZlcnNhbFwiKSk7XG5jb25zdCBtb25vY2xlXzEgPSByZXF1aXJlKFwiLi4vdXRpbC9tb25vY2xlXCIpO1xuY29uc3QgdXBzZXJ0ID0gKHBhdGgsIGZpbmFsLCAuLi5hcmdzKSA9PiAoYSkgPT4ge1xuICAgIGNvbnN0IGluZGljaWVzID0gYXJncy5zbGljZSgwLCBhcmdzLmxlbmd0aCAtIDEpO1xuICAgIGNvbnN0IHZhbCA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgICBpZiAoKDAsIG1vbm9jbGVfMS5pc1BhdGhMZW5zKShwYXRoKSkge1xuICAgICAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoKDAsIG1vbm9jbGVfMS5sZW5zRnJvbVBhdGgpKHBhdGgpLCBMLm1vZGlmeSgob2JqKSA9PiAoeyAuLi5vYmosIFtmaW5hbF06IHZhbCB9KSkpKGEpO1xuICAgIH1cbiAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoKDAsIG1vbm9jbGVfMS50cmF2ZXJzYWxGcm9tUGF0aCkocGF0aCwgaW5kaWNpZXMpLCBUci5tb2RpZnkoKG9iaikgPT4gKHsgLi4ub2JqLCBbZmluYWxdOiB2YWwgfSkpKShhKTtcbn07XG5leHBvcnRzLnVwc2VydCA9IHVwc2VydDtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnJlbW92ZSA9IHZvaWQgMDtcbmNvbnN0IGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiZnAtdHMvZnVuY3Rpb25cIik7XG5jb25zdCBMID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJtb25vY2xlLXRzL2xpYi9MZW5zXCIpKTtcbmNvbnN0IFRyID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJtb25vY2xlLXRzL2xpYi9UcmF2ZXJzYWxcIikpO1xuY29uc3QgbW9ub2NsZV8xID0gcmVxdWlyZShcIi4uL3V0aWwvbW9ub2NsZVwiKTtcbmNvbnN0IHJlbW92ZSA9IChmdWxsUGF0aCkgPT4gKGEpID0+IHtcbiAgICBjb25zdCBzZWdtZW50cyA9IGZ1bGxQYXRoLnNwbGl0KFwiLlwiKTtcbiAgICBjb25zdCBwYXRoID0gc2VnbWVudHMuc2xpY2UoMCwgc2VnbWVudHMubGVuZ3RoIC0gMSkuam9pbihcIi5cIik7XG4gICAgY29uc3QgZmluYWwgPSBzZWdtZW50c1tzZWdtZW50cy5sZW5ndGggLSAxXTtcbiAgICBpZiAoKDAsIG1vbm9jbGVfMS5pc1BhdGhMZW5zKShwYXRoKSkge1xuICAgICAgICByZXR1cm4gKDAsIGZ1bmN0aW9uXzEucGlwZSkoKDAsIG1vbm9jbGVfMS5sZW5zRnJvbVBhdGgpKHBhdGgpLCBMLm1vZGlmeSgob2JqKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvbWl0dGVkID0geyAuLi5vYmogfTtcbiAgICAgICAgICAgIGRlbGV0ZSBvbWl0dGVkW2ZpbmFsXTtcbiAgICAgICAgICAgIHJldHVybiBvbWl0dGVkO1xuICAgICAgICB9KSkoYSk7XG4gICAgfVxuICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKSgoMCwgbW9ub2NsZV8xLnRyYXZlcnNhbEZyb21QYXRoKShwYXRoLCBbXSksIFRyLm1vZGlmeSgob2JqKSA9PiB7XG4gICAgICAgIGNvbnN0IG9taXR0ZWQgPSB7IC4uLm9iaiB9O1xuICAgICAgICBkZWxldGUgb21pdHRlZFtmaW5hbF07XG4gICAgICAgIHJldHVybiBvbWl0dGVkO1xuICAgIH0pKShhKTtcbn07XG5leHBvcnRzLnJlbW92ZSA9IHJlbW92ZTtcbiIsCiAgIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnJlbmFtZSA9IHZvaWQgMDtcbmNvbnN0IGZ1bmN0aW9uXzEgPSByZXF1aXJlKFwiZnAtdHMvZnVuY3Rpb25cIik7XG5jb25zdCBMID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJtb25vY2xlLXRzL2xpYi9MZW5zXCIpKTtcbmNvbnN0IFRyID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJtb25vY2xlLXRzL2xpYi9UcmF2ZXJzYWxcIikpO1xuY29uc3QgbW9ub2NsZV8xID0gcmVxdWlyZShcIi4uL3V0aWwvbW9ub2NsZVwiKTtcbmNvbnN0IHJlbmFtZSA9IChmdWxsUGF0aCwgbmV3S2V5KSA9PiAoYSkgPT4ge1xuICAgIGNvbnN0IHNlZ21lbnRzID0gZnVsbFBhdGguc3BsaXQoXCIuXCIpO1xuICAgIGNvbnN0IHBhdGggPSBzZWdtZW50cy5zbGljZSgwLCBzZWdtZW50cy5sZW5ndGggLSAxKS5qb2luKFwiLlwiKTtcbiAgICBjb25zdCBmaW5hbCA9IHNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtIDFdO1xuICAgIGlmICgoMCwgbW9ub2NsZV8xLmlzUGF0aExlbnMpKHBhdGgpKSB7XG4gICAgICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKSgoMCwgbW9ub2NsZV8xLmxlbnNGcm9tUGF0aCkocGF0aCksIEwubW9kaWZ5KCh7IFtmaW5hbF06IHZhbCwgLi4ucmVzdCB9KSA9PiAoeyAuLi5yZXN0LCBbbmV3S2V5XTogdmFsIH0pKSkoYSk7XG4gICAgfVxuICAgIHJldHVybiAoMCwgZnVuY3Rpb25fMS5waXBlKSgoMCwgbW9ub2NsZV8xLnRyYXZlcnNhbEZyb21QYXRoKShwYXRoLCBbXSksIFRyLm1vZGlmeSgoeyBbZmluYWxdOiB2YWwsIC4uLnJlc3QgfSkgPT4gKHsgLi4ucmVzdCwgW25ld0tleV06IHZhbCB9KSkpKGEpO1xufTtcbmV4cG9ydHMucmVuYW1lID0gcmVuYW1lO1xuIiwKICAiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnJlbmFtZSA9IGV4cG9ydHMucmVtb3ZlID0gZXhwb3J0cy51cHNlcnQgPSBleHBvcnRzLm1vZGlmeUYgPSBleHBvcnRzLm1vZGlmeU9wdGlvblcgPSBleHBvcnRzLm1vZGlmeVcgPSBleHBvcnRzLm1vZGlmeU9wdGlvbiA9IGV4cG9ydHMubW9kaWZ5ID0gZXhwb3J0cy5zZXRPcHRpb24gPSBleHBvcnRzLnNldCA9IGV4cG9ydHMuZ2V0ID0gdm9pZCAwO1xuY29uc3QgZ2V0XzEgPSByZXF1aXJlKFwiLi92YWx1ZXMvZ2V0XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZ2V0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRfMS5nZXQ7IH0gfSk7XG5jb25zdCBzZXRfMSA9IHJlcXVpcmUoXCIuL3ZhbHVlcy9zZXRcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJzZXRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldF8xLnNldDsgfSB9KTtcbmNvbnN0IHNldE9wdGlvbl8xID0gcmVxdWlyZShcIi4vdmFsdWVzL3NldE9wdGlvblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInNldE9wdGlvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0T3B0aW9uXzEuc2V0T3B0aW9uOyB9IH0pO1xuY29uc3QgbW9kaWZ5XzEgPSByZXF1aXJlKFwiLi92YWx1ZXMvbW9kaWZ5XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwibW9kaWZ5XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBtb2RpZnlfMS5tb2RpZnk7IH0gfSk7XG5jb25zdCBtb2RpZnlPcHRpb25fMSA9IHJlcXVpcmUoXCIuL3ZhbHVlcy9tb2RpZnlPcHRpb25cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJtb2RpZnlPcHRpb25cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1vZGlmeU9wdGlvbl8xLm1vZGlmeU9wdGlvbjsgfSB9KTtcbmNvbnN0IG1vZGlmeVdfMSA9IHJlcXVpcmUoXCIuL3ZhbHVlcy9tb2RpZnlXXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwibW9kaWZ5V1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbW9kaWZ5V18xLm1vZGlmeVc7IH0gfSk7XG5jb25zdCBtb2RpZnlPcHRpb25XXzEgPSByZXF1aXJlKFwiLi92YWx1ZXMvbW9kaWZ5T3B0aW9uV1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIm1vZGlmeU9wdGlvbldcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1vZGlmeU9wdGlvbldfMS5tb2RpZnlPcHRpb25XOyB9IH0pO1xuY29uc3QgbW9kaWZ5Rl8xID0gcmVxdWlyZShcIi4vdmFsdWVzL21vZGlmeUZcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJtb2RpZnlGXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBtb2RpZnlGXzEubW9kaWZ5RjsgfSB9KTtcbmNvbnN0IHVwc2VydF8xID0gcmVxdWlyZShcIi4vdmFsdWVzL3Vwc2VydFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInVwc2VydFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdXBzZXJ0XzEudXBzZXJ0OyB9IH0pO1xuY29uc3QgcmVtb3ZlXzEgPSByZXF1aXJlKFwiLi92YWx1ZXMvcmVtb3ZlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicmVtb3ZlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiByZW1vdmVfMS5yZW1vdmU7IH0gfSk7XG5jb25zdCByZW5hbWVfMSA9IHJlcXVpcmUoXCIuL3ZhbHVlcy9yZW5hbWVcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJyZW5hbWVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlbmFtZV8xLnJlbmFtZTsgfSB9KTtcbiIsCiAgIm1vZHVsZS5leHBvcnRzID0gU3BpY2V0aWZ5LlJlYWN0IiwKICAibW9kdWxlLmV4cG9ydHMgPSBTcGljZXRpZnkuUmVhY3RET00iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldEJvb2xlYW5BbGdlYnJhID0gZnVuY3Rpb24gKEIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgbWVldDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBCLm1lZXQoeChhKSwgeShhKSk7IH07IH0sXG4gICAgICAgIGpvaW46IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5qb2luKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBCLnplcm87IH0sXG4gICAgICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gQi5vbmU7IH0sXG4gICAgICAgIGltcGxpZXM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5pbXBsaWVzKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICBub3Q6IGZ1bmN0aW9uICh4KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5ub3QoeChhKSk7IH07IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIFVuYXJ5IGZ1bmN0aW9ucyBmb3JtIGEgc2VtaWdyb3VwIGFzIGxvbmcgYXMgeW91IGNhbiBwcm92aWRlIGEgc2VtaWdyb3VwIGZvciB0aGUgY29kb21haW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFByZWRpY2F0ZSwgZ2V0U2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBTMSA9IGdldFNlbWlncm91cChCLlNlbWlncm91cEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgUzIgPSBnZXRTZW1pZ3JvdXAoQi5TZW1pZ3JvdXBBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBTLmNvbmNhdChmKGEpLCBnKGEpKTsgfTsgfVxuICAgIH0pOyB9O1xufTtcbi8qKlxuICogVW5hcnkgZnVuY3Rpb25zIGZvcm0gYSBtb25vaWQgYXMgbG9uZyBhcyB5b3UgY2FuIHByb3ZpZGUgYSBtb25vaWQgZm9yIHRoZSBjb2RvbWFpbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUHJlZGljYXRlIH0gZnJvbSAnZnAtdHMvUHJlZGljYXRlJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBNMSA9IGdldE1vbm9pZChCLk1vbm9pZEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgTTIgPSBnZXRNb25vaWQoQi5Nb25vaWRBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGdldFNlbWlncm91cE0gPSBnZXRTZW1pZ3JvdXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwTSgpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE0uZW1wdHk7IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pcmluZyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGFkZDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBTLmFkZChmKHgpLCBnKHgpKTsgfTsgfSxcbiAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBTLnplcm87IH0sXG4gICAgbXVsOiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFMubXVsKGYoeCksIGcoeCkpOyB9OyB9LFxuICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gUy5vbmU7IH1cbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmluZyA9IGZ1bmN0aW9uIChSKSB7XG4gICAgdmFyIFMgPSBnZXRTZW1pcmluZyhSKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IFMuYWRkLFxuICAgICAgICBtdWw6IFMubXVsLFxuICAgICAgICBvbmU6IFMub25lLFxuICAgICAgICB6ZXJvOiBTLnplcm8sXG4gICAgICAgIHN1YjogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBSLnN1YihmKHgpLCBnKHgpKTsgfTsgfVxuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFwcGx5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoYSkge1xuICAgIHJldHVybiBhO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVDb2VyY2UgPSBpZGVudGl0eTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdGFudChhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH07XG59XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdHJ1ZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RUcnVlID0gLyojX19QVVJFX18qLyBjb25zdGFudCh0cnVlKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGBmYWxzZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RGYWxzZSA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQoZmFsc2UpO1xuLyoqXG4gKiBBIHRodW5rIHRoYXQgcmV0dXJucyBhbHdheXMgYG51bGxgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnN0TnVsbCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQobnVsbCk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFVuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGB2b2lkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFZvaWQgPSBjb25zdFVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBmbGlwKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmKGFyZ3NbMV0sIGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKShhcmdzWzBdKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb3coYWIsIGJjLCBjZCwgZGUsIGVmLCBmZywgZ2gsIGhpLCBpaikge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYWI7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpKGdoKGZnKGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWooaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR1cGxlKCkge1xuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdFtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNyZW1lbnQobikge1xuICAgIHJldHVybiBuICsgMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNyZW1lbnQobikge1xuICAgIHJldHVybiBuIC0gMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnN1cmQoXykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FsbGVkIGBhYnN1cmRgIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1bmNhbGxhYmxlJyk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB0dXBsZWQgdmVyc2lvbiBvZiB0aGlzIGZ1bmN0aW9uOiBpbnN0ZWFkIG9mIGBuYCBhcmd1bWVudHMsIGl0IGFjY2VwdHMgYSBzaW5nbGUgdHVwbGUgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlZCB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGFkZCA9IHR1cGxlZCgoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIgPT4geCArIHkpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGFkZChbMSwgMl0pLCAzKVxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHVwbGVkKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfTtcbn1cbi8qKlxuICogSW52ZXJzZSBmdW5jdGlvbiBvZiBgdHVwbGVkYFxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW50dXBsZWQoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlKGEsIGFiLCBiYywgY2QsIGRlLCBlZiwgZmcsIGdoLCBoaSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGFiKGEpO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gYmMoYWIoYSkpO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIoYSkpKTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGRlKGNkKGJjKGFiKGEpKSkpO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gZWYoZGUoY2QoYmMoYWIoYSkpKSkpO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGdoKGZnKGVmKGRlKGNkKGJjKGFiKGEpKSkpKSkpO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKSkpO1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXQgPSBhcmd1bWVudHNbaV0ocmV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFR5cGUgaG9sZSBzaW11bGF0aW9uXG4gKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgaG9sZSA9IGFic3VyZDtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFNLID0gZnVuY3Rpb24gKF8sIGIpIHsgcmV0dXJuIGI7IH07XG4vKipcbiAqIFVzZSBgUHJlZGljYXRlYCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gbm90KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIXByZWRpY2F0ZShhKTsgfTtcbn1cbi8qKlxuICogVXNlIGBFbmRvbW9ycGhpc21gIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4xMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEVuZG9tb3JwaGlzbU1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmxvdyhmaXJzdCwgc2Vjb25kKTsgfSxcbiAgICBlbXB0eTogaWRlbnRpdHlcbn0pOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBkdWFsID0gZnVuY3Rpb24gKGFyaXR5LCBib2R5KSB7XG4gICAgdmFyIGlzRGF0YUZpcnN0ID0gdHlwZW9mIGFyaXR5ID09PSAnbnVtYmVyJyA/IGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBhcmdzLmxlbmd0aCA+PSBhcml0eTsgfSA6IGFyaXR5O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpO1xuICAgICAgICBpZiAoaXNEYXRhRmlyc3QoYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGJvZHkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmKSB7IHJldHVybiBib2R5LmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbc2VsZl0sIGFyZ3MsIGZhbHNlKSk7IH07XG4gICAgfTtcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldEJvb2xlYW5BbGdlYnJhID0gZnVuY3Rpb24gKEIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgbWVldDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBCLm1lZXQoeChhKSwgeShhKSk7IH07IH0sXG4gICAgICAgIGpvaW46IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5qb2luKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBCLnplcm87IH0sXG4gICAgICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gQi5vbmU7IH0sXG4gICAgICAgIGltcGxpZXM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5pbXBsaWVzKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICBub3Q6IGZ1bmN0aW9uICh4KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5ub3QoeChhKSk7IH07IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIFVuYXJ5IGZ1bmN0aW9ucyBmb3JtIGEgc2VtaWdyb3VwIGFzIGxvbmcgYXMgeW91IGNhbiBwcm92aWRlIGEgc2VtaWdyb3VwIGZvciB0aGUgY29kb21haW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFByZWRpY2F0ZSwgZ2V0U2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBTMSA9IGdldFNlbWlncm91cChCLlNlbWlncm91cEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgUzIgPSBnZXRTZW1pZ3JvdXAoQi5TZW1pZ3JvdXBBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBTLmNvbmNhdChmKGEpLCBnKGEpKTsgfTsgfVxuICAgIH0pOyB9O1xufTtcbi8qKlxuICogVW5hcnkgZnVuY3Rpb25zIGZvcm0gYSBtb25vaWQgYXMgbG9uZyBhcyB5b3UgY2FuIHByb3ZpZGUgYSBtb25vaWQgZm9yIHRoZSBjb2RvbWFpbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUHJlZGljYXRlIH0gZnJvbSAnZnAtdHMvUHJlZGljYXRlJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBNMSA9IGdldE1vbm9pZChCLk1vbm9pZEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgTTIgPSBnZXRNb25vaWQoQi5Nb25vaWRBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGdldFNlbWlncm91cE0gPSBnZXRTZW1pZ3JvdXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwTSgpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE0uZW1wdHk7IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pcmluZyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGFkZDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBTLmFkZChmKHgpLCBnKHgpKTsgfTsgfSxcbiAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBTLnplcm87IH0sXG4gICAgbXVsOiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFMubXVsKGYoeCksIGcoeCkpOyB9OyB9LFxuICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gUy5vbmU7IH1cbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmluZyA9IGZ1bmN0aW9uIChSKSB7XG4gICAgdmFyIFMgPSBnZXRTZW1pcmluZyhSKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IFMuYWRkLFxuICAgICAgICBtdWw6IFMubXVsLFxuICAgICAgICBvbmU6IFMub25lLFxuICAgICAgICB6ZXJvOiBTLnplcm8sXG4gICAgICAgIHN1YjogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBSLnN1YihmKHgpLCBnKHgpKTsgfTsgfVxuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFwcGx5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoYSkge1xuICAgIHJldHVybiBhO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVDb2VyY2UgPSBpZGVudGl0eTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdGFudChhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH07XG59XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdHJ1ZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RUcnVlID0gLyojX19QVVJFX18qLyBjb25zdGFudCh0cnVlKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGBmYWxzZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RGYWxzZSA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQoZmFsc2UpO1xuLyoqXG4gKiBBIHRodW5rIHRoYXQgcmV0dXJucyBhbHdheXMgYG51bGxgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnN0TnVsbCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQobnVsbCk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFVuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGB2b2lkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFZvaWQgPSBjb25zdFVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBmbGlwKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmKGFyZ3NbMV0sIGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKShhcmdzWzBdKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb3coYWIsIGJjLCBjZCwgZGUsIGVmLCBmZywgZ2gsIGhpLCBpaikge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYWI7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpKGdoKGZnKGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWooaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR1cGxlKCkge1xuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdFtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNyZW1lbnQobikge1xuICAgIHJldHVybiBuICsgMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNyZW1lbnQobikge1xuICAgIHJldHVybiBuIC0gMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnN1cmQoXykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FsbGVkIGBhYnN1cmRgIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1bmNhbGxhYmxlJyk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB0dXBsZWQgdmVyc2lvbiBvZiB0aGlzIGZ1bmN0aW9uOiBpbnN0ZWFkIG9mIGBuYCBhcmd1bWVudHMsIGl0IGFjY2VwdHMgYSBzaW5nbGUgdHVwbGUgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlZCB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGFkZCA9IHR1cGxlZCgoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIgPT4geCArIHkpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGFkZChbMSwgMl0pLCAzKVxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHVwbGVkKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfTtcbn1cbi8qKlxuICogSW52ZXJzZSBmdW5jdGlvbiBvZiBgdHVwbGVkYFxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW50dXBsZWQoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlKGEsIGFiLCBiYywgY2QsIGRlLCBlZiwgZmcsIGdoLCBoaSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGFiKGEpO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gYmMoYWIoYSkpO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIoYSkpKTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGRlKGNkKGJjKGFiKGEpKSkpO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gZWYoZGUoY2QoYmMoYWIoYSkpKSkpO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGdoKGZnKGVmKGRlKGNkKGJjKGFiKGEpKSkpKSkpO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKSkpO1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXQgPSBhcmd1bWVudHNbaV0ocmV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFR5cGUgaG9sZSBzaW11bGF0aW9uXG4gKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgaG9sZSA9IGFic3VyZDtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFNLID0gZnVuY3Rpb24gKF8sIGIpIHsgcmV0dXJuIGI7IH07XG4vKipcbiAqIFVzZSBgUHJlZGljYXRlYCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gbm90KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIXByZWRpY2F0ZShhKTsgfTtcbn1cbi8qKlxuICogVXNlIGBFbmRvbW9ycGhpc21gIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4xMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEVuZG9tb3JwaGlzbU1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmxvdyhmaXJzdCwgc2Vjb25kKTsgfSxcbiAgICBlbXB0eTogaWRlbnRpdHlcbn0pOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBkdWFsID0gZnVuY3Rpb24gKGFyaXR5LCBib2R5KSB7XG4gICAgdmFyIGlzRGF0YUZpcnN0ID0gdHlwZW9mIGFyaXR5ID09PSAnbnVtYmVyJyA/IGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBhcmdzLmxlbmd0aCA+PSBhcml0eTsgfSA6IGFyaXR5O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpO1xuICAgICAgICBpZiAoaXNEYXRhRmlyc3QoYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGJvZHkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmKSB7IHJldHVybiBib2R5LmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbc2VsZl0sIGFyZ3MsIGZhbHNlKSk7IH07XG4gICAgfTtcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldEJvb2xlYW5BbGdlYnJhID0gZnVuY3Rpb24gKEIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgbWVldDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBCLm1lZXQoeChhKSwgeShhKSk7IH07IH0sXG4gICAgICAgIGpvaW46IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5qb2luKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBCLnplcm87IH0sXG4gICAgICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gQi5vbmU7IH0sXG4gICAgICAgIGltcGxpZXM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5pbXBsaWVzKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICBub3Q6IGZ1bmN0aW9uICh4KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5ub3QoeChhKSk7IH07IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIFVuYXJ5IGZ1bmN0aW9ucyBmb3JtIGEgc2VtaWdyb3VwIGFzIGxvbmcgYXMgeW91IGNhbiBwcm92aWRlIGEgc2VtaWdyb3VwIGZvciB0aGUgY29kb21haW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFByZWRpY2F0ZSwgZ2V0U2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBTMSA9IGdldFNlbWlncm91cChCLlNlbWlncm91cEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgUzIgPSBnZXRTZW1pZ3JvdXAoQi5TZW1pZ3JvdXBBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBTLmNvbmNhdChmKGEpLCBnKGEpKTsgfTsgfVxuICAgIH0pOyB9O1xufTtcbi8qKlxuICogVW5hcnkgZnVuY3Rpb25zIGZvcm0gYSBtb25vaWQgYXMgbG9uZyBhcyB5b3UgY2FuIHByb3ZpZGUgYSBtb25vaWQgZm9yIHRoZSBjb2RvbWFpbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUHJlZGljYXRlIH0gZnJvbSAnZnAtdHMvUHJlZGljYXRlJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBNMSA9IGdldE1vbm9pZChCLk1vbm9pZEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgTTIgPSBnZXRNb25vaWQoQi5Nb25vaWRBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGdldFNlbWlncm91cE0gPSBnZXRTZW1pZ3JvdXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwTSgpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE0uZW1wdHk7IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pcmluZyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGFkZDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBTLmFkZChmKHgpLCBnKHgpKTsgfTsgfSxcbiAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBTLnplcm87IH0sXG4gICAgbXVsOiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFMubXVsKGYoeCksIGcoeCkpOyB9OyB9LFxuICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gUy5vbmU7IH1cbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmluZyA9IGZ1bmN0aW9uIChSKSB7XG4gICAgdmFyIFMgPSBnZXRTZW1pcmluZyhSKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IFMuYWRkLFxuICAgICAgICBtdWw6IFMubXVsLFxuICAgICAgICBvbmU6IFMub25lLFxuICAgICAgICB6ZXJvOiBTLnplcm8sXG4gICAgICAgIHN1YjogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBSLnN1YihmKHgpLCBnKHgpKTsgfTsgfVxuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFwcGx5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoYSkge1xuICAgIHJldHVybiBhO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVDb2VyY2UgPSBpZGVudGl0eTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdGFudChhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH07XG59XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdHJ1ZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RUcnVlID0gLyojX19QVVJFX18qLyBjb25zdGFudCh0cnVlKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGBmYWxzZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RGYWxzZSA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQoZmFsc2UpO1xuLyoqXG4gKiBBIHRodW5rIHRoYXQgcmV0dXJucyBhbHdheXMgYG51bGxgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnN0TnVsbCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQobnVsbCk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFVuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGB2b2lkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFZvaWQgPSBjb25zdFVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBmbGlwKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmKGFyZ3NbMV0sIGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKShhcmdzWzBdKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb3coYWIsIGJjLCBjZCwgZGUsIGVmLCBmZywgZ2gsIGhpLCBpaikge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYWI7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpKGdoKGZnKGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWooaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR1cGxlKCkge1xuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdFtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNyZW1lbnQobikge1xuICAgIHJldHVybiBuICsgMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNyZW1lbnQobikge1xuICAgIHJldHVybiBuIC0gMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnN1cmQoXykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FsbGVkIGBhYnN1cmRgIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1bmNhbGxhYmxlJyk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB0dXBsZWQgdmVyc2lvbiBvZiB0aGlzIGZ1bmN0aW9uOiBpbnN0ZWFkIG9mIGBuYCBhcmd1bWVudHMsIGl0IGFjY2VwdHMgYSBzaW5nbGUgdHVwbGUgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlZCB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGFkZCA9IHR1cGxlZCgoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIgPT4geCArIHkpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGFkZChbMSwgMl0pLCAzKVxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHVwbGVkKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfTtcbn1cbi8qKlxuICogSW52ZXJzZSBmdW5jdGlvbiBvZiBgdHVwbGVkYFxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW50dXBsZWQoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlKGEsIGFiLCBiYywgY2QsIGRlLCBlZiwgZmcsIGdoLCBoaSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGFiKGEpO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gYmMoYWIoYSkpO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIoYSkpKTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGRlKGNkKGJjKGFiKGEpKSkpO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gZWYoZGUoY2QoYmMoYWIoYSkpKSkpO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGdoKGZnKGVmKGRlKGNkKGJjKGFiKGEpKSkpKSkpO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKSkpO1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXQgPSBhcmd1bWVudHNbaV0ocmV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFR5cGUgaG9sZSBzaW11bGF0aW9uXG4gKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgaG9sZSA9IGFic3VyZDtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFNLID0gZnVuY3Rpb24gKF8sIGIpIHsgcmV0dXJuIGI7IH07XG4vKipcbiAqIFVzZSBgUHJlZGljYXRlYCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gbm90KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIXByZWRpY2F0ZShhKTsgfTtcbn1cbi8qKlxuICogVXNlIGBFbmRvbW9ycGhpc21gIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4xMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEVuZG9tb3JwaGlzbU1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmxvdyhmaXJzdCwgc2Vjb25kKTsgfSxcbiAgICBlbXB0eTogaWRlbnRpdHlcbn0pOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBkdWFsID0gZnVuY3Rpb24gKGFyaXR5LCBib2R5KSB7XG4gICAgdmFyIGlzRGF0YUZpcnN0ID0gdHlwZW9mIGFyaXR5ID09PSAnbnVtYmVyJyA/IGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBhcmdzLmxlbmd0aCA+PSBhcml0eTsgfSA6IGFyaXR5O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpO1xuICAgICAgICBpZiAoaXNEYXRhRmlyc3QoYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGJvZHkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmKSB7IHJldHVybiBib2R5LmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbc2VsZl0sIGFyZ3MsIGZhbHNlKSk7IH07XG4gICAgfTtcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldEJvb2xlYW5BbGdlYnJhID0gZnVuY3Rpb24gKEIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgbWVldDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBCLm1lZXQoeChhKSwgeShhKSk7IH07IH0sXG4gICAgICAgIGpvaW46IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5qb2luKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBCLnplcm87IH0sXG4gICAgICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gQi5vbmU7IH0sXG4gICAgICAgIGltcGxpZXM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5pbXBsaWVzKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICBub3Q6IGZ1bmN0aW9uICh4KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5ub3QoeChhKSk7IH07IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIFVuYXJ5IGZ1bmN0aW9ucyBmb3JtIGEgc2VtaWdyb3VwIGFzIGxvbmcgYXMgeW91IGNhbiBwcm92aWRlIGEgc2VtaWdyb3VwIGZvciB0aGUgY29kb21haW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFByZWRpY2F0ZSwgZ2V0U2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBTMSA9IGdldFNlbWlncm91cChCLlNlbWlncm91cEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgUzIgPSBnZXRTZW1pZ3JvdXAoQi5TZW1pZ3JvdXBBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBTLmNvbmNhdChmKGEpLCBnKGEpKTsgfTsgfVxuICAgIH0pOyB9O1xufTtcbi8qKlxuICogVW5hcnkgZnVuY3Rpb25zIGZvcm0gYSBtb25vaWQgYXMgbG9uZyBhcyB5b3UgY2FuIHByb3ZpZGUgYSBtb25vaWQgZm9yIHRoZSBjb2RvbWFpbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUHJlZGljYXRlIH0gZnJvbSAnZnAtdHMvUHJlZGljYXRlJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBNMSA9IGdldE1vbm9pZChCLk1vbm9pZEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgTTIgPSBnZXRNb25vaWQoQi5Nb25vaWRBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGdldFNlbWlncm91cE0gPSBnZXRTZW1pZ3JvdXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwTSgpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE0uZW1wdHk7IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pcmluZyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGFkZDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBTLmFkZChmKHgpLCBnKHgpKTsgfTsgfSxcbiAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBTLnplcm87IH0sXG4gICAgbXVsOiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFMubXVsKGYoeCksIGcoeCkpOyB9OyB9LFxuICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gUy5vbmU7IH1cbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmluZyA9IGZ1bmN0aW9uIChSKSB7XG4gICAgdmFyIFMgPSBnZXRTZW1pcmluZyhSKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IFMuYWRkLFxuICAgICAgICBtdWw6IFMubXVsLFxuICAgICAgICBvbmU6IFMub25lLFxuICAgICAgICB6ZXJvOiBTLnplcm8sXG4gICAgICAgIHN1YjogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBSLnN1YihmKHgpLCBnKHgpKTsgfTsgfVxuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFwcGx5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoYSkge1xuICAgIHJldHVybiBhO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVDb2VyY2UgPSBpZGVudGl0eTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdGFudChhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH07XG59XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdHJ1ZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RUcnVlID0gLyojX19QVVJFX18qLyBjb25zdGFudCh0cnVlKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGBmYWxzZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RGYWxzZSA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQoZmFsc2UpO1xuLyoqXG4gKiBBIHRodW5rIHRoYXQgcmV0dXJucyBhbHdheXMgYG51bGxgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnN0TnVsbCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQobnVsbCk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFVuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGB2b2lkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFZvaWQgPSBjb25zdFVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBmbGlwKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmKGFyZ3NbMV0sIGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKShhcmdzWzBdKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb3coYWIsIGJjLCBjZCwgZGUsIGVmLCBmZywgZ2gsIGhpLCBpaikge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYWI7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpKGdoKGZnKGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWooaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR1cGxlKCkge1xuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdFtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNyZW1lbnQobikge1xuICAgIHJldHVybiBuICsgMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNyZW1lbnQobikge1xuICAgIHJldHVybiBuIC0gMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnN1cmQoXykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FsbGVkIGBhYnN1cmRgIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1bmNhbGxhYmxlJyk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB0dXBsZWQgdmVyc2lvbiBvZiB0aGlzIGZ1bmN0aW9uOiBpbnN0ZWFkIG9mIGBuYCBhcmd1bWVudHMsIGl0IGFjY2VwdHMgYSBzaW5nbGUgdHVwbGUgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlZCB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGFkZCA9IHR1cGxlZCgoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIgPT4geCArIHkpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGFkZChbMSwgMl0pLCAzKVxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHVwbGVkKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfTtcbn1cbi8qKlxuICogSW52ZXJzZSBmdW5jdGlvbiBvZiBgdHVwbGVkYFxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW50dXBsZWQoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlKGEsIGFiLCBiYywgY2QsIGRlLCBlZiwgZmcsIGdoLCBoaSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGFiKGEpO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gYmMoYWIoYSkpO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIoYSkpKTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGRlKGNkKGJjKGFiKGEpKSkpO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gZWYoZGUoY2QoYmMoYWIoYSkpKSkpO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGdoKGZnKGVmKGRlKGNkKGJjKGFiKGEpKSkpKSkpO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKSkpO1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXQgPSBhcmd1bWVudHNbaV0ocmV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFR5cGUgaG9sZSBzaW11bGF0aW9uXG4gKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgaG9sZSA9IGFic3VyZDtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFNLID0gZnVuY3Rpb24gKF8sIGIpIHsgcmV0dXJuIGI7IH07XG4vKipcbiAqIFVzZSBgUHJlZGljYXRlYCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gbm90KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIXByZWRpY2F0ZShhKTsgfTtcbn1cbi8qKlxuICogVXNlIGBFbmRvbW9ycGhpc21gIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4xMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEVuZG9tb3JwaGlzbU1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmxvdyhmaXJzdCwgc2Vjb25kKTsgfSxcbiAgICBlbXB0eTogaWRlbnRpdHlcbn0pOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBkdWFsID0gZnVuY3Rpb24gKGFyaXR5LCBib2R5KSB7XG4gICAgdmFyIGlzRGF0YUZpcnN0ID0gdHlwZW9mIGFyaXR5ID09PSAnbnVtYmVyJyA/IGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBhcmdzLmxlbmd0aCA+PSBhcml0eTsgfSA6IGFyaXR5O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpO1xuICAgICAgICBpZiAoaXNEYXRhRmlyc3QoYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGJvZHkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmKSB7IHJldHVybiBib2R5LmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbc2VsZl0sIGFyZ3MsIGZhbHNlKSk7IH07XG4gICAgfTtcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldEJvb2xlYW5BbGdlYnJhID0gZnVuY3Rpb24gKEIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgbWVldDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBCLm1lZXQoeChhKSwgeShhKSk7IH07IH0sXG4gICAgICAgIGpvaW46IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5qb2luKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBCLnplcm87IH0sXG4gICAgICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gQi5vbmU7IH0sXG4gICAgICAgIGltcGxpZXM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5pbXBsaWVzKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICBub3Q6IGZ1bmN0aW9uICh4KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5ub3QoeChhKSk7IH07IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIFVuYXJ5IGZ1bmN0aW9ucyBmb3JtIGEgc2VtaWdyb3VwIGFzIGxvbmcgYXMgeW91IGNhbiBwcm92aWRlIGEgc2VtaWdyb3VwIGZvciB0aGUgY29kb21haW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFByZWRpY2F0ZSwgZ2V0U2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBTMSA9IGdldFNlbWlncm91cChCLlNlbWlncm91cEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgUzIgPSBnZXRTZW1pZ3JvdXAoQi5TZW1pZ3JvdXBBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBTLmNvbmNhdChmKGEpLCBnKGEpKTsgfTsgfVxuICAgIH0pOyB9O1xufTtcbi8qKlxuICogVW5hcnkgZnVuY3Rpb25zIGZvcm0gYSBtb25vaWQgYXMgbG9uZyBhcyB5b3UgY2FuIHByb3ZpZGUgYSBtb25vaWQgZm9yIHRoZSBjb2RvbWFpbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUHJlZGljYXRlIH0gZnJvbSAnZnAtdHMvUHJlZGljYXRlJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBNMSA9IGdldE1vbm9pZChCLk1vbm9pZEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgTTIgPSBnZXRNb25vaWQoQi5Nb25vaWRBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGdldFNlbWlncm91cE0gPSBnZXRTZW1pZ3JvdXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwTSgpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE0uZW1wdHk7IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pcmluZyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGFkZDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBTLmFkZChmKHgpLCBnKHgpKTsgfTsgfSxcbiAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBTLnplcm87IH0sXG4gICAgbXVsOiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFMubXVsKGYoeCksIGcoeCkpOyB9OyB9LFxuICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gUy5vbmU7IH1cbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmluZyA9IGZ1bmN0aW9uIChSKSB7XG4gICAgdmFyIFMgPSBnZXRTZW1pcmluZyhSKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IFMuYWRkLFxuICAgICAgICBtdWw6IFMubXVsLFxuICAgICAgICBvbmU6IFMub25lLFxuICAgICAgICB6ZXJvOiBTLnplcm8sXG4gICAgICAgIHN1YjogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBSLnN1YihmKHgpLCBnKHgpKTsgfTsgfVxuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFwcGx5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoYSkge1xuICAgIHJldHVybiBhO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVDb2VyY2UgPSBpZGVudGl0eTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdGFudChhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH07XG59XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdHJ1ZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RUcnVlID0gLyojX19QVVJFX18qLyBjb25zdGFudCh0cnVlKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGBmYWxzZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RGYWxzZSA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQoZmFsc2UpO1xuLyoqXG4gKiBBIHRodW5rIHRoYXQgcmV0dXJucyBhbHdheXMgYG51bGxgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnN0TnVsbCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQobnVsbCk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFVuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGB2b2lkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFZvaWQgPSBjb25zdFVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBmbGlwKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmKGFyZ3NbMV0sIGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKShhcmdzWzBdKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb3coYWIsIGJjLCBjZCwgZGUsIGVmLCBmZywgZ2gsIGhpLCBpaikge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYWI7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpKGdoKGZnKGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWooaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR1cGxlKCkge1xuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdFtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNyZW1lbnQobikge1xuICAgIHJldHVybiBuICsgMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNyZW1lbnQobikge1xuICAgIHJldHVybiBuIC0gMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnN1cmQoXykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FsbGVkIGBhYnN1cmRgIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1bmNhbGxhYmxlJyk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB0dXBsZWQgdmVyc2lvbiBvZiB0aGlzIGZ1bmN0aW9uOiBpbnN0ZWFkIG9mIGBuYCBhcmd1bWVudHMsIGl0IGFjY2VwdHMgYSBzaW5nbGUgdHVwbGUgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlZCB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGFkZCA9IHR1cGxlZCgoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIgPT4geCArIHkpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGFkZChbMSwgMl0pLCAzKVxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHVwbGVkKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfTtcbn1cbi8qKlxuICogSW52ZXJzZSBmdW5jdGlvbiBvZiBgdHVwbGVkYFxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW50dXBsZWQoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlKGEsIGFiLCBiYywgY2QsIGRlLCBlZiwgZmcsIGdoLCBoaSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGFiKGEpO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gYmMoYWIoYSkpO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIoYSkpKTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGRlKGNkKGJjKGFiKGEpKSkpO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gZWYoZGUoY2QoYmMoYWIoYSkpKSkpO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGdoKGZnKGVmKGRlKGNkKGJjKGFiKGEpKSkpKSkpO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKSkpO1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXQgPSBhcmd1bWVudHNbaV0ocmV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFR5cGUgaG9sZSBzaW11bGF0aW9uXG4gKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgaG9sZSA9IGFic3VyZDtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFNLID0gZnVuY3Rpb24gKF8sIGIpIHsgcmV0dXJuIGI7IH07XG4vKipcbiAqIFVzZSBgUHJlZGljYXRlYCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gbm90KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIXByZWRpY2F0ZShhKTsgfTtcbn1cbi8qKlxuICogVXNlIGBFbmRvbW9ycGhpc21gIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4xMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEVuZG9tb3JwaGlzbU1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmxvdyhmaXJzdCwgc2Vjb25kKTsgfSxcbiAgICBlbXB0eTogaWRlbnRpdHlcbn0pOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBkdWFsID0gZnVuY3Rpb24gKGFyaXR5LCBib2R5KSB7XG4gICAgdmFyIGlzRGF0YUZpcnN0ID0gdHlwZW9mIGFyaXR5ID09PSAnbnVtYmVyJyA/IGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBhcmdzLmxlbmd0aCA+PSBhcml0eTsgfSA6IGFyaXR5O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpO1xuICAgICAgICBpZiAoaXNEYXRhRmlyc3QoYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGJvZHkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmKSB7IHJldHVybiBib2R5LmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbc2VsZl0sIGFyZ3MsIGZhbHNlKSk7IH07XG4gICAgfTtcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldEJvb2xlYW5BbGdlYnJhID0gZnVuY3Rpb24gKEIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgbWVldDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBCLm1lZXQoeChhKSwgeShhKSk7IH07IH0sXG4gICAgICAgIGpvaW46IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5qb2luKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBCLnplcm87IH0sXG4gICAgICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gQi5vbmU7IH0sXG4gICAgICAgIGltcGxpZXM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5pbXBsaWVzKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICBub3Q6IGZ1bmN0aW9uICh4KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5ub3QoeChhKSk7IH07IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIFVuYXJ5IGZ1bmN0aW9ucyBmb3JtIGEgc2VtaWdyb3VwIGFzIGxvbmcgYXMgeW91IGNhbiBwcm92aWRlIGEgc2VtaWdyb3VwIGZvciB0aGUgY29kb21haW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFByZWRpY2F0ZSwgZ2V0U2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBTMSA9IGdldFNlbWlncm91cChCLlNlbWlncm91cEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgUzIgPSBnZXRTZW1pZ3JvdXAoQi5TZW1pZ3JvdXBBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBTLmNvbmNhdChmKGEpLCBnKGEpKTsgfTsgfVxuICAgIH0pOyB9O1xufTtcbi8qKlxuICogVW5hcnkgZnVuY3Rpb25zIGZvcm0gYSBtb25vaWQgYXMgbG9uZyBhcyB5b3UgY2FuIHByb3ZpZGUgYSBtb25vaWQgZm9yIHRoZSBjb2RvbWFpbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUHJlZGljYXRlIH0gZnJvbSAnZnAtdHMvUHJlZGljYXRlJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBNMSA9IGdldE1vbm9pZChCLk1vbm9pZEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgTTIgPSBnZXRNb25vaWQoQi5Nb25vaWRBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGdldFNlbWlncm91cE0gPSBnZXRTZW1pZ3JvdXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwTSgpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE0uZW1wdHk7IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pcmluZyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGFkZDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBTLmFkZChmKHgpLCBnKHgpKTsgfTsgfSxcbiAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBTLnplcm87IH0sXG4gICAgbXVsOiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFMubXVsKGYoeCksIGcoeCkpOyB9OyB9LFxuICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gUy5vbmU7IH1cbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmluZyA9IGZ1bmN0aW9uIChSKSB7XG4gICAgdmFyIFMgPSBnZXRTZW1pcmluZyhSKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IFMuYWRkLFxuICAgICAgICBtdWw6IFMubXVsLFxuICAgICAgICBvbmU6IFMub25lLFxuICAgICAgICB6ZXJvOiBTLnplcm8sXG4gICAgICAgIHN1YjogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBSLnN1YihmKHgpLCBnKHgpKTsgfTsgfVxuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFwcGx5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoYSkge1xuICAgIHJldHVybiBhO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVDb2VyY2UgPSBpZGVudGl0eTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdGFudChhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH07XG59XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdHJ1ZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RUcnVlID0gLyojX19QVVJFX18qLyBjb25zdGFudCh0cnVlKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGBmYWxzZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RGYWxzZSA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQoZmFsc2UpO1xuLyoqXG4gKiBBIHRodW5rIHRoYXQgcmV0dXJucyBhbHdheXMgYG51bGxgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnN0TnVsbCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQobnVsbCk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFVuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGB2b2lkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFZvaWQgPSBjb25zdFVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBmbGlwKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmKGFyZ3NbMV0sIGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKShhcmdzWzBdKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb3coYWIsIGJjLCBjZCwgZGUsIGVmLCBmZywgZ2gsIGhpLCBpaikge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYWI7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpKGdoKGZnKGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWooaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR1cGxlKCkge1xuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdFtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNyZW1lbnQobikge1xuICAgIHJldHVybiBuICsgMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNyZW1lbnQobikge1xuICAgIHJldHVybiBuIC0gMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnN1cmQoXykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FsbGVkIGBhYnN1cmRgIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1bmNhbGxhYmxlJyk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB0dXBsZWQgdmVyc2lvbiBvZiB0aGlzIGZ1bmN0aW9uOiBpbnN0ZWFkIG9mIGBuYCBhcmd1bWVudHMsIGl0IGFjY2VwdHMgYSBzaW5nbGUgdHVwbGUgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlZCB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGFkZCA9IHR1cGxlZCgoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIgPT4geCArIHkpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGFkZChbMSwgMl0pLCAzKVxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHVwbGVkKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfTtcbn1cbi8qKlxuICogSW52ZXJzZSBmdW5jdGlvbiBvZiBgdHVwbGVkYFxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW50dXBsZWQoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlKGEsIGFiLCBiYywgY2QsIGRlLCBlZiwgZmcsIGdoLCBoaSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGFiKGEpO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gYmMoYWIoYSkpO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIoYSkpKTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGRlKGNkKGJjKGFiKGEpKSkpO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gZWYoZGUoY2QoYmMoYWIoYSkpKSkpO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGdoKGZnKGVmKGRlKGNkKGJjKGFiKGEpKSkpKSkpO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKSkpO1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXQgPSBhcmd1bWVudHNbaV0ocmV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFR5cGUgaG9sZSBzaW11bGF0aW9uXG4gKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgaG9sZSA9IGFic3VyZDtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFNLID0gZnVuY3Rpb24gKF8sIGIpIHsgcmV0dXJuIGI7IH07XG4vKipcbiAqIFVzZSBgUHJlZGljYXRlYCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gbm90KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIXByZWRpY2F0ZShhKTsgfTtcbn1cbi8qKlxuICogVXNlIGBFbmRvbW9ycGhpc21gIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4xMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEVuZG9tb3JwaGlzbU1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmxvdyhmaXJzdCwgc2Vjb25kKTsgfSxcbiAgICBlbXB0eTogaWRlbnRpdHlcbn0pOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBkdWFsID0gZnVuY3Rpb24gKGFyaXR5LCBib2R5KSB7XG4gICAgdmFyIGlzRGF0YUZpcnN0ID0gdHlwZW9mIGFyaXR5ID09PSAnbnVtYmVyJyA/IGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBhcmdzLmxlbmd0aCA+PSBhcml0eTsgfSA6IGFyaXR5O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpO1xuICAgICAgICBpZiAoaXNEYXRhRmlyc3QoYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGJvZHkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmKSB7IHJldHVybiBib2R5LmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbc2VsZl0sIGFyZ3MsIGZhbHNlKSk7IH07XG4gICAgfTtcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldEJvb2xlYW5BbGdlYnJhID0gZnVuY3Rpb24gKEIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgbWVldDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBCLm1lZXQoeChhKSwgeShhKSk7IH07IH0sXG4gICAgICAgIGpvaW46IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5qb2luKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBCLnplcm87IH0sXG4gICAgICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gQi5vbmU7IH0sXG4gICAgICAgIGltcGxpZXM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5pbXBsaWVzKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICBub3Q6IGZ1bmN0aW9uICh4KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5ub3QoeChhKSk7IH07IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIFVuYXJ5IGZ1bmN0aW9ucyBmb3JtIGEgc2VtaWdyb3VwIGFzIGxvbmcgYXMgeW91IGNhbiBwcm92aWRlIGEgc2VtaWdyb3VwIGZvciB0aGUgY29kb21haW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFByZWRpY2F0ZSwgZ2V0U2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBTMSA9IGdldFNlbWlncm91cChCLlNlbWlncm91cEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgUzIgPSBnZXRTZW1pZ3JvdXAoQi5TZW1pZ3JvdXBBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBTLmNvbmNhdChmKGEpLCBnKGEpKTsgfTsgfVxuICAgIH0pOyB9O1xufTtcbi8qKlxuICogVW5hcnkgZnVuY3Rpb25zIGZvcm0gYSBtb25vaWQgYXMgbG9uZyBhcyB5b3UgY2FuIHByb3ZpZGUgYSBtb25vaWQgZm9yIHRoZSBjb2RvbWFpbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUHJlZGljYXRlIH0gZnJvbSAnZnAtdHMvUHJlZGljYXRlJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBNMSA9IGdldE1vbm9pZChCLk1vbm9pZEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgTTIgPSBnZXRNb25vaWQoQi5Nb25vaWRBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGdldFNlbWlncm91cE0gPSBnZXRTZW1pZ3JvdXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwTSgpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE0uZW1wdHk7IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pcmluZyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGFkZDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBTLmFkZChmKHgpLCBnKHgpKTsgfTsgfSxcbiAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBTLnplcm87IH0sXG4gICAgbXVsOiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFMubXVsKGYoeCksIGcoeCkpOyB9OyB9LFxuICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gUy5vbmU7IH1cbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmluZyA9IGZ1bmN0aW9uIChSKSB7XG4gICAgdmFyIFMgPSBnZXRTZW1pcmluZyhSKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IFMuYWRkLFxuICAgICAgICBtdWw6IFMubXVsLFxuICAgICAgICBvbmU6IFMub25lLFxuICAgICAgICB6ZXJvOiBTLnplcm8sXG4gICAgICAgIHN1YjogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBSLnN1YihmKHgpLCBnKHgpKTsgfTsgfVxuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFwcGx5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoYSkge1xuICAgIHJldHVybiBhO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVDb2VyY2UgPSBpZGVudGl0eTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdGFudChhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH07XG59XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdHJ1ZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RUcnVlID0gLyojX19QVVJFX18qLyBjb25zdGFudCh0cnVlKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGBmYWxzZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RGYWxzZSA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQoZmFsc2UpO1xuLyoqXG4gKiBBIHRodW5rIHRoYXQgcmV0dXJucyBhbHdheXMgYG51bGxgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnN0TnVsbCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQobnVsbCk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFVuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGB2b2lkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFZvaWQgPSBjb25zdFVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBmbGlwKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmKGFyZ3NbMV0sIGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKShhcmdzWzBdKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb3coYWIsIGJjLCBjZCwgZGUsIGVmLCBmZywgZ2gsIGhpLCBpaikge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYWI7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpKGdoKGZnKGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWooaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR1cGxlKCkge1xuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdFtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNyZW1lbnQobikge1xuICAgIHJldHVybiBuICsgMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNyZW1lbnQobikge1xuICAgIHJldHVybiBuIC0gMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnN1cmQoXykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FsbGVkIGBhYnN1cmRgIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1bmNhbGxhYmxlJyk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB0dXBsZWQgdmVyc2lvbiBvZiB0aGlzIGZ1bmN0aW9uOiBpbnN0ZWFkIG9mIGBuYCBhcmd1bWVudHMsIGl0IGFjY2VwdHMgYSBzaW5nbGUgdHVwbGUgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlZCB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGFkZCA9IHR1cGxlZCgoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIgPT4geCArIHkpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGFkZChbMSwgMl0pLCAzKVxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHVwbGVkKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfTtcbn1cbi8qKlxuICogSW52ZXJzZSBmdW5jdGlvbiBvZiBgdHVwbGVkYFxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW50dXBsZWQoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlKGEsIGFiLCBiYywgY2QsIGRlLCBlZiwgZmcsIGdoLCBoaSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGFiKGEpO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gYmMoYWIoYSkpO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIoYSkpKTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGRlKGNkKGJjKGFiKGEpKSkpO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gZWYoZGUoY2QoYmMoYWIoYSkpKSkpO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGdoKGZnKGVmKGRlKGNkKGJjKGFiKGEpKSkpKSkpO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKSkpO1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXQgPSBhcmd1bWVudHNbaV0ocmV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFR5cGUgaG9sZSBzaW11bGF0aW9uXG4gKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgaG9sZSA9IGFic3VyZDtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFNLID0gZnVuY3Rpb24gKF8sIGIpIHsgcmV0dXJuIGI7IH07XG4vKipcbiAqIFVzZSBgUHJlZGljYXRlYCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gbm90KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIXByZWRpY2F0ZShhKTsgfTtcbn1cbi8qKlxuICogVXNlIGBFbmRvbW9ycGhpc21gIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4xMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEVuZG9tb3JwaGlzbU1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmxvdyhmaXJzdCwgc2Vjb25kKTsgfSxcbiAgICBlbXB0eTogaWRlbnRpdHlcbn0pOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBkdWFsID0gZnVuY3Rpb24gKGFyaXR5LCBib2R5KSB7XG4gICAgdmFyIGlzRGF0YUZpcnN0ID0gdHlwZW9mIGFyaXR5ID09PSAnbnVtYmVyJyA/IGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBhcmdzLmxlbmd0aCA+PSBhcml0eTsgfSA6IGFyaXR5O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpO1xuICAgICAgICBpZiAoaXNEYXRhRmlyc3QoYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGJvZHkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmKSB7IHJldHVybiBib2R5LmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbc2VsZl0sIGFyZ3MsIGZhbHNlKSk7IH07XG4gICAgfTtcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldEJvb2xlYW5BbGdlYnJhID0gZnVuY3Rpb24gKEIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgbWVldDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBCLm1lZXQoeChhKSwgeShhKSk7IH07IH0sXG4gICAgICAgIGpvaW46IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5qb2luKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBCLnplcm87IH0sXG4gICAgICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gQi5vbmU7IH0sXG4gICAgICAgIGltcGxpZXM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5pbXBsaWVzKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICBub3Q6IGZ1bmN0aW9uICh4KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5ub3QoeChhKSk7IH07IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIFVuYXJ5IGZ1bmN0aW9ucyBmb3JtIGEgc2VtaWdyb3VwIGFzIGxvbmcgYXMgeW91IGNhbiBwcm92aWRlIGEgc2VtaWdyb3VwIGZvciB0aGUgY29kb21haW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFByZWRpY2F0ZSwgZ2V0U2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBTMSA9IGdldFNlbWlncm91cChCLlNlbWlncm91cEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgUzIgPSBnZXRTZW1pZ3JvdXAoQi5TZW1pZ3JvdXBBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBTLmNvbmNhdChmKGEpLCBnKGEpKTsgfTsgfVxuICAgIH0pOyB9O1xufTtcbi8qKlxuICogVW5hcnkgZnVuY3Rpb25zIGZvcm0gYSBtb25vaWQgYXMgbG9uZyBhcyB5b3UgY2FuIHByb3ZpZGUgYSBtb25vaWQgZm9yIHRoZSBjb2RvbWFpbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUHJlZGljYXRlIH0gZnJvbSAnZnAtdHMvUHJlZGljYXRlJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBNMSA9IGdldE1vbm9pZChCLk1vbm9pZEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgTTIgPSBnZXRNb25vaWQoQi5Nb25vaWRBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGdldFNlbWlncm91cE0gPSBnZXRTZW1pZ3JvdXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwTSgpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE0uZW1wdHk7IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pcmluZyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGFkZDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBTLmFkZChmKHgpLCBnKHgpKTsgfTsgfSxcbiAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBTLnplcm87IH0sXG4gICAgbXVsOiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFMubXVsKGYoeCksIGcoeCkpOyB9OyB9LFxuICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gUy5vbmU7IH1cbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmluZyA9IGZ1bmN0aW9uIChSKSB7XG4gICAgdmFyIFMgPSBnZXRTZW1pcmluZyhSKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IFMuYWRkLFxuICAgICAgICBtdWw6IFMubXVsLFxuICAgICAgICBvbmU6IFMub25lLFxuICAgICAgICB6ZXJvOiBTLnplcm8sXG4gICAgICAgIHN1YjogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBSLnN1YihmKHgpLCBnKHgpKTsgfTsgfVxuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFwcGx5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoYSkge1xuICAgIHJldHVybiBhO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVDb2VyY2UgPSBpZGVudGl0eTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdGFudChhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH07XG59XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdHJ1ZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RUcnVlID0gLyojX19QVVJFX18qLyBjb25zdGFudCh0cnVlKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGBmYWxzZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RGYWxzZSA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQoZmFsc2UpO1xuLyoqXG4gKiBBIHRodW5rIHRoYXQgcmV0dXJucyBhbHdheXMgYG51bGxgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnN0TnVsbCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQobnVsbCk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFVuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGB2b2lkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFZvaWQgPSBjb25zdFVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBmbGlwKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmKGFyZ3NbMV0sIGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKShhcmdzWzBdKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb3coYWIsIGJjLCBjZCwgZGUsIGVmLCBmZywgZ2gsIGhpLCBpaikge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYWI7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpKGdoKGZnKGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWooaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR1cGxlKCkge1xuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdFtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNyZW1lbnQobikge1xuICAgIHJldHVybiBuICsgMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNyZW1lbnQobikge1xuICAgIHJldHVybiBuIC0gMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnN1cmQoXykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FsbGVkIGBhYnN1cmRgIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1bmNhbGxhYmxlJyk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB0dXBsZWQgdmVyc2lvbiBvZiB0aGlzIGZ1bmN0aW9uOiBpbnN0ZWFkIG9mIGBuYCBhcmd1bWVudHMsIGl0IGFjY2VwdHMgYSBzaW5nbGUgdHVwbGUgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlZCB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGFkZCA9IHR1cGxlZCgoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIgPT4geCArIHkpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGFkZChbMSwgMl0pLCAzKVxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHVwbGVkKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfTtcbn1cbi8qKlxuICogSW52ZXJzZSBmdW5jdGlvbiBvZiBgdHVwbGVkYFxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW50dXBsZWQoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlKGEsIGFiLCBiYywgY2QsIGRlLCBlZiwgZmcsIGdoLCBoaSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGFiKGEpO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gYmMoYWIoYSkpO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIoYSkpKTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGRlKGNkKGJjKGFiKGEpKSkpO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gZWYoZGUoY2QoYmMoYWIoYSkpKSkpO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGdoKGZnKGVmKGRlKGNkKGJjKGFiKGEpKSkpKSkpO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKSkpO1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXQgPSBhcmd1bWVudHNbaV0ocmV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFR5cGUgaG9sZSBzaW11bGF0aW9uXG4gKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgaG9sZSA9IGFic3VyZDtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFNLID0gZnVuY3Rpb24gKF8sIGIpIHsgcmV0dXJuIGI7IH07XG4vKipcbiAqIFVzZSBgUHJlZGljYXRlYCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gbm90KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIXByZWRpY2F0ZShhKTsgfTtcbn1cbi8qKlxuICogVXNlIGBFbmRvbW9ycGhpc21gIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4xMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEVuZG9tb3JwaGlzbU1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmxvdyhmaXJzdCwgc2Vjb25kKTsgfSxcbiAgICBlbXB0eTogaWRlbnRpdHlcbn0pOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBkdWFsID0gZnVuY3Rpb24gKGFyaXR5LCBib2R5KSB7XG4gICAgdmFyIGlzRGF0YUZpcnN0ID0gdHlwZW9mIGFyaXR5ID09PSAnbnVtYmVyJyA/IGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBhcmdzLmxlbmd0aCA+PSBhcml0eTsgfSA6IGFyaXR5O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpO1xuICAgICAgICBpZiAoaXNEYXRhRmlyc3QoYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGJvZHkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmKSB7IHJldHVybiBib2R5LmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbc2VsZl0sIGFyZ3MsIGZhbHNlKSk7IH07XG4gICAgfTtcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldEJvb2xlYW5BbGdlYnJhID0gZnVuY3Rpb24gKEIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgbWVldDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBCLm1lZXQoeChhKSwgeShhKSk7IH07IH0sXG4gICAgICAgIGpvaW46IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5qb2luKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBCLnplcm87IH0sXG4gICAgICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gQi5vbmU7IH0sXG4gICAgICAgIGltcGxpZXM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5pbXBsaWVzKHgoYSksIHkoYSkpOyB9OyB9LFxuICAgICAgICBub3Q6IGZ1bmN0aW9uICh4KSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQi5ub3QoeChhKSk7IH07IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIFVuYXJ5IGZ1bmN0aW9ucyBmb3JtIGEgc2VtaWdyb3VwIGFzIGxvbmcgYXMgeW91IGNhbiBwcm92aWRlIGEgc2VtaWdyb3VwIGZvciB0aGUgY29kb21haW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFByZWRpY2F0ZSwgZ2V0U2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBTMSA9IGdldFNlbWlncm91cChCLlNlbWlncm91cEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgUzIgPSBnZXRTZW1pZ3JvdXAoQi5TZW1pZ3JvdXBBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBTLmNvbmNhdChmKGEpLCBnKGEpKTsgfTsgfVxuICAgIH0pOyB9O1xufTtcbi8qKlxuICogVW5hcnkgZnVuY3Rpb25zIGZvcm0gYSBtb25vaWQgYXMgbG9uZyBhcyB5b3UgY2FuIHByb3ZpZGUgYSBtb25vaWQgZm9yIHRoZSBjb2RvbWFpbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUHJlZGljYXRlIH0gZnJvbSAnZnAtdHMvUHJlZGljYXRlJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKlxuICogY29uc3QgZjogUHJlZGljYXRlPG51bWJlcj4gPSAobikgPT4gbiA8PSAyXG4gKiBjb25zdCBnOiBQcmVkaWNhdGU8bnVtYmVyPiA9IChuKSA9PiBuID49IDBcbiAqXG4gKiBjb25zdCBNMSA9IGdldE1vbm9pZChCLk1vbm9pZEFsbCk8bnVtYmVyPigpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoZiwgZykoMSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdChmLCBnKSgzKSwgZmFsc2UpXG4gKlxuICogY29uc3QgTTIgPSBnZXRNb25vaWQoQi5Nb25vaWRBbnkpPG51bWJlcj4oKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KGYsIGcpKDEpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMi5jb25jYXQoZiwgZykoMyksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGdldFNlbWlncm91cE0gPSBnZXRTZW1pZ3JvdXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwTSgpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE0uZW1wdHk7IH1cbiAgICB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pcmluZyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGFkZDogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBTLmFkZChmKHgpLCBnKHgpKTsgfTsgfSxcbiAgICB6ZXJvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBTLnplcm87IH0sXG4gICAgbXVsOiBmdW5jdGlvbiAoZiwgZykgeyByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFMubXVsKGYoeCksIGcoeCkpOyB9OyB9LFxuICAgIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gUy5vbmU7IH1cbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmluZyA9IGZ1bmN0aW9uIChSKSB7XG4gICAgdmFyIFMgPSBnZXRTZW1pcmluZyhSKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IFMuYWRkLFxuICAgICAgICBtdWw6IFMubXVsLFxuICAgICAgICBvbmU6IFMub25lLFxuICAgICAgICB6ZXJvOiBTLnplcm8sXG4gICAgICAgIHN1YjogZnVuY3Rpb24gKGYsIGcpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBSLnN1YihmKHgpLCBnKHgpKTsgfTsgfVxuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFwcGx5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoYSkge1xuICAgIHJldHVybiBhO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVDb2VyY2UgPSBpZGVudGl0eTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdGFudChhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH07XG59XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdHJ1ZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RUcnVlID0gLyojX19QVVJFX18qLyBjb25zdGFudCh0cnVlKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGBmYWxzZWAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uc3RGYWxzZSA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQoZmFsc2UpO1xuLyoqXG4gKiBBIHRodW5rIHRoYXQgcmV0dXJucyBhbHdheXMgYG51bGxgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnN0TnVsbCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQobnVsbCk7XG4vKipcbiAqIEEgdGh1bmsgdGhhdCByZXR1cm5zIGFsd2F5cyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFVuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogQSB0aHVuayB0aGF0IHJldHVybnMgYWx3YXlzIGB2b2lkYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdFZvaWQgPSBjb25zdFVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBmbGlwKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmKGFyZ3NbMV0sIGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKShhcmdzWzBdKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb3coYWIsIGJjLCBjZCwgZGUsIGVmLCBmZywgZ2gsIGhpLCBpaikge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYWI7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpKGdoKGZnKGVmKGRlKGNkKGJjKGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWooaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkpKSkpKSkpO1xuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR1cGxlKCkge1xuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdFtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNyZW1lbnQobikge1xuICAgIHJldHVybiBuICsgMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNyZW1lbnQobikge1xuICAgIHJldHVybiBuIC0gMTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnN1cmQoXykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FsbGVkIGBhYnN1cmRgIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1bmNhbGxhYmxlJyk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB0dXBsZWQgdmVyc2lvbiBvZiB0aGlzIGZ1bmN0aW9uOiBpbnN0ZWFkIG9mIGBuYCBhcmd1bWVudHMsIGl0IGFjY2VwdHMgYSBzaW5nbGUgdHVwbGUgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlZCB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGFkZCA9IHR1cGxlZCgoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIgPT4geCArIHkpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGFkZChbMSwgMl0pLCAzKVxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHVwbGVkKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfTtcbn1cbi8qKlxuICogSW52ZXJzZSBmdW5jdGlvbiBvZiBgdHVwbGVkYFxuICpcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW50dXBsZWQoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGYoYSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlKGEsIGFiLCBiYywgY2QsIGRlLCBlZiwgZmcsIGdoLCBoaSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGFiKGEpO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gYmMoYWIoYSkpO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gY2QoYmMoYWIoYSkpKTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGRlKGNkKGJjKGFiKGEpKSkpO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gZWYoZGUoY2QoYmMoYWIoYSkpKSkpO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGdoKGZnKGVmKGRlKGNkKGJjKGFiKGEpKSkpKSkpO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gaGkoZ2goZmcoZWYoZGUoY2QoYmMoYWIoYSkpKSkpKSkpO1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXQgPSBhcmd1bWVudHNbaV0ocmV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFR5cGUgaG9sZSBzaW11bGF0aW9uXG4gKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgaG9sZSA9IGFic3VyZDtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFNLID0gZnVuY3Rpb24gKF8sIGIpIHsgcmV0dXJuIGI7IH07XG4vKipcbiAqIFVzZSBgUHJlZGljYXRlYCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gbm90KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIXByZWRpY2F0ZShhKTsgfTtcbn1cbi8qKlxuICogVXNlIGBFbmRvbW9ycGhpc21gIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4xMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEVuZG9tb3JwaGlzbU1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmxvdyhmaXJzdCwgc2Vjb25kKTsgfSxcbiAgICBlbXB0eTogaWRlbnRpdHlcbn0pOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBkdWFsID0gZnVuY3Rpb24gKGFyaXR5LCBib2R5KSB7XG4gICAgdmFyIGlzRGF0YUZpcnN0ID0gdHlwZW9mIGFyaXR5ID09PSAnbnVtYmVyJyA/IGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBhcmdzLmxlbmd0aCA+PSBhcml0eTsgfSA6IGFyaXR5O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpO1xuICAgICAgICBpZiAoaXNEYXRhRmlyc3QoYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGJvZHkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmKSB7IHJldHVybiBib2R5LmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbc2VsZl0sIGFyZ3MsIGZhbHNlKSk7IH07XG4gICAgfTtcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBkdWFsIH0gZnJvbSAnLi9mdW5jdGlvbic7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBPcHRpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgaXNOb25lID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmYS5fdGFnID09PSAnTm9uZSc7IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGlzU29tZSA9IGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZmEuX3RhZyA9PT0gJ1NvbWUnOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBub25lID0geyBfdGFnOiAnTm9uZScgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgc29tZSA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoeyBfdGFnOiAnU29tZScsIHZhbHVlOiBhIH0pOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRWl0aGVyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGlzTGVmdCA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gbWEuX3RhZyA9PT0gJ0xlZnQnOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBpc1JpZ2h0ID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBtYS5fdGFnID09PSAnUmlnaHQnOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBsZWZ0ID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuICh7IF90YWc6ICdMZWZ0JywgbGVmdDogZSB9KTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgcmlnaHQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKHsgX3RhZzogJ1JpZ2h0JywgcmlnaHQ6IGEgfSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBSZWFkb25seU5vbkVtcHR5QXJyYXlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgc2luZ2xldG9uID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIFthXTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgaXNOb25FbXB0eSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMubGVuZ3RoID4gMDsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgaGVhZCA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXNbMF07IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIHRhaWwgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzLnNsaWNlKDEpOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZW1wdHlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgZW1wdHlSZWFkb25seUFycmF5ID0gW107XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGVtcHR5UmVjb3JkID0ge307XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBSZWNvcmRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIE5vbkVtcHR5QXJyYXlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgZnJvbVJlYWRvbmx5Tm9uRW1wdHlBcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gX19zcHJlYWRBcnJheShbYXNbMF1dLCBhcy5zbGljZSgxKSwgdHJ1ZSk7IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGxpZnROdWxsYWJsZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmLCBvbk51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbyA9IGYuYXBwbHkodm9pZCAwLCBhKTtcbiAgICAgICAgICAgIHJldHVybiBGLmZyb21FaXRoZXIobyA9PSBudWxsID8gbGVmdChvbk51bGxhYmxlLmFwcGx5KHZvaWQgMCwgYSkpIDogcmlnaHQobykpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBsaWZ0T3B0aW9uID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYsIG9uTm9uZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYVtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG8gPSBmLmFwcGx5KHZvaWQgMCwgYSk7XG4gICAgICAgICAgICByZXR1cm4gRi5mcm9tRWl0aGVyKGlzTm9uZShvKSA/IGxlZnQob25Ob25lLmFwcGx5KHZvaWQgMCwgYSkpIDogcmlnaHQoby52YWx1ZSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBmbGF0TWFwTnVsbGFibGUgPSBmdW5jdGlvbiAoRiwgTSkge1xuICAgIC8qI19fUFVSRV9fKi8gcmV0dXJuIGR1YWwoMywgZnVuY3Rpb24gKHNlbGYsIGYsIG9uTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIE0uZmxhdE1hcChzZWxmLCBsaWZ0TnVsbGFibGUoRikoZiwgb25OdWxsYWJsZSkpO1xuICAgIH0pO1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgZmxhdE1hcE9wdGlvbiA9IGZ1bmN0aW9uIChGLCBNKSB7XG4gICAgLyojX19QVVJFX18qLyByZXR1cm4gZHVhbCgzLCBmdW5jdGlvbiAoc2VsZiwgZiwgb25Ob25lKSB7IHJldHVybiBNLmZsYXRNYXAoc2VsZiwgbGlmdE9wdGlvbihGKShmLCBvbk5vbmUpKTsgfSk7XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBmbGF0TWFwRWl0aGVyID0gZnVuY3Rpb24gKEYsIE0pIHtcbiAgICAvKiNfX1BVUkVfXyovIHJldHVybiBkdWFsKDIsIGZ1bmN0aW9uIChzZWxmLCBmKSB7XG4gICAgICAgIHJldHVybiBNLmZsYXRNYXAoc2VsZiwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIEYuZnJvbUVpdGhlcihmKGEpKTsgfSk7XG4gICAgfSk7XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBmbGF0TWFwSU8gPSBmdW5jdGlvbiAoRiwgTSkge1xuICAgIC8qI19fUFVSRV9fKi8gcmV0dXJuIGR1YWwoMiwgZnVuY3Rpb24gKHNlbGYsIGYpIHtcbiAgICAgICAgcmV0dXJuIE0uZmxhdE1hcChzZWxmLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gRi5mcm9tSU8oZihhKSk7IH0pO1xuICAgIH0pO1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgZmxhdE1hcFRhc2sgPSBmdW5jdGlvbiAoRiwgTSkge1xuICAgIC8qI19fUFVSRV9fKi8gcmV0dXJuIGR1YWwoMiwgZnVuY3Rpb24gKHNlbGYsIGYpIHtcbiAgICAgICAgcmV0dXJuIE0uZmxhdE1hcChzZWxmLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gRi5mcm9tVGFzayhmKGEpKTsgfSk7XG4gICAgfSk7XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBmbGF0TWFwUmVhZGVyID0gZnVuY3Rpb24gKEYsIE0pIHtcbiAgICAvKiNfX1BVUkVfXyovIHJldHVybiBkdWFsKDIsIGZ1bmN0aW9uIChzZWxmLCBmKSB7XG4gICAgICAgIHJldHVybiBNLmZsYXRNYXAoc2VsZiwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIEYuZnJvbVJlYWRlcihmKGEpKTsgfSk7XG4gICAgfSk7XG59O1xuIiwKICAidmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuaW1wb3J0IHsgZHVhbCB9IGZyb20gJy4vZnVuY3Rpb24nO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gT3B0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGlzTm9uZSA9IGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZmEuX3RhZyA9PT0gJ05vbmUnOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBpc1NvbWUgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZhLl90YWcgPT09ICdTb21lJzsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgbm9uZSA9IHsgX3RhZzogJ05vbmUnIH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIHNvbWUgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKHsgX3RhZzogJ1NvbWUnLCB2YWx1ZTogYSB9KTsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEVpdGhlclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBpc0xlZnQgPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIG1hLl90YWcgPT09ICdMZWZ0JzsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgaXNSaWdodCA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gbWEuX3RhZyA9PT0gJ1JpZ2h0JzsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgbGVmdCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiAoeyBfdGFnOiAnTGVmdCcsIGxlZnQ6IGUgfSk7IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIHJpZ2h0ID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuICh7IF90YWc6ICdSaWdodCcsIHJpZ2h0OiBhIH0pOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gUmVhZG9ubHlOb25FbXB0eUFycmF5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIHNpbmdsZXRvbiA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBbYV07IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzLmxlbmd0aCA+IDA7IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGhlYWQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzWzBdOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciB0YWlsID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgxKTsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGVtcHR5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGVtcHR5UmVhZG9ubHlBcnJheSA9IFtdO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBlbXB0eVJlY29yZCA9IHt9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gUmVjb3JkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBOb25FbXB0eUFycmF5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2FzWzBdXSwgYXMuc2xpY2UoMSksIHRydWUpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBsaWZ0TnVsbGFibGUgPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZiwgb25OdWxsYWJsZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYVtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG8gPSBmLmFwcGx5KHZvaWQgMCwgYSk7XG4gICAgICAgICAgICByZXR1cm4gRi5mcm9tRWl0aGVyKG8gPT0gbnVsbCA/IGxlZnQob25OdWxsYWJsZS5hcHBseSh2b2lkIDAsIGEpKSA6IHJpZ2h0KG8pKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgbGlmdE9wdGlvbiA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmLCBvbk5vbmUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvID0gZi5hcHBseSh2b2lkIDAsIGEpO1xuICAgICAgICAgICAgcmV0dXJuIEYuZnJvbUVpdGhlcihpc05vbmUobykgPyBsZWZ0KG9uTm9uZS5hcHBseSh2b2lkIDAsIGEpKSA6IHJpZ2h0KG8udmFsdWUpKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgZmxhdE1hcE51bGxhYmxlID0gZnVuY3Rpb24gKEYsIE0pIHtcbiAgICAvKiNfX1BVUkVfXyovIHJldHVybiBkdWFsKDMsIGZ1bmN0aW9uIChzZWxmLCBmLCBvbk51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBNLmZsYXRNYXAoc2VsZiwgbGlmdE51bGxhYmxlKEYpKGYsIG9uTnVsbGFibGUpKTtcbiAgICB9KTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGZsYXRNYXBPcHRpb24gPSBmdW5jdGlvbiAoRiwgTSkge1xuICAgIC8qI19fUFVSRV9fKi8gcmV0dXJuIGR1YWwoMywgZnVuY3Rpb24gKHNlbGYsIGYsIG9uTm9uZSkgeyByZXR1cm4gTS5mbGF0TWFwKHNlbGYsIGxpZnRPcHRpb24oRikoZiwgb25Ob25lKSk7IH0pO1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgZmxhdE1hcEVpdGhlciA9IGZ1bmN0aW9uIChGLCBNKSB7XG4gICAgLyojX19QVVJFX18qLyByZXR1cm4gZHVhbCgyLCBmdW5jdGlvbiAoc2VsZiwgZikge1xuICAgICAgICByZXR1cm4gTS5mbGF0TWFwKHNlbGYsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLmZyb21FaXRoZXIoZihhKSk7IH0pO1xuICAgIH0pO1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgZmxhdE1hcElPID0gZnVuY3Rpb24gKEYsIE0pIHtcbiAgICAvKiNfX1BVUkVfXyovIHJldHVybiBkdWFsKDIsIGZ1bmN0aW9uIChzZWxmLCBmKSB7XG4gICAgICAgIHJldHVybiBNLmZsYXRNYXAoc2VsZiwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIEYuZnJvbUlPKGYoYSkpOyB9KTtcbiAgICB9KTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGZsYXRNYXBUYXNrID0gZnVuY3Rpb24gKEYsIE0pIHtcbiAgICAvKiNfX1BVUkVfXyovIHJldHVybiBkdWFsKDIsIGZ1bmN0aW9uIChzZWxmLCBmKSB7XG4gICAgICAgIHJldHVybiBNLmZsYXRNYXAoc2VsZiwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIEYuZnJvbVRhc2soZihhKSk7IH0pO1xuICAgIH0pO1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgZmxhdE1hcFJlYWRlciA9IGZ1bmN0aW9uIChGLCBNKSB7XG4gICAgLyojX19QVVJFX18qLyByZXR1cm4gZHVhbCgyLCBmdW5jdGlvbiAoc2VsZiwgZikge1xuICAgICAgICByZXR1cm4gTS5mbGF0TWFwKHNlbGYsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLmZyb21SZWFkZXIoZihhKSk7IH0pO1xuICAgIH0pO1xufTtcbiIsCiAgInZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufTtcbmltcG9ydCB7IGR1YWwgfSBmcm9tICcuL2Z1bmN0aW9uJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIE9wdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBpc05vbmUgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZhLl90YWcgPT09ICdOb25lJzsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgaXNTb21lID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmYS5fdGFnID09PSAnU29tZSc7IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIG5vbmUgPSB7IF90YWc6ICdOb25lJyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBzb21lID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuICh7IF90YWc6ICdTb21lJywgdmFsdWU6IGEgfSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBFaXRoZXJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgaXNMZWZ0ID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBtYS5fdGFnID09PSAnTGVmdCc7IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGlzUmlnaHQgPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIG1hLl90YWcgPT09ICdSaWdodCc7IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGxlZnQgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gKHsgX3RhZzogJ0xlZnQnLCBsZWZ0OiBlIH0pOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciByaWdodCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoeyBfdGFnOiAnUmlnaHQnLCByaWdodDogYSB9KTsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFJlYWRvbmx5Tm9uRW1wdHlBcnJheVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBzaW5nbGV0b24gPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gW2FdOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBpc05vbkVtcHR5ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5sZW5ndGggPiAwOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBoZWFkID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1swXTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgdGFpbCA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMuc2xpY2UoMSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBlbXB0eVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBlbXB0eVJlYWRvbmx5QXJyYXkgPSBbXTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgZW1wdHlSZWNvcmQgPSB7fTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFJlY29yZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gTm9uRW1wdHlBcnJheVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBmcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBfX3NwcmVhZEFycmF5KFthc1swXV0sIGFzLnNsaWNlKDEpLCB0cnVlKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgbGlmdE51bGxhYmxlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYsIG9uTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvID0gZi5hcHBseSh2b2lkIDAsIGEpO1xuICAgICAgICAgICAgcmV0dXJuIEYuZnJvbUVpdGhlcihvID09IG51bGwgPyBsZWZ0KG9uTnVsbGFibGUuYXBwbHkodm9pZCAwLCBhKSkgOiByaWdodChvKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGxpZnRPcHRpb24gPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZiwgb25Ob25lKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbyA9IGYuYXBwbHkodm9pZCAwLCBhKTtcbiAgICAgICAgICAgIHJldHVybiBGLmZyb21FaXRoZXIoaXNOb25lKG8pID8gbGVmdChvbk5vbmUuYXBwbHkodm9pZCAwLCBhKSkgOiByaWdodChvLnZhbHVlKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGZsYXRNYXBOdWxsYWJsZSA9IGZ1bmN0aW9uIChGLCBNKSB7XG4gICAgLyojX19QVVJFX18qLyByZXR1cm4gZHVhbCgzLCBmdW5jdGlvbiAoc2VsZiwgZiwgb25OdWxsYWJsZSkge1xuICAgICAgICByZXR1cm4gTS5mbGF0TWFwKHNlbGYsIGxpZnROdWxsYWJsZShGKShmLCBvbk51bGxhYmxlKSk7XG4gICAgfSk7XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBmbGF0TWFwT3B0aW9uID0gZnVuY3Rpb24gKEYsIE0pIHtcbiAgICAvKiNfX1BVUkVfXyovIHJldHVybiBkdWFsKDMsIGZ1bmN0aW9uIChzZWxmLCBmLCBvbk5vbmUpIHsgcmV0dXJuIE0uZmxhdE1hcChzZWxmLCBsaWZ0T3B0aW9uKEYpKGYsIG9uTm9uZSkpOyB9KTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGZsYXRNYXBFaXRoZXIgPSBmdW5jdGlvbiAoRiwgTSkge1xuICAgIC8qI19fUFVSRV9fKi8gcmV0dXJuIGR1YWwoMiwgZnVuY3Rpb24gKHNlbGYsIGYpIHtcbiAgICAgICAgcmV0dXJuIE0uZmxhdE1hcChzZWxmLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gRi5mcm9tRWl0aGVyKGYoYSkpOyB9KTtcbiAgICB9KTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGZsYXRNYXBJTyA9IGZ1bmN0aW9uIChGLCBNKSB7XG4gICAgLyojX19QVVJFX18qLyByZXR1cm4gZHVhbCgyLCBmdW5jdGlvbiAoc2VsZiwgZikge1xuICAgICAgICByZXR1cm4gTS5mbGF0TWFwKHNlbGYsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLmZyb21JTyhmKGEpKTsgfSk7XG4gICAgfSk7XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBmbGF0TWFwVGFzayA9IGZ1bmN0aW9uIChGLCBNKSB7XG4gICAgLyojX19QVVJFX18qLyByZXR1cm4gZHVhbCgyLCBmdW5jdGlvbiAoc2VsZiwgZikge1xuICAgICAgICByZXR1cm4gTS5mbGF0TWFwKHNlbGYsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLmZyb21UYXNrKGYoYSkpOyB9KTtcbiAgICB9KTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGZsYXRNYXBSZWFkZXIgPSBmdW5jdGlvbiAoRiwgTSkge1xuICAgIC8qI19fUFVSRV9fKi8gcmV0dXJuIGR1YWwoMiwgZnVuY3Rpb24gKHNlbGYsIGYpIHtcbiAgICAgICAgcmV0dXJuIE0uZmxhdE1hcChzZWxmLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gRi5mcm9tUmVhZGVyKGYoYSkpOyB9KTtcbiAgICB9KTtcbn07XG4iLAogICIvKipcbiAqIFRoZSBgQXBwbHlgIGNsYXNzIHByb3ZpZGVzIHRoZSBgYXBgIHdoaWNoIGlzIHVzZWQgdG8gYXBwbHkgYSBmdW5jdGlvbiB0byBhbiBhcmd1bWVudCB1bmRlciBhIHR5cGUgY29uc3RydWN0b3IuXG4gKlxuICogYEFwcGx5YCBjYW4gYmUgdXNlZCB0byBsaWZ0IGZ1bmN0aW9ucyBvZiB0d28gb3IgbW9yZSBhcmd1bWVudHMgdG8gd29yayBvbiB2YWx1ZXMgd3JhcHBlZCB3aXRoIHRoZSB0eXBlIGNvbnN0cnVjdG9yXG4gKiBgZmAuXG4gKlxuICogSW5zdGFuY2VzIG11c3Qgc2F0aXNmeSB0aGUgZm9sbG93aW5nIGxhdyBpbiBhZGRpdGlvbiB0byB0aGUgYEZ1bmN0b3JgIGxhd3M6XG4gKlxuICogMS4gQXNzb2NpYXRpdmUgY29tcG9zaXRpb246IGBGLmFwKEYuYXAoRi5tYXAoZmJjLCBiYyA9PiBhYiA9PiBhID0+IGJjKGFiKGEpKSksIGZhYiksIGZhKSA8LT4gRi5hcChmYmMsIEYuYXAoZmFiLCBmYSkpYFxuICpcbiAqIEZvcm1hbGx5LCBgQXBwbHlgIHJlcHJlc2VudHMgYSBzdHJvbmcgbGF4IHNlbWktbW9ub2lkYWwgZW5kb2Z1bmN0b3IuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE8gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGYgPSAoYTogc3RyaW5nKSA9PiAoYjogbnVtYmVyKSA9PiAoYzogYm9vbGVhbikgPT4gYSArIFN0cmluZyhiKSArIFN0cmluZyhjKVxuICogY29uc3QgZmE6IE8uT3B0aW9uPHN0cmluZz4gPSBPLnNvbWUoJ3MnKVxuICogY29uc3QgZmI6IE8uT3B0aW9uPG51bWJlcj4gPSBPLnNvbWUoMSlcbiAqIGNvbnN0IGZjOiBPLk9wdGlvbjxib29sZWFuPiA9IE8uc29tZSh0cnVlKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgLy8gbGlmdCBhIGZ1bmN0aW9uXG4gKiAgICAgTy5zb21lKGYpLFxuICogICAgIC8vIGFwcGx5IHRoZSBmaXJzdCBhcmd1bWVudFxuICogICAgIE8uYXAoZmEpLFxuICogICAgIC8vIGFwcGx5IHRoZSBzZWNvbmQgYXJndW1lbnRcbiAqICAgICBPLmFwKGZiKSxcbiAqICAgICAvLyBhcHBseSB0aGUgdGhpcmQgYXJndW1lbnRcbiAqICAgICBPLmFwKGZjKVxuICogICApLFxuICogICBPLnNvbWUoJ3MxdHJ1ZScpXG4gKiApXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmltcG9ydCB7IHR1cGxlIH0gZnJvbSAnLi9mdW5jdGlvbic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuZXhwb3J0IGZ1bmN0aW9uIGFwKEYsIEcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmFiKSB7XG4gICAgICAgICAgICByZXR1cm4gRi5hcChGLm1hcChmYWIsIGZ1bmN0aW9uIChnYWIpIHsgcmV0dXJuIGZ1bmN0aW9uIChnYSkgeyByZXR1cm4gRy5hcChnYWIsIGdhKTsgfTsgfSksIGZhKTtcbiAgICAgICAgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFwRmlyc3QoQSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7IHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgcmV0dXJuIEEuYXAoQS5tYXAoZmlyc3QsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9OyB9KSwgc2Vjb25kKTtcbiAgICB9OyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFwU2Vjb25kKEEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICByZXR1cm4gQS5hcChBLm1hcChmaXJzdCwgZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGI7IH07IH0pLCBzZWNvbmQpO1xuICAgICAgICB9O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gYXBTKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUsIGZiKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgICAgIHJldHVybiBGLmFwKEYubWFwKGZhLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGEsIChfYSA9IHt9LCBfYVtuYW1lXSA9IGIsIF9hKSk7XG4gICAgICAgICAgICB9OyB9KSwgZmIpO1xuICAgICAgICB9O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBwbHlTZW1pZ3JvdXAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICAgICAgcmV0dXJuIEYuYXAoRi5tYXAoZmlyc3QsIGZ1bmN0aW9uICh4KSB7IHJldHVybiBmdW5jdGlvbiAoeSkgeyByZXR1cm4gUy5jb25jYXQoeCwgeSk7IH07IH0pLCBzZWNvbmQpO1xuICAgICAgICB9XG4gICAgfSk7IH07XG59XG5mdW5jdGlvbiBjdXJyaWVkKGYsIG4sIGFjYykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoeCkge1xuICAgICAgICB2YXIgY29tYmluZWQgPSBBcnJheShhY2MubGVuZ3RoICsgMSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWNjLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb21iaW5lZFtpXSA9IGFjY1tpXTtcbiAgICAgICAgfVxuICAgICAgICBjb21iaW5lZFthY2MubGVuZ3RoXSA9IHg7XG4gICAgICAgIHJldHVybiBuID09PSAwID8gZi5hcHBseShudWxsLCBjb21iaW5lZCkgOiBjdXJyaWVkKGYsIG4gLSAxLCBjb21iaW5lZCk7XG4gICAgfTtcbn1cbnZhciB0dXBsZUNvbnN0cnVjdG9ycyA9IHtcbiAgICAxOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gW2FdOyB9LFxuICAgIDI6IGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAoYikgeyByZXR1cm4gW2EsIGJdOyB9OyB9LFxuICAgIDM6IGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAoYikgeyByZXR1cm4gZnVuY3Rpb24gKGMpIHsgcmV0dXJuIFthLCBiLCBjXTsgfTsgfTsgfSxcbiAgICA0OiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGZ1bmN0aW9uIChjKSB7IHJldHVybiBmdW5jdGlvbiAoZCkgeyByZXR1cm4gW2EsIGIsIGMsIGRdOyB9OyB9OyB9OyB9LFxuICAgIDU6IGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAoYikgeyByZXR1cm4gZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGZ1bmN0aW9uIChkKSB7IHJldHVybiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gW2EsIGIsIGMsIGQsIGVdOyB9OyB9OyB9OyB9OyB9XG59O1xuZnVuY3Rpb24gZ2V0VHVwbGVDb25zdHJ1Y3RvcihsZW4pIHtcbiAgICBpZiAoIV8uaGFzLmNhbGwodHVwbGVDb25zdHJ1Y3RvcnMsIGxlbikpIHtcbiAgICAgICAgdHVwbGVDb25zdHJ1Y3RvcnNbbGVuXSA9IGN1cnJpZWQodHVwbGUsIGxlbiAtIDEsIFtdKTtcbiAgICB9XG4gICAgcmV0dXJuIHR1cGxlQ29uc3RydWN0b3JzW2xlbl07XG59XG5leHBvcnQgZnVuY3Rpb24gc2VxdWVuY2VUKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgICAgICAgdmFyIGYgPSBnZXRUdXBsZUNvbnN0cnVjdG9yKGxlbik7XG4gICAgICAgIHZhciBmYXMgPSBGLm1hcChhcmdzWzBdLCBmKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgZmFzID0gRi5hcChmYXMsIGFyZ3NbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYXM7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGdldFJlY29yZENvbnN0cnVjdG9yKGtleXMpIHtcbiAgICB2YXIgbGVuID0ga2V5cy5sZW5ndGg7XG4gICAgc3dpdGNoIChsZW4pIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHJldHVybiAoX2EgPSB7fSwgX2Fba2V5c1swXV0gPSBhLCBfYSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHJldHVybiAoX2EgPSB7fSwgX2Fba2V5c1swXV0gPSBhLCBfYVtrZXlzWzFdXSA9IGIsIF9hKTtcbiAgICAgICAgICAgIH07IH07XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHJldHVybiAoX2EgPSB7fSwgX2Fba2V5c1swXV0gPSBhLCBfYVtrZXlzWzFdXSA9IGIsIF9hW2tleXNbMl1dID0gYywgX2EpO1xuICAgICAgICAgICAgfTsgfTsgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAoYikgeyByZXR1cm4gZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHJldHVybiAoX2EgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgX2Fba2V5c1swXV0gPSBhLFxuICAgICAgICAgICAgICAgICAgICBfYVtrZXlzWzFdXSA9IGIsXG4gICAgICAgICAgICAgICAgICAgIF9hW2tleXNbMl1dID0gYyxcbiAgICAgICAgICAgICAgICAgICAgX2Fba2V5c1szXV0gPSBkLFxuICAgICAgICAgICAgICAgICAgICBfYSk7XG4gICAgICAgICAgICB9OyB9OyB9OyB9O1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7IHJldHVybiBmdW5jdGlvbiAoYykgeyByZXR1cm4gZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHJldHVybiAoX2EgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgX2Fba2V5c1swXV0gPSBhLFxuICAgICAgICAgICAgICAgICAgICBfYVtrZXlzWzFdXSA9IGIsXG4gICAgICAgICAgICAgICAgICAgIF9hW2tleXNbMl1dID0gYyxcbiAgICAgICAgICAgICAgICAgICAgX2Fba2V5c1szXV0gPSBkLFxuICAgICAgICAgICAgICAgICAgICBfYVtrZXlzWzRdXSA9IGUsXG4gICAgICAgICAgICAgICAgICAgIF9hKTtcbiAgICAgICAgICAgIH07IH07IH07IH07IH07XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gY3VycmllZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByID0ge307XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICByW2tleXNbaV1dID0gYXJnc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgICAgICB9LCBsZW4gLSAxLCBbXSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcXVlbmNlUyhGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocik7XG4gICAgICAgIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgdmFyIGYgPSBnZXRSZWNvcmRDb25zdHJ1Y3RvcihrZXlzKTtcbiAgICAgICAgdmFyIGZyID0gRi5tYXAocltrZXlzWzBdXSwgZik7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGZyID0gRi5hcChmciwgcltrZXlzW2ldXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyO1xuICAgIH07XG59XG4iLAogICIvKipcbiAqIEEgYEZ1bmN0b3JgIGlzIGEgdHlwZSBjb25zdHJ1Y3RvciB3aGljaCBzdXBwb3J0cyBhIG1hcHBpbmcgb3BlcmF0aW9uIGBtYXBgLlxuICpcbiAqIGBtYXBgIGNhbiBiZSB1c2VkIHRvIHR1cm4gZnVuY3Rpb25zIGBhIC0+IGJgIGludG8gZnVuY3Rpb25zIGBmIGEgLT4gZiBiYCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzIHVzZSB0aGUgdHlwZVxuICogY29uc3RydWN0b3IgYGZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBJbnN0YW5jZXMgbXVzdCBzYXRpc2Z5IHRoZSBmb2xsb3dpbmcgbGF3czpcbiAqXG4gKiAxLiBJZGVudGl0eTogYEYubWFwKGZhLCBhID0+IGEpIDwtPiBmYWBcbiAqIDIuIENvbXBvc2l0aW9uOiBgRi5tYXAoZmEsIGEgPT4gYmMoYWIoYSkpKSA8LT4gRi5tYXAoRi5tYXAoZmEsIGFiKSwgYmMpYFxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5pbXBvcnQgeyBwaXBlIH0gZnJvbSAnLi9mdW5jdGlvbic7XG5leHBvcnQgZnVuY3Rpb24gbWFwKEYsIEcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5tYXAoZmEsIGZ1bmN0aW9uIChnYSkgeyByZXR1cm4gRy5tYXAoZ2EsIGYpOyB9KTsgfTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmbGFwKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYWIpIHsgcmV0dXJuIEYubWFwKGZhYiwgZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGYoYSk7IH0pOyB9OyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRUbyhGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYubWFwKGZhLCBmdW5jdGlvbiAoYSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSB7fSwgX2FbbmFtZV0gPSBhLCBfYSk7XG4gICAgfSk7IH07IH07XG59XG5mdW5jdGlvbiBsZXRfKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5tYXAoZmEsIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGEsIChfYSA9IHt9LCBfYVtuYW1lXSA9IGYoYSksIF9hKSk7XG4gICAgfSk7IH07IH07XG59XG5leHBvcnQgeyBcbi8qKlxuICogQHNpbmNlIDIuMTMuMFxuICovXG5sZXRfIGFzIGxldCB9O1xuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVuY3RvckNvbXBvc2l0aW9uKEYsIEcpIHtcbiAgICB2YXIgX21hcCA9IG1hcChGLCBHKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBtYXA6IGZ1bmN0aW9uIChmZ2EsIGYpIHsgcmV0dXJuIHBpcGUoZmdhLCBfbWFwKGYpKTsgfVxuICAgIH07XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gYXMoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYikgeyByZXR1cm4gRi5tYXAoc2VsZiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYjsgfSk7IH07XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gYXNVbml0KEYpIHtcbiAgICB2YXIgYXNNID0gYXMoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmKSB7IHJldHVybiBhc00oc2VsZiwgdW5kZWZpbmVkKTsgfTtcbn1cbiIsCiAgIi8qKlxuICogQSBgRnVuY3RvcmAgaXMgYSB0eXBlIGNvbnN0cnVjdG9yIHdoaWNoIHN1cHBvcnRzIGEgbWFwcGluZyBvcGVyYXRpb24gYG1hcGAuXG4gKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYGEgLT4gYmAgaW50byBmdW5jdGlvbnMgYGYgYSAtPiBmIGJgIHdob3NlIGFyZ3VtZW50IGFuZCByZXR1cm4gdHlwZXMgdXNlIHRoZSB0eXBlXG4gKiBjb25zdHJ1Y3RvciBgZmAgdG8gcmVwcmVzZW50IHNvbWUgY29tcHV0YXRpb25hbCBjb250ZXh0LlxuICpcbiAqIEluc3RhbmNlcyBtdXN0IHNhdGlzZnkgdGhlIGZvbGxvd2luZyBsYXdzOlxuICpcbiAqIDEuIElkZW50aXR5OiBgRi5tYXAoZmEsIGEgPT4gYSkgPC0+IGZhYFxuICogMi4gQ29tcG9zaXRpb246IGBGLm1hcChmYSwgYSA9PiBiYyhhYihhKSkpIDwtPiBGLm1hcChGLm1hcChmYSwgYWIpLCBiYylgXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmltcG9ydCB7IHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmV4cG9ydCBmdW5jdGlvbiBtYXAoRiwgRykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLm1hcChmYSwgZnVuY3Rpb24gKGdhKSB7IHJldHVybiBHLm1hcChnYSwgZik7IH0pOyB9OyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsYXAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKGZhYikgeyByZXR1cm4gRi5tYXAoZmFiLCBmdW5jdGlvbiAoZikgeyByZXR1cm4gZihhKTsgfSk7IH07IH07XG59XG5leHBvcnQgZnVuY3Rpb24gYmluZFRvKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5tYXAoZmEsIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHt9LCBfYVtuYW1lXSA9IGEsIF9hKTtcbiAgICB9KTsgfTsgfTtcbn1cbmZ1bmN0aW9uIGxldF8oRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLm1hcChmYSwgZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgYSwgKF9hID0ge30sIF9hW25hbWVdID0gZihhKSwgX2EpKTtcbiAgICB9KTsgfTsgfTtcbn1cbmV4cG9ydCB7IFxuLyoqXG4gKiBAc2luY2UgMi4xMy4wXG4gKi9cbmxldF8gYXMgbGV0IH07XG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGdW5jdG9yQ29tcG9zaXRpb24oRiwgRykge1xuICAgIHZhciBfbWFwID0gbWFwKEYsIEcpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG1hcDogZnVuY3Rpb24gKGZnYSwgZikgeyByZXR1cm4gcGlwZShmZ2EsIF9tYXAoZikpOyB9XG4gICAgfTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBhcyhGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmLCBiKSB7IHJldHVybiBGLm1hcChzZWxmLCBmdW5jdGlvbiAoKSB7IHJldHVybiBiOyB9KTsgfTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBhc1VuaXQoRikge1xuICAgIHZhciBhc00gPSBhcyhGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlbGYpIHsgcmV0dXJuIGFzTShzZWxmLCB1bmRlZmluZWQpOyB9O1xufVxuIiwKICAiLyoqXG4gKiBUaGUgYEFwcGxpY2F0aXZlYCB0eXBlIGNsYXNzIGV4dGVuZHMgdGhlIGBBcHBseWAgdHlwZSBjbGFzcyB3aXRoIGEgYG9mYCBmdW5jdGlvbiwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gY3JlYXRlIHZhbHVlc1xuICogb2YgdHlwZSBgZiBhYCBmcm9tIHZhbHVlcyBvZiB0eXBlIGBhYC5cbiAqXG4gKiBXaGVyZSBgQXBwbHlgIHByb3ZpZGVzIHRoZSBhYmlsaXR5IHRvIGxpZnQgZnVuY3Rpb25zIG9mIHR3byBvciBtb3JlIGFyZ3VtZW50cyB0byBmdW5jdGlvbnMgd2hvc2UgYXJndW1lbnRzIGFyZVxuICogd3JhcHBlZCB1c2luZyBgZmAsIGFuZCBgRnVuY3RvcmAgcHJvdmlkZXMgdGhlIGFiaWxpdHkgdG8gbGlmdCBmdW5jdGlvbnMgb2Ygb25lIGFyZ3VtZW50LCBgcHVyZWAgY2FuIGJlIHNlZW4gYXMgdGhlXG4gKiBmdW5jdGlvbiB3aGljaCBsaWZ0cyBmdW5jdGlvbnMgb2YgX3plcm9fIGFyZ3VtZW50cy4gVGhhdCBpcywgYEFwcGxpY2F0aXZlYCBmdW5jdG9ycyBzdXBwb3J0IGEgbGlmdGluZyBvcGVyYXRpb24gZm9yXG4gKiBhbnkgbnVtYmVyIG9mIGZ1bmN0aW9uIGFyZ3VtZW50cy5cbiAqXG4gKiBJbnN0YW5jZXMgbXVzdCBzYXRpc2Z5IHRoZSBmb2xsb3dpbmcgbGF3cyBpbiBhZGRpdGlvbiB0byB0aGUgYEFwcGx5YCBsYXdzOlxuICpcbiAqIDEuIElkZW50aXR5OiBgQS5hcChBLm9mKGEgPT4gYSksIGZhKSA8LT4gZmFgXG4gKiAyLiBIb21vbW9ycGhpc206IGBBLmFwKEEub2YoYWIpLCBBLm9mKGEpKSA8LT4gQS5vZihhYihhKSlgXG4gKiAzLiBJbnRlcmNoYW5nZTogYEEuYXAoZmFiLCBBLm9mKGEpKSA8LT4gQS5hcChBLm9mKGFiID0+IGFiKGEpKSwgZmFiKWBcbiAqXG4gKiBOb3RlLiBgRnVuY3RvcmAncyBgbWFwYCBjYW4gYmUgZGVyaXZlZDogYEEubWFwKHgsIGYpID0gQS5hcChBLm9mKGYpLCB4KWBcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuaW1wb3J0IHsgYXAsIGdldEFwcGx5U2VtaWdyb3VwIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBwaXBlIH0gZnJvbSAnLi9mdW5jdGlvbic7XG5pbXBvcnQgeyBnZXRGdW5jdG9yQ29tcG9zaXRpb24gfSBmcm9tICcuL0Z1bmN0b3InO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFwcGxpY2F0aXZlTW9ub2lkKEYpIHtcbiAgICB2YXIgZiA9IGdldEFwcGx5U2VtaWdyb3VwKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoTSkgeyByZXR1cm4gKHtcbiAgICAgICAgY29uY2F0OiBmKE0pLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IEYub2YoTS5lbXB0eSlcbiAgICB9KTsgfTtcbn1cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFwcGxpY2F0aXZlQ29tcG9zaXRpb24oRiwgRykge1xuICAgIHZhciBtYXAgPSBnZXRGdW5jdG9yQ29tcG9zaXRpb24oRiwgRykubWFwO1xuICAgIHZhciBfYXAgPSBhcChGLCBHKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgb2Y6IGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLm9mKEcub2YoYSkpOyB9LFxuICAgICAgICBhcDogZnVuY3Rpb24gKGZnYWIsIGZnYSkgeyByZXR1cm4gcGlwZShmZ2FiLCBfYXAoZmdhKSk7IH1cbiAgICB9O1xufVxuIiwKICAiZXhwb3J0IGZ1bmN0aW9uIGNoYWluRmlyc3QoTSkge1xuICAgIHZhciB0YXBNID0gdGFwKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiB0YXBNKGZpcnN0LCBmKTsgfTsgfTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiB0YXAoTSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIGYpIHsgcmV0dXJuIE0uY2hhaW4oZmlyc3QsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBNLm1hcChmKGEpLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfSk7IH07XG59XG5leHBvcnQgZnVuY3Rpb24gYmluZChNKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lLCBmKSB7IHJldHVybiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIE0uY2hhaW4obWEsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBNLm1hcChmKGEpLCBmdW5jdGlvbiAoYikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBhLCAoX2EgPSB7fSwgX2FbbmFtZV0gPSBiLCBfYSkpO1xuICAgIH0pOyB9KTsgfTsgfTtcbn1cbiIsCiAgIi8qKlxuICogVGhlIGBGcm9tRWl0aGVyYCB0eXBlIGNsYXNzIHJlcHJlc2VudHMgdGhvc2UgZGF0YSB0eXBlcyB3aGljaCBzdXBwb3J0IGVycm9ycy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmltcG9ydCB7IHRhcCB9IGZyb20gJy4vQ2hhaW4nO1xuaW1wb3J0IHsgZmxvdyB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmV4cG9ydCBmdW5jdGlvbiBmcm9tT3B0aW9uKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG9uTm9uZSkgeyByZXR1cm4gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBGLmZyb21FaXRoZXIoXy5pc05vbmUobWEpID8gXy5sZWZ0KG9uTm9uZSgpKSA6IF8ucmlnaHQobWEudmFsdWUpKTsgfTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHJlZGljYXRlKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHByZWRpY2F0ZSwgb25GYWxzZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiBGLmZyb21FaXRoZXIocHJlZGljYXRlKGEpID8gXy5yaWdodChhKSA6IF8ubGVmdChvbkZhbHNlKGEpKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tT3B0aW9uSyhGKSB7XG4gICAgdmFyIGZyb21PcHRpb25GID0gZnJvbU9wdGlvbihGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG9uTm9uZSkge1xuICAgICAgICB2YXIgZnJvbSA9IGZyb21PcHRpb25GKG9uTm9uZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmxvdyhmLCBmcm9tKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluT3B0aW9uSyhGLCBNKSB7XG4gICAgdmFyIGZyb21PcHRpb25LRiA9IGZyb21PcHRpb25LKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAob25Ob25lKSB7XG4gICAgICAgIHZhciBmcm9tID0gZnJvbU9wdGlvbktGKG9uTm9uZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBNLmNoYWluKG1hLCBmcm9tKGYpKTsgfTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FaXRoZXJLKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZsb3coZiwgRi5mcm9tRWl0aGVyKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbkVpdGhlcksoRiwgTSkge1xuICAgIHZhciBmcm9tRWl0aGVyS0YgPSBmcm9tRWl0aGVySyhGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gTS5jaGFpbihtYSwgZnJvbUVpdGhlcktGKGYpKTsgfTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbkZpcnN0RWl0aGVySyhGLCBNKSB7XG4gICAgdmFyIHRhcEVpdGhlck0gPSB0YXBFaXRoZXIoRiwgTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIHRhcEVpdGhlck0obWEsIGYpOyB9OyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlck9yRWxzZShGLCBNKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwcmVkaWNhdGUsIG9uRmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICAgICAgcmV0dXJuIE0uY2hhaW4obWEsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLmZyb21FaXRoZXIocHJlZGljYXRlKGEpID8gXy5yaWdodChhKSA6IF8ubGVmdChvbkZhbHNlKGEpKSk7IH0pO1xuICAgICAgICB9O1xuICAgIH07XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gdGFwRWl0aGVyKEYsIE0pIHtcbiAgICB2YXIgZnJvbUVpdGhlciA9IGZyb21FaXRoZXJLKEYpO1xuICAgIHZhciB0YXBNID0gdGFwKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2VsZiwgZikgeyByZXR1cm4gdGFwTShzZWxmLCBmcm9tRWl0aGVyKGYpKTsgfTtcbn1cbiIsCiAgIi8qKlxuICogVGhlIGBGcm9tRWl0aGVyYCB0eXBlIGNsYXNzIHJlcHJlc2VudHMgdGhvc2UgZGF0YSB0eXBlcyB3aGljaCBzdXBwb3J0IGVycm9ycy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmltcG9ydCB7IHRhcCB9IGZyb20gJy4vQ2hhaW4nO1xuaW1wb3J0IHsgZmxvdyB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmV4cG9ydCBmdW5jdGlvbiBmcm9tT3B0aW9uKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG9uTm9uZSkgeyByZXR1cm4gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBGLmZyb21FaXRoZXIoXy5pc05vbmUobWEpID8gXy5sZWZ0KG9uTm9uZSgpKSA6IF8ucmlnaHQobWEudmFsdWUpKTsgfTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHJlZGljYXRlKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHByZWRpY2F0ZSwgb25GYWxzZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiBGLmZyb21FaXRoZXIocHJlZGljYXRlKGEpID8gXy5yaWdodChhKSA6IF8ubGVmdChvbkZhbHNlKGEpKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tT3B0aW9uSyhGKSB7XG4gICAgdmFyIGZyb21PcHRpb25GID0gZnJvbU9wdGlvbihGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG9uTm9uZSkge1xuICAgICAgICB2YXIgZnJvbSA9IGZyb21PcHRpb25GKG9uTm9uZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmxvdyhmLCBmcm9tKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluT3B0aW9uSyhGLCBNKSB7XG4gICAgdmFyIGZyb21PcHRpb25LRiA9IGZyb21PcHRpb25LKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAob25Ob25lKSB7XG4gICAgICAgIHZhciBmcm9tID0gZnJvbU9wdGlvbktGKG9uTm9uZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBNLmNoYWluKG1hLCBmcm9tKGYpKTsgfTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FaXRoZXJLKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZsb3coZiwgRi5mcm9tRWl0aGVyKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbkVpdGhlcksoRiwgTSkge1xuICAgIHZhciBmcm9tRWl0aGVyS0YgPSBmcm9tRWl0aGVySyhGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gTS5jaGFpbihtYSwgZnJvbUVpdGhlcktGKGYpKTsgfTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbkZpcnN0RWl0aGVySyhGLCBNKSB7XG4gICAgdmFyIHRhcEVpdGhlck0gPSB0YXBFaXRoZXIoRiwgTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIHRhcEVpdGhlck0obWEsIGYpOyB9OyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlck9yRWxzZShGLCBNKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwcmVkaWNhdGUsIG9uRmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICAgICAgcmV0dXJuIE0uY2hhaW4obWEsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLmZyb21FaXRoZXIocHJlZGljYXRlKGEpID8gXy5yaWdodChhKSA6IF8ubGVmdChvbkZhbHNlKGEpKSk7IH0pO1xuICAgICAgICB9O1xuICAgIH07XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gdGFwRWl0aGVyKEYsIE0pIHtcbiAgICB2YXIgZnJvbUVpdGhlciA9IGZyb21FaXRoZXJLKEYpO1xuICAgIHZhciB0YXBNID0gdGFwKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2VsZiwgZikgeyByZXR1cm4gdGFwTShzZWxmLCBmcm9tRWl0aGVyKGYpKTsgfTtcbn1cbiIsCiAgImltcG9ydCB7IHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRXF1YWxzID0gZnVuY3Rpb24gKGVxdWFscykgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ID09PSB5IHx8IGVxdWFscyh4LCB5KTsgfVxufSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3RydWN0ID0gZnVuY3Rpb24gKGVxcykge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBlcXMpIHtcbiAgICAgICAgICAgIGlmICghZXFzW2tleV0uZXF1YWxzKGZpcnN0W2tleV0sIHNlY29uZFtrZXldKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbn07XG4vKipcbiAqIEdpdmVuIGEgdHVwbGUgb2YgYEVxYHMgcmV0dXJucyBhIGBFcWAgZm9yIHRoZSB0dXBsZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB0dXBsZSB9IGZyb20gJ2ZwLXRzL0VxJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqIGltcG9ydCAqIGFzIEIgZnJvbSAnZnAtdHMvYm9vbGVhbidcbiAqXG4gKiBjb25zdCBFID0gdHVwbGUoUy5FcSwgTi5FcSwgQi5FcSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhbJ2EnLCAxLCB0cnVlXSwgWydhJywgMSwgdHJ1ZV0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsnYScsIDEsIHRydWVdLCBbJ2InLCAxLCB0cnVlXSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsnYScsIDEsIHRydWVdLCBbJ2EnLCAyLCB0cnVlXSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsnYScsIDEsIHRydWVdLCBbJ2EnLCAxLCBmYWxzZV0pLCBmYWxzZSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHVwbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVxcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGVxc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gZnJvbUVxdWFscyhmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZXFzLmV2ZXJ5KGZ1bmN0aW9uIChFLCBpKSB7IHJldHVybiBFLmVxdWFscyhmaXJzdFtpXSwgc2Vjb25kW2ldKTsgfSk7IH0pO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgY29udHJhbWFwXyA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgY29udHJhbWFwKGYpKTsgfTtcbi8qKlxuICogQSB0eXBpY2FsIHVzZSBjYXNlIGZvciBgY29udHJhbWFwYCB3b3VsZCBiZSBsaWtlLCBnaXZlbiBzb21lIGBVc2VyYCB0eXBlLCB0byBjb25zdHJ1Y3QgYW4gYEVxPFVzZXI+YC5cbiAqXG4gKiBXZSBjYW4gZG8gc28gd2l0aCBhIGZ1bmN0aW9uIGZyb20gYFVzZXIgLT4gWGAgd2hlcmUgYFhgIGlzIHNvbWUgdmFsdWUgdGhhdCB3ZSBrbm93IGhvdyB0byBjb21wYXJlXG4gKiBmb3IgZXF1YWxpdHkgKG1lYW5pbmcgd2UgaGF2ZSBhbiBgRXE8WD5gKVxuICpcbiAqIEZvciBleGFtcGxlLCBnaXZlbiB0aGUgZm9sbG93aW5nIGBVc2VyYCB0eXBlLCB3ZSB3YW50IHRvIGNvbnN0cnVjdCBhbiBgRXE8VXNlcj5gIHRoYXQganVzdCBsb29rcyBhdCB0aGUgYGtleWAgZmllbGRcbiAqIGZvciBlYWNoIHVzZXIgKHNpbmNlIGl0J3Mga25vd24gdG8gYmUgdW5pcXVlKS5cbiAqXG4gKiBJZiB3ZSBoYXZlIGEgd2F5IG9mIGNvbXBhcmluZyBgVVVJRGBzIGZvciBlcXVhbGl0eSAoYGVxVVVJRDogRXE8VVVJRD5gKSBhbmQgd2Uga25vdyBob3cgdG8gZ28gZnJvbSBgVXNlciAtPiBVVUlEYCxcbiAqIHVzaW5nIGBjb250cmFtYXBgIHdlIGNhbiBkbyB0aGlzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGNvbnRyYW1hcCwgRXEgfSBmcm9tICdmcC10cy9FcSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIHR5cGUgVVVJRCA9IHN0cmluZ1xuICpcbiAqIGludGVyZmFjZSBVc2VyIHtcbiAqICAgcmVhZG9ubHkga2V5OiBVVUlEXG4gKiAgIHJlYWRvbmx5IGZpcnN0TmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGxhc3ROYW1lOiBzdHJpbmdcbiAqIH1cbiAqXG4gKiBjb25zdCBlcVVVSUQ6IEVxPFVVSUQ+ID0gUy5FcVxuICpcbiAqIGNvbnN0IGVxVXNlckJ5S2V5OiBFcTxVc2VyPiA9IHBpcGUoXG4gKiAgIGVxVVVJRCxcbiAqICAgY29udHJhbWFwKCh1c2VyKSA9PiB1c2VyLmtleSlcbiAqIClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBlcVVzZXJCeUtleS5lcXVhbHMoXG4gKiAgICAgeyBrZXk6ICdrMScsIGZpcnN0TmFtZTogJ2ExJywgbGFzdE5hbWU6ICdiMScgfSxcbiAqICAgICB7IGtleTogJ2syJywgZmlyc3ROYW1lOiAnYTEnLCBsYXN0TmFtZTogJ2IxJyB9XG4gKiAgICksXG4gKiAgIGZhbHNlXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBlcVVzZXJCeUtleS5lcXVhbHMoXG4gKiAgICAgeyBrZXk6ICdrMScsIGZpcnN0TmFtZTogJ2ExJywgbGFzdE5hbWU6ICdiMScgfSxcbiAqICAgICB7IGtleTogJ2sxJywgZmlyc3ROYW1lOiAnYTInLCBsYXN0TmFtZTogJ2IxJyB9XG4gKiAgICksXG4gKiAgIHRydWVcbiAqIClcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb250cmFtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGZyb21FcXVhbHMoZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZhLmVxdWFscyhmKHgpLCBmKHkpKTsgfSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBVUkkgPSAnRXEnO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBlcVN0cmljdCA9IHtcbiAgICBlcXVhbHM6IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhID09PSBiOyB9XG59O1xudmFyIGVtcHR5ID0ge1xuICAgIGVxdWFsczogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gZnJvbUVxdWFscyhmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4geC5lcXVhbHMoYSwgYikgJiYgeS5lcXVhbHMoYSwgYik7IH0pOyB9XG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNi4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TW9ub2lkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGdldFNlbWlncm91cCgpLmNvbmNhdCxcbiAgICBlbXB0eTogZW1wdHlcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb250cmF2YXJpYW50ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbnRyYW1hcDogY29udHJhbWFwX1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIFtgdHVwbGVgXSgjdHVwbGUpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRUdXBsZUVxID0gdHVwbGU7XG4vKipcbiAqIFVzZSBbYHN0cnVjdGBdKCNzdHJ1Y3QpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRTdHJ1Y3RFcSA9IHN0cnVjdDtcbi8qKlxuICogVXNlIFtgZXFTdHJpY3RgXSgjZXFzdHJpY3QpIGluc3RlYWRcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHN0cmljdEVxdWFsID0gZXFTdHJpY3QuZXF1YWxzO1xuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYENvbnRyYXZhcmlhbnRgIGluc3RhbmNlLCBwYXNzIGBFLkNvbnRyYXZhcmlhbnRgIGluc3RlYWQgb2YgYEUuZXFgXG4gKiAod2hlcmUgYEVgIGlzIGZyb20gYGltcG9ydCBFIGZyb20gJ2ZwLXRzL0VxJ2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBlcSA9IENvbnRyYXZhcmlhbnQ7XG4vKipcbiAqIFVzZSBbYEVxYF0oLi9ib29sZWFuLnRzLmh0bWwjZXEpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBlcUJvb2xlYW4gPSBlcVN0cmljdDtcbi8qKlxuICogVXNlIFtgRXFgXSguL3N0cmluZy50cy5odG1sI2VxKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZXFTdHJpbmcgPSBlcVN0cmljdDtcbi8qKlxuICogVXNlIFtgRXFgXSguL251bWJlci50cy5odG1sI2VxKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZXFOdW1iZXIgPSBlcVN0cmljdDtcbi8qKlxuICogVXNlIFtgRXFgXSguL0RhdGUudHMuaHRtbCNlcSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGVxRGF0ZSA9IHtcbiAgICBlcXVhbHM6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBmaXJzdC52YWx1ZU9mKCkgPT09IHNlY29uZC52YWx1ZU9mKCk7IH1cbn07XG4iLAogICJpbXBvcnQgeyBlcVN0cmljdCB9IGZyb20gJy4vRXEnO1xuaW1wb3J0IHsgY29uc3RhbnQsIGNvbnN0VHJ1ZSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVmYXVsdHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGRlZmF1bHRzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXF1YWxzRGVmYXVsdCA9IGZ1bmN0aW9uIChjb21wYXJlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBmaXJzdCA9PT0gc2Vjb25kIHx8IGNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IDA7XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUNvbXBhcmUgPSBmdW5jdGlvbiAoY29tcGFyZSkgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGVxdWFsc0RlZmF1bHQoY29tcGFyZSksXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIChmaXJzdCA9PT0gc2Vjb25kID8gMCA6IGNvbXBhcmUoZmlyc3QsIHNlY29uZCkpOyB9XG59KTsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbWJpbmF0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEdpdmVuIGEgdHVwbGUgb2YgYE9yZGBzIHJldHVybnMgYW4gYE9yZGAgZm9yIHRoZSB0dXBsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdHVwbGUgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE8gPSB0dXBsZShTLk9yZCwgTi5PcmQsIEIuT3JkKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShbJ2EnLCAxLCB0cnVlXSwgWydiJywgMiwgdHJ1ZV0pLCAtMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoWydhJywgMSwgdHJ1ZV0sIFsnYScsIDIsIHRydWVdKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKFsnYScsIDEsIHRydWVdLCBbJ2EnLCAxLCBmYWxzZV0pLCAxKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB0dXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3JkcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9yZHNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIGZyb21Db21wYXJlKGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBvcmRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgdmFyIHIgPSBvcmRzW2ldLmNvbXBhcmUoZmlyc3RbaV0sIHNlY29uZFtpXSk7XG4gICAgICAgICAgICBpZiAociAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmRzW2ldLmNvbXBhcmUoZmlyc3RbaV0sIHNlY29uZFtpXSk7XG4gICAgfSk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmV2ZXJzZSA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiBmcm9tQ29tcGFyZShmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gTy5jb21wYXJlKHNlY29uZCwgZmlyc3QpOyB9KTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgY29udHJhbWFwXyA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgY29udHJhbWFwKGYpKTsgfTtcbi8qKlxuICogQSB0eXBpY2FsIHVzZSBjYXNlIGZvciBgY29udHJhbWFwYCB3b3VsZCBiZSBsaWtlLCBnaXZlbiBzb21lIGBVc2VyYCB0eXBlLCB0byBjb25zdHJ1Y3QgYW4gYE9yZDxVc2VyPmAuXG4gKlxuICogV2UgY2FuIGRvIHNvIHdpdGggYSBmdW5jdGlvbiBmcm9tIGBVc2VyIC0+IFhgIHdoZXJlIGBYYCBpcyBzb21lIHZhbHVlIHRoYXQgd2Uga25vdyBob3cgdG8gY29tcGFyZVxuICogZm9yIG9yZGVyaW5nIChtZWFuaW5nIHdlIGhhdmUgYW4gYE9yZDxYPmApXG4gKlxuICogRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBmb2xsb3dpbmcgYFVzZXJgIHR5cGUsIHRoZXJlIGFyZSBsb3RzIG9mIHBvc3NpYmxlIGNob2ljZXMgZm9yIGBYYCxcbiAqIGJ1dCBsZXQncyBzYXkgd2Ugd2FudCB0byBzb3J0IGEgbGlzdCBvZiB1c2VycyBieSBgbGFzdE5hbWVgLlxuICpcbiAqIElmIHdlIGhhdmUgYSB3YXkgb2YgY29tcGFyaW5nIGBsYXN0TmFtZWBzIGZvciBvcmRlcmluZyAoYG9yZExhc3ROYW1lOiBPcmQ8c3RyaW5nPmApIGFuZCB3ZSBrbm93IGhvdyB0byBnbyBmcm9tIGBVc2VyIC0+IHN0cmluZ2AsXG4gKiB1c2luZyBgY29udHJhbWFwYCB3ZSBjYW4gZG8gdGhpc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgeyBjb250cmFtYXAsIE9yZCB9IGZyb20gJ2ZwLXRzL09yZCdcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBpbnRlcmZhY2UgVXNlciB7XG4gKiAgIHJlYWRvbmx5IGZpcnN0TmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGxhc3ROYW1lOiBzdHJpbmdcbiAqIH1cbiAqXG4gKiBjb25zdCBvcmRMYXN0TmFtZTogT3JkPHN0cmluZz4gPSBTLk9yZFxuICpcbiAqIGNvbnN0IG9yZEJ5TGFzdE5hbWU6IE9yZDxVc2VyPiA9IHBpcGUoXG4gKiAgIG9yZExhc3ROYW1lLFxuICogICBjb250cmFtYXAoKHVzZXIpID0+IHVzZXIubGFzdE5hbWUpXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgUkEuc29ydChvcmRCeUxhc3ROYW1lKShbXG4gKiAgICAgeyBmaXJzdE5hbWU6ICdhJywgbGFzdE5hbWU6ICdkJyB9LFxuICogICAgIHsgZmlyc3ROYW1lOiAnYycsIGxhc3ROYW1lOiAnYicgfVxuICogICBdKSxcbiAqICAgW1xuICogICAgIHsgZmlyc3ROYW1lOiAnYycsIGxhc3ROYW1lOiAnYicgfSxcbiAqICAgICB7IGZpcnN0TmFtZTogJ2EnLCBsYXN0TmFtZTogJ2QnIH1cbiAqICAgXVxuICogKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnRyYW1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gZnJvbUNvbXBhcmUoZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZhLmNvbXBhcmUoZihmaXJzdCksIGYoc2Vjb25kKSk7IH0pO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ09yZCc7XG4vKipcbiAqIEEgdHlwaWNhbCB1c2UgY2FzZSBmb3IgdGhlIGBTZW1pZ3JvdXBgIGluc3RhbmNlIG9mIGBPcmRgIGlzIG1lcmdpbmcgdHdvIG9yIG1vcmUgb3JkZXJpbmdzLlxuICpcbiAqIEZvciBleGFtcGxlIHRoZSBmb2xsb3dpbmcgc25pcHBldCBidWlsZHMgYW4gYE9yZGAgZm9yIGEgdHlwZSBgVXNlcmAgd2hpY2hcbiAqIHNvcnRzIGJ5IGBjcmVhdGVkYCBkYXRlIGRlc2NlbmRpbmcsIGFuZCAqKnRoZW4qKiBgbGFzdE5hbWVgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIEQgZnJvbSAnZnAtdHMvRGF0ZSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCB7IGNvbnRyYW1hcCwgZ2V0U2VtaWdyb3VwLCBPcmQsIHJldmVyc2UgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogaW50ZXJmYWNlIFVzZXIge1xuICogICByZWFkb25seSBpZDogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGxhc3ROYW1lOiBzdHJpbmdcbiAqICAgcmVhZG9ubHkgY3JlYXRlZDogRGF0ZVxuICogfVxuICpcbiAqIGNvbnN0IG9yZEJ5TGFzdE5hbWU6IE9yZDxVc2VyPiA9IHBpcGUoXG4gKiAgIFMuT3JkLFxuICogICBjb250cmFtYXAoKHVzZXIpID0+IHVzZXIubGFzdE5hbWUpXG4gKiApXG4gKlxuICogY29uc3Qgb3JkQnlDcmVhdGVkOiBPcmQ8VXNlcj4gPSBwaXBlKFxuICogICBELk9yZCxcbiAqICAgY29udHJhbWFwKCh1c2VyKSA9PiB1c2VyLmNyZWF0ZWQpXG4gKiApXG4gKlxuICogY29uc3Qgb3JkVXNlckJ5Q3JlYXRlZERlc2NUaGVuTGFzdE5hbWUgPSBnZXRTZW1pZ3JvdXA8VXNlcj4oKS5jb25jYXQoXG4gKiAgIHJldmVyc2Uob3JkQnlDcmVhdGVkKSxcbiAqICAgb3JkQnlMYXN0TmFtZVxuICogKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIFJBLnNvcnQob3JkVXNlckJ5Q3JlYXRlZERlc2NUaGVuTGFzdE5hbWUpKFtcbiAqICAgICB7IGlkOiAnYycsIGxhc3ROYW1lOiAnZCcsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5NzMsIDEwLCAzMCkgfSxcbiAqICAgICB7IGlkOiAnYScsIGxhc3ROYW1lOiAnYicsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5NzMsIDEwLCAzMCkgfSxcbiAqICAgICB7IGlkOiAnZScsIGxhc3ROYW1lOiAnZicsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5ODAsIDEwLCAzMCkgfVxuICogICBdKSxcbiAqICAgW1xuICogICAgIHsgaWQ6ICdlJywgbGFzdE5hbWU6ICdmJywgY3JlYXRlZDogbmV3IERhdGUoMTk4MCwgMTAsIDMwKSB9LFxuICogICAgIHsgaWQ6ICdhJywgbGFzdE5hbWU6ICdiJywgY3JlYXRlZDogbmV3IERhdGUoMTk3MywgMTAsIDMwKSB9LFxuICogICAgIHsgaWQ6ICdjJywgbGFzdE5hbWU6ICdkJywgY3JlYXRlZDogbmV3IERhdGUoMTk3MywgMTAsIDMwKSB9XG4gKiAgIF1cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZyb21Db21wYXJlKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICB2YXIgb3ggPSBmaXJzdC5jb21wYXJlKGEsIGIpO1xuICAgICAgICAgICAgcmV0dXJuIG94ICE9PSAwID8gb3ggOiBzZWNvbmQuY29tcGFyZShhLCBiKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSk7IH07XG4vKipcbiAqIFJldHVybnMgYSBgTW9ub2lkYCBzdWNoIHRoYXQ6XG4gKlxuICogLSBpdHMgYGNvbmNhdChvcmQxLCBvcmQyKWAgb3BlcmF0aW9uIHdpbGwgb3JkZXIgZmlyc3QgYnkgYG9yZDFgLCBhbmQgdGhlbiBieSBgb3JkMmBcbiAqIC0gaXRzIGBlbXB0eWAgdmFsdWUgaXMgYW4gYE9yZGAgdGhhdCBhbHdheXMgY29uc2lkZXJzIGNvbXBhcmVkIGVsZW1lbnRzIGVxdWFsXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvcnQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IGNvbnRyYW1hcCwgcmV2ZXJzZSwgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3JkJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tICdmcC10cy9Nb25vaWQnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBpbnRlcmZhY2UgVXNlciB7XG4gKiAgIHJlYWRvbmx5IGlkOiBudW1iZXJcbiAqICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGFnZTogbnVtYmVyXG4gKiAgIHJlYWRvbmx5IHJlbWVtYmVyTWU6IGJvb2xlYW5cbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFxuICogICBTLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLm5hbWUpXG4gKiApXG4gKlxuICogY29uc3QgYnlBZ2UgPSBwaXBlKFxuICogICBOLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLmFnZSlcbiAqIClcbiAqXG4gKiBjb25zdCBieVJlbWVtYmVyTWUgPSBwaXBlKFxuICogICBCLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLnJlbWVtYmVyTWUpXG4gKiApXG4gKlxuICogY29uc3QgTSA9IGdldE1vbm9pZDxVc2VyPigpXG4gKlxuICogY29uc3QgdXNlcnM6IEFycmF5PFVzZXI+ID0gW1xuICogICB7IGlkOiAxLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ3LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiAyLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ2LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDMsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiA0LCBuYW1lOiAnR2l1bGlvJywgYWdlOiA0NCwgcmVtZW1iZXJNZTogdHJ1ZSB9XG4gKiBdXG4gKlxuICogLy8gc29ydCBieSBuYW1lLCB0aGVuIGJ5IGFnZSwgdGhlbiBieSBgcmVtZW1iZXJNZWBcbiAqIGNvbnN0IE8xID0gY29uY2F0QWxsKE0pKFtieU5hbWUsIGJ5QWdlLCBieVJlbWVtYmVyTWVdKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb3J0KE8xKSh1c2VycyksIFtcbiAqICAgeyBpZDogMywgbmFtZTogJ0dpdWxpbycsIGFnZTogNDQsIHJlbWVtYmVyTWU6IGZhbHNlIH0sXG4gKiAgIHsgaWQ6IDQsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDIsIG5hbWU6ICdHdWlkbycsIGFnZTogNDYsIHJlbWVtYmVyTWU6IHRydWUgfSxcbiAqICAgeyBpZDogMSwgbmFtZTogJ0d1aWRvJywgYWdlOiA0NywgcmVtZW1iZXJNZTogZmFsc2UgfVxuICogXSlcbiAqXG4gKiAvLyBub3cgYHJlbWVtYmVyTWUgPSB0cnVlYCBmaXJzdCwgdGhlbiBieSBuYW1lLCB0aGVuIGJ5IGFnZVxuICogY29uc3QgTzIgPSBjb25jYXRBbGwoTSkoW3JldmVyc2UoYnlSZW1lbWJlck1lKSwgYnlOYW1lLCBieUFnZV0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvcnQoTzIpKHVzZXJzKSwgW1xuICogICB7IGlkOiA0LCBuYW1lOiAnR2l1bGlvJywgYWdlOiA0NCwgcmVtZW1iZXJNZTogdHJ1ZSB9LFxuICogICB7IGlkOiAyLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ2LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDMsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiAxLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ3LCByZW1lbWJlck1lOiBmYWxzZSB9XG4gKiBdKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRTZW1pZ3JvdXAoKS5jb25jYXQsXG4gICAgZW1wdHk6IGZyb21Db21wYXJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIDA7IH0pXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29udHJhdmFyaWFudCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBjb250cmFtYXA6IGNvbnRyYW1hcF9cbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJpdmlhbCA9IHtcbiAgICBlcXVhbHM6IGNvbnN0VHJ1ZSxcbiAgICBjb21wYXJlOiAvKiNfX1BVUkVfXyovIGNvbnN0YW50KDApXG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZXF1YWxzID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IDA7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb25lIHZhbHVlIGlzIF9zdHJpY3RseSBsZXNzIHRoYW5fIGFub3RoZXJcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBsdCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IC0xO1xuICAgIH07XG59O1xuLy8gVE9ETzogY3VycnkgaW4gdjNcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9uZSB2YWx1ZSBpcyBfc3RyaWN0bHkgZ3JlYXRlciB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ3QgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gTy5jb21wYXJlKGZpcnN0LCBzZWNvbmQpID09PSAxO1xuICAgIH07XG59O1xuLy8gVE9ETzogY3VycnkgaW4gdjNcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9uZSB2YWx1ZSBpcyBfbm9uLXN0cmljdGx5IGxlc3MgdGhhbl8gYW5vdGhlclxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGxlcSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgIT09IDE7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb25lIHZhbHVlIGlzIF9ub24tc3RyaWN0bHkgZ3JlYXRlciB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2VxID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIE8uY29tcGFyZShmaXJzdCwgc2Vjb25kKSAhPT0gLTE7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUYWtlIHRoZSBtaW5pbXVtIG9mIHR3byB2YWx1ZXMuIElmIHRoZXkgYXJlIGNvbnNpZGVyZWQgZXF1YWwsIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBjaG9zZW5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtaW4gPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPCAxID8gZmlyc3QgOiBzZWNvbmQ7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUYWtlIHRoZSBtYXhpbXVtIG9mIHR3byB2YWx1ZXMuIElmIHRoZXkgYXJlIGNvbnNpZGVyZWQgZXF1YWwsIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBjaG9zZW5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXggPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPiAtMSA/IGZpcnN0IDogc2Vjb25kO1xuICAgIH07XG59O1xuLyoqXG4gKiBDbGFtcCBhIHZhbHVlIGJldHdlZW4gYSBtaW5pbXVtIGFuZCBhIG1heGltdW1cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjbGFtcCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIG1pbk8gPSBtaW4oTyk7XG4gICAgdmFyIG1heE8gPSBtYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChsb3csIGhpKSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbWF4TyhtaW5PKGEsIGhpKSwgbG93KTsgfTsgfTtcbn07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIHZhbHVlIGlzIGJldHdlZW4gYSBtaW5pbXVtIGFuZCBhIG1heGltdW0gKGluY2x1c2l2ZSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBiZXR3ZWVuID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgbHRPID0gbHQoTyk7XG4gICAgdmFyIGd0TyA9IGd0KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAobG93LCBoaSkgeyByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGx0TyhhLCBsb3cpIHx8IGd0TyhhLCBoaSkgPyBmYWxzZSA6IHRydWU7IH07IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgW2B0dXBsZWBdKCN0dXBsZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldFR1cGxlT3JkID0gdHVwbGU7XG4vKipcbiAqIFVzZSBbYHJldmVyc2VgXSgjcmV2ZXJzZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldER1YWxPcmQgPSByZXZlcnNlO1xuLyoqXG4gKiBVc2UgW2BDb250cmF2YXJpYW50YF0oI2NvbnRyYXZhcmlhbnQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmQgPSBDb250cmF2YXJpYW50O1xuLy8gZGVmYXVsdCBjb21wYXJlIGZvciBwcmltaXRpdmUgdHlwZXNcbmZ1bmN0aW9uIGNvbXBhcmUoZmlyc3QsIHNlY29uZCkge1xuICAgIHJldHVybiBmaXJzdCA8IHNlY29uZCA/IC0xIDogZmlyc3QgPiBzZWNvbmQgPyAxIDogMDtcbn1cbnZhciBzdHJpY3RPcmQgPSB7XG4gICAgZXF1YWxzOiBlcVN0cmljdC5lcXVhbHMsXG4gICAgY29tcGFyZTogY29tcGFyZVxufTtcbi8qKlxuICogVXNlIFtgT3JkYF0oLi9ib29sZWFuLnRzLmh0bWwjb3JkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3JkQm9vbGVhbiA9IHN0cmljdE9yZDtcbi8qKlxuICogVXNlIFtgT3JkYF0oLi9zdHJpbmcudHMuaHRtbCNvcmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmRTdHJpbmcgPSBzdHJpY3RPcmQ7XG4vKipcbiAqIFVzZSBbYE9yZGBdKC4vbnVtYmVyLnRzLmh0bWwjb3JkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3JkTnVtYmVyID0gc3RyaWN0T3JkO1xuLyoqXG4gKiBVc2UgW2BPcmRgXSguL0RhdGUudHMuaHRtbCNvcmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmREYXRlID0gLyojX19QVVJFX18qLyBwaXBlKG9yZE51bWJlciwgXG4vKiNfX1BVUkVfXyovXG5jb250cmFtYXAoZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUudmFsdWVPZigpOyB9KSk7XG4iLAogICJpbXBvcnQgeyBlcVN0cmljdCB9IGZyb20gJy4vRXEnO1xuaW1wb3J0IHsgY29uc3RhbnQsIGNvbnN0VHJ1ZSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVmYXVsdHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGRlZmF1bHRzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXF1YWxzRGVmYXVsdCA9IGZ1bmN0aW9uIChjb21wYXJlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBmaXJzdCA9PT0gc2Vjb25kIHx8IGNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IDA7XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUNvbXBhcmUgPSBmdW5jdGlvbiAoY29tcGFyZSkgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGVxdWFsc0RlZmF1bHQoY29tcGFyZSksXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIChmaXJzdCA9PT0gc2Vjb25kID8gMCA6IGNvbXBhcmUoZmlyc3QsIHNlY29uZCkpOyB9XG59KTsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbWJpbmF0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEdpdmVuIGEgdHVwbGUgb2YgYE9yZGBzIHJldHVybnMgYW4gYE9yZGAgZm9yIHRoZSB0dXBsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdHVwbGUgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE8gPSB0dXBsZShTLk9yZCwgTi5PcmQsIEIuT3JkKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShbJ2EnLCAxLCB0cnVlXSwgWydiJywgMiwgdHJ1ZV0pLCAtMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoWydhJywgMSwgdHJ1ZV0sIFsnYScsIDIsIHRydWVdKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKFsnYScsIDEsIHRydWVdLCBbJ2EnLCAxLCBmYWxzZV0pLCAxKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB0dXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3JkcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9yZHNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIGZyb21Db21wYXJlKGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBvcmRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgdmFyIHIgPSBvcmRzW2ldLmNvbXBhcmUoZmlyc3RbaV0sIHNlY29uZFtpXSk7XG4gICAgICAgICAgICBpZiAociAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmRzW2ldLmNvbXBhcmUoZmlyc3RbaV0sIHNlY29uZFtpXSk7XG4gICAgfSk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmV2ZXJzZSA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiBmcm9tQ29tcGFyZShmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gTy5jb21wYXJlKHNlY29uZCwgZmlyc3QpOyB9KTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgY29udHJhbWFwXyA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgY29udHJhbWFwKGYpKTsgfTtcbi8qKlxuICogQSB0eXBpY2FsIHVzZSBjYXNlIGZvciBgY29udHJhbWFwYCB3b3VsZCBiZSBsaWtlLCBnaXZlbiBzb21lIGBVc2VyYCB0eXBlLCB0byBjb25zdHJ1Y3QgYW4gYE9yZDxVc2VyPmAuXG4gKlxuICogV2UgY2FuIGRvIHNvIHdpdGggYSBmdW5jdGlvbiBmcm9tIGBVc2VyIC0+IFhgIHdoZXJlIGBYYCBpcyBzb21lIHZhbHVlIHRoYXQgd2Uga25vdyBob3cgdG8gY29tcGFyZVxuICogZm9yIG9yZGVyaW5nIChtZWFuaW5nIHdlIGhhdmUgYW4gYE9yZDxYPmApXG4gKlxuICogRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBmb2xsb3dpbmcgYFVzZXJgIHR5cGUsIHRoZXJlIGFyZSBsb3RzIG9mIHBvc3NpYmxlIGNob2ljZXMgZm9yIGBYYCxcbiAqIGJ1dCBsZXQncyBzYXkgd2Ugd2FudCB0byBzb3J0IGEgbGlzdCBvZiB1c2VycyBieSBgbGFzdE5hbWVgLlxuICpcbiAqIElmIHdlIGhhdmUgYSB3YXkgb2YgY29tcGFyaW5nIGBsYXN0TmFtZWBzIGZvciBvcmRlcmluZyAoYG9yZExhc3ROYW1lOiBPcmQ8c3RyaW5nPmApIGFuZCB3ZSBrbm93IGhvdyB0byBnbyBmcm9tIGBVc2VyIC0+IHN0cmluZ2AsXG4gKiB1c2luZyBgY29udHJhbWFwYCB3ZSBjYW4gZG8gdGhpc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgeyBjb250cmFtYXAsIE9yZCB9IGZyb20gJ2ZwLXRzL09yZCdcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBpbnRlcmZhY2UgVXNlciB7XG4gKiAgIHJlYWRvbmx5IGZpcnN0TmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGxhc3ROYW1lOiBzdHJpbmdcbiAqIH1cbiAqXG4gKiBjb25zdCBvcmRMYXN0TmFtZTogT3JkPHN0cmluZz4gPSBTLk9yZFxuICpcbiAqIGNvbnN0IG9yZEJ5TGFzdE5hbWU6IE9yZDxVc2VyPiA9IHBpcGUoXG4gKiAgIG9yZExhc3ROYW1lLFxuICogICBjb250cmFtYXAoKHVzZXIpID0+IHVzZXIubGFzdE5hbWUpXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgUkEuc29ydChvcmRCeUxhc3ROYW1lKShbXG4gKiAgICAgeyBmaXJzdE5hbWU6ICdhJywgbGFzdE5hbWU6ICdkJyB9LFxuICogICAgIHsgZmlyc3ROYW1lOiAnYycsIGxhc3ROYW1lOiAnYicgfVxuICogICBdKSxcbiAqICAgW1xuICogICAgIHsgZmlyc3ROYW1lOiAnYycsIGxhc3ROYW1lOiAnYicgfSxcbiAqICAgICB7IGZpcnN0TmFtZTogJ2EnLCBsYXN0TmFtZTogJ2QnIH1cbiAqICAgXVxuICogKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnRyYW1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gZnJvbUNvbXBhcmUoZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZhLmNvbXBhcmUoZihmaXJzdCksIGYoc2Vjb25kKSk7IH0pO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ09yZCc7XG4vKipcbiAqIEEgdHlwaWNhbCB1c2UgY2FzZSBmb3IgdGhlIGBTZW1pZ3JvdXBgIGluc3RhbmNlIG9mIGBPcmRgIGlzIG1lcmdpbmcgdHdvIG9yIG1vcmUgb3JkZXJpbmdzLlxuICpcbiAqIEZvciBleGFtcGxlIHRoZSBmb2xsb3dpbmcgc25pcHBldCBidWlsZHMgYW4gYE9yZGAgZm9yIGEgdHlwZSBgVXNlcmAgd2hpY2hcbiAqIHNvcnRzIGJ5IGBjcmVhdGVkYCBkYXRlIGRlc2NlbmRpbmcsIGFuZCAqKnRoZW4qKiBgbGFzdE5hbWVgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIEQgZnJvbSAnZnAtdHMvRGF0ZSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCB7IGNvbnRyYW1hcCwgZ2V0U2VtaWdyb3VwLCBPcmQsIHJldmVyc2UgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogaW50ZXJmYWNlIFVzZXIge1xuICogICByZWFkb25seSBpZDogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGxhc3ROYW1lOiBzdHJpbmdcbiAqICAgcmVhZG9ubHkgY3JlYXRlZDogRGF0ZVxuICogfVxuICpcbiAqIGNvbnN0IG9yZEJ5TGFzdE5hbWU6IE9yZDxVc2VyPiA9IHBpcGUoXG4gKiAgIFMuT3JkLFxuICogICBjb250cmFtYXAoKHVzZXIpID0+IHVzZXIubGFzdE5hbWUpXG4gKiApXG4gKlxuICogY29uc3Qgb3JkQnlDcmVhdGVkOiBPcmQ8VXNlcj4gPSBwaXBlKFxuICogICBELk9yZCxcbiAqICAgY29udHJhbWFwKCh1c2VyKSA9PiB1c2VyLmNyZWF0ZWQpXG4gKiApXG4gKlxuICogY29uc3Qgb3JkVXNlckJ5Q3JlYXRlZERlc2NUaGVuTGFzdE5hbWUgPSBnZXRTZW1pZ3JvdXA8VXNlcj4oKS5jb25jYXQoXG4gKiAgIHJldmVyc2Uob3JkQnlDcmVhdGVkKSxcbiAqICAgb3JkQnlMYXN0TmFtZVxuICogKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIFJBLnNvcnQob3JkVXNlckJ5Q3JlYXRlZERlc2NUaGVuTGFzdE5hbWUpKFtcbiAqICAgICB7IGlkOiAnYycsIGxhc3ROYW1lOiAnZCcsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5NzMsIDEwLCAzMCkgfSxcbiAqICAgICB7IGlkOiAnYScsIGxhc3ROYW1lOiAnYicsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5NzMsIDEwLCAzMCkgfSxcbiAqICAgICB7IGlkOiAnZScsIGxhc3ROYW1lOiAnZicsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5ODAsIDEwLCAzMCkgfVxuICogICBdKSxcbiAqICAgW1xuICogICAgIHsgaWQ6ICdlJywgbGFzdE5hbWU6ICdmJywgY3JlYXRlZDogbmV3IERhdGUoMTk4MCwgMTAsIDMwKSB9LFxuICogICAgIHsgaWQ6ICdhJywgbGFzdE5hbWU6ICdiJywgY3JlYXRlZDogbmV3IERhdGUoMTk3MywgMTAsIDMwKSB9LFxuICogICAgIHsgaWQ6ICdjJywgbGFzdE5hbWU6ICdkJywgY3JlYXRlZDogbmV3IERhdGUoMTk3MywgMTAsIDMwKSB9XG4gKiAgIF1cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZyb21Db21wYXJlKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICB2YXIgb3ggPSBmaXJzdC5jb21wYXJlKGEsIGIpO1xuICAgICAgICAgICAgcmV0dXJuIG94ICE9PSAwID8gb3ggOiBzZWNvbmQuY29tcGFyZShhLCBiKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSk7IH07XG4vKipcbiAqIFJldHVybnMgYSBgTW9ub2lkYCBzdWNoIHRoYXQ6XG4gKlxuICogLSBpdHMgYGNvbmNhdChvcmQxLCBvcmQyKWAgb3BlcmF0aW9uIHdpbGwgb3JkZXIgZmlyc3QgYnkgYG9yZDFgLCBhbmQgdGhlbiBieSBgb3JkMmBcbiAqIC0gaXRzIGBlbXB0eWAgdmFsdWUgaXMgYW4gYE9yZGAgdGhhdCBhbHdheXMgY29uc2lkZXJzIGNvbXBhcmVkIGVsZW1lbnRzIGVxdWFsXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvcnQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IGNvbnRyYW1hcCwgcmV2ZXJzZSwgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3JkJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tICdmcC10cy9Nb25vaWQnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBpbnRlcmZhY2UgVXNlciB7XG4gKiAgIHJlYWRvbmx5IGlkOiBudW1iZXJcbiAqICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGFnZTogbnVtYmVyXG4gKiAgIHJlYWRvbmx5IHJlbWVtYmVyTWU6IGJvb2xlYW5cbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFxuICogICBTLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLm5hbWUpXG4gKiApXG4gKlxuICogY29uc3QgYnlBZ2UgPSBwaXBlKFxuICogICBOLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLmFnZSlcbiAqIClcbiAqXG4gKiBjb25zdCBieVJlbWVtYmVyTWUgPSBwaXBlKFxuICogICBCLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLnJlbWVtYmVyTWUpXG4gKiApXG4gKlxuICogY29uc3QgTSA9IGdldE1vbm9pZDxVc2VyPigpXG4gKlxuICogY29uc3QgdXNlcnM6IEFycmF5PFVzZXI+ID0gW1xuICogICB7IGlkOiAxLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ3LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiAyLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ2LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDMsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiA0LCBuYW1lOiAnR2l1bGlvJywgYWdlOiA0NCwgcmVtZW1iZXJNZTogdHJ1ZSB9XG4gKiBdXG4gKlxuICogLy8gc29ydCBieSBuYW1lLCB0aGVuIGJ5IGFnZSwgdGhlbiBieSBgcmVtZW1iZXJNZWBcbiAqIGNvbnN0IE8xID0gY29uY2F0QWxsKE0pKFtieU5hbWUsIGJ5QWdlLCBieVJlbWVtYmVyTWVdKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb3J0KE8xKSh1c2VycyksIFtcbiAqICAgeyBpZDogMywgbmFtZTogJ0dpdWxpbycsIGFnZTogNDQsIHJlbWVtYmVyTWU6IGZhbHNlIH0sXG4gKiAgIHsgaWQ6IDQsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDIsIG5hbWU6ICdHdWlkbycsIGFnZTogNDYsIHJlbWVtYmVyTWU6IHRydWUgfSxcbiAqICAgeyBpZDogMSwgbmFtZTogJ0d1aWRvJywgYWdlOiA0NywgcmVtZW1iZXJNZTogZmFsc2UgfVxuICogXSlcbiAqXG4gKiAvLyBub3cgYHJlbWVtYmVyTWUgPSB0cnVlYCBmaXJzdCwgdGhlbiBieSBuYW1lLCB0aGVuIGJ5IGFnZVxuICogY29uc3QgTzIgPSBjb25jYXRBbGwoTSkoW3JldmVyc2UoYnlSZW1lbWJlck1lKSwgYnlOYW1lLCBieUFnZV0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvcnQoTzIpKHVzZXJzKSwgW1xuICogICB7IGlkOiA0LCBuYW1lOiAnR2l1bGlvJywgYWdlOiA0NCwgcmVtZW1iZXJNZTogdHJ1ZSB9LFxuICogICB7IGlkOiAyLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ2LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDMsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiAxLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ3LCByZW1lbWJlck1lOiBmYWxzZSB9XG4gKiBdKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRTZW1pZ3JvdXAoKS5jb25jYXQsXG4gICAgZW1wdHk6IGZyb21Db21wYXJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIDA7IH0pXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29udHJhdmFyaWFudCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBjb250cmFtYXA6IGNvbnRyYW1hcF9cbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJpdmlhbCA9IHtcbiAgICBlcXVhbHM6IGNvbnN0VHJ1ZSxcbiAgICBjb21wYXJlOiAvKiNfX1BVUkVfXyovIGNvbnN0YW50KDApXG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZXF1YWxzID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IDA7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb25lIHZhbHVlIGlzIF9zdHJpY3RseSBsZXNzIHRoYW5fIGFub3RoZXJcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBsdCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IC0xO1xuICAgIH07XG59O1xuLy8gVE9ETzogY3VycnkgaW4gdjNcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9uZSB2YWx1ZSBpcyBfc3RyaWN0bHkgZ3JlYXRlciB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ3QgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gTy5jb21wYXJlKGZpcnN0LCBzZWNvbmQpID09PSAxO1xuICAgIH07XG59O1xuLy8gVE9ETzogY3VycnkgaW4gdjNcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9uZSB2YWx1ZSBpcyBfbm9uLXN0cmljdGx5IGxlc3MgdGhhbl8gYW5vdGhlclxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGxlcSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgIT09IDE7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb25lIHZhbHVlIGlzIF9ub24tc3RyaWN0bHkgZ3JlYXRlciB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2VxID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIE8uY29tcGFyZShmaXJzdCwgc2Vjb25kKSAhPT0gLTE7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUYWtlIHRoZSBtaW5pbXVtIG9mIHR3byB2YWx1ZXMuIElmIHRoZXkgYXJlIGNvbnNpZGVyZWQgZXF1YWwsIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBjaG9zZW5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtaW4gPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPCAxID8gZmlyc3QgOiBzZWNvbmQ7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUYWtlIHRoZSBtYXhpbXVtIG9mIHR3byB2YWx1ZXMuIElmIHRoZXkgYXJlIGNvbnNpZGVyZWQgZXF1YWwsIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBjaG9zZW5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXggPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPiAtMSA/IGZpcnN0IDogc2Vjb25kO1xuICAgIH07XG59O1xuLyoqXG4gKiBDbGFtcCBhIHZhbHVlIGJldHdlZW4gYSBtaW5pbXVtIGFuZCBhIG1heGltdW1cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjbGFtcCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIG1pbk8gPSBtaW4oTyk7XG4gICAgdmFyIG1heE8gPSBtYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChsb3csIGhpKSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbWF4TyhtaW5PKGEsIGhpKSwgbG93KTsgfTsgfTtcbn07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIHZhbHVlIGlzIGJldHdlZW4gYSBtaW5pbXVtIGFuZCBhIG1heGltdW0gKGluY2x1c2l2ZSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBiZXR3ZWVuID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgbHRPID0gbHQoTyk7XG4gICAgdmFyIGd0TyA9IGd0KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAobG93LCBoaSkgeyByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGx0TyhhLCBsb3cpIHx8IGd0TyhhLCBoaSkgPyBmYWxzZSA6IHRydWU7IH07IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgW2B0dXBsZWBdKCN0dXBsZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldFR1cGxlT3JkID0gdHVwbGU7XG4vKipcbiAqIFVzZSBbYHJldmVyc2VgXSgjcmV2ZXJzZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldER1YWxPcmQgPSByZXZlcnNlO1xuLyoqXG4gKiBVc2UgW2BDb250cmF2YXJpYW50YF0oI2NvbnRyYXZhcmlhbnQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmQgPSBDb250cmF2YXJpYW50O1xuLy8gZGVmYXVsdCBjb21wYXJlIGZvciBwcmltaXRpdmUgdHlwZXNcbmZ1bmN0aW9uIGNvbXBhcmUoZmlyc3QsIHNlY29uZCkge1xuICAgIHJldHVybiBmaXJzdCA8IHNlY29uZCA/IC0xIDogZmlyc3QgPiBzZWNvbmQgPyAxIDogMDtcbn1cbnZhciBzdHJpY3RPcmQgPSB7XG4gICAgZXF1YWxzOiBlcVN0cmljdC5lcXVhbHMsXG4gICAgY29tcGFyZTogY29tcGFyZVxufTtcbi8qKlxuICogVXNlIFtgT3JkYF0oLi9ib29sZWFuLnRzLmh0bWwjb3JkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3JkQm9vbGVhbiA9IHN0cmljdE9yZDtcbi8qKlxuICogVXNlIFtgT3JkYF0oLi9zdHJpbmcudHMuaHRtbCNvcmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmRTdHJpbmcgPSBzdHJpY3RPcmQ7XG4vKipcbiAqIFVzZSBbYE9yZGBdKC4vbnVtYmVyLnRzLmh0bWwjb3JkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3JkTnVtYmVyID0gc3RyaWN0T3JkO1xuLyoqXG4gKiBVc2UgW2BPcmRgXSguL0RhdGUudHMuaHRtbCNvcmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmREYXRlID0gLyojX19QVVJFX18qLyBwaXBlKG9yZE51bWJlciwgXG4vKiNfX1BVUkVfXyovXG5jb250cmFtYXAoZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUudmFsdWVPZigpOyB9KSk7XG4iLAogICJpbXBvcnQgeyBlcVN0cmljdCB9IGZyb20gJy4vRXEnO1xuaW1wb3J0IHsgY29uc3RhbnQsIGNvbnN0VHJ1ZSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVmYXVsdHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGRlZmF1bHRzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXF1YWxzRGVmYXVsdCA9IGZ1bmN0aW9uIChjb21wYXJlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBmaXJzdCA9PT0gc2Vjb25kIHx8IGNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IDA7XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUNvbXBhcmUgPSBmdW5jdGlvbiAoY29tcGFyZSkgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGVxdWFsc0RlZmF1bHQoY29tcGFyZSksXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIChmaXJzdCA9PT0gc2Vjb25kID8gMCA6IGNvbXBhcmUoZmlyc3QsIHNlY29uZCkpOyB9XG59KTsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbWJpbmF0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEdpdmVuIGEgdHVwbGUgb2YgYE9yZGBzIHJldHVybnMgYW4gYE9yZGAgZm9yIHRoZSB0dXBsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdHVwbGUgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE8gPSB0dXBsZShTLk9yZCwgTi5PcmQsIEIuT3JkKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShbJ2EnLCAxLCB0cnVlXSwgWydiJywgMiwgdHJ1ZV0pLCAtMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoWydhJywgMSwgdHJ1ZV0sIFsnYScsIDIsIHRydWVdKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKFsnYScsIDEsIHRydWVdLCBbJ2EnLCAxLCBmYWxzZV0pLCAxKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB0dXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3JkcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9yZHNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIGZyb21Db21wYXJlKGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBvcmRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgdmFyIHIgPSBvcmRzW2ldLmNvbXBhcmUoZmlyc3RbaV0sIHNlY29uZFtpXSk7XG4gICAgICAgICAgICBpZiAociAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmRzW2ldLmNvbXBhcmUoZmlyc3RbaV0sIHNlY29uZFtpXSk7XG4gICAgfSk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmV2ZXJzZSA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiBmcm9tQ29tcGFyZShmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gTy5jb21wYXJlKHNlY29uZCwgZmlyc3QpOyB9KTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgY29udHJhbWFwXyA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgY29udHJhbWFwKGYpKTsgfTtcbi8qKlxuICogQSB0eXBpY2FsIHVzZSBjYXNlIGZvciBgY29udHJhbWFwYCB3b3VsZCBiZSBsaWtlLCBnaXZlbiBzb21lIGBVc2VyYCB0eXBlLCB0byBjb25zdHJ1Y3QgYW4gYE9yZDxVc2VyPmAuXG4gKlxuICogV2UgY2FuIGRvIHNvIHdpdGggYSBmdW5jdGlvbiBmcm9tIGBVc2VyIC0+IFhgIHdoZXJlIGBYYCBpcyBzb21lIHZhbHVlIHRoYXQgd2Uga25vdyBob3cgdG8gY29tcGFyZVxuICogZm9yIG9yZGVyaW5nIChtZWFuaW5nIHdlIGhhdmUgYW4gYE9yZDxYPmApXG4gKlxuICogRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBmb2xsb3dpbmcgYFVzZXJgIHR5cGUsIHRoZXJlIGFyZSBsb3RzIG9mIHBvc3NpYmxlIGNob2ljZXMgZm9yIGBYYCxcbiAqIGJ1dCBsZXQncyBzYXkgd2Ugd2FudCB0byBzb3J0IGEgbGlzdCBvZiB1c2VycyBieSBgbGFzdE5hbWVgLlxuICpcbiAqIElmIHdlIGhhdmUgYSB3YXkgb2YgY29tcGFyaW5nIGBsYXN0TmFtZWBzIGZvciBvcmRlcmluZyAoYG9yZExhc3ROYW1lOiBPcmQ8c3RyaW5nPmApIGFuZCB3ZSBrbm93IGhvdyB0byBnbyBmcm9tIGBVc2VyIC0+IHN0cmluZ2AsXG4gKiB1c2luZyBgY29udHJhbWFwYCB3ZSBjYW4gZG8gdGhpc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgeyBjb250cmFtYXAsIE9yZCB9IGZyb20gJ2ZwLXRzL09yZCdcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBpbnRlcmZhY2UgVXNlciB7XG4gKiAgIHJlYWRvbmx5IGZpcnN0TmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGxhc3ROYW1lOiBzdHJpbmdcbiAqIH1cbiAqXG4gKiBjb25zdCBvcmRMYXN0TmFtZTogT3JkPHN0cmluZz4gPSBTLk9yZFxuICpcbiAqIGNvbnN0IG9yZEJ5TGFzdE5hbWU6IE9yZDxVc2VyPiA9IHBpcGUoXG4gKiAgIG9yZExhc3ROYW1lLFxuICogICBjb250cmFtYXAoKHVzZXIpID0+IHVzZXIubGFzdE5hbWUpXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgUkEuc29ydChvcmRCeUxhc3ROYW1lKShbXG4gKiAgICAgeyBmaXJzdE5hbWU6ICdhJywgbGFzdE5hbWU6ICdkJyB9LFxuICogICAgIHsgZmlyc3ROYW1lOiAnYycsIGxhc3ROYW1lOiAnYicgfVxuICogICBdKSxcbiAqICAgW1xuICogICAgIHsgZmlyc3ROYW1lOiAnYycsIGxhc3ROYW1lOiAnYicgfSxcbiAqICAgICB7IGZpcnN0TmFtZTogJ2EnLCBsYXN0TmFtZTogJ2QnIH1cbiAqICAgXVxuICogKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnRyYW1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gZnJvbUNvbXBhcmUoZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZhLmNvbXBhcmUoZihmaXJzdCksIGYoc2Vjb25kKSk7IH0pO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ09yZCc7XG4vKipcbiAqIEEgdHlwaWNhbCB1c2UgY2FzZSBmb3IgdGhlIGBTZW1pZ3JvdXBgIGluc3RhbmNlIG9mIGBPcmRgIGlzIG1lcmdpbmcgdHdvIG9yIG1vcmUgb3JkZXJpbmdzLlxuICpcbiAqIEZvciBleGFtcGxlIHRoZSBmb2xsb3dpbmcgc25pcHBldCBidWlsZHMgYW4gYE9yZGAgZm9yIGEgdHlwZSBgVXNlcmAgd2hpY2hcbiAqIHNvcnRzIGJ5IGBjcmVhdGVkYCBkYXRlIGRlc2NlbmRpbmcsIGFuZCAqKnRoZW4qKiBgbGFzdE5hbWVgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIEQgZnJvbSAnZnAtdHMvRGF0ZSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCB7IGNvbnRyYW1hcCwgZ2V0U2VtaWdyb3VwLCBPcmQsIHJldmVyc2UgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogaW50ZXJmYWNlIFVzZXIge1xuICogICByZWFkb25seSBpZDogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGxhc3ROYW1lOiBzdHJpbmdcbiAqICAgcmVhZG9ubHkgY3JlYXRlZDogRGF0ZVxuICogfVxuICpcbiAqIGNvbnN0IG9yZEJ5TGFzdE5hbWU6IE9yZDxVc2VyPiA9IHBpcGUoXG4gKiAgIFMuT3JkLFxuICogICBjb250cmFtYXAoKHVzZXIpID0+IHVzZXIubGFzdE5hbWUpXG4gKiApXG4gKlxuICogY29uc3Qgb3JkQnlDcmVhdGVkOiBPcmQ8VXNlcj4gPSBwaXBlKFxuICogICBELk9yZCxcbiAqICAgY29udHJhbWFwKCh1c2VyKSA9PiB1c2VyLmNyZWF0ZWQpXG4gKiApXG4gKlxuICogY29uc3Qgb3JkVXNlckJ5Q3JlYXRlZERlc2NUaGVuTGFzdE5hbWUgPSBnZXRTZW1pZ3JvdXA8VXNlcj4oKS5jb25jYXQoXG4gKiAgIHJldmVyc2Uob3JkQnlDcmVhdGVkKSxcbiAqICAgb3JkQnlMYXN0TmFtZVxuICogKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIFJBLnNvcnQob3JkVXNlckJ5Q3JlYXRlZERlc2NUaGVuTGFzdE5hbWUpKFtcbiAqICAgICB7IGlkOiAnYycsIGxhc3ROYW1lOiAnZCcsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5NzMsIDEwLCAzMCkgfSxcbiAqICAgICB7IGlkOiAnYScsIGxhc3ROYW1lOiAnYicsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5NzMsIDEwLCAzMCkgfSxcbiAqICAgICB7IGlkOiAnZScsIGxhc3ROYW1lOiAnZicsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5ODAsIDEwLCAzMCkgfVxuICogICBdKSxcbiAqICAgW1xuICogICAgIHsgaWQ6ICdlJywgbGFzdE5hbWU6ICdmJywgY3JlYXRlZDogbmV3IERhdGUoMTk4MCwgMTAsIDMwKSB9LFxuICogICAgIHsgaWQ6ICdhJywgbGFzdE5hbWU6ICdiJywgY3JlYXRlZDogbmV3IERhdGUoMTk3MywgMTAsIDMwKSB9LFxuICogICAgIHsgaWQ6ICdjJywgbGFzdE5hbWU6ICdkJywgY3JlYXRlZDogbmV3IERhdGUoMTk3MywgMTAsIDMwKSB9XG4gKiAgIF1cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZyb21Db21wYXJlKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICB2YXIgb3ggPSBmaXJzdC5jb21wYXJlKGEsIGIpO1xuICAgICAgICAgICAgcmV0dXJuIG94ICE9PSAwID8gb3ggOiBzZWNvbmQuY29tcGFyZShhLCBiKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSk7IH07XG4vKipcbiAqIFJldHVybnMgYSBgTW9ub2lkYCBzdWNoIHRoYXQ6XG4gKlxuICogLSBpdHMgYGNvbmNhdChvcmQxLCBvcmQyKWAgb3BlcmF0aW9uIHdpbGwgb3JkZXIgZmlyc3QgYnkgYG9yZDFgLCBhbmQgdGhlbiBieSBgb3JkMmBcbiAqIC0gaXRzIGBlbXB0eWAgdmFsdWUgaXMgYW4gYE9yZGAgdGhhdCBhbHdheXMgY29uc2lkZXJzIGNvbXBhcmVkIGVsZW1lbnRzIGVxdWFsXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvcnQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IGNvbnRyYW1hcCwgcmV2ZXJzZSwgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3JkJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tICdmcC10cy9Nb25vaWQnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBpbnRlcmZhY2UgVXNlciB7XG4gKiAgIHJlYWRvbmx5IGlkOiBudW1iZXJcbiAqICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGFnZTogbnVtYmVyXG4gKiAgIHJlYWRvbmx5IHJlbWVtYmVyTWU6IGJvb2xlYW5cbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFxuICogICBTLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLm5hbWUpXG4gKiApXG4gKlxuICogY29uc3QgYnlBZ2UgPSBwaXBlKFxuICogICBOLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLmFnZSlcbiAqIClcbiAqXG4gKiBjb25zdCBieVJlbWVtYmVyTWUgPSBwaXBlKFxuICogICBCLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLnJlbWVtYmVyTWUpXG4gKiApXG4gKlxuICogY29uc3QgTSA9IGdldE1vbm9pZDxVc2VyPigpXG4gKlxuICogY29uc3QgdXNlcnM6IEFycmF5PFVzZXI+ID0gW1xuICogICB7IGlkOiAxLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ3LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiAyLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ2LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDMsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiA0LCBuYW1lOiAnR2l1bGlvJywgYWdlOiA0NCwgcmVtZW1iZXJNZTogdHJ1ZSB9XG4gKiBdXG4gKlxuICogLy8gc29ydCBieSBuYW1lLCB0aGVuIGJ5IGFnZSwgdGhlbiBieSBgcmVtZW1iZXJNZWBcbiAqIGNvbnN0IE8xID0gY29uY2F0QWxsKE0pKFtieU5hbWUsIGJ5QWdlLCBieVJlbWVtYmVyTWVdKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb3J0KE8xKSh1c2VycyksIFtcbiAqICAgeyBpZDogMywgbmFtZTogJ0dpdWxpbycsIGFnZTogNDQsIHJlbWVtYmVyTWU6IGZhbHNlIH0sXG4gKiAgIHsgaWQ6IDQsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDIsIG5hbWU6ICdHdWlkbycsIGFnZTogNDYsIHJlbWVtYmVyTWU6IHRydWUgfSxcbiAqICAgeyBpZDogMSwgbmFtZTogJ0d1aWRvJywgYWdlOiA0NywgcmVtZW1iZXJNZTogZmFsc2UgfVxuICogXSlcbiAqXG4gKiAvLyBub3cgYHJlbWVtYmVyTWUgPSB0cnVlYCBmaXJzdCwgdGhlbiBieSBuYW1lLCB0aGVuIGJ5IGFnZVxuICogY29uc3QgTzIgPSBjb25jYXRBbGwoTSkoW3JldmVyc2UoYnlSZW1lbWJlck1lKSwgYnlOYW1lLCBieUFnZV0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvcnQoTzIpKHVzZXJzKSwgW1xuICogICB7IGlkOiA0LCBuYW1lOiAnR2l1bGlvJywgYWdlOiA0NCwgcmVtZW1iZXJNZTogdHJ1ZSB9LFxuICogICB7IGlkOiAyLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ2LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDMsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiAxLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ3LCByZW1lbWJlck1lOiBmYWxzZSB9XG4gKiBdKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRTZW1pZ3JvdXAoKS5jb25jYXQsXG4gICAgZW1wdHk6IGZyb21Db21wYXJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIDA7IH0pXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29udHJhdmFyaWFudCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBjb250cmFtYXA6IGNvbnRyYW1hcF9cbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJpdmlhbCA9IHtcbiAgICBlcXVhbHM6IGNvbnN0VHJ1ZSxcbiAgICBjb21wYXJlOiAvKiNfX1BVUkVfXyovIGNvbnN0YW50KDApXG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZXF1YWxzID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IDA7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb25lIHZhbHVlIGlzIF9zdHJpY3RseSBsZXNzIHRoYW5fIGFub3RoZXJcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBsdCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IC0xO1xuICAgIH07XG59O1xuLy8gVE9ETzogY3VycnkgaW4gdjNcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9uZSB2YWx1ZSBpcyBfc3RyaWN0bHkgZ3JlYXRlciB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ3QgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gTy5jb21wYXJlKGZpcnN0LCBzZWNvbmQpID09PSAxO1xuICAgIH07XG59O1xuLy8gVE9ETzogY3VycnkgaW4gdjNcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9uZSB2YWx1ZSBpcyBfbm9uLXN0cmljdGx5IGxlc3MgdGhhbl8gYW5vdGhlclxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGxlcSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgIT09IDE7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb25lIHZhbHVlIGlzIF9ub24tc3RyaWN0bHkgZ3JlYXRlciB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2VxID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIE8uY29tcGFyZShmaXJzdCwgc2Vjb25kKSAhPT0gLTE7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUYWtlIHRoZSBtaW5pbXVtIG9mIHR3byB2YWx1ZXMuIElmIHRoZXkgYXJlIGNvbnNpZGVyZWQgZXF1YWwsIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBjaG9zZW5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtaW4gPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPCAxID8gZmlyc3QgOiBzZWNvbmQ7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUYWtlIHRoZSBtYXhpbXVtIG9mIHR3byB2YWx1ZXMuIElmIHRoZXkgYXJlIGNvbnNpZGVyZWQgZXF1YWwsIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBjaG9zZW5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXggPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPiAtMSA/IGZpcnN0IDogc2Vjb25kO1xuICAgIH07XG59O1xuLyoqXG4gKiBDbGFtcCBhIHZhbHVlIGJldHdlZW4gYSBtaW5pbXVtIGFuZCBhIG1heGltdW1cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjbGFtcCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIG1pbk8gPSBtaW4oTyk7XG4gICAgdmFyIG1heE8gPSBtYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChsb3csIGhpKSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbWF4TyhtaW5PKGEsIGhpKSwgbG93KTsgfTsgfTtcbn07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIHZhbHVlIGlzIGJldHdlZW4gYSBtaW5pbXVtIGFuZCBhIG1heGltdW0gKGluY2x1c2l2ZSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBiZXR3ZWVuID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgbHRPID0gbHQoTyk7XG4gICAgdmFyIGd0TyA9IGd0KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAobG93LCBoaSkgeyByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGx0TyhhLCBsb3cpIHx8IGd0TyhhLCBoaSkgPyBmYWxzZSA6IHRydWU7IH07IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgW2B0dXBsZWBdKCN0dXBsZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldFR1cGxlT3JkID0gdHVwbGU7XG4vKipcbiAqIFVzZSBbYHJldmVyc2VgXSgjcmV2ZXJzZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldER1YWxPcmQgPSByZXZlcnNlO1xuLyoqXG4gKiBVc2UgW2BDb250cmF2YXJpYW50YF0oI2NvbnRyYXZhcmlhbnQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmQgPSBDb250cmF2YXJpYW50O1xuLy8gZGVmYXVsdCBjb21wYXJlIGZvciBwcmltaXRpdmUgdHlwZXNcbmZ1bmN0aW9uIGNvbXBhcmUoZmlyc3QsIHNlY29uZCkge1xuICAgIHJldHVybiBmaXJzdCA8IHNlY29uZCA/IC0xIDogZmlyc3QgPiBzZWNvbmQgPyAxIDogMDtcbn1cbnZhciBzdHJpY3RPcmQgPSB7XG4gICAgZXF1YWxzOiBlcVN0cmljdC5lcXVhbHMsXG4gICAgY29tcGFyZTogY29tcGFyZVxufTtcbi8qKlxuICogVXNlIFtgT3JkYF0oLi9ib29sZWFuLnRzLmh0bWwjb3JkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3JkQm9vbGVhbiA9IHN0cmljdE9yZDtcbi8qKlxuICogVXNlIFtgT3JkYF0oLi9zdHJpbmcudHMuaHRtbCNvcmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmRTdHJpbmcgPSBzdHJpY3RPcmQ7XG4vKipcbiAqIFVzZSBbYE9yZGBdKC4vbnVtYmVyLnRzLmh0bWwjb3JkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3JkTnVtYmVyID0gc3RyaWN0T3JkO1xuLyoqXG4gKiBVc2UgW2BPcmRgXSguL0RhdGUudHMuaHRtbCNvcmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmREYXRlID0gLyojX19QVVJFX18qLyBwaXBlKG9yZE51bWJlciwgXG4vKiNfX1BVUkVfXyovXG5jb250cmFtYXAoZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUudmFsdWVPZigpOyB9KSk7XG4iLAogICJpbXBvcnQgeyBlcVN0cmljdCB9IGZyb20gJy4vRXEnO1xuaW1wb3J0IHsgY29uc3RhbnQsIGNvbnN0VHJ1ZSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVmYXVsdHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGRlZmF1bHRzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXF1YWxzRGVmYXVsdCA9IGZ1bmN0aW9uIChjb21wYXJlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBmaXJzdCA9PT0gc2Vjb25kIHx8IGNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IDA7XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUNvbXBhcmUgPSBmdW5jdGlvbiAoY29tcGFyZSkgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGVxdWFsc0RlZmF1bHQoY29tcGFyZSksXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIChmaXJzdCA9PT0gc2Vjb25kID8gMCA6IGNvbXBhcmUoZmlyc3QsIHNlY29uZCkpOyB9XG59KTsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbWJpbmF0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEdpdmVuIGEgdHVwbGUgb2YgYE9yZGBzIHJldHVybnMgYW4gYE9yZGAgZm9yIHRoZSB0dXBsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdHVwbGUgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE8gPSB0dXBsZShTLk9yZCwgTi5PcmQsIEIuT3JkKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShbJ2EnLCAxLCB0cnVlXSwgWydiJywgMiwgdHJ1ZV0pLCAtMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoWydhJywgMSwgdHJ1ZV0sIFsnYScsIDIsIHRydWVdKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKFsnYScsIDEsIHRydWVdLCBbJ2EnLCAxLCBmYWxzZV0pLCAxKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB0dXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3JkcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9yZHNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIGZyb21Db21wYXJlKGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBvcmRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgdmFyIHIgPSBvcmRzW2ldLmNvbXBhcmUoZmlyc3RbaV0sIHNlY29uZFtpXSk7XG4gICAgICAgICAgICBpZiAociAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmRzW2ldLmNvbXBhcmUoZmlyc3RbaV0sIHNlY29uZFtpXSk7XG4gICAgfSk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmV2ZXJzZSA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiBmcm9tQ29tcGFyZShmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gTy5jb21wYXJlKHNlY29uZCwgZmlyc3QpOyB9KTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgY29udHJhbWFwXyA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgY29udHJhbWFwKGYpKTsgfTtcbi8qKlxuICogQSB0eXBpY2FsIHVzZSBjYXNlIGZvciBgY29udHJhbWFwYCB3b3VsZCBiZSBsaWtlLCBnaXZlbiBzb21lIGBVc2VyYCB0eXBlLCB0byBjb25zdHJ1Y3QgYW4gYE9yZDxVc2VyPmAuXG4gKlxuICogV2UgY2FuIGRvIHNvIHdpdGggYSBmdW5jdGlvbiBmcm9tIGBVc2VyIC0+IFhgIHdoZXJlIGBYYCBpcyBzb21lIHZhbHVlIHRoYXQgd2Uga25vdyBob3cgdG8gY29tcGFyZVxuICogZm9yIG9yZGVyaW5nIChtZWFuaW5nIHdlIGhhdmUgYW4gYE9yZDxYPmApXG4gKlxuICogRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBmb2xsb3dpbmcgYFVzZXJgIHR5cGUsIHRoZXJlIGFyZSBsb3RzIG9mIHBvc3NpYmxlIGNob2ljZXMgZm9yIGBYYCxcbiAqIGJ1dCBsZXQncyBzYXkgd2Ugd2FudCB0byBzb3J0IGEgbGlzdCBvZiB1c2VycyBieSBgbGFzdE5hbWVgLlxuICpcbiAqIElmIHdlIGhhdmUgYSB3YXkgb2YgY29tcGFyaW5nIGBsYXN0TmFtZWBzIGZvciBvcmRlcmluZyAoYG9yZExhc3ROYW1lOiBPcmQ8c3RyaW5nPmApIGFuZCB3ZSBrbm93IGhvdyB0byBnbyBmcm9tIGBVc2VyIC0+IHN0cmluZ2AsXG4gKiB1c2luZyBgY29udHJhbWFwYCB3ZSBjYW4gZG8gdGhpc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgeyBjb250cmFtYXAsIE9yZCB9IGZyb20gJ2ZwLXRzL09yZCdcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBpbnRlcmZhY2UgVXNlciB7XG4gKiAgIHJlYWRvbmx5IGZpcnN0TmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGxhc3ROYW1lOiBzdHJpbmdcbiAqIH1cbiAqXG4gKiBjb25zdCBvcmRMYXN0TmFtZTogT3JkPHN0cmluZz4gPSBTLk9yZFxuICpcbiAqIGNvbnN0IG9yZEJ5TGFzdE5hbWU6IE9yZDxVc2VyPiA9IHBpcGUoXG4gKiAgIG9yZExhc3ROYW1lLFxuICogICBjb250cmFtYXAoKHVzZXIpID0+IHVzZXIubGFzdE5hbWUpXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgUkEuc29ydChvcmRCeUxhc3ROYW1lKShbXG4gKiAgICAgeyBmaXJzdE5hbWU6ICdhJywgbGFzdE5hbWU6ICdkJyB9LFxuICogICAgIHsgZmlyc3ROYW1lOiAnYycsIGxhc3ROYW1lOiAnYicgfVxuICogICBdKSxcbiAqICAgW1xuICogICAgIHsgZmlyc3ROYW1lOiAnYycsIGxhc3ROYW1lOiAnYicgfSxcbiAqICAgICB7IGZpcnN0TmFtZTogJ2EnLCBsYXN0TmFtZTogJ2QnIH1cbiAqICAgXVxuICogKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbnRyYW1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gZnJvbUNvbXBhcmUoZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZhLmNvbXBhcmUoZihmaXJzdCksIGYoc2Vjb25kKSk7IH0pO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ09yZCc7XG4vKipcbiAqIEEgdHlwaWNhbCB1c2UgY2FzZSBmb3IgdGhlIGBTZW1pZ3JvdXBgIGluc3RhbmNlIG9mIGBPcmRgIGlzIG1lcmdpbmcgdHdvIG9yIG1vcmUgb3JkZXJpbmdzLlxuICpcbiAqIEZvciBleGFtcGxlIHRoZSBmb2xsb3dpbmcgc25pcHBldCBidWlsZHMgYW4gYE9yZGAgZm9yIGEgdHlwZSBgVXNlcmAgd2hpY2hcbiAqIHNvcnRzIGJ5IGBjcmVhdGVkYCBkYXRlIGRlc2NlbmRpbmcsIGFuZCAqKnRoZW4qKiBgbGFzdE5hbWVgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIEQgZnJvbSAnZnAtdHMvRGF0ZSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCB7IGNvbnRyYW1hcCwgZ2V0U2VtaWdyb3VwLCBPcmQsIHJldmVyc2UgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogaW50ZXJmYWNlIFVzZXIge1xuICogICByZWFkb25seSBpZDogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGxhc3ROYW1lOiBzdHJpbmdcbiAqICAgcmVhZG9ubHkgY3JlYXRlZDogRGF0ZVxuICogfVxuICpcbiAqIGNvbnN0IG9yZEJ5TGFzdE5hbWU6IE9yZDxVc2VyPiA9IHBpcGUoXG4gKiAgIFMuT3JkLFxuICogICBjb250cmFtYXAoKHVzZXIpID0+IHVzZXIubGFzdE5hbWUpXG4gKiApXG4gKlxuICogY29uc3Qgb3JkQnlDcmVhdGVkOiBPcmQ8VXNlcj4gPSBwaXBlKFxuICogICBELk9yZCxcbiAqICAgY29udHJhbWFwKCh1c2VyKSA9PiB1c2VyLmNyZWF0ZWQpXG4gKiApXG4gKlxuICogY29uc3Qgb3JkVXNlckJ5Q3JlYXRlZERlc2NUaGVuTGFzdE5hbWUgPSBnZXRTZW1pZ3JvdXA8VXNlcj4oKS5jb25jYXQoXG4gKiAgIHJldmVyc2Uob3JkQnlDcmVhdGVkKSxcbiAqICAgb3JkQnlMYXN0TmFtZVxuICogKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIFJBLnNvcnQob3JkVXNlckJ5Q3JlYXRlZERlc2NUaGVuTGFzdE5hbWUpKFtcbiAqICAgICB7IGlkOiAnYycsIGxhc3ROYW1lOiAnZCcsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5NzMsIDEwLCAzMCkgfSxcbiAqICAgICB7IGlkOiAnYScsIGxhc3ROYW1lOiAnYicsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5NzMsIDEwLCAzMCkgfSxcbiAqICAgICB7IGlkOiAnZScsIGxhc3ROYW1lOiAnZicsIGNyZWF0ZWQ6IG5ldyBEYXRlKDE5ODAsIDEwLCAzMCkgfVxuICogICBdKSxcbiAqICAgW1xuICogICAgIHsgaWQ6ICdlJywgbGFzdE5hbWU6ICdmJywgY3JlYXRlZDogbmV3IERhdGUoMTk4MCwgMTAsIDMwKSB9LFxuICogICAgIHsgaWQ6ICdhJywgbGFzdE5hbWU6ICdiJywgY3JlYXRlZDogbmV3IERhdGUoMTk3MywgMTAsIDMwKSB9LFxuICogICAgIHsgaWQ6ICdjJywgbGFzdE5hbWU6ICdkJywgY3JlYXRlZDogbmV3IERhdGUoMTk3MywgMTAsIDMwKSB9XG4gKiAgIF1cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZyb21Db21wYXJlKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICB2YXIgb3ggPSBmaXJzdC5jb21wYXJlKGEsIGIpO1xuICAgICAgICAgICAgcmV0dXJuIG94ICE9PSAwID8gb3ggOiBzZWNvbmQuY29tcGFyZShhLCBiKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSk7IH07XG4vKipcbiAqIFJldHVybnMgYSBgTW9ub2lkYCBzdWNoIHRoYXQ6XG4gKlxuICogLSBpdHMgYGNvbmNhdChvcmQxLCBvcmQyKWAgb3BlcmF0aW9uIHdpbGwgb3JkZXIgZmlyc3QgYnkgYG9yZDFgLCBhbmQgdGhlbiBieSBgb3JkMmBcbiAqIC0gaXRzIGBlbXB0eWAgdmFsdWUgaXMgYW4gYE9yZGAgdGhhdCBhbHdheXMgY29uc2lkZXJzIGNvbXBhcmVkIGVsZW1lbnRzIGVxdWFsXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvcnQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IGNvbnRyYW1hcCwgcmV2ZXJzZSwgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3JkJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tICdmcC10cy9Nb25vaWQnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBpbnRlcmZhY2UgVXNlciB7XG4gKiAgIHJlYWRvbmx5IGlkOiBudW1iZXJcbiAqICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGFnZTogbnVtYmVyXG4gKiAgIHJlYWRvbmx5IHJlbWVtYmVyTWU6IGJvb2xlYW5cbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFxuICogICBTLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLm5hbWUpXG4gKiApXG4gKlxuICogY29uc3QgYnlBZ2UgPSBwaXBlKFxuICogICBOLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLmFnZSlcbiAqIClcbiAqXG4gKiBjb25zdCBieVJlbWVtYmVyTWUgPSBwaXBlKFxuICogICBCLk9yZCxcbiAqICAgY29udHJhbWFwKChwOiBVc2VyKSA9PiBwLnJlbWVtYmVyTWUpXG4gKiApXG4gKlxuICogY29uc3QgTSA9IGdldE1vbm9pZDxVc2VyPigpXG4gKlxuICogY29uc3QgdXNlcnM6IEFycmF5PFVzZXI+ID0gW1xuICogICB7IGlkOiAxLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ3LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiAyLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ2LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDMsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiA0LCBuYW1lOiAnR2l1bGlvJywgYWdlOiA0NCwgcmVtZW1iZXJNZTogdHJ1ZSB9XG4gKiBdXG4gKlxuICogLy8gc29ydCBieSBuYW1lLCB0aGVuIGJ5IGFnZSwgdGhlbiBieSBgcmVtZW1iZXJNZWBcbiAqIGNvbnN0IE8xID0gY29uY2F0QWxsKE0pKFtieU5hbWUsIGJ5QWdlLCBieVJlbWVtYmVyTWVdKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb3J0KE8xKSh1c2VycyksIFtcbiAqICAgeyBpZDogMywgbmFtZTogJ0dpdWxpbycsIGFnZTogNDQsIHJlbWVtYmVyTWU6IGZhbHNlIH0sXG4gKiAgIHsgaWQ6IDQsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDIsIG5hbWU6ICdHdWlkbycsIGFnZTogNDYsIHJlbWVtYmVyTWU6IHRydWUgfSxcbiAqICAgeyBpZDogMSwgbmFtZTogJ0d1aWRvJywgYWdlOiA0NywgcmVtZW1iZXJNZTogZmFsc2UgfVxuICogXSlcbiAqXG4gKiAvLyBub3cgYHJlbWVtYmVyTWUgPSB0cnVlYCBmaXJzdCwgdGhlbiBieSBuYW1lLCB0aGVuIGJ5IGFnZVxuICogY29uc3QgTzIgPSBjb25jYXRBbGwoTSkoW3JldmVyc2UoYnlSZW1lbWJlck1lKSwgYnlOYW1lLCBieUFnZV0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvcnQoTzIpKHVzZXJzKSwgW1xuICogICB7IGlkOiA0LCBuYW1lOiAnR2l1bGlvJywgYWdlOiA0NCwgcmVtZW1iZXJNZTogdHJ1ZSB9LFxuICogICB7IGlkOiAyLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ2LCByZW1lbWJlck1lOiB0cnVlIH0sXG4gKiAgIHsgaWQ6IDMsIG5hbWU6ICdHaXVsaW8nLCBhZ2U6IDQ0LCByZW1lbWJlck1lOiBmYWxzZSB9LFxuICogICB7IGlkOiAxLCBuYW1lOiAnR3VpZG8nLCBhZ2U6IDQ3LCByZW1lbWJlck1lOiBmYWxzZSB9XG4gKiBdKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRTZW1pZ3JvdXAoKS5jb25jYXQsXG4gICAgZW1wdHk6IGZyb21Db21wYXJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIDA7IH0pXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29udHJhdmFyaWFudCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBjb250cmFtYXA6IGNvbnRyYW1hcF9cbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJpdmlhbCA9IHtcbiAgICBlcXVhbHM6IGNvbnN0VHJ1ZSxcbiAgICBjb21wYXJlOiAvKiNfX1BVUkVfXyovIGNvbnN0YW50KDApXG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZXF1YWxzID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IDA7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb25lIHZhbHVlIGlzIF9zdHJpY3RseSBsZXNzIHRoYW5fIGFub3RoZXJcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBsdCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPT09IC0xO1xuICAgIH07XG59O1xuLy8gVE9ETzogY3VycnkgaW4gdjNcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9uZSB2YWx1ZSBpcyBfc3RyaWN0bHkgZ3JlYXRlciB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ3QgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gTy5jb21wYXJlKGZpcnN0LCBzZWNvbmQpID09PSAxO1xuICAgIH07XG59O1xuLy8gVE9ETzogY3VycnkgaW4gdjNcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9uZSB2YWx1ZSBpcyBfbm9uLXN0cmljdGx5IGxlc3MgdGhhbl8gYW5vdGhlclxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGxlcSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgIT09IDE7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb25lIHZhbHVlIGlzIF9ub24tc3RyaWN0bHkgZ3JlYXRlciB0aGFuXyBhbm90aGVyXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2VxID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIE8uY29tcGFyZShmaXJzdCwgc2Vjb25kKSAhPT0gLTE7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUYWtlIHRoZSBtaW5pbXVtIG9mIHR3byB2YWx1ZXMuIElmIHRoZXkgYXJlIGNvbnNpZGVyZWQgZXF1YWwsIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBjaG9zZW5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtaW4gPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPCAxID8gZmlyc3QgOiBzZWNvbmQ7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBpbiB2M1xuLyoqXG4gKiBUYWtlIHRoZSBtYXhpbXVtIG9mIHR3byB2YWx1ZXMuIElmIHRoZXkgYXJlIGNvbnNpZGVyZWQgZXF1YWwsIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBjaG9zZW5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXggPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZmlyc3QgPT09IHNlY29uZCB8fCBPLmNvbXBhcmUoZmlyc3QsIHNlY29uZCkgPiAtMSA/IGZpcnN0IDogc2Vjb25kO1xuICAgIH07XG59O1xuLyoqXG4gKiBDbGFtcCBhIHZhbHVlIGJldHdlZW4gYSBtaW5pbXVtIGFuZCBhIG1heGltdW1cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjbGFtcCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIG1pbk8gPSBtaW4oTyk7XG4gICAgdmFyIG1heE8gPSBtYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChsb3csIGhpKSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbWF4TyhtaW5PKGEsIGhpKSwgbG93KTsgfTsgfTtcbn07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIHZhbHVlIGlzIGJldHdlZW4gYSBtaW5pbXVtIGFuZCBhIG1heGltdW0gKGluY2x1c2l2ZSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBiZXR3ZWVuID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgbHRPID0gbHQoTyk7XG4gICAgdmFyIGd0TyA9IGd0KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAobG93LCBoaSkgeyByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGx0TyhhLCBsb3cpIHx8IGd0TyhhLCBoaSkgPyBmYWxzZSA6IHRydWU7IH07IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgW2B0dXBsZWBdKCN0dXBsZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldFR1cGxlT3JkID0gdHVwbGU7XG4vKipcbiAqIFVzZSBbYHJldmVyc2VgXSgjcmV2ZXJzZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldER1YWxPcmQgPSByZXZlcnNlO1xuLyoqXG4gKiBVc2UgW2BDb250cmF2YXJpYW50YF0oI2NvbnRyYXZhcmlhbnQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmQgPSBDb250cmF2YXJpYW50O1xuLy8gZGVmYXVsdCBjb21wYXJlIGZvciBwcmltaXRpdmUgdHlwZXNcbmZ1bmN0aW9uIGNvbXBhcmUoZmlyc3QsIHNlY29uZCkge1xuICAgIHJldHVybiBmaXJzdCA8IHNlY29uZCA/IC0xIDogZmlyc3QgPiBzZWNvbmQgPyAxIDogMDtcbn1cbnZhciBzdHJpY3RPcmQgPSB7XG4gICAgZXF1YWxzOiBlcVN0cmljdC5lcXVhbHMsXG4gICAgY29tcGFyZTogY29tcGFyZVxufTtcbi8qKlxuICogVXNlIFtgT3JkYF0oLi9ib29sZWFuLnRzLmh0bWwjb3JkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3JkQm9vbGVhbiA9IHN0cmljdE9yZDtcbi8qKlxuICogVXNlIFtgT3JkYF0oLi9zdHJpbmcudHMuaHRtbCNvcmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmRTdHJpbmcgPSBzdHJpY3RPcmQ7XG4vKipcbiAqIFVzZSBbYE9yZGBdKC4vbnVtYmVyLnRzLmh0bWwjb3JkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3JkTnVtYmVyID0gc3RyaWN0T3JkO1xuLyoqXG4gKiBVc2UgW2BPcmRgXSguL0RhdGUudHMuaHRtbCNvcmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcmREYXRlID0gLyojX19QVVJFX18qLyBwaXBlKG9yZE51bWJlciwgXG4vKiNfX1BVUkVfXyovXG5jb250cmFtYXAoZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUudmFsdWVPZigpOyB9KSk7XG4iLAogICIvKipcbiAqIEEgYE1hZ21hYCBpcyBhIHBhaXIgYChBLCBjb25jYXQpYCBpbiB3aGljaCBgQWAgaXMgYSBub24tZW1wdHkgc2V0IGFuZCBgY29uY2F0YCBpcyBhIGJpbmFyeSBvcGVyYXRpb24gb24gYEFgXG4gKlxuICogU2VlIFtTZW1pZ3JvdXBdKGh0dHBzOi8vZ2NhbnRpLmdpdGh1Yi5pby9mcC10cy9tb2R1bGVzL1NlbWlncm91cC50cy5odG1sKSBmb3Igc29tZSBpbnN0YW5jZXMuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbWJpbmF0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFRoZSBkdWFsIG9mIGEgYE1hZ21hYCwgb2J0YWluZWQgYnkgc3dhcHBpbmcgdGhlIGFyZ3VtZW50cyBvZiBgY29uY2F0YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmV2ZXJzZSwgY29uY2F0QWxsIH0gZnJvbSAnZnAtdHMvTWFnbWEnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBzdWJBbGwgPSBjb25jYXRBbGwocmV2ZXJzZShOLk1hZ21hU3ViKSkoMClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHN1YkFsbChbMSwgMiwgM10pLCAyKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciByZXZlcnNlID0gZnVuY3Rpb24gKE0pIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gTS5jb25jYXQoc2Vjb25kLCBmaXJzdCk7IH1cbn0pOyB9O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyRmlyc3QgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChNKSB7IHJldHVybiAoe1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiAocHJlZGljYXRlKGZpcnN0KSA/IE0uY29uY2F0KGZpcnN0LCBzZWNvbmQpIDogc2Vjb25kKTsgfVxuICAgIH0pOyB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlclNlY29uZCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKE0pIHsgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIChwcmVkaWNhdGUoc2Vjb25kKSA/IE0uY29uY2F0KGZpcnN0LCBzZWNvbmQpIDogZmlyc3QpOyB9XG4gICAgfSk7IH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZW5kbyA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChNKSB7IHJldHVybiAoe1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBNLmNvbmNhdChmKGZpcnN0KSwgZihzZWNvbmQpKTsgfVxuICAgIH0pOyB9O1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEdpdmVuIGEgc2VxdWVuY2Ugb2YgYGFzYCwgY29uY2F0IHRoZW0gYW5kIHJldHVybiB0aGUgdG90YWwuXG4gKlxuICogSWYgYGFzYCBpcyBlbXB0eSwgcmV0dXJuIHRoZSBwcm92aWRlZCBgc3RhcnRXaXRoYCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29uY2F0QWxsIH0gZnJvbSAnZnAtdHMvTWFnbWEnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBzdWJBbGwgPSBjb25jYXRBbGwoTi5NYWdtYVN1YikoMClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHN1YkFsbChbMSwgMiwgM10pLCAtNilcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgY29uY2F0QWxsID0gZnVuY3Rpb24gKE0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHN0YXJ0V2l0aCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgICAgICByZXR1cm4gYXMucmVkdWNlKGZ1bmN0aW9uIChhLCBhY2MpIHsgcmV0dXJuIE0uY29uY2F0KGEsIGFjYyk7IH0sIHN0YXJ0V2l0aCk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4iLAogICIvKipcbiAqIElmIGEgdHlwZSBgQWAgY2FuIGZvcm0gYSBgU2VtaWdyb3VwYCBpdCBoYXMgYW4gKiphc3NvY2lhdGl2ZSoqIGJpbmFyeSBvcGVyYXRpb24uXG4gKlxuICogYGBgdHNcbiAqIGludGVyZmFjZSBTZW1pZ3JvdXA8QT4ge1xuICogICByZWFkb25seSBjb25jYXQ6ICh4OiBBLCB5OiBBKSA9PiBBXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBBc3NvY2lhdGl2aXR5IG1lYW5zIHRoZSBmb2xsb3dpbmcgZXF1YWxpdHkgbXVzdCBob2xkIGZvciBhbnkgY2hvaWNlIG9mIGB4YCwgYHlgLCBhbmQgYHpgLlxuICpcbiAqIGBgYHRzXG4gKiBjb25jYXQoeCwgY29uY2F0KHksIHopKSA9IGNvbmNhdChjb25jYXQoeCwgeSksIHopXG4gKiBgYGBcbiAqXG4gKiBBIGNvbW1vbiBleGFtcGxlIG9mIGEgc2VtaWdyb3VwIGlzIHRoZSB0eXBlIGBzdHJpbmdgIHdpdGggdGhlIG9wZXJhdGlvbiBgK2AuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IFNlbWlncm91cCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqXG4gKiBjb25zdCBzZW1pZ3JvdXBTdHJpbmc6IFNlbWlncm91cDxzdHJpbmc+ID0ge1xuICogICBjb25jYXQ6ICh4LCB5KSA9PiB4ICsgeVxuICogfVxuICpcbiAqIGNvbnN0IHggPSAneCdcbiAqIGNvbnN0IHkgPSAneSdcbiAqIGNvbnN0IHogPSAneidcbiAqXG4gKiBzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHkpIC8vICd4eSdcbiAqXG4gKiBzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHNlbWlncm91cFN0cmluZy5jb25jYXQoeSwgeikpIC8vICd4eXonXG4gKlxuICogc2VtaWdyb3VwU3RyaW5nLmNvbmNhdChzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHkpLCB6KSAvLyAneHl6J1xuICogYGBgXG4gKlxuICogKkFkYXB0ZWQgZnJvbSBodHRwczovL3R5cGVsZXZlbC5vcmcvY2F0cypcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuaW1wb3J0IHsgZ2V0U2VtaWdyb3VwLCBpZGVudGl0eSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCAqIGFzIE0gZnJvbSAnLi9NYWdtYSc7XG5pbXBvcnQgKiBhcyBPciBmcm9tICcuL09yZCc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2V0IGEgc2VtaWdyb3VwIHdoZXJlIGBjb25jYXRgIHdpbGwgcmV0dXJuIHRoZSBtaW5pbXVtLCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgb3JkZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKlxuICogY29uc3QgUzEgPSBTLm1pbihOLk9yZClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdCgxLCAyKSwgMSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWluID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBPci5taW4oTylcbn0pOyB9O1xuLyoqXG4gKiBHZXQgYSBzZW1pZ3JvdXAgd2hlcmUgYGNvbmNhdGAgd2lsbCByZXR1cm4gdGhlIG1heGltdW0sIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBvcmRlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqXG4gKiBjb25zdCBTMSA9IFMubWF4KE4uT3JkKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzEuY29uY2F0KDEsIDIpLCAyKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXggPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IE9yLm1heChPKVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdGFudCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfVxufSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBUaGUgZHVhbCBvZiBhIGBTZW1pZ3JvdXBgLCBvYnRhaW5lZCBieSBzd2FwcGluZyB0aGUgYXJndW1lbnRzIG9mIGBjb25jYXRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXZlcnNlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXZlcnNlKFMuU2VtaWdyb3VwKS5jb25jYXQoJ2EnLCAnYicpLCAnYmEnKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciByZXZlcnNlID0gTS5yZXZlcnNlO1xuLyoqXG4gKiBHaXZlbiBhIHN0cnVjdCBvZiBzZW1pZ3JvdXBzIHJldHVybnMgYSBzZW1pZ3JvdXAgZm9yIHRoZSBzdHJ1Y3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHN0cnVjdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGludGVyZmFjZSBQb2ludCB7XG4gKiAgIHJlYWRvbmx5IHg6IG51bWJlclxuICogICByZWFkb25seSB5OiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBTID0gc3RydWN0PFBvaW50Pih7XG4gKiAgIHg6IE4uU2VtaWdyb3VwU3VtLFxuICogICB5OiBOLlNlbWlncm91cFN1bVxuICogfSlcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuY29uY2F0KHsgeDogMSwgeTogMiB9LCB7IHg6IDMsIHk6IDQgfSksIHsgeDogNCwgeTogNiB9KVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBzdHJ1Y3QgPSBmdW5jdGlvbiAoc2VtaWdyb3VwcykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHZhciByID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gc2VtaWdyb3Vwcykge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwoc2VtaWdyb3VwcywgaykpIHtcbiAgICAgICAgICAgICAgICByW2tdID0gc2VtaWdyb3Vwc1trXS5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxufSk7IH07XG4vKipcbiAqIEdpdmVuIGEgdHVwbGUgb2Ygc2VtaWdyb3VwcyByZXR1cm5zIGEgc2VtaWdyb3VwIGZvciB0aGUgdHVwbGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgQiBmcm9tICdmcC10cy9ib29sZWFuJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBjb25zdCBTMSA9IHR1cGxlKFMuU2VtaWdyb3VwLCBOLlNlbWlncm91cFN1bSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzEuY29uY2F0KFsnYScsIDFdLCBbJ2InLCAyXSksIFsnYWInLCAzXSlcbiAqXG4gKiBjb25zdCBTMiA9IHR1cGxlKFMuU2VtaWdyb3VwLCBOLlNlbWlncm91cFN1bSwgQi5TZW1pZ3JvdXBBbGwpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMyLmNvbmNhdChbJ2EnLCAxLCB0cnVlXSwgWydiJywgMiwgZmFsc2VdKSwgWydhYicsIDMsIGZhbHNlXSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHVwbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbWlncm91cHMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBzZW1pZ3JvdXBzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiAoe1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBzZW1pZ3JvdXBzLm1hcChmdW5jdGlvbiAocywgaSkgeyByZXR1cm4gcy5jb25jYXQoZmlyc3RbaV0sIHNlY29uZFtpXSk7IH0pOyB9XG4gICAgfSk7XG59O1xuLyoqXG4gKiBCZXR3ZWVuIGVhY2ggcGFpciBvZiBlbGVtZW50cyBpbnNlcnQgYG1pZGRsZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGludGVyY2FsYXRlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgUzEgPSBwaXBlKFMuU2VtaWdyb3VwLCBpbnRlcmNhbGF0ZSgnICsgJykpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFMxLmNvbmNhdCgnYScsICdiJyksICdhICsgYicpXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGludGVyY2FsYXRlID0gZnVuY3Rpb24gKG1pZGRsZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gUy5jb25jYXQoeCwgUy5jb25jYXQobWlkZGxlLCB5KSk7IH1cbiAgICB9KTsgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWx3YXlzIHJldHVybiB0aGUgZmlyc3QgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5maXJzdDxudW1iZXI+KCkuY29uY2F0KDEsIDIpLCAxKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmaXJzdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7IGNvbmNhdDogaWRlbnRpdHkgfSk7IH07XG4vKipcbiAqIEFsd2F5cyByZXR1cm4gdGhlIGxhc3QgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5sYXN0PG51bWJlcj4oKS5jb25jYXQoMSwgMiksIDIpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGxhc3QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoeyBjb25jYXQ6IGZ1bmN0aW9uIChfLCB5KSB7IHJldHVybiB5OyB9IH0pOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2l2ZW4gYSBzZXF1ZW5jZSBvZiBgYXNgLCBjb25jYXQgdGhlbSBhbmQgcmV0dXJuIHRoZSB0b3RhbC5cbiAqXG4gKiBJZiBgYXNgIGlzIGVtcHR5LCByZXR1cm4gdGhlIHByb3ZpZGVkIGBzdGFydFdpdGhgIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBzdW0gPSBjb25jYXRBbGwoTi5TZW1pZ3JvdXBTdW0pKDApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzdW0oWzEsIDIsIDNdKSwgNilcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc3VtKFtdKSwgMClcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uY2F0QWxsID0gTS5jb25jYXRBbGw7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFVzZSBgdm9pZGAgbW9kdWxlIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBWb2lkID0gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogVXNlIFtgZ2V0QXNzaWduU2VtaWdyb3VwYF0oLi9zdHJ1Y3QudHMuaHRtbCNnZXRBc3NpZ25TZW1pZ3JvdXApIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRPYmplY3RTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGZpcnN0LCBzZWNvbmQpOyB9XG59KTsgfTtcbi8qKlxuICogVXNlIFtgbGFzdGBdKCNsYXN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TGFzdFNlbWlncm91cCA9IGxhc3Q7XG4vKipcbiAqIFVzZSBbYGZpcnN0YF0oI2ZpcnN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rmlyc3RTZW1pZ3JvdXAgPSBmaXJzdDtcbi8qKlxuICogVXNlIFtgdHVwbGVgXSgjdHVwbGUpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRUdXBsZVNlbWlncm91cCA9IHR1cGxlO1xuLyoqXG4gKiBVc2UgW2BzdHJ1Y3RgXSgjc3RydWN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U3RydWN0U2VtaWdyb3VwID0gc3RydWN0O1xuLyoqXG4gKiBVc2UgW2ByZXZlcnNlYF0oI3JldmVyc2UpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXREdWFsU2VtaWdyb3VwID0gcmV2ZXJzZTtcbi8qKlxuICogVXNlIFtgbWF4YF0oI21heCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEpvaW5TZW1pZ3JvdXAgPSBtYXg7XG4vKipcbiAqIFVzZSBbYG1pbmBdKCNtaW4pIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRNZWV0U2VtaWdyb3VwID0gbWluO1xuLyoqXG4gKiBVc2UgW2BpbnRlcmNhbGF0ZWBdKCNpbnRlcmNhbGF0ZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEludGVyY2FsYXRlU2VtaWdyb3VwID0gaW50ZXJjYWxhdGU7XG5leHBvcnQgZnVuY3Rpb24gZm9sZChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGFydFdpdGgsIGFzKSB7IHJldHVybiAoYXMgPT09IHVuZGVmaW5lZCA/IGNvbmNhdEFsbFMoc3RhcnRXaXRoKSA6IGNvbmNhdEFsbFMoc3RhcnRXaXRoKShhcykpOyB9O1xufVxuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBBbGxgXSguL2Jvb2xlYW4udHMuaHRtbCNTZW1pZ3JvdXBBbGwpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBBbGwgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAmJiB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBBbnlgXSguL2Jvb2xlYW4udHMuaHRtbCNTZW1pZ3JvdXBBbnkpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBBbnkgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCB8fCB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BnZXRTZW1pZ3JvdXBgXSguL2Z1bmN0aW9uLnRzLmh0bWwjZ2V0U2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RnVuY3Rpb25TZW1pZ3JvdXAgPSBnZXRTZW1pZ3JvdXA7XG4vKipcbiAqIFVzZSBbYFNlbWlncm91cGBdKC4vc3RyaW5nLnRzLmh0bWwjU2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgc2VtaWdyb3VwU3RyaW5nID0ge1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggKyB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBTdW1gXSguL251bWJlci50cy5odG1sI1NlbWlncm91cFN1bSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNlbWlncm91cFN1bSA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ICsgeTsgfVxufTtcbi8qKlxuICogVXNlIFtgU2VtaWdyb3VwUHJvZHVjdGBdKC4vbnVtYmVyLnRzLmh0bWwjU2VtaWdyb3VwUHJvZHVjdCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNlbWlncm91cFByb2R1Y3QgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAqIHk7IH1cbn07XG4iLAogICIvKipcbiAqIElmIGEgdHlwZSBgQWAgY2FuIGZvcm0gYSBgU2VtaWdyb3VwYCBpdCBoYXMgYW4gKiphc3NvY2lhdGl2ZSoqIGJpbmFyeSBvcGVyYXRpb24uXG4gKlxuICogYGBgdHNcbiAqIGludGVyZmFjZSBTZW1pZ3JvdXA8QT4ge1xuICogICByZWFkb25seSBjb25jYXQ6ICh4OiBBLCB5OiBBKSA9PiBBXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBBc3NvY2lhdGl2aXR5IG1lYW5zIHRoZSBmb2xsb3dpbmcgZXF1YWxpdHkgbXVzdCBob2xkIGZvciBhbnkgY2hvaWNlIG9mIGB4YCwgYHlgLCBhbmQgYHpgLlxuICpcbiAqIGBgYHRzXG4gKiBjb25jYXQoeCwgY29uY2F0KHksIHopKSA9IGNvbmNhdChjb25jYXQoeCwgeSksIHopXG4gKiBgYGBcbiAqXG4gKiBBIGNvbW1vbiBleGFtcGxlIG9mIGEgc2VtaWdyb3VwIGlzIHRoZSB0eXBlIGBzdHJpbmdgIHdpdGggdGhlIG9wZXJhdGlvbiBgK2AuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IFNlbWlncm91cCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqXG4gKiBjb25zdCBzZW1pZ3JvdXBTdHJpbmc6IFNlbWlncm91cDxzdHJpbmc+ID0ge1xuICogICBjb25jYXQ6ICh4LCB5KSA9PiB4ICsgeVxuICogfVxuICpcbiAqIGNvbnN0IHggPSAneCdcbiAqIGNvbnN0IHkgPSAneSdcbiAqIGNvbnN0IHogPSAneidcbiAqXG4gKiBzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHkpIC8vICd4eSdcbiAqXG4gKiBzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHNlbWlncm91cFN0cmluZy5jb25jYXQoeSwgeikpIC8vICd4eXonXG4gKlxuICogc2VtaWdyb3VwU3RyaW5nLmNvbmNhdChzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHkpLCB6KSAvLyAneHl6J1xuICogYGBgXG4gKlxuICogKkFkYXB0ZWQgZnJvbSBodHRwczovL3R5cGVsZXZlbC5vcmcvY2F0cypcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuaW1wb3J0IHsgZ2V0U2VtaWdyb3VwLCBpZGVudGl0eSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCAqIGFzIE0gZnJvbSAnLi9NYWdtYSc7XG5pbXBvcnQgKiBhcyBPciBmcm9tICcuL09yZCc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2V0IGEgc2VtaWdyb3VwIHdoZXJlIGBjb25jYXRgIHdpbGwgcmV0dXJuIHRoZSBtaW5pbXVtLCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgb3JkZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKlxuICogY29uc3QgUzEgPSBTLm1pbihOLk9yZClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdCgxLCAyKSwgMSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWluID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBPci5taW4oTylcbn0pOyB9O1xuLyoqXG4gKiBHZXQgYSBzZW1pZ3JvdXAgd2hlcmUgYGNvbmNhdGAgd2lsbCByZXR1cm4gdGhlIG1heGltdW0sIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBvcmRlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqXG4gKiBjb25zdCBTMSA9IFMubWF4KE4uT3JkKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzEuY29uY2F0KDEsIDIpLCAyKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXggPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IE9yLm1heChPKVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdGFudCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfVxufSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBUaGUgZHVhbCBvZiBhIGBTZW1pZ3JvdXBgLCBvYnRhaW5lZCBieSBzd2FwcGluZyB0aGUgYXJndW1lbnRzIG9mIGBjb25jYXRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXZlcnNlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXZlcnNlKFMuU2VtaWdyb3VwKS5jb25jYXQoJ2EnLCAnYicpLCAnYmEnKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciByZXZlcnNlID0gTS5yZXZlcnNlO1xuLyoqXG4gKiBHaXZlbiBhIHN0cnVjdCBvZiBzZW1pZ3JvdXBzIHJldHVybnMgYSBzZW1pZ3JvdXAgZm9yIHRoZSBzdHJ1Y3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHN0cnVjdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGludGVyZmFjZSBQb2ludCB7XG4gKiAgIHJlYWRvbmx5IHg6IG51bWJlclxuICogICByZWFkb25seSB5OiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBTID0gc3RydWN0PFBvaW50Pih7XG4gKiAgIHg6IE4uU2VtaWdyb3VwU3VtLFxuICogICB5OiBOLlNlbWlncm91cFN1bVxuICogfSlcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuY29uY2F0KHsgeDogMSwgeTogMiB9LCB7IHg6IDMsIHk6IDQgfSksIHsgeDogNCwgeTogNiB9KVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBzdHJ1Y3QgPSBmdW5jdGlvbiAoc2VtaWdyb3VwcykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHZhciByID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gc2VtaWdyb3Vwcykge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwoc2VtaWdyb3VwcywgaykpIHtcbiAgICAgICAgICAgICAgICByW2tdID0gc2VtaWdyb3Vwc1trXS5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxufSk7IH07XG4vKipcbiAqIEdpdmVuIGEgdHVwbGUgb2Ygc2VtaWdyb3VwcyByZXR1cm5zIGEgc2VtaWdyb3VwIGZvciB0aGUgdHVwbGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgQiBmcm9tICdmcC10cy9ib29sZWFuJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBjb25zdCBTMSA9IHR1cGxlKFMuU2VtaWdyb3VwLCBOLlNlbWlncm91cFN1bSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzEuY29uY2F0KFsnYScsIDFdLCBbJ2InLCAyXSksIFsnYWInLCAzXSlcbiAqXG4gKiBjb25zdCBTMiA9IHR1cGxlKFMuU2VtaWdyb3VwLCBOLlNlbWlncm91cFN1bSwgQi5TZW1pZ3JvdXBBbGwpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMyLmNvbmNhdChbJ2EnLCAxLCB0cnVlXSwgWydiJywgMiwgZmFsc2VdKSwgWydhYicsIDMsIGZhbHNlXSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHVwbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbWlncm91cHMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBzZW1pZ3JvdXBzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiAoe1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBzZW1pZ3JvdXBzLm1hcChmdW5jdGlvbiAocywgaSkgeyByZXR1cm4gcy5jb25jYXQoZmlyc3RbaV0sIHNlY29uZFtpXSk7IH0pOyB9XG4gICAgfSk7XG59O1xuLyoqXG4gKiBCZXR3ZWVuIGVhY2ggcGFpciBvZiBlbGVtZW50cyBpbnNlcnQgYG1pZGRsZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGludGVyY2FsYXRlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgUzEgPSBwaXBlKFMuU2VtaWdyb3VwLCBpbnRlcmNhbGF0ZSgnICsgJykpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFMxLmNvbmNhdCgnYScsICdiJyksICdhICsgYicpXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGludGVyY2FsYXRlID0gZnVuY3Rpb24gKG1pZGRsZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gUy5jb25jYXQoeCwgUy5jb25jYXQobWlkZGxlLCB5KSk7IH1cbiAgICB9KTsgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWx3YXlzIHJldHVybiB0aGUgZmlyc3QgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5maXJzdDxudW1iZXI+KCkuY29uY2F0KDEsIDIpLCAxKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmaXJzdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7IGNvbmNhdDogaWRlbnRpdHkgfSk7IH07XG4vKipcbiAqIEFsd2F5cyByZXR1cm4gdGhlIGxhc3QgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5sYXN0PG51bWJlcj4oKS5jb25jYXQoMSwgMiksIDIpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGxhc3QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoeyBjb25jYXQ6IGZ1bmN0aW9uIChfLCB5KSB7IHJldHVybiB5OyB9IH0pOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2l2ZW4gYSBzZXF1ZW5jZSBvZiBgYXNgLCBjb25jYXQgdGhlbSBhbmQgcmV0dXJuIHRoZSB0b3RhbC5cbiAqXG4gKiBJZiBgYXNgIGlzIGVtcHR5LCByZXR1cm4gdGhlIHByb3ZpZGVkIGBzdGFydFdpdGhgIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBzdW0gPSBjb25jYXRBbGwoTi5TZW1pZ3JvdXBTdW0pKDApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzdW0oWzEsIDIsIDNdKSwgNilcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc3VtKFtdKSwgMClcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uY2F0QWxsID0gTS5jb25jYXRBbGw7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFVzZSBgdm9pZGAgbW9kdWxlIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBWb2lkID0gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogVXNlIFtgZ2V0QXNzaWduU2VtaWdyb3VwYF0oLi9zdHJ1Y3QudHMuaHRtbCNnZXRBc3NpZ25TZW1pZ3JvdXApIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRPYmplY3RTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGZpcnN0LCBzZWNvbmQpOyB9XG59KTsgfTtcbi8qKlxuICogVXNlIFtgbGFzdGBdKCNsYXN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TGFzdFNlbWlncm91cCA9IGxhc3Q7XG4vKipcbiAqIFVzZSBbYGZpcnN0YF0oI2ZpcnN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rmlyc3RTZW1pZ3JvdXAgPSBmaXJzdDtcbi8qKlxuICogVXNlIFtgdHVwbGVgXSgjdHVwbGUpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRUdXBsZVNlbWlncm91cCA9IHR1cGxlO1xuLyoqXG4gKiBVc2UgW2BzdHJ1Y3RgXSgjc3RydWN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U3RydWN0U2VtaWdyb3VwID0gc3RydWN0O1xuLyoqXG4gKiBVc2UgW2ByZXZlcnNlYF0oI3JldmVyc2UpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXREdWFsU2VtaWdyb3VwID0gcmV2ZXJzZTtcbi8qKlxuICogVXNlIFtgbWF4YF0oI21heCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEpvaW5TZW1pZ3JvdXAgPSBtYXg7XG4vKipcbiAqIFVzZSBbYG1pbmBdKCNtaW4pIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRNZWV0U2VtaWdyb3VwID0gbWluO1xuLyoqXG4gKiBVc2UgW2BpbnRlcmNhbGF0ZWBdKCNpbnRlcmNhbGF0ZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEludGVyY2FsYXRlU2VtaWdyb3VwID0gaW50ZXJjYWxhdGU7XG5leHBvcnQgZnVuY3Rpb24gZm9sZChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGFydFdpdGgsIGFzKSB7IHJldHVybiAoYXMgPT09IHVuZGVmaW5lZCA/IGNvbmNhdEFsbFMoc3RhcnRXaXRoKSA6IGNvbmNhdEFsbFMoc3RhcnRXaXRoKShhcykpOyB9O1xufVxuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBBbGxgXSguL2Jvb2xlYW4udHMuaHRtbCNTZW1pZ3JvdXBBbGwpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBBbGwgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAmJiB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBBbnlgXSguL2Jvb2xlYW4udHMuaHRtbCNTZW1pZ3JvdXBBbnkpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBBbnkgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCB8fCB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BnZXRTZW1pZ3JvdXBgXSguL2Z1bmN0aW9uLnRzLmh0bWwjZ2V0U2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RnVuY3Rpb25TZW1pZ3JvdXAgPSBnZXRTZW1pZ3JvdXA7XG4vKipcbiAqIFVzZSBbYFNlbWlncm91cGBdKC4vc3RyaW5nLnRzLmh0bWwjU2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgc2VtaWdyb3VwU3RyaW5nID0ge1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggKyB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBTdW1gXSguL251bWJlci50cy5odG1sI1NlbWlncm91cFN1bSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNlbWlncm91cFN1bSA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ICsgeTsgfVxufTtcbi8qKlxuICogVXNlIFtgU2VtaWdyb3VwUHJvZHVjdGBdKC4vbnVtYmVyLnRzLmh0bWwjU2VtaWdyb3VwUHJvZHVjdCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNlbWlncm91cFByb2R1Y3QgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAqIHk7IH1cbn07XG4iLAogICIvKipcbiAqIElmIGEgdHlwZSBgQWAgY2FuIGZvcm0gYSBgU2VtaWdyb3VwYCBpdCBoYXMgYW4gKiphc3NvY2lhdGl2ZSoqIGJpbmFyeSBvcGVyYXRpb24uXG4gKlxuICogYGBgdHNcbiAqIGludGVyZmFjZSBTZW1pZ3JvdXA8QT4ge1xuICogICByZWFkb25seSBjb25jYXQ6ICh4OiBBLCB5OiBBKSA9PiBBXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBBc3NvY2lhdGl2aXR5IG1lYW5zIHRoZSBmb2xsb3dpbmcgZXF1YWxpdHkgbXVzdCBob2xkIGZvciBhbnkgY2hvaWNlIG9mIGB4YCwgYHlgLCBhbmQgYHpgLlxuICpcbiAqIGBgYHRzXG4gKiBjb25jYXQoeCwgY29uY2F0KHksIHopKSA9IGNvbmNhdChjb25jYXQoeCwgeSksIHopXG4gKiBgYGBcbiAqXG4gKiBBIGNvbW1vbiBleGFtcGxlIG9mIGEgc2VtaWdyb3VwIGlzIHRoZSB0eXBlIGBzdHJpbmdgIHdpdGggdGhlIG9wZXJhdGlvbiBgK2AuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IFNlbWlncm91cCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqXG4gKiBjb25zdCBzZW1pZ3JvdXBTdHJpbmc6IFNlbWlncm91cDxzdHJpbmc+ID0ge1xuICogICBjb25jYXQ6ICh4LCB5KSA9PiB4ICsgeVxuICogfVxuICpcbiAqIGNvbnN0IHggPSAneCdcbiAqIGNvbnN0IHkgPSAneSdcbiAqIGNvbnN0IHogPSAneidcbiAqXG4gKiBzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHkpIC8vICd4eSdcbiAqXG4gKiBzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHNlbWlncm91cFN0cmluZy5jb25jYXQoeSwgeikpIC8vICd4eXonXG4gKlxuICogc2VtaWdyb3VwU3RyaW5nLmNvbmNhdChzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHkpLCB6KSAvLyAneHl6J1xuICogYGBgXG4gKlxuICogKkFkYXB0ZWQgZnJvbSBodHRwczovL3R5cGVsZXZlbC5vcmcvY2F0cypcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuaW1wb3J0IHsgZ2V0U2VtaWdyb3VwLCBpZGVudGl0eSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCAqIGFzIE0gZnJvbSAnLi9NYWdtYSc7XG5pbXBvcnQgKiBhcyBPciBmcm9tICcuL09yZCc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2V0IGEgc2VtaWdyb3VwIHdoZXJlIGBjb25jYXRgIHdpbGwgcmV0dXJuIHRoZSBtaW5pbXVtLCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgb3JkZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKlxuICogY29uc3QgUzEgPSBTLm1pbihOLk9yZClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdCgxLCAyKSwgMSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWluID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBPci5taW4oTylcbn0pOyB9O1xuLyoqXG4gKiBHZXQgYSBzZW1pZ3JvdXAgd2hlcmUgYGNvbmNhdGAgd2lsbCByZXR1cm4gdGhlIG1heGltdW0sIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBvcmRlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqXG4gKiBjb25zdCBTMSA9IFMubWF4KE4uT3JkKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzEuY29uY2F0KDEsIDIpLCAyKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXggPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IE9yLm1heChPKVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdGFudCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfVxufSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBUaGUgZHVhbCBvZiBhIGBTZW1pZ3JvdXBgLCBvYnRhaW5lZCBieSBzd2FwcGluZyB0aGUgYXJndW1lbnRzIG9mIGBjb25jYXRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXZlcnNlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXZlcnNlKFMuU2VtaWdyb3VwKS5jb25jYXQoJ2EnLCAnYicpLCAnYmEnKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciByZXZlcnNlID0gTS5yZXZlcnNlO1xuLyoqXG4gKiBHaXZlbiBhIHN0cnVjdCBvZiBzZW1pZ3JvdXBzIHJldHVybnMgYSBzZW1pZ3JvdXAgZm9yIHRoZSBzdHJ1Y3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHN0cnVjdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGludGVyZmFjZSBQb2ludCB7XG4gKiAgIHJlYWRvbmx5IHg6IG51bWJlclxuICogICByZWFkb25seSB5OiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBTID0gc3RydWN0PFBvaW50Pih7XG4gKiAgIHg6IE4uU2VtaWdyb3VwU3VtLFxuICogICB5OiBOLlNlbWlncm91cFN1bVxuICogfSlcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuY29uY2F0KHsgeDogMSwgeTogMiB9LCB7IHg6IDMsIHk6IDQgfSksIHsgeDogNCwgeTogNiB9KVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBzdHJ1Y3QgPSBmdW5jdGlvbiAoc2VtaWdyb3VwcykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHZhciByID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gc2VtaWdyb3Vwcykge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwoc2VtaWdyb3VwcywgaykpIHtcbiAgICAgICAgICAgICAgICByW2tdID0gc2VtaWdyb3Vwc1trXS5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxufSk7IH07XG4vKipcbiAqIEdpdmVuIGEgdHVwbGUgb2Ygc2VtaWdyb3VwcyByZXR1cm5zIGEgc2VtaWdyb3VwIGZvciB0aGUgdHVwbGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgQiBmcm9tICdmcC10cy9ib29sZWFuJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBjb25zdCBTMSA9IHR1cGxlKFMuU2VtaWdyb3VwLCBOLlNlbWlncm91cFN1bSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzEuY29uY2F0KFsnYScsIDFdLCBbJ2InLCAyXSksIFsnYWInLCAzXSlcbiAqXG4gKiBjb25zdCBTMiA9IHR1cGxlKFMuU2VtaWdyb3VwLCBOLlNlbWlncm91cFN1bSwgQi5TZW1pZ3JvdXBBbGwpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMyLmNvbmNhdChbJ2EnLCAxLCB0cnVlXSwgWydiJywgMiwgZmFsc2VdKSwgWydhYicsIDMsIGZhbHNlXSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHVwbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbWlncm91cHMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBzZW1pZ3JvdXBzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiAoe1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBzZW1pZ3JvdXBzLm1hcChmdW5jdGlvbiAocywgaSkgeyByZXR1cm4gcy5jb25jYXQoZmlyc3RbaV0sIHNlY29uZFtpXSk7IH0pOyB9XG4gICAgfSk7XG59O1xuLyoqXG4gKiBCZXR3ZWVuIGVhY2ggcGFpciBvZiBlbGVtZW50cyBpbnNlcnQgYG1pZGRsZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGludGVyY2FsYXRlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgUzEgPSBwaXBlKFMuU2VtaWdyb3VwLCBpbnRlcmNhbGF0ZSgnICsgJykpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFMxLmNvbmNhdCgnYScsICdiJyksICdhICsgYicpXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGludGVyY2FsYXRlID0gZnVuY3Rpb24gKG1pZGRsZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gUy5jb25jYXQoeCwgUy5jb25jYXQobWlkZGxlLCB5KSk7IH1cbiAgICB9KTsgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWx3YXlzIHJldHVybiB0aGUgZmlyc3QgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5maXJzdDxudW1iZXI+KCkuY29uY2F0KDEsIDIpLCAxKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmaXJzdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7IGNvbmNhdDogaWRlbnRpdHkgfSk7IH07XG4vKipcbiAqIEFsd2F5cyByZXR1cm4gdGhlIGxhc3QgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5sYXN0PG51bWJlcj4oKS5jb25jYXQoMSwgMiksIDIpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGxhc3QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoeyBjb25jYXQ6IGZ1bmN0aW9uIChfLCB5KSB7IHJldHVybiB5OyB9IH0pOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2l2ZW4gYSBzZXF1ZW5jZSBvZiBgYXNgLCBjb25jYXQgdGhlbSBhbmQgcmV0dXJuIHRoZSB0b3RhbC5cbiAqXG4gKiBJZiBgYXNgIGlzIGVtcHR5LCByZXR1cm4gdGhlIHByb3ZpZGVkIGBzdGFydFdpdGhgIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBzdW0gPSBjb25jYXRBbGwoTi5TZW1pZ3JvdXBTdW0pKDApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzdW0oWzEsIDIsIDNdKSwgNilcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc3VtKFtdKSwgMClcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uY2F0QWxsID0gTS5jb25jYXRBbGw7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFVzZSBgdm9pZGAgbW9kdWxlIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBWb2lkID0gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogVXNlIFtgZ2V0QXNzaWduU2VtaWdyb3VwYF0oLi9zdHJ1Y3QudHMuaHRtbCNnZXRBc3NpZ25TZW1pZ3JvdXApIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRPYmplY3RTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGZpcnN0LCBzZWNvbmQpOyB9XG59KTsgfTtcbi8qKlxuICogVXNlIFtgbGFzdGBdKCNsYXN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TGFzdFNlbWlncm91cCA9IGxhc3Q7XG4vKipcbiAqIFVzZSBbYGZpcnN0YF0oI2ZpcnN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rmlyc3RTZW1pZ3JvdXAgPSBmaXJzdDtcbi8qKlxuICogVXNlIFtgdHVwbGVgXSgjdHVwbGUpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRUdXBsZVNlbWlncm91cCA9IHR1cGxlO1xuLyoqXG4gKiBVc2UgW2BzdHJ1Y3RgXSgjc3RydWN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U3RydWN0U2VtaWdyb3VwID0gc3RydWN0O1xuLyoqXG4gKiBVc2UgW2ByZXZlcnNlYF0oI3JldmVyc2UpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXREdWFsU2VtaWdyb3VwID0gcmV2ZXJzZTtcbi8qKlxuICogVXNlIFtgbWF4YF0oI21heCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEpvaW5TZW1pZ3JvdXAgPSBtYXg7XG4vKipcbiAqIFVzZSBbYG1pbmBdKCNtaW4pIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRNZWV0U2VtaWdyb3VwID0gbWluO1xuLyoqXG4gKiBVc2UgW2BpbnRlcmNhbGF0ZWBdKCNpbnRlcmNhbGF0ZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEludGVyY2FsYXRlU2VtaWdyb3VwID0gaW50ZXJjYWxhdGU7XG5leHBvcnQgZnVuY3Rpb24gZm9sZChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGFydFdpdGgsIGFzKSB7IHJldHVybiAoYXMgPT09IHVuZGVmaW5lZCA/IGNvbmNhdEFsbFMoc3RhcnRXaXRoKSA6IGNvbmNhdEFsbFMoc3RhcnRXaXRoKShhcykpOyB9O1xufVxuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBBbGxgXSguL2Jvb2xlYW4udHMuaHRtbCNTZW1pZ3JvdXBBbGwpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBBbGwgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAmJiB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBBbnlgXSguL2Jvb2xlYW4udHMuaHRtbCNTZW1pZ3JvdXBBbnkpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBBbnkgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCB8fCB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BnZXRTZW1pZ3JvdXBgXSguL2Z1bmN0aW9uLnRzLmh0bWwjZ2V0U2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RnVuY3Rpb25TZW1pZ3JvdXAgPSBnZXRTZW1pZ3JvdXA7XG4vKipcbiAqIFVzZSBbYFNlbWlncm91cGBdKC4vc3RyaW5nLnRzLmh0bWwjU2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgc2VtaWdyb3VwU3RyaW5nID0ge1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggKyB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBTdW1gXSguL251bWJlci50cy5odG1sI1NlbWlncm91cFN1bSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNlbWlncm91cFN1bSA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ICsgeTsgfVxufTtcbi8qKlxuICogVXNlIFtgU2VtaWdyb3VwUHJvZHVjdGBdKC4vbnVtYmVyLnRzLmh0bWwjU2VtaWdyb3VwUHJvZHVjdCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNlbWlncm91cFByb2R1Y3QgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAqIHk7IH1cbn07XG4iLAogICIvKipcbiAqIElmIGEgdHlwZSBgQWAgY2FuIGZvcm0gYSBgU2VtaWdyb3VwYCBpdCBoYXMgYW4gKiphc3NvY2lhdGl2ZSoqIGJpbmFyeSBvcGVyYXRpb24uXG4gKlxuICogYGBgdHNcbiAqIGludGVyZmFjZSBTZW1pZ3JvdXA8QT4ge1xuICogICByZWFkb25seSBjb25jYXQ6ICh4OiBBLCB5OiBBKSA9PiBBXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBBc3NvY2lhdGl2aXR5IG1lYW5zIHRoZSBmb2xsb3dpbmcgZXF1YWxpdHkgbXVzdCBob2xkIGZvciBhbnkgY2hvaWNlIG9mIGB4YCwgYHlgLCBhbmQgYHpgLlxuICpcbiAqIGBgYHRzXG4gKiBjb25jYXQoeCwgY29uY2F0KHksIHopKSA9IGNvbmNhdChjb25jYXQoeCwgeSksIHopXG4gKiBgYGBcbiAqXG4gKiBBIGNvbW1vbiBleGFtcGxlIG9mIGEgc2VtaWdyb3VwIGlzIHRoZSB0eXBlIGBzdHJpbmdgIHdpdGggdGhlIG9wZXJhdGlvbiBgK2AuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IFNlbWlncm91cCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqXG4gKiBjb25zdCBzZW1pZ3JvdXBTdHJpbmc6IFNlbWlncm91cDxzdHJpbmc+ID0ge1xuICogICBjb25jYXQ6ICh4LCB5KSA9PiB4ICsgeVxuICogfVxuICpcbiAqIGNvbnN0IHggPSAneCdcbiAqIGNvbnN0IHkgPSAneSdcbiAqIGNvbnN0IHogPSAneidcbiAqXG4gKiBzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHkpIC8vICd4eSdcbiAqXG4gKiBzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHNlbWlncm91cFN0cmluZy5jb25jYXQoeSwgeikpIC8vICd4eXonXG4gKlxuICogc2VtaWdyb3VwU3RyaW5nLmNvbmNhdChzZW1pZ3JvdXBTdHJpbmcuY29uY2F0KHgsIHkpLCB6KSAvLyAneHl6J1xuICogYGBgXG4gKlxuICogKkFkYXB0ZWQgZnJvbSBodHRwczovL3R5cGVsZXZlbC5vcmcvY2F0cypcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuaW1wb3J0IHsgZ2V0U2VtaWdyb3VwLCBpZGVudGl0eSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCAqIGFzIE0gZnJvbSAnLi9NYWdtYSc7XG5pbXBvcnQgKiBhcyBPciBmcm9tICcuL09yZCc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2V0IGEgc2VtaWdyb3VwIHdoZXJlIGBjb25jYXRgIHdpbGwgcmV0dXJuIHRoZSBtaW5pbXVtLCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgb3JkZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKlxuICogY29uc3QgUzEgPSBTLm1pbihOLk9yZClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMxLmNvbmNhdCgxLCAyKSwgMSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWluID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBPci5taW4oTylcbn0pOyB9O1xuLyoqXG4gKiBHZXQgYSBzZW1pZ3JvdXAgd2hlcmUgYGNvbmNhdGAgd2lsbCByZXR1cm4gdGhlIG1heGltdW0sIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBvcmRlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqXG4gKiBjb25zdCBTMSA9IFMubWF4KE4uT3JkKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzEuY29uY2F0KDEsIDIpLCAyKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXggPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IE9yLm1heChPKVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25zdGFudCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfVxufSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBUaGUgZHVhbCBvZiBhIGBTZW1pZ3JvdXBgLCBvYnRhaW5lZCBieSBzd2FwcGluZyB0aGUgYXJndW1lbnRzIG9mIGBjb25jYXRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXZlcnNlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXZlcnNlKFMuU2VtaWdyb3VwKS5jb25jYXQoJ2EnLCAnYicpLCAnYmEnKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciByZXZlcnNlID0gTS5yZXZlcnNlO1xuLyoqXG4gKiBHaXZlbiBhIHN0cnVjdCBvZiBzZW1pZ3JvdXBzIHJldHVybnMgYSBzZW1pZ3JvdXAgZm9yIHRoZSBzdHJ1Y3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHN0cnVjdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGludGVyZmFjZSBQb2ludCB7XG4gKiAgIHJlYWRvbmx5IHg6IG51bWJlclxuICogICByZWFkb25seSB5OiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBTID0gc3RydWN0PFBvaW50Pih7XG4gKiAgIHg6IE4uU2VtaWdyb3VwU3VtLFxuICogICB5OiBOLlNlbWlncm91cFN1bVxuICogfSlcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuY29uY2F0KHsgeDogMSwgeTogMiB9LCB7IHg6IDMsIHk6IDQgfSksIHsgeDogNCwgeTogNiB9KVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBzdHJ1Y3QgPSBmdW5jdGlvbiAoc2VtaWdyb3VwcykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHZhciByID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gc2VtaWdyb3Vwcykge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwoc2VtaWdyb3VwcywgaykpIHtcbiAgICAgICAgICAgICAgICByW2tdID0gc2VtaWdyb3Vwc1trXS5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxufSk7IH07XG4vKipcbiAqIEdpdmVuIGEgdHVwbGUgb2Ygc2VtaWdyb3VwcyByZXR1cm5zIGEgc2VtaWdyb3VwIGZvciB0aGUgdHVwbGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHR1cGxlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgQiBmcm9tICdmcC10cy9ib29sZWFuJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBjb25zdCBTMSA9IHR1cGxlKFMuU2VtaWdyb3VwLCBOLlNlbWlncm91cFN1bSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUzEuY29uY2F0KFsnYScsIDFdLCBbJ2InLCAyXSksIFsnYWInLCAzXSlcbiAqXG4gKiBjb25zdCBTMiA9IHR1cGxlKFMuU2VtaWdyb3VwLCBOLlNlbWlncm91cFN1bSwgQi5TZW1pZ3JvdXBBbGwpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMyLmNvbmNhdChbJ2EnLCAxLCB0cnVlXSwgWydiJywgMiwgZmFsc2VdKSwgWydhYicsIDMsIGZhbHNlXSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHVwbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbWlncm91cHMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBzZW1pZ3JvdXBzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiAoe1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBzZW1pZ3JvdXBzLm1hcChmdW5jdGlvbiAocywgaSkgeyByZXR1cm4gcy5jb25jYXQoZmlyc3RbaV0sIHNlY29uZFtpXSk7IH0pOyB9XG4gICAgfSk7XG59O1xuLyoqXG4gKiBCZXR3ZWVuIGVhY2ggcGFpciBvZiBlbGVtZW50cyBpbnNlcnQgYG1pZGRsZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGludGVyY2FsYXRlIH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgUzEgPSBwaXBlKFMuU2VtaWdyb3VwLCBpbnRlcmNhbGF0ZSgnICsgJykpXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFMxLmNvbmNhdCgnYScsICdiJyksICdhICsgYicpXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGludGVyY2FsYXRlID0gZnVuY3Rpb24gKG1pZGRsZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gUy5jb25jYXQoeCwgUy5jb25jYXQobWlkZGxlLCB5KSk7IH1cbiAgICB9KTsgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWx3YXlzIHJldHVybiB0aGUgZmlyc3QgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5maXJzdDxudW1iZXI+KCkuY29uY2F0KDEsIDIpLCAxKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmaXJzdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7IGNvbmNhdDogaWRlbnRpdHkgfSk7IH07XG4vKipcbiAqIEFsd2F5cyByZXR1cm4gdGhlIGxhc3QgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5sYXN0PG51bWJlcj4oKS5jb25jYXQoMSwgMiksIDIpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGxhc3QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoeyBjb25jYXQ6IGZ1bmN0aW9uIChfLCB5KSB7IHJldHVybiB5OyB9IH0pOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2l2ZW4gYSBzZXF1ZW5jZSBvZiBgYXNgLCBjb25jYXQgdGhlbSBhbmQgcmV0dXJuIHRoZSB0b3RhbC5cbiAqXG4gKiBJZiBgYXNgIGlzIGVtcHR5LCByZXR1cm4gdGhlIHByb3ZpZGVkIGBzdGFydFdpdGhgIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBzdW0gPSBjb25jYXRBbGwoTi5TZW1pZ3JvdXBTdW0pKDApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzdW0oWzEsIDIsIDNdKSwgNilcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc3VtKFtdKSwgMClcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29uY2F0QWxsID0gTS5jb25jYXRBbGw7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFVzZSBgdm9pZGAgbW9kdWxlIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBWb2lkID0gY29uc3RhbnQodW5kZWZpbmVkKTtcbi8qKlxuICogVXNlIFtgZ2V0QXNzaWduU2VtaWdyb3VwYF0oLi9zdHJ1Y3QudHMuaHRtbCNnZXRBc3NpZ25TZW1pZ3JvdXApIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRPYmplY3RTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGZpcnN0LCBzZWNvbmQpOyB9XG59KTsgfTtcbi8qKlxuICogVXNlIFtgbGFzdGBdKCNsYXN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TGFzdFNlbWlncm91cCA9IGxhc3Q7XG4vKipcbiAqIFVzZSBbYGZpcnN0YF0oI2ZpcnN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rmlyc3RTZW1pZ3JvdXAgPSBmaXJzdDtcbi8qKlxuICogVXNlIFtgdHVwbGVgXSgjdHVwbGUpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRUdXBsZVNlbWlncm91cCA9IHR1cGxlO1xuLyoqXG4gKiBVc2UgW2BzdHJ1Y3RgXSgjc3RydWN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U3RydWN0U2VtaWdyb3VwID0gc3RydWN0O1xuLyoqXG4gKiBVc2UgW2ByZXZlcnNlYF0oI3JldmVyc2UpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXREdWFsU2VtaWdyb3VwID0gcmV2ZXJzZTtcbi8qKlxuICogVXNlIFtgbWF4YF0oI21heCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEpvaW5TZW1pZ3JvdXAgPSBtYXg7XG4vKipcbiAqIFVzZSBbYG1pbmBdKCNtaW4pIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRNZWV0U2VtaWdyb3VwID0gbWluO1xuLyoqXG4gKiBVc2UgW2BpbnRlcmNhbGF0ZWBdKCNpbnRlcmNhbGF0ZSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEludGVyY2FsYXRlU2VtaWdyb3VwID0gaW50ZXJjYWxhdGU7XG5leHBvcnQgZnVuY3Rpb24gZm9sZChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGFydFdpdGgsIGFzKSB7IHJldHVybiAoYXMgPT09IHVuZGVmaW5lZCA/IGNvbmNhdEFsbFMoc3RhcnRXaXRoKSA6IGNvbmNhdEFsbFMoc3RhcnRXaXRoKShhcykpOyB9O1xufVxuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBBbGxgXSguL2Jvb2xlYW4udHMuaHRtbCNTZW1pZ3JvdXBBbGwpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBBbGwgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAmJiB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBBbnlgXSguL2Jvb2xlYW4udHMuaHRtbCNTZW1pZ3JvdXBBbnkpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzZW1pZ3JvdXBBbnkgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCB8fCB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BnZXRTZW1pZ3JvdXBgXSguL2Z1bmN0aW9uLnRzLmh0bWwjZ2V0U2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RnVuY3Rpb25TZW1pZ3JvdXAgPSBnZXRTZW1pZ3JvdXA7XG4vKipcbiAqIFVzZSBbYFNlbWlncm91cGBdKC4vc3RyaW5nLnRzLmh0bWwjU2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgc2VtaWdyb3VwU3RyaW5nID0ge1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggKyB5OyB9XG59O1xuLyoqXG4gKiBVc2UgW2BTZW1pZ3JvdXBTdW1gXSguL251bWJlci50cy5odG1sI1NlbWlncm91cFN1bSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNlbWlncm91cFN1bSA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ICsgeTsgfVxufTtcbi8qKlxuICogVXNlIFtgU2VtaWdyb3VwUHJvZHVjdGBdKC4vbnVtYmVyLnRzLmh0bWwjU2VtaWdyb3VwUHJvZHVjdCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNlbWlncm91cFByb2R1Y3QgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAqIHk7IH1cbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFNlIGZyb20gJy4vU2VtaWdyb3VwJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGludGVybmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gXy5lbXB0eVJlYWRvbmx5QXJyYXk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzTm9uRW1wdHkgPSBfLmlzTm9uRW1wdHk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IGZ1bmN0aW9uIChpLCBhcykgeyByZXR1cm4gaSA8IDAgfHwgaSA+PSBhcy5sZW5ndGg7IH07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gZnVuY3Rpb24gKGhlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2hlYWRdLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IHByZXBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gZnVuY3Rpb24gKGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5pdCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpbml0LCB0cnVlKSwgW2VuZF0sIGZhbHNlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kID0gYXBwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShhcykpIHtcbiAgICAgICAgdmFyIHhzID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChhc1tpXSA9PT0gYSkge1xuICAgICAgICByZXR1cm4gYXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgeHMgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4c1tpXSA9IGE7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbaGVhZChhcyldO1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAob3V0LmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhRS5lcXVhbHMobywgYSk7IH0pKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdF8xID0gcmVzdDsgX2kgPCByZXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHJlc3RfMVtfaV07XG4gICAgICAgICAgICBfbG9vcF8xKGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gUk5FQS5zb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJORUEuUmVhZG9ubHlOb25FbXB0eUFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfVxuICogXVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICBpZiAoaXNOb25FbXB0eShvcmRzKSkge1xuICAgICAgICB2YXIgTSA9IGdldE1vbm9pZCgpO1xuICAgICAgICByZXR1cm4gc29ydChvcmRzLnJlZHVjZShNLmNvbmNhdCwgTS5lbXB0eSkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRlbnRpdHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGJ5IGBuYCBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJuIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgZnJvbSBhIGBSZWFkb25seUFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSg1LCBtYWtlQnkoZG91YmxlKSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG4pKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKDApXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHJhbmdlIG9mIGludGVnZXJzLCBpbmNsdWRpbmcgYm90aCBlbmRwb2ludHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJhbmdlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgMywgNF0pLCBbMSwgWzIsIDMsIDRdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5hcHBlbmQoWzEsIDIsIDMsIDRdKSwgW1sxLCAyLCAzXSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5hcHBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtpbml0KGFzKSwgbGFzdChhcyldOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnJvbVJlYWRvbmx5QXJyYXkoYXMuc2xpY2UoKSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gYXMubGVuZ3RoID09PSAxID8gYXMgOiBfX3NwcmVhZEFycmF5KFtsYXN0KGFzKV0sIGFzLnNsaWNlKDAsIC0xKS5yZXZlcnNlKCksIHRydWUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXBCeSgoczogc3RyaW5nKSA9PiBTdHJpbmcocy5sZW5ndGgpKShbJ2EnLCAnYicsICdhYiddKSwge1xuICogICAnMSc6IFsnYScsICdiJ10sXG4gKiAgICcyJzogWydhYiddXG4gKiB9KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdyb3VwQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIHZhciBrID0gZihhKTtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKG91dCwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10ucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IFthXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPT09IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KHJlc3QpID8gcGlwZShyZXN0LCBwcmVwZW5kQWxsKG1pZGRsZSksIHByZXBlbmQoaGVhZChhcykpKSA6IGFzO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBfLmZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoZigwLCBoZWFkKGFzKSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBBIHVzZWZ1bCByZWN1cnNpb24gcGF0dGVybiBmb3IgcHJvY2Vzc2luZyBhIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLiBUeXBpY2FsbHkgYGNob3BgIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc3BsaXRBdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbSA9IE1hdGgubWF4KDEsIG4pO1xuICAgICAgICByZXR1cm4gbSA+PSBhcy5sZW5ndGggPyBbYXMsIGVtcHR5XSA6IFtwaXBlKGFzLnNsaWNlKDEsIG0pLCBwcmVwZW5kKGhlYWQoYXMpKSksIGFzLnNsaWNlKG0pXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG9mID0gXy5zaW5nbGV0b247XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSBhcyBSTkVBLlJlYWRvbmx5Tm9uRW1wdHlBcnJheTxudW1iZXI+LFxuICogICAgIFJORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUk5FQSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUk5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IFxuLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IFxuLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtmKDAsIGhlYWQoYXMpKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoYSkpOyB9LCBmKGFzWzBdKSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBiLCBhKTsgfSwgYik7XG4gICAgfTtcbn07XG4vKipcbiAqICoqTm90ZSoqLiBUaGUgY29uc3RyYWludCBpcyByZWxheGVkOiBhIGBTZW1pZ3JvdXBgIGluc3RlYWQgb2YgYSBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhcy5zbGljZSgxKS5yZWR1Y2UoZnVuY3Rpb24gKHMsIGEsIGkpIHsgcmV0dXJuIFMuY29uY2F0KHMsIGYoaSArIDEsIGEpKTsgfSwgZigwLCBhc1swXSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4KEYpKFNLKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICAgICAgdmFyIG91dCA9IEYubWFwKGYoMCwgaGVhZChhcykpLCBvZik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gRi5hcChGLm1hcChvdXQsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGFzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tb25hZFxuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IF8uaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWBcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogY29uY2F0XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlOb25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IC8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBleHRyYWN0O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gXy50YWlsO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhc1thcy5sZW5ndGggLSAxXTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5taW4oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1heCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFMgPSBTZS5tYXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihoZWFkKGFzKSwgdGFpbChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5SGVhZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbZihoZWFkKGFzKSldLCB0YWlsKGFzKSwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlTGFzdCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlMYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seU5vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGNvbmNhdEFsbFMgPSBjb25jYXRBbGwoUyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIGZsb3coaW50ZXJzcGVyc2UobWlkZGxlKSwgY29uY2F0QWxsUyk7IH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IGVtcHR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9SZWFkb25seUFycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21SZWFkb25seUFycmF5KGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlKGksIGEpOyB9KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSBbYHVucHJlcGVuZGBdKCN1bnByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjEwLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMTAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGNvbmNhdChbZW5kXSkpOyB9O1xuLyoqXG4gKiBVc2UgW2BpbnNlcnRBdGBdKC4vUmVhZG9ubHlBcnJheS50cy5odG1sI2luc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBjb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJORUEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUk5FQS5yZWFkb25seU5vbkVtcHR5QXJyYXlgXG4gKiAod2hlcmUgYFJORUFgIGlzIGZyb20gYGltcG9ydCBSTkVBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlOb25FbXB0eUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZixcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3QsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHRcbn07XG4iLAogICJ2YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBkdWFsLCBpZGVudGl0eSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgYmluZFRvIGFzIGJpbmRUb18sIGZsYXAgYXMgZmxhcF8sIGxldCBhcyBsZXRfXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnLi9PcmQnO1xuaW1wb3J0ICogYXMgUk5FQSBmcm9tICcuL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnRlcm5hbFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBpc05vbkVtcHR5ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5sZW5ndGggPiAwOyB9O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBpc091dE9mQm91bmQgPSBmdW5jdGlvbiAoaSwgYXMpIHsgcmV0dXJuIGkgPCAwIHx8IGkgPj0gYXMubGVuZ3RoOyB9O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBwcmVwZW5kVyA9IGZ1bmN0aW9uIChoZWFkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YWlsKSB7XG4gICAgICAgIHJldHVybiBfX3NwcmVhZEFycmF5KFtoZWFkXSwgdGFpbCwgdHJ1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHByZXBlbmQgPSBwcmVwZW5kVztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgYXBwZW5kVyA9IGZ1bmN0aW9uIChlbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGluaXQpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgaW5pdCwgdHJ1ZSksIFtlbmRdLCBmYWxzZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGFwcGVuZCA9IGFwcGVuZFc7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHVuc2FmZUluc2VydEF0ID0gZnVuY3Rpb24gKGksIGEsIGFzKSB7XG4gICAgaWYgKGlzTm9uRW1wdHkoYXMpKSB7XG4gICAgICAgIHZhciB4cyA9IGZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgICAgICB4cy5zcGxpY2UoaSwgMCwgYSk7XG4gICAgICAgIHJldHVybiB4cztcbiAgICB9XG4gICAgcmV0dXJuIFthXTtcbn07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIHVuc2FmZVVwZGF0ZUF0ID0gZnVuY3Rpb24gKGksIGEsIGFzKSB7XG4gICAgdmFyIHhzID0gZnJvbVJlYWRvbmx5Tm9uRW1wdHlBcnJheShhcyk7XG4gICAgeHNbaV0gPSBhO1xuICAgIHJldHVybiB4cztcbn07XG4vKipcbiAqIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gYSBgTm9uRW1wdHlBcnJheWAsIGtlZXBpbmcgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pcSB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuaXEoTi5FcSkoWzEsIDIsIDFdKSwgWzEsIDJdKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB1bmlxID0gZnVuY3Rpb24gKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIGlmIChhcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3B5KGFzKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gW2hlYWQoYXMpXTtcbiAgICAgICAgdmFyIHJlc3QgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKG91dC5ldmVyeShmdW5jdGlvbiAobykgeyByZXR1cm4gIUUuZXF1YWxzKG8sIGEpOyB9KSkge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJlc3RfMSA9IHJlc3Q7IF9pIDwgcmVzdF8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSByZXN0XzFbX2ldO1xuICAgICAgICAgICAgX2xvb3BfMShhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTb3J0IHRoZSBlbGVtZW50cyBvZiBhIGBOb25FbXB0eUFycmF5YCBpbiBpbmNyZWFzaW5nIG9yZGVyLCB3aGVyZSBlbGVtZW50cyBhcmUgY29tcGFyZWQgdXNpbmcgZmlyc3QgYG9yZHNbMF1gLCB0aGVuIGBvcmRzWzFdYCxcbiAqIGV0Yy4uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBORUEgZnJvbSAnZnAtdHMvTm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IGNvbnRyYW1hcCB9IGZyb20gJ2ZwLXRzL09yZCdcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogaW50ZXJmYWNlIFBlcnNvbiB7XG4gKiAgIG5hbWU6IHN0cmluZ1xuICogICBhZ2U6IG51bWJlclxuICogfVxuICpcbiAqIGNvbnN0IGJ5TmFtZSA9IHBpcGUoUy5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLm5hbWUpKVxuICpcbiAqIGNvbnN0IGJ5QWdlID0gcGlwZShOLk9yZCwgY29udHJhbWFwKChwOiBQZXJzb24pID0+IHAuYWdlKSlcbiAqXG4gKiBjb25zdCBzb3J0QnlOYW1lQnlBZ2UgPSBORUEuc29ydEJ5KFtieU5hbWUsIGJ5QWdlXSlcbiAqXG4gKiBjb25zdCBwZXJzb25zOiBORUEuTm9uRW1wdHlBcnJheTxQZXJzb24+ID0gW1xuICogICB7IG5hbWU6ICdhJywgYWdlOiAxIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDMgfSxcbiAqICAgeyBuYW1lOiAnYycsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAyIH1cbiAqIF1cbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvcnRCeU5hbWVCeUFnZShwZXJzb25zKSwgW1xuICogICB7IG5hbWU6ICdhJywgYWdlOiAxIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH1cbiAqIF0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHNvcnRCeSA9IGZ1bmN0aW9uIChvcmRzKSB7XG4gICAgaWYgKGlzTm9uRW1wdHkob3JkcykpIHtcbiAgICAgICAgdmFyIE0gPSBnZXRNb25vaWQoKTtcbiAgICAgICAgcmV0dXJuIHNvcnQob3Jkcy5yZWR1Y2UoTS5jb25jYXQsIE0uZW1wdHkpKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvcHk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlxRSA9IHVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdW5pcUUocGlwZShmaXJzdCwgY29uY2F0KHNlY29uZCkpKTsgfTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBOb25FbXB0eUFycmF5YCBieSBgbmAgc3RlcHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJvdGF0ZSB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyb3RhdGUoMikoWzEsIDIsIDMsIDQsIDVdKSwgWzQsIDUsIDEsIDIsIDNdKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyb3RhdGUoLTIpKFsxLCAyLCAzLCA0LCA1XSksIFszLCA0LCA1LCAxLCAyXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcm90YXRlID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBsZW4gPSBhcy5sZW5ndGg7XG4gICAgICAgIHZhciBtID0gTWF0aC5yb3VuZChuKSAlIGxlbjtcbiAgICAgICAgaWYgKGlzT3V0T2ZCb3VuZChNYXRoLmFicyhtKSwgYXMpIHx8IG0gPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBjb3B5KGFzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobSA8IDApIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHNwbGl0QXQoLW0pKGFzKSwgZiA9IF9hWzBdLCBzID0gX2FbMV07XG4gICAgICAgICAgICByZXR1cm4gcGlwZShzLCBjb25jYXQoZikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0ZShtIC0gbGVuKShhcyk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5ID0gXy5mcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5O1xuLyoqXG4gKiBCdWlsZHMgYSBgTm9uRW1wdHlBcnJheWAgZnJvbSBhbiBgQXJyYXlgIHJldHVybmluZyBgbm9uZWAgaWYgYGFzYCBpcyBhbiBlbXB0eSBhcnJheVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUFycmF5ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBfLnNvbWUoYXMpIDogXy5ub25lKTsgfTtcbi8qKlxuICogUmV0dXJuIGEgYE5vbkVtcHR5QXJyYXlgIG9mIGxlbmd0aCBgbmAgd2l0aCBlbGVtZW50IGBpYCBpbml0aWFsaXplZCB3aXRoIGBmKGkpYC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFrZUJ5IH0gZnJvbSAnZnAtdHMvTm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBkb3VibGUgPSAobjogbnVtYmVyKTogbnVtYmVyID0+IG4gKiAyXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoNSwgbWFrZUJ5KGRvdWJsZSkpLCBbMCwgMiwgNCwgNiwgOF0pXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1ha2VCeSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIHZhciBqID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihuKSk7XG4gICAgICAgIHZhciBvdXQgPSBbZigwKV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKGkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBDcmVhdGUgYSBgTm9uRW1wdHlBcnJheWAgY29udGFpbmluZyBhIHZhbHVlIHJlcGVhdGVkIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLlxuICpcbiAqICoqTm90ZSoqLiBgbmAgaXMgbm9ybWFsaXplZCB0byBhIG5hdHVyYWwgbnVtYmVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXBsaWNhdGUgfSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgzLCByZXBsaWNhdGUoJ2EnKSksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1ha2VCeShmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQ3JlYXRlIGEgYE5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSByYW5nZSBvZiBpbnRlZ2VycywgaW5jbHVkaW5nIGJvdGggZW5kcG9pbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByYW5nZSB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyYW5nZSgxLCA1KSwgWzEsIDIsIDMsIDQsIDVdKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciByYW5nZSA9IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIHN0YXJ0IDw9IGVuZCA/IG1ha2VCeShmdW5jdGlvbiAoaSkgeyByZXR1cm4gc3RhcnQgKyBpOyB9KShlbmQgLSBzdGFydCArIDEpIDogW3N0YXJ0XTtcbn07XG4vKipcbiAqIFJldHVybiB0aGUgdHVwbGUgb2YgdGhlIGBoZWFkYCBhbmQgdGhlIGB0YWlsYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5wcmVwZW5kIH0gZnJvbSAnZnAtdHMvTm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVucHJlcGVuZChbMSwgMiwgM10pLCBbMSwgWzIsIDNdXSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bnByZXBlbmQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFtoZWFkKGFzKSwgdGFpbChhcyldOyB9O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaW5pdGAgYW5kIHRoZSBgbGFzdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuYXBwZW5kIH0gZnJvbSAnZnAtdHMvTm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuYXBwZW5kKFsxLCAyLCAzLCA0XSksIFtbMSwgMiwgM10sIDRdKVxuICpcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHVuYXBwZW5kID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBbaW5pdChhcyksIGxhc3QoYXMpXTsgfTtcbmV4cG9ydCBmdW5jdGlvbiBjb25jYXRXKHNlY29uZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHsgcmV0dXJuIGZpcnN0LmNvbmNhdChzZWNvbmQpOyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdCh4LCB5KSB7XG4gICAgcmV0dXJuIHkgPyB4LmNvbmNhdCh5KSA6IGZ1bmN0aW9uICh5KSB7IHJldHVybiB5LmNvbmNhdCh4KTsgfTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmV2ZXJzZSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gX19zcHJlYWRBcnJheShbbGFzdChhcyldLCBhcy5zbGljZSgwLCAtMSkucmV2ZXJzZSgpLCB0cnVlKTsgfTtcbmV4cG9ydCBmdW5jdGlvbiBncm91cChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IGFzWzBdO1xuICAgICAgICB2YXIgbmVhID0gW2hlYWRdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGEsIGhlYWQpKSB7XG4gICAgICAgICAgICAgICAgbmVhLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBhO1xuICAgICAgICAgICAgICAgIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChuZWEpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIHN1Yi1ub24tZW1wdHktYXJyYXlzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgY2FsbGluZyBhIGBzdHJpbmdgLXJldHVybmluZ1xuICogZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHZhbHVlcyByZXR1cm5lZFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnZnAtdHMvTm9uRW1wdHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdyb3VwQnkoKHM6IHN0cmluZykgPT4gU3RyaW5nKHMubGVuZ3RoKSkoWydhJywgJ2InLCAnYWInXSksIHtcbiAqICAgJzEnOiBbJ2EnLCAnYiddLFxuICogICAnMic6IFsnYWInXVxuICogfSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBncm91cEJ5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBhc18xID0gYXM7IF9pIDwgYXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBhID0gYXNfMVtfaV07XG4gICAgICAgICAgICB2YXIgayA9IGYoYSk7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChvdXQsIGspKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdLnB1c2goYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXRba10gPSBbYV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMuc2xpY2UoKS5zb3J0KE8uY29tcGFyZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGluc2VydEF0ID0gZnVuY3Rpb24gKGksIGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpIDwgMCB8fCBpID4gYXMubGVuZ3RoID8gXy5ub25lIDogXy5zb21lKHVuc2FmZUluc2VydEF0KGksIGEsIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUF0ID0gZnVuY3Rpb24gKGksIGEpIHtcbiAgICByZXR1cm4gbW9kaWZ5QXQoaSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfSk7XG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtb2RpZnlBdCA9IGZ1bmN0aW9uIChpLCBmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gaXNPdXRPZkJvdW5kKGksIGFzKSA/IF8ubm9uZSA6IF8uc29tZSh1bnNhZmVVcGRhdGVBdChpLCBmKGFzW2ldKSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29weSA9IGZyb21SZWFkb25seU5vbkVtcHR5QXJyYXk7XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG9mID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIFthXTsgfTtcbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgemlwV2l0aCA9IGZ1bmN0aW9uIChhcywgYnMsIGYpIHtcbiAgICB2YXIgY3MgPSBbZihhc1swXSwgYnNbMF0pXTtcbiAgICB2YXIgbGVuID0gTWF0aC5taW4oYXMubGVuZ3RoLCBicy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY3NbaV0gPSBmKGFzW2ldLCBic1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBjcztcbn07XG5leHBvcnQgZnVuY3Rpb24gemlwKGFzLCBicykge1xuICAgIGlmIChicyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYnMpIHsgcmV0dXJuIHppcChicywgYXMpOyB9O1xuICAgIH1cbiAgICByZXR1cm4gemlwV2l0aChhcywgYnMsIGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBbYSwgYl07IH0pO1xufVxuLyoqXG4gKiBAc2luY2UgMi41LjFcbiAqL1xuZXhwb3J0IHZhciB1bnppcCA9IGZ1bmN0aW9uIChhYnMpIHtcbiAgICB2YXIgZmEgPSBbYWJzWzBdWzBdXTtcbiAgICB2YXIgZmIgPSBbYWJzWzBdWzFdXTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFicy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmYVtpXSA9IGFic1tpXVswXTtcbiAgICAgICAgZmJbaV0gPSBhYnNbaV1bMV07XG4gICAgfVxuICAgIHJldHVybiBbZmEsIGZiXTtcbn07XG4vKipcbiAqIFByZXBlbmQgYW4gZWxlbWVudCB0byBldmVyeSBtZW1iZXIgb2YgYW4gYXJyYXlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcHJlcGVuZEFsbCB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbbWlkZGxlLCBhc1swXV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKG1pZGRsZSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhbiBhcnJheVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcnNwZXJzZSg5KShbMSwgMiwgMywgNF0pLCBbMSwgOSwgMiwgOSwgMywgOSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgaW50ZXJzcGVyc2UgPSBmdW5jdGlvbiAobWlkZGxlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgcmVzdCA9IHRhaWwoYXMpO1xuICAgICAgICByZXR1cm4gaXNOb25FbXB0eShyZXN0KSA/IHBpcGUocmVzdCwgcHJlcGVuZEFsbChtaWRkbGUpLCBwcmVwZW5kKGhlYWQoYXMpKSkgOiBjb3B5KGFzKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZvbGRNYXBXaXRoSW5kZXggPSBSTkVBLmZvbGRNYXBXaXRoSW5kZXg7XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkTWFwID0gUk5FQS5mb2xkTWFwO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBmcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGYoMCwgaGVhZChhcykpKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgb3V0LnB1c2guYXBwbHkob3V0LCBmKGksIGFzW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gZihhcyksIGIgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICB2YXIgb3V0ID0gW2JdO1xuICAgICAgICB2YXIgbmV4dCA9IHJlc3Q7XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBmKG5leHQpLCBiXzEgPSBfYlswXSwgcmVzdF8yID0gX2JbMV07XG4gICAgICAgICAgICBvdXQucHVzaChiXzEpO1xuICAgICAgICAgICAgbmV4dCA9IHJlc3RfMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgTm9uRW1wdHlBcnJheWAgaW50byB0d28gcGllY2VzLCB0aGUgZmlyc3QgcGllY2UgaGFzIG1heCBgbmAgZWxlbWVudHMuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHNwbGl0QXQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG0gPSBNYXRoLm1heCgxLCBuKTtcbiAgICAgICAgcmV0dXJuIG0gPj0gYXMubGVuZ3RoID8gW2NvcHkoYXMpLCBbXV0gOiBbcGlwZShhcy5zbGljZSgxLCBtKSwgcHJlcGVuZChoZWFkKGFzKSkpLCBhcy5zbGljZShtKV07XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjaHVua3NPZiA9IGZ1bmN0aW9uIChuKSB7IHJldHVybiBjaG9wKHNwbGl0QXQobikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYXAgPSBmdW5jdGlvbiAoZmFiLCBmYSkgeyByZXR1cm4gcGlwZShmYWIsIGFwKGZhKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9leHRlbmQgPSBmdW5jdGlvbiAod2EsIGYpIHsgcmV0dXJuIHBpcGUod2EsIGV4dGVuZChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9yZWR1Y2UgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZShiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9mb2xkTWFwID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcE0gPSBmb2xkTWFwKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBNKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHQoYiwgZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZUYgPSB0cmF2ZXJzZShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiBwaXBlKHRhLCB0cmF2ZXJzZUYoZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2FsdCA9IGZ1bmN0aW9uIChmYSwgdGhhdCkgeyByZXR1cm4gcGlwZShmYSwgYWx0KHRoYXQpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgYiwgZikge1xuICAgIHJldHVybiBwaXBlKGZhLCByZWR1Y2VXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TSA9IGZvbGRNYXBXaXRoSW5kZXgoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcFdpdGhJbmRleE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0V2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGYpKTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4RiA9IHRyYXZlcnNlV2l0aEluZGV4KEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlV2l0aEluZGV4RihmKSk7IH07XG59O1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgYWx0YF0oI2FsdCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTkVBIGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10gYXMgTkVBLk5vbkVtcHR5QXJyYXk8bnVtYmVyPixcbiAqICAgICBORUEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBwaXBlKGFzLCBjb25jYXRXKHRoYXQoKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgTm9uRW1wdHlBcnJheWAgY29uY2F0ZW5hdGVzIHRoZSBpbnB1dHMgaW50byBhIHNpbmdsZSBhcnJheS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTkVBIGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgTkVBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4yXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byBhbiBhcmd1bWVudCB1bmRlciBhIHR5cGUgY29uc3RydWN0b3IuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gZmxhdE1hcChmdW5jdGlvbiAoZikgeyByZXR1cm4gcGlwZShhcywgbWFwKGYpKTsgfSk7XG59O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTkVBIGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgTkVBLmZsYXRNYXAoKG4pID0+IFtgYSR7bn1gLCBgYiR7bn1gXSlcbiAqICAgKSxcbiAqICAgWydhMScsICdiMScsICdhMicsICdiMicsICdhMycsICdiMyddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjE0LjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0TWFwID0gLyojX19QVVJFX18qLyBkdWFsKDIsIGZ1bmN0aW9uIChtYSwgZikge1xuICAgIHJldHVybiBwaXBlKG1hLCBjaGFpbldpdGhJbmRleChmdW5jdGlvbiAoaSwgYSkgeyByZXR1cm4gZihhLCBpKTsgfSkpO1xufSk7XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGV4dGVuZCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbmV4dCA9IHRhaWwoYXMpO1xuICAgICAgICB2YXIgb3V0ID0gW2YoYXMpXTtcbiAgICAgICAgd2hpbGUgKGlzTm9uRW1wdHkobmV4dCkpIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGYobmV4dCkpO1xuICAgICAgICAgICAgbmV4dCA9IHRhaWwobmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZHVwbGljYXRlID0gLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IC8qI19fUFVSRV9fKi8gZmxhdE1hcChpZGVudGl0eSk7XG4vKipcbiAqIGBtYXBgIGNhbiBiZSB1c2VkIHRvIHR1cm4gZnVuY3Rpb25zIGAoYTogQSkgPT4gQmAgaW50byBmdW5jdGlvbnMgYChmYTogRjxBPikgPT4gRjxCPmAgd2hvc2UgYXJndW1lbnQgYW5kIHJldHVybiB0eXBlc1xuICogdXNlIHRoZSB0eXBlIGNvbnN0cnVjdG9yIGBGYCB0byByZXByZXNlbnQgc29tZSBjb21wdXRhdGlvbmFsIGNvbnRleHQuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBtYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbZigwLCBoZWFkKGFzKSldO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKGksIGFzW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZSA9IFJORUEucmVkdWNlO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlV2l0aEluZGV4ID0gUk5FQS5yZWR1Y2VXaXRoSW5kZXg7XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IFJORUEucmVkdWNlUmlnaHQ7XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodFdpdGhJbmRleCA9IFJORUEucmVkdWNlUmlnaHRXaXRoSW5kZXg7XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4RiA9IHRyYXZlcnNlV2l0aEluZGV4KEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gdHJhdmVyc2VXaXRoSW5kZXhGKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciBzZXF1ZW5jZSA9IGZ1bmN0aW9uIChGKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleChGKShmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gYTsgfSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgICAgIHZhciBvdXQgPSBGLm1hcChmKDAsIGhlYWQoYXMpKSwgb2YpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIG91dCA9IEYuYXAoRi5tYXAob3V0LCBmdW5jdGlvbiAoYnMpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7IHJldHVybiBwaXBlKGJzLCBhcHBlbmQoYikpOyB9OyB9KSwgZihpLCBhc1tpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgZXh0cmFjdCA9IFJORUEuaGVhZDtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ05vbkVtcHR5QXJyYXknO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTaG93ID0gUk5FQS5nZXRTaG93O1xuLyoqXG4gKiBCdWlsZHMgYSBgU2VtaWdyb3VwYCBpbnN0YW5jZSBmb3IgYE5vbkVtcHR5QXJyYXlgXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U2VtaWdyb3VwID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGNvbmNhdFxufSk7IH07XG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRFcSB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBFID0gZ2V0RXEoTi5FcSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhbMSwgMl0sIFsxLCAyXSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgM10pLCBmYWxzZSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRFcSA9IFJORUEuZ2V0RXE7XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRmlyc3QgPSBcbi8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdFxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBSTkVBLmhlYWQ7XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRhaWwgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzLnNsaWNlKDEpOyB9O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gUk5FQS5sYXN0O1xuLyoqXG4gKiBHZXQgYWxsIGJ1dCB0aGUgbGFzdCBlbGVtZW50IG9mIGEgbm9uIGVtcHR5IGFycmF5LCBjcmVhdGluZyBhIG5ldyBhcnJheS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaW5pdCB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIFsxLCAyXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMV0pLCBbXSlcbiAqXG4gKiBAc2luY2UgMi4yLjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgwLCAtMSk7IH07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IFJORUEubWluO1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXggPSBSTkVBLm1heDtcbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNvbmNhdEFsbCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMucmVkdWNlKFMuY29uY2F0KTtcbiAgICB9O1xufTtcbi8qKlxuICogQnJlYWsgYW4gYEFycmF5YCBpbnRvIGl0cyBmaXJzdCBlbGVtZW50IGFuZCByZW1haW5pbmcgZWxlbWVudHMuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaExlZnQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGYoaGVhZChhcyksIHRhaWwoYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogQnJlYWsgYW4gYEFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZihpbml0KGFzKSwgbGFzdChhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgTm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1vZGlmeUhlYWQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2YoaGVhZChhcykpXSwgdGFpbChhcyksIHRydWUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBDaGFuZ2UgdGhlIGhlYWQsIGNyZWF0aW5nIGEgbmV3IGBOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlSGVhZCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtb2RpZnlIZWFkKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBsYXN0IGVsZW1lbnQsIGNyZWF0aW5nIGEgbmV3IGBOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5TGFzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShpbml0KGFzKSwgYXBwZW5kKGYobGFzdChhcykpKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgTm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUxhc3QgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5TGFzdChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogUGxhY2VzIGFuIGVsZW1lbnQgaW4gYmV0d2VlbiBtZW1iZXJzIG9mIGEgYE5vbkVtcHR5QXJyYXlgLCB0aGVuIGZvbGRzIHRoZSByZXN1bHRzIHVzaW5nIHRoZSBwcm92aWRlZCBgU2VtaWdyb3VwYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBpbnRlcmNhbGF0ZSB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLlNlbWlncm91cCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IFJORUEuaW50ZXJjYWxhdGU7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBsZWdhY3lcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWxpYXMgb2YgYGZsYXRNYXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluID0gZmxhdE1hcDtcbmV4cG9ydCBmdW5jdGlvbiBncm91cFNvcnQoTykge1xuICAgIHZhciBzb3J0TyA9IHNvcnQoTyk7XG4gICAgdmFyIGdyb3VwTyA9IGdyb3VwKE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc05vbkVtcHR5KGFzKSA/IGdyb3VwTyhzb3J0TyhhcykpIDogW10pOyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcihwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZmlsdGVyV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBwcmVkaWNhdGUoYSk7IH0pO1xufVxuLyoqXG4gKiBVc2UgW2BmaWx0ZXJXaXRoSW5kZXhgXSguL0FycmF5LnRzLmh0bWwjZmlsdGVyd2l0aGluZGV4KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZyb21BcnJheShhcy5maWx0ZXIoZnVuY3Rpb24gKGEsIGkpIHsgcmV0dXJuIHByZWRpY2F0ZShpLCBhKTsgfSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBVc2UgW2B1bnByZXBlbmRgXSgjdW5wcmVwZW5kKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdW5jb25zID0gdW5wcmVwZW5kO1xuLyoqXG4gKiBVc2UgW2B1bmFwcGVuZGBdKCN1bmFwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuOS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHVuc25vYyA9IHVuYXBwZW5kO1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnMoaGVhZCwgdGFpbCkge1xuICAgIHJldHVybiB0YWlsID09PSB1bmRlZmluZWQgPyBwcmVwZW5kKGhlYWQpIDogcGlwZSh0YWlsLCBwcmVwZW5kKGhlYWQpKTtcbn1cbi8qKlxuICogVXNlIFtgYXBwZW5kYF0oLi9BcnJheS50cy5odG1sI2FwcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBmdW5jdGlvbiAoaW5pdCwgZW5kKSB7IHJldHVybiBwaXBlKGluaXQsIGFwcGVuZChlbmQpKTsgfTtcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVXNlIFtgY29uY2F0QWxsYF0oI2NvbmNhdGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBSTkVBLmNvbmNhdEFsbDtcbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgTkVBLkZ1bmN0b3JgIGluc3RlYWQgb2YgYE5FQS5ub25FbXB0eUFycmF5YFxuICogKHdoZXJlIGBORUFgIGlzIGZyb20gYGltcG9ydCBORUEgZnJvbSAnZnAtdHMvTm9uRW1wdHlBcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbm9uRW1wdHlBcnJheSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBvZjogb2YsXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIGV4dGVuZDogX2V4dGVuZCxcbiAgICBleHRyYWN0OiBleHRyYWN0LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXgsXG4gICAgYWx0OiBfYWx0XG59O1xuIiwKICAidmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuaW1wb3J0IHsgYXBGaXJzdCBhcyBhcEZpcnN0XywgYXBTIGFzIGFwU18sIGFwU2Vjb25kIGFzIGFwU2Vjb25kXyB9IGZyb20gJy4vQXBwbHknO1xuaW1wb3J0IHsgYmluZCBhcyBiaW5kXywgY2hhaW5GaXJzdCBhcyBjaGFpbkZpcnN0XyB9IGZyb20gJy4vQ2hhaW4nO1xuaW1wb3J0IHsgZHVhbCwgaWRlbnRpdHksIHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFJORUEgZnJvbSAnLi9SZWFkb25seU5vbkVtcHR5QXJyYXknO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gaW50ZXJuYWxcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgaXNOb25FbXB0eSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMubGVuZ3RoID4gMDsgfTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgaXNPdXRPZkJvdW5kID0gZnVuY3Rpb24gKGksIGFzKSB7IHJldHVybiBpIDwgMCB8fCBpID49IGFzLmxlbmd0aDsgfTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFcgPSBmdW5jdGlvbiAoaGVhZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFpbCkge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbaGVhZF0sIHRhaWwsIHRydWUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBwcmVwZW5kID0gcHJlcGVuZFc7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIGFwcGVuZFcgPSBmdW5jdGlvbiAoZW5kKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChpbml0KSB7XG4gICAgICAgIHJldHVybiBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIGluaXQsIHRydWUpLCBbZW5kXSwgZmFsc2UpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmQgPSBhcHBlbmRXO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVJbnNlcnRBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIGlmIChpc05vbkVtcHR5KGFzKSkge1xuICAgICAgICB2YXIgeHMgPSBmcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5KGFzKTtcbiAgICAgICAgeHMuc3BsaWNlKGksIDAsIGEpO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgfVxuICAgIHJldHVybiBbYV07XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIHZhciB4cyA9IGZyb21SZWFkb25seU5vbkVtcHR5QXJyYXkoYXMpO1xuICAgIHhzW2ldID0gYTtcbiAgICByZXR1cm4geHM7XG59O1xuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGEgYE5vbkVtcHR5QXJyYXlgLCBrZWVwaW5nIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuaXEgfSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmlxKE4uRXEpKFsxLCAyLCAxXSksIFsxLCAyXSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pcSA9IGZ1bmN0aW9uIChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICBpZiAoYXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gY29weShhcyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtoZWFkKGFzKV07XG4gICAgICAgIHZhciByZXN0ID0gdGFpbChhcyk7XG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIGlmIChvdXQuZXZlcnkoZnVuY3Rpb24gKG8pIHsgcmV0dXJuICFFLmVxdWFscyhvLCBhKTsgfSkpIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCByZXN0XzEgPSByZXN0OyBfaSA8IHJlc3RfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBhID0gcmVzdF8xW19pXTtcbiAgICAgICAgICAgIF9sb29wXzEoYSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogU29ydCB0aGUgZWxlbWVudHMgb2YgYSBgTm9uRW1wdHlBcnJheWAgaW4gaW5jcmVhc2luZyBvcmRlciwgd2hlcmUgZWxlbWVudHMgYXJlIGNvbXBhcmVkIHVzaW5nIGZpcnN0IGBvcmRzWzBdYCwgdGhlbiBgb3Jkc1sxXWAsXG4gKiBldGMuLi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTkVBIGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICBuYW1lOiBzdHJpbmdcbiAqICAgYWdlOiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gTkVBLnNvcnRCeShbYnlOYW1lLCBieUFnZV0pXG4gKlxuICogY29uc3QgcGVyc29uczogTkVBLk5vbkVtcHR5QXJyYXk8UGVyc29uPiA9IFtcbiAqICAgeyBuYW1lOiAnYScsIGFnZTogMSB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9XG4gKiBdXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb3J0QnlOYW1lQnlBZ2UocGVyc29ucyksIFtcbiAqICAgeyBuYW1lOiAnYScsIGFnZTogMSB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDMgfSxcbiAqICAgeyBuYW1lOiAnYycsIGFnZTogMiB9XG4gKiBdKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0QnkgPSBmdW5jdGlvbiAob3Jkcykge1xuICAgIGlmIChpc05vbkVtcHR5KG9yZHMpKSB7XG4gICAgICAgIHZhciBNID0gZ2V0TW9ub2lkKCk7XG4gICAgICAgIHJldHVybiBzb3J0KG9yZHMucmVkdWNlKE0uY29uY2F0LCBNLmVtcHR5KSk7XG4gICAgfVxuICAgIHJldHVybiBjb3B5O1xufTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaW9uID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgdW5pcUUgPSB1bmlxKEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7IHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHsgcmV0dXJuIHVuaXFFKHBpcGUoZmlyc3QsIGNvbmNhdChzZWNvbmQpKSk7IH07IH07XG59O1xuLyoqXG4gKiBSb3RhdGUgYSBgTm9uRW1wdHlBcnJheWAgYnkgYG5gIHN0ZXBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByb3RhdGUgfSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKC0yKShbMSwgMiwgMywgNCwgNV0pLCBbMywgNCwgNSwgMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgbSA9IE1hdGgucm91bmQobikgJSBsZW47XG4gICAgICAgIGlmIChpc091dE9mQm91bmQoTWF0aC5hYnMobSksIGFzKSB8fCBtID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gY29weShhcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzcGxpdEF0KC1tKShhcyksIGYgPSBfYVswXSwgcyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUocywgY29uY2F0KGYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGUobSAtIGxlbikoYXMpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbVJlYWRvbmx5Tm9uRW1wdHlBcnJheSA9IF8uZnJvbVJlYWRvbmx5Tm9uRW1wdHlBcnJheTtcbi8qKlxuICogQnVpbGRzIGEgYE5vbkVtcHR5QXJyYXlgIGZyb20gYW4gYEFycmF5YCByZXR1cm5pbmcgYG5vbmVgIGlmIGBhc2AgaXMgYW4gZW1wdHkgYXJyYXlcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKGFzKSA6IF8ubm9uZSk7IH07XG4vKipcbiAqIFJldHVybiBhIGBOb25FbXB0eUFycmF5YCBvZiBsZW5ndGggYG5gIHdpdGggZWxlbWVudCBgaWAgaW5pdGlhbGl6ZWQgd2l0aCBgZihpKWAuXG4gKlxuICogKipOb3RlKiouIGBuYCBpcyBub3JtYWxpemVkIHRvIGEgbmF0dXJhbCBudW1iZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1ha2VCeSB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgZG91YmxlID0gKG46IG51bWJlcik6IG51bWJlciA9PiBuICogMlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKDUsIG1ha2VCeShkb3VibGUpKSwgWzAsIDIsIDQsIDYsIDhdKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBtYWtlQnkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAobikge1xuICAgICAgICB2YXIgaiA9IE1hdGgubWF4KDAsIE1hdGguZmxvb3IobikpO1xuICAgICAgICB2YXIgb3V0ID0gW2YoMCldO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgb3V0LnB1c2goZihpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogQ3JlYXRlIGEgYE5vbkVtcHR5QXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBuYXR1cmFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvTm9uRW1wdHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoMywgcmVwbGljYXRlKCdhJykpLCBbJ2EnLCAnYScsICdhJ10pXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJlcGxpY2F0ZSA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBtYWtlQnkoZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfSk7IH07XG4vKipcbiAqIENyZWF0ZSBhIGBOb25FbXB0eUFycmF5YCBjb250YWluaW5nIGEgcmFuZ2Ugb2YgaW50ZWdlcnMsIGluY2x1ZGluZyBib3RoIGVuZHBvaW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmFuZ2UgfSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmFuZ2UoMSwgNSksIFsxLCAyLCAzLCA0LCA1XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCA8PSBlbmQgPyBtYWtlQnkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHN0YXJ0ICsgaTsgfSkoZW5kIC0gc3RhcnQgKyAxKSA6IFtzdGFydF07XG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIHR1cGxlIG9mIHRoZSBgaGVhZGAgYW5kIHRoZSBgdGFpbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVucHJlcGVuZCB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bnByZXBlbmQoWzEsIDIsIDNdKSwgWzEsIFsyLCAzXV0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5wcmVwZW5kID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBbaGVhZChhcyksIHRhaWwoYXMpXTsgfTtcbi8qKlxuICogUmV0dXJuIHRoZSB0dXBsZSBvZiB0aGUgYGluaXRgIGFuZCB0aGUgYGxhc3RgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1bmFwcGVuZCB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmFwcGVuZChbMSwgMiwgMywgNF0pLCBbWzEsIDIsIDNdLCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB1bmFwcGVuZCA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gW2luaXQoYXMpLCBsYXN0KGFzKV07IH07XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0VyhzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoeCwgeSkge1xuICAgIHJldHVybiB5ID8geC5jb25jYXQoeSkgOiBmdW5jdGlvbiAoeSkgeyByZXR1cm4geS5jb25jYXQoeCk7IH07XG59XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW2xhc3QoYXMpXSwgYXMuc2xpY2UoMCwgLTEpLnJldmVyc2UoKSwgdHJ1ZSk7IH07XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXAoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIGxlbiA9IGFzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgdmFyIGhlYWQgPSBhc1swXTtcbiAgICAgICAgdmFyIG5lYSA9IFtoZWFkXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc1tpXTtcbiAgICAgICAgICAgIGlmIChFLmVxdWFscyhhLCBoZWFkKSkge1xuICAgICAgICAgICAgICAgIG5lYS5wdXNoKGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2gobmVhKTtcbiAgICAgICAgICAgICAgICBoZWFkID0gYTtcbiAgICAgICAgICAgICAgICBuZWEgPSBbaGVhZF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3V0LnB1c2gobmVhKTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxuLyoqXG4gKiBTcGxpdHMgYW4gYXJyYXkgaW50byBzdWItbm9uLWVtcHR5LWFycmF5cyBzdG9yZWQgaW4gYW4gb2JqZWN0LCBiYXNlZCBvbiB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgYSBgc3RyaW5nYC1yZXR1cm5pbmdcbiAqIGZ1bmN0aW9uIG9uIGVhY2ggZWxlbWVudCwgYW5kIGdyb3VwaW5nIHRoZSByZXN1bHRzIGFjY29yZGluZyB0byB2YWx1ZXMgcmV0dXJuZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ3JvdXBCeSB9IGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChncm91cEJ5KChzOiBzdHJpbmcpID0+IFN0cmluZyhzLmxlbmd0aCkpKFsnYScsICdiJywgJ2FiJ10pLCB7XG4gKiAgICcxJzogWydhJywgJ2InXSxcbiAqICAgJzInOiBbJ2FiJ11cbiAqIH0pXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ3JvdXBCeSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgYXNfMSA9IGFzOyBfaSA8IGFzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzXzFbX2ldO1xuICAgICAgICAgICAgdmFyIGsgPSBmKGEpO1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwob3V0LCBrKSkge1xuICAgICAgICAgICAgICAgIG91dFtrXS5wdXNoKGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdID0gW2FdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNvcnQgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpbnNlcnRBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gaSA8IDAgfHwgaSA+IGFzLmxlbmd0aCA/IF8ubm9uZSA6IF8uc29tZSh1bnNhZmVJbnNlcnRBdChpLCBhLCBhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvcHkgPSBmcm9tUmVhZG9ubHlOb25FbXB0eUFycmF5O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBvZiA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBbYV07IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMVxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoYXMsIGJzLCBmKSB7XG4gICAgdmFyIGNzID0gW2YoYXNbMF0sIGJzWzBdKV07XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGFzLmxlbmd0aCwgYnMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNzW2ldID0gZihhc1tpXSwgYnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3M7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4xXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYWJzKSB7XG4gICAgdmFyIGZhID0gW2Fic1swXVswXV07XG4gICAgdmFyIGZiID0gW2Fic1swXVsxXV07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmFbaV0gPSBhYnNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYWJzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGFuIGFycmF5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocHJlcGVuZEFsbCg5KShbMSwgMiwgMywgNF0pLCBbOSwgMSwgOSwgMiwgOSwgMywgOSwgNF0pXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRBbGwgPSBmdW5jdGlvbiAobWlkZGxlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgb3V0ID0gW21pZGRsZSwgYXNbMF1dO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaChtaWRkbGUsIGFzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYW4gYXJyYXlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaW50ZXJzcGVyc2UgfSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW50ZXJzcGVyc2UoOSkoWzEsIDIsIDMsIDRdKSwgWzEsIDksIDIsIDksIDMsIDksIDRdKVxuICpcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGludGVyc3BlcnNlID0gZnVuY3Rpb24gKG1pZGRsZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIHJlc3QgPSB0YWlsKGFzKTtcbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkocmVzdCkgPyBwaXBlKHJlc3QsIHByZXBlbmRBbGwobWlkZGxlKSwgcHJlcGVuZChoZWFkKGFzKSkpIDogY29weShhcyk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkTWFwV2l0aEluZGV4ID0gUk5FQS5mb2xkTWFwV2l0aEluZGV4O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IFJORUEuZm9sZE1hcDtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbldpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgb3V0ID0gZnJvbVJlYWRvbmx5Tm9uRW1wdHlBcnJheShmKDAsIGhlYWQoYXMpKSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoLmFwcGx5KG91dCwgZihpLCBhc1tpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjaG9wID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBfYSA9IGYoYXMpLCBiID0gX2FbMF0sIHJlc3QgPSBfYVsxXTtcbiAgICAgICAgdmFyIG91dCA9IFtiXTtcbiAgICAgICAgdmFyIG5leHQgPSByZXN0O1xuICAgICAgICB3aGlsZSAoaXNOb25FbXB0eShuZXh0KSkge1xuICAgICAgICAgICAgdmFyIF9iID0gZihuZXh0KSwgYl8xID0gX2JbMF0sIHJlc3RfMiA9IF9iWzFdO1xuICAgICAgICAgICAgb3V0LnB1c2goYl8xKTtcbiAgICAgICAgICAgIG5leHQgPSByZXN0XzI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYE5vbkVtcHR5QXJyYXlgIGludG8gdHdvIHBpZWNlcywgdGhlIGZpcnN0IHBpZWNlIGhhcyBtYXggYG5gIGVsZW1lbnRzLlxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBzcGxpdEF0ID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBtID0gTWF0aC5tYXgoMSwgbik7XG4gICAgICAgIHJldHVybiBtID49IGFzLmxlbmd0aCA/IFtjb3B5KGFzKSwgW11dIDogW3BpcGUoYXMuc2xpY2UoMSwgbSksIHByZXBlbmQoaGVhZChhcykpKSwgYXMuc2xpY2UobSldO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gY2hvcChzcGxpdEF0KG4pKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX21hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwV2l0aEluZGV4KGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2FwID0gZnVuY3Rpb24gKGZhYiwgZmEpIHsgcmV0dXJuIHBpcGUoZmFiLCBhcChmYSkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZXh0ZW5kID0gZnVuY3Rpb24gKHdhLCBmKSB7IHJldHVybiBwaXBlKHdhLCBleHRlbmQoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2UoYiwgZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBNID0gZm9sZE1hcChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwTShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0KGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VGKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9hbHQgPSBmdW5jdGlvbiAoZmEsIHRoYXQpIHsgcmV0dXJuIHBpcGUoZmEsIGFsdCh0aGF0KSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9yZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlV2l0aEluZGV4KGIsIGYpKTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9mb2xkTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE0gPSBmb2xkTWFwV2l0aEluZGV4KE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBXaXRoSW5kZXhNKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9yZWR1Y2VSaWdodFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgYiwgZikge1xuICAgIHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodFdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfdHJhdmVyc2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleEYgPSB0cmF2ZXJzZVdpdGhJbmRleChGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiBwaXBlKHRhLCB0cmF2ZXJzZVdpdGhJbmRleEYoZikpOyB9O1xufTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFsdGBdKCNhbHQpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE5FQSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdIGFzIE5FQS5Ob25FbXB0eUFycmF5PG51bWJlcj4sXG4gKiAgICAgTkVBLmFsdFcoKCkgPT4gWydhJywgJ2InXSlcbiAqICAgKSxcbiAqICAgWzEsIDIsIDMsICdhJywgJ2InXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgYWx0VyA9IGZ1bmN0aW9uICh0aGF0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gcGlwZShhcywgY29uY2F0Vyh0aGF0KCkpKTtcbiAgICB9O1xufTtcbi8qKlxuICogSWRlbnRpZmllcyBhbiBhc3NvY2lhdGl2ZSBvcGVyYXRpb24gb24gYSB0eXBlIGNvbnN0cnVjdG9yLiBJdCBpcyBzaW1pbGFyIHRvIGBTZW1pZ3JvdXBgLCBleGNlcHQgdGhhdCBpdCBhcHBsaWVzIHRvXG4gKiB0eXBlcyBvZiBraW5kIGAqIC0+ICpgLlxuICpcbiAqIEluIGNhc2Ugb2YgYE5vbkVtcHR5QXJyYXlgIGNvbmNhdGVuYXRlcyB0aGUgaW5wdXRzIGludG8gYSBzaW5nbGUgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE5FQSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIE5FQS5hbHQoKCkgPT4gWzQsIDVdKVxuICogICApLFxuICogICBbMSwgMiwgMywgNCwgNV1cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjYuMlxuICovXG5leHBvcnQgdmFyIGFsdCA9IGFsdFc7XG4vKipcbiAqIEFwcGx5IGEgZnVuY3Rpb24gdG8gYW4gYXJndW1lbnQgdW5kZXIgYSB0eXBlIGNvbnN0cnVjdG9yLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoYXMsIG1hcChmKSk7IH0pO1xufTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE5FQSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIE5FQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0YWlsKGFzKTtcbiAgICAgICAgdmFyIG91dCA9IFtmKGFzKV07XG4gICAgICAgIHdoaWxlIChpc05vbkVtcHR5KG5leHQpKSB7XG4gICAgICAgICAgICBvdXQucHVzaChmKG5leHQpKTtcbiAgICAgICAgICAgIG5leHQgPSB0YWlsKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKGlkZW50aXR5KTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZsYXR0ZW4gPSAvKiNfX1BVUkVfXyovIGZsYXRNYXAoaWRlbnRpdHkpO1xuLyoqXG4gKiBgbWFwYCBjYW4gYmUgdXNlZCB0byB0dXJuIGZ1bmN0aW9ucyBgKGE6IEEpID0+IEJgIGludG8gZnVuY3Rpb25zIGAoZmE6IEY8QT4pID0+IEY8Qj5gIHdob3NlIGFyZ3VtZW50IGFuZCByZXR1cm4gdHlwZXNcbiAqIHVzZSB0aGUgdHlwZSBjb25zdHJ1Y3RvciBgRmAgdG8gcmVwcmVzZW50IHNvbWUgY29tcHV0YXRpb25hbCBjb250ZXh0LlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgb3V0ID0gW2YoMCwgaGVhZChhcykpXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgb3V0LnB1c2goZihpLCBhc1tpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2UgPSBSTkVBLnJlZHVjZTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZVdpdGhJbmRleCA9IFJORUEucmVkdWNlV2l0aEluZGV4O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHQgPSBSTkVBLnJlZHVjZVJpZ2h0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBSTkVBLnJlZHVjZVJpZ2h0V2l0aEluZGV4O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleEYgPSB0cmF2ZXJzZVdpdGhJbmRleChGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4RihmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgc2VxdWVuY2UgPSBmdW5jdGlvbiAoRikgeyByZXR1cm4gdHJhdmVyc2VXaXRoSW5kZXgoRikoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgICAgICB2YXIgb3V0ID0gRi5tYXAoZigwLCBoZWFkKGFzKSksIG9mKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBvdXQgPSBGLmFwKEYubWFwKG91dCwgZnVuY3Rpb24gKGJzKSB7IHJldHVybiBmdW5jdGlvbiAoYikgeyByZXR1cm4gcGlwZShicywgYXBwZW5kKGIpKTsgfTsgfSksIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIGV4dHJhY3QgPSBSTkVBLmhlYWQ7XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdOb25FbXB0eUFycmF5Jztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U2hvdyA9IFJORUEuZ2V0U2hvdztcbi8qKlxuICogQnVpbGRzIGEgYFNlbWlncm91cGAgaW5zdGFuY2UgZm9yIGBOb25FbXB0eUFycmF5YFxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBjb25jYXRcbn0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0RXEgfSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWzEsIDJdLCBbMSwgMl0pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsxLCAyXSwgWzEsIDNdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBSTkVBLmdldEVxO1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VW5pb25TZW1pZ3JvdXAgPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlvbkUgPSB1bmlvbihFKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiB1bmlvbkUoc2Vjb25kKShmaXJzdCk7IH1cbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhcCA9IC8qI19fUFVSRV9fKi8gZmxhcF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBQb2ludGVkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvcldpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbHkgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBcbn07XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXBGaXJzdCA9IC8qI19fUFVSRV9fKi8gYXBGaXJzdF8oQXBwbHkpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIHNlY29uZC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcFNlY29uZCA9IC8qI19fUFVSRV9fKi8gYXBTZWNvbmRfKEFwcGx5KTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbGljYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQ2hhaW4gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0ID0gXG4vKiNfX1BVUkVfXyovIGNoYWluRmlyc3RfKENoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleCxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogX3RyYXZlcnNlV2l0aEluZGV4XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBbHQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFsdDogX2FsdFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29tb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGV4dHJhY3Q6IGV4dHJhY3Rcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkbyBub3RhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIERvID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVjb3JkKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kVG8gPSAvKiNfX1BVUkVfXyovIGJpbmRUb18oRnVuY3Rvcik7XG52YXIgbGV0XyA9IC8qI19fUFVSRV9fKi8gbGV0X18oRnVuY3Rvcik7XG5leHBvcnQgeyBcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMy4wXG4gKi9cbmxldF8gYXMgbGV0IH07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZCA9IC8qI19fUFVSRV9fKi8gYmluZF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGFwUyA9IC8qI19fUFVSRV9fKi8gYXBTXyhBcHBseSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBoZWFkID0gUk5FQS5oZWFkO1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgxKTsgfTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbGFzdCA9IFJORUEubGFzdDtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhIG5vbiBlbXB0eSBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMSwgMiwgM10pLCBbMSwgMl0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGluaXQoWzFdKSwgW10pXG4gKlxuICogQHNpbmNlIDIuMi4wXG4gKi9cbmV4cG9ydCB2YXIgaW5pdCA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMuc2xpY2UoMCwgLTEpOyB9O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtaW4gPSBSTkVBLm1pbjtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF4ID0gUk5FQS5tYXg7XG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoUykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLnJlZHVjZShTLmNvbmNhdCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGFuIGBBcnJheWAgaW50byBpdHMgZmlyc3QgZWxlbWVudCBhbmQgcmVtYWluaW5nIGVsZW1lbnRzLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hMZWZ0ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBmKGhlYWQoYXMpLCB0YWlsKGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGFuIGBBcnJheWAgaW50byBpdHMgaW5pdGlhbCBlbGVtZW50cyBhbmQgdGhlIGxhc3QgZWxlbWVudC5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoUmlnaHQgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGYoaW5pdChhcyksIGxhc3QoYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgaGVhZCwgY3JlYXRpbmcgYSBuZXcgYE5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBtb2RpZnlIZWFkID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBfX3NwcmVhZEFycmF5KFtmKGhlYWQoYXMpKV0sIHRhaWwoYXMpLCB0cnVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQ2hhbmdlIHRoZSBoZWFkLCBjcmVhdGluZyBhIG5ldyBgTm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUhlYWQgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbW9kaWZ5SGVhZChmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgbGFzdCBlbGVtZW50LCBjcmVhdGluZyBhIG5ldyBgTm9uRW1wdHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1vZGlmeUxhc3QgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIHBpcGUoaW5pdChhcyksIGFwcGVuZChmKGxhc3QoYXMpKSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBDaGFuZ2UgdGhlIGxhc3QgZWxlbWVudCwgY3JlYXRpbmcgYSBuZXcgYE5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVMYXN0ID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG1vZGlmeUxhc3QoZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfSk7IH07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhIGBOb25FbXB0eUFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9Ob25FbXB0eUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW50ZXJjYWxhdGUoUy5TZW1pZ3JvdXApKCctJykoWydhJywgJ2InLCAnYyddKSwgJ2EtYi1jJylcbiAqXG4gKiBAc2luY2UgMi4xMi4wXG4gKi9cbmV4cG9ydCB2YXIgaW50ZXJjYWxhdGUgPSBSTkVBLmludGVyY2FsYXRlO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTb3J0KE8pIHtcbiAgICB2YXIgc29ydE8gPSBzb3J0KE8pO1xuICAgIHZhciBncm91cE8gPSBncm91cChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBncm91cE8oc29ydE8oYXMpKSA6IFtdKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn1cbi8qKlxuICogVXNlIFtgZmlsdGVyV2l0aEluZGV4YF0oLi9BcnJheS50cy5odG1sI2ZpbHRlcndpdGhpbmRleCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGZpbHRlcldpdGhJbmRleCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBmcm9tQXJyYXkoYXMuZmlsdGVyKGZ1bmN0aW9uIChhLCBpKSB7IHJldHVybiBwcmVkaWNhdGUoaSwgYSk7IH0pKTtcbiAgICB9O1xufTtcbi8qKlxuICogVXNlIFtgdW5wcmVwZW5kYF0oI3VucHJlcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuOS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHVuY29ucyA9IHVucHJlcGVuZDtcbi8qKlxuICogVXNlIFtgdW5hcHBlbmRgXSgjdW5hcHBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjkuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciB1bnNub2MgPSB1bmFwcGVuZDtcbmV4cG9ydCBmdW5jdGlvbiBjb25zKGhlYWQsIHRhaWwpIHtcbiAgICByZXR1cm4gdGFpbCA9PT0gdW5kZWZpbmVkID8gcHJlcGVuZChoZWFkKSA6IHBpcGUodGFpbCwgcHJlcGVuZChoZWFkKSk7XG59XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKC4vQXJyYXkudHMuaHRtbCNhcHBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzbm9jID0gZnVuY3Rpb24gKGluaXQsIGVuZCkgeyByZXR1cm4gcGlwZShpbml0LCBhcHBlbmQoZW5kKSk7IH07XG4vKipcbiAqIFVzZSBbYHByZXBlbmRBbGxgXSgjcHJlcGVuZGFsbCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuOS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRUb0FsbCA9IHByZXBlbmRBbGw7XG4vKipcbiAqIFVzZSBbYGNvbmNhdEFsbGBdKCNjb25jYXRhbGwpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBmb2xkID0gUk5FQS5jb25jYXRBbGw7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYE5FQS5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBORUEubm9uRW1wdHlBcnJheWBcbiAqICh3aGVyZSBgTkVBYCBpcyBmcm9tIGBpbXBvcnQgTkVBIGZyb20gJ2ZwLXRzL05vbkVtcHR5QXJyYXknYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG5vbkVtcHR5QXJyYXkgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgZXh0cmFjdDogZXh0cmFjdCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleCxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogX3RyYXZlcnNlV2l0aEluZGV4LFxuICAgIGFsdDogX2FsdFxufTtcbiIsCiAgIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGlzTnVtYmVyID0gZnVuY3Rpb24gKHUpIHsgcmV0dXJuIHR5cGVvZiB1ID09PSAnbnVtYmVyJzsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGluc3RhbmNlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgRXEgPSB7XG4gICAgZXF1YWxzOiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmlyc3QgPT09IHNlY29uZDsgfVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIE9yZCA9IHtcbiAgICBlcXVhbHM6IEVxLmVxdWFscyxcbiAgICBjb21wYXJlOiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gKGZpcnN0IDwgc2Vjb25kID8gLTEgOiBmaXJzdCA+IHNlY29uZCA/IDEgOiAwKTsgfVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEJvdW5kZWQgPSB7XG4gICAgZXF1YWxzOiBFcS5lcXVhbHMsXG4gICAgY29tcGFyZTogT3JkLmNvbXBhcmUsXG4gICAgdG9wOiBJbmZpbml0eSxcbiAgICBib3R0b206IC1JbmZpbml0eVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFNob3cgPSB7XG4gICAgc2hvdzogZnVuY3Rpb24gKG4pIHsgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG4pOyB9XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgTWFnbWFTdWIgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmlyc3QgLSBzZWNvbmQ7IH1cbn07XG4vKipcbiAqIGBudW1iZXJgIHNlbWlncm91cCB1bmRlciBhZGRpdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgU2VtaWdyb3VwU3VtIH0gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoU2VtaWdyb3VwU3VtLmNvbmNhdCgyLCAzKSwgNSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgU2VtaWdyb3VwU3VtID0ge1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0ICsgc2Vjb25kOyB9XG59O1xuLyoqXG4gKiBgbnVtYmVyYCBzZW1pZ3JvdXAgdW5kZXIgbXVsdGlwbGljYXRpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFNlbWlncm91cFByb2R1Y3QgfSBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTZW1pZ3JvdXBQcm9kdWN0LmNvbmNhdCgyLCAzKSwgNilcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgU2VtaWdyb3VwUHJvZHVjdCA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBmaXJzdCAqIHNlY29uZDsgfVxufTtcbi8qKlxuICogYG51bWJlcmAgbW9ub2lkIHVuZGVyIGFkZGl0aW9uLlxuICpcbiAqIFRoZSBgZW1wdHlgIHZhbHVlIGlzIGAwYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgTW9ub2lkU3VtIH0gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTW9ub2lkU3VtLmNvbmNhdCgyLCBNb25vaWRTdW0uZW1wdHkpLCAyKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBNb25vaWRTdW0gPSB7XG4gICAgY29uY2F0OiBTZW1pZ3JvdXBTdW0uY29uY2F0LFxuICAgIGVtcHR5OiAwXG59O1xuLyoqXG4gKiBgbnVtYmVyYCBtb25vaWQgdW5kZXIgbXVsdGlwbGljYXRpb24uXG4gKlxuICogVGhlIGBlbXB0eWAgdmFsdWUgaXMgYDFgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBNb25vaWRQcm9kdWN0IH0gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTW9ub2lkUHJvZHVjdC5jb25jYXQoMiwgTW9ub2lkUHJvZHVjdC5lbXB0eSksIDIpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIE1vbm9pZFByb2R1Y3QgPSB7XG4gICAgY29uY2F0OiBTZW1pZ3JvdXBQcm9kdWN0LmNvbmNhdCxcbiAgICBlbXB0eTogMVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEZpZWxkID0ge1xuICAgIGFkZDogU2VtaWdyb3VwU3VtLmNvbmNhdCxcbiAgICB6ZXJvOiAwLFxuICAgIG11bDogU2VtaWdyb3VwUHJvZHVjdC5jb25jYXQsXG4gICAgb25lOiAxLFxuICAgIHN1YjogTWFnbWFTdWIuY29uY2F0LFxuICAgIGRlZ3JlZTogZnVuY3Rpb24gKF8pIHsgcmV0dXJuIDE7IH0sXG4gICAgZGl2OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmlyc3QgLyBzZWNvbmQ7IH0sXG4gICAgbW9kOiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmlyc3QgJSBzZWNvbmQ7IH1cbn07XG4iLAogICIvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyByZWZpbmVtZW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBpc051bWJlciA9IGZ1bmN0aW9uICh1KSB7IHJldHVybiB0eXBlb2YgdSA9PT0gJ251bWJlcic7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBpbnN0YW5jZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEVxID0ge1xuICAgIGVxdWFsczogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0ID09PSBzZWNvbmQ7IH1cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBPcmQgPSB7XG4gICAgZXF1YWxzOiBFcS5lcXVhbHMsXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIChmaXJzdCA8IHNlY29uZCA/IC0xIDogZmlyc3QgPiBzZWNvbmQgPyAxIDogMCk7IH1cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBCb3VuZGVkID0ge1xuICAgIGVxdWFsczogRXEuZXF1YWxzLFxuICAgIGNvbXBhcmU6IE9yZC5jb21wYXJlLFxuICAgIHRvcDogSW5maW5pdHksXG4gICAgYm90dG9tOiAtSW5maW5pdHlcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBTaG93ID0ge1xuICAgIHNob3c6IGZ1bmN0aW9uIChuKSB7IHJldHVybiBKU09OLnN0cmluZ2lmeShuKTsgfVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIE1hZ21hU3ViID0ge1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0IC0gc2Vjb25kOyB9XG59O1xuLyoqXG4gKiBgbnVtYmVyYCBzZW1pZ3JvdXAgdW5kZXIgYWRkaXRpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFNlbWlncm91cFN1bSB9IGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFNlbWlncm91cFN1bS5jb25jYXQoMiwgMyksIDUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFNlbWlncm91cFN1bSA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBmaXJzdCArIHNlY29uZDsgfVxufTtcbi8qKlxuICogYG51bWJlcmAgc2VtaWdyb3VwIHVuZGVyIG11bHRpcGxpY2F0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBQcm9kdWN0IH0gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoU2VtaWdyb3VwUHJvZHVjdC5jb25jYXQoMiwgMyksIDYpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFNlbWlncm91cFByb2R1Y3QgPSB7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmlyc3QgKiBzZWNvbmQ7IH1cbn07XG4vKipcbiAqIGBudW1iZXJgIG1vbm9pZCB1bmRlciBhZGRpdGlvbi5cbiAqXG4gKiBUaGUgYGVtcHR5YCB2YWx1ZSBpcyBgMGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IE1vbm9pZFN1bSB9IGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE1vbm9pZFN1bS5jb25jYXQoMiwgTW9ub2lkU3VtLmVtcHR5KSwgMilcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgTW9ub2lkU3VtID0ge1xuICAgIGNvbmNhdDogU2VtaWdyb3VwU3VtLmNvbmNhdCxcbiAgICBlbXB0eTogMFxufTtcbi8qKlxuICogYG51bWJlcmAgbW9ub2lkIHVuZGVyIG11bHRpcGxpY2F0aW9uLlxuICpcbiAqIFRoZSBgZW1wdHlgIHZhbHVlIGlzIGAxYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgTW9ub2lkUHJvZHVjdCB9IGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE1vbm9pZFByb2R1Y3QuY29uY2F0KDIsIE1vbm9pZFByb2R1Y3QuZW1wdHkpLCAyKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBNb25vaWRQcm9kdWN0ID0ge1xuICAgIGNvbmNhdDogU2VtaWdyb3VwUHJvZHVjdC5jb25jYXQsXG4gICAgZW1wdHk6IDFcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBGaWVsZCA9IHtcbiAgICBhZGQ6IFNlbWlncm91cFN1bS5jb25jYXQsXG4gICAgemVybzogMCxcbiAgICBtdWw6IFNlbWlncm91cFByb2R1Y3QuY29uY2F0LFxuICAgIG9uZTogMSxcbiAgICBzdWI6IE1hZ21hU3ViLmNvbmNhdCxcbiAgICBkZWdyZWU6IGZ1bmN0aW9uIChfKSB7IHJldHVybiAxOyB9LFxuICAgIGRpdjogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0IC8gc2Vjb25kOyB9LFxuICAgIG1vZDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0ICUgc2Vjb25kOyB9XG59O1xuIiwKICAiLyoqXG4gKiBgYGB0c1xuICogaW50ZXJmYWNlIFNlcGFyYXRlZDxFLCBBPiB7XG4gKiAgICByZWFkb25seSBsZWZ0OiBFXG4gKiAgICByZWFkb25seSByaWdodDogQVxuICogfVxuICogYGBgXG4gKlxuICogUmVwcmVzZW50cyBhIHJlc3VsdCBvZiBzZXBhcmF0aW5nIGEgd2hvbGUgaW50byB0d28gcGFydHMuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5pbXBvcnQgeyBwaXBlIH0gZnJvbSAnLi9mdW5jdGlvbic7XG5pbXBvcnQgeyBmbGFwIGFzIGZsYXBfIH0gZnJvbSAnLi9GdW5jdG9yJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc2VwYXJhdGVkID0gZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7IHJldHVybiAoeyBsZWZ0OiBsZWZ0LCByaWdodDogcmlnaHQgfSk7IH07XG52YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfTtcbnZhciBfbWFwTGVmdCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwTGVmdChmKSk7IH07XG52YXIgX2JpbWFwID0gZnVuY3Rpb24gKGZhLCBnLCBmKSB7IHJldHVybiBwaXBlKGZhLCBiaW1hcChnLCBmKSk7IH07XG4vKipcbiAqIGBtYXBgIGNhbiBiZSB1c2VkIHRvIHR1cm4gZnVuY3Rpb25zIGAoYTogQSkgPT4gQmAgaW50byBmdW5jdGlvbnMgYChmYTogRjxBPikgPT4gRjxCPmAgd2hvc2UgYXJndW1lbnQgYW5kIHJldHVybiB0eXBlc1xuICogdXNlIHRoZSB0eXBlIGNvbnN0cnVjdG9yIGBGYCB0byByZXByZXNlbnQgc29tZSBjb21wdXRhdGlvbmFsIGNvbnRleHQuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0KGZhKSwgZihyaWdodChmYSkpKTtcbiAgICB9O1xufTtcbi8qKlxuICogTWFwIGEgZnVuY3Rpb24gb3ZlciB0aGUgZmlyc3QgdHlwZSBhcmd1bWVudCBvZiBhIGJpZnVuY3Rvci5cbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXBMZWZ0ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQoZihsZWZ0KGZhKSksIHJpZ2h0KGZhKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIE1hcCBhIHBhaXIgb2YgZnVuY3Rpb25zIG92ZXIgdGhlIHR3byB0eXBlIGFyZ3VtZW50cyBvZiB0aGUgYmlmdW5jdG9yLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgYmltYXAgPSBmdW5jdGlvbiAoZiwgZykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChmKGxlZnQoZmEpKSwgZyhyaWdodChmYSkpKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdTZXBhcmF0ZWQnO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQmlmdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcExlZnQ6IF9tYXBMZWZ0LFxuICAgIGJpbWFwOiBfYmltYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBsZWZ0ID0gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMubGVmdDsgfTtcbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHJpZ2h0ID0gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMucmlnaHQ7IH07XG4iLAogICJpbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuZXhwb3J0IGZ1bmN0aW9uIHdpbHREZWZhdWx0KFQsIEMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKEYpIHtcbiAgICAgICAgdmFyIHRyYXZlcnNlRiA9IFQudHJhdmVyc2UoRik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAod2EsIGYpIHsgcmV0dXJuIEYubWFwKHRyYXZlcnNlRih3YSwgZiksIEMuc2VwYXJhdGUpOyB9O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gd2l0aGVyRGVmYXVsdChULCBDKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB0cmF2ZXJzZUYgPSBULnRyYXZlcnNlKEYpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHdhLCBmKSB7IHJldHVybiBGLm1hcCh0cmF2ZXJzZUYod2EsIGYpLCBDLmNvbXBhY3QpOyB9O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyRShXKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB3aXRoZXJGID0gVy53aXRoZXIoRik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocHJlZGljYXRlKSB7IHJldHVybiBmdW5jdGlvbiAoZ2EpIHsgcmV0dXJuIHdpdGhlckYoZ2EsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBGLm1hcChwcmVkaWNhdGUoYSksIGZ1bmN0aW9uIChiKSB7IHJldHVybiAoYiA/IF8uc29tZShhKSA6IF8ubm9uZSk7IH0pOyB9KTsgfTsgfTtcbiAgICB9O1xufVxuIiwKICAiZXhwb3J0IGZ1bmN0aW9uIGd1YXJkKEYsIFApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIChiID8gUC5vZih1bmRlZmluZWQpIDogRi56ZXJvKCkpOyB9O1xufVxuIiwKICAidmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuaW1wb3J0IHsgYXBGaXJzdCBhcyBhcEZpcnN0XywgYXBTIGFzIGFwU18sIGFwU2Vjb25kIGFzIGFwU2Vjb25kXyB9IGZyb20gJy4vQXBwbHknO1xuaW1wb3J0IHsgYmluZCBhcyBiaW5kXywgY2hhaW5GaXJzdCBhcyBjaGFpbkZpcnN0XyB9IGZyb20gJy4vQ2hhaW4nO1xuaW1wb3J0IHsgZnJvbUVxdWFscyB9IGZyb20gJy4vRXEnO1xuaW1wb3J0IHsgZnJvbUVpdGhlcksgYXMgZnJvbUVpdGhlcktfIH0gZnJvbSAnLi9Gcm9tRWl0aGVyJztcbmltcG9ydCB7IGR1YWwsIGlkZW50aXR5LCBwaXBlIH0gZnJvbSAnLi9mdW5jdGlvbic7XG5pbXBvcnQgeyBiaW5kVG8gYXMgYmluZFRvXywgZmxhcCBhcyBmbGFwXywgbGV0IGFzIGxldF9fIH0gZnJvbSAnLi9GdW5jdG9yJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnLi9pbnRlcm5hbCc7XG5pbXBvcnQgKiBhcyBOIGZyb20gJy4vbnVtYmVyJztcbmltcG9ydCB7IGZyb21Db21wYXJlIH0gZnJvbSAnLi9PcmQnO1xuaW1wb3J0ICogYXMgUk5FQSBmcm9tICcuL1JlYWRvbmx5Tm9uRW1wdHlBcnJheSc7XG5pbXBvcnQgeyBzZXBhcmF0ZWQgfSBmcm9tICcuL1NlcGFyYXRlZCc7XG5pbXBvcnQgeyBmaWx0ZXJFIGFzIGZpbHRlckVfLCB3aWx0RGVmYXVsdCwgd2l0aGVyRGVmYXVsdCB9IGZyb20gJy4vV2l0aGVyYWJsZSc7XG5pbXBvcnQgeyBndWFyZCBhcyBndWFyZF8gfSBmcm9tICcuL1plcm8nO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gcmVmaW5lbWVudHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVGVzdCB3aGV0aGVyIGEgYFJlYWRvbmx5QXJyYXlgIGlzIGVtcHR5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNFbXB0eShbXSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpc0VtcHR5ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5sZW5ndGggPT09IDA7IH07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIGBSZWFkb25seUFycmF5YCBpcyBub24gZW1wdHkuXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpc05vbkVtcHR5ID0gUk5FQS5pc05vbkVtcHR5O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29uc3RydWN0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFByZXBlbmQgYW4gZWxlbWVudCB0byB0aGUgZnJvbnQgb2YgYSBgUmVhZG9ubHlBcnJheWAsIGNyZWF0aW5nIGEgbmV3IGBSZWFkb25seU5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwcmVwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWzIsIDMsIDRdLCBwcmVwZW5kKDEpKSwgWzEsIDIsIDMsIDRdKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBwcmVwZW5kID0gUk5FQS5wcmVwZW5kO1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgcHJlcGVuZGBdKCNwcmVwZW5kKS5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFcgPSBSTkVBLnByZXBlbmRXO1xuLyoqXG4gKiBBcHBlbmQgYW4gZWxlbWVudCB0byB0aGUgZW5kIG9mIGEgYFJlYWRvbmx5QXJyYXlgLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgYXBwZW5kIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWzEsIDIsIDNdLCBhcHBlbmQoNCkpLCBbMSwgMiwgMywgNF0pXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGFwcGVuZCA9IFJORUEuYXBwZW5kO1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgYXBwZW5kYF0oI2FwcGVuZCkuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFwcGVuZFcgPSBSTkVBLmFwcGVuZFc7XG4vKipcbiAqIFJldHVybiBhIGBSZWFkb25seUFycmF5YCBvZiBsZW5ndGggYG5gIHdpdGggZWxlbWVudCBgaWAgaW5pdGlhbGl6ZWQgd2l0aCBgZihpKWAuXG4gKlxuICogKipOb3RlKiouIGBuYCBpcyBub3JtYWxpemVkIHRvIGEgbm9uIG5lZ2F0aXZlIGludGVnZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1ha2VCeSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogY29uc3QgZG91YmxlID0gKG46IG51bWJlcik6IG51bWJlciA9PiBuICogMlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtYWtlQnkoNSwgZG91YmxlKSwgWzAsIDIsIDQsIDYsIDhdKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1ha2VCeSA9IGZ1bmN0aW9uIChuLCBmKSB7IHJldHVybiAobiA8PSAwID8gZW1wdHkgOiBSTkVBLm1ha2VCeShmKShuKSk7IH07XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seUFycmF5YCBjb250YWluaW5nIGEgdmFsdWUgcmVwZWF0ZWQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMuXG4gKlxuICogKipOb3RlKiouIGBuYCBpcyBub3JtYWxpemVkIHRvIGEgbm9uIG5lZ2F0aXZlIGludGVnZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJlcGxpY2F0ZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXBsaWNhdGUoMywgJ2EnKSwgWydhJywgJ2EnLCAnYSddKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJlcGxpY2F0ZSA9IGZ1bmN0aW9uIChuLCBhKSB7IHJldHVybiBtYWtlQnkobiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfSk7IH07XG5leHBvcnQgZnVuY3Rpb24gZnJvbVByZWRpY2F0ZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChwcmVkaWNhdGUoYSkgPyBbYV0gOiBlbXB0eSk7IH07XG59XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb252ZXJzaW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tT3B0aW9uID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAoXy5pc05vbmUobWEpID8gZW1wdHkgOiBbbWEudmFsdWVdKTsgfTtcbi8qKlxuICogVHJhbnNmb3JtcyBhbiBgRWl0aGVyYCB0byBhIGBSZWFkb25seUFycmF5YC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRWl0aGVyID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIChfLmlzTGVmdChlKSA/IGVtcHR5IDogW2UucmlnaHRdKTsgfTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaFcgPSBmdW5jdGlvbiAob25FbXB0eSwgb25Ob25FbXB0eSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gb25Ob25FbXB0eShhcykgOiBvbkVtcHR5KCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2ggPSBtYXRjaFc7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaExlZnRgXSgjbWF0Y2hsZWZ0KS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdFcgPSBmdW5jdGlvbiAob25FbXB0eSwgb25Ob25FbXB0eSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gb25Ob25FbXB0eShSTkVBLmhlYWQoYXMpLCBSTkVBLnRhaWwoYXMpKSA6IG9uRW1wdHkoKTtcbiAgICB9O1xufTtcbi8qKlxuICogQnJlYWsgYSBgUmVhZG9ubHlBcnJheWAgaW50byBpdHMgZmlyc3QgZWxlbWVudCBhbmQgcmVtYWluaW5nIGVsZW1lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYXRjaExlZnQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGNvbnN0IGxlbjogPEE+KGFzOiBSZWFkb25seUFycmF5PEE+KSA9PiBudW1iZXIgPSBtYXRjaExlZnQoKCkgPT4gMCwgKF8sIHRhaWwpID0+IDEgKyBsZW4odGFpbCkpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwobGVuKFsxLCAyLCAzXSksIDMpXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaExlZnQgPSBtYXRjaExlZnRXO1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoTGVmdGBdKCNtYXRjaGxlZnQpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkTGVmdCA9IG1hdGNoTGVmdDtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYG1hdGNoUmlnaHRgXSgjbWF0Y2hyaWdodCkuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaFJpZ2h0VyA9IGZ1bmN0aW9uIChvbkVtcHR5LCBvbk5vbkVtcHR5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gaXNOb25FbXB0eShhcykgPyBvbk5vbkVtcHR5KFJORUEuaW5pdChhcyksIFJORUEubGFzdChhcykpIDogb25FbXB0eSgpO1xuICAgIH07XG59O1xuLyoqXG4gKiBCcmVhayBhIGBSZWFkb25seUFycmF5YCBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodCA9IG1hdGNoUmlnaHRXO1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoUmlnaHRgXSgjbWF0Y2hyaWdodCkuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZvbGRSaWdodCA9IG1hdGNoUmlnaHQ7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5XaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgaWYgKGlzRW1wdHkoYXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTYW1lIGFzIGByZWR1Y2VgIGJ1dCBpdCBjYXJyaWVzIG92ZXIgdGhlIGludGVybWVkaWF0ZSBzdGVwcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2NhbkxlZnQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2NhbkxlZnQoMTAsIChiLCBhOiBudW1iZXIpID0+IGIgLSBhKShbMSwgMiwgM10pLCBbMTAsIDksIDcsIDRdKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNjYW5MZWZ0ID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBsZW4gPSBhcy5sZW5ndGg7XG4gICAgICAgIHZhciBvdXQgPSBuZXcgQXJyYXkobGVuICsgMSk7XG4gICAgICAgIG91dFswXSA9IGI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIG91dFtpICsgMV0gPSBmKG91dFtpXSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEZvbGQgYW4gYXJyYXkgZnJvbSB0aGUgcmlnaHQsIGtlZXBpbmcgYWxsIGludGVybWVkaWF0ZSByZXN1bHRzIGluc3RlYWQgb2Ygb25seSB0aGUgZmluYWwgcmVzdWx0XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNjYW5SaWdodCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzY2FuUmlnaHQoMTAsIChhOiBudW1iZXIsIGIpID0+IGIgLSBhKShbMSwgMiwgM10pLCBbNCwgNSwgNywgMTBdKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNjYW5SaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgb3V0ID0gbmV3IEFycmF5KGxlbiArIDEpO1xuICAgICAgICBvdXRbbGVuXSA9IGI7XG4gICAgICAgIGZvciAodmFyIGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgb3V0W2ldID0gZihhc1tpXSwgb3V0W2kgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYSBgUmVhZG9ubHlBcnJheWAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHNpemUgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzLmxlbmd0aDsgfTtcbi8qKlxuICogVGVzdCB3aGV0aGVyIGFuIGFycmF5IGNvbnRhaW5zIGEgcGFydGljdWxhciBpbmRleFxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IFJORUEuaXNPdXRPZkJvdW5kO1xuZXhwb3J0IGZ1bmN0aW9uIGxvb2t1cChpLCBhcykge1xuICAgIHJldHVybiBhcyA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBsb29rdXAoaSwgYXMpOyB9IDogaXNPdXRPZkJvdW5kKGksIGFzKSA/IF8ubm9uZSA6IF8uc29tZShhc1tpXSk7XG59XG4vKipcbiAqIEdldCB0aGUgZmlyc3QgZWxlbWVudCBpbiBhbiBhcnJheSwgb3IgYE5vbmVgIGlmIHRoZSBhcnJheSBpcyBlbXB0eVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBoZWFkIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChoZWFkKFsxLCAyLCAzXSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGhlYWQoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc05vbkVtcHR5KGFzKSA/IF8uc29tZShSTkVBLmhlYWQoYXMpKSA6IF8ubm9uZSk7IH07XG4vKipcbiAqIEdldCB0aGUgbGFzdCBlbGVtZW50IGluIGFuIGFycmF5LCBvciBgTm9uZWAgaWYgdGhlIGFycmF5IGlzIGVtcHR5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGxhc3QgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGxhc3QoWzEsIDIsIDNdKSwgc29tZSgzKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobGFzdChbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbGFzdCA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKFJORUEubGFzdChhcykpIDogXy5ub25lKTsgfTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXksIGNyZWF0aW5nIGEgbmV3IGFycmF5LCBvciBgTm9uZWAgaWYgdGhlIGFycmF5IGlzIGVtcHR5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHRhaWwgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRhaWwoWzEsIDIsIDNdKSwgc29tZShbMiwgM10pKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWlsKFtdKSwgbm9uZSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKFJORUEudGFpbChhcykpIDogXy5ub25lO1xufTtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhbiBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXksIG9yIGBOb25lYCBpZiB0aGUgYXJyYXkgaXMgZW1wdHlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaW5pdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMSwgMiwgM10pLCBzb21lKFsxLCAyXSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGluaXQoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGluaXQgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICByZXR1cm4gaXNOb25FbXB0eShhcykgPyBfLnNvbWUoUk5FQS5pbml0KGFzKSkgOiBfLm5vbmU7XG59O1xuLyoqXG4gKiBLZWVwIG9ubHkgYSBtYXggbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIHN0YXJ0IG9mIGFuIGBSZWFkb25seUFycmF5YCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5QXJyYXlgLlxuICpcbiAqICoqTm90ZSoqLiBgbmAgaXMgbm9ybWFsaXplZCB0byBhIG5vbiBuZWdhdGl2ZSBpbnRlZ2VyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGlucHV0OiBSZWFkb25seUFycmF5PG51bWJlcj4gPSBbMSwgMiwgM11cbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShpbnB1dCwgUkEudGFrZUxlZnQoMikpLCBbMSwgMl0pXG4gKlxuICogLy8gb3V0IG9mIGJvdW5kc1xuICogYXNzZXJ0LnN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLnRha2VMZWZ0KDQpKSwgaW5wdXQpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwocGlwZShpbnB1dCwgUkEudGFrZUxlZnQoLTEpKSwgaW5wdXQpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdGFrZUxlZnQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChuLCBhcykgPyBhcyA6IG4gPT09IDAgPyBlbXB0eSA6IGFzLnNsaWNlKDAsIG4pO1xuICAgIH07XG59O1xuLyoqXG4gKiBLZWVwIG9ubHkgYSBtYXggbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiBhbiBgUmVhZG9ubHlBcnJheWAsIGNyZWF0aW5nIGEgbmV3IGBSZWFkb25seUFycmF5YC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBub24gbmVnYXRpdmUgaW50ZWdlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUkEgZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBpbnB1dDogUmVhZG9ubHlBcnJheTxudW1iZXI+ID0gWzEsIDIsIDNdXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLnRha2VSaWdodCgyKSksIFsyLCAzXSlcbiAqXG4gKiAvLyBvdXQgb2YgYm91bmRzXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwocGlwZShpbnB1dCwgUkEudGFrZVJpZ2h0KDQpKSwgaW5wdXQpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwocGlwZShpbnB1dCwgUkEudGFrZVJpZ2h0KC0xKSksIGlucHV0KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHRha2VSaWdodCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gaXNPdXRPZkJvdW5kKG4sIGFzKSA/IGFzIDogbiA9PT0gMCA/IGVtcHR5IDogYXMuc2xpY2UoLW4pO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHRha2VMZWZ0V2hpbGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgYXNfMSA9IGFzOyBfaSA8IGFzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGFzXzFbX2ldO1xuICAgICAgICAgICAgaWYgKCFwcmVkaWNhdGUoYSkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dC5wdXNoKGEpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsZW4gPSBvdXQubGVuZ3RoO1xuICAgICAgICByZXR1cm4gbGVuID09PSBhcy5sZW5ndGggPyBhcyA6IGxlbiA9PT0gMCA/IGVtcHR5IDogb3V0O1xuICAgIH07XG59XG52YXIgc3BhbkxlZnRJbmRleCA9IGZ1bmN0aW9uIChhcywgcHJlZGljYXRlKSB7XG4gICAgdmFyIGwgPSBhcy5sZW5ndGg7XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmICghcHJlZGljYXRlKGFzW2ldKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHNwYW5MZWZ0KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gc3BsaXRBdChzcGFuTGVmdEluZGV4KGFzLCBwcmVkaWNhdGUpKShhcyksIGluaXQgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICByZXR1cm4geyBpbml0OiBpbml0LCByZXN0OiByZXN0IH07XG4gICAgfTtcbn1cbi8qKlxuICogRHJvcCBhIG1heCBudW1iZXIgb2YgZWxlbWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgYW4gYFJlYWRvbmx5QXJyYXlgLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlBcnJheWAuXG4gKlxuICogKipOb3RlKiouIGBuYCBpcyBub3JtYWxpemVkIHRvIGEgbm9uIG5lZ2F0aXZlIGludGVnZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgaW5wdXQ6IFJlYWRvbmx5QXJyYXk8bnVtYmVyPiA9IFsxLCAyLCAzXVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKGlucHV0LCBSQS5kcm9wTGVmdCgyKSksIFszXSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChwaXBlKGlucHV0LCBSQS5kcm9wTGVmdCgwKSksIGlucHV0KVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLmRyb3BMZWZ0KC0xKSksIGlucHV0KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGRyb3BMZWZ0ID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBuIDw9IDAgfHwgaXNFbXB0eShhcykgPyBhcyA6IG4gPj0gYXMubGVuZ3RoID8gZW1wdHkgOiBhcy5zbGljZShuLCBhcy5sZW5ndGgpO1xuICAgIH07XG59O1xuLyoqXG4gKiBEcm9wIGEgbWF4IG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgYW4gYFJlYWRvbmx5QXJyYXlgLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlBcnJheWAuXG4gKlxuICogKipOb3RlKiouIGBuYCBpcyBub3JtYWxpemVkIHRvIGEgbm9uIG5lZ2F0aXZlIGludGVnZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgaW5wdXQ6IFJlYWRvbmx5QXJyYXk8bnVtYmVyPiA9IFsxLCAyLCAzXVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKGlucHV0LCBSQS5kcm9wUmlnaHQoMikpLCBbMV0pXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwocGlwZShpbnB1dCwgUkEuZHJvcFJpZ2h0KDApKSwgaW5wdXQpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwocGlwZShpbnB1dCwgUkEuZHJvcFJpZ2h0KC0xKSksIGlucHV0KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGRyb3BSaWdodCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gbiA8PSAwIHx8IGlzRW1wdHkoYXMpID8gYXMgOiBuID49IGFzLmxlbmd0aCA/IGVtcHR5IDogYXMuc2xpY2UoMCwgYXMubGVuZ3RoIC0gbik7XG4gICAgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gZHJvcExlZnRXaGlsZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBpID0gc3BhbkxlZnRJbmRleChhcywgcHJlZGljYXRlKTtcbiAgICAgICAgcmV0dXJuIGkgPT09IDAgPyBhcyA6IGkgPT09IGFzLmxlbmd0aCA/IGVtcHR5IDogYXMuc2xpY2UoaSk7XG4gICAgfTtcbn1cbi8qKlxuICogRmluZCB0aGUgZmlyc3QgaW5kZXggZm9yIHdoaWNoIGEgcHJlZGljYXRlIGhvbGRzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZpbmRJbmRleCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmluZEluZGV4KChuOiBudW1iZXIpID0+IG4gPT09IDIpKFsxLCAyLCAzXSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRJbmRleCgobjogbnVtYmVyKSA9PiBuID09PSAyKShbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmluZEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShhc1tpXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5zb21lKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gZmluZEZpcnN0KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShhc1tpXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5zb21lKGFzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgIH07XG59XG4vKipcbiAqIEZpbmQgdGhlIGZpcnN0IGVsZW1lbnQgcmV0dXJuZWQgYnkgYW4gb3B0aW9uIGJhc2VkIHNlbGVjdG9yIGZ1bmN0aW9uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZpbmRGaXJzdE1hcCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICByZWFkb25seSBuYW1lOiBzdHJpbmdcbiAqICAgcmVhZG9ubHkgYWdlPzogbnVtYmVyXG4gKiB9XG4gKlxuICogY29uc3QgcGVyc29uczogUmVhZG9ubHlBcnJheTxQZXJzb24+ID0gW3sgbmFtZTogJ0pvaG4nIH0sIHsgbmFtZTogJ01hcnknLCBhZ2U6IDQ1IH0sIHsgbmFtZTogJ0pvZXknLCBhZ2U6IDI4IH1dXG4gKlxuICogLy8gcmV0dXJucyB0aGUgbmFtZSBvZiB0aGUgZmlyc3QgcGVyc29uIHRoYXQgaGFzIGFuIGFnZVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kRmlyc3RNYXAoKHA6IFBlcnNvbikgPT4gKHAuYWdlID09PSB1bmRlZmluZWQgPyBub25lIDogc29tZShwLm5hbWUpKSkocGVyc29ucyksIHNvbWUoJ01hcnknKSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmaW5kRmlyc3RNYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG91dCA9IGYoYXNbaV0pO1xuICAgICAgICAgICAgaWYgKF8uaXNTb21lKG91dCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gZmluZExhc3QocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICBmb3IgKHZhciBpID0gYXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUoYXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uc29tZShhc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF8ubm9uZTtcbiAgICB9O1xufVxuLyoqXG4gKiBGaW5kIHRoZSBsYXN0IGVsZW1lbnQgcmV0dXJuZWQgYnkgYW4gb3B0aW9uIGJhc2VkIHNlbGVjdG9yIGZ1bmN0aW9uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZpbmRMYXN0TWFwIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogaW50ZXJmYWNlIFBlcnNvbiB7XG4gKiAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZ1xuICogICByZWFkb25seSBhZ2U/OiBudW1iZXJcbiAqIH1cbiAqXG4gKiBjb25zdCBwZXJzb25zOiBSZWFkb25seUFycmF5PFBlcnNvbj4gPSBbeyBuYW1lOiAnSm9obicgfSwgeyBuYW1lOiAnTWFyeScsIGFnZTogNDUgfSwgeyBuYW1lOiAnSm9leScsIGFnZTogMjggfV1cbiAqXG4gKiAvLyByZXR1cm5zIHRoZSBuYW1lIG9mIHRoZSBsYXN0IHBlcnNvbiB0aGF0IGhhcyBhbiBhZ2VcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmluZExhc3RNYXAoKHA6IFBlcnNvbikgPT4gKHAuYWdlID09PSB1bmRlZmluZWQgPyBub25lIDogc29tZShwLm5hbWUpKSkocGVyc29ucyksIHNvbWUoJ0pvZXknKSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmaW5kTGFzdE1hcCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICBmb3IgKHZhciBpID0gYXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciBvdXQgPSBmKGFzW2ldKTtcbiAgICAgICAgICAgIGlmIChfLmlzU29tZShvdXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgIH07XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBsaXN0IHdoaWNoIG1hdGNoZXMgdGhlIHByZWRpY2F0ZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaW5kTGFzdEluZGV4IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogaW50ZXJmYWNlIFgge1xuICogICByZWFkb25seSBhOiBudW1iZXJcbiAqICAgcmVhZG9ubHkgYjogbnVtYmVyXG4gKiB9XG4gKiBjb25zdCB4czogUmVhZG9ubHlBcnJheTxYPiA9IFt7IGE6IDEsIGI6IDAgfSwgeyBhOiAxLCBiOiAxIH1dXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRMYXN0SW5kZXgoKHg6IHsgcmVhZG9ubHkgYTogbnVtYmVyIH0pID0+IHguYSA9PT0gMSkoeHMpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kTGFzdEluZGV4KCh4OiB7IHJlYWRvbmx5IGE6IG51bWJlciB9KSA9PiB4LmEgPT09IDQpKHhzKSwgbm9uZSlcbiAqXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmluZExhc3RJbmRleCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSBhcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShhc1tpXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5zb21lKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgfTtcbn07XG4vKipcbiAqIEluc2VydCBhbiBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXgsIGNyZWF0aW5nIGEgbmV3IGFycmF5LCBvciByZXR1cm5pbmcgYE5vbmVgIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluc2VydEF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnNlcnRBdCgyLCA1KShbMSwgMiwgMywgNF0pLCBzb21lKFsxLCAyLCA1LCAzLCA0XSkpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaSwgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGkgPCAwIHx8IGkgPiBhcy5sZW5ndGggPyBfLm5vbmUgOiBfLnNvbWUoUk5FQS51bnNhZmVJbnNlcnRBdChpLCBhLCBhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBDaGFuZ2UgdGhlIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleCwgY3JlYXRpbmcgYSBuZXcgYXJyYXksIG9yIHJldHVybmluZyBgTm9uZWAgaWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHNcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdXBkYXRlQXQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwZGF0ZUF0KDEsIDEpKFsxLCAyLCAzXSksIHNvbWUoWzEsIDEsIDNdKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBkYXRlQXQoMSwgMSkoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUF0ID0gZnVuY3Rpb24gKGksIGEpIHtcbiAgICByZXR1cm4gbW9kaWZ5QXQoaSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfSk7XG59O1xuLyoqXG4gKiBEZWxldGUgdGhlIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleCwgY3JlYXRpbmcgYSBuZXcgYXJyYXksIG9yIHJldHVybmluZyBgTm9uZWAgaWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHNcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZGVsZXRlQXQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRlbGV0ZUF0KDApKFsxLCAyLCAzXSksIHNvbWUoWzIsIDNdKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZGVsZXRlQXQoMSkoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGRlbGV0ZUF0ID0gZnVuY3Rpb24gKGkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpc091dE9mQm91bmQoaSwgYXMpID8gXy5ub25lIDogXy5zb21lKHVuc2FmZURlbGV0ZUF0KGksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEFwcGx5IGEgZnVuY3Rpb24gdG8gdGhlIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleCwgY3JlYXRpbmcgYSBuZXcgYXJyYXksIG9yIHJldHVybmluZyBgTm9uZWAgaWYgdGhlIGluZGV4IGlzIG91dFxuICogb2YgYm91bmRzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1vZGlmeUF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgZG91YmxlID0gKHg6IG51bWJlcik6IG51bWJlciA9PiB4ICogMlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtb2RpZnlBdCgxLCBkb3VibGUpKFsxLCAyLCAzXSksIHNvbWUoWzEsIDQsIDNdKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobW9kaWZ5QXQoMSwgZG91YmxlKShbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFJldmVyc2UgYW4gYXJyYXksIGNyZWF0aW5nIGEgbmV3IGFycmF5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJldmVyc2UgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmV2ZXJzZShbMSwgMiwgM10pLCBbMywgMiwgMV0pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmV2ZXJzZSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGFzLmxlbmd0aCA8PSAxID8gYXMgOiBhcy5zbGljZSgpLnJldmVyc2UoKSk7IH07XG4vKipcbiAqIEV4dHJhY3RzIGZyb20gYW4gYXJyYXkgb2YgYEVpdGhlcmAgYWxsIHRoZSBgUmlnaHRgIGVsZW1lbnRzLiBBbGwgdGhlIGBSaWdodGAgZWxlbWVudHMgYXJlIGV4dHJhY3RlZCBpbiBvcmRlclxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByaWdodHMgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcmlnaHQsIGxlZnQgfSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyaWdodHMoW3JpZ2h0KDEpLCBsZWZ0KCdmb28nKSwgcmlnaHQoMildKSwgWzEsIDJdKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJpZ2h0cyA9IGZ1bmN0aW9uIChhcykge1xuICAgIHZhciByID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICBpZiAoYS5fdGFnID09PSAnUmlnaHQnKSB7XG4gICAgICAgICAgICByLnB1c2goYS5yaWdodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHI7XG59O1xuLyoqXG4gKiBFeHRyYWN0cyBmcm9tIGFuIGFycmF5IG9mIGBFaXRoZXJgIGFsbCB0aGUgYExlZnRgIGVsZW1lbnRzLiBBbGwgdGhlIGBMZWZ0YCBlbGVtZW50cyBhcmUgZXh0cmFjdGVkIGluIG9yZGVyXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGxlZnRzIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IGxlZnQsIHJpZ2h0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobGVmdHMoW3JpZ2h0KDEpLCBsZWZ0KCdmb28nKSwgcmlnaHQoMildKSwgWydmb28nXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBsZWZ0cyA9IGZ1bmN0aW9uIChhcykge1xuICAgIHZhciByID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICBpZiAoYS5fdGFnID09PSAnTGVmdCcpIHtcbiAgICAgICAgICAgIHIucHVzaChhLmxlZnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByO1xufTtcbi8qKlxuICogU29ydCB0aGUgZWxlbWVudHMgb2YgYW4gYXJyYXkgaW4gaW5jcmVhc2luZyBvcmRlciwgY3JlYXRpbmcgYSBuZXcgYXJyYXlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29ydCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvcnQoTi5PcmQpKFszLCAyLCAxXSksIFsxLCAyLCAzXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPD0gMSA/IGFzIDogYXMuc2xpY2UoKS5zb3J0KE8uY29tcGFyZSk7XG4gICAgfTtcbn07XG4vLyBUT0RPOiBjdXJyeSBhbmQgbWFrZSBkYXRhLWxhc3QgaW4gdjNcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byBwYWlycyBvZiBlbGVtZW50cyBhdCB0aGUgc2FtZSBpbmRleCBpbiB0d28gYXJyYXlzLCBjb2xsZWN0aW5nIHRoZSByZXN1bHRzIGluIGEgbmV3IGFycmF5LiBJZiBvbmVcbiAqIGlucHV0IGFycmF5IGlzIHNob3J0LCBleGNlc3MgZWxlbWVudHMgb2YgdGhlIGxvbmdlciBhcnJheSBhcmUgZGlzY2FyZGVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB6aXBXaXRoIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHppcFdpdGgoWzEsIDIsIDNdLCBbJ2EnLCAnYicsICdjJywgJ2QnXSwgKG4sIHMpID0+IHMgKyBuKSwgWydhMScsICdiMicsICdjMyddKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoZmEsIGZiLCBmKSB7XG4gICAgdmFyIGZjID0gW107XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGZhLmxlbmd0aCwgZmIubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGZjW2ldID0gZihmYVtpXSwgZmJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZmM7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogVGhlIGZ1bmN0aW9uIGlzIHJldmVyc2Ugb2YgYHppcGAuIFRha2VzIGFuIGFycmF5IG9mIHBhaXJzIGFuZCByZXR1cm4gdHdvIGNvcnJlc3BvbmRpbmcgYXJyYXlzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuemlwIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuemlwKFtbMSwgJ2EnXSwgWzIsICdiJ10sIFszLCAnYyddXSksIFtbMSwgMiwgM10sIFsnYScsICdiJywgJ2MnXV0pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICB2YXIgZmEgPSBbXTtcbiAgICB2YXIgZmIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZhW2ldID0gYXNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYXNbaV1bMV07XG4gICAgfVxuICAgIHJldHVybiBbZmEsIGZiXTtcbn07XG4vKipcbiAqIFByZXBlbmQgYW4gZWxlbWVudCB0byBldmVyeSBtZW1iZXIgb2YgYW4gYXJyYXlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcHJlcGVuZEFsbCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwcmVwZW5kQWxsKDkpKFsxLCAyLCAzLCA0XSksIFs5LCAxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZEFsbCA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICB2YXIgZiA9IFJORUEucHJlcGVuZEFsbChtaWRkbGUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc05vbkVtcHR5KGFzKSA/IGYoYXMpIDogYXMpOyB9O1xufTtcbi8qKlxuICogUGxhY2VzIGFuIGVsZW1lbnQgaW4gYmV0d2VlbiBtZW1iZXJzIG9mIGFuIGFycmF5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGludGVyc3BlcnNlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc3BlcnNlKDkpKFsxLCAyLCAzLCA0XSksIFsxLCA5LCAyLCA5LCAzLCA5LCA0XSlcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNwZXJzZSA9IGZ1bmN0aW9uIChtaWRkbGUpIHtcbiAgICB2YXIgZiA9IFJORUEuaW50ZXJzcGVyc2UobWlkZGxlKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IGFzKTsgfTtcbn07XG4vKipcbiAqIFJvdGF0ZSBhIGBSZWFkb25seUFycmF5YCBieSBgbmAgc3RlcHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJvdGF0ZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyb3RhdGUoMikoWzEsIDIsIDMsIDQsIDVdKSwgWzQsIDUsIDEsIDIsIDNdKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgdmFyIGYgPSBSTkVBLnJvdGF0ZShuKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IGFzKTsgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gZWxlbShFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBhcykge1xuICAgICAgICBpZiAoYXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGVsZW1FXzEgPSBlbGVtKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZWxlbUVfMShhLCBhcyk7IH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZWRpY2F0ZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiBFLmVxdWFscyhlbGVtZW50LCBhKTsgfTtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICBmb3IgKDsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKGFzW2ldKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufVxuLyoqXG4gKiBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGFuIGFycmF5LCBrZWVwaW5nIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuaXEgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmlxKE4uRXEpKFsxLCAyLCAxXSksIFsxLCAyXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1bmlxID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgZiA9IFJORUEudW5pcShFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IGFzKTsgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGFuIGFycmF5IGluIGluY3JlYXNpbmcgb3JkZXIsIHdoZXJlIGVsZW1lbnRzIGFyZSBjb21wYXJlZCB1c2luZyBmaXJzdCBgb3Jkc1swXWAsIHRoZW4gYG9yZHNbMV1gLFxuICogZXRjLi4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBjb250cmFtYXAgfSBmcm9tICdmcC10cy9PcmQnXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICByZWFkb25seSBuYW1lOiBzdHJpbmdcbiAqICAgcmVhZG9ubHkgYWdlOiBudW1iZXJcbiAqIH1cbiAqIGNvbnN0IGJ5TmFtZSA9IHBpcGUoUy5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLm5hbWUpKVxuICogY29uc3QgYnlBZ2UgPSBwaXBlKE4uT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5hZ2UpKVxuICpcbiAqIGNvbnN0IHNvcnRCeU5hbWVCeUFnZSA9IHNvcnRCeShbYnlOYW1lLCBieUFnZV0pXG4gKlxuICogY29uc3QgcGVyc29ucyA9IFt7IG5hbWU6ICdhJywgYWdlOiAxIH0sIHsgbmFtZTogJ2InLCBhZ2U6IDMgfSwgeyBuYW1lOiAnYycsIGFnZTogMiB9LCB7IG5hbWU6ICdiJywgYWdlOiAyIH1dXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvcnRCeU5hbWVCeUFnZShwZXJzb25zKSwgW1xuICogICB7IG5hbWU6ICdhJywgYWdlOiAxIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDIgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMyB9LFxuICogICB7IG5hbWU6ICdjJywgYWdlOiAyIH1cbiAqIF0pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydEJ5ID0gZnVuY3Rpb24gKG9yZHMpIHtcbiAgICB2YXIgZiA9IFJORUEuc29ydEJ5KG9yZHMpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc05vbkVtcHR5KGFzKSA/IGYoYXMpIDogYXMpOyB9O1xufTtcbi8qKlxuICogQSB1c2VmdWwgcmVjdXJzaW9uIHBhdHRlcm4gZm9yIHByb2Nlc3NpbmcgYSBgUmVhZG9ubHlBcnJheWAgdG8gcHJvZHVjZSBhIG5ldyBgUmVhZG9ubHlBcnJheWAsIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGBSZWFkb25seUFycmF5YC4gVHlwaWNhbGx5IGBjaG9wYCBpcyBjYWxsZWQgd2l0aCBzb21lIGZ1bmN0aW9uIHRoYXQgd2lsbCBjb25zdW1lIGFuIGluaXRpYWwgcHJlZml4IG9mIHRoZSBgUmVhZG9ubHlBcnJheWAgYW5kIHByb2R1Y2UgYVxuICogdmFsdWUgYW5kIHRoZSB0YWlsIG9mIHRoZSBgUmVhZG9ubHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IEVxIH0gZnJvbSAnZnAtdHMvRXEnXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgZ3JvdXAgPSA8QT4oUzogRXE8QT4pOiAoKGFzOiBSZWFkb25seUFycmF5PEE+KSA9PiBSZWFkb25seUFycmF5PFJlYWRvbmx5QXJyYXk8QT4+KSA9PiB7XG4gKiAgIHJldHVybiBSQS5jaG9wKGFzID0+IHtcbiAqICAgICBjb25zdCB7IGluaXQsIHJlc3QgfSA9IHBpcGUoYXMsIFJBLnNwYW5MZWZ0KChhOiBBKSA9PiBTLmVxdWFscyhhLCBhc1swXSkpKVxuICogICAgIHJldHVybiBbaW5pdCwgcmVzdF1cbiAqICAgfSlcbiAqIH1cbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ3JvdXAoTi5FcSkoWzEsIDEsIDIsIDMsIDMsIDRdKSwgW1sxLCAxXSwgWzJdLCBbMywgM10sIFs0XV0pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hvcCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgdmFyIGcgPSBSTkVBLmNob3AoZik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gZyhhcykgOiBlbXB0eSk7IH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlBcnJheWAgaW50byB0d28gcGllY2VzLCB0aGUgZmlyc3QgcGllY2UgaGFzIG1heCBgbmAgZWxlbWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNwbGl0QXQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc3BsaXRBdCgyKShbMSwgMiwgMywgNCwgNV0pLCBbWzEsIDJdLCBbMywgNCwgNV1dKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNwbGl0QXQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIG4gPj0gMSAmJiBpc05vbkVtcHR5KGFzKSA/IFJORUEuc3BsaXRBdChuKShhcykgOiBpc0VtcHR5KGFzKSA/IFthcywgZW1wdHldIDogW2VtcHR5LCBhc107XG4gICAgfTtcbn07XG4vKipcbiAqIFNwbGl0cyBhIGBSZWFkb25seUFycmF5YCBpbnRvIGxlbmd0aC1gbmAgcGllY2VzLiBUaGUgbGFzdCBwaWVjZSB3aWxsIGJlIHNob3J0ZXIgaWYgYG5gIGRvZXMgbm90IGV2ZW5seSBkaXZpZGUgdGhlIGxlbmd0aCBvZlxuICogdGhlIGBSZWFkb25seUFycmF5YC4gTm90ZSB0aGF0IGBjaHVua3NPZihuKShbXSlgIGlzIGBbXWAsIG5vdCBgW1tdXWAuIFRoaXMgaXMgaW50ZW50aW9uYWwsIGFuZCBpcyBjb25zaXN0ZW50IHdpdGggYSByZWN1cnNpdmVcbiAqIGRlZmluaXRpb24gb2YgYGNodW5rc09mYDsgaXQgc2F0aXNmaWVzIHRoZSBwcm9wZXJ0eSB0aGF0OlxuICpcbiAqIGBgYHRzXG4gKiBjaHVua3NPZihuKSh4cykuY29uY2F0KGNodW5rc09mKG4pKHlzKSkgPT0gY2h1bmtzT2YobikoeHMuY29uY2F0KHlzKSkpXG4gKiBgYGBcbiAqXG4gKiB3aGVuZXZlciBgbmAgZXZlbmx5IGRpdmlkZXMgdGhlIGxlbmd0aCBvZiBgYXNgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBjaHVua3NPZiB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjaHVua3NPZigyKShbMSwgMiwgMywgNCwgNV0pLCBbWzEsIDJdLCBbMywgNF0sIFs1XV0pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2h1bmtzT2YgPSBmdW5jdGlvbiAobikge1xuICAgIHZhciBmID0gUk5FQS5jaHVua3NPZihuKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IGVtcHR5KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbU9wdGlvbksgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyb21PcHRpb24oZi5hcHBseSh2b2lkIDAsIGEpKTtcbiAgICB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBjb21wcmVoZW5zaW9uKGlucHV0LCBmLCBnKSB7XG4gICAgaWYgKGcgPT09IHZvaWQgMCkgeyBnID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfTsgfVxuICAgIHZhciBnbyA9IGZ1bmN0aW9uIChzY29wZSwgaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkoaW5wdXQpXG4gICAgICAgICAgICA/IGZsYXRNYXAoUk5FQS5oZWFkKGlucHV0KSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGdvKHBpcGUoc2NvcGUsIGFwcGVuZChhKSksIFJORUEudGFpbChpbnB1dCkpOyB9KVxuICAgICAgICAgICAgOiBnLmFwcGx5KHZvaWQgMCwgc2NvcGUpID8gW2YuYXBwbHkodm9pZCAwLCBzY29wZSldXG4gICAgICAgICAgICAgICAgOiBlbXB0eTtcbiAgICB9O1xuICAgIHJldHVybiBnbyhlbXB0eSwgaW5wdXQpO1xufVxuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgY29uY2F0VyA9IGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgIHJldHVybiBpc0VtcHR5KGZpcnN0KSA/IHNlY29uZCA6IGlzRW1wdHkoc2Vjb25kKSA/IGZpcnN0IDogZmlyc3QuY29uY2F0KHNlY29uZCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXQgPSBjb25jYXRXO1xuZXhwb3J0IGZ1bmN0aW9uIHVuaW9uKEUpIHtcbiAgICB2YXIgdW5pb25FID0gUk5FQS51bmlvbihFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgaWYgKHNlY29uZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgdW5pb25FXzEgPSB1bmlvbihFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7IHJldHVybiB1bmlvbkVfMShzZWNvbmQsIGZpcnN0KTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNOb25FbXB0eShmaXJzdCkgJiYgaXNOb25FbXB0eShzZWNvbmQpID8gdW5pb25FKHNlY29uZCkoZmlyc3QpIDogaXNOb25FbXB0eShmaXJzdCkgPyBmaXJzdCA6IHNlY29uZDtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdGlvbihFKSB7XG4gICAgdmFyIGVsZW1FID0gZWxlbShFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHhzLCB5cykge1xuICAgICAgICBpZiAoeXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbkVfMSA9IGludGVyc2VjdGlvbihFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoeXMpIHsgcmV0dXJuIGludGVyc2VjdGlvbkVfMSh5cywgeHMpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4cy5maWx0ZXIoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGVsZW1FKGEsIHlzKTsgfSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkaWZmZXJlbmNlKEUpIHtcbiAgICB2YXIgZWxlbUUgPSBlbGVtKEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoeHMsIHlzKSB7XG4gICAgICAgIGlmICh5cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZGlmZmVyZW5jZUVfMSA9IGRpZmZlcmVuY2UoRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHlzKSB7IHJldHVybiBkaWZmZXJlbmNlRV8xKHlzLCB4cyk7IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHhzLmZpbHRlcihmdW5jdGlvbiAoYSkgeyByZXR1cm4gIWVsZW1FKGEsIHlzKTsgfSk7XG4gICAgfTtcbn1cbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xudmFyIF9tYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIG1hcFdpdGhJbmRleChmKSk7IH07XG52YXIgX2FwID0gZnVuY3Rpb24gKGZhYiwgZmEpIHsgcmV0dXJuIHBpcGUoZmFiLCBhcChmYSkpOyB9O1xudmFyIF9maWx0ZXIgPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwaXBlKGZhLCBmaWx0ZXIocHJlZGljYXRlKSk7XG59O1xudmFyIF9maWx0ZXJNYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlck1hcChmKSk7IH07XG52YXIgX3BhcnRpdGlvbiA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbihwcmVkaWNhdGUpKTtcbn07XG52YXIgX3BhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwKGYpKTsgfTtcbnZhciBfcGFydGl0aW9uV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGVXaXRoSW5kZXgpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpKTsgfTtcbnZhciBfcGFydGl0aW9uTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hbHQgPSBmdW5jdGlvbiAoZmEsIHRoYXQpIHsgcmV0dXJuIHBpcGUoZmEsIGFsdCh0aGF0KSk7IH07XG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbnZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBNID0gZm9sZE1hcChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwTShmKSk7IH07XG59O1xudmFyIF9yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHQoYiwgZikpOyB9O1xudmFyIF9yZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlV2l0aEluZGV4KGIsIGYpKTtcbn07XG52YXIgX2ZvbGRNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TSA9IGZvbGRNYXBXaXRoSW5kZXgoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcFdpdGhJbmRleE0oZikpOyB9O1xufTtcbnZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZikpO1xufTtcbnZhciBfZmlsdGVyTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9maWx0ZXJXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZVdpdGhJbmRleCkgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkpOyB9O1xudmFyIF9leHRlbmQgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGV4dGVuZChmKSk7IH07XG52YXIgX3RyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VGKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4RiA9IHRyYXZlcnNlV2l0aEluZGV4KEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlV2l0aEluZGV4RihmKSk7IH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBfY2hhaW5SZWNEZXB0aEZpcnN0ID0gZnVuY3Rpb24gKGEsIGYpIHsgcmV0dXJuIHBpcGUoYSwgY2hhaW5SZWNEZXB0aEZpcnN0KGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX2NoYWluUmVjQnJlYWR0aEZpcnN0ID0gZnVuY3Rpb24gKGEsIGYpIHsgcmV0dXJuIHBpcGUoYSwgY2hhaW5SZWNCcmVhZHRoRmlyc3QoZikpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBvZiA9IFJORUEub2Y7XG4vKipcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIHplcm8gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBlbXB0eTsgfTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFsdGBdKCNhbHQpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiBmYS5jb25jYXQodGhhdCgpKTtcbiAgICB9O1xufTtcbi8qKlxuICogSWRlbnRpZmllcyBhbiBhc3NvY2lhdGl2ZSBvcGVyYXRpb24gb24gYSB0eXBlIGNvbnN0cnVjdG9yLiBJdCBpcyBzaW1pbGFyIHRvIGBTZW1pZ3JvdXBgLCBleGNlcHQgdGhhdCBpdCBhcHBsaWVzIHRvXG4gKiB0eXBlcyBvZiBraW5kIGAqIC0+ICpgLlxuICpcbiAqIEluIGNhc2Ugb2YgYFJlYWRvbmx5QXJyYXlgIGNvbmNhdGVuYXRlcyB0aGUgaW5wdXRzIGludG8gYSBzaW5nbGUgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuYWx0KCgpID0+IFs0LCA1XSlcbiAqICAgKSxcbiAqICAgWzEsIDIsIDMsIDQsIDVdXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhbHQgPSBhbHRXO1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcCA9IGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBmbGF0TWFwKGZ1bmN0aW9uIChmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9KTtcbn07XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIFJBLmZsYXRNYXAoKG4pID0+IFtgYSR7bn1gLCBgYiR7bn1gXSlcbiAqICAgKSxcbiAqICAgWydhMScsICdiMScsICdhMicsICdiMicsICdhMycsICdiMyddXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSQS5mbGF0TWFwKCgpID0+IFtdKVxuICogICApLFxuICogICBbXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IC8qI19fUFVSRV9fKi8gZmxhdE1hcChpZGVudGl0eSk7XG4vKipcbiAqIGBtYXBgIGNhbiBiZSB1c2VkIHRvIHR1cm4gZnVuY3Rpb25zIGAoYTogQSkgPT4gQmAgaW50byBmdW5jdGlvbnMgYChmYTogRjxBPikgPT4gRjxCPmAgd2hvc2UgYXJndW1lbnQgYW5kIHJldHVybiB0eXBlc1xuICogdXNlIHRoZSB0eXBlIGNvbnN0cnVjdG9yIGBGYCB0byByZXByZXNlbnQgc29tZSBjb21wdXRhdGlvbmFsIGNvbnRleHQuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gZmEubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGZhLm1hcChmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gZihpLCBhKTsgfSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzZXBhcmF0ZSA9IGZ1bmN0aW9uIChmYSkge1xuICAgIHZhciBsZWZ0ID0gW107XG4gICAgdmFyIHJpZ2h0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwLCBmYV8xID0gZmE7IF9pIDwgZmFfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGUgPSBmYV8xW19pXTtcbiAgICAgICAgaWYgKGUuX3RhZyA9PT0gJ0xlZnQnKSB7XG4gICAgICAgICAgICBsZWZ0LnB1c2goZS5sZWZ0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJpZ2h0LnB1c2goZS5yaWdodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0LCByaWdodCk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXIgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMuZmlsdGVyKHByZWRpY2F0ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlck1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25CID0gZihpLCBmYVtpXSk7XG4gICAgICAgICAgICBpZiAoXy5pc1NvbWUob3B0aW9uQikpIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChvcHRpb25CLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJNYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmaWx0ZXJNYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY29tcGFjdCA9IC8qI19fUFVSRV9fKi8gZmlsdGVyTWFwKGlkZW50aXR5KTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwYXJ0aXRpb25XaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIHByZWRpY2F0ZShhKTsgfSk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25XaXRoSW5kZXggPSBmdW5jdGlvbiAocHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVmdCA9IFtdO1xuICAgICAgICB2YXIgcmlnaHQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc1tpXTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGVXaXRoSW5kZXgoaSwgYSkpIHtcbiAgICAgICAgICAgICAgICByaWdodC5wdXNoKGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGVmdC5wdXNoKGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBsZWZ0ID0gW107XG4gICAgICAgIHZhciByaWdodCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZSA9IGYoaSwgZmFbaV0pO1xuICAgICAgICAgICAgaWYgKGUuX3RhZyA9PT0gJ0xlZnQnKSB7XG4gICAgICAgICAgICAgICAgbGVmdC5wdXNoKGUubGVmdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByaWdodC5wdXNoKGUucmlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJXaXRoSW5kZXggPSBmdW5jdGlvbiAocHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMuZmlsdGVyKGZ1bmN0aW9uIChhLCBpKSB7IHJldHVybiBwcmVkaWNhdGVXaXRoSW5kZXgoaSwgYSk7IH0pO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHdhKSB7XG4gICAgcmV0dXJuIHdhLm1hcChmdW5jdGlvbiAoXywgaSkgeyByZXR1cm4gZih3YS5zbGljZShpKSk7IH0pO1xufTsgfTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZHVwbGljYXRlID0gLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgICAgIHJldHVybiBmYS5yZWR1Y2UoZnVuY3Rpb24gKGIsIGEsIGkpIHsgcmV0dXJuIE0uY29uY2F0KGIsIGYoaSwgYSkpOyB9LCBNLmVtcHR5KTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZSA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIHJlZHVjZVdpdGhJbmRleChiLCBmdW5jdGlvbiAoXywgYiwgYSkgeyByZXR1cm4gZihiLCBhKTsgfSk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZvbGRNYXBXaXRoSW5kZXhNKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgdmFyIGxlbiA9IGZhLmxlbmd0aDtcbiAgICB2YXIgb3V0ID0gYjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIG91dCA9IGYoaSwgb3V0LCBmYVtpXSk7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiByZWR1Y2VSaWdodFdpdGhJbmRleChiLCBmdW5jdGlvbiAoXywgYSwgYikgeyByZXR1cm4gZihhLCBiKTsgfSk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGZhLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBmKGksIGEsIGIpOyB9LCBiKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4RiA9IHRyYXZlcnNlV2l0aEluZGV4KEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gdHJhdmVyc2VXaXRoSW5kZXhGKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciBzZXF1ZW5jZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkge1xuICAgICAgICByZXR1cm4gX3JlZHVjZSh0YSwgRi5vZih6ZXJvKCkpLCBmdW5jdGlvbiAoZmFzLCBmYSkge1xuICAgICAgICAgICAgcmV0dXJuIEYuYXAoRi5tYXAoZmFzLCBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBwaXBlKGFzLCBhcHBlbmQoYSkpOyB9OyB9KSwgZmEpO1xuICAgICAgICB9KTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIHJlZHVjZVdpdGhJbmRleChGLm9mKHplcm8oKSksIGZ1bmN0aW9uIChpLCBmYnMsIGEpIHtcbiAgICAgICAgICAgIHJldHVybiBGLmFwKEYubWFwKGZicywgZnVuY3Rpb24gKGJzKSB7IHJldHVybiBmdW5jdGlvbiAoYikgeyByZXR1cm4gcGlwZShicywgYXBwZW5kKGIpKTsgfTsgfSksIGYoaSwgYSkpO1xuICAgICAgICB9KTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2l0aGVyID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpdGhlckYgPSBfd2l0aGVyKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2l0aGVyRihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aWx0ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpbHRGID0gX3dpbHQoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIF93aWx0RihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi42LjZcbiAqL1xuZXhwb3J0IHZhciB1bmZvbGQgPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICB2YXIgYmIgPSBiO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdGFudC1jb25kaXRpb25cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgbXQgPSBmKGJiKTtcbiAgICAgICAgaWYgKF8uaXNTb21lKG10KSkge1xuICAgICAgICAgICAgdmFyIF9hID0gbXQudmFsdWUsIGEgPSBfYVswXSwgYl8xID0gX2FbMV07XG4gICAgICAgICAgICBvdXQucHVzaChhKTtcbiAgICAgICAgICAgIGJiID0gYl8xO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdSZWFkb25seUFycmF5Jztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U2hvdyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIHNob3c6IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gXCJbXCIuY29uY2F0KGFzLm1hcChTLnNob3cpLmpvaW4oJywgJyksIFwiXVwiKTsgfVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gKGlzRW1wdHkoZmlyc3QpID8gc2Vjb25kIDogaXNFbXB0eShzZWNvbmQpID8gZmlyc3QgOiBmaXJzdC5jb25jYXQoc2Vjb25kKSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBSZXR1cm5zIGEgYE1vbm9pZGAgZm9yIGBSZWFkb25seUFycmF5PEE+YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBjb25zdCBNID0gZ2V0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChbMSwgMl0sIFszLCA0XSksIFsxLCAyLCAzLCA0XSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRNb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwKCkuY29uY2F0LFxuICAgIGVtcHR5OiBlbXB0eVxufSk7IH07XG4vKipcbiAqIERlcml2ZXMgYW4gYEVxYCBvdmVyIHRoZSBgUmVhZG9ubHlBcnJheWAgb2YgYSBnaXZlbiBlbGVtZW50IHR5cGUgZnJvbSB0aGUgYEVxYCBvZiB0aGF0IHR5cGUuIFRoZSBkZXJpdmVkIGBFcWAgZGVmaW5lcyB0d29cbiAqIGFycmF5cyBhcyBlcXVhbCBpZiBhbGwgZWxlbWVudHMgb2YgYm90aCBhcnJheXMgYXJlIGNvbXBhcmVkIGVxdWFsIHBhaXJ3aXNlIHdpdGggdGhlIGdpdmVuIGBFYC4gSW4gY2FzZSBvZiBhcnJheXMgb2ZcbiAqIGRpZmZlcmVudCBsZW5ndGhzLCB0aGUgcmVzdWx0IGlzIG5vbiBlcXVhbGl0eS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBnZXRFcSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogY29uc3QgRSA9IGdldEVxKFMuRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWydhJywgJ2InXSwgWydhJywgJ2InXSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoWydhJ10sIFtdKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4cywgeXMpIHsgcmV0dXJuIHhzLmxlbmd0aCA9PT0geXMubGVuZ3RoICYmIHhzLmV2ZXJ5KGZ1bmN0aW9uICh4LCBpKSB7IHJldHVybiBFLmVxdWFscyh4LCB5c1tpXSk7IH0pOyB9KTtcbn07XG4vKipcbiAqIERlcml2ZXMgYW4gYE9yZGAgb3ZlciB0aGUgYFJlYWRvbmx5QXJyYXlgIG9mIGEgZ2l2ZW4gZWxlbWVudCB0eXBlIGZyb20gdGhlIGBPcmRgIG9mIHRoYXQgdHlwZS4gVGhlIG9yZGVyaW5nIGJldHdlZW4gdHdvIHN1Y2hcbiAqIGFycmF5cyBpcyBlcXVhbCB0bzogdGhlIGZpcnN0IG5vbiBlcXVhbCBjb21wYXJpc29uIG9mIGVhY2ggYXJyYXlzIGVsZW1lbnRzIHRha2VuIHBhaXJ3aXNlIGluIGluY3JlYXNpbmcgb3JkZXIsIGluXG4gKiBjYXNlIG9mIGVxdWFsaXR5IG92ZXIgYWxsIHRoZSBwYWlyd2lzZSBlbGVtZW50czsgdGhlIGxvbmdlc3QgYXJyYXkgaXMgY29uc2lkZXJlZCB0aGUgZ3JlYXRlc3QsIGlmIGJvdGggYXJyYXlzIGhhdmVcbiAqIHRoZSBzYW1lIGxlbmd0aCwgdGhlIHJlc3VsdCBpcyBlcXVhbGl0eS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0T3JkIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIGNvbnN0IE8gPSBnZXRPcmQoUy5PcmQpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKFsnYiddLCBbJ2EnXSksIDEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKFsnYSddLCBbJ2EnXSksIDApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKFsnYSddLCBbJ2InXSksIC0xKVxuICpcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPcmQgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmcm9tQ29tcGFyZShmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICB2YXIgYUxlbiA9IGEubGVuZ3RoO1xuICAgICAgICB2YXIgYkxlbiA9IGIubGVuZ3RoO1xuICAgICAgICB2YXIgbGVuID0gTWF0aC5taW4oYUxlbiwgYkxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvcmRlcmluZyA9IE8uY29tcGFyZShhW2ldLCBiW2ldKTtcbiAgICAgICAgICAgIGlmIChvcmRlcmluZyAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcmRlcmluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTi5PcmQuY29tcGFyZShhTGVuLCBiTGVuKTtcbiAgICB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VW5pb25Nb25vaWQgPSBmdW5jdGlvbiAoRSkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGdldFVuaW9uU2VtaWdyb3VwKEUpLmNvbmNhdCxcbiAgICBlbXB0eTogZW1wdHlcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgaW50ZXJzZWN0aW9uRSA9IGludGVyc2VjdGlvbihFKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBpbnRlcnNlY3Rpb25FKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXREaWZmZXJlbmNlTWFnbWEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciBkaWZmZXJlbmNlRSA9IGRpZmZlcmVuY2UoRSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZGlmZmVyZW5jZUUoc2Vjb25kKShmaXJzdCk7IH1cbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhcCA9IC8qI19fUFVSRV9fKi8gZmxhcF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBQb2ludGVkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvcldpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbHkgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBcbn07XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXBGaXJzdCA9IC8qI19fUFVSRV9fKi8gYXBGaXJzdF8oQXBwbHkpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIHNlY29uZC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcFNlY29uZCA9IC8qI19fUFVSRV9fKi8gYXBTZWNvbmRfKEFwcGx5KTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbGljYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQ2hhaW4gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIE1vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIFJBLmNoYWluRmlyc3QoKCkgPT4gW10pXG4gKiAgICksXG4gKiAgIFtdXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRmlyc3QgPSBcbi8qI19fUFVSRV9fKi8gY2hhaW5GaXJzdF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBVbmZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHVuZm9sZDogdW5mb2xkXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBbHQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFsdDogX2FsdFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFplcm8gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ3VhcmQgPSAvKiNfX1BVUkVfXyovIGd1YXJkXyhaZXJvLCBQb2ludGVkKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQWx0ZXJuYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFsdDogX2FsdCxcbiAgICB6ZXJvOiB6ZXJvXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBFeHRlbmQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGV4dGVuZDogX2V4dGVuZFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29tcGFjdGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGVcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRmlsdGVyYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IF9wYXJ0aXRpb25NYXBXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uV2l0aEluZGV4OiBfcGFydGl0aW9uV2l0aEluZGV4LFxuICAgIGZpbHRlck1hcFdpdGhJbmRleDogX2ZpbHRlck1hcFdpdGhJbmRleCxcbiAgICBmaWx0ZXJXaXRoSW5kZXg6IF9maWx0ZXJXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5SZWNEZXB0aEZpcnN0ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgdmFyIHRvZG8gPSBfX3NwcmVhZEFycmF5KFtdLCBmKGEpLCB0cnVlKTtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB3aGlsZSAodG9kby5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRvZG8uc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChfLmlzTGVmdChlKSkge1xuICAgICAgICAgICAgICAgIHRvZG8udW5zaGlmdC5hcHBseSh0b2RvLCBmKGUubGVmdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goZS5yaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIENoYWluUmVjRGVwdGhGaXJzdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICBjaGFpblJlYzogX2NoYWluUmVjRGVwdGhGaXJzdFxufTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpblJlY0JyZWFkdGhGaXJzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHZhciBpbml0aWFsID0gZihhKTtcbiAgICAgICAgdmFyIHRvZG8gPSBbXTtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICBmdW5jdGlvbiBnbyhlKSB7XG4gICAgICAgICAgICBpZiAoXy5pc0xlZnQoZSkpIHtcbiAgICAgICAgICAgICAgICBmKGUubGVmdCkuZm9yRWFjaChmdW5jdGlvbiAodikgeyByZXR1cm4gdG9kby5wdXNoKHYpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGUucmlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgaW5pdGlhbF8xID0gaW5pdGlhbDsgX2kgPCBpbml0aWFsXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgZSA9IGluaXRpYWxfMVtfaV07XG4gICAgICAgICAgICBnbyhlKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodG9kby5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBnbyh0b2RvLnNoaWZ0KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpblJlY0JyZWFkdGhGaXJzdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICBjaGFpblJlYzogX2NoYWluUmVjQnJlYWR0aEZpcnN0XG59O1xudmFyIF93aXRoZXIgPSAvKiNfX1BVUkVfXyovIHdpdGhlckRlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbnZhciBfd2lsdCA9IC8qI19fUFVSRV9fKi8gd2lsdERlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgV2l0aGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbi8qKlxuICogRmlsdGVyIHZhbHVlcyBpbnNpZGUgYSBjb250ZXh0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0ICogYXMgVCBmcm9tICdmcC10cy9UYXNrJ1xuICpcbiAqIGNvbnN0IGZpbHRlckUgPSBSQS5maWx0ZXJFKFQuQXBwbGljYXRpdmVQYXIpXG4gKiBhc3luYyBmdW5jdGlvbiB0ZXN0KCkge1xuICogICBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICAgIGF3YWl0IHBpcGUoXG4gKiAgICAgICBbLTEsIDIsIDNdLFxuICogICAgICAgZmlsdGVyRSgobikgPT4gVC5vZihuID4gMCkpXG4gKiAgICAgKSgpLFxuICogICAgIFsyLCAzXVxuICogICApXG4gKiB9XG4gKiB0ZXN0KClcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyRSA9IC8qI19fUFVSRV9fKi8gZmlsdGVyRV8oV2l0aGVyYWJsZSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBGcm9tRWl0aGVyID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGZyb21FaXRoZXI6IGZyb21FaXRoZXJcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVpdGhlcksgPSAvKiNfX1BVUkVfXyovIGZyb21FaXRoZXJLXyhGcm9tRWl0aGVyKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHVuc2FmZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgdW5zYWZlXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVJbnNlcnRBdCA9IFJORUEudW5zYWZlSW5zZXJ0QXQ7XG4vKipcbiAqIEBjYXRlZ29yeSB1bnNhZmVcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHVuc2FmZVVwZGF0ZUF0ID0gZnVuY3Rpb24gKGksIGEsIGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gUk5FQS51bnNhZmVVcGRhdGVBdChpLCBhLCBhcykgOiBhcztcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB1bnNhZmVcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHVuc2FmZURlbGV0ZUF0ID0gZnVuY3Rpb24gKGksIGFzKSB7XG4gICAgdmFyIHhzID0gYXMuc2xpY2UoKTtcbiAgICB4cy5zcGxpY2UoaSwgMSk7XG4gICAgcmV0dXJuIHhzO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0b0FycmF5ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzRW1wdHkoYXMpID8gZW1wdHkgOiBhcy5zbGljZSgpKTsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFuIGVtcHR5IGFycmF5XG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZW1wdHkgPSBSTkVBLmVtcHR5O1xuZXhwb3J0IGZ1bmN0aW9uIGV2ZXJ5KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzLmV2ZXJ5KHByZWRpY2F0ZSk7IH07XG59XG4vKipcbiAqIENoZWNrIGlmIGEgcHJlZGljYXRlIGhvbGRzIHRydWUgZm9yIGFueSBhcnJheSBtZW1iZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGlzUG9zaXRpdmUgPSAobjogbnVtYmVyKTogYm9vbGVhbiA9PiBuID4gMFxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbLTEsIC0yLCAzXSwgc29tZShpc1Bvc2l0aXZlKSksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWy0xLCAtMiwgLTNdLCBzb21lKGlzUG9zaXRpdmUpKSwgZmFsc2UpXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgc29tZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5zb21lKHByZWRpY2F0ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEFsaWFzIG9mIFtgc29tZWBdKCNzb21lKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBleGlzdHMgPSBzb21lO1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYSBgUmVhZG9ubHlBcnJheWAsIHRoZW4gZm9sZHMgdGhlIHJlc3VsdHMgdXNpbmcgdGhlIHByb3ZpZGVkIGBNb25vaWRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCB7IGludGVyY2FsYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyY2FsYXRlKFMuTW9ub2lkKSgnLScpKFsnYScsICdiJywgJ2MnXSksICdhLWItYycpXG4gKlxuICogQHNpbmNlIDIuMTIuMFxuICovXG5leHBvcnQgdmFyIGludGVyY2FsYXRlID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgaW50ZXJjYWxhdGVNID0gUk5FQS5pbnRlcmNhbGF0ZShNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1pZGRsZSkgeyByZXR1cm4gbWF0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gTS5lbXB0eTsgfSwgaW50ZXJjYWxhdGVNKG1pZGRsZSkpOyB9O1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBiaW5kXyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxlZ2FjeVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBBbGlhcyBvZiBgZmxhdE1hcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW4gPSBmbGF0TWFwO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAgbW9kdWxlIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciByYW5nZSA9IFJORUEucmFuZ2U7XG4vKipcbiAqIFVzZSBbYHByZXBlbmRgXSgjcHJlcGVuZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGNvbnMgPSBSTkVBLmNvbnM7XG4vKipcbiAqIFVzZSBbYGFwcGVuZGBdKCNhcHBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzbm9jID0gUk5FQS5zbm9jO1xuLyoqXG4gKiBVc2UgW2BwcmVwZW5kQWxsYF0oI3ByZXBlbmRhbGwpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjkuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBwcmVwZW5kVG9BbGwgPSBwcmVwZW5kQWxsO1xuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYEZ1bmN0b3JgIGluc3RhbmNlLCBwYXNzIGBSQS5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBSQS5yZWFkb25seUFycmF5YFxuICogKHdoZXJlIGBSQWAgaXMgZnJvbSBgaW1wb3J0IFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHJlYWRvbmx5QXJyYXkgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uTWFwV2l0aEluZGV4OiBfcGFydGl0aW9uTWFwV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbldpdGhJbmRleDogX3BhcnRpdGlvbldpdGhJbmRleCxcbiAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IF9maWx0ZXJNYXBXaXRoSW5kZXgsXG4gICAgZmlsdGVyV2l0aEluZGV4OiBfZmlsdGVyV2l0aEluZGV4LFxuICAgIGFsdDogX2FsdCxcbiAgICB6ZXJvOiB6ZXJvLFxuICAgIHVuZm9sZDogdW5mb2xkLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXgsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbiIsCiAgInZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufTtcbmltcG9ydCB7IGFwRmlyc3QgYXMgYXBGaXJzdF8sIGFwUyBhcyBhcFNfLCBhcFNlY29uZCBhcyBhcFNlY29uZF8gfSBmcm9tICcuL0FwcGx5JztcbmltcG9ydCB7IGJpbmQgYXMgYmluZF8sIGNoYWluRmlyc3QgYXMgY2hhaW5GaXJzdF8gfSBmcm9tICcuL0NoYWluJztcbmltcG9ydCB7IGZyb21FcXVhbHMgfSBmcm9tICcuL0VxJztcbmltcG9ydCB7IGZyb21FaXRoZXJLIGFzIGZyb21FaXRoZXJLXyB9IGZyb20gJy4vRnJvbUVpdGhlcic7XG5pbXBvcnQgeyBkdWFsLCBpZGVudGl0eSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgYmluZFRvIGFzIGJpbmRUb18sIGZsYXAgYXMgZmxhcF8sIGxldCBhcyBsZXRfXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0ICogYXMgTiBmcm9tICcuL251bWJlcic7XG5pbXBvcnQgeyBmcm9tQ29tcGFyZSB9IGZyb20gJy4vT3JkJztcbmltcG9ydCAqIGFzIFJORUEgZnJvbSAnLi9SZWFkb25seU5vbkVtcHR5QXJyYXknO1xuaW1wb3J0IHsgc2VwYXJhdGVkIH0gZnJvbSAnLi9TZXBhcmF0ZWQnO1xuaW1wb3J0IHsgZmlsdGVyRSBhcyBmaWx0ZXJFXywgd2lsdERlZmF1bHQsIHdpdGhlckRlZmF1bHQgfSBmcm9tICcuL1dpdGhlcmFibGUnO1xuaW1wb3J0IHsgZ3VhcmQgYXMgZ3VhcmRfIH0gZnJvbSAnLi9aZXJvJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIGBSZWFkb25seUFycmF5YCBpcyBlbXB0eS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzRW1wdHkoW10pLCB0cnVlKVxuICpcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMubGVuZ3RoID09PSAwOyB9O1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYSBgUmVhZG9ubHlBcnJheWAgaXMgbm9uIGVtcHR5LlxuICpcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgaXNOb25FbXB0eSA9IFJORUEuaXNOb25FbXB0eTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gdGhlIGZyb250IG9mIGEgYFJlYWRvbmx5QXJyYXlgLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcHJlcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFsyLCAzLCA0XSwgcHJlcGVuZCgxKSksIFsxLCAyLCAzLCA0XSlcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZCA9IFJORUEucHJlcGVuZDtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYHByZXBlbmRgXSgjcHJlcGVuZCkuXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gUk5FQS5wcmVwZW5kVztcbi8qKlxuICogQXBwZW5kIGFuIGVsZW1lbnQgdG8gdGhlIGVuZCBvZiBhIGBSZWFkb25seUFycmF5YCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5Tm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGFwcGVuZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFsxLCAyLCAzXSwgYXBwZW5kKDQpKSwgWzEsIDIsIDMsIDRdKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmQgPSBSTkVBLmFwcGVuZDtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFwcGVuZGBdKCNhcHBlbmQpLlxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gUk5FQS5hcHBlbmRXO1xuLyoqXG4gKiBSZXR1cm4gYSBgUmVhZG9ubHlBcnJheWAgb2YgbGVuZ3RoIGBuYCB3aXRoIGVsZW1lbnQgYGlgIGluaXRpYWxpemVkIHdpdGggYGYoaSlgLlxuICpcbiAqICoqTm90ZSoqLiBgbmAgaXMgbm9ybWFsaXplZCB0byBhIG5vbiBuZWdhdGl2ZSBpbnRlZ2VyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYWtlQnkgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChuOiBudW1iZXIpOiBudW1iZXIgPT4gbiAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobWFrZUJ5KDUsIGRvdWJsZSksIFswLCAyLCA0LCA2LCA4XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYWtlQnkgPSBmdW5jdGlvbiAobiwgZikgeyByZXR1cm4gKG4gPD0gMCA/IGVtcHR5IDogUk5FQS5tYWtlQnkoZikobikpOyB9O1xuLyoqXG4gKiBDcmVhdGUgYSBgUmVhZG9ubHlBcnJheWAgY29udGFpbmluZyBhIHZhbHVlIHJlcGVhdGVkIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLlxuICpcbiAqICoqTm90ZSoqLiBgbmAgaXMgbm9ybWFsaXplZCB0byBhIG5vbiBuZWdhdGl2ZSBpbnRlZ2VyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXBsaWNhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmVwbGljYXRlKDMsICdhJyksIFsnYScsICdhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZXBsaWNhdGUgPSBmdW5jdGlvbiAobiwgYSkgeyByZXR1cm4gbWFrZUJ5KG4sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21QcmVkaWNhdGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiAocHJlZGljYXRlKGEpID8gW2FdIDogZW1wdHkpOyB9O1xufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29udmVyc2lvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbU9wdGlvbiA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKF8uaXNOb25lKG1hKSA/IGVtcHR5IDogW21hLnZhbHVlXSk7IH07XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gYEVpdGhlcmAgdG8gYSBgUmVhZG9ubHlBcnJheWAuXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVpdGhlciA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiAoXy5pc0xlZnQoZSkgPyBlbXB0eSA6IFtlLnJpZ2h0XSk7IH07XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaGBdKCNtYXRjaCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hXID0gZnVuY3Rpb24gKG9uRW1wdHksIG9uTm9uRW1wdHkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KGFzKSA/IG9uTm9uRW1wdHkoYXMpIDogb25FbXB0eSgpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoID0gbWF0Y2hXO1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgbWF0Y2hMZWZ0YF0oI21hdGNobGVmdCkuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaExlZnRXID0gZnVuY3Rpb24gKG9uRW1wdHksIG9uTm9uRW1wdHkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KGFzKSA/IG9uTm9uRW1wdHkoUk5FQS5oZWFkKGFzKSwgUk5FQS50YWlsKGFzKSkgOiBvbkVtcHR5KCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEJyZWFrIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gaXRzIGZpcnN0IGVsZW1lbnQgYW5kIHJlbWFpbmluZyBlbGVtZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWF0Y2hMZWZ0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBjb25zdCBsZW46IDxBPihhczogUmVhZG9ubHlBcnJheTxBPikgPT4gbnVtYmVyID0gbWF0Y2hMZWZ0KCgpID0+IDAsIChfLCB0YWlsKSA9PiAxICsgbGVuKHRhaWwpKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGxlbihbMSwgMiwgM10pLCAzKVxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hMZWZ0ID0gbWF0Y2hMZWZ0Vztcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaExlZnRgXSgjbWF0Y2hsZWZ0KS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZExlZnQgPSBtYXRjaExlZnQ7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaFJpZ2h0YF0oI21hdGNocmlnaHQpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodFcgPSBmdW5jdGlvbiAob25FbXB0eSwgb25Ob25FbXB0eSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gb25Ob25FbXB0eShSTkVBLmluaXQoYXMpLCBSTkVBLmxhc3QoYXMpKSA6IG9uRW1wdHkoKTtcbiAgICB9O1xufTtcbi8qKlxuICogQnJlYWsgYSBgUmVhZG9ubHlBcnJheWAgaW50byBpdHMgaW5pdGlhbCBlbGVtZW50cyBhbmQgdGhlIGxhc3QgZWxlbWVudC5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoUmlnaHQgPSBtYXRjaFJpZ2h0Vztcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaFJpZ2h0YF0oI21hdGNocmlnaHQpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkUmlnaHQgPSBtYXRjaFJpZ2h0O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29tYmluYXRvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIGNoYWluV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIGlmIChpc0VtcHR5KGFzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgb3V0LnB1c2guYXBwbHkob3V0LCBmKGksIGFzW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogU2FtZSBhcyBgcmVkdWNlYCBidXQgaXQgY2FycmllcyBvdmVyIHRoZSBpbnRlcm1lZGlhdGUgc3RlcHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNjYW5MZWZ0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNjYW5MZWZ0KDEwLCAoYiwgYTogbnVtYmVyKSA9PiBiIC0gYSkoWzEsIDIsIDNdKSwgWzEwLCA5LCA3LCA0XSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzY2FuTGVmdCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgb3V0ID0gbmV3IEFycmF5KGxlbiArIDEpO1xuICAgICAgICBvdXRbMF0gPSBiO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBvdXRbaSArIDFdID0gZihvdXRbaV0sIGFzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBGb2xkIGFuIGFycmF5IGZyb20gdGhlIHJpZ2h0LCBrZWVwaW5nIGFsbCBpbnRlcm1lZGlhdGUgcmVzdWx0cyBpbnN0ZWFkIG9mIG9ubHkgdGhlIGZpbmFsIHJlc3VsdFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzY2FuUmlnaHQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2NhblJpZ2h0KDEwLCAoYTogbnVtYmVyLCBiKSA9PiBiIC0gYSkoWzEsIDIsIDNdKSwgWzQsIDUsIDcsIDEwXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzY2FuUmlnaHQgPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIGxlbiA9IGFzLmxlbmd0aDtcbiAgICAgICAgdmFyIG91dCA9IG5ldyBBcnJheShsZW4gKyAxKTtcbiAgICAgICAgb3V0W2xlbl0gPSBiO1xuICAgICAgICBmb3IgKHZhciBpID0gbGVuIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIG91dFtpXSA9IGYoYXNbaV0sIG91dFtpICsgMV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIGEgYFJlYWRvbmx5QXJyYXlgLlxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBzaXplID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5sZW5ndGg7IH07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBhbiBhcnJheSBjb250YWlucyBhIHBhcnRpY3VsYXIgaW5kZXhcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpc091dE9mQm91bmQgPSBSTkVBLmlzT3V0T2ZCb3VuZDtcbmV4cG9ydCBmdW5jdGlvbiBsb29rdXAoaSwgYXMpIHtcbiAgICByZXR1cm4gYXMgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gbG9va3VwKGksIGFzKTsgfSA6IGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUoYXNbaV0pO1xufVxuLyoqXG4gKiBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgaW4gYW4gYXJyYXksIG9yIGBOb25lYCBpZiB0aGUgYXJyYXkgaXMgZW1wdHlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaGVhZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaGVhZChbMSwgMiwgM10pLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChoZWFkKFtdKSwgbm9uZSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBoZWFkID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBfLnNvbWUoUk5FQS5oZWFkKGFzKSkgOiBfLm5vbmUpOyB9O1xuLyoqXG4gKiBHZXQgdGhlIGxhc3QgZWxlbWVudCBpbiBhbiBhcnJheSwgb3IgYE5vbmVgIGlmIHRoZSBhcnJheSBpcyBlbXB0eVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBsYXN0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChsYXN0KFsxLCAyLCAzXSksIHNvbWUoMykpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGxhc3QoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGxhc3QgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc05vbkVtcHR5KGFzKSA/IF8uc29tZShSTkVBLmxhc3QoYXMpKSA6IF8ubm9uZSk7IH07XG4vKipcbiAqIEdldCBhbGwgYnV0IHRoZSBmaXJzdCBlbGVtZW50IG9mIGFuIGFycmF5LCBjcmVhdGluZyBhIG5ldyBhcnJheSwgb3IgYE5vbmVgIGlmIHRoZSBhcnJheSBpcyBlbXB0eVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB0YWlsIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWlsKFsxLCAyLCAzXSksIHNvbWUoWzIsIDNdKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodGFpbChbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdGFpbCA9IGZ1bmN0aW9uIChhcykge1xuICAgIHJldHVybiBpc05vbkVtcHR5KGFzKSA/IF8uc29tZShSTkVBLnRhaWwoYXMpKSA6IF8ubm9uZTtcbn07XG4vKipcbiAqIEdldCBhbGwgYnV0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXksIGNyZWF0aW5nIGEgbmV3IGFycmF5LCBvciBgTm9uZWAgaWYgdGhlIGFycmF5IGlzIGVtcHR5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGluaXQoWzEsIDIsIDNdKSwgc29tZShbMSwgMl0pKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFtdKSwgbm9uZSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpbml0ID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKFJORUEuaW5pdChhcykpIDogXy5ub25lO1xufTtcbi8qKlxuICogS2VlcCBvbmx5IGEgbWF4IG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZiBhbiBgUmVhZG9ubHlBcnJheWAsIGNyZWF0aW5nIGEgbmV3IGBSZWFkb25seUFycmF5YC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBub24gbmVnYXRpdmUgaW50ZWdlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUkEgZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBpbnB1dDogUmVhZG9ubHlBcnJheTxudW1iZXI+ID0gWzEsIDIsIDNdXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLnRha2VMZWZ0KDIpKSwgWzEsIDJdKVxuICpcbiAqIC8vIG91dCBvZiBib3VuZHNcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChwaXBlKGlucHV0LCBSQS50YWtlTGVmdCg0KSksIGlucHV0KVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLnRha2VMZWZ0KC0xKSksIGlucHV0KVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHRha2VMZWZ0ID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpc091dE9mQm91bmQobiwgYXMpID8gYXMgOiBuID09PSAwID8gZW1wdHkgOiBhcy5zbGljZSgwLCBuKTtcbiAgICB9O1xufTtcbi8qKlxuICogS2VlcCBvbmx5IGEgbWF4IG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgYW4gYFJlYWRvbmx5QXJyYXlgLCBjcmVhdGluZyBhIG5ldyBgUmVhZG9ubHlBcnJheWAuXG4gKlxuICogKipOb3RlKiouIGBuYCBpcyBub3JtYWxpemVkIHRvIGEgbm9uIG5lZ2F0aXZlIGludGVnZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFJBIGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgaW5wdXQ6IFJlYWRvbmx5QXJyYXk8bnVtYmVyPiA9IFsxLCAyLCAzXVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKGlucHV0LCBSQS50YWtlUmlnaHQoMikpLCBbMiwgM10pXG4gKlxuICogLy8gb3V0IG9mIGJvdW5kc1xuICogYXNzZXJ0LnN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLnRha2VSaWdodCg0KSksIGlucHV0KVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLnRha2VSaWdodCgtMSkpLCBpbnB1dClcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0YWtlUmlnaHQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChuLCBhcykgPyBhcyA6IG4gPT09IDAgPyBlbXB0eSA6IGFzLnNsaWNlKC1uKTtcbiAgICB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiB0YWtlTGVmdFdoaWxlKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIGlmICghcHJlZGljYXRlKGEpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXQucHVzaChhKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGVuID0gb3V0Lmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIGxlbiA9PT0gYXMubGVuZ3RoID8gYXMgOiBsZW4gPT09IDAgPyBlbXB0eSA6IG91dDtcbiAgICB9O1xufVxudmFyIHNwYW5MZWZ0SW5kZXggPSBmdW5jdGlvbiAoYXMsIHByZWRpY2F0ZSkge1xuICAgIHZhciBsID0gYXMubGVuZ3RoO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoIXByZWRpY2F0ZShhc1tpXSkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBzcGFuTGVmdChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBfYSA9IHNwbGl0QXQoc3BhbkxlZnRJbmRleChhcywgcHJlZGljYXRlKSkoYXMpLCBpbml0ID0gX2FbMF0sIHJlc3QgPSBfYVsxXTtcbiAgICAgICAgcmV0dXJuIHsgaW5pdDogaW5pdCwgcmVzdDogcmVzdCB9O1xuICAgIH07XG59XG4vKipcbiAqIERyb3AgYSBtYXggbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIHN0YXJ0IG9mIGFuIGBSZWFkb25seUFycmF5YCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5QXJyYXlgLlxuICpcbiAqICoqTm90ZSoqLiBgbmAgaXMgbm9ybWFsaXplZCB0byBhIG5vbiBuZWdhdGl2ZSBpbnRlZ2VyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGlucHV0OiBSZWFkb25seUFycmF5PG51bWJlcj4gPSBbMSwgMiwgM11cbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShpbnB1dCwgUkEuZHJvcExlZnQoMikpLCBbM10pXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwocGlwZShpbnB1dCwgUkEuZHJvcExlZnQoMCkpLCBpbnB1dClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChwaXBlKGlucHV0LCBSQS5kcm9wTGVmdCgtMSkpLCBpbnB1dClcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBkcm9wTGVmdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gbiA8PSAwIHx8IGlzRW1wdHkoYXMpID8gYXMgOiBuID49IGFzLmxlbmd0aCA/IGVtcHR5IDogYXMuc2xpY2UobiwgYXMubGVuZ3RoKTtcbiAgICB9O1xufTtcbi8qKlxuICogRHJvcCBhIG1heCBudW1iZXIgb2YgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIGFuIGBSZWFkb25seUFycmF5YCwgY3JlYXRpbmcgYSBuZXcgYFJlYWRvbmx5QXJyYXlgLlxuICpcbiAqICoqTm90ZSoqLiBgbmAgaXMgbm9ybWFsaXplZCB0byBhIG5vbiBuZWdhdGl2ZSBpbnRlZ2VyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGlucHV0OiBSZWFkb25seUFycmF5PG51bWJlcj4gPSBbMSwgMiwgM11cbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShpbnB1dCwgUkEuZHJvcFJpZ2h0KDIpKSwgWzFdKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLmRyb3BSaWdodCgwKSksIGlucHV0KVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKHBpcGUoaW5wdXQsIFJBLmRyb3BSaWdodCgtMSkpLCBpbnB1dClcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBkcm9wUmlnaHQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIG4gPD0gMCB8fCBpc0VtcHR5KGFzKSA/IGFzIDogbiA+PSBhcy5sZW5ndGggPyBlbXB0eSA6IGFzLnNsaWNlKDAsIGFzLmxlbmd0aCAtIG4pO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGRyb3BMZWZ0V2hpbGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgaSA9IHNwYW5MZWZ0SW5kZXgoYXMsIHByZWRpY2F0ZSk7XG4gICAgICAgIHJldHVybiBpID09PSAwID8gYXMgOiBpID09PSBhcy5sZW5ndGggPyBlbXB0eSA6IGFzLnNsaWNlKGkpO1xuICAgIH07XG59XG4vKipcbiAqIEZpbmQgdGhlIGZpcnN0IGluZGV4IGZvciB3aGljaCBhIHByZWRpY2F0ZSBob2xkc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaW5kSW5kZXggfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRJbmRleCgobjogbnVtYmVyKSA9PiBuID09PSAyKShbMSwgMiwgM10pLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kSW5kZXgoKG46IG51bWJlcikgPT4gbiA9PT0gMikoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZpbmRJbmRleCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUoYXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uc29tZShpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRGaXJzdChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUoYXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uc29tZShhc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF8ubm9uZTtcbiAgICB9O1xufVxuLyoqXG4gKiBGaW5kIHRoZSBmaXJzdCBlbGVtZW50IHJldHVybmVkIGJ5IGFuIG9wdGlvbiBiYXNlZCBzZWxlY3RvciBmdW5jdGlvblxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaW5kRmlyc3RNYXAgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgUGVyc29uIHtcbiAqICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGFnZT86IG51bWJlclxuICogfVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IFJlYWRvbmx5QXJyYXk8UGVyc29uPiA9IFt7IG5hbWU6ICdKb2huJyB9LCB7IG5hbWU6ICdNYXJ5JywgYWdlOiA0NSB9LCB7IG5hbWU6ICdKb2V5JywgYWdlOiAyOCB9XVxuICpcbiAqIC8vIHJldHVybnMgdGhlIG5hbWUgb2YgdGhlIGZpcnN0IHBlcnNvbiB0aGF0IGhhcyBhbiBhZ2VcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmluZEZpcnN0TWFwKChwOiBQZXJzb24pID0+IChwLmFnZSA9PT0gdW5kZWZpbmVkID8gbm9uZSA6IHNvbWUocC5uYW1lKSkpKHBlcnNvbnMpLCBzb21lKCdNYXJ5JykpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmluZEZpcnN0TWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvdXQgPSBmKGFzW2ldKTtcbiAgICAgICAgICAgIGlmIChfLmlzU29tZShvdXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMYXN0KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IGFzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKGFzW2ldKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLnNvbWUoYXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgfTtcbn1cbi8qKlxuICogRmluZCB0aGUgbGFzdCBlbGVtZW50IHJldHVybmVkIGJ5IGFuIG9wdGlvbiBiYXNlZCBzZWxlY3RvciBmdW5jdGlvblxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaW5kTGFzdE1hcCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICByZWFkb25seSBuYW1lOiBzdHJpbmdcbiAqICAgcmVhZG9ubHkgYWdlPzogbnVtYmVyXG4gKiB9XG4gKlxuICogY29uc3QgcGVyc29uczogUmVhZG9ubHlBcnJheTxQZXJzb24+ID0gW3sgbmFtZTogJ0pvaG4nIH0sIHsgbmFtZTogJ01hcnknLCBhZ2U6IDQ1IH0sIHsgbmFtZTogJ0pvZXknLCBhZ2U6IDI4IH1dXG4gKlxuICogLy8gcmV0dXJucyB0aGUgbmFtZSBvZiB0aGUgbGFzdCBwZXJzb24gdGhhdCBoYXMgYW4gYWdlXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRMYXN0TWFwKChwOiBQZXJzb24pID0+IChwLmFnZSA9PT0gdW5kZWZpbmVkID8gbm9uZSA6IHNvbWUocC5uYW1lKSkpKHBlcnNvbnMpLCBzb21lKCdKb2V5JykpXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmluZExhc3RNYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IGFzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB2YXIgb3V0ID0gZihhc1tpXSk7XG4gICAgICAgICAgICBpZiAoXy5pc1NvbWUob3V0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF8ubm9uZTtcbiAgICB9O1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgbGlzdCB3aGljaCBtYXRjaGVzIHRoZSBwcmVkaWNhdGVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmluZExhc3RJbmRleCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBYIHtcbiAqICAgcmVhZG9ubHkgYTogbnVtYmVyXG4gKiAgIHJlYWRvbmx5IGI6IG51bWJlclxuICogfVxuICogY29uc3QgeHM6IFJlYWRvbmx5QXJyYXk8WD4gPSBbeyBhOiAxLCBiOiAwIH0sIHsgYTogMSwgYjogMSB9XVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kTGFzdEluZGV4KCh4OiB7IHJlYWRvbmx5IGE6IG51bWJlciB9KSA9PiB4LmEgPT09IDEpKHhzKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmluZExhc3RJbmRleCgoeDogeyByZWFkb25seSBhOiBudW1iZXIgfSkgPT4geC5hID09PSA0KSh4cyksIG5vbmUpXG4gKlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZpbmRMYXN0SW5kZXggPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICBmb3IgKHZhciBpID0gYXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUoYXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uc29tZShpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgIH07XG59O1xuLyoqXG4gKiBJbnNlcnQgYW4gZWxlbWVudCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LCBjcmVhdGluZyBhIG5ldyBhcnJheSwgb3IgcmV0dXJuaW5nIGBOb25lYCBpZiB0aGUgaW5kZXggaXMgb3V0IG9mIGJvdW5kc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnNlcnRBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5zZXJ0QXQoMiwgNSkoWzEsIDIsIDMsIDRdKSwgc29tZShbMSwgMiwgNSwgMywgNF0pKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGluc2VydEF0ID0gZnVuY3Rpb24gKGksIGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpIDwgMCB8fCBpID4gYXMubGVuZ3RoID8gXy5ub25lIDogXy5zb21lKFJORUEudW5zYWZlSW5zZXJ0QXQoaSwgYSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogQ2hhbmdlIHRoZSBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXgsIGNyZWF0aW5nIGEgbmV3IGFycmF5LCBvciByZXR1cm5pbmcgYE5vbmVgIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVwZGF0ZUF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cGRhdGVBdCgxLCAxKShbMSwgMiwgM10pLCBzb21lKFsxLCAxLCAzXSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwZGF0ZUF0KDEsIDEpKFtdKSwgbm9uZSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pO1xufTtcbi8qKlxuICogRGVsZXRlIHRoZSBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXgsIGNyZWF0aW5nIGEgbmV3IGFycmF5LCBvciByZXR1cm5pbmcgYE5vbmVgIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGRlbGV0ZUF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkZWxldGVBdCgwKShbMSwgMiwgM10pLCBzb21lKFsyLCAzXSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRlbGV0ZUF0KDEpKFtdKSwgbm9uZSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBkZWxldGVBdCA9IGZ1bmN0aW9uIChpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gaXNPdXRPZkJvdW5kKGksIGFzKSA/IF8ubm9uZSA6IF8uc29tZSh1bnNhZmVEZWxldGVBdChpLCBhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXgsIGNyZWF0aW5nIGEgbmV3IGFycmF5LCBvciByZXR1cm5pbmcgYE5vbmVgIGlmIHRoZSBpbmRleCBpcyBvdXRcbiAqIG9mIGJvdW5kc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtb2RpZnlBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9ICh4OiBudW1iZXIpOiBudW1iZXIgPT4geCAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobW9kaWZ5QXQoMSwgZG91YmxlKShbMSwgMiwgM10pLCBzb21lKFsxLCA0LCAzXSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG1vZGlmeUF0KDEsIGRvdWJsZSkoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1vZGlmeUF0ID0gZnVuY3Rpb24gKGksIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpc091dE9mQm91bmQoaSwgYXMpID8gXy5ub25lIDogXy5zb21lKHVuc2FmZVVwZGF0ZUF0KGksIGYoYXNbaV0pLCBhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBSZXZlcnNlIGFuIGFycmF5LCBjcmVhdGluZyBhIG5ldyBhcnJheVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXZlcnNlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJldmVyc2UoWzEsIDIsIDNdKSwgWzMsIDIsIDFdKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChhcy5sZW5ndGggPD0gMSA/IGFzIDogYXMuc2xpY2UoKS5yZXZlcnNlKCkpOyB9O1xuLyoqXG4gKiBFeHRyYWN0cyBmcm9tIGFuIGFycmF5IG9mIGBFaXRoZXJgIGFsbCB0aGUgYFJpZ2h0YCBlbGVtZW50cy4gQWxsIHRoZSBgUmlnaHRgIGVsZW1lbnRzIGFyZSBleHRyYWN0ZWQgaW4gb3JkZXJcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmlnaHRzIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHJpZ2h0LCBsZWZ0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmlnaHRzKFtyaWdodCgxKSwgbGVmdCgnZm9vJyksIHJpZ2h0KDIpXSksIFsxLCAyXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByaWdodHMgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICB2YXIgciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGEgPSBhc1tpXTtcbiAgICAgICAgaWYgKGEuX3RhZyA9PT0gJ1JpZ2h0Jykge1xuICAgICAgICAgICAgci5wdXNoKGEucmlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByO1xufTtcbi8qKlxuICogRXh0cmFjdHMgZnJvbSBhbiBhcnJheSBvZiBgRWl0aGVyYCBhbGwgdGhlIGBMZWZ0YCBlbGVtZW50cy4gQWxsIHRoZSBgTGVmdGAgZWxlbWVudHMgYXJlIGV4dHJhY3RlZCBpbiBvcmRlclxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBsZWZ0cyB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgeyBsZWZ0LCByaWdodCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGxlZnRzKFtyaWdodCgxKSwgbGVmdCgnZm9vJyksIHJpZ2h0KDIpXSksIFsnZm9vJ10pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbGVmdHMgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICB2YXIgciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGEgPSBhc1tpXTtcbiAgICAgICAgaWYgKGEuX3RhZyA9PT0gJ0xlZnQnKSB7XG4gICAgICAgICAgICByLnB1c2goYS5sZWZ0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcjtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGFuIGFycmF5IGluIGluY3JlYXNpbmcgb3JkZXIsIGNyZWF0aW5nIGEgbmV3IGFycmF5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvcnQgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb3J0KE4uT3JkKShbMywgMiwgMV0pLCBbMSwgMiwgM10pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMubGVuZ3RoIDw9IDEgPyBhcyA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLy8gVE9ETzogY3VycnkgYW5kIG1ha2UgZGF0YS1sYXN0IGluIHYzXG4vKipcbiAqIEFwcGx5IGEgZnVuY3Rpb24gdG8gcGFpcnMgb2YgZWxlbWVudHMgYXQgdGhlIHNhbWUgaW5kZXggaW4gdHdvIGFycmF5cywgY29sbGVjdGluZyB0aGUgcmVzdWx0cyBpbiBhIG5ldyBhcnJheS4gSWYgb25lXG4gKiBpbnB1dCBhcnJheSBpcyBzaG9ydCwgZXhjZXNzIGVsZW1lbnRzIG9mIHRoZSBsb25nZXIgYXJyYXkgYXJlIGRpc2NhcmRlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgemlwV2l0aCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh6aXBXaXRoKFsxLCAyLCAzXSwgWydhJywgJ2InLCAnYycsICdkJ10sIChuLCBzKSA9PiBzICsgbiksIFsnYTEnLCAnYjInLCAnYzMnXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB6aXBXaXRoID0gZnVuY3Rpb24gKGZhLCBmYiwgZikge1xuICAgIHZhciBmYyA9IFtdO1xuICAgIHZhciBsZW4gPSBNYXRoLm1pbihmYS5sZW5ndGgsIGZiLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBmY1tpXSA9IGYoZmFbaV0sIGZiW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGZjO1xufTtcbmV4cG9ydCBmdW5jdGlvbiB6aXAoYXMsIGJzKSB7XG4gICAgaWYgKGJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChicykgeyByZXR1cm4gemlwKGJzLCBhcyk7IH07XG4gICAgfVxuICAgIHJldHVybiB6aXBXaXRoKGFzLCBicywgZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIFthLCBiXTsgfSk7XG59XG4vKipcbiAqIFRoZSBmdW5jdGlvbiBpcyByZXZlcnNlIG9mIGB6aXBgLiBUYWtlcyBhbiBhcnJheSBvZiBwYWlycyBhbmQgcmV0dXJuIHR3byBjb3JyZXNwb25kaW5nIGFycmF5c1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1bnppcCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bnppcChbWzEsICdhJ10sIFsyLCAnYiddLCBbMywgJ2MnXV0pLCBbWzEsIDIsIDNdLCBbJ2EnLCAnYicsICdjJ11dKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHVuemlwID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgdmFyIGZhID0gW107XG4gICAgdmFyIGZiID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmYVtpXSA9IGFzW2ldWzBdO1xuICAgICAgICBmYltpXSA9IGFzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBQcmVwZW5kIGFuIGVsZW1lbnQgdG8gZXZlcnkgbWVtYmVyIG9mIGFuIGFycmF5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocHJlcGVuZEFsbCg5KShbMSwgMiwgMywgNF0pLCBbOSwgMSwgOSwgMiwgOSwgMywgOSwgNF0pXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRBbGwgPSBmdW5jdGlvbiAobWlkZGxlKSB7XG4gICAgdmFyIGYgPSBSTkVBLnByZXBlbmRBbGwobWlkZGxlKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IGFzKTsgfTtcbn07XG4vKipcbiAqIFBsYWNlcyBhbiBlbGVtZW50IGluIGJldHdlZW4gbWVtYmVycyBvZiBhbiBhcnJheVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcnNwZXJzZSg5KShbMSwgMiwgMywgNF0pLCBbMSwgOSwgMiwgOSwgMywgOSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgaW50ZXJzcGVyc2UgPSBmdW5jdGlvbiAobWlkZGxlKSB7XG4gICAgdmFyIGYgPSBSTkVBLmludGVyc3BlcnNlKG1pZGRsZSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gZihhcykgOiBhcyk7IH07XG59O1xuLyoqXG4gKiBSb3RhdGUgYSBgUmVhZG9ubHlBcnJheWAgYnkgYG5gIHN0ZXBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByb3RhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByb3RhdGUgPSBmdW5jdGlvbiAobikge1xuICAgIHZhciBmID0gUk5FQS5yb3RhdGUobik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gZihhcykgOiBhcyk7IH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGVsZW0oRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYXMpIHtcbiAgICAgICAgaWYgKGFzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtRV8xID0gZWxlbShFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGVsZW1FXzEoYSwgYXMpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcmVkaWNhdGUgPSBmdW5jdGlvbiAoZWxlbWVudCkgeyByZXR1cm4gRS5lcXVhbHMoZWxlbWVudCwgYSk7IH07XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShhc1tpXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cbi8qKlxuICogUmVtb3ZlIGR1cGxpY2F0ZXMgZnJvbSBhbiBhcnJheSwga2VlcGluZyB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1bmlxIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pcSA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIGYgPSBSTkVBLnVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gZihhcykgOiBhcyk7IH07XG59O1xuLyoqXG4gKiBTb3J0IHRoZSBlbGVtZW50cyBvZiBhbiBhcnJheSBpbiBpbmNyZWFzaW5nIG9yZGVyLCB3aGVyZSBlbGVtZW50cyBhcmUgY29tcGFyZWQgdXNpbmcgZmlyc3QgYG9yZHNbMF1gLCB0aGVuIGBvcmRzWzFdYCxcbiAqIGV0Yy4uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgY29udHJhbWFwIH0gZnJvbSAnZnAtdHMvT3JkJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgUGVyc29uIHtcbiAqICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGFnZTogbnVtYmVyXG4gKiB9XG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqIGNvbnN0IGJ5QWdlID0gcGlwZShOLk9yZCwgY29udHJhbWFwKChwOiBQZXJzb24pID0+IHAuYWdlKSlcbiAqXG4gKiBjb25zdCBzb3J0QnlOYW1lQnlBZ2UgPSBzb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnMgPSBbeyBuYW1lOiAnYScsIGFnZTogMSB9LCB7IG5hbWU6ICdiJywgYWdlOiAzIH0sIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfSwgeyBuYW1lOiAnYicsIGFnZTogMiB9XVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb3J0QnlOYW1lQnlBZ2UocGVyc29ucyksIFtcbiAqICAgeyBuYW1lOiAnYScsIGFnZTogMSB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDMgfSxcbiAqICAgeyBuYW1lOiAnYycsIGFnZTogMiB9XG4gKiBdKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNvcnRCeSA9IGZ1bmN0aW9uIChvcmRzKSB7XG4gICAgdmFyIGYgPSBSTkVBLnNvcnRCeShvcmRzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IGFzKTsgfTtcbn07XG4vKipcbiAqIEEgdXNlZnVsIHJlY3Vyc2lvbiBwYXR0ZXJuIGZvciBwcm9jZXNzaW5nIGEgYFJlYWRvbmx5QXJyYXlgIHRvIHByb2R1Y2UgYSBuZXcgYFJlYWRvbmx5QXJyYXlgLCBvZnRlbiB1c2VkIGZvciBcImNob3BwaW5nXCIgdXAgdGhlIGlucHV0XG4gKiBgUmVhZG9ubHlBcnJheWAuIFR5cGljYWxseSBgY2hvcGAgaXMgY2FsbGVkIHdpdGggc29tZSBmdW5jdGlvbiB0aGF0IHdpbGwgY29uc3VtZSBhbiBpbml0aWFsIHByZWZpeCBvZiB0aGUgYFJlYWRvbmx5QXJyYXlgIGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgdGFpbCBvZiB0aGUgYFJlYWRvbmx5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBFcSB9IGZyb20gJ2ZwLXRzL0VxJ1xuICogaW1wb3J0ICogYXMgUkEgZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGdyb3VwID0gPEE+KFM6IEVxPEE+KTogKChhczogUmVhZG9ubHlBcnJheTxBPikgPT4gUmVhZG9ubHlBcnJheTxSZWFkb25seUFycmF5PEE+PikgPT4ge1xuICogICByZXR1cm4gUkEuY2hvcChhcyA9PiB7XG4gKiAgICAgY29uc3QgeyBpbml0LCByZXN0IH0gPSBwaXBlKGFzLCBSQS5zcGFuTGVmdCgoYTogQSkgPT4gUy5lcXVhbHMoYSwgYXNbMF0pKSlcbiAqICAgICByZXR1cm4gW2luaXQsIHJlc3RdXG4gKiAgIH0pXG4gKiB9XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdyb3VwKE4uRXEpKFsxLCAxLCAyLCAzLCAzLCA0XSksIFtbMSwgMV0sIFsyXSwgWzMsIDNdLCBbNF1dKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHZhciBnID0gUk5FQS5jaG9wKGYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc05vbkVtcHR5KGFzKSA/IGcoYXMpIDogZW1wdHkpOyB9O1xufTtcbi8qKlxuICogU3BsaXRzIGEgYFJlYWRvbmx5QXJyYXlgIGludG8gdHdvIHBpZWNlcywgdGhlIGZpcnN0IHBpZWNlIGhhcyBtYXggYG5gIGVsZW1lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzcGxpdEF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNwbGl0QXQoMikoWzEsIDIsIDMsIDQsIDVdKSwgW1sxLCAyXSwgWzMsIDQsIDVdXSlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzcGxpdEF0ID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBuID49IDEgJiYgaXNOb25FbXB0eShhcykgPyBSTkVBLnNwbGl0QXQobikoYXMpIDogaXNFbXB0eShhcykgPyBbYXMsIGVtcHR5XSA6IFtlbXB0eSwgYXNdO1xuICAgIH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYSBgUmVhZG9ubHlBcnJheWAgaW50byBsZW5ndGgtYG5gIHBpZWNlcy4gVGhlIGxhc3QgcGllY2Ugd2lsbCBiZSBzaG9ydGVyIGlmIGBuYCBkb2VzIG5vdCBldmVubHkgZGl2aWRlIHRoZSBsZW5ndGggb2ZcbiAqIHRoZSBgUmVhZG9ubHlBcnJheWAuIE5vdGUgdGhhdCBgY2h1bmtzT2YobikoW10pYCBpcyBgW11gLCBub3QgYFtbXV1gLiBUaGlzIGlzIGludGVudGlvbmFsLCBhbmQgaXMgY29uc2lzdGVudCB3aXRoIGEgcmVjdXJzaXZlXG4gKiBkZWZpbml0aW9uIG9mIGBjaHVua3NPZmA7IGl0IHNhdGlzZmllcyB0aGUgcHJvcGVydHkgdGhhdDpcbiAqXG4gKiBgYGB0c1xuICogY2h1bmtzT2YobikoeHMpLmNvbmNhdChjaHVua3NPZihuKSh5cykpID09IGNodW5rc09mKG4pKHhzLmNvbmNhdCh5cykpKVxuICogYGBgXG4gKlxuICogd2hlbmV2ZXIgYG5gIGV2ZW5seSBkaXZpZGVzIHRoZSBsZW5ndGggb2YgYGFzYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY2h1bmtzT2YgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY2h1bmtzT2YoMikoWzEsIDIsIDMsIDQsIDVdKSwgW1sxLCAyXSwgWzMsIDRdLCBbNV1dKVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGNodW5rc09mID0gZnVuY3Rpb24gKG4pIHtcbiAgICB2YXIgZiA9IFJORUEuY2h1bmtzT2Yobik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gZihhcykgOiBlbXB0eSk7IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGZyb21PcHRpb25LID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYVtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcm9tT3B0aW9uKGYuYXBwbHkodm9pZCAwLCBhKSk7XG4gICAgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gY29tcHJlaGVuc2lvbihpbnB1dCwgZiwgZykge1xuICAgIGlmIChnID09PSB2b2lkIDApIHsgZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH07IH1cbiAgICB2YXIgZ28gPSBmdW5jdGlvbiAoc2NvcGUsIGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KGlucHV0KVxuICAgICAgICAgICAgPyBmbGF0TWFwKFJORUEuaGVhZChpbnB1dCksIGZ1bmN0aW9uIChhKSB7IHJldHVybiBnbyhwaXBlKHNjb3BlLCBhcHBlbmQoYSkpLCBSTkVBLnRhaWwoaW5wdXQpKTsgfSlcbiAgICAgICAgICAgIDogZy5hcHBseSh2b2lkIDAsIHNjb3BlKSA/IFtmLmFwcGx5KHZvaWQgMCwgc2NvcGUpXVxuICAgICAgICAgICAgICAgIDogZW1wdHk7XG4gICAgfTtcbiAgICByZXR1cm4gZ28oZW1wdHksIGlucHV0KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGNvbmNhdFcgPSBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICByZXR1cm4gaXNFbXB0eShmaXJzdCkgPyBzZWNvbmQgOiBpc0VtcHR5KHNlY29uZCkgPyBmaXJzdCA6IGZpcnN0LmNvbmNhdChzZWNvbmQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgY29uY2F0ID0gY29uY2F0VztcbmV4cG9ydCBmdW5jdGlvbiB1bmlvbihFKSB7XG4gICAgdmFyIHVuaW9uRSA9IFJORUEudW5pb24oRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIGlmIChzZWNvbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHVuaW9uRV8xID0gdW5pb24oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkgeyByZXR1cm4gdW5pb25FXzEoc2Vjb25kLCBmaXJzdCk7IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkoZmlyc3QpICYmIGlzTm9uRW1wdHkoc2Vjb25kKSA/IHVuaW9uRShzZWNvbmQpKGZpcnN0KSA6IGlzTm9uRW1wdHkoZmlyc3QpID8gZmlyc3QgOiBzZWNvbmQ7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3Rpb24oRSkge1xuICAgIHZhciBlbGVtRSA9IGVsZW0oRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh4cywgeXMpIHtcbiAgICAgICAgaWYgKHlzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBpbnRlcnNlY3Rpb25FXzEgPSBpbnRlcnNlY3Rpb24oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHlzKSB7IHJldHVybiBpbnRlcnNlY3Rpb25FXzEoeXMsIHhzKTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geHMuZmlsdGVyKGZ1bmN0aW9uIChhKSB7IHJldHVybiBlbGVtRShhLCB5cyk7IH0pO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZGlmZmVyZW5jZShFKSB7XG4gICAgdmFyIGVsZW1FID0gZWxlbShFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHhzLCB5cykge1xuICAgICAgICBpZiAoeXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGRpZmZlcmVuY2VFXzEgPSBkaWZmZXJlbmNlKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh5cykgeyByZXR1cm4gZGlmZmVyZW5jZUVfMSh5cywgeHMpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4cy5maWx0ZXIoZnVuY3Rpb24gKGEpIHsgcmV0dXJuICFlbGVtRShhLCB5cyk7IH0pO1xuICAgIH07XG59XG52YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfTtcbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbnZhciBfZmlsdGVyID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgZmlsdGVyKHByZWRpY2F0ZSkpO1xufTtcbnZhciBfZmlsdGVyTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXAoZikpOyB9O1xudmFyIF9wYXJ0aXRpb24gPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb24ocHJlZGljYXRlKSk7XG59O1xudmFyIF9wYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbk1hcChmKSk7IH07XG52YXIgX3BhcnRpdGlvbldpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlV2l0aEluZGV4KSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25XaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSk7IH07XG52YXIgX3BhcnRpdGlvbk1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwV2l0aEluZGV4KGYpKTsgfTtcbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xudmFyIF9yZWR1Y2UgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZShiLCBmKSk7IH07XG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbnZhciBfcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0KGIsIGYpKTsgfTtcbnZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleChiLCBmKSk7XG59O1xudmFyIF9mb2xkTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE0gPSBmb2xkTWFwV2l0aEluZGV4KE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBXaXRoSW5kZXhNKGYpKTsgfTtcbn07XG52YXIgX3JlZHVjZVJpZ2h0V2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGYpKTtcbn07XG52YXIgX2ZpbHRlck1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyTWFwV2l0aEluZGV4KGYpKTsgfTtcbnZhciBfZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGVXaXRoSW5kZXgpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlcldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpKTsgfTtcbnZhciBfZXh0ZW5kID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBleHRlbmQoZikpOyB9O1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfdHJhdmVyc2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleEYgPSB0cmF2ZXJzZVdpdGhJbmRleChGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiBwaXBlKHRhLCB0cmF2ZXJzZVdpdGhJbmRleEYoZikpOyB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX2NoYWluUmVjRGVwdGhGaXJzdCA9IGZ1bmN0aW9uIChhLCBmKSB7IHJldHVybiBwaXBlKGEsIGNoYWluUmVjRGVwdGhGaXJzdChmKSk7IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIF9jaGFpblJlY0JyZWFkdGhGaXJzdCA9IGZ1bmN0aW9uIChhLCBmKSB7IHJldHVybiBwaXBlKGEsIGNoYWluUmVjQnJlYWR0aEZpcnN0KGYpKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgb2YgPSBSTkVBLm9mO1xuLyoqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciB6ZXJvID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZW1wdHk7IH07XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIFJBLmFsdFcoKCkgPT4gWydhJywgJ2InXSlcbiAqICAgKSxcbiAqICAgWzEsIDIsIDMsICdhJywgJ2InXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgYWx0VyA9IGZ1bmN0aW9uICh0aGF0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gZmEuY29uY2F0KHRoYXQoKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIElkZW50aWZpZXMgYW4gYXNzb2NpYXRpdmUgb3BlcmF0aW9uIG9uIGEgdHlwZSBjb25zdHJ1Y3Rvci4gSXQgaXMgc2ltaWxhciB0byBgU2VtaWdyb3VwYCwgZXhjZXB0IHRoYXQgaXQgYXBwbGllcyB0b1xuICogdHlwZXMgb2Yga2luZCBgKiAtPiAqYC5cbiAqXG4gKiBJbiBjYXNlIG9mIGBSZWFkb25seUFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIFJBLmFsdCgoKSA9PiBbNCwgNV0pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCA0LCA1XVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gYWx0Vztcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gZmxhdE1hcChmdW5jdGlvbiAoZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfSk7XG59O1xuLyoqXG4gKiBDb21wb3NlcyBjb21wdXRhdGlvbnMgaW4gc2VxdWVuY2UsIHVzaW5nIHRoZSByZXR1cm4gdmFsdWUgb2Ygb25lIGNvbXB1dGF0aW9uIHRvIGRldGVybWluZSB0aGUgbmV4dCBjb21wdXRhdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUkEgZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSQS5mbGF0TWFwKChuKSA9PiBbYGEke259YCwgYGIke259YF0pXG4gKiAgICksXG4gKiAgIFsnYTEnLCAnYjEnLCAnYTInLCAnYjInLCAnYTMnLCAnYjMnXVxuICogKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgUkEuZmxhdE1hcCgoKSA9PiBbXSlcbiAqICAgKSxcbiAqICAgW11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTQuMFxuICovXG5leHBvcnQgdmFyIGZsYXRNYXAgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgZnVuY3Rpb24gKG1hLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUobWEsIGNoYWluV2l0aEluZGV4KGZ1bmN0aW9uIChpLCBhKSB7IHJldHVybiBmKGEsIGkpOyB9KSk7XG59KTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZsYXR0ZW4gPSAvKiNfX1BVUkVfXyovIGZsYXRNYXAoaWRlbnRpdHkpO1xuLyoqXG4gKiBgbWFwYCBjYW4gYmUgdXNlZCB0byB0dXJuIGZ1bmN0aW9ucyBgKGE6IEEpID0+IEJgIGludG8gZnVuY3Rpb25zIGAoZmE6IEY8QT4pID0+IEY8Qj5gIHdob3NlIGFyZ3VtZW50IGFuZCByZXR1cm4gdHlwZXNcbiAqIHVzZSB0aGUgdHlwZSBjb25zdHJ1Y3RvciBgRmAgdG8gcmVwcmVzZW50IHNvbWUgY29tcHV0YXRpb25hbCBjb250ZXh0LlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGZhLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKTsgfSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBmYS5tYXAoZnVuY3Rpb24gKGEsIGkpIHsgcmV0dXJuIGYoaSwgYSk7IH0pO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgc2VwYXJhdGUgPSBmdW5jdGlvbiAoZmEpIHtcbiAgICB2YXIgbGVmdCA9IFtdO1xuICAgIHZhciByaWdodCA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMCwgZmFfMSA9IGZhOyBfaSA8IGZhXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBlID0gZmFfMVtfaV07XG4gICAgICAgIGlmIChlLl90YWcgPT09ICdMZWZ0Jykge1xuICAgICAgICAgICAgbGVmdC5wdXNoKGUubGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByaWdodC5wdXNoKGUucmlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLmZpbHRlcihwcmVkaWNhdGUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uQiA9IGYoaSwgZmFbaV0pO1xuICAgICAgICAgICAgaWYgKF8uaXNTb21lKG9wdGlvbkIpKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2gob3B0aW9uQi52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyTWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZmlsdGVyTWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGNvbXBhY3QgPSAvKiNfX1BVUkVfXyovIGZpbHRlck1hcChpZGVudGl0eSk7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbiA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gcGFydGl0aW9uV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBwcmVkaWNhdGUoYSk7IH0pO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIGxlZnQgPSBbXTtcbiAgICAgICAgdmFyIHJpZ2h0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBhID0gYXNbaV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlV2l0aEluZGV4KGksIGEpKSB7XG4gICAgICAgICAgICAgICAgcmlnaHQucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxlZnQucHVzaChhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gcGFydGl0aW9uTWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbk1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgbGVmdCA9IFtdO1xuICAgICAgICB2YXIgcmlnaHQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGUgPSBmKGksIGZhW2ldKTtcbiAgICAgICAgICAgIGlmIChlLl90YWcgPT09ICdMZWZ0Jykge1xuICAgICAgICAgICAgICAgIGxlZnQucHVzaChlLmxlZnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmlnaHQucHVzaChlLnJpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGFzLmZpbHRlcihmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gcHJlZGljYXRlV2l0aEluZGV4KGksIGEpOyB9KTtcbiAgICB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZXh0ZW5kID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh3YSkge1xuICAgIHJldHVybiB3YS5tYXAoZnVuY3Rpb24gKF8sIGkpIHsgcmV0dXJuIGYod2Euc2xpY2UoaSkpOyB9KTtcbn07IH07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKGlkZW50aXR5KTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZvbGRNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoTSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgICAgICByZXR1cm4gZmEucmVkdWNlKGZ1bmN0aW9uIChiLCBhLCBpKSB7IHJldHVybiBNLmNvbmNhdChiLCBmKGksIGEpKTsgfSwgTS5lbXB0eSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2UgPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiByZWR1Y2VXaXRoSW5kZXgoYiwgZnVuY3Rpb24gKF8sIGIsIGEpIHsgcmV0dXJuIGYoYiwgYSk7IH0pO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TSA9IGZvbGRNYXBXaXRoSW5kZXgoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmb2xkTWFwV2l0aEluZGV4TShmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHZhciBsZW4gPSBmYS5sZW5ndGg7XG4gICAgdmFyIG91dCA9IGI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBvdXQgPSBmKGksIG91dCwgZmFbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gcmVkdWNlUmlnaHRXaXRoSW5kZXgoYiwgZnVuY3Rpb24gKF8sIGEsIGIpIHsgcmV0dXJuIGYoYSwgYik7IH0pO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZVJpZ2h0V2l0aEluZGV4ID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBmYS5yZWR1Y2VSaWdodChmdW5jdGlvbiAoYiwgYSwgaSkgeyByZXR1cm4gZihpLCBhLCBiKTsgfSwgYik7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleEYgPSB0cmF2ZXJzZVdpdGhJbmRleChGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4RihmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgc2VxdWVuY2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHtcbiAgICAgICAgcmV0dXJuIF9yZWR1Y2UodGEsIEYub2YoemVybygpKSwgZnVuY3Rpb24gKGZhcywgZmEpIHtcbiAgICAgICAgICAgIHJldHVybiBGLmFwKEYubWFwKGZhcywgZnVuY3Rpb24gKGFzKSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gcGlwZShhcywgYXBwZW5kKGEpKTsgfTsgfSksIGZhKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiByZWR1Y2VXaXRoSW5kZXgoRi5vZih6ZXJvKCkpLCBmdW5jdGlvbiAoaSwgZmJzLCBhKSB7XG4gICAgICAgICAgICByZXR1cm4gRi5hcChGLm1hcChmYnMsIGZ1bmN0aW9uIChicykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIHBpcGUoYnMsIGFwcGVuZChiKSk7IH07IH0pLCBmKGksIGEpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpdGhlciA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aXRoZXJGID0gX3dpdGhlcihGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3dpdGhlckYoZmEsIGYpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2lsdCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aWx0RiA9IF93aWx0KEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2lsdEYoZmEsIGYpOyB9OyB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuNi42XG4gKi9cbmV4cG9ydCB2YXIgdW5mb2xkID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgdmFyIGJiID0gYjtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIG10ID0gZihiYik7XG4gICAgICAgIGlmIChfLmlzU29tZShtdCkpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IG10LnZhbHVlLCBhID0gX2FbMF0sIGJfMSA9IF9hWzFdO1xuICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICBiYiA9IGJfMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBVUkkgPSAnUmVhZG9ubHlBcnJheSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIFwiW1wiLmNvbmNhdChhcy5tYXAoUy5zaG93KS5qb2luKCcsICcpLCBcIl1cIik7IH1cbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIChpc0VtcHR5KGZpcnN0KSA/IHNlY29uZCA6IGlzRW1wdHkoc2Vjb25kKSA/IGZpcnN0IDogZmlyc3QuY29uY2F0KHNlY29uZCkpOyB9XG59KTsgfTtcbi8qKlxuICogUmV0dXJucyBhIGBNb25vaWRgIGZvciBgUmVhZG9ubHlBcnJheTxBPmAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogY29uc3QgTSA9IGdldE1vbm9pZDxudW1iZXI+KClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoWzEsIDJdLCBbMywgNF0pLCBbMSwgMiwgMywgNF0pXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TW9ub2lkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGdldFNlbWlncm91cCgpLmNvbmNhdCxcbiAgICBlbXB0eTogZW1wdHlcbn0pOyB9O1xuLyoqXG4gKiBEZXJpdmVzIGFuIGBFcWAgb3ZlciB0aGUgYFJlYWRvbmx5QXJyYXlgIG9mIGEgZ2l2ZW4gZWxlbWVudCB0eXBlIGZyb20gdGhlIGBFcWAgb2YgdGhhdCB0eXBlLiBUaGUgZGVyaXZlZCBgRXFgIGRlZmluZXMgdHdvXG4gKiBhcnJheXMgYXMgZXF1YWwgaWYgYWxsIGVsZW1lbnRzIG9mIGJvdGggYXJyYXlzIGFyZSBjb21wYXJlZCBlcXVhbCBwYWlyd2lzZSB3aXRoIHRoZSBnaXZlbiBgRWAuIEluIGNhc2Ugb2YgYXJyYXlzIG9mXG4gKiBkaWZmZXJlbnQgbGVuZ3RocywgdGhlIHJlc3VsdCBpcyBub24gZXF1YWxpdHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgZ2V0RXEgfSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICpcbiAqIGNvbnN0IEUgPSBnZXRFcShTLkVxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsnYScsICdiJ10sIFsnYScsICdiJ10pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsnYSddLCBbXSksIGZhbHNlKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGdldEVxID0gZnVuY3Rpb24gKEUpIHtcbiAgICByZXR1cm4gZnJvbUVxdWFscyhmdW5jdGlvbiAoeHMsIHlzKSB7IHJldHVybiB4cy5sZW5ndGggPT09IHlzLmxlbmd0aCAmJiB4cy5ldmVyeShmdW5jdGlvbiAoeCwgaSkgeyByZXR1cm4gRS5lcXVhbHMoeCwgeXNbaV0pOyB9KTsgfSk7XG59O1xuLyoqXG4gKiBEZXJpdmVzIGFuIGBPcmRgIG92ZXIgdGhlIGBSZWFkb25seUFycmF5YCBvZiBhIGdpdmVuIGVsZW1lbnQgdHlwZSBmcm9tIHRoZSBgT3JkYCBvZiB0aGF0IHR5cGUuIFRoZSBvcmRlcmluZyBiZXR3ZWVuIHR3byBzdWNoXG4gKiBhcnJheXMgaXMgZXF1YWwgdG86IHRoZSBmaXJzdCBub24gZXF1YWwgY29tcGFyaXNvbiBvZiBlYWNoIGFycmF5cyBlbGVtZW50cyB0YWtlbiBwYWlyd2lzZSBpbiBpbmNyZWFzaW5nIG9yZGVyLCBpblxuICogY2FzZSBvZiBlcXVhbGl0eSBvdmVyIGFsbCB0aGUgcGFpcndpc2UgZWxlbWVudHM7IHRoZSBsb25nZXN0IGFycmF5IGlzIGNvbnNpZGVyZWQgdGhlIGdyZWF0ZXN0LCBpZiBib3RoIGFycmF5cyBoYXZlXG4gKiB0aGUgc2FtZSBsZW5ndGgsIHRoZSByZXN1bHQgaXMgZXF1YWxpdHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldE9yZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBjb25zdCBPID0gZ2V0T3JkKFMuT3JkKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShbJ2InXSwgWydhJ10pLCAxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShbJ2EnXSwgWydhJ10pLCAwKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShbJ2EnXSwgWydiJ10pLCAtMSlcbiAqXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JkID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnJvbUNvbXBhcmUoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgdmFyIGFMZW4gPSBhLmxlbmd0aDtcbiAgICAgICAgdmFyIGJMZW4gPSBiLmxlbmd0aDtcbiAgICAgICAgdmFyIGxlbiA9IE1hdGgubWluKGFMZW4sIGJMZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgb3JkZXJpbmcgPSBPLmNvbXBhcmUoYVtpXSwgYltpXSk7XG4gICAgICAgICAgICBpZiAob3JkZXJpbmcgIT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JkZXJpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE4uT3JkLmNvbXBhcmUoYUxlbiwgYkxlbik7XG4gICAgfSk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VW5pb25TZW1pZ3JvdXAgPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciB1bmlvbkUgPSB1bmlvbihFKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiB1bmlvbkUoc2Vjb25kKShmaXJzdCk7IH1cbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFVuaW9uTW9ub2lkID0gZnVuY3Rpb24gKEUpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRVbmlvblNlbWlncm91cChFKS5jb25jYXQsXG4gICAgZW1wdHk6IGVtcHR5XG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldEludGVyc2VjdGlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIGludGVyc2VjdGlvbkUgPSBpbnRlcnNlY3Rpb24oRSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gaW50ZXJzZWN0aW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RGlmZmVyZW5jZU1hZ21hID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgZGlmZmVyZW5jZUUgPSBkaWZmZXJlbmNlKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGRpZmZlcmVuY2VFKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3IgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZsYXAgPSAvKiNfX1BVUkVfXyovIGZsYXBfKEZ1bmN0b3IpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgUG9pbnRlZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3JXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEFwcGx5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwXG59O1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwRmlyc3QgPSAvKiNfX1BVUkVfXyovIGFwRmlyc3RfKEFwcGx5KTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBzZWNvbmQuXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTZWNvbmQgPSAvKiNfX1BVUkVfXyovIGFwU2Vjb25kXyhBcHBseSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFwcGxpY2F0aXZlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIENoYWluID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIFJBLmNoYWluRmlyc3QoKCkgPT4gWydhJywgJ2InXSlcbiAqICAgKSxcbiAqICAgWzEsIDEsIDIsIDIsIDMsIDNdXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIFsxLCAyLCAzXSxcbiAqICAgICBSQS5jaGFpbkZpcnN0KCgpID0+IFtdKVxuICogICApLFxuICogICBbXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0ID0gXG4vKiNfX1BVUkVfXyovIGNoYWluRmlyc3RfKENoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVW5mb2xkYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICB1bmZvbGQ6IHVuZm9sZFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQWx0ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhbHQ6IF9hbHRcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBaZXJvID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHplcm86IHplcm9cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGd1YXJkID0gLyojX19QVVJFX18qLyBndWFyZF8oWmVybywgUG9pbnRlZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdGVybmF0aXZlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBhbHQ6IF9hbHQsXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRXh0ZW5kID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmRcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIENvbXBhY3RhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGaWx0ZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgcGFydGl0aW9uTWFwV2l0aEluZGV4OiBfcGFydGl0aW9uTWFwV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbldpdGhJbmRleDogX3BhcnRpdGlvbldpdGhJbmRleCxcbiAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IF9maWx0ZXJNYXBXaXRoSW5kZXgsXG4gICAgZmlsdGVyV2l0aEluZGV4OiBfZmlsdGVyV2l0aEluZGV4XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogX3RyYXZlcnNlV2l0aEluZGV4XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGNoYWluUmVjRGVwdGhGaXJzdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHZhciB0b2RvID0gX19zcHJlYWRBcnJheShbXSwgZihhKSwgdHJ1ZSk7XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgd2hpbGUgKHRvZG8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGUgPSB0b2RvLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoXy5pc0xlZnQoZSkpIHtcbiAgICAgICAgICAgICAgICB0b2RvLnVuc2hpZnQuYXBwbHkodG9kbywgZihlLmxlZnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGUucmlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpblJlY0RlcHRoRmlyc3QgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgY2hhaW5SZWM6IF9jaGFpblJlY0RlcHRoRmlyc3Rcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5SZWNCcmVhZHRoRmlyc3QgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgICB2YXIgaW5pdGlhbCA9IGYoYSk7XG4gICAgICAgIHZhciB0b2RvID0gW107XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgZnVuY3Rpb24gZ28oZSkge1xuICAgICAgICAgICAgaWYgKF8uaXNMZWZ0KGUpKSB7XG4gICAgICAgICAgICAgICAgZihlLmxlZnQpLmZvckVhY2goZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHRvZG8ucHVzaCh2KTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChlLnJpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGluaXRpYWxfMSA9IGluaXRpYWw7IF9pIDwgaW5pdGlhbF8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGUgPSBpbml0aWFsXzFbX2ldO1xuICAgICAgICAgICAgZ28oZSk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRvZG8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZ28odG9kby5zaGlmdCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgQ2hhaW5SZWNCcmVhZHRoRmlyc3QgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgY2hhaW5SZWM6IF9jaGFpblJlY0JyZWFkdGhGaXJzdFxufTtcbnZhciBfd2l0aGVyID0gLyojX19QVVJFX18qLyB3aXRoZXJEZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG52YXIgX3dpbHQgPSAvKiNfX1BVUkVfXyovIHdpbHREZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIFdpdGhlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4vKipcbiAqIEZpbHRlciB2YWx1ZXMgaW5zaWRlIGEgY29udGV4dC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICogaW1wb3J0ICogYXMgUkEgZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCAqIGFzIFQgZnJvbSAnZnAtdHMvVGFzaydcbiAqXG4gKiBjb25zdCBmaWx0ZXJFID0gUkEuZmlsdGVyRShULkFwcGxpY2F0aXZlUGFyKVxuICogYXN5bmMgZnVuY3Rpb24gdGVzdCgpIHtcbiAqICAgYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgICBhd2FpdCBwaXBlKFxuICogICAgICAgWy0xLCAyLCAzXSxcbiAqICAgICAgIGZpbHRlckUoKG4pID0+IFQub2YobiA+IDApKVxuICogICAgICkoKSxcbiAqICAgICBbMiwgM11cbiAqICAgKVxuICogfVxuICogdGVzdCgpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlckUgPSAvKiNfX1BVUkVfXyovIGZpbHRlckVfKFdpdGhlcmFibGUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgRnJvbUVpdGhlciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBmcm9tRWl0aGVyOiBmcm9tRWl0aGVyXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGZyb21FaXRoZXJLID0gLyojX19QVVJFX18qLyBmcm9tRWl0aGVyS18oRnJvbUVpdGhlcik7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1bnNhZmVcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IHVuc2FmZVxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlSW5zZXJ0QXQgPSBSTkVBLnVuc2FmZUluc2VydEF0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdW5zYWZlXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIHJldHVybiBpc05vbkVtcHR5KGFzKSA/IFJORUEudW5zYWZlVXBkYXRlQXQoaSwgYSwgYXMpIDogYXM7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdW5zYWZlXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVEZWxldGVBdCA9IGZ1bmN0aW9uIChpLCBhcykge1xuICAgIHZhciB4cyA9IGFzLnNsaWNlKCk7XG4gICAgeHMuc3BsaWNlKGksIDEpO1xuICAgIHJldHVybiB4cztcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdG9BcnJheSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMuc2xpY2UoKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tQXJyYXkgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc0VtcHR5KGFzKSA/IGVtcHR5IDogYXMuc2xpY2UoKSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBBbiBlbXB0eSBhcnJheVxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gUk5FQS5lbXB0eTtcbmV4cG9ydCBmdW5jdGlvbiBldmVyeShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5ldmVyeShwcmVkaWNhdGUpOyB9O1xufVxuLyoqXG4gKiBDaGVjayBpZiBhIHByZWRpY2F0ZSBob2xkcyB0cnVlIGZvciBhbnkgYXJyYXkgbWVtYmVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlBcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBpc1Bvc2l0aXZlID0gKG46IG51bWJlcik6IGJvb2xlYW4gPT4gbiA+IDBcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWy0xLCAtMiwgM10sIHNvbWUoaXNQb3NpdGl2ZSkpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFstMSwgLTIsIC0zXSwgc29tZShpc1Bvc2l0aXZlKSksIGZhbHNlKVxuICpcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHNvbWUgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMuc29tZShwcmVkaWNhdGUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBbGlhcyBvZiBbYHNvbWVgXSgjc29tZSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZXhpc3RzID0gc29tZTtcbi8qKlxuICogUGxhY2VzIGFuIGVsZW1lbnQgaW4gYmV0d2VlbiBtZW1iZXJzIG9mIGEgYFJlYWRvbmx5QXJyYXlgLCB0aGVuIGZvbGRzIHRoZSByZXN1bHRzIHVzaW5nIHRoZSBwcm92aWRlZCBgTW9ub2lkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBpbnRlcmNhbGF0ZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5QXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLk1vbm9pZCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGludGVyY2FsYXRlTSA9IFJORUEuaW50ZXJjYWxhdGUoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtaWRkbGUpIHsgcmV0dXJuIG1hdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIE0uZW1wdHk7IH0sIGludGVyY2FsYXRlTShtaWRkbGUpKTsgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkbyBub3RhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIERvID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVjb3JkKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kVG8gPSAvKiNfX1BVUkVfXyovIGJpbmRUb18oRnVuY3Rvcik7XG52YXIgbGV0XyA9IC8qI19fUFVSRV9fKi8gbGV0X18oRnVuY3Rvcik7XG5leHBvcnQgeyBcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMy4wXG4gKi9cbmxldF8gYXMgbGV0IH07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZCA9IC8qI19fUFVSRV9fKi8gYmluZF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGFwUyA9IC8qI19fUFVSRV9fKi8gYXBTXyhBcHBseSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBsZWdhY3lcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWxpYXMgb2YgYGZsYXRNYXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGNoYWluID0gZmxhdE1hcDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIGBSZWFkb25seU5vbkVtcHR5QXJyYXlgIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmFuZ2UgPSBSTkVBLnJhbmdlO1xuLyoqXG4gKiBVc2UgW2BwcmVwZW5kYF0oI3ByZXBlbmQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBjb25zID0gUk5FQS5jb25zO1xuLyoqXG4gKiBVc2UgW2BhcHBlbmRgXSgjYXBwZW5kKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgc25vYyA9IFJORUEuc25vYztcbi8qKlxuICogVXNlIFtgcHJlcGVuZEFsbGBdKCNwcmVwZW5kYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgUkEuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUkEucmVhZG9ubHlBcnJheWBcbiAqICh3aGVyZSBgUkFgIGlzIGZyb20gYGltcG9ydCBSQSBmcm9tICdmcC10cy9SZWFkb25seUFycmF5J2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciByZWFkb25seUFycmF5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbk1hcFdpdGhJbmRleDogX3BhcnRpdGlvbk1hcFdpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25XaXRoSW5kZXg6IF9wYXJ0aXRpb25XaXRoSW5kZXgsXG4gICAgZmlsdGVyTWFwV2l0aEluZGV4OiBfZmlsdGVyTWFwV2l0aEluZGV4LFxuICAgIGZpbHRlcldpdGhJbmRleDogX2ZpbHRlcldpdGhJbmRleCxcbiAgICBhbHQ6IF9hbHQsXG4gICAgemVybzogemVybyxcbiAgICB1bmZvbGQ6IHVuZm9sZCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleCxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogX3RyYXZlcnNlV2l0aEluZGV4LFxuICAgIGV4dGVuZDogX2V4dGVuZCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4iLAogICJpbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfLCBjaGFpbkZpcnN0IGFzIGNoYWluRmlyc3RfIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tRWl0aGVySyBhcyBmcm9tRWl0aGVyS18gfSBmcm9tICcuL0Zyb21FaXRoZXInO1xuaW1wb3J0IHsgZHVhbCwgaWRlbnRpdHksIHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCAqIGFzIE5FQSBmcm9tICcuL05vbkVtcHR5QXJyYXknO1xuaW1wb3J0ICogYXMgUkEgZnJvbSAnLi9SZWFkb25seUFycmF5JztcbmltcG9ydCB7IHNlcGFyYXRlZCB9IGZyb20gJy4vU2VwYXJhdGVkJztcbmltcG9ydCB7IGZpbHRlckUgYXMgZmlsdGVyRV8sIHdpbHREZWZhdWx0LCB3aXRoZXJEZWZhdWx0IH0gZnJvbSAnLi9XaXRoZXJhYmxlJztcbmltcG9ydCB7IGd1YXJkIGFzIGd1YXJkXyB9IGZyb20gJy4vWmVybyc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyByZWZpbmVtZW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYW4gYXJyYXkgaXMgZW1wdHlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc0VtcHR5KFtdKSwgdHJ1ZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc0VtcHR5KFsnYSddKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc0VtcHR5ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5sZW5ndGggPT09IDA7IH07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBhbiBhcnJheSBpcyBub24gZW1wdHkgbmFycm93aW5nIGRvd24gdGhlIHR5cGUgdG8gYE5vbkVtcHR5QXJyYXk8QT5gXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGlzTm9uRW1wdHkgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNOb25FbXB0eShbXSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzTm9uRW1wdHkoWydhJ10pLCB0cnVlKVxuICpcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgaXNOb25FbXB0eSA9IE5FQS5pc05vbkVtcHR5O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29uc3RydWN0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFByZXBlbmQgYW4gZWxlbWVudCB0byB0aGUgZnJvbnQgb2YgYSBgQXJyYXlgLCBjcmVhdGluZyBhIG5ldyBgTm9uRW1wdHlBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWzIsIDMsIDRdLCBwcmVwZW5kKDEpKSwgWzEsIDIsIDMsIDRdKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBwcmVwZW5kID0gTkVBLnByZXBlbmQ7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BwcmVwZW5kYF0oI3ByZXBlbmQpLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwcmVwZW5kVyB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbMiwgMywgNF0sIHByZXBlbmRXKFwiYVwiKSksIFtcImFcIiwgMiwgMywgNF0pO1xuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBwcmVwZW5kVyA9IE5FQS5wcmVwZW5kVztcbi8qKlxuICogQXBwZW5kIGFuIGVsZW1lbnQgdG8gdGhlIGVuZCBvZiBhIGBBcnJheWAsIGNyZWF0aW5nIGEgbmV3IGBOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgYXBwZW5kIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFsxLCAyLCAzXSwgYXBwZW5kKDQpKSwgWzEsIDIsIDMsIDRdKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmQgPSBORUEuYXBwZW5kO1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgYXBwZW5kYF0oI2FwcGVuZCkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGFwcGVuZFcgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWzEsIDIsIDNdLCBhcHBlbmRXKFwiZFwiKSksIFsxLCAyLCAzLCBcImRcIl0pO1xuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBhcHBlbmRXID0gTkVBLmFwcGVuZFc7XG4vKipcbiAqIFJldHVybiBhIGBBcnJheWAgb2YgbGVuZ3RoIGBuYCB3aXRoIGVsZW1lbnQgYGlgIGluaXRpYWxpemVkIHdpdGggYGYoaSlgLlxuICpcbiAqICoqTm90ZSoqLiBgbmAgaXMgbm9ybWFsaXplZCB0byBhIG5vbiBuZWdhdGl2ZSBpbnRlZ2VyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYWtlQnkgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBjb25zdCBkb3VibGUgPSAoaTogbnVtYmVyKTogbnVtYmVyID0+IGkgKiAyXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG1ha2VCeSg1LCBkb3VibGUpLCBbMCwgMiwgNCwgNiwgOF0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG1ha2VCeSgtMywgZG91YmxlKSwgW10pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG1ha2VCeSg0LjMyMTY0LCBkb3VibGUpLCBbMCwgMiwgNCwgNl0pXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWFrZUJ5ID0gZnVuY3Rpb24gKG4sIGYpIHsgcmV0dXJuIChuIDw9IDAgPyBbXSA6IE5FQS5tYWtlQnkoZikobikpOyB9O1xuLyoqXG4gKiBDcmVhdGUgYSBgQXJyYXlgIGNvbnRhaW5pbmcgYSB2YWx1ZSByZXBlYXRlZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBub24gbmVnYXRpdmUgaW50ZWdlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXBsaWNhdGUoMywgJ2EnKSwgWydhJywgJ2EnLCAnYSddKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXBsaWNhdGUoLTMsICdhJyksIFtdKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXBsaWNhdGUoMi45ODU2NDcsICdhJyksIFsnYScsICdhJ10pXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVwbGljYXRlID0gZnVuY3Rpb24gKG4sIGEpIHsgcmV0dXJuIG1ha2VCeShuLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHJlZGljYXRlKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKHByZWRpY2F0ZShhKSA/IFthXSA6IFtdKTsgfTtcbn1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnZlcnNpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIENyZWF0ZSBhbiBhcnJheSBmcm9tIGFuIGBPcHRpb25gLiBUaGUgcmVzdWx0aW5nIGFycmF5IHdpbGwgY29udGFpbiB0aGUgY29udGVudCBvZiB0aGVcbiAqIGBPcHRpb25gIGlmIGl0IGlzIGBTb21lYCBhbmQgaXQgd2lsbCBiZSBlbXB0eSBpZiB0aGUgYE9wdGlvbmAgaXMgYE5vbmVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmcm9tT3B0aW9uIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tIFwiZnAtdHNcIjtcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUob3B0aW9uLnNvbWUoXCJhXCIpLCBmcm9tT3B0aW9uKSxbXCJhXCJdKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKG9wdGlvbi5ub25lLCBmcm9tT3B0aW9uKSxbXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tT3B0aW9uID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAoXy5pc05vbmUobWEpID8gW10gOiBbbWEudmFsdWVdKTsgfTtcbi8qKlxuICogQ3JlYXRlIGFuIGFycmF5IGZyb20gYW4gYEVpdGhlcmAuIFRoZSByZXN1bHRpbmcgYXJyYXkgd2lsbCBjb250YWluIHRoZSBjb250ZW50IG9mIHRoZVxuICogYEVpdGhlcmAgaWYgaXQgaXMgYFJpZ2h0YCBhbmQgaXQgd2lsbCBiZSBlbXB0eSBpZiB0aGUgYEVpdGhlcmAgaXMgYExlZnRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmcm9tRWl0aGVyIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBlaXRoZXIgfSBmcm9tIFwiZnAtdHNcIjtcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoZWl0aGVyLnJpZ2h0KFwiclwiKSwgZnJvbUVpdGhlciksIFtcInJcIl0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKGVpdGhlci5sZWZ0KFwibFwiKSwgZnJvbUVpdGhlciksIFtdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRWl0aGVyID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIChfLmlzTGVmdChlKSA/IFtdIDogW2UucmlnaHRdKTsgfTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1hdGNoVyB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IG1hdGNoZXJXID0gbWF0Y2hXKFxuICogICAoKSA9PiBcIk5vIGVsZW1lbnRzXCIsXG4gKiAgIChhcykgPT4gYXMubGVuZ3RoXG4gKiApO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFsxLCAyLCAzLCA0XSwgbWF0Y2hlclcpLCA0KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbXSwgbWF0Y2hlclcpLCBcIk5vIGVsZW1lbnRzXCIpO1xuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hXID0gZnVuY3Rpb24gKG9uRW1wdHksIG9uTm9uRW1wdHkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KGFzKSA/IG9uTm9uRW1wdHkoYXMpIDogb25FbXB0eSgpO1xuICAgIH07XG59O1xuLyoqXG4gKiBUYWtlcyBhbiBhcnJheSwgaWYgdGhlIGFycmF5IGlzIGVtcHR5IGl0IHJldHVybnMgdGhlIHJlc3VsdCBvZiBgb25FbXB0eWAsIG90aGVyd2lzZVxuICogaXQgcGFzc2VzIHRoZSBhcnJheSB0byBgb25Ob25FbXB0eWAgYW5kIHJldHVybnMgdGhlIHJlc3VsdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWF0Y2ggfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBtYXRjaGVyID0gbWF0Y2goXG4gKiAgICgpID0+IFwiTm8gZWxlbWVudHNcIixcbiAqICAgKGFzKSA9PiBgRm91bmQgJHthcy5sZW5ndGh9IGVsZW1lbnQocylgXG4gKiApO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFsxLCAyLCAzLCA0XSwgbWF0Y2hlciksIFwiRm91bmQgNCBlbGVtZW50KHMpXCIpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFtdLCBtYXRjaGVyKSwgXCJObyBlbGVtZW50c1wiKTtcbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoID0gbWF0Y2hXO1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgbWF0Y2hMZWZ0YF0oI21hdGNobGVmdCkuIEl0IHdpbGwgd29yayB3aGVuIGBvbkVtcHR5YCBhbmRcbiAqIGBvbk5vbkVtcHR5YCBoYXZlIGRpZmZlcmVudCByZXR1cm4gdHlwZXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1hdGNoTGVmdFcgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBjb25zdCBmID0gbWF0Y2hMZWZ0VyhcbiAqICAgKCkgPT4gMCxcbiAqICAgKGhlYWQ6IHN0cmluZywgdGFpbDogc3RyaW5nW10pID0+IGBGb3VuZCBcIiR7aGVhZH1cIiBmb2xsb3dlZCBieSAke3RhaWwubGVuZ3RofSBlbGVtZW50c2BcbiAqICk7XG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoZihbXCJhXCIsIFwiYlwiLCBcImNcIl0pLCAnRm91bmQgXCJhXCIgZm9sbG93ZWQgYnkgMiBlbGVtZW50cycpO1xuICogYXNzZXJ0LnN0cmljdEVxdWFsKGYoW10pLCAwKTtcbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdFcgPSBmdW5jdGlvbiAob25FbXB0eSwgb25Ob25FbXB0eSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gb25Ob25FbXB0eShORUEuaGVhZChhcyksIE5FQS50YWlsKGFzKSkgOiBvbkVtcHR5KCk7XG4gICAgfTtcbn07XG4vKipcbiAqIFRha2VzIGFuIGFycmF5LCBpZiB0aGUgYXJyYXkgaXMgZW1wdHkgaXQgcmV0dXJucyB0aGUgcmVzdWx0IG9mIGBvbkVtcHR5YCwgb3RoZXJ3aXNlXG4gKiBpdCBwYXNzZXMgdGhlIGFycmF5IHRvIGBvbk5vbkVtcHR5YCBicm9rZW4gaW50byBpdHMgZmlyc3QgZWxlbWVudCBhbmQgcmVtYWluaW5nIGVsZW1lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYXRjaExlZnQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBjb25zdCBsZW46IDxBPihhczogQXJyYXk8QT4pID0+IG51bWJlciA9IG1hdGNoTGVmdCgoKSA9PiAwLCAoXywgdGFpbCkgPT4gMSArIGxlbih0YWlsKSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChsZW4oWzEsIDIsIDNdKSwgMylcbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoTGVmdCA9IG1hdGNoTGVmdFc7XG4vKipcbiAqIEFsaWFzIG9mIFtgbWF0Y2hMZWZ0YF0oI21hdGNobGVmdCkuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZvbGRMZWZ0ID0gbWF0Y2hMZWZ0O1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgbWF0Y2hSaWdodGBdKCNtYXRjaHJpZ2h0KS4gSXQgd2lsbCB3b3JrIHdoZW4gYG9uRW1wdHlgIGFuZFxuICogYG9uTm9uRW1wdHlgIGhhdmUgZGlmZmVyZW50IHJldHVybiB0eXBlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWF0Y2hSaWdodFcgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBjb25zdCBmID0gbWF0Y2hSaWdodFcoXG4gKiAgICgpID0+IDAsXG4gKiAgIChoZWFkOiBzdHJpbmdbXSwgdGFpbDogc3RyaW5nKSA9PiBgRm91bmQgJHtoZWFkLmxlbmd0aH0gZWxlbWVudHMgZm9sbGxvd2VkIGJ5IFwiJHt0YWlsfVwiYFxuICogKTtcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChmKFtcImFcIiwgXCJiXCIsIFwiY1wiXSksICdGb3VuZCAyIGVsZW1lbnRzIGZvbGxsb3dlZCBieSBcImNcIicpO1xuICogYXNzZXJ0LnN0cmljdEVxdWFsKGYoW10pLCAwKTtcbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoUmlnaHRXID0gZnVuY3Rpb24gKG9uRW1wdHksIG9uTm9uRW1wdHkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KGFzKSA/IG9uTm9uRW1wdHkoTkVBLmluaXQoYXMpLCBORUEubGFzdChhcykpIDogb25FbXB0eSgpO1xuICAgIH07XG59O1xuLyoqXG4gKiBUYWtlcyBhbiBhcnJheSwgaWYgdGhlIGFycmF5IGlzIGVtcHR5IGl0IHJldHVybnMgdGhlIHJlc3VsdCBvZiBgb25FbXB0eWAsIG90aGVyd2lzZVxuICogaXQgcGFzc2VzIHRoZSBhcnJheSB0byBgb25Ob25FbXB0eWAgYnJva2VuICBpbnRvIGl0cyBpbml0aWFsIGVsZW1lbnRzIGFuZCB0aGUgbGFzdCBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYXRjaFJpZ2h0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogY29uc3QgbGVuOiA8QT4oYXM6IEFycmF5PEE+KSA9PiBudW1iZXIgPSBtYXRjaFJpZ2h0KFxuICogICAoKSA9PiAwLFxuICogICAoaGVhZCwgXykgPT4gMSArIGxlbihoZWFkKVxuICogKTtcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChsZW4oWzEsIDIsIDNdKSwgMyk7XG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaFJpZ2h0ID0gbWF0Y2hSaWdodFc7XG4vKipcbiAqIEFsaWFzIG9mIFtgbWF0Y2hSaWdodGBdKCNtYXRjaHJpZ2h0KS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZFJpZ2h0ID0gbWF0Y2hSaWdodDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbWJpbmF0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFNhbWUgYXMgW2BjaGFpbmBdKCNjaGFpbiksIGJ1dCBwYXNzaW5nIGFsc28gdGhlIGluZGV4IHRvIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGNoYWluV2l0aEluZGV4LCByZXBsaWNhdGUgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBmID0gKGluZGV4OiBudW1iZXIsIHg6IHN0cmluZykgPT4gcmVwbGljYXRlKDIsIGAke3h9JHtpbmRleH1gKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbXCJhXCIsIFwiYlwiLCBcImNcIl0sIGNoYWluV2l0aEluZGV4KGYpKSwgW1wiYTBcIiwgXCJhMFwiLCBcImIxXCIsIFwiYjFcIiwgXCJjMlwiLCBcImMyXCJdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5XaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaC5hcHBseShvdXQsIGYoaSwgYXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBTYW1lIGFzIGByZWR1Y2VgIGJ1dCBpdCBjYXJyaWVzIG92ZXIgdGhlIGludGVybWVkaWF0ZSBzdGVwc1xuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzY2FuTGVmdCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2NhbkxlZnQoMTAsIChiLCBhOiBudW1iZXIpID0+IGIgLSBhKShbMSwgMiwgM10pLCBbMTAsIDksIDcsIDRdKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNjYW5MZWZ0ID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBsZW4gPSBhcy5sZW5ndGg7XG4gICAgICAgIHZhciBvdXQgPSBuZXcgQXJyYXkobGVuICsgMSk7XG4gICAgICAgIG91dFswXSA9IGI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIG91dFtpICsgMV0gPSBmKG91dFtpXSwgYXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIEZvbGQgYW4gYXJyYXkgZnJvbSB0aGUgcmlnaHQsIGtlZXBpbmcgYWxsIGludGVybWVkaWF0ZSByZXN1bHRzIGluc3RlYWQgb2Ygb25seSB0aGUgZmluYWwgcmVzdWx0XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNjYW5SaWdodCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2NhblJpZ2h0KDEwLCAoYTogbnVtYmVyLCBiKSA9PiBiIC0gYSkoWzEsIDIsIDNdKSwgWzQsIDUsIDcsIDEwXSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzY2FuUmlnaHQgPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIGxlbiA9IGFzLmxlbmd0aDtcbiAgICAgICAgdmFyIG91dCA9IG5ldyBBcnJheShsZW4gKyAxKTtcbiAgICAgICAgb3V0W2xlbl0gPSBiO1xuICAgICAgICBmb3IgKHZhciBpID0gbGVuIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIG91dFtpXSA9IGYoYXNbaV0sIG91dFtpICsgMV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIGEgYEFycmF5YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2l6ZSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChzaXplKFtcImFcIixcImJcIixcImNcIl0pLDMpXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHNpemUgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzLmxlbmd0aDsgfTtcbi8qKlxuICogVGVzdCB3aGV0aGVyIGFuIGFycmF5IGNvbnRhaW5zIGEgcGFydGljdWxhciBpbmRleFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpc091dE9mQm91bmQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNPdXRPZkJvdW5kKDEsW1wiYVwiLFwiYlwiLFwiY1wiXSksZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNPdXRPZkJvdW5kKC0xLFtcImFcIixcImJcIixcImNcIl0pLHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNPdXRPZkJvdW5kKDMsW1wiYVwiLFwiYlwiLFwiY1wiXSksdHJ1ZSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc091dE9mQm91bmQgPSBORUEuaXNPdXRPZkJvdW5kO1xuLy8gVE9ETzogcmVtb3ZlIG5vbi1jdXJyaWVkIG92ZXJsb2FkaW5nIGluIHYzXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gcHJvdmlkZXMgYSBzYWZlIHdheSB0byByZWFkIGEgdmFsdWUgYXQgYSBwYXJ0aWN1bGFyIGluZGV4IGZyb20gYW4gYXJyYXkuXG4gKiBJdCByZXR1cm5zIGEgYG5vbmVgIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzLCBhbmQgYSBgc29tZWAgb2YgdGhlIGVsZW1lbnQgaWYgdGhlXG4gKiBpbmRleCBpcyB2YWxpZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbG9va3VwIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbMSwgMiwgM10sIGxvb2t1cCgxKSksIHNvbWUoMikpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWzEsIDIsIDNdLCBsb29rdXAoMykpLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGxvb2t1cCA9IFJBLmxvb2t1cDtcbi8qKlxuICogR2V0IHRoZSBmaXJzdCBlbGVtZW50IGluIGFuIGFycmF5LCBvciBgTm9uZWAgaWYgdGhlIGFycmF5IGlzIGVtcHR5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGhlYWQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChoZWFkKFsxLCAyLCAzXSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGhlYWQoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGhlYWQgPSBSQS5oZWFkO1xuLyoqXG4gKiBHZXQgdGhlIGxhc3QgZWxlbWVudCBpbiBhbiBhcnJheSwgb3IgYE5vbmVgIGlmIHRoZSBhcnJheSBpcyBlbXB0eVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBsYXN0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobGFzdChbMSwgMiwgM10pLCBzb21lKDMpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChsYXN0KFtdKSwgbm9uZSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBsYXN0ID0gUkEubGFzdDtcbi8qKlxuICogR2V0IGFsbCBidXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXksIGNyZWF0aW5nIGEgbmV3IGFycmF5LCBvciBgTm9uZWAgaWYgdGhlIGFycmF5IGlzIGVtcHR5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHRhaWwgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWlsKFsxLCAyLCAzXSksIHNvbWUoWzIsIDNdKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodGFpbChbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdGFpbCA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKE5FQS50YWlsKGFzKSkgOiBfLm5vbmUpOyB9O1xuLyoqXG4gKiBHZXQgYWxsIGJ1dCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LCBjcmVhdGluZyBhIG5ldyBhcnJheSwgb3IgYE5vbmVgIGlmIHRoZSBhcnJheSBpcyBlbXB0eVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbml0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbMSwgMiwgM10pLCBzb21lKFsxLCAyXSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGluaXQoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGluaXQgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc05vbkVtcHR5KGFzKSA/IF8uc29tZShORUEuaW5pdChhcykpIDogXy5ub25lKTsgfTtcbi8qKlxuICogS2VlcCBvbmx5IGEgbWF4IG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZiBhbiBgQXJyYXlgLCBjcmVhdGluZyBhIG5ldyBgQXJyYXlgLlxuICpcbiAqICoqTm90ZSoqLiBgbmAgaXMgbm9ybWFsaXplZCB0byBhIG5vbiBuZWdhdGl2ZSBpbnRlZ2VyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB0YWtlTGVmdCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodGFrZUxlZnQoMikoWzEsIDIsIDMsIDQsIDVdKSwgWzEsIDJdKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodGFrZUxlZnQoNykoWzEsIDIsIDMsIDQsIDVdKSwgWzEsIDIsIDMsIDQsIDVdKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodGFrZUxlZnQoMCkoWzEsIDIsIDMsIDQsIDVdKSwgW10pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWtlTGVmdCgtMSkoWzEsIDIsIDMsIDQsIDVdKSwgWzEsIDIsIDMsIDQsIDVdKTtcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0YWtlTGVmdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gaXNPdXRPZkJvdW5kKG4sIGFzKSA/IGNvcHkoYXMpIDogYXMuc2xpY2UoMCwgbik7XG4gICAgfTtcbn07XG4vKipcbiAqIEtlZXAgb25seSBhIG1heCBudW1iZXIgb2YgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIGFuIGBBcnJheWAsIGNyZWF0aW5nIGEgbmV3IGBBcnJheWAuXG4gKlxuICogKipOb3RlKiouIGBuYCBpcyBub3JtYWxpemVkIHRvIGEgbm9uIG5lZ2F0aXZlIGludGVnZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHRha2VSaWdodCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodGFrZVJpZ2h0KDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1XSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRha2VSaWdodCg3KShbMSwgMiwgMywgNCwgNV0pLCBbMSwgMiwgMywgNCwgNV0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWtlUmlnaHQoMCkoWzEsIDIsIDMsIDQsIDVdKSwgW10pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWtlUmlnaHQoLTEpKFsxLCAyLCAzLCA0LCA1XSksIFsxLCAyLCAzLCA0LCA1XSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdGFrZVJpZ2h0ID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpc091dE9mQm91bmQobiwgYXMpID8gY29weShhcykgOiBuID09PSAwID8gW10gOiBhcy5zbGljZSgtbik7XG4gICAgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gdGFrZUxlZnRXaGlsZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBhc18xID0gYXM7IF9pIDwgYXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBhID0gYXNfMVtfaV07XG4gICAgICAgICAgICBpZiAoIXByZWRpY2F0ZShhKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxudmFyIHNwYW5MZWZ0SW5kZXggPSBmdW5jdGlvbiAoYXMsIHByZWRpY2F0ZSkge1xuICAgIHZhciBsID0gYXMubGVuZ3RoO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoIXByZWRpY2F0ZShhc1tpXSkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBzcGFuTGVmdChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBfYSA9IHNwbGl0QXQoc3BhbkxlZnRJbmRleChhcywgcHJlZGljYXRlKSkoYXMpLCBpbml0ID0gX2FbMF0sIHJlc3QgPSBfYVsxXTtcbiAgICAgICAgcmV0dXJuIHsgaW5pdDogaW5pdCwgcmVzdDogcmVzdCB9O1xuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYEFycmF5YCB3aGljaCBpcyBhIGNvcHkgb2YgdGhlIGlucHV0IGRyb3BwaW5nIGEgbWF4IG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBzdGFydC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBub24gbmVnYXRpdmUgaW50ZWdlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZHJvcExlZnQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRyb3BMZWZ0KDIpKFsxLCAyLCAzXSksIFszXSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRyb3BMZWZ0KDUpKFsxLCAyLCAzXSksIFtdKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZHJvcExlZnQoMCkoWzEsIDIsIDNdKSwgWzEsIDIsIDNdKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZHJvcExlZnQoLTIpKFsxLCAyLCAzXSksIFsxLCAyLCAzXSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZHJvcExlZnQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIG4gPD0gMCB8fCBpc0VtcHR5KGFzKSA/IGNvcHkoYXMpIDogbiA+PSBhcy5sZW5ndGggPyBbXSA6IGFzLnNsaWNlKG4sIGFzLmxlbmd0aCk7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYEFycmF5YCB3aGljaCBpcyBhIGNvcHkgb2YgdGhlIGlucHV0IGRyb3BwaW5nIGEgbWF4IG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBlbmQuXG4gKlxuICogKipOb3RlKiouIGBuYCBpcyBub3JtYWxpemVkIHRvIGEgbm9uIG5lZ2F0aXZlIGludGVnZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGRyb3BSaWdodCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZHJvcFJpZ2h0KDIpKFsxLCAyLCAzXSksIFsxXSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRyb3BSaWdodCg1KShbMSwgMiwgM10pLCBbXSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRyb3BSaWdodCgwKShbMSwgMiwgM10pLCBbMSwgMiwgM10pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkcm9wUmlnaHQoLTIpKFsxLCAyLCAzXSksIFsxLCAyLCAzXSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZHJvcFJpZ2h0ID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBuIDw9IDAgfHwgaXNFbXB0eShhcykgPyBjb3B5KGFzKSA6IG4gPj0gYXMubGVuZ3RoID8gW10gOiBhcy5zbGljZSgwLCBhcy5sZW5ndGggLSBuKTtcbiAgICB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBkcm9wTGVmdFdoaWxlKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzLnNsaWNlKHNwYW5MZWZ0SW5kZXgoYXMsIHByZWRpY2F0ZSkpOyB9O1xufVxuLyoqXG4gKiBgZmluZEluZGV4YCByZXR1cm5zIGFuIGBPcHRpb25gIGNvbnRhaW5pbmcgdGhlIGZpcnN0IGluZGV4IGZvciB3aGljaCBhIHByZWRpY2F0ZSBob2xkcy5cbiAqIEl0IHJldHVybnMgYE5vbmVgIGlmIG5vIGVsZW1lbnQgc2F0aXNmaWVzIHRoZSBwcmVkaWNhdGUuXG4gKiBTaW1pbGFyIHRvIFtgZmluZEZpcnN0YF0oI2ZpbmRGaXJzdCkgYnV0IHJldHVybmluZyB0aGUgaW5kZXggaW5zdGVhZCBvZiB0aGUgZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmluZEluZGV4IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmluZEluZGV4KChuOiBudW1iZXIpID0+IG4gPT09IDIpKFsxLCAyLCAzXSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRJbmRleCgobjogbnVtYmVyKSA9PiBuID09PSAyKShbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmluZEluZGV4ID0gUkEuZmluZEluZGV4O1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRGaXJzdChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gUkEuZmluZEZpcnN0KHByZWRpY2F0ZSk7XG59XG4vKipcbiAqIEdpdmVuIGEgc2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggdGFrZXMgYW4gZWxlbWVudCBhbmQgcmV0dXJucyBhbiBvcHRpb24sXG4gKiB0aGlzIGZ1bmN0aW9uIGFwcGxpZXMgdGhlIHNlbGVjdG9yIHRvIGVhY2ggZWxlbWVudCBvZiB0aGUgYXJyYXkgYW5kXG4gKiByZXR1cm5zIHRoZSBmaXJzdCBgU29tZWAgcmVzdWx0LiBPdGhlcndpc2UgaXQgcmV0dXJucyBgTm9uZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZpbmRGaXJzdE1hcCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgUGVyc29uIHtcbiAqICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICogICByZWFkb25seSBhZ2U6IG51bWJlcjtcbiAqIH1cbiAqXG4gKiBjb25zdCBwZXJzb25zOiBBcnJheTxQZXJzb24+ID0gW1xuICogICB7IG5hbWU6IFwiSm9oblwiLCBhZ2U6IDE2IH0sXG4gKiAgIHsgbmFtZTogXCJNYXJ5XCIsIGFnZTogNDUgfSxcbiAqICAgeyBuYW1lOiBcIkpvZXlcIiwgYWdlOiAyOCB9LFxuICogXTtcbiAqXG4gKiBjb25zdCBuYW1lT2ZQZXJzb25BYm92ZTE4ID0gKHA6IFBlcnNvbikgPT4gKHAuYWdlIDw9IDE4ID8gbm9uZSA6IHNvbWUocC5uYW1lKSk7XG4gKiBjb25zdCBuYW1lT2ZQZXJzb25BYm92ZTcwID0gKHA6IFBlcnNvbikgPT4gKHAuYWdlIDw9IDcwID8gbm9uZSA6IHNvbWUocC5uYW1lKSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRGaXJzdE1hcChuYW1lT2ZQZXJzb25BYm92ZTE4KShwZXJzb25zKSwgc29tZShcIk1hcnlcIikpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kRmlyc3RNYXAobmFtZU9mUGVyc29uQWJvdmU3MCkocGVyc29ucyksIG5vbmUpO1xuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZpbmRGaXJzdE1hcCA9IFJBLmZpbmRGaXJzdE1hcDtcbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGFzdChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gUkEuZmluZExhc3QocHJlZGljYXRlKTtcbn1cbi8qKlxuICogR2l2ZW4gYSBzZWxlY3RvciBmdW5jdGlvbiB3aGljaCB0YWtlcyBhbiBlbGVtZW50IGFuZCByZXR1cm5zIGFuIG9wdGlvbixcbiAqIHRoaXMgZnVuY3Rpb24gYXBwbGllcyB0aGUgc2VsZWN0b3IgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSBzdGFydGluZyBmcm9tIHRoZVxuICogZW5kIGFuZCByZXR1cm5zIHRoZSBsYXN0IGBTb21lYCByZXN1bHQuIE90aGVyd2lzZSBpdCByZXR1cm5zIGBOb25lYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmluZExhc3RNYXAgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogaW50ZXJmYWNlIFBlcnNvbiB7XG4gKiAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbiAqICAgcmVhZG9ubHkgYWdlOiBudW1iZXI7XG4gKiB9XG4gKlxuICogY29uc3QgcGVyc29uczogQXJyYXk8UGVyc29uPiA9IFtcbiAqICAgeyBuYW1lOiBcIkpvaG5cIiwgYWdlOiAxNiB9LFxuICogICB7IG5hbWU6IFwiTWFyeVwiLCBhZ2U6IDQ1IH0sXG4gKiAgIHsgbmFtZTogXCJKb2V5XCIsIGFnZTogMjggfSxcbiAqIF07XG4gKlxuICogY29uc3QgbmFtZU9mUGVyc29uQWJvdmUxOCA9IChwOiBQZXJzb24pID0+IChwLmFnZSA8PSAxOCA/IG5vbmUgOiBzb21lKHAubmFtZSkpO1xuICogY29uc3QgbmFtZU9mUGVyc29uQWJvdmU3MCA9IChwOiBQZXJzb24pID0+IChwLmFnZSA8PSA3MCA/IG5vbmUgOiBzb21lKHAubmFtZSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kTGFzdE1hcChuYW1lT2ZQZXJzb25BYm92ZTE4KShwZXJzb25zKSwgc29tZShcIkpvZXlcIikpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kTGFzdE1hcChuYW1lT2ZQZXJzb25BYm92ZTcwKShwZXJzb25zKSwgbm9uZSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmluZExhc3RNYXAgPSBSQS5maW5kTGFzdE1hcDtcbi8qKlxuICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgbGlzdCB3aGljaCBtYXRjaGVzIHRoZSBwcmVkaWNhdGUuXG4gKiBJdCByZXR1cm5zIGFuIGBPcHRpb25gIGNvbnRhaW5pbmcgdGhlIGluZGV4IG9yIGBOb25lYCBpZiBub3QgZm91bmQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZpbmRMYXN0SW5kZXggfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogaW50ZXJmYWNlIFgge1xuICogICByZWFkb25seSBhOiBudW1iZXJcbiAqICAgcmVhZG9ubHkgYjogbnVtYmVyXG4gKiB9XG4gKiBjb25zdCB4czogQXJyYXk8WD4gPSBbeyBhOiAxLCBiOiAwIH0sIHsgYTogMSwgYjogMSB9XVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kTGFzdEluZGV4KCh4OiB7IHJlYWRvbmx5IGE6IG51bWJlciB9KSA9PiB4LmEgPT09IDEpKHhzKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmluZExhc3RJbmRleCgoeDogeyByZWFkb25seSBhOiBudW1iZXIgfSkgPT4geC5hID09PSA0KSh4cyksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmluZExhc3RJbmRleCA9IFJBLmZpbmRMYXN0SW5kZXg7XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYW4gYXJyYXkgYW5kIG1ha2VzIGEgbmV3IGFycmF5IGNvbnRhaW5pbmcgdGhlIHNhbWUgZWxlbWVudHMuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29weSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMuc2xpY2UoKTsgfTtcbi8qKlxuICogSW5zZXJ0IGFuIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleCwgY3JlYXRpbmcgYSBuZXcgYXJyYXksXG4gKiBvciByZXR1cm5pbmcgYE5vbmVgIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnNlcnRBdCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGluc2VydEF0KDIsIDUpKFsxLCAyLCAzLCA0XSksIHNvbWUoWzEsIDIsIDUsIDMsIDRdKSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpbnNlcnRBdCA9IGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gaSA8IDAgfHwgaSA+IGFzLmxlbmd0aCA/IF8ubm9uZSA6IF8uc29tZSh1bnNhZmVJbnNlcnRBdChpLCBhLCBhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBDaGFuZ2UgdGhlIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleCwgY3JlYXRpbmcgYSBuZXcgYXJyYXksXG4gKiBvciByZXR1cm5pbmcgYE5vbmVgIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1cGRhdGVBdCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwZGF0ZUF0KDEsIDEpKFsxLCAyLCAzXSksIHNvbWUoWzEsIDEsIDNdKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBkYXRlQXQoMSwgMSkoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUF0ID0gZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIG1vZGlmeUF0KGksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuLyoqXG4gKiBEZWxldGUgdGhlIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleCwgY3JlYXRpbmcgYSBuZXcgYXJyYXksIG9yIHJldHVybmluZyBgTm9uZWAgaWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGRlbGV0ZUF0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZGVsZXRlQXQoMCkoWzEsIDIsIDNdKSwgc29tZShbMiwgM10pKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkZWxldGVBdCgxKShbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZGVsZXRlQXQgPSBmdW5jdGlvbiAoaSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlRGVsZXRlQXQoaSwgYXMpKTtcbiAgICB9O1xufTtcbi8qKlxuICogQXBwbHkgYSBmdW5jdGlvbiB0byB0aGUgZWxlbWVudCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LCBjcmVhdGluZyBhIG5ldyBhcnJheSwgb3IgcmV0dXJuaW5nIGBOb25lYCBpZiB0aGUgaW5kZXggaXMgb3V0XG4gKiBvZiBib3VuZHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1vZGlmeUF0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9ICh4OiBudW1iZXIpOiBudW1iZXIgPT4geCAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobW9kaWZ5QXQoMSwgZG91YmxlKShbMSwgMiwgM10pLCBzb21lKFsxLCA0LCAzXSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG1vZGlmeUF0KDEsIGRvdWJsZSkoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1vZGlmeUF0ID0gZnVuY3Rpb24gKGksIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpc091dE9mQm91bmQoaSwgYXMpID8gXy5ub25lIDogXy5zb21lKHVuc2FmZVVwZGF0ZUF0KGksIGYoYXNbaV0pLCBhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBSZXZlcnNlIGFuIGFycmF5LCBjcmVhdGluZyBhIG5ldyBhcnJheVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXZlcnNlIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXZlcnNlKFsxLCAyLCAzXSksIFszLCAyLCAxXSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZXZlcnNlID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNFbXB0eShhcykgPyBbXSA6IGFzLnNsaWNlKCkucmV2ZXJzZSgpKTsgfTtcbi8qKlxuICogVGFrZXMgYW4gYEFycmF5YCBvZiBgRWl0aGVyYCBhbmQgcHJvZHVjZXMgYSBuZXcgYEFycmF5YCBjb250YWluaW5nXG4gKiB0aGUgdmFsdWVzIG9mIGFsbCB0aGUgYFJpZ2h0YCBlbGVtZW50cyBpbiB0aGUgc2FtZSBvcmRlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmlnaHRzIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyByaWdodCwgbGVmdCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJpZ2h0cyhbcmlnaHQoMSksIGxlZnQoJ2ZvbycpLCByaWdodCgyKV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmlnaHRzID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgdmFyIHIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhID0gYXNbaV07XG4gICAgICAgIGlmIChhLl90YWcgPT09ICdSaWdodCcpIHtcbiAgICAgICAgICAgIHIucHVzaChhLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcjtcbn07XG4vKipcbiAqIFRha2VzIGFuIGBBcnJheWAgb2YgYEVpdGhlcmAgYW5kIHByb2R1Y2VzIGEgbmV3IGBBcnJheWAgY29udGFpbmluZ1xuICogdGhlIHZhbHVlcyBvZiBhbGwgdGhlIGBMZWZ0YCBlbGVtZW50cyBpbiB0aGUgc2FtZSBvcmRlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbGVmdHMgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IGxlZnQsIHJpZ2h0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobGVmdHMoW3JpZ2h0KDEpLCBsZWZ0KCdmb28nKSwgcmlnaHQoMildKSwgWydmb28nXSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBsZWZ0cyA9IGZ1bmN0aW9uIChhcykge1xuICAgIHZhciByID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYSA9IGFzW2ldO1xuICAgICAgICBpZiAoYS5fdGFnID09PSAnTGVmdCcpIHtcbiAgICAgICAgICAgIHIucHVzaChhLmxlZnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByO1xufTtcbi8qKlxuICogU29ydCB0aGUgZWxlbWVudHMgb2YgYW4gYXJyYXkgaW4gaW5jcmVhc2luZyBvcmRlciwgY3JlYXRpbmcgYSBuZXcgYXJyYXlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29ydCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb3J0KE4uT3JkKShbMywgMiwgMV0pLCBbMSwgMiwgM10pXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc29ydCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMubGVuZ3RoIDw9IDEgPyBjb3B5KGFzKSA6IGFzLnNsaWNlKCkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHBhaXJzIG9mIGVsZW1lbnRzIGF0IHRoZSBzYW1lIGluZGV4IGluIHR3byBhcnJheXMsIGNvbGxlY3RpbmcgdGhlIHJlc3VsdHMgaW4gYSBuZXcgYXJyYXkuIElmIG9uZVxuICogaW5wdXQgYXJyYXkgaXMgc2hvcnQsIGV4Y2VzcyBlbGVtZW50cyBvZiB0aGUgbG9uZ2VyIGFycmF5IGFyZSBkaXNjYXJkZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHppcFdpdGggfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHppcFdpdGgoWzEsIDIsIDNdLCBbJ2EnLCAnYicsICdjJywgJ2QnXSwgKG4sIHMpID0+IHMgKyBuKSwgWydhMScsICdiMicsICdjMyddKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHppcFdpdGggPSBmdW5jdGlvbiAoZmEsIGZiLCBmKSB7XG4gICAgdmFyIGZjID0gW107XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKGZhLmxlbmd0aCwgZmIubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGZjW2ldID0gZihmYVtpXSwgZmJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZmM7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChhcywgYnMpIHtcbiAgICBpZiAoYnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJzKSB7IHJldHVybiB6aXAoYnMsIGFzKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHppcFdpdGgoYXMsIGJzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gW2EsIGJdOyB9KTtcbn1cbi8qKlxuICogVGhlIGZ1bmN0aW9uIGlzIHJldmVyc2Ugb2YgYHppcGAuIFRha2VzIGFuIGFycmF5IG9mIHBhaXJzIGFuZCByZXR1cm4gdHdvIGNvcnJlc3BvbmRpbmcgYXJyYXlzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuemlwIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bnppcChbWzEsICdhJ10sIFsyLCAnYiddLCBbMywgJ2MnXV0pLCBbWzEsIDIsIDNdLCBbJ2EnLCAnYicsICdjJ11dKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHVuemlwID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgdmFyIGZhID0gW107XG4gICAgdmFyIGZiID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmYVtpXSA9IGFzW2ldWzBdO1xuICAgICAgICBmYltpXSA9IGFzW2ldWzFdO1xuICAgIH1cbiAgICByZXR1cm4gW2ZhLCBmYl07XG59O1xuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBBcnJheWAsIHByZXBlbmRpbmcgYW4gZWxlbWVudCB0byBldmVyeSBtZW1iZXIgb2YgdGhlIGlucHV0IGBBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRBbGwgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHByZXBlbmRBbGwoOSkoWzEsIDIsIDMsIDRdKSwgWzksIDEsIDksIDIsIDksIDMsIDksIDRdKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBwcmVwZW5kQWxsID0gZnVuY3Rpb24gKG1pZGRsZSkge1xuICAgIHZhciBmID0gTkVBLnByZXBlbmRBbGwobWlkZGxlKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IFtdKTsgfTtcbn07XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYEFycmF5YCBwbGFjaW5nIGFuIGVsZW1lbnQgaW4gYmV0d2VlbiBtZW1iZXJzIG9mIHRoZSBpbnB1dCBgQXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNwZXJzZSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW50ZXJzcGVyc2UoOSkoWzEsIDIsIDMsIDRdKSwgWzEsIDksIDIsIDksIDMsIDksIDRdKVxuICpcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGludGVyc3BlcnNlID0gZnVuY3Rpb24gKG1pZGRsZSkge1xuICAgIHZhciBmID0gTkVBLmludGVyc3BlcnNlKG1pZGRsZSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gZihhcykgOiBjb3B5KGFzKSk7IH07XG59O1xuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBBcnJheWAgcm90YXRpbmcgdGhlIGlucHV0IGBBcnJheWAgYnkgYG5gIHN0ZXBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByb3RhdGUgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJvdGF0ZSgyKShbMSwgMiwgMywgNCwgNV0pLCBbNCwgNSwgMSwgMiwgM10pXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcm90YXRlID0gZnVuY3Rpb24gKG4pIHtcbiAgICB2YXIgZiA9IE5FQS5yb3RhdGUobik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gZihhcykgOiBjb3B5KGFzKSk7IH07XG59O1xuLy8gVE9ETzogcmVtb3ZlIG5vbi1jdXJyaWVkIG92ZXJsb2FkaW5nIGluIHYzXG4vKipcbiAqIFRlc3QgaWYgYSB2YWx1ZSBpcyBhIG1lbWJlciBvZiBhbiBgQXJyYXlgLiBUYWtlcyBhIGBFcTxBPmAgYXMgYSBzaW5nbGVcbiAqIGFyZ3VtZW50IHdoaWNoIHJldHVybnMgdGhlIGZ1bmN0aW9uIHRvIHVzZSB0byBzZWFyY2ggZm9yIGEgdmFsdWUgb2YgdHlwZSBgQWAgaW5cbiAqIGFuIGBBcnJheTxBPmAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGVsZW0gfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChwaXBlKFsxLCAyLCAzXSwgZWxlbShOLkVxKSgyKSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwocGlwZShbMSwgMiwgM10sIGVsZW0oTi5FcSkoMCkpLCBmYWxzZSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBlbGVtID0gUkEuZWxlbTtcbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgQXJyYXlgIHJlbW92aW5nIGR1cGxpY2F0ZSBlbGVtZW50cywga2VlcGluZyB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBlbGVtZW50LFxuICogYmFzZWQgb24gYSBgRXE8QT5gLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1bmlxIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuaXEoTi5FcSkoWzEsIDIsIDFdKSwgWzEsIDJdKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHVuaXEgPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciBmID0gTkVBLnVuaXEoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gZihhcykgOiBjb3B5KGFzKSk7IH07XG59O1xuLyoqXG4gKiBTb3J0IHRoZSBlbGVtZW50cyBvZiBhbiBhcnJheSBpbiBpbmNyZWFzaW5nIG9yZGVyLCB3aGVyZSBlbGVtZW50cyBhcmUgY29tcGFyZWQgdXNpbmcgZmlyc3QgYG9yZHNbMF1gLCB0aGVuIGBvcmRzWzFdYCxcbiAqIGV0Yy4uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IGNvbnRyYW1hcCB9IGZyb20gJ2ZwLXRzL09yZCdcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogaW50ZXJmYWNlIFBlcnNvbiB7XG4gKiAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZ1xuICogICByZWFkb25seSBhZ2U6IG51bWJlclxuICogfVxuICogY29uc3QgYnlOYW1lID0gcGlwZShTLk9yZCwgY29udHJhbWFwKChwOiBQZXJzb24pID0+IHAubmFtZSkpXG4gKiBjb25zdCBieUFnZSA9IHBpcGUoTi5PcmQsIGNvbnRyYW1hcCgocDogUGVyc29uKSA9PiBwLmFnZSkpXG4gKlxuICogY29uc3Qgc29ydEJ5TmFtZUJ5QWdlID0gc29ydEJ5KFtieU5hbWUsIGJ5QWdlXSlcbiAqXG4gKiBjb25zdCBwZXJzb25zID0gW3sgbmFtZTogJ2EnLCBhZ2U6IDEgfSwgeyBuYW1lOiAnYicsIGFnZTogMyB9LCB7IG5hbWU6ICdjJywgYWdlOiAyIH0sIHsgbmFtZTogJ2InLCBhZ2U6IDIgfV1cbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29ydEJ5TmFtZUJ5QWdlKHBlcnNvbnMpLCBbXG4gKiAgIHsgbmFtZTogJ2EnLCBhZ2U6IDEgfSxcbiAqICAgeyBuYW1lOiAnYicsIGFnZTogMiB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAzIH0sXG4gKiAgIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfVxuICogXSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0QnkgPSBmdW5jdGlvbiAob3Jkcykge1xuICAgIHZhciBmID0gTkVBLnNvcnRCeShvcmRzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IGNvcHkoYXMpKTsgfTtcbn07XG4vKipcbiAqIEEgdXNlZnVsIHJlY3Vyc2lvbiBwYXR0ZXJuIGZvciBwcm9jZXNzaW5nIGFuIGFycmF5IHRvIHByb2R1Y2UgYSBuZXcgYXJyYXksIG9mdGVuIHVzZWQgZm9yIFwiY2hvcHBpbmdcIiB1cCB0aGUgaW5wdXRcbiAqIGFycmF5LiBUeXBpY2FsbHkgY2hvcCBpcyBjYWxsZWQgd2l0aCBzb21lIGZ1bmN0aW9uIHRoYXQgd2lsbCBjb25zdW1lIGFuIGluaXRpYWwgcHJlZml4IG9mIHRoZSBhcnJheSBhbmQgcHJvZHVjZSBhXG4gKiB2YWx1ZSBhbmQgdGhlIHJlc3Qgb2YgdGhlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBFcSB9IGZyb20gJ2ZwLXRzL0VxJ1xuICogaW1wb3J0ICogYXMgQSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGdyb3VwID0gPEE+KFM6IEVxPEE+KTogKChhczogQXJyYXk8QT4pID0+IEFycmF5PEFycmF5PEE+PikgPT4ge1xuICogICByZXR1cm4gQS5jaG9wKGFzID0+IHtcbiAqICAgICBjb25zdCB7IGluaXQsIHJlc3QgfSA9IHBpcGUoYXMsIEEuc3BhbkxlZnQoKGE6IEEpID0+IFMuZXF1YWxzKGEsIGFzWzBdKSkpXG4gKiAgICAgcmV0dXJuIFtpbml0LCByZXN0XVxuICogICB9KVxuICogfVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChncm91cChOLkVxKShbMSwgMSwgMiwgMywgMywgNF0pLCBbWzEsIDFdLCBbMl0sIFszLCAzXSwgWzRdXSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaG9wID0gZnVuY3Rpb24gKGYpIHtcbiAgICB2YXIgZyA9IE5FQS5jaG9wKGYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc05vbkVtcHR5KGFzKSA/IGcoYXMpIDogW10pOyB9O1xufTtcbi8qKlxuICogU3BsaXRzIGFuIGBBcnJheWAgaW50byB0d28gcGllY2VzLCB0aGUgZmlyc3QgcGllY2UgaGFzIG1heCBgbmAgZWxlbWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNwbGl0QXQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNwbGl0QXQoMikoWzEsIDIsIDMsIDQsIDVdKSwgW1sxLCAyXSwgWzMsIDQsIDVdXSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzcGxpdEF0ID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBuID49IDEgJiYgaXNOb25FbXB0eShhcykgPyBORUEuc3BsaXRBdChuKShhcykgOiBpc0VtcHR5KGFzKSA/IFtjb3B5KGFzKSwgW11dIDogW1tdLCBjb3B5KGFzKV07XG4gICAgfTtcbn07XG4vKipcbiAqIFNwbGl0cyBhbiBhcnJheSBpbnRvIGxlbmd0aC1gbmAgcGllY2VzLiBUaGUgbGFzdCBwaWVjZSB3aWxsIGJlIHNob3J0ZXIgaWYgYG5gIGRvZXMgbm90IGV2ZW5seSBkaXZpZGUgdGhlIGxlbmd0aCBvZlxuICogdGhlIGFycmF5LiBOb3RlIHRoYXQgYGNodW5rc09mKG4pKFtdKWAgaXMgYFtdYCwgbm90IGBbW11dYC4gVGhpcyBpcyBpbnRlbnRpb25hbCwgYW5kIGlzIGNvbnNpc3RlbnQgd2l0aCBhIHJlY3Vyc2l2ZVxuICogZGVmaW5pdGlvbiBvZiBgY2h1bmtzT2ZgOyBpdCBzYXRpc2ZpZXMgdGhlIHByb3BlcnR5IHRoYXRcbiAqXG4gKiBgYGB0c1xuICogY2h1bmtzT2YobikoeHMpLmNvbmNhdChjaHVua3NPZihuKSh5cykpID09IGNodW5rc09mKG4pKHhzLmNvbmNhdCh5cykpKVxuICogYGBgXG4gKlxuICogd2hlbmV2ZXIgYG5gIGV2ZW5seSBkaXZpZGVzIHRoZSBsZW5ndGggb2YgYHhzYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY2h1bmtzT2YgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNodW5rc09mKDIpKFsxLCAyLCAzLCA0LCA1XSksIFtbMSwgMl0sIFszLCA0XSwgWzVdXSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaHVua3NPZiA9IGZ1bmN0aW9uIChuKSB7XG4gICAgdmFyIGYgPSBORUEuY2h1bmtzT2Yobik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gZihhcykgOiBbXSk7IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGZyb21PcHRpb25LID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYVtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcm9tT3B0aW9uKGYuYXBwbHkodm9pZCAwLCBhKSk7XG4gICAgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gY29tcHJlaGVuc2lvbihpbnB1dCwgZiwgZykge1xuICAgIGlmIChnID09PSB2b2lkIDApIHsgZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH07IH1cbiAgICB2YXIgZ28gPSBmdW5jdGlvbiAoc2NvcGUsIGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpc05vbkVtcHR5KGlucHV0KVxuICAgICAgICAgICAgPyBmbGF0TWFwKE5FQS5oZWFkKGlucHV0KSwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGdvKHBpcGUoc2NvcGUsIGFwcGVuZChhKSksIE5FQS50YWlsKGlucHV0KSk7IH0pXG4gICAgICAgICAgICA6IGcuYXBwbHkodm9pZCAwLCBzY29wZSkgPyBbZi5hcHBseSh2b2lkIDAsIHNjb3BlKV1cbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgIH07XG4gICAgcmV0dXJuIGdvKFtdLCBpbnB1dCk7XG59XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRXID0gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgcmV0dXJuIGlzRW1wdHkoZmlyc3QpID8gY29weShzZWNvbmQpIDogaXNFbXB0eShzZWNvbmQpID8gY29weShmaXJzdCkgOiBmaXJzdC5jb25jYXQoc2Vjb25kKTtcbiAgICB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGNvbmNhdCA9IGNvbmNhdFc7XG5leHBvcnQgZnVuY3Rpb24gdW5pb24oRSkge1xuICAgIHZhciB1bmlvbkUgPSBORUEudW5pb24oRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIGlmIChzZWNvbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHVuaW9uRV8xID0gdW5pb24oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkgeyByZXR1cm4gdW5pb25FXzEoc2Vjb25kLCBmaXJzdCk7IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkoZmlyc3QpICYmIGlzTm9uRW1wdHkoc2Vjb25kKVxuICAgICAgICAgICAgPyB1bmlvbkUoc2Vjb25kKShmaXJzdClcbiAgICAgICAgICAgIDogaXNOb25FbXB0eShmaXJzdClcbiAgICAgICAgICAgICAgICA/IGNvcHkoZmlyc3QpXG4gICAgICAgICAgICAgICAgOiBjb3B5KHNlY29uZCk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3Rpb24oRSkge1xuICAgIHZhciBlbGVtRSA9IGVsZW0oRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh4cywgeXMpIHtcbiAgICAgICAgaWYgKHlzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBpbnRlcnNlY3Rpb25FXzEgPSBpbnRlcnNlY3Rpb24oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHlzKSB7IHJldHVybiBpbnRlcnNlY3Rpb25FXzEoeXMsIHhzKTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geHMuZmlsdGVyKGZ1bmN0aW9uIChhKSB7IHJldHVybiBlbGVtRShhLCB5cyk7IH0pO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZGlmZmVyZW5jZShFKSB7XG4gICAgdmFyIGVsZW1FID0gZWxlbShFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHhzLCB5cykge1xuICAgICAgICBpZiAoeXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGRpZmZlcmVuY2VFXzEgPSBkaWZmZXJlbmNlKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh5cykgeyByZXR1cm4gZGlmZmVyZW5jZUVfMSh5cywgeHMpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4cy5maWx0ZXIoZnVuY3Rpb24gKGEpIHsgcmV0dXJuICFlbGVtRShhLCB5cyk7IH0pO1xuICAgIH07XG59XG52YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX21hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwV2l0aEluZGV4KGYpKTsgfTtcbnZhciBfYXAgPSBmdW5jdGlvbiAoZmFiLCBmYSkgeyByZXR1cm4gcGlwZShmYWIsIGFwKGZhKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9maWx0ZXIgPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyKHByZWRpY2F0ZSkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZmlsdGVyTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcGFydGl0aW9uID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uKHByZWRpY2F0ZSkpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbldpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlV2l0aEluZGV4KSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25XaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9wYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbk1hcFdpdGhJbmRleChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9hbHQgPSBmdW5jdGlvbiAoZmEsIHRoYXQpIHsgcmV0dXJuIHBpcGUoZmEsIGFsdCh0aGF0KSk7IH07XG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9yZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcmVkdWNlV2l0aEluZGV4KGIsIGYpKTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9mb2xkTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE0gPSBmb2xkTWFwV2l0aEluZGV4KE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBXaXRoSW5kZXhNKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9yZWR1Y2VSaWdodFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgYiwgZikge1xuICAgIHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodFdpdGhJbmRleChiLCBmKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZmlsdGVyTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXBXaXRoSW5kZXgoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGVXaXRoSW5kZXgpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlcldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VGKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF90cmF2ZXJzZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4RiA9IHRyYXZlcnNlV2l0aEluZGV4KEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlV2l0aEluZGV4RihmKSk7IH07XG59O1xudmFyIF9jaGFpblJlY0RlcHRoRmlyc3QgPSBSQS5fY2hhaW5SZWNEZXB0aEZpcnN0O1xudmFyIF9jaGFpblJlY0JyZWFkdGhGaXJzdCA9IFJBLl9jaGFpblJlY0JyZWFkdGhGaXJzdDtcbi8qKlxuICogR2l2ZW4gYW4gZWxlbWVudCBvZiB0aGUgYmFzZSB0eXBlLCBgb2ZgIGJ1aWxkcyBhbiBgQXJyYXlgIGNvbnRhaW5pbmcganVzdCB0aGF0XG4gKiBlbGVtZW50IG9mIHRoZSBiYXNlIHR5cGUgKHRoaXMgaXMgdXNlZnVsIGZvciBidWlsZGluZyBhIGBNb25hZGApLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBvZiB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwob2YoXCJhXCIpLCBbXCJhXCJdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBvZiA9IE5FQS5vZjtcbi8qKlxuICogTWFrZXMgYW4gZW1wdHkgYEFycmF5YCwgdXNlZnVsIGZvciBidWlsZGluZyBhIFtgTW9ub2lkYF0oI01vbm9pZClcbiAqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciB6ZXJvID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH07XG4vKipcbiAqIGBtYXBgIGNhbiBiZSB1c2VkIHRvIHR1cm4gZnVuY3Rpb25zIGAoYTogQSkgPT4gQmAgaW50byBmdW5jdGlvbnMgYChmYTogQXJyYXk8QT4pID0+IEFycmF5PEI+YC5cbiAqIEluIHByYWN0aWNlIGl0IGFwcGxpZXMgdGhlIGJhc2UgZnVuY3Rpb24gdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSBhbmQgY29sbGVjdHMgdGhlXG4gKiByZXN1bHRzIGluIGEgbmV3IGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYXAgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBmID0gKG46IG51bWJlcikgPT4gbiAqIDI7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWzEsIDIsIDNdLCBtYXAoZikpLCBbMiwgNCwgNl0pO1xuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmYS5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9OyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgYXAsIG1hcCwgb2YgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiAvLyBhIGN1cnJpZWQgZnVuY3Rpb24gd2l0aCAzIGlucHV0IHBhcmFtZXRlcmVzXG4gKiBjb25zdCBmID0gKHMxOiBzdHJpbmcpID0+IChuOiBudW1iZXIpID0+IChzMjogc3RyaW5nKSA9PiBzMSArIG4gKyBzMjtcbiAqXG4gKiAvLyBsZXQncyB1c2UgYGFwYCB0byBpdGVyYXRlIGBmYCBvdmVyIGFuIGFycmF5IGZvciBlYWNoIGlucHV0IHBhcmFtZXRlclxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFtcImFcIiwgXCJiXCJdLCBtYXAoZiksIGFwKFsxLCAyXSksIGFwKFtcIvCfmIBcIiwgXCLwn5irXCIsIFwi8J+YjlwiXSkpLCBbXG4gKiAgIFwiYTHwn5iAXCIsIFwiYTHwn5irXCIsIFwiYTHwn5iOXCIsXG4gKiAgIFwiYTLwn5iAXCIsIFwiYTLwn5irXCIsIFwiYTLwn5iOXCIsXG4gKiAgIFwiYjHwn5iAXCIsIFwiYjHwn5irXCIsIFwiYjHwn5iOXCIsXG4gKiAgIFwiYjLwn5iAXCIsIFwiYjLwn5irXCIsIFwiYjLwn5iOXCIsXG4gKiBdKTtcbiAqXG4gKiAvLyBnaXZlbiBBcnJheSBpbXBsZW1lbnRzIHRoZSBBcHBsaWNhdGl2ZSBpbnRlcmZhY2Ugd2l0aCB0aGUgYG9mYCBtZXRob2QsXG4gKiAvLyB3ZSBjYW4gd3JpdGUgZXhhY3RseSB0aGUgc2FtZSB0aGluZyBpbiBhIG1vcmUgc3ltbWV0cmljIHdheVxuICogLy8gdXNpbmcgYG9mYCBvbiBgZmAgYW5kIGBhcGAgb24gZWFjaCBhcnJheSBpbiBpbnB1dFxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShvZihmKSwgYXAoW1wiYVwiLCBcImJcIl0pLCBhcChbMSwgMl0pLCBhcChbXCLwn5iAXCIsIFwi8J+Yq1wiLCBcIvCfmI5cIl0pKSxcbiAqICAgcGlwZShbXCJhXCIsIFwiYlwiXSwgbWFwKGYpLCBhcChbMSwgMl0pLCBhcChbXCLwn5iAXCIsIFwi8J+Yq1wiLCBcIvCfmI5cIl0pKVxuICogKTtcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcCA9IGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBmbGF0TWFwKGZ1bmN0aW9uIChmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9KTtcbn07XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG9cbiAqIGRldGVybWluZSB0aGUgbmV4dCBjb21wdXRhdGlvbi5cbiAqXG4gKiBJbiBvdGhlciB3b3JkcyBpdCB0YWtlcyBhIGZ1bmN0aW9uIGBmYCB0aGF0IHByb2R1Y2VzIGFuIGFycmF5IGZyb20gYSBzaW5nbGUgZWxlbWVudCBvZlxuICogdGhlIGJhc2UgdHlwZSBgQWAgYW5kIHJldHVybnMgYSBuZXcgZnVuY3Rpb24gd2hpY2ggYXBwbGllcyBgZmAgdG8gZWFjaCBlbGVtZW50IG9mIHRoZVxuICogaW5wdXQgYXJyYXkgKGxpa2UgW2BtYXBgXSgjbWFwKSkgYW5kLCBpbnN0ZWFkIG9mIHJldHVybmluZyBhbiBhcnJheSBvZiBhcnJheXMsIGNvbmNhdGVuYXRlcyB0aGVcbiAqIHJlc3VsdHMgaW50byBhIHNpbmdsZSBhcnJheSAobGlrZSBbYGZsYXR0ZW5gXSgjZmxhdHRlbikpLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmbGF0TWFwLCBtYXAsIHJlcGxpY2F0ZSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGYgPSAobjogbnVtYmVyKSA9PiByZXBsaWNhdGUobiwgYCR7bn1gKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbMSwgMiwgM10sIG1hcChmKSksIFtbXCIxXCJdLCBbXCIyXCIsIFwiMlwiXSwgW1wiM1wiLCBcIjNcIiwgXCIzXCJdXSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWzEsIDIsIDNdLCBmbGF0TWFwKGYpKSwgW1wiMVwiLCBcIjJcIiwgXCIyXCIsIFwiM1wiLCBcIjNcIiwgXCIzXCJdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTQuMFxuICovXG5leHBvcnQgdmFyIGZsYXRNYXAgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgZnVuY3Rpb24gKG1hLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUobWEsIGNoYWluV2l0aEluZGV4KGZ1bmN0aW9uIChpLCBhKSB7IHJldHVybiBmKGEsIGkpOyB9KSk7XG59KTtcbi8qKlxuICogVGFrZXMgYW4gYXJyYXkgb2YgYXJyYXlzIG9mIGBBYCBhbmQgZmxhdHRlbnMgdGhlbSBpbnRvIGFuIGFycmF5IG9mIGBBYFxuICogYnkgY29uY2F0ZW5hdGluZyB0aGUgZWxlbWVudHMgb2YgZWFjaCBhcnJheSBpbiBvcmRlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmxhdHRlbiB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmxhdHRlbihbW1wiYVwiXSwgW1wiYlwiLCBcImNcIl0sIFtcImRcIiwgXCJlXCIsIFwiZlwiXV0pLCBbXCJhXCIsIFwiYlwiLCBcImNcIiwgXCJkXCIsIFwiZVwiLCBcImZcIl0pO1xuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0dGVuID0gLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogU2FtZSBhcyBbYG1hcGBdKCNtYXApLCBidXQgdGhlIGl0ZXJhdGluZyBmdW5jdGlvbiB0YWtlcyBib3RoIHRoZSBpbmRleCBhbmQgdGhlIHZhbHVlXG4gKiBvZiB0aGUgZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFwV2l0aEluZGV4IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgZiA9IChpOiBudW1iZXIsIHM6IHN0cmluZykgPT4gYCR7c30gLSAke2l9YDtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbXCJhXCIsIFwiYlwiLCBcImNcIl0sIG1hcFdpdGhJbmRleChmKSksIFtcImEgLSAwXCIsIFwiYiAtIDFcIiwgXCJjIC0gMlwiXSk7XG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gZmEubWFwKGZ1bmN0aW9uIChhLCBpKSB7IHJldHVybiBmKGksIGEpOyB9KTtcbn07IH07XG4vKipcbiAqIE1hcHMgYW4gYXJyYXkgd2l0aCBhbiBpdGVyYXRpbmcgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgaW5kZXggYW5kIHRoZSB2YWx1ZSBvZlxuICogZWFjaCBlbGVtZW50IGFuZCByZXR1cm5zIGFuIGBPcHRpb25gLiBJdCBrZWVwcyBvbmx5IHRoZSBgU29tZWAgdmFsdWVzIGRpc2NhcmRpbmdcbiAqIHRoZSBgTm9uZWBzLlxuICpcbiAqIFNhbWUgYXMgW2BmaWx0ZXJNYXBgXSgjZmlsdGVyTWFwKSwgYnV0IHdpdGggYW4gaXRlcmF0aW5nIGZ1bmN0aW9uIHdoaWNoIHRha2VzIGFsc29cbiAqIHRoZSBpbmRleCBhcyBpbnB1dC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmlsdGVyTWFwV2l0aEluZGV4IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tIFwiZnAtdHNcIjtcbiAqXG4gKiBjb25zdCBmID0gKGk6IG51bWJlciwgczogc3RyaW5nKSA9PiAoaSAlIDIgPT09IDEgPyBvcHRpb24uc29tZShzLnRvVXBwZXJDYXNlKCkpIDogb3B0aW9uLm5vbmUpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFtcImFcIiwgXCJub1wiLCBcIm5laXRoZXJcIiwgXCJiXCJdLCBmaWx0ZXJNYXBXaXRoSW5kZXgoZikpLCBbXCJOT1wiLCBcIkJcIl0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlck1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25CID0gZihpLCBmYVtpXSk7XG4gICAgICAgICAgICBpZiAoXy5pc1NvbWUob3B0aW9uQikpIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChvcHRpb25CLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBNYXBzIGFuIGFycmF5IHdpdGggYW4gaXRlcmF0aW5nIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBgT3B0aW9uYFxuICogYW5kIGl0IGtlZXBzIG9ubHkgdGhlIGBTb21lYCB2YWx1ZXMgZGlzY2FyZGluZyB0aGUgYE5vbmVgcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmlsdGVyTWFwIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tIFwiZnAtdHNcIjtcbiAqXG4gKiBjb25zdCBmID0gKHM6IHN0cmluZykgPT4gcy5sZW5ndGggPT09IDEgPyBvcHRpb24uc29tZShzLnRvVXBwZXJDYXNlKCkpIDogb3B0aW9uLm5vbmU7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoW1wiYVwiLCBcIm5vXCIsIFwibmVpdGhlclwiLCBcImJcIl0sIGZpbHRlck1hcChmKSksIFtcIkFcIiwgXCJCXCJdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJNYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmaWx0ZXJNYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbi8qKlxuICogQ29tcGFjdCBhbiBhcnJheSBvZiBgT3B0aW9uYHMgZGlzY2FyZGluZyB0aGUgYE5vbmVgIHZhbHVlcyBhbmRcbiAqIGtlZXBpbmcgdGhlIGBTb21lYCB2YWx1ZXMuIEl0IHJldHVybnMgYSBuZXcgYXJyYXkgY29udGFpbmluZyB0aGUgdmFsdWVzIG9mXG4gKiB0aGUgYFNvbWVgIG9wdGlvbnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGNvbXBhY3QgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gXCJmcC10c1wiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcGFjdChbb3B0aW9uLnNvbWUoXCJhXCIpLCBvcHRpb24ubm9uZSwgb3B0aW9uLnNvbWUoXCJiXCIpXSksIFtcImFcIiwgXCJiXCJdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb21wYWN0ID0gLyojX19QVVJFX18qLyBmaWx0ZXJNYXAoaWRlbnRpdHkpO1xuLyoqXG4gKiBTZXBhcmF0ZSBhbiBhcnJheSBvZiBgRWl0aGVyYHMgaW50byBgTGVmdGBzIGFuZCBgUmlnaHRgcywgY3JlYXRpbmcgdHdvIG5ldyBhcnJheXM6XG4gKiBvbmUgY29udGFpbmluZyBhbGwgdGhlIGxlZnQgdmFsdWVzIGFuZCBvbmUgY29udGFpbmluZyBhbGwgdGhlIHJpZ2h0IHZhbHVlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2VwYXJhdGUgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IGVpdGhlciB9IGZyb20gXCJmcC10c1wiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2VwYXJhdGUoW2VpdGhlci5yaWdodChcInIxXCIpLCBlaXRoZXIubGVmdChcImwxXCIpLCBlaXRoZXIucmlnaHQoXCJyMlwiKV0pLCB7XG4gKiAgIGxlZnQ6IFtcImwxXCJdLFxuICogICByaWdodDogW1wicjFcIiwgXCJyMlwiXSxcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNlcGFyYXRlID0gZnVuY3Rpb24gKGZhKSB7XG4gICAgdmFyIGxlZnQgPSBbXTtcbiAgICB2YXIgcmlnaHQgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDAsIGZhXzEgPSBmYTsgX2kgPCBmYV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgZSA9IGZhXzFbX2ldO1xuICAgICAgICBpZiAoZS5fdGFnID09PSAnTGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQucHVzaChlLmxlZnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmlnaHQucHVzaChlLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbn07XG4vKipcbiAqIEdpdmVuIGFuIGl0ZXJhdGluZyBmdW5jdGlvbiB0aGF0IGlzIGEgYFByZWRpY2F0ZWAgb3IgYSBgUmVmaW5lbWVudGAsXG4gKiBgZmlsdGVyYCBjcmVhdGVzIGEgbmV3IGBBcnJheWAgY29udGFpbmluZyB0aGUgZWxlbWVudHMgb2YgdGhlIG9yaWdpbmFsXG4gKiBgQXJyYXlgIGZvciB3aGljaCB0aGUgaXRlcmF0aW5nIGZ1bmN0aW9uIGlzIGB0cnVlYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gXCJmcC10cy9saWIvc3RyaW5nXCI7XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaWx0ZXIoaXNTdHJpbmcpKFtcImFcIiwgMSwge30sIFwiYlwiLCA1XSksIFtcImFcIiwgXCJiXCJdKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmlsdGVyKCh4Om51bWJlcikgPT4geCA+IDApKFstMywgMSwgLTIsIDVdKSwgWzEsIDVdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXIgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMuZmlsdGVyKHByZWRpY2F0ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEdpdmVuIGFuIGl0ZXJhdGluZyBmdW5jdGlvbiB0aGF0IGlzIGEgYFByZWRpY2F0ZWAgb3IgYSBgUmVmaW5lbWVudGAsXG4gKiBgcGFydGl0aW9uYCBjcmVhdGVzIHR3byBuZXcgYEFycmF5YHM6IGByaWdodGAgY29udGFpbmluZyB0aGUgZWxlbWVudHMgb2YgdGhlIG9yaWdpbmFsXG4gKiBgQXJyYXlgIGZvciB3aGljaCB0aGUgaXRlcmF0aW5nIGZ1bmN0aW9uIGlzIGB0cnVlYCwgYGxlZnRgIGNvbnRhaW5pbmcgdGhlIGVsZW1lbnRzXG4gKiBmb3Igd2hpY2ggaXQgaXMgZmFsc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBhcnRpdGlvbiB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgaXNTdHJpbmcgfSBmcm9tIFwiZnAtdHMvbGliL3N0cmluZ1wiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGFydGl0aW9uKGlzU3RyaW5nKShbXCJhXCIsIDEsIHt9LCBcImJcIiwgNV0pLCB7IGxlZnQ6IFsxLCB7fSwgNV0sIHJpZ2h0OiBbXCJhXCIsIFwiYlwiXSB9KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGFydGl0aW9uKCh4OiBudW1iZXIpID0+IHggPiAwKShbLTMsIDEsIC0yLCA1XSksIHsgbGVmdDogWy0zLCAtMl0sIHJpZ2h0OiBbMSwgNV0gfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwYXJ0aXRpb25XaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIHByZWRpY2F0ZShhKTsgfSk7XG59O1xuLyoqXG4gKiBTYW1lIGFzIFtgcGFydGl0aW9uYF0oI3BhcnRpdGlvbiksIGJ1dCBwYXNzaW5nIGFsc28gdGhlIGluZGV4IHRvIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBhcnRpdGlvbldpdGhJbmRleCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGFydGl0aW9uV2l0aEluZGV4KChpbmRleCwgeDogbnVtYmVyKSA9PiBpbmRleCA8IDMgJiYgeCA+IDApKFstMiwgNSwgNiwgN10pLCB7XG4gKiAgIGxlZnQ6IFstMiwgN10sXG4gKiAgIHJpZ2h0OiBbNSwgNl0sXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25XaXRoSW5kZXggPSBmdW5jdGlvbiAocHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVmdCA9IFtdO1xuICAgICAgICB2YXIgcmlnaHQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGIgPSBhc1tpXTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGVXaXRoSW5kZXgoaSwgYikpIHtcbiAgICAgICAgICAgICAgICByaWdodC5wdXNoKGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGVmdC5wdXNoKGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBHaXZlbiBhbiBpdGVyYXRpbmcgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGBFaXRoZXJgLFxuICogYHBhcnRpdGlvbk1hcGAgYXBwbGllcyB0aGUgaXRlcmF0aW5nIGZ1bmN0aW9uIHRvIGVhY2ggZWxlbWVudCBhbmQgaXQgY3JlYXRlcyB0d28gYEFycmF5YHM6XG4gKiBgcmlnaHRgIGNvbnRhaW5pbmcgdGhlIHZhbHVlcyBvZiBgUmlnaHRgIHJlc3VsdHMsIGBsZWZ0YCBjb250YWluaW5nIHRoZSB2YWx1ZXMgb2YgYExlZnRgIHJlc3VsdHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBhcnRpdGlvbk1hcCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgRWl0aGVyLCBsZWZ0LCByaWdodCB9IGZyb20gXCJmcC10cy9saWIvRWl0aGVyXCI7XG4gKlxuICogY29uc3QgdXBwZXJJZlN0cmluZyA9IDxCPih4OiBCKTogRWl0aGVyPEIsIHN0cmluZz4gPT5cbiAqICAgdHlwZW9mIHggPT09IFwic3RyaW5nXCIgPyByaWdodCh4LnRvVXBwZXJDYXNlKCkpIDogbGVmdCh4KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGFydGl0aW9uTWFwKHVwcGVySWZTdHJpbmcpKFstMiwgXCJoZWxsb1wiLCA2LCA3LCBcIndvcmxkXCJdKSwge1xuICogICBsZWZ0OiBbLTIsIDYsIDddLFxuICogICByaWdodDogWyAnSEVMTE8nLCAnV09STEQnIF0sXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gcGFydGl0aW9uTWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbi8qKlxuICogU2FtZSBhcyBbYHBhcnRpdGlvbk1hcGBdKCNwYXJ0aXRpb25NYXApLCBidXQgcGFzc2luZyBhbHNvIHRoZSBpbmRleCB0byB0aGUgaXRlcmF0aW5nIGZ1bmN0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwYXJ0aXRpb25NYXBXaXRoSW5kZXggfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IEVpdGhlciwgbGVmdCwgcmlnaHQgfSBmcm9tIFwiZnAtdHMvbGliL0VpdGhlclwiO1xuICpcbiAqIGNvbnN0IHVwcGVySWZTdHJpbmdCZWZvcmUzID0gPEI+KGluZGV4OiBudW1iZXIsIHg6IEIpOiBFaXRoZXI8Qiwgc3RyaW5nPiA9PlxuICogICBpbmRleCA8IDMgJiYgdHlwZW9mIHggPT09IFwic3RyaW5nXCIgPyByaWdodCh4LnRvVXBwZXJDYXNlKCkpIDogbGVmdCh4KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGFydGl0aW9uTWFwV2l0aEluZGV4KHVwcGVySWZTdHJpbmdCZWZvcmUzKShbLTIsIFwiaGVsbG9cIiwgNiwgNywgXCJ3b3JsZFwiXSksIHtcbiAqICAgbGVmdDogWy0yLCA2LCA3LCBcIndvcmxkXCJdLFxuICogICByaWdodDogW1wiSEVMTE9cIl0sXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgdmFyIGxlZnQgPSBbXTtcbiAgICAgICAgdmFyIHJpZ2h0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBlID0gZihpLCBmYVtpXSk7XG4gICAgICAgICAgICBpZiAoZS5fdGFnID09PSAnTGVmdCcpIHtcbiAgICAgICAgICAgICAgICBsZWZ0LnB1c2goZS5sZWZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJpZ2h0LnB1c2goZS5yaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0LCByaWdodCk7XG4gICAgfTtcbn07XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBBIGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIEEuYWx0VygoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMiwgMywgJ2EnLCAnYiddXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiBmYS5jb25jYXQodGhhdCgpKTtcbiAgICB9O1xufTtcbi8qKlxuICogSWRlbnRpZmllcyBhbiBhc3NvY2lhdGl2ZSBvcGVyYXRpb24gb24gYSB0eXBlIGNvbnN0cnVjdG9yLiBJdCBpcyBzaW1pbGFyIHRvIGBTZW1pZ3JvdXBgLCBleGNlcHQgdGhhdCBpdCBhcHBsaWVzIHRvXG4gKiB0eXBlcyBvZiBraW5kIGAqIC0+ICpgLlxuICpcbiAqIEluIGNhc2Ugb2YgYEFycmF5YCBjb25jYXRlbmF0ZXMgdGhlIGlucHV0cyBpbnRvIGEgc2luZ2xlIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBBIGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIEEuYWx0KCgpID0+IFs0LCA1XSlcbiAqICAgKSxcbiAqICAgWzEsIDIsIDMsIDQsIDVdXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhbHQgPSBhbHRXO1xuLyoqXG4gKiBTYW1lIGFzIFtgZmlsdGVyYF0oI2ZpbHRlciksIGJ1dCBwYXNzaW5nIGFsc28gdGhlIGluZGV4IHRvIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZpbHRlcldpdGhJbmRleCB9IGZyb20gJ2ZwLXRzL0FycmF5JztcbiAqXG4gKiBjb25zdCBmID0gKGluZGV4OiBudW1iZXIsIHg6IG51bWJlcikgPT4geCA+IDAgJiYgaW5kZXggPD0gMjtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmlsdGVyV2l0aEluZGV4KGYpKFstMywgMSwgLTIsIDVdKSwgWzFdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJXaXRoSW5kZXggPSBmdW5jdGlvbiAocHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMuZmlsdGVyKGZ1bmN0aW9uIChiLCBpKSB7IHJldHVybiBwcmVkaWNhdGVXaXRoSW5kZXgoaSwgYik7IH0pO1xuICAgIH07XG59O1xuLyoqXG4gKiBHaXZlbiBhbiBpdGVyYXRpbmcgZnVuY3Rpb24gdGhhdCB0YWtlcyBgQXJyYXk8QT5gIGFzIGlucHV0LCBgZXh0ZW5kYCByZXR1cm5zXG4gKiBhbiBhcnJheSBjb250YWluaW5nIHRoZSByZXN1bHRzIG9mIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24gYXBwbGllZCB0byB0aGUgd2hvbGUgaW5wdXRcbiAqIGBBcnJheWAsIHRoZW4gdG8gdGhlIGlucHV0IGBBcnJheWAgd2l0aG91dCB0aGUgZmlyc3QgZWxlbWVudCwgdGhlbiB0byB0aGUgaW5wdXRcbiAqIGBBcnJheWAgd2l0aG91dCB0aGUgZmlyc3QgdHdvIGVsZW1lbnRzLCBldGMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGV4dGVuZCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IGYgPSAoYTogc3RyaW5nW10pID0+IGEuam9pbihcIixcIik7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGV4dGVuZChmKShbXCJhXCIsIFwiYlwiLCBcImNcIl0pLCBbXCJhLGIsY1wiLCBcImIsY1wiLCBcImNcIl0pO1xuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGV4dGVuZCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAod2EpIHtcbiAgICByZXR1cm4gd2EubWFwKGZ1bmN0aW9uIChfLCBpKSB7IHJldHVybiBmKHdhLnNsaWNlKGkpKTsgfSk7XG59OyB9O1xuLyoqXG4gKiBgZHVwbGljYXRlYCByZXR1cm5zIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIHdob2xlIGlucHV0IGBBcnJheWAsXG4gKiB0aGVuIHRvIHRoZSBpbnB1dCBgQXJyYXlgIGRyb3BwaW5nIHRoZSBmaXJzdCBlbGVtZW50LCB0aGVuIHRvIHRoZSBpbnB1dFxuICogYEFycmF5YCBkcm9wcGluZyB0aGUgZmlyc3QgdHdvIGVsZW1lbnRzLCBldGMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGR1cGxpY2F0ZSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZHVwbGljYXRlKFtcImFcIiwgXCJiXCIsIFwiY1wiXSksIFtbXCJhXCIsIFwiYlwiLCBcImNcIl0sIFtcImJcIiwgXCJjXCJdLCBbXCJjXCJdXSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZHVwbGljYXRlID0gLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBNYXAgYW5kIGZvbGQgYW4gYEFycmF5YC5cbiAqIE1hcCB0aGUgYEFycmF5YCBwYXNzaW5nIGVhY2ggdmFsdWUgdG8gdGhlIGl0ZXJhdGluZyBmdW5jdGlvbi5cbiAqIFRoZW4gZm9sZCB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYE1vbm9pZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZvbGRNYXAgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBjb25zdCBtb25vaWQgPSB7IGNvbmNhdDogKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PiBhICsgYiwgZW1wdHk6IFwiXCIgfTtcbiAqIGNvbnN0IGYgPSAoczogc3RyaW5nKSA9PiBzLnRvVXBwZXJDYXNlKClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZm9sZE1hcChtb25vaWQpKGYpKFtcImFcIiwgXCJiXCIsIFwiY1wiXSksIFwiQUJDXCIpO1xuICpcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkTWFwID0gUkEuZm9sZE1hcDtcbi8qKlxuICogU2FtZSBhcyBbYGZvbGRNYXBgXSgjZm9sZE1hcCkgYnV0IHBhc3NpbmcgYWxzbyB0aGUgaW5kZXggdG8gdGhlIGl0ZXJhdGluZyBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZm9sZE1hcFdpdGhJbmRleCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IG1vbm9pZCA9IHsgY29uY2F0OiAoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IGEgKyBiLCBlbXB0eTogXCJcIiB9O1xuICogY29uc3QgZiA9IChpbmRleDpudW1iZXIsIHM6IHN0cmluZykgPT4gYCR7cy50b1VwcGVyQ2FzZSgpfSgke2luZGV4fSlgXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZvbGRNYXBXaXRoSW5kZXgobW9ub2lkKShmKShbXCJhXCIsIFwiYlwiLCBcImNcIl0pLCBcIkEoMClCKDEpQygyKVwiKTtcbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IFJBLmZvbGRNYXBXaXRoSW5kZXg7XG4vKipcbiAqIFJlZHVjZXMgYW4gYEFycmF5YC5cbiAqXG4gKiBgcmVkdWNlYCBleGVjdXRlcyB0aGUgc3VwcGxpZWQgaXRlcmF0aW5nIGZ1bmN0aW9uIG9uIGVhY2ggZWxlbWVudCBvZiB0aGUgYXJyYXksXG4gKiBpbiBvcmRlciwgcGFzc2luZyBpbiB0aGUgZWxlbWVudCBhbmQgdGhlIHJldHVybiB2YWx1ZSBmcm9tIHRoZSBjYWxjdWxhdGlvbiBvbiB0aGUgcHJlY2VkaW5nIGVsZW1lbnQuXG4gKlxuICogVGhlIGZpcnN0IHRpbWUgdGhhdCB0aGUgaXRlcmF0aW5nIGZ1bmN0aW9uIGlzIGNhbGxlZCB0aGVyZSBpcyBubyBcInJldHVybiB2YWx1ZSBvZiB0aGVcbiAqIHByZXZpb3VzIGNhbGN1bGF0aW9uXCIsIHRoZSBpbml0aWFsIHZhbHVlIGlzIHVzZWQgaW4gaXRzIHBsYWNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZWR1Y2UgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJlZHVjZSg1LCAoYWNjOiBudW1iZXIsIGN1cjogbnVtYmVyKSA9PiBhY2MgKiBjdXIpKFsyLCAzXSksIDUgKiAyICogMyk7XG4gKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZSA9IFJBLnJlZHVjZTtcbi8qKlxuICogU2FtZSBhcyBbYHJlZHVjZWBdKCNyZWR1Y2UpIGJ1dCBwYXNzaW5nIGFsc28gdGhlIGluZGV4IHRvIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJlZHVjZVdpdGhJbmRleCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IGYgPSAoaW5kZXg6IG51bWJlciwgYWNjOiBzdHJpbmcsIGN1cjogdW5rbm93bikgPT5cbiAqICAgYWNjICsgKHR5cGVvZiBjdXIgPT09IFwic3RyaW5nXCIgPyBjdXIudG9VcHBlckNhc2UoKSArIGluZGV4IDogXCJcIik7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJlZHVjZVdpdGhJbmRleChcIlwiLCBmKShbMiwgXCJhXCIsIFwiYlwiLCBudWxsXSksIFwiQTFCMlwiKTtcbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlV2l0aEluZGV4ID0gUkEucmVkdWNlV2l0aEluZGV4O1xuLyoqXG4gKiBTYW1lIGFzIFtgcmVkdWNlYF0oI3JlZHVjZSkgYnV0IGFwcGxpZWQgZnJvbSB0aGUgZW5kIHRvIHRoZSBzdGFydC5cbiAqXG4gKiAqTm90ZSo6IHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24gaW4gdGhpcyBjYXNlIHRha2VzIHRoZSBhY2N1bXVsYXRvciBhcyB0aGUgbGFzdCBhcmd1bWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVkdWNlUmlnaHQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJlZHVjZVJpZ2h0KFwiXCIsIChjdXI6IHN0cmluZywgYWNjOiBzdHJpbmcpID0+IGFjYyArIGN1cikoW1wiYVwiLCBcImJcIiwgXCJjXCJdKSwgXCJjYmFcIik7XG4gKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZVJpZ2h0ID0gUkEucmVkdWNlUmlnaHQ7XG4vKipcbiAqIFNhbWUgYXMgW2ByZWR1Y2VSaWdodGBdKCNyZWR1Y2VSaWdodCkgYnV0IHBhc3NpbmcgYWxzbyB0aGUgaW5kZXggdG8gdGhlIGl0ZXJhdGluZyBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVkdWNlUmlnaHRXaXRoSW5kZXggfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBjb25zdCBmID0gKGluZGV4OiBudW1iZXIsIGN1cjogdW5rbm93biwgYWNjOiBzdHJpbmcpID0+XG4gKiAgIGFjYyArICh0eXBlb2YgY3VyID09PSBcInN0cmluZ1wiID8gY3VyLnRvVXBwZXJDYXNlKCkgKyBpbmRleCA6IFwiXCIpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZWR1Y2VSaWdodFdpdGhJbmRleChcIlwiLCBmKShbMiwgXCJhXCIsIFwiYlwiLCBudWxsXSksIFwiQjJBMVwiKTtcbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBSQS5yZWR1Y2VSaWdodFdpdGhJbmRleDtcbi8qKlxuICogR2l2ZW4gYW4gaXRlcmF0aW5nIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGBIS1RgIChoaWdoZXIga2luZGVkIHR5cGUpLCBgdHJhdmVyc2VgXG4gKiBhcHBsaWVzIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24gdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBgQXJyYXlgIGFuZCB0aGVuIFtgc2VxdWVuY2VgXSgjc2VxdWVuY2UpLXNcbiAqIHRoZSByZXN1bHRzIHVzaW5nIHRoZSBwcm92aWRlZCBgQXBwbGljYXRpdmVgLlxuICpcbiAqIEUuZy4gc3VwcG9zZSB5b3UgaGF2ZSBhbiBgQXJyYXlgIGFuZCB5b3Ugd2FudCB0byBmb3JtYXQgZWFjaCBlbGVtZW50IHdpdGggYSBmdW5jdGlvblxuICogdGhhdCByZXR1cm5zIGEgcmVzdWx0IG9yIGFuIGVycm9yIGFzIGBmID0gKGE6IEEpID0+IEVpdGhlcjxFcnJvciwgQj5gLCB1c2luZyBgdHJhdmVyc2VgXG4gKiB5b3UgY2FuIGFwcGx5IGBmYCB0byBhbGwgZWxlbWVudHMgYW5kIGRpcmVjdGx5IG9idGFpbiBhcyBhIHJlc3VsdCBhbiBgRWl0aGVyPEVycm9yLEFycmF5PEI+PmBcbiAqIGkuZS4gYW4gYEFycmF5PEI+YCBpZiBhbGwgdGhlIHJlc3VsdHMgYXJlIGBCYCwgb3IgYW4gYEVycm9yYCBpZiBzb21lIG9mIHRoZSByZXN1bHRzXG4gKiBhcmUgYEVycm9yYHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHRyYXZlcnNlIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBBcHBsaWNhdGl2ZSwgbGVmdCwgcmlnaHQgfSBmcm9tIFwiZnAtdHMvbGliL0VpdGhlclwiO1xuICpcbiAqIGNvbnN0IGYgPSAoeDogdW5rbm93bikgPT5cbiAqICAgdHlwZW9mIHggPT09IFwic3RyaW5nXCIgPyByaWdodCh4LnRvVXBwZXJDYXNlKCkpIDogbGVmdChuZXcgRXJyb3IoXCJub3QgYSBzdHJpbmdcIikpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0cmF2ZXJzZShBcHBsaWNhdGl2ZSkoZikoW1wiYVwiLCBcImJcIl0pLCByaWdodChbXCJBXCIsIFwiQlwiXSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0cmF2ZXJzZShBcHBsaWNhdGl2ZSkoZikoW1wiYVwiLCA1XSksIGxlZnQobmV3IEVycm9yKFwibm90IGEgc3RyaW5nXCIpKSk7XG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xufTtcbi8qKlxuICogYHNlcXVlbmNlYCB0YWtlcyBhbiBgQXJyYXlgIHdoZXJlIGVsZW1lbnRzIGFyZSBgSEtUPEE+YCAoaGlnaGVyIGtpbmRlZCB0eXBlKSBhbmQsXG4gKiB1c2luZyBhbiBhcHBsaWNhdGl2ZSBvZiB0aGF0IGBIS1RgLCByZXR1cm5zIGFuIGBIS1RgIG9mIGBBcnJheTxBPmAuXG4gKiBFLmcuIGl0IGNhbiB0dXJuIGFuIGBBcnJheTxFaXRoZXI8RXJyb3IsIHN0cmluZz4+YCBpbnRvIGFuIGBFaXRoZXI8RXJyb3IsIEFycmF5PHN0cmluZz4+YC5cbiAqXG4gKiBgc2VxdWVuY2VgIHJlcXVpcmVzIGFuIGBBcHBsaWNhdGl2ZWAgb2YgdGhlIGBIS1RgIHlvdSBhcmUgdGFyZ2V0aW5nLCBlLmcuIHRvIHR1cm4gYW5cbiAqIGBBcnJheTxFaXRoZXI8RSwgQT4+YCBpbnRvIGFuIGBFaXRoZXI8RSwgQXJyYXk8QT4+YCwgaXQgbmVlZHMgYW5cbiAqIGBBcHBsaWNhdGl2ZWAgZm9yIGBFaXRoZXJgLCB0byB0byB0dXJuIGFuIGBBcnJheTxPcHRpb248QT4+YCBpbnRvIGFuIGBPcHRpb248QXJyYXk8QT4+YCxcbiAqIGl0IG5lZWRzIGFuIGBBcHBsaWNhdGl2ZWAgZm9yIGBPcHRpb25gLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzZXF1ZW5jZSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgQXBwbGljYXRpdmUsIGxlZnQsIHJpZ2h0IH0gZnJvbSBcImZwLXRzL2xpYi9FaXRoZXJcIjtcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNlcXVlbmNlKEFwcGxpY2F0aXZlKShbcmlnaHQoXCJhXCIpLCByaWdodChcImJcIildKSwgcmlnaHQoW1wiYVwiLCBcImJcIl0pKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHNlcXVlbmNlKEFwcGxpY2F0aXZlKShbcmlnaHQoXCJhXCIpLCBsZWZ0KG5ldyBFcnJvcihcIm5vdCBhIHN0cmluZ1wiKSldKSxcbiAqICAgbGVmdChuZXcgRXJyb3IoXCJub3QgYSBzdHJpbmdcIikpXG4gKiApO1xuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciBzZXF1ZW5jZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkge1xuICAgICAgICByZXR1cm4gX3JlZHVjZSh0YSwgRi5vZih6ZXJvKCkpLCBmdW5jdGlvbiAoZmFzLCBmYSkge1xuICAgICAgICAgICAgcmV0dXJuIEYuYXAoRi5tYXAoZmFzLCBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBwaXBlKGFzLCBhcHBlbmQoYSkpOyB9OyB9KSwgZmEpO1xuICAgICAgICB9KTtcbiAgICB9O1xufTtcbi8qKlxuICogU2FtZSBhcyBbYHRyYXZlcnNlYF0oI3RyYXZlcnNlKSBidXQgcGFzc2luZyBhbHNvIHRoZSBpbmRleCB0byB0aGUgaXRlcmF0aW5nIGZ1bmN0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB0cmF2ZXJzZVdpdGhJbmRleCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgQXBwbGljYXRpdmUsIGxlZnQsIHJpZ2h0IH0gZnJvbSBcImZwLXRzL2xpYi9FaXRoZXJcIjtcbiAqXG4gKiBjb25zdCBmID0gKGluZGV4Om51bWJlciwgeDp1bmtub3duKSA9PlxuICogICB0eXBlb2YgeCA9PT0gXCJzdHJpbmdcIiA/IHJpZ2h0KHgudG9VcHBlckNhc2UoKSArIGluZGV4KSA6IGxlZnQobmV3IEVycm9yKFwibm90IGEgc3RyaW5nXCIpKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpKGYpKFtcImFcIiwgXCJiXCJdKSwgcmlnaHQoW1wiQTBcIiwgXCJCMVwiXSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSkoZikoW1wiYVwiLCA1XSksIGxlZnQobmV3IEVycm9yKFwibm90IGEgc3RyaW5nXCIpKSk7XG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIHJlZHVjZVdpdGhJbmRleChGLm9mKHplcm8oKSksIGZ1bmN0aW9uIChpLCBmYnMsIGEpIHtcbiAgICAgICAgICAgIHJldHVybiBGLmFwKEYubWFwKGZicywgZnVuY3Rpb24gKGJzKSB7IHJldHVybiBmdW5jdGlvbiAoYikgeyByZXR1cm4gcGlwZShicywgYXBwZW5kKGIpKTsgfTsgfSksIGYoaSwgYSkpO1xuICAgICAgICB9KTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2l0aGVyID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpdGhlckYgPSBfd2l0aGVyKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2l0aGVyRihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aWx0ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpbHRGID0gX3dpbHQoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIF93aWx0RihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBgdW5mb2xkYCB0YWtlcyBhIGZ1bmN0aW9uIGBmYCB3aGljaCByZXR1cm5zIGFuIGBPcHRpb25gIG9mIGEgdHVwbGUgY29udGFpbmluZyBhbiBvdXRjb21lXG4gKiB2YWx1ZSBhbmQgYW4gaW5wdXQgZm9yIHRoZSBmb2xsb3dpbmcgaXRlcmF0aW9uLlxuICogYHVuZm9sZGAgYXBwbGllcyBgZmAgdG8gdGhlIGluaXRpYWwgdmFsdWUgYGJgIGFuZCB0aGVuIHJlY3Vyc2l2ZWx5IHRvIHRoZSBzZWNvbmRcbiAqIGVsZW1lbnQgb2YgdGhlIHR1cGxlIGNvbnRhaW5lZCBpbiB0aGUgcmV0dXJuZWQgYG9wdGlvbmAgb2YgdGhlIHByZXZpb3VzXG4gKiBjYWxjdWxhdGlvbiB1bnRpbCBgZmAgcmV0dXJucyBgT3B0aW9uLm5vbmVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1bmZvbGQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGNvbnN0IGYgPSAobjogbnVtYmVyKSA9PiB7XG4gKiAgIGlmIChuIDw9IDApIHJldHVybiBvcHRpb24ubm9uZTtcbiAqICAgY29uc3QgcmV0dXJuVmFsdWUgPSBuICogMjtcbiAqICAgY29uc3QgaW5wdXRGb3JOZXh0Um91bmQgPSBuIC0gMTtcbiAqICAgcmV0dXJuIG9wdGlvbi5zb21lKFtyZXR1cm5WYWx1ZSwgaW5wdXRGb3JOZXh0Um91bmRdIGFzIGNvbnN0KTtcbiAqIH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuZm9sZCg1LCBmKSwgWzEwLCA4LCA2LCA0LCAyXSk7XG4gKlxuICogQHNpbmNlIDIuNi42XG4gKi9cbmV4cG9ydCB2YXIgdW5mb2xkID0gZnVuY3Rpb24gKGIsIGYpIHtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgdmFyIGJiID0gYjtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIG10ID0gZihiYik7XG4gICAgICAgIGlmIChfLmlzU29tZShtdCkpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IG10LnZhbHVlLCBhID0gX2FbMF0sIGJfMSA9IF9hWzFdO1xuICAgICAgICAgICAgb3V0LnB1c2goYSk7XG4gICAgICAgICAgICBiYiA9IGJfMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBVUkkgPSAnQXJyYXknO1xuLyoqXG4gKiBgZ2V0U2hvd2AgbWFrZXMgYSBgU2hvd2AgZm9yIGFuIGBBcnJheTxBPmAgZnJvbSBhIGBTaG93YCBmb3JcbiAqIGFuIGBBYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0U2hvdyB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IG51bVNob3cgPSB7IHNob3c6IChuOiBudW1iZXIpID0+IChuID49IDAgPyBgJHtufWAgOiBgKCR7LW59KWApIH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldFNob3cobnVtU2hvdykuc2hvdyhbLTIsIC0xLCAwLCAxXSksIFwiWygyKSwgKDEpLCAwLCAxXVwiKTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTaG93ID0gUkEuZ2V0U2hvdztcbi8qKlxuICogR2V0IGEgYFNlbWlncm91cGAgYmFzZWQgb24gdGhlIGNvbmNhdGVuYXRpb24gb2YgYEFycmF5YHMuXG4gKiBTZWUgYWxzbyBbYGdldE1vbm9pZGBdKCNnZXRNb25vaWQpLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRTZW1pZ3JvdXAgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBjb25zdCBTID0gZ2V0U2VtaWdyb3VwPG51bWJlcj4oKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5jb25jYXQoWzEsIDJdLCBbMiwgM10pLCBbMSwgMiwgMiwgM10pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0LmNvbmNhdChzZWNvbmQpOyB9XG59KTsgfTtcbi8qKlxuICogUmV0dXJucyBhIGBNb25vaWRgIGZvciBgQXJyYXk8QT5gIGJhc2VkIG9uIHRoZSBjb25jYXRlbmF0aW9uIG9mIGBBcnJheWBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBjb25zdCBNID0gZ2V0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChbMSwgMl0sIFszLCA0XSksIFsxLCAyLCAzLCA0XSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRNb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwKCkuY29uY2F0LFxuICAgIGVtcHR5OiBbXVxufSk7IH07XG4vKipcbiAqIERlcml2ZXMgYW4gYEVxYCBvdmVyIHRoZSBgQXJyYXlgIG9mIGEgZ2l2ZW4gZWxlbWVudCB0eXBlIGZyb20gdGhlIGBFcWAgb2YgdGhhdCB0eXBlLiBUaGUgZGVyaXZlZCBgRXFgIGRlZmluZXMgdHdvXG4gKiBhcnJheXMgYXMgZXF1YWwgaWYgYWxsIGVsZW1lbnRzIG9mIGJvdGggYXJyYXlzIGFyZSBjb21wYXJlZCBlcXVhbCBwYWlyd2lzZSB3aXRoIHRoZSBnaXZlbiBgRWAuIEluIGNhc2Ugb2YgYXJyYXlzIG9mXG4gKiBkaWZmZXJlbnQgbGVuZ3RocywgdGhlIHJlc3VsdCBpcyBub24gZXF1YWxpdHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgZ2V0RXEgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBjb25zdCBFID0gZ2V0RXEoUy5FcSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhbJ2EnLCAnYiddLCBbJ2EnLCAnYiddKSwgdHJ1ZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhbJ2EnXSwgW10pLCBmYWxzZSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRFcSA9IFJBLmdldEVxO1xuLyoqXG4gKiBEZXJpdmVzIGFuIGBPcmRgIG92ZXIgdGhlIGBBcnJheWAgb2YgYSBnaXZlbiBlbGVtZW50IHR5cGUgZnJvbSB0aGUgYE9yZGAgb2YgdGhhdCB0eXBlLiBUaGUgb3JkZXJpbmcgYmV0d2VlbiB0d28gc3VjaFxuICogYXJyYXlzIGlzIGVxdWFsIHRvOiB0aGUgZmlyc3Qgbm9uIGVxdWFsIGNvbXBhcmlzb24gb2YgZWFjaCBhcnJheXMgZWxlbWVudHMgdGFrZW4gcGFpcndpc2UgaW4gaW5jcmVhc2luZyBvcmRlciwgaW5cbiAqIGNhc2Ugb2YgZXF1YWxpdHkgb3ZlciBhbGwgdGhlIHBhaXJ3aXNlIGVsZW1lbnRzOyB0aGUgbG9uZ2VzdCBhcnJheSBpcyBjb25zaWRlcmVkIHRoZSBncmVhdGVzdCwgaWYgYm90aCBhcnJheXMgaGF2ZVxuICogdGhlIHNhbWUgbGVuZ3RoLCB0aGUgcmVzdWx0IGlzIGVxdWFsaXR5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRPcmQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIGNvbnN0IE8gPSBnZXRPcmQoUy5PcmQpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKFsnYiddLCBbJ2EnXSksIDEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKFsnYSddLCBbJ2EnXSksIDApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKFsnYSddLCBbJ2InXSksIC0xKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE9yZCA9IFJBLmdldE9yZDtcbi8qKlxuICogR2V0IGEgYFNlbWlncm91cGAgYmFzZWQgb24gdGhlIHVuaW9uIG9mIHRoZSBlbGVtZW50cyBvZiBgQXJyYXlgcy5cbiAqIEVsZW1lbnRzIHdoaWNoIGVxdWFsIGFjY29yZGluZyB0byB0aGUgcHJvdmlkZWQgYEVxYCBhcmUgaW5jbHVkZWRcbiAqIG9ubHkgb25jZSBpbiB0aGUgcmVzdWx0LlxuICogU2VlIGFsc28gW2BnZXRVbmlvbk1vbm9pZGBdKCNnZXRVbmlvbk1vbm9pZCkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldFVuaW9uU2VtaWdyb3VwIH0gZnJvbSAnZnAtdHMvQXJyYXknO1xuICogaW1wb3J0IHsgRXEgfSBmcm9tICdmcC10cy9udW1iZXInO1xuICpcbiAqIGNvbnN0IFMgPSBnZXRVbmlvblNlbWlncm91cDxudW1iZXI+KEVxKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5jb25jYXQoWzEsIDJdLCBbMiwgM10pLCBbMSwgMiwgM10pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIHVuaW9uRSA9IHVuaW9uKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBHZXQgYSBgTW9ub2lkYCBiYXNlZCBvbiB0aGUgdW5pb24gb2YgdGhlIGVsZW1lbnRzIG9mIGBBcnJheWBzLlxuICogRWxlbWVudHMgd2hpY2ggZXF1YWwgYWNjb3JkaW5nIHRvIHRoZSBwcm92aWRlZCBgRXFgIGFyZSBpbmNsdWRlZFxuICogb25seSBvbmNlIGluIHRoZSByZXN1bHQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldFVuaW9uTW9ub2lkIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBFcSB9IGZyb20gJ2ZwLXRzL251bWJlcic7XG4gKlxuICogY29uc3QgTSA9IGdldFVuaW9uTW9ub2lkPG51bWJlcj4oRXEpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChbMSwgMl0sIFsyLCAzXSksIFsxLCAyLCAzXSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uZW1wdHksW10pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvbk1vbm9pZCA9IGZ1bmN0aW9uIChFKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZ2V0VW5pb25TZW1pZ3JvdXAoRSkuY29uY2F0LFxuICAgIGVtcHR5OiBbXVxufSk7IH07XG4vKipcbiAqIEdldCBhIGBTZW1pZ3JvdXBgIGJhc2VkIG9uIHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhlIGVsZW1lbnRzIG9mIGBBcnJheWBzLlxuICogT25seSBlbGVtZW50cyBwcmVzZW50IGluIHRoZSB0d28gYXJyYXlzIHdoaWNoIGFyZSBlcXVhbCBhY2NvcmRpbmcgdG8gdGhlXG4gKiBwcm92aWRlZCBgRXFgIGFyZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IEVxIH0gZnJvbSAnZnAtdHMvbnVtYmVyJztcbiAqXG4gKiBjb25zdCBTID0gZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwPG51bWJlcj4oRXEpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLmNvbmNhdChbMSwgMl0sIFsyLCAzXSksIFsyXSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldEludGVyc2VjdGlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIGludGVyc2VjdGlvbkUgPSBpbnRlcnNlY3Rpb24oRSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gaW50ZXJzZWN0aW9uRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBHZXQgYSBgTWFnbWFgIGZvciBgQXJyYXlgIHdoZXJlIHRoZSBgY29uY2F0YCBmdW5jdGlvbiBpcyB0aGUgZGlmZmVybmNlIGJldHdlZW5cbiAqIHRoZSBmaXJzdCBhbmQgdGhlIHNlY29uZCBhcnJheSwgaS5lLiB0aGUgcmVzdWx0IGNvbnRhaW5zIGFsbCB0aGUgZWxlbWVudHMgb2YgdGhlXG4gKiBmaXJzdCBhcnJheSBmb3Igd2hpY2ggdGhlaXIgaXMgbm8gZXF1YWwgZWxlbWVudCBpbiB0aGUgc2Vjb25kIGFycmF5IGFjY29yZGluZ1xuICogdG8gdGhlIGBFcWAgcHJvdmlkZWQuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXREaWZmZXJlbmNlTWFnbWEgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IEVxIH0gZnJvbSAnZnAtdHMvbnVtYmVyJztcbiAqXG4gKiBjb25zdCBTID0gZ2V0RGlmZmVyZW5jZU1hZ21hPG51bWJlcj4oRXEpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLmNvbmNhdChbMSwgMl0sIFsyLCAzXSksIFsxXSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldERpZmZlcmVuY2VNYWdtYSA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIGRpZmZlcmVuY2VFID0gZGlmZmVyZW5jZShFKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBkaWZmZXJlbmNlRShzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogR2l2ZW4gYW4gaW5wdXQgYW4gYEFycmF5YCBvZiBmdW5jdGlvbnMsIGBmbGFwYCByZXR1cm5zIGFuIGBBcnJheWAgY29udGFpbmluZ1xuICogdGhlIHJlc3VsdHMgb2YgYXBwbHlpbmcgZWFjaCBmdW5jdGlvbiB0byB0aGUgZ2l2ZW4gaW5wdXQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZsYXAgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBjb25zdCBmdW5zID0gW1xuICogICAobjogbnVtYmVyKSA9PiBgRG91YmxlOiAke24gKiAyfWAsXG4gKiAgIChuOiBudW1iZXIpID0+IGBUcmlwbGU6ICR7biAqIDN9YCxcbiAqICAgKG46IG51bWJlcikgPT4gYFNxdWFyZTogJHtuICogbn1gLFxuICogXTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmxhcCg0KShmdW5zKSwgWydEb3VibGU6IDgnLCAnVHJpcGxlOiAxMicsICdTcXVhcmU6IDE2J10pO1xuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhcCA9IC8qI19fUFVSRV9fKi8gZmxhcF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBQb2ludGVkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvcldpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbHkgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBcbn07XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgYXBGaXJzdCA9IC8qI19fUFVSRV9fKi8gYXBGaXJzdF8oQXBwbHkpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIHNlY29uZC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcFNlY29uZCA9IC8qI19fUFVSRV9fKi8gYXBTZWNvbmRfKEFwcGx5KTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbGljYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQ2hhaW4gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBBIGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIEEuY2hhaW5GaXJzdCgoKSA9PiBbJ2EnLCAnYiddKVxuICogICApLFxuICogICBbMSwgMSwgMiwgMiwgMywgM11cbiAqIClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgWzEsIDIsIDNdLFxuICogICAgIEEuY2hhaW5GaXJzdCgoKSA9PiBbXSlcbiAqICAgKSxcbiAqICAgW11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IFxuLyojX19QVVJFX18qLyBjaGFpbkZpcnN0XyhDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIE1vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVW5mb2xkYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICB1bmZvbGQ6IHVuZm9sZFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQWx0ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhbHQ6IF9hbHRcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBaZXJvID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHplcm86IHplcm9cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGd1YXJkID0gLyojX19QVVJFX18qLyBndWFyZF8oWmVybywgUG9pbnRlZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdGVybmF0aXZlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBhbHQ6IF9hbHQsXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRXh0ZW5kID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmRcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIENvbXBhY3RhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGaWx0ZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgcGFydGl0aW9uTWFwV2l0aEluZGV4OiBfcGFydGl0aW9uTWFwV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbldpdGhJbmRleDogX3BhcnRpdGlvbldpdGhJbmRleCxcbiAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IF9maWx0ZXJNYXBXaXRoSW5kZXgsXG4gICAgZmlsdGVyV2l0aEluZGV4OiBfZmlsdGVyV2l0aEluZGV4XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogX3RyYXZlcnNlV2l0aEluZGV4XG59O1xudmFyIF93aXRoZXIgPSAvKiNfX1BVUkVfXyovIHdpdGhlckRlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbnZhciBfd2lsdCA9IC8qI19fUFVSRV9fKi8gd2lsdERlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgV2l0aGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpblJlY0RlcHRoRmlyc3QgPSBSQS5jaGFpblJlY0RlcHRoRmlyc3Q7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpblJlY0RlcHRoRmlyc3QgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgY2hhaW5SZWM6IF9jaGFpblJlY0RlcHRoRmlyc3Rcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5SZWNCcmVhZHRoRmlyc3QgPSBSQS5jaGFpblJlY0JyZWFkdGhGaXJzdDtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIENoYWluUmVjQnJlYWR0aEZpcnN0ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIGNoYWluUmVjOiBfY2hhaW5SZWNCcmVhZHRoRmlyc3Rcbn07XG4vKipcbiAqIEZpbHRlciB2YWx1ZXMgaW5zaWRlIGEgY29udGV4dC5cbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyRSA9IC8qI19fUFVSRV9fKi8gZmlsdGVyRV8oV2l0aGVyYWJsZSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBGcm9tRWl0aGVyID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGZyb21FaXRoZXI6IGZyb21FaXRoZXJcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVpdGhlcksgPSAvKiNfX1BVUkVfXyovIGZyb21FaXRoZXJLXyhGcm9tRWl0aGVyKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHVuc2FmZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgdW5zYWZlXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVJbnNlcnRBdCA9IE5FQS51bnNhZmVJbnNlcnRBdDtcbi8qKlxuICogQGNhdGVnb3J5IHVuc2FmZVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdW5zYWZlVXBkYXRlQXQgPSBmdW5jdGlvbiAoaSwgYSwgYXMpIHtcbiAgICByZXR1cm4gaXNOb25FbXB0eShhcykgPyBORUEudW5zYWZlVXBkYXRlQXQoaSwgYSwgYXMpIDogW107XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdW5zYWZlXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVEZWxldGVBdCA9IGZ1bmN0aW9uIChpLCBhcykge1xuICAgIHZhciB4cyA9IGFzLnNsaWNlKCk7XG4gICAgeHMuc3BsaWNlKGksIDEpO1xuICAgIHJldHVybiB4cztcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBgZXZlcnlgIHRlbGxzIGlmIHRoZSBwcm92aWRlZCBwcmVkaWNhdGUgaG9sZHMgdHJ1ZSBmb3IgZXZlcnkgZWxlbWVudCBpbiB0aGUgYEFycmF5YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZXZlcnkgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZXF1YWwoZXZlcnkoKHg6IG51bWJlcikgPT4geCA+PSAwKShbMSwgMiwgM10pLCB0cnVlKTtcbiAqIGFzc2VydC5lcXVhbChldmVyeSgoeDogbnVtYmVyKSA9PiB4ID49IDApKFstMSwgMiwgM10pLCBmYWxzZSk7XG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgZXZlcnkgPSBSQS5ldmVyeTtcbi8qKlxuICogYHNvbWVgIHRlbGxzIGlmIHRoZSBwcm92aWRlZCBwcmVkaWNhdGUgaG9sZHMgdHJ1ZSBhdCBsZWFzdCBmb3Igb25lIGVsZW1lbnQgaW4gdGhlIGBBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZXF1YWwoc29tZSgoeDogbnVtYmVyKSA9PiB4ID49IDApKFsxLCAyLCAzXSksIHRydWUpO1xuICogYXNzZXJ0LmVxdWFsKHNvbWUoKHg6IG51bWJlcikgPT4geCA+PSAxMCkoWzEsIDIsIDNdKSwgZmFsc2UpO1xuICpcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHNvbWUgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gYXMuc29tZShwcmVkaWNhdGUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBbGlhcyBvZiBbYHNvbWVgXSgjc29tZSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZXhpc3RzID0gc29tZTtcbi8qKlxuICogUGxhY2VzIGFuIGVsZW1lbnQgaW4gYmV0d2VlbiBtZW1iZXJzIG9mIGFuIGBBcnJheWAsIHRoZW4gZm9sZHMgdGhlIHJlc3VsdHMgdXNpbmcgdGhlIHByb3ZpZGVkIGBNb25vaWRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCB7IGludGVyY2FsYXRlIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcmNhbGF0ZShTLk1vbm9pZCkoJy0nKShbJ2EnLCAnYicsICdjJ10pLCAnYS1iLWMnKVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcmNhbGF0ZSA9IFJBLmludGVyY2FsYXRlO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZG8gbm90YXRpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBEbyA9IC8qI19fUFVSRV9fKi8gb2YoXy5lbXB0eVJlY29yZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZFRvID0gLyojX19QVVJFX18qLyBiaW5kVG9fKEZ1bmN0b3IpO1xudmFyIGxldF8gPSAvKiNfX1BVUkVfXyovIGxldF9fKEZ1bmN0b3IpO1xuZXhwb3J0IHsgXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTMuMFxuICovXG5sZXRfIGFzIGxldCB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmQgPSAvKiNfX1BVUkVfXyovIGJpbmRfKENoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBhcFMgPSAvKiNfX1BVUkVfXyovIGFwU18oQXBwbHkpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFVzZSBgTm9uRW1wdHlBcnJheWAgbW9kdWxlIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciByYW5nZSA9IE5FQS5yYW5nZTtcbi8qKlxuICogVXNlIGEgbmV3IGBbXWAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gW107XG4vKipcbiAqIFVzZSBgcHJlcGVuZGAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGNvbnMgPSBORUEuY29ucztcbi8qKlxuICogVXNlIGBhcHBlbmRgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBzbm9jID0gTkVBLnNub2M7XG4vKipcbiAqIFVzZSBgcHJlcGVuZEFsbGAgaW5zdGVhZFxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi45LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcHJlcGVuZFRvQWxsID0gcHJlcGVuZEFsbDtcbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgQS5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBBLmFycmF5YFxuICogKHdoZXJlIGBBYCBpcyBmcm9tIGBpbXBvcnQgQSBmcm9tICdmcC10cy9BcnJheSdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgYXJyYXkgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uTWFwV2l0aEluZGV4OiBfcGFydGl0aW9uTWFwV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbldpdGhJbmRleDogX3BhcnRpdGlvbldpdGhJbmRleCxcbiAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IF9maWx0ZXJNYXBXaXRoSW5kZXgsXG4gICAgZmlsdGVyV2l0aEluZGV4OiBfZmlsdGVyV2l0aEluZGV4LFxuICAgIGFsdDogX2FsdCxcbiAgICB6ZXJvOiB6ZXJvLFxuICAgIHVuZm9sZDogdW5mb2xkLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXgsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbiIsCiAgImltcG9ydCB7IGFwRmlyc3QgYXMgYXBGaXJzdF8sIGFwUyBhcyBhcFNfLCBhcFNlY29uZCBhcyBhcFNlY29uZF8gfSBmcm9tICcuL0FwcGx5JztcbmltcG9ydCB7IGJpbmQgYXMgYmluZF8sIGNoYWluRmlyc3QgYXMgY2hhaW5GaXJzdF8gfSBmcm9tICcuL0NoYWluJztcbmltcG9ydCB7IGZyb21FaXRoZXJLIGFzIGZyb21FaXRoZXJLXyB9IGZyb20gJy4vRnJvbUVpdGhlcic7XG5pbXBvcnQgeyBkdWFsLCBpZGVudGl0eSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgYmluZFRvIGFzIGJpbmRUb18sIGZsYXAgYXMgZmxhcF8sIGxldCBhcyBsZXRfXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0ICogYXMgTkVBIGZyb20gJy4vTm9uRW1wdHlBcnJheSc7XG5pbXBvcnQgKiBhcyBSQSBmcm9tICcuL1JlYWRvbmx5QXJyYXknO1xuaW1wb3J0IHsgc2VwYXJhdGVkIH0gZnJvbSAnLi9TZXBhcmF0ZWQnO1xuaW1wb3J0IHsgZmlsdGVyRSBhcyBmaWx0ZXJFXywgd2lsdERlZmF1bHQsIHdpdGhlckRlZmF1bHQgfSBmcm9tICcuL1dpdGhlcmFibGUnO1xuaW1wb3J0IHsgZ3VhcmQgYXMgZ3VhcmRfIH0gZnJvbSAnLi9aZXJvJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFRlc3Qgd2hldGhlciBhbiBhcnJheSBpcyBlbXB0eVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzRW1wdHkoW10pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzRW1wdHkoWydhJ10pLCBmYWxzZSlcbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGlzRW1wdHkgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIGFzLmxlbmd0aCA9PT0gMDsgfTtcbi8qKlxuICogVGVzdCB3aGV0aGVyIGFuIGFycmF5IGlzIG5vbiBlbXB0eSBuYXJyb3dpbmcgZG93biB0aGUgdHlwZSB0byBgTm9uRW1wdHlBcnJheTxBPmBcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaXNOb25FbXB0eSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc05vbkVtcHR5KFtdKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNOb25FbXB0eShbJ2EnXSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc05vbkVtcHR5ID0gTkVBLmlzTm9uRW1wdHk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUHJlcGVuZCBhbiBlbGVtZW50IHRvIHRoZSBmcm9udCBvZiBhIGBBcnJheWAsIGNyZWF0aW5nIGEgbmV3IGBOb25FbXB0eUFycmF5YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcHJlcGVuZCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbMiwgMywgNF0sIHByZXBlbmQoMSkpLCBbMSwgMiwgMywgNF0pXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHByZXBlbmQgPSBORUEucHJlcGVuZDtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYHByZXBlbmRgXSgjcHJlcGVuZCkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHByZXBlbmRXIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFsyLCAzLCA0XSwgcHJlcGVuZFcoXCJhXCIpKSwgW1wiYVwiLCAyLCAzLCA0XSk7XG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRXID0gTkVBLnByZXBlbmRXO1xuLyoqXG4gKiBBcHBlbmQgYW4gZWxlbWVudCB0byB0aGUgZW5kIG9mIGEgYEFycmF5YCwgY3JlYXRpbmcgYSBuZXcgYE5vbkVtcHR5QXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBhcHBlbmQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWzEsIDIsIDNdLCBhcHBlbmQoNCkpLCBbMSwgMiwgMywgNF0pXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGFwcGVuZCA9IE5FQS5hcHBlbmQ7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhcHBlbmRgXSgjYXBwZW5kKS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgYXBwZW5kVyB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbMSwgMiwgM10sIGFwcGVuZFcoXCJkXCIpKSwgWzEsIDIsIDMsIFwiZFwiXSk7XG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFwcGVuZFcgPSBORUEuYXBwZW5kVztcbi8qKlxuICogUmV0dXJuIGEgYEFycmF5YCBvZiBsZW5ndGggYG5gIHdpdGggZWxlbWVudCBgaWAgaW5pdGlhbGl6ZWQgd2l0aCBgZihpKWAuXG4gKlxuICogKipOb3RlKiouIGBuYCBpcyBub3JtYWxpemVkIHRvIGEgbm9uIG5lZ2F0aXZlIGludGVnZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1ha2VCeSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IGRvdWJsZSA9IChpOiBudW1iZXIpOiBudW1iZXIgPT4gaSAqIDJcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobWFrZUJ5KDUsIGRvdWJsZSksIFswLCAyLCA0LCA2LCA4XSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobWFrZUJ5KC0zLCBkb3VibGUpLCBbXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobWFrZUJ5KDQuMzIxNjQsIGRvdWJsZSksIFswLCAyLCA0LCA2XSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYWtlQnkgPSBmdW5jdGlvbiAobiwgZikgeyByZXR1cm4gKG4gPD0gMCA/IFtdIDogTkVBLm1ha2VCeShmKShuKSk7IH07XG4vKipcbiAqIENyZWF0ZSBhIGBBcnJheWAgY29udGFpbmluZyBhIHZhbHVlIHJlcGVhdGVkIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLlxuICpcbiAqICoqTm90ZSoqLiBgbmAgaXMgbm9ybWFsaXplZCB0byBhIG5vbiBuZWdhdGl2ZSBpbnRlZ2VyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXBsaWNhdGUgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJlcGxpY2F0ZSgzLCAnYScpLCBbJ2EnLCAnYScsICdhJ10pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJlcGxpY2F0ZSgtMywgJ2EnKSwgW10pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJlcGxpY2F0ZSgyLjk4NTY0NywgJ2EnKSwgWydhJywgJ2EnXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZXBsaWNhdGUgPSBmdW5jdGlvbiAobiwgYSkgeyByZXR1cm4gbWFrZUJ5KG4sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGE7IH0pOyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21QcmVkaWNhdGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiAocHJlZGljYXRlKGEpID8gW2FdIDogW10pOyB9O1xufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29udmVyc2lvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQ3JlYXRlIGFuIGFycmF5IGZyb20gYW4gYE9wdGlvbmAuIFRoZSByZXN1bHRpbmcgYXJyYXkgd2lsbCBjb250YWluIHRoZSBjb250ZW50IG9mIHRoZVxuICogYE9wdGlvbmAgaWYgaXQgaXMgYFNvbWVgIGFuZCBpdCB3aWxsIGJlIGVtcHR5IGlmIHRoZSBgT3B0aW9uYCBpcyBgTm9uZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZyb21PcHRpb24gfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gXCJmcC10c1wiO1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShvcHRpb24uc29tZShcImFcIiksIGZyb21PcHRpb24pLFtcImFcIl0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUob3B0aW9uLm5vbmUsIGZyb21PcHRpb24pLFtdKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGZyb21PcHRpb24gPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChfLmlzTm9uZShtYSkgPyBbXSA6IFttYS52YWx1ZV0pOyB9O1xuLyoqXG4gKiBDcmVhdGUgYW4gYXJyYXkgZnJvbSBhbiBgRWl0aGVyYC4gVGhlIHJlc3VsdGluZyBhcnJheSB3aWxsIGNvbnRhaW4gdGhlIGNvbnRlbnQgb2YgdGhlXG4gKiBgRWl0aGVyYCBpZiBpdCBpcyBgUmlnaHRgIGFuZCBpdCB3aWxsIGJlIGVtcHR5IGlmIHRoZSBgRWl0aGVyYCBpcyBgTGVmdGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZyb21FaXRoZXIgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IGVpdGhlciB9IGZyb20gXCJmcC10c1wiO1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShlaXRoZXIucmlnaHQoXCJyXCIpLCBmcm9tRWl0aGVyKSwgW1wiclwiXSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoZWl0aGVyLmxlZnQoXCJsXCIpLCBmcm9tRWl0aGVyKSwgW10pO1xuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGZyb21FaXRoZXIgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gKF8uaXNMZWZ0KGUpID8gW10gOiBbZS5yaWdodF0pOyB9O1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgbWF0Y2hgXSgjbWF0Y2gpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBoYW5kbGVyIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWF0Y2hXIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgbWF0Y2hlclcgPSBtYXRjaFcoXG4gKiAgICgpID0+IFwiTm8gZWxlbWVudHNcIixcbiAqICAgKGFzKSA9PiBhcy5sZW5ndGhcbiAqICk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWzEsIDIsIDMsIDRdLCBtYXRjaGVyVyksIDQpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFtdLCBtYXRjaGVyVyksIFwiTm8gZWxlbWVudHNcIik7XG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaFcgPSBmdW5jdGlvbiAob25FbXB0eSwgb25Ob25FbXB0eSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gb25Ob25FbXB0eShhcykgOiBvbkVtcHR5KCk7XG4gICAgfTtcbn07XG4vKipcbiAqIFRha2VzIGFuIGFycmF5LCBpZiB0aGUgYXJyYXkgaXMgZW1wdHkgaXQgcmV0dXJucyB0aGUgcmVzdWx0IG9mIGBvbkVtcHR5YCwgb3RoZXJ3aXNlXG4gKiBpdCBwYXNzZXMgdGhlIGFycmF5IHRvIGBvbk5vbkVtcHR5YCBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYXRjaCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IG1hdGNoZXIgPSBtYXRjaChcbiAqICAgKCkgPT4gXCJObyBlbGVtZW50c1wiLFxuICogICAoYXMpID0+IGBGb3VuZCAke2FzLmxlbmd0aH0gZWxlbWVudChzKWBcbiAqICk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoWzEsIDIsIDMsIDRdLCBtYXRjaGVyKSwgXCJGb3VuZCA0IGVsZW1lbnQocylcIik7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoW10sIG1hdGNoZXIpLCBcIk5vIGVsZW1lbnRzXCIpO1xuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2ggPSBtYXRjaFc7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaExlZnRgXSgjbWF0Y2hsZWZ0KS4gSXQgd2lsbCB3b3JrIHdoZW4gYG9uRW1wdHlgIGFuZFxuICogYG9uTm9uRW1wdHlgIGhhdmUgZGlmZmVyZW50IHJldHVybiB0eXBlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWF0Y2hMZWZ0VyB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IGYgPSBtYXRjaExlZnRXKFxuICogICAoKSA9PiAwLFxuICogICAoaGVhZDogc3RyaW5nLCB0YWlsOiBzdHJpbmdbXSkgPT4gYEZvdW5kIFwiJHtoZWFkfVwiIGZvbGxvd2VkIGJ5ICR7dGFpbC5sZW5ndGh9IGVsZW1lbnRzYFxuICogKTtcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChmKFtcImFcIiwgXCJiXCIsIFwiY1wiXSksICdGb3VuZCBcImFcIiBmb2xsb3dlZCBieSAyIGVsZW1lbnRzJyk7XG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoZihbXSksIDApO1xuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hMZWZ0VyA9IGZ1bmN0aW9uIChvbkVtcHR5LCBvbk5vbkVtcHR5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gaXNOb25FbXB0eShhcykgPyBvbk5vbkVtcHR5KE5FQS5oZWFkKGFzKSwgTkVBLnRhaWwoYXMpKSA6IG9uRW1wdHkoKTtcbiAgICB9O1xufTtcbi8qKlxuICogVGFrZXMgYW4gYXJyYXksIGlmIHRoZSBhcnJheSBpcyBlbXB0eSBpdCByZXR1cm5zIHRoZSByZXN1bHQgb2YgYG9uRW1wdHlgLCBvdGhlcndpc2VcbiAqIGl0IHBhc3NlcyB0aGUgYXJyYXkgdG8gYG9uTm9uRW1wdHlgIGJyb2tlbiBpbnRvIGl0cyBmaXJzdCBlbGVtZW50IGFuZCByZW1haW5pbmcgZWxlbWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1hdGNoTGVmdCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IGxlbjogPEE+KGFzOiBBcnJheTxBPikgPT4gbnVtYmVyID0gbWF0Y2hMZWZ0KCgpID0+IDAsIChfLCB0YWlsKSA9PiAxICsgbGVuKHRhaWwpKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGxlbihbMSwgMiwgM10pLCAzKVxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hMZWZ0ID0gbWF0Y2hMZWZ0Vztcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaExlZnRgXSgjbWF0Y2hsZWZ0KS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZExlZnQgPSBtYXRjaExlZnQ7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaFJpZ2h0YF0oI21hdGNocmlnaHQpLiBJdCB3aWxsIHdvcmsgd2hlbiBgb25FbXB0eWAgYW5kXG4gKiBgb25Ob25FbXB0eWAgaGF2ZSBkaWZmZXJlbnQgcmV0dXJuIHR5cGVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYXRjaFJpZ2h0VyB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IGYgPSBtYXRjaFJpZ2h0VyhcbiAqICAgKCkgPT4gMCxcbiAqICAgKGhlYWQ6IHN0cmluZ1tdLCB0YWlsOiBzdHJpbmcpID0+IGBGb3VuZCAke2hlYWQubGVuZ3RofSBlbGVtZW50cyBmb2xsbG93ZWQgYnkgXCIke3RhaWx9XCJgXG4gKiApO1xuICogYXNzZXJ0LnN0cmljdEVxdWFsKGYoW1wiYVwiLCBcImJcIiwgXCJjXCJdKSwgJ0ZvdW5kIDIgZWxlbWVudHMgZm9sbGxvd2VkIGJ5IFwiY1wiJyk7XG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoZihbXSksIDApO1xuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hSaWdodFcgPSBmdW5jdGlvbiAob25FbXB0eSwgb25Ob25FbXB0eSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkoYXMpID8gb25Ob25FbXB0eShORUEuaW5pdChhcyksIE5FQS5sYXN0KGFzKSkgOiBvbkVtcHR5KCk7XG4gICAgfTtcbn07XG4vKipcbiAqIFRha2VzIGFuIGFycmF5LCBpZiB0aGUgYXJyYXkgaXMgZW1wdHkgaXQgcmV0dXJucyB0aGUgcmVzdWx0IG9mIGBvbkVtcHR5YCwgb3RoZXJ3aXNlXG4gKiBpdCBwYXNzZXMgdGhlIGFycmF5IHRvIGBvbk5vbkVtcHR5YCBicm9rZW4gIGludG8gaXRzIGluaXRpYWwgZWxlbWVudHMgYW5kIHRoZSBsYXN0IGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1hdGNoUmlnaHQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBjb25zdCBsZW46IDxBPihhczogQXJyYXk8QT4pID0+IG51bWJlciA9IG1hdGNoUmlnaHQoXG4gKiAgICgpID0+IDAsXG4gKiAgIChoZWFkLCBfKSA9PiAxICsgbGVuKGhlYWQpXG4gKiApO1xuICogYXNzZXJ0LnN0cmljdEVxdWFsKGxlbihbMSwgMiwgM10pLCAzKTtcbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoUmlnaHQgPSBtYXRjaFJpZ2h0Vztcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaFJpZ2h0YF0oI21hdGNocmlnaHQpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkUmlnaHQgPSBtYXRjaFJpZ2h0O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29tYmluYXRvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogU2FtZSBhcyBbYGNoYWluYF0oI2NoYWluKSwgYnV0IHBhc3NpbmcgYWxzbyB0aGUgaW5kZXggdG8gdGhlIGl0ZXJhdGluZyBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY2hhaW5XaXRoSW5kZXgsIHJlcGxpY2F0ZSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGYgPSAoaW5kZXg6IG51bWJlciwgeDogc3RyaW5nKSA9PiByZXBsaWNhdGUoMiwgYCR7eH0ke2luZGV4fWApO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFtcImFcIiwgXCJiXCIsIFwiY1wiXSwgY2hhaW5XaXRoSW5kZXgoZikpLCBbXCJhMFwiLCBcImEwXCIsIFwiYjFcIiwgXCJiMVwiLCBcImMyXCIsIFwiYzJcIl0pO1xuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbldpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoLmFwcGx5KG91dCwgZihpLCBhc1tpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFNhbWUgYXMgYHJlZHVjZWAgYnV0IGl0IGNhcnJpZXMgb3ZlciB0aGUgaW50ZXJtZWRpYXRlIHN0ZXBzXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNjYW5MZWZ0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzY2FuTGVmdCgxMCwgKGIsIGE6IG51bWJlcikgPT4gYiAtIGEpKFsxLCAyLCAzXSksIFsxMCwgOSwgNywgNF0pXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc2NhbkxlZnQgPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIGxlbiA9IGFzLmxlbmd0aDtcbiAgICAgICAgdmFyIG91dCA9IG5ldyBBcnJheShsZW4gKyAxKTtcbiAgICAgICAgb3V0WzBdID0gYjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb3V0W2kgKyAxXSA9IGYob3V0W2ldLCBhc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogRm9sZCBhbiBhcnJheSBmcm9tIHRoZSByaWdodCwga2VlcGluZyBhbGwgaW50ZXJtZWRpYXRlIHJlc3VsdHMgaW5zdGVhZCBvZiBvbmx5IHRoZSBmaW5hbCByZXN1bHRcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2NhblJpZ2h0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzY2FuUmlnaHQoMTAsIChhOiBudW1iZXIsIGIpID0+IGIgLSBhKShbMSwgMiwgM10pLCBbNCwgNSwgNywgMTBdKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNjYW5SaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbGVuID0gYXMubGVuZ3RoO1xuICAgICAgICB2YXIgb3V0ID0gbmV3IEFycmF5KGxlbiArIDEpO1xuICAgICAgICBvdXRbbGVuXSA9IGI7XG4gICAgICAgIGZvciAodmFyIGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgb3V0W2ldID0gZihhc1tpXSwgb3V0W2kgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYSBgQXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzaXplIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKHNpemUoW1wiYVwiLFwiYlwiLFwiY1wiXSksMylcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgc2l6ZSA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMubGVuZ3RoOyB9O1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYW4gYXJyYXkgY29udGFpbnMgYSBwYXJ0aWN1bGFyIGluZGV4XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGlzT3V0T2ZCb3VuZCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc091dE9mQm91bmQoMSxbXCJhXCIsXCJiXCIsXCJjXCJdKSxmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc091dE9mQm91bmQoLTEsW1wiYVwiLFwiYlwiLFwiY1wiXSksdHJ1ZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc091dE9mQm91bmQoMyxbXCJhXCIsXCJiXCIsXCJjXCJdKSx0cnVlKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGlzT3V0T2ZCb3VuZCA9IE5FQS5pc091dE9mQm91bmQ7XG4vLyBUT0RPOiByZW1vdmUgbm9uLWN1cnJpZWQgb3ZlcmxvYWRpbmcgaW4gdjNcbi8qKlxuICogVGhpcyBmdW5jdGlvbiBwcm92aWRlcyBhIHNhZmUgd2F5IHRvIHJlYWQgYSB2YWx1ZSBhdCBhIHBhcnRpY3VsYXIgaW5kZXggZnJvbSBhbiBhcnJheS5cbiAqIEl0IHJldHVybnMgYSBgbm9uZWAgaWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHMsIGFuZCBhIGBzb21lYCBvZiB0aGUgZWxlbWVudCBpZiB0aGVcbiAqIGluZGV4IGlzIHZhbGlkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBsb29rdXAgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFsxLCAyLCAzXSwgbG9va3VwKDEpKSwgc29tZSgyKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbMSwgMiwgM10sIGxvb2t1cCgzKSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbG9va3VwID0gUkEubG9va3VwO1xuLyoqXG4gKiBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgaW4gYW4gYXJyYXksIG9yIGBOb25lYCBpZiB0aGUgYXJyYXkgaXMgZW1wdHlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaGVhZCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGhlYWQoWzEsIDIsIDNdKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaGVhZChbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgaGVhZCA9IFJBLmhlYWQ7XG4vKipcbiAqIEdldCB0aGUgbGFzdCBlbGVtZW50IGluIGFuIGFycmF5LCBvciBgTm9uZWAgaWYgdGhlIGFycmF5IGlzIGVtcHR5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGxhc3QgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChsYXN0KFsxLCAyLCAzXSksIHNvbWUoMykpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGxhc3QoW10pLCBub25lKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGxhc3QgPSBSQS5sYXN0O1xuLyoqXG4gKiBHZXQgYWxsIGJ1dCB0aGUgZmlyc3QgZWxlbWVudCBvZiBhbiBhcnJheSwgY3JlYXRpbmcgYSBuZXcgYXJyYXksIG9yIGBOb25lYCBpZiB0aGUgYXJyYXkgaXMgZW1wdHlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdGFpbCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRhaWwoWzEsIDIsIDNdKSwgc29tZShbMiwgM10pKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWlsKFtdKSwgbm9uZSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0YWlsID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBfLnNvbWUoTkVBLnRhaWwoYXMpKSA6IF8ubm9uZSk7IH07XG4vKipcbiAqIEdldCBhbGwgYnV0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXksIGNyZWF0aW5nIGEgbmV3IGFycmF5LCBvciBgTm9uZWAgaWYgdGhlIGFycmF5IGlzIGVtcHR5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluaXQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbml0KFsxLCAyLCAzXSksIHNvbWUoWzEsIDJdKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5pdChbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgaW5pdCA9IGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gXy5zb21lKE5FQS5pbml0KGFzKSkgOiBfLm5vbmUpOyB9O1xuLyoqXG4gKiBLZWVwIG9ubHkgYSBtYXggbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIHN0YXJ0IG9mIGFuIGBBcnJheWAsIGNyZWF0aW5nIGEgbmV3IGBBcnJheWAuXG4gKlxuICogKipOb3RlKiouIGBuYCBpcyBub3JtYWxpemVkIHRvIGEgbm9uIG5lZ2F0aXZlIGludGVnZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHRha2VMZWZ0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWtlTGVmdCgyKShbMSwgMiwgMywgNCwgNV0pLCBbMSwgMl0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWtlTGVmdCg3KShbMSwgMiwgMywgNCwgNV0pLCBbMSwgMiwgMywgNCwgNV0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWtlTGVmdCgwKShbMSwgMiwgMywgNCwgNV0pLCBbXSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRha2VMZWZ0KC0xKShbMSwgMiwgMywgNCwgNV0pLCBbMSwgMiwgMywgNCwgNV0pO1xuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRha2VMZWZ0ID0gZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpc091dE9mQm91bmQobiwgYXMpID8gY29weShhcykgOiBhcy5zbGljZSgwLCBuKTtcbiAgICB9O1xufTtcbi8qKlxuICogS2VlcCBvbmx5IGEgbWF4IG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgYW4gYEFycmF5YCwgY3JlYXRpbmcgYSBuZXcgYEFycmF5YC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBub24gbmVnYXRpdmUgaW50ZWdlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdGFrZVJpZ2h0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWtlUmlnaHQoMikoWzEsIDIsIDMsIDQsIDVdKSwgWzQsIDVdKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodGFrZVJpZ2h0KDcpKFsxLCAyLCAzLCA0LCA1XSksIFsxLCAyLCAzLCA0LCA1XSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRha2VSaWdodCgwKShbMSwgMiwgMywgNCwgNV0pLCBbXSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRha2VSaWdodCgtMSkoWzEsIDIsIDMsIDQsIDVdKSwgWzEsIDIsIDMsIDQsIDVdKTtcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0YWtlUmlnaHQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChuLCBhcykgPyBjb3B5KGFzKSA6IG4gPT09IDAgPyBbXSA6IGFzLnNsaWNlKC1uKTtcbiAgICB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiB0YWtlTGVmdFdoaWxlKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFzXzEgPSBhczsgX2kgPCBhc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGEgPSBhc18xW19pXTtcbiAgICAgICAgICAgIGlmICghcHJlZGljYXRlKGEpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXQucHVzaChhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG52YXIgc3BhbkxlZnRJbmRleCA9IGZ1bmN0aW9uIChhcywgcHJlZGljYXRlKSB7XG4gICAgdmFyIGwgPSBhcy5sZW5ndGg7XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmICghcHJlZGljYXRlKGFzW2ldKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHNwYW5MZWZ0KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIF9hID0gc3BsaXRBdChzcGFuTGVmdEluZGV4KGFzLCBwcmVkaWNhdGUpKShhcyksIGluaXQgPSBfYVswXSwgcmVzdCA9IF9hWzFdO1xuICAgICAgICByZXR1cm4geyBpbml0OiBpbml0LCByZXN0OiByZXN0IH07XG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgQXJyYXlgIHdoaWNoIGlzIGEgY29weSBvZiB0aGUgaW5wdXQgZHJvcHBpbmcgYSBtYXggbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIHN0YXJ0LlxuICpcbiAqICoqTm90ZSoqLiBgbmAgaXMgbm9ybWFsaXplZCB0byBhIG5vbiBuZWdhdGl2ZSBpbnRlZ2VyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBkcm9wTGVmdCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZHJvcExlZnQoMikoWzEsIDIsIDNdKSwgWzNdKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZHJvcExlZnQoNSkoWzEsIDIsIDNdKSwgW10pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkcm9wTGVmdCgwKShbMSwgMiwgM10pLCBbMSwgMiwgM10pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkcm9wTGVmdCgtMikoWzEsIDIsIDNdKSwgWzEsIDIsIDNdKTtcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBkcm9wTGVmdCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gbiA8PSAwIHx8IGlzRW1wdHkoYXMpID8gY29weShhcykgOiBuID49IGFzLmxlbmd0aCA/IFtdIDogYXMuc2xpY2UobiwgYXMubGVuZ3RoKTtcbiAgICB9O1xufTtcbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgQXJyYXlgIHdoaWNoIGlzIGEgY29weSBvZiB0aGUgaW5wdXQgZHJvcHBpbmcgYSBtYXggbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIGVuZC5cbiAqXG4gKiAqKk5vdGUqKi4gYG5gIGlzIG5vcm1hbGl6ZWQgdG8gYSBub24gbmVnYXRpdmUgaW50ZWdlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZHJvcFJpZ2h0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkcm9wUmlnaHQoMikoWzEsIDIsIDNdKSwgWzFdKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZHJvcFJpZ2h0KDUpKFsxLCAyLCAzXSksIFtdKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZHJvcFJpZ2h0KDApKFsxLCAyLCAzXSksIFsxLCAyLCAzXSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRyb3BSaWdodCgtMikoWzEsIDIsIDNdKSwgWzEsIDIsIDNdKTtcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBkcm9wUmlnaHQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIG4gPD0gMCB8fCBpc0VtcHR5KGFzKSA/IGNvcHkoYXMpIDogbiA+PSBhcy5sZW5ndGggPyBbXSA6IGFzLnNsaWNlKDAsIGFzLmxlbmd0aCAtIG4pO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGRyb3BMZWZ0V2hpbGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gYXMuc2xpY2Uoc3BhbkxlZnRJbmRleChhcywgcHJlZGljYXRlKSk7IH07XG59XG4vKipcbiAqIGBmaW5kSW5kZXhgIHJldHVybnMgYW4gYE9wdGlvbmAgY29udGFpbmluZyB0aGUgZmlyc3QgaW5kZXggZm9yIHdoaWNoIGEgcHJlZGljYXRlIGhvbGRzLlxuICogSXQgcmV0dXJucyBgTm9uZWAgaWYgbm8gZWxlbWVudCBzYXRpc2ZpZXMgdGhlIHByZWRpY2F0ZS5cbiAqIFNpbWlsYXIgdG8gW2BmaW5kRmlyc3RgXSgjZmluZEZpcnN0KSBidXQgcmV0dXJuaW5nIHRoZSBpbmRleCBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaW5kSW5kZXggfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kSW5kZXgoKG46IG51bWJlcikgPT4gbiA9PT0gMikoWzEsIDIsIDNdKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmluZEluZGV4KChuOiBudW1iZXIpID0+IG4gPT09IDIpKFtdKSwgbm9uZSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaW5kSW5kZXggPSBSQS5maW5kSW5kZXg7XG5leHBvcnQgZnVuY3Rpb24gZmluZEZpcnN0KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBSQS5maW5kRmlyc3QocHJlZGljYXRlKTtcbn1cbi8qKlxuICogR2l2ZW4gYSBzZWxlY3RvciBmdW5jdGlvbiB3aGljaCB0YWtlcyBhbiBlbGVtZW50IGFuZCByZXR1cm5zIGFuIG9wdGlvbixcbiAqIHRoaXMgZnVuY3Rpb24gYXBwbGllcyB0aGUgc2VsZWN0b3IgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSBhbmRcbiAqIHJldHVybnMgdGhlIGZpcnN0IGBTb21lYCByZXN1bHQuIE90aGVyd2lzZSBpdCByZXR1cm5zIGBOb25lYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmluZEZpcnN0TWFwIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBQZXJzb24ge1xuICogICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gKiAgIHJlYWRvbmx5IGFnZTogbnVtYmVyO1xuICogfVxuICpcbiAqIGNvbnN0IHBlcnNvbnM6IEFycmF5PFBlcnNvbj4gPSBbXG4gKiAgIHsgbmFtZTogXCJKb2huXCIsIGFnZTogMTYgfSxcbiAqICAgeyBuYW1lOiBcIk1hcnlcIiwgYWdlOiA0NSB9LFxuICogICB7IG5hbWU6IFwiSm9leVwiLCBhZ2U6IDI4IH0sXG4gKiBdO1xuICpcbiAqIGNvbnN0IG5hbWVPZlBlcnNvbkFib3ZlMTggPSAocDogUGVyc29uKSA9PiAocC5hZ2UgPD0gMTggPyBub25lIDogc29tZShwLm5hbWUpKTtcbiAqIGNvbnN0IG5hbWVPZlBlcnNvbkFib3ZlNzAgPSAocDogUGVyc29uKSA9PiAocC5hZ2UgPD0gNzAgPyBub25lIDogc29tZShwLm5hbWUpKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmluZEZpcnN0TWFwKG5hbWVPZlBlcnNvbkFib3ZlMTgpKHBlcnNvbnMpLCBzb21lKFwiTWFyeVwiKSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRGaXJzdE1hcChuYW1lT2ZQZXJzb25BYm92ZTcwKShwZXJzb25zKSwgbm9uZSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmluZEZpcnN0TWFwID0gUkEuZmluZEZpcnN0TWFwO1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMYXN0KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBSQS5maW5kTGFzdChwcmVkaWNhdGUpO1xufVxuLyoqXG4gKiBHaXZlbiBhIHNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIHRha2VzIGFuIGVsZW1lbnQgYW5kIHJldHVybnMgYW4gb3B0aW9uLFxuICogdGhpcyBmdW5jdGlvbiBhcHBsaWVzIHRoZSBzZWxlY3RvciB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5IHN0YXJ0aW5nIGZyb20gdGhlXG4gKiBlbmQgYW5kIHJldHVybnMgdGhlIGxhc3QgYFNvbWVgIHJlc3VsdC4gT3RoZXJ3aXNlIGl0IHJldHVybnMgYE5vbmVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaW5kTGFzdE1hcCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgUGVyc29uIHtcbiAqICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICogICByZWFkb25seSBhZ2U6IG51bWJlcjtcbiAqIH1cbiAqXG4gKiBjb25zdCBwZXJzb25zOiBBcnJheTxQZXJzb24+ID0gW1xuICogICB7IG5hbWU6IFwiSm9oblwiLCBhZ2U6IDE2IH0sXG4gKiAgIHsgbmFtZTogXCJNYXJ5XCIsIGFnZTogNDUgfSxcbiAqICAgeyBuYW1lOiBcIkpvZXlcIiwgYWdlOiAyOCB9LFxuICogXTtcbiAqXG4gKiBjb25zdCBuYW1lT2ZQZXJzb25BYm92ZTE4ID0gKHA6IFBlcnNvbikgPT4gKHAuYWdlIDw9IDE4ID8gbm9uZSA6IHNvbWUocC5uYW1lKSk7XG4gKiBjb25zdCBuYW1lT2ZQZXJzb25BYm92ZTcwID0gKHA6IFBlcnNvbikgPT4gKHAuYWdlIDw9IDcwID8gbm9uZSA6IHNvbWUocC5uYW1lKSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRMYXN0TWFwKG5hbWVPZlBlcnNvbkFib3ZlMTgpKHBlcnNvbnMpLCBzb21lKFwiSm9leVwiKSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRMYXN0TWFwKG5hbWVPZlBlcnNvbkFib3ZlNzApKHBlcnNvbnMpLCBub25lKTtcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaW5kTGFzdE1hcCA9IFJBLmZpbmRMYXN0TWFwO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBsaXN0IHdoaWNoIG1hdGNoZXMgdGhlIHByZWRpY2F0ZS5cbiAqIEl0IHJldHVybnMgYW4gYE9wdGlvbmAgY29udGFpbmluZyB0aGUgaW5kZXggb3IgYE5vbmVgIGlmIG5vdCBmb3VuZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmluZExhc3RJbmRleCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgWCB7XG4gKiAgIHJlYWRvbmx5IGE6IG51bWJlclxuICogICByZWFkb25seSBiOiBudW1iZXJcbiAqIH1cbiAqIGNvbnN0IHhzOiBBcnJheTxYPiA9IFt7IGE6IDEsIGI6IDAgfSwgeyBhOiAxLCBiOiAxIH1dXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbmRMYXN0SW5kZXgoKHg6IHsgcmVhZG9ubHkgYTogbnVtYmVyIH0pID0+IHguYSA9PT0gMSkoeHMpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kTGFzdEluZGV4KCh4OiB7IHJlYWRvbmx5IGE6IG51bWJlciB9KSA9PiB4LmEgPT09IDQpKHhzKSwgbm9uZSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaW5kTGFzdEluZGV4ID0gUkEuZmluZExhc3RJbmRleDtcbi8qKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiBhcnJheSBhbmQgbWFrZXMgYSBuZXcgYXJyYXkgY29udGFpbmluZyB0aGUgc2FtZSBlbGVtZW50cy5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb3B5ID0gZnVuY3Rpb24gKGFzKSB7IHJldHVybiBhcy5zbGljZSgpOyB9O1xuLyoqXG4gKiBJbnNlcnQgYW4gZWxlbWVudCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LCBjcmVhdGluZyBhIG5ldyBhcnJheSxcbiAqIG9yIHJldHVybmluZyBgTm9uZWAgaWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGluc2VydEF0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW5zZXJ0QXQoMiwgNSkoWzEsIDIsIDMsIDRdKSwgc29tZShbMSwgMiwgNSwgMywgNF0pKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGluc2VydEF0ID0gZnVuY3Rpb24gKGksIGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBpIDwgMCB8fCBpID4gYXMubGVuZ3RoID8gXy5ub25lIDogXy5zb21lKHVuc2FmZUluc2VydEF0KGksIGEsIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoYW5nZSB0aGUgZWxlbWVudCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LCBjcmVhdGluZyBhIG5ldyBhcnJheSxcbiAqIG9yIHJldHVybmluZyBgTm9uZWAgaWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVwZGF0ZUF0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBkYXRlQXQoMSwgMSkoWzEsIDIsIDNdKSwgc29tZShbMSwgMSwgM10pKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cGRhdGVBdCgxLCAxKShbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlQXQgPSBmdW5jdGlvbiAoaSwgYSkgeyByZXR1cm4gbW9kaWZ5QXQoaSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYTsgfSk7IH07XG4vKipcbiAqIERlbGV0ZSB0aGUgZWxlbWVudCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LCBjcmVhdGluZyBhIG5ldyBhcnJheSwgb3IgcmV0dXJuaW5nIGBOb25lYCBpZiB0aGUgaW5kZXggaXMgb3V0IG9mIGJvdW5kcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZGVsZXRlQXQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkZWxldGVBdCgwKShbMSwgMiwgM10pLCBzb21lKFsyLCAzXSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRlbGV0ZUF0KDEpKFtdKSwgbm9uZSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBkZWxldGVBdCA9IGZ1bmN0aW9uIChpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gaXNPdXRPZkJvdW5kKGksIGFzKSA/IF8ubm9uZSA6IF8uc29tZSh1bnNhZmVEZWxldGVBdChpLCBhcykpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXgsIGNyZWF0aW5nIGEgbmV3IGFycmF5LCBvciByZXR1cm5pbmcgYE5vbmVgIGlmIHRoZSBpbmRleCBpcyBvdXRcbiAqIG9mIGJvdW5kcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbW9kaWZ5QXQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgZG91YmxlID0gKHg6IG51bWJlcik6IG51bWJlciA9PiB4ICogMlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtb2RpZnlBdCgxLCBkb3VibGUpKFsxLCAyLCAzXSksIHNvbWUoWzEsIDQsIDNdKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobW9kaWZ5QXQoMSwgZG91YmxlKShbXSksIG5vbmUpXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGlzT3V0T2ZCb3VuZChpLCBhcykgPyBfLm5vbmUgOiBfLnNvbWUodW5zYWZlVXBkYXRlQXQoaSwgZihhc1tpXSksIGFzKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFJldmVyc2UgYW4gYXJyYXksIGNyZWF0aW5nIGEgbmV3IGFycmF5XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJldmVyc2UgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJldmVyc2UoWzEsIDIsIDNdKSwgWzMsIDIsIDFdKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJldmVyc2UgPSBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc0VtcHR5KGFzKSA/IFtdIDogYXMuc2xpY2UoKS5yZXZlcnNlKCkpOyB9O1xuLyoqXG4gKiBUYWtlcyBhbiBgQXJyYXlgIG9mIGBFaXRoZXJgIGFuZCBwcm9kdWNlcyBhIG5ldyBgQXJyYXlgIGNvbnRhaW5pbmdcbiAqIHRoZSB2YWx1ZXMgb2YgYWxsIHRoZSBgUmlnaHRgIGVsZW1lbnRzIGluIHRoZSBzYW1lIG9yZGVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByaWdodHMgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHJpZ2h0LCBsZWZ0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmlnaHRzKFtyaWdodCgxKSwgbGVmdCgnZm9vJyksIHJpZ2h0KDIpXSksIFsxLCAyXSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByaWdodHMgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICB2YXIgciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGEgPSBhc1tpXTtcbiAgICAgICAgaWYgKGEuX3RhZyA9PT0gJ1JpZ2h0Jykge1xuICAgICAgICAgICAgci5wdXNoKGEucmlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByO1xufTtcbi8qKlxuICogVGFrZXMgYW4gYEFycmF5YCBvZiBgRWl0aGVyYCBhbmQgcHJvZHVjZXMgYSBuZXcgYEFycmF5YCBjb250YWluaW5nXG4gKiB0aGUgdmFsdWVzIG9mIGFsbCB0aGUgYExlZnRgIGVsZW1lbnRzIGluIHRoZSBzYW1lIG9yZGVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBsZWZ0cyB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgbGVmdCwgcmlnaHQgfSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChsZWZ0cyhbcmlnaHQoMSksIGxlZnQoJ2ZvbycpLCByaWdodCgyKV0pLCBbJ2ZvbyddKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGxlZnRzID0gZnVuY3Rpb24gKGFzKSB7XG4gICAgdmFyIHIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhID0gYXNbaV07XG4gICAgICAgIGlmIChhLl90YWcgPT09ICdMZWZ0Jykge1xuICAgICAgICAgICAgci5wdXNoKGEubGVmdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHI7XG59O1xuLyoqXG4gKiBTb3J0IHRoZSBlbGVtZW50cyBvZiBhbiBhcnJheSBpbiBpbmNyZWFzaW5nIG9yZGVyLCBjcmVhdGluZyBhIG5ldyBhcnJheVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb3J0IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvcnQoTi5PcmQpKFszLCAyLCAxXSksIFsxLCAyLCAzXSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzb3J0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5sZW5ndGggPD0gMSA/IGNvcHkoYXMpIDogYXMuc2xpY2UoKS5zb3J0KE8uY29tcGFyZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEFwcGx5IGEgZnVuY3Rpb24gdG8gcGFpcnMgb2YgZWxlbWVudHMgYXQgdGhlIHNhbWUgaW5kZXggaW4gdHdvIGFycmF5cywgY29sbGVjdGluZyB0aGUgcmVzdWx0cyBpbiBhIG5ldyBhcnJheS4gSWYgb25lXG4gKiBpbnB1dCBhcnJheSBpcyBzaG9ydCwgZXhjZXNzIGVsZW1lbnRzIG9mIHRoZSBsb25nZXIgYXJyYXkgYXJlIGRpc2NhcmRlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgemlwV2l0aCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoemlwV2l0aChbMSwgMiwgM10sIFsnYScsICdiJywgJ2MnLCAnZCddLCAobiwgcykgPT4gcyArIG4pLCBbJ2ExJywgJ2IyJywgJ2MzJ10pXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgemlwV2l0aCA9IGZ1bmN0aW9uIChmYSwgZmIsIGYpIHtcbiAgICB2YXIgZmMgPSBbXTtcbiAgICB2YXIgbGVuID0gTWF0aC5taW4oZmEubGVuZ3RoLCBmYi5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZmNbaV0gPSBmKGZhW2ldLCBmYltpXSk7XG4gICAgfVxuICAgIHJldHVybiBmYztcbn07XG5leHBvcnQgZnVuY3Rpb24gemlwKGFzLCBicykge1xuICAgIGlmIChicyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYnMpIHsgcmV0dXJuIHppcChicywgYXMpOyB9O1xuICAgIH1cbiAgICByZXR1cm4gemlwV2l0aChhcywgYnMsIGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBbYSwgYl07IH0pO1xufVxuLyoqXG4gKiBUaGUgZnVuY3Rpb24gaXMgcmV2ZXJzZSBvZiBgemlwYC4gVGFrZXMgYW4gYXJyYXkgb2YgcGFpcnMgYW5kIHJldHVybiB0d28gY29ycmVzcG9uZGluZyBhcnJheXNcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW56aXAgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuemlwKFtbMSwgJ2EnXSwgWzIsICdiJ10sIFszLCAnYyddXSksIFtbMSwgMiwgM10sIFsnYScsICdiJywgJ2MnXV0pXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdW56aXAgPSBmdW5jdGlvbiAoYXMpIHtcbiAgICB2YXIgZmEgPSBbXTtcbiAgICB2YXIgZmIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZhW2ldID0gYXNbaV1bMF07XG4gICAgICAgIGZiW2ldID0gYXNbaV1bMV07XG4gICAgfVxuICAgIHJldHVybiBbZmEsIGZiXTtcbn07XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYEFycmF5YCwgcHJlcGVuZGluZyBhbiBlbGVtZW50IHRvIGV2ZXJ5IG1lbWJlciBvZiB0aGUgaW5wdXQgYEFycmF5YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcHJlcGVuZEFsbCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocHJlcGVuZEFsbCg5KShbMSwgMiwgMywgNF0pLCBbOSwgMSwgOSwgMiwgOSwgMywgOSwgNF0pXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHByZXBlbmRBbGwgPSBmdW5jdGlvbiAobWlkZGxlKSB7XG4gICAgdmFyIGYgPSBORUEucHJlcGVuZEFsbChtaWRkbGUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc05vbkVtcHR5KGFzKSA/IGYoYXMpIDogW10pOyB9O1xufTtcbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgQXJyYXlgIHBsYWNpbmcgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgdGhlIGlucHV0IGBBcnJheWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGludGVyc3BlcnNlIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcnNwZXJzZSg5KShbMSwgMiwgMywgNF0pLCBbMSwgOSwgMiwgOSwgMywgOSwgNF0pXG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgaW50ZXJzcGVyc2UgPSBmdW5jdGlvbiAobWlkZGxlKSB7XG4gICAgdmFyIGYgPSBORUEuaW50ZXJzcGVyc2UobWlkZGxlKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IGNvcHkoYXMpKTsgfTtcbn07XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYEFycmF5YCByb3RhdGluZyB0aGUgaW5wdXQgYEFycmF5YCBieSBgbmAgc3RlcHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJvdGF0ZSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocm90YXRlKDIpKFsxLCAyLCAzLCA0LCA1XSksIFs0LCA1LCAxLCAyLCAzXSlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByb3RhdGUgPSBmdW5jdGlvbiAobikge1xuICAgIHZhciBmID0gTkVBLnJvdGF0ZShuKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IGNvcHkoYXMpKTsgfTtcbn07XG4vLyBUT0RPOiByZW1vdmUgbm9uLWN1cnJpZWQgb3ZlcmxvYWRpbmcgaW4gdjNcbi8qKlxuICogVGVzdCBpZiBhIHZhbHVlIGlzIGEgbWVtYmVyIG9mIGFuIGBBcnJheWAuIFRha2VzIGEgYEVxPEE+YCBhcyBhIHNpbmdsZVxuICogYXJndW1lbnQgd2hpY2ggcmV0dXJucyB0aGUgZnVuY3Rpb24gdG8gdXNlIHRvIHNlYXJjaCBmb3IgYSB2YWx1ZSBvZiB0eXBlIGBBYCBpblxuICogYW4gYEFycmF5PEE+YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZWxlbSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKHBpcGUoWzEsIDIsIDNdLCBlbGVtKE4uRXEpKDIpKSwgdHJ1ZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChwaXBlKFsxLCAyLCAzXSwgZWxlbShOLkVxKSgwKSksIGZhbHNlKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGVsZW0gPSBSQS5lbGVtO1xuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBBcnJheWAgcmVtb3ZpbmcgZHVwbGljYXRlIGVsZW1lbnRzLCBrZWVwaW5nIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGVsZW1lbnQsXG4gKiBiYXNlZCBvbiBhIGBFcTxBPmAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuaXEgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pcShOLkVxKShbMSwgMiwgMV0pLCBbMSwgMl0pXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pcSA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIGYgPSBORUEudW5pcShFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IGNvcHkoYXMpKTsgfTtcbn07XG4vKipcbiAqIFNvcnQgdGhlIGVsZW1lbnRzIG9mIGFuIGFycmF5IGluIGluY3JlYXNpbmcgb3JkZXIsIHdoZXJlIGVsZW1lbnRzIGFyZSBjb21wYXJlZCB1c2luZyBmaXJzdCBgb3Jkc1swXWAsIHRoZW4gYG9yZHNbMV1gLFxuICogZXRjLi4uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgY29udHJhbWFwIH0gZnJvbSAnZnAtdHMvT3JkJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgUGVyc29uIHtcbiAqICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nXG4gKiAgIHJlYWRvbmx5IGFnZTogbnVtYmVyXG4gKiB9XG4gKiBjb25zdCBieU5hbWUgPSBwaXBlKFMuT3JkLCBjb250cmFtYXAoKHA6IFBlcnNvbikgPT4gcC5uYW1lKSlcbiAqIGNvbnN0IGJ5QWdlID0gcGlwZShOLk9yZCwgY29udHJhbWFwKChwOiBQZXJzb24pID0+IHAuYWdlKSlcbiAqXG4gKiBjb25zdCBzb3J0QnlOYW1lQnlBZ2UgPSBzb3J0QnkoW2J5TmFtZSwgYnlBZ2VdKVxuICpcbiAqIGNvbnN0IHBlcnNvbnMgPSBbeyBuYW1lOiAnYScsIGFnZTogMSB9LCB7IG5hbWU6ICdiJywgYWdlOiAzIH0sIHsgbmFtZTogJ2MnLCBhZ2U6IDIgfSwgeyBuYW1lOiAnYicsIGFnZTogMiB9XVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb3J0QnlOYW1lQnlBZ2UocGVyc29ucyksIFtcbiAqICAgeyBuYW1lOiAnYScsIGFnZTogMSB9LFxuICogICB7IG5hbWU6ICdiJywgYWdlOiAyIH0sXG4gKiAgIHsgbmFtZTogJ2InLCBhZ2U6IDMgfSxcbiAqICAgeyBuYW1lOiAnYycsIGFnZTogMiB9XG4gKiBdKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNvcnRCeSA9IGZ1bmN0aW9uIChvcmRzKSB7XG4gICAgdmFyIGYgPSBORUEuc29ydEJ5KG9yZHMpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChpc05vbkVtcHR5KGFzKSA/IGYoYXMpIDogY29weShhcykpOyB9O1xufTtcbi8qKlxuICogQSB1c2VmdWwgcmVjdXJzaW9uIHBhdHRlcm4gZm9yIHByb2Nlc3NpbmcgYW4gYXJyYXkgdG8gcHJvZHVjZSBhIG5ldyBhcnJheSwgb2Z0ZW4gdXNlZCBmb3IgXCJjaG9wcGluZ1wiIHVwIHRoZSBpbnB1dFxuICogYXJyYXkuIFR5cGljYWxseSBjaG9wIGlzIGNhbGxlZCB3aXRoIHNvbWUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgYW4gaW5pdGlhbCBwcmVmaXggb2YgdGhlIGFycmF5IGFuZCBwcm9kdWNlIGFcbiAqIHZhbHVlIGFuZCB0aGUgcmVzdCBvZiB0aGUgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IEVxIH0gZnJvbSAnZnAtdHMvRXEnXG4gKiBpbXBvcnQgKiBhcyBBIGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgZ3JvdXAgPSA8QT4oUzogRXE8QT4pOiAoKGFzOiBBcnJheTxBPikgPT4gQXJyYXk8QXJyYXk8QT4+KSA9PiB7XG4gKiAgIHJldHVybiBBLmNob3AoYXMgPT4ge1xuICogICAgIGNvbnN0IHsgaW5pdCwgcmVzdCB9ID0gcGlwZShhcywgQS5zcGFuTGVmdCgoYTogQSkgPT4gUy5lcXVhbHMoYSwgYXNbMF0pKSlcbiAqICAgICByZXR1cm4gW2luaXQsIHJlc3RdXG4gKiAgIH0pXG4gKiB9XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdyb3VwKE4uRXEpKFsxLCAxLCAyLCAzLCAzLCA0XSksIFtbMSwgMV0sIFsyXSwgWzMsIDNdLCBbNF1dKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNob3AgPSBmdW5jdGlvbiAoZikge1xuICAgIHZhciBnID0gTkVBLmNob3AoZik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKGlzTm9uRW1wdHkoYXMpID8gZyhhcykgOiBbXSk7IH07XG59O1xuLyoqXG4gKiBTcGxpdHMgYW4gYEFycmF5YCBpbnRvIHR3byBwaWVjZXMsIHRoZSBmaXJzdCBwaWVjZSBoYXMgbWF4IGBuYCBlbGVtZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc3BsaXRBdCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc3BsaXRBdCgyKShbMSwgMiwgMywgNCwgNV0pLCBbWzEsIDJdLCBbMywgNCwgNV1dKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNwbGl0QXQgPSBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIG4gPj0gMSAmJiBpc05vbkVtcHR5KGFzKSA/IE5FQS5zcGxpdEF0KG4pKGFzKSA6IGlzRW1wdHkoYXMpID8gW2NvcHkoYXMpLCBbXV0gOiBbW10sIGNvcHkoYXMpXTtcbiAgICB9O1xufTtcbi8qKlxuICogU3BsaXRzIGFuIGFycmF5IGludG8gbGVuZ3RoLWBuYCBwaWVjZXMuIFRoZSBsYXN0IHBpZWNlIHdpbGwgYmUgc2hvcnRlciBpZiBgbmAgZG9lcyBub3QgZXZlbmx5IGRpdmlkZSB0aGUgbGVuZ3RoIG9mXG4gKiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBgY2h1bmtzT2YobikoW10pYCBpcyBgW11gLCBub3QgYFtbXV1gLiBUaGlzIGlzIGludGVudGlvbmFsLCBhbmQgaXMgY29uc2lzdGVudCB3aXRoIGEgcmVjdXJzaXZlXG4gKiBkZWZpbml0aW9uIG9mIGBjaHVua3NPZmA7IGl0IHNhdGlzZmllcyB0aGUgcHJvcGVydHkgdGhhdFxuICpcbiAqIGBgYHRzXG4gKiBjaHVua3NPZihuKSh4cykuY29uY2F0KGNodW5rc09mKG4pKHlzKSkgPT0gY2h1bmtzT2YobikoeHMuY29uY2F0KHlzKSkpXG4gKiBgYGBcbiAqXG4gKiB3aGVuZXZlciBgbmAgZXZlbmx5IGRpdmlkZXMgdGhlIGxlbmd0aCBvZiBgeHNgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBjaHVua3NPZiB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY2h1bmtzT2YoMikoWzEsIDIsIDMsIDQsIDVdKSwgW1sxLCAyXSwgWzMsIDRdLCBbNV1dKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNodW5rc09mID0gZnVuY3Rpb24gKG4pIHtcbiAgICB2YXIgZiA9IE5FQS5jaHVua3NPZihuKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoaXNOb25FbXB0eShhcykgPyBmKGFzKSA6IFtdKTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbU9wdGlvbksgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyb21PcHRpb24oZi5hcHBseSh2b2lkIDAsIGEpKTtcbiAgICB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBjb21wcmVoZW5zaW9uKGlucHV0LCBmLCBnKSB7XG4gICAgaWYgKGcgPT09IHZvaWQgMCkgeyBnID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfTsgfVxuICAgIHZhciBnbyA9IGZ1bmN0aW9uIChzY29wZSwgaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkoaW5wdXQpXG4gICAgICAgICAgICA/IGZsYXRNYXAoTkVBLmhlYWQoaW5wdXQpLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZ28ocGlwZShzY29wZSwgYXBwZW5kKGEpKSwgTkVBLnRhaWwoaW5wdXQpKTsgfSlcbiAgICAgICAgICAgIDogZy5hcHBseSh2b2lkIDAsIHNjb3BlKSA/IFtmLmFwcGx5KHZvaWQgMCwgc2NvcGUpXVxuICAgICAgICAgICAgICAgIDogW107XG4gICAgfTtcbiAgICByZXR1cm4gZ28oW10sIGlucHV0KTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGNvbmNhdFcgPSBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICByZXR1cm4gaXNFbXB0eShmaXJzdCkgPyBjb3B5KHNlY29uZCkgOiBpc0VtcHR5KHNlY29uZCkgPyBjb3B5KGZpcnN0KSA6IGZpcnN0LmNvbmNhdChzZWNvbmQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgY29uY2F0ID0gY29uY2F0VztcbmV4cG9ydCBmdW5jdGlvbiB1bmlvbihFKSB7XG4gICAgdmFyIHVuaW9uRSA9IE5FQS51bmlvbihFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgaWYgKHNlY29uZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgdW5pb25FXzEgPSB1bmlvbihFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7IHJldHVybiB1bmlvbkVfMShzZWNvbmQsIGZpcnN0KTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNOb25FbXB0eShmaXJzdCkgJiYgaXNOb25FbXB0eShzZWNvbmQpXG4gICAgICAgICAgICA/IHVuaW9uRShzZWNvbmQpKGZpcnN0KVxuICAgICAgICAgICAgOiBpc05vbkVtcHR5KGZpcnN0KVxuICAgICAgICAgICAgICAgID8gY29weShmaXJzdClcbiAgICAgICAgICAgICAgICA6IGNvcHkoc2Vjb25kKTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdGlvbihFKSB7XG4gICAgdmFyIGVsZW1FID0gZWxlbShFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHhzLCB5cykge1xuICAgICAgICBpZiAoeXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbkVfMSA9IGludGVyc2VjdGlvbihFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoeXMpIHsgcmV0dXJuIGludGVyc2VjdGlvbkVfMSh5cywgeHMpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4cy5maWx0ZXIoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGVsZW1FKGEsIHlzKTsgfSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkaWZmZXJlbmNlKEUpIHtcbiAgICB2YXIgZWxlbUUgPSBlbGVtKEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoeHMsIHlzKSB7XG4gICAgICAgIGlmICh5cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZGlmZmVyZW5jZUVfMSA9IGRpZmZlcmVuY2UoRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHlzKSB7IHJldHVybiBkaWZmZXJlbmNlRV8xKHlzLCB4cyk7IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHhzLmZpbHRlcihmdW5jdGlvbiAoYSkgeyByZXR1cm4gIWVsZW1FKGEsIHlzKTsgfSk7XG4gICAgfTtcbn1cbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZpbHRlciA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXIocHJlZGljYXRlKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9maWx0ZXJNYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlck1hcChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9wYXJ0aXRpb24gPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb24ocHJlZGljYXRlKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25NYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcGFydGl0aW9uV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGVXaXRoSW5kZXgpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbk1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwV2l0aEluZGV4KGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2FsdCA9IGZ1bmN0aW9uIChmYSwgdGhhdCkgeyByZXR1cm4gcGlwZShmYSwgYWx0KHRoYXQpKTsgfTtcbnZhciBfcmVkdWNlID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2UoYiwgZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBNID0gZm9sZE1hcChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwTShmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0KGIsIGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgYiwgZikge1xuICAgIHJldHVybiBwaXBlKGZhLCByZWR1Y2VXaXRoSW5kZXgoYiwgZikpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZvbGRNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TSA9IGZvbGRNYXBXaXRoSW5kZXgoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcFdpdGhJbmRleE0oZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3JlZHVjZVJpZ2h0V2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0V2l0aEluZGV4KGIsIGYpKTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9maWx0ZXJNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlck1hcFdpdGhJbmRleChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9maWx0ZXJXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZVdpdGhJbmRleCkgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZXh0ZW5kID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBleHRlbmQoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZUYgPSB0cmF2ZXJzZShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiBwaXBlKHRhLCB0cmF2ZXJzZUYoZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VXaXRoSW5kZXhGKGYpKTsgfTtcbn07XG52YXIgX2NoYWluUmVjRGVwdGhGaXJzdCA9IFJBLl9jaGFpblJlY0RlcHRoRmlyc3Q7XG52YXIgX2NoYWluUmVjQnJlYWR0aEZpcnN0ID0gUkEuX2NoYWluUmVjQnJlYWR0aEZpcnN0O1xuLyoqXG4gKiBHaXZlbiBhbiBlbGVtZW50IG9mIHRoZSBiYXNlIHR5cGUsIGBvZmAgYnVpbGRzIGFuIGBBcnJheWAgY29udGFpbmluZyBqdXN0IHRoYXRcbiAqIGVsZW1lbnQgb2YgdGhlIGJhc2UgdHlwZSAodGhpcyBpcyB1c2VmdWwgZm9yIGJ1aWxkaW5nIGEgYE1vbmFkYCkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG9mIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChvZihcImFcIiksIFtcImFcIl0pO1xuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG9mID0gTkVBLm9mO1xuLyoqXG4gKiBNYWtlcyBhbiBlbXB0eSBgQXJyYXlgLCB1c2VmdWwgZm9yIGJ1aWxkaW5nIGEgW2BNb25vaWRgXSgjTW9ub2lkKVxuICpcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIHplcm8gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBBcnJheTxBPikgPT4gQXJyYXk8Qj5gLlxuICogSW4gcHJhY3RpY2UgaXQgYXBwbGllcyB0aGUgYmFzZSBmdW5jdGlvbiB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5IGFuZCBjb2xsZWN0cyB0aGVcbiAqIHJlc3VsdHMgaW4gYSBuZXcgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1hcCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGNvbnN0IGYgPSAobjogbnVtYmVyKSA9PiBuICogMjtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbMSwgMiwgM10sIG1hcChmKSksIFsyLCA0LCA2XSk7XG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZhLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKTsgfSk7IH07IH07XG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBhcCwgbWFwLCBvZiB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIC8vIGEgY3VycmllZCBmdW5jdGlvbiB3aXRoIDMgaW5wdXQgcGFyYW1ldGVyZXNcbiAqIGNvbnN0IGYgPSAoczE6IHN0cmluZykgPT4gKG46IG51bWJlcikgPT4gKHMyOiBzdHJpbmcpID0+IHMxICsgbiArIHMyO1xuICpcbiAqIC8vIGxldCdzIHVzZSBgYXBgIHRvIGl0ZXJhdGUgYGZgIG92ZXIgYW4gYXJyYXkgZm9yIGVhY2ggaW5wdXQgcGFyYW1ldGVyXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoW1wiYVwiLCBcImJcIl0sIG1hcChmKSwgYXAoWzEsIDJdKSwgYXAoW1wi8J+YgFwiLCBcIvCfmKtcIiwgXCLwn5iOXCJdKSksIFtcbiAqICAgXCJhMfCfmIBcIiwgXCJhMfCfmKtcIiwgXCJhMfCfmI5cIixcbiAqICAgXCJhMvCfmIBcIiwgXCJhMvCfmKtcIiwgXCJhMvCfmI5cIixcbiAqICAgXCJiMfCfmIBcIiwgXCJiMfCfmKtcIiwgXCJiMfCfmI5cIixcbiAqICAgXCJiMvCfmIBcIiwgXCJiMvCfmKtcIiwgXCJiMvCfmI5cIixcbiAqIF0pO1xuICpcbiAqIC8vIGdpdmVuIEFycmF5IGltcGxlbWVudHMgdGhlIEFwcGxpY2F0aXZlIGludGVyZmFjZSB3aXRoIHRoZSBgb2ZgIG1ldGhvZCxcbiAqIC8vIHdlIGNhbiB3cml0ZSBleGFjdGx5IHRoZSBzYW1lIHRoaW5nIGluIGEgbW9yZSBzeW1tZXRyaWMgd2F5XG4gKiAvLyB1c2luZyBgb2ZgIG9uIGBmYCBhbmQgYGFwYCBvbiBlYWNoIGFycmF5IGluIGlucHV0XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKG9mKGYpLCBhcChbXCJhXCIsIFwiYlwiXSksIGFwKFsxLCAyXSksIGFwKFtcIvCfmIBcIiwgXCLwn5irXCIsIFwi8J+YjlwiXSkpLFxuICogICBwaXBlKFtcImFcIiwgXCJiXCJdLCBtYXAoZiksIGFwKFsxLCAyXSksIGFwKFtcIvCfmIBcIiwgXCLwn5irXCIsIFwi8J+YjlwiXSkpXG4gKiApO1xuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwID0gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGZsYXRNYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHBpcGUoZmEsIG1hcChmKSk7IH0pO1xufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0b1xuICogZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uLlxuICpcbiAqIEluIG90aGVyIHdvcmRzIGl0IHRha2VzIGEgZnVuY3Rpb24gYGZgIHRoYXQgcHJvZHVjZXMgYW4gYXJyYXkgZnJvbSBhIHNpbmdsZSBlbGVtZW50IG9mXG4gKiB0aGUgYmFzZSB0eXBlIGBBYCBhbmQgcmV0dXJucyBhIG5ldyBmdW5jdGlvbiB3aGljaCBhcHBsaWVzIGBmYCB0byBlYWNoIGVsZW1lbnQgb2YgdGhlXG4gKiBpbnB1dCBhcnJheSAobGlrZSBbYG1hcGBdKCNtYXApKSBhbmQsIGluc3RlYWQgb2YgcmV0dXJuaW5nIGFuIGFycmF5IG9mIGFycmF5cywgY29uY2F0ZW5hdGVzIHRoZVxuICogcmVzdWx0cyBpbnRvIGEgc2luZ2xlIGFycmF5IChsaWtlIFtgZmxhdHRlbmBdKCNmbGF0dGVuKSkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZsYXRNYXAsIG1hcCwgcmVwbGljYXRlIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogY29uc3QgZiA9IChuOiBudW1iZXIpID0+IHJlcGxpY2F0ZShuLCBgJHtufWApO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFsxLCAyLCAzXSwgbWFwKGYpKSwgW1tcIjFcIl0sIFtcIjJcIiwgXCIyXCJdLCBbXCIzXCIsIFwiM1wiLCBcIjNcIl1dKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbMSwgMiwgM10sIGZsYXRNYXAoZikpLCBbXCIxXCIsIFwiMlwiLCBcIjJcIiwgXCIzXCIsIFwiM1wiLCBcIjNcIl0pO1xuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShtYSwgY2hhaW5XaXRoSW5kZXgoZnVuY3Rpb24gKGksIGEpIHsgcmV0dXJuIGYoYSwgaSk7IH0pKTtcbn0pO1xuLyoqXG4gKiBUYWtlcyBhbiBhcnJheSBvZiBhcnJheXMgb2YgYEFgIGFuZCBmbGF0dGVucyB0aGVtIGludG8gYW4gYXJyYXkgb2YgYEFgXG4gKiBieSBjb25jYXRlbmF0aW5nIHRoZSBlbGVtZW50cyBvZiBlYWNoIGFycmF5IGluIG9yZGVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmbGF0dGVuIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmbGF0dGVuKFtbXCJhXCJdLCBbXCJiXCIsIFwiY1wiXSwgW1wiZFwiLCBcImVcIiwgXCJmXCJdXSksIFtcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgXCJlXCIsIFwiZlwiXSk7XG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZsYXR0ZW4gPSAvKiNfX1BVUkVfXyovIGZsYXRNYXAoaWRlbnRpdHkpO1xuLyoqXG4gKiBTYW1lIGFzIFtgbWFwYF0oI21hcCksIGJ1dCB0aGUgaXRlcmF0aW5nIGZ1bmN0aW9uIHRha2VzIGJvdGggdGhlIGluZGV4IGFuZCB0aGUgdmFsdWVcbiAqIG9mIHRoZSBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYXBXaXRoSW5kZXggfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBjb25zdCBmID0gKGk6IG51bWJlciwgczogc3RyaW5nKSA9PiBgJHtzfSAtICR7aX1gO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKFtcImFcIiwgXCJiXCIsIFwiY1wiXSwgbWFwV2l0aEluZGV4KGYpKSwgW1wiYSAtIDBcIiwgXCJiIC0gMVwiLCBcImMgLSAyXCJdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBmYS5tYXAoZnVuY3Rpb24gKGEsIGkpIHsgcmV0dXJuIGYoaSwgYSk7IH0pO1xufTsgfTtcbi8qKlxuICogTWFwcyBhbiBhcnJheSB3aXRoIGFuIGl0ZXJhdGluZyBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBpbmRleCBhbmQgdGhlIHZhbHVlIG9mXG4gKiBlYWNoIGVsZW1lbnQgYW5kIHJldHVybnMgYW4gYE9wdGlvbmAuIEl0IGtlZXBzIG9ubHkgdGhlIGBTb21lYCB2YWx1ZXMgZGlzY2FyZGluZ1xuICogdGhlIGBOb25lYHMuXG4gKlxuICogU2FtZSBhcyBbYGZpbHRlck1hcGBdKCNmaWx0ZXJNYXApLCBidXQgd2l0aCBhbiBpdGVyYXRpbmcgZnVuY3Rpb24gd2hpY2ggdGFrZXMgYWxzb1xuICogdGhlIGluZGV4IGFzIGlucHV0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaWx0ZXJNYXBXaXRoSW5kZXggfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gXCJmcC10c1wiO1xuICpcbiAqIGNvbnN0IGYgPSAoaTogbnVtYmVyLCBzOiBzdHJpbmcpID0+IChpICUgMiA9PT0gMSA/IG9wdGlvbi5zb21lKHMudG9VcHBlckNhc2UoKSkgOiBvcHRpb24ubm9uZSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoW1wiYVwiLCBcIm5vXCIsIFwibmVpdGhlclwiLCBcImJcIl0sIGZpbHRlck1hcFdpdGhJbmRleChmKSksIFtcIk5PXCIsIFwiQlwiXSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbkIgPSBmKGksIGZhW2ldKTtcbiAgICAgICAgICAgIGlmIChfLmlzU29tZShvcHRpb25CKSkge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKG9wdGlvbkIudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIE1hcHMgYW4gYXJyYXkgd2l0aCBhbiBpdGVyYXRpbmcgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGBPcHRpb25gXG4gKiBhbmQgaXQga2VlcHMgb25seSB0aGUgYFNvbWVgIHZhbHVlcyBkaXNjYXJkaW5nIHRoZSBgTm9uZWBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaWx0ZXJNYXAgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gXCJmcC10c1wiO1xuICpcbiAqIGNvbnN0IGYgPSAoczogc3RyaW5nKSA9PiBzLmxlbmd0aCA9PT0gMSA/IG9wdGlvbi5zb21lKHMudG9VcHBlckNhc2UoKSkgOiBvcHRpb24ubm9uZTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZShbXCJhXCIsIFwibm9cIiwgXCJuZWl0aGVyXCIsIFwiYlwiXSwgZmlsdGVyTWFwKGYpKSwgW1wiQVwiLCBcIkJcIl0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlck1hcCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZpbHRlck1hcFdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59O1xuLyoqXG4gKiBDb21wYWN0IGFuIGFycmF5IG9mIGBPcHRpb25gcyBkaXNjYXJkaW5nIHRoZSBgTm9uZWAgdmFsdWVzIGFuZFxuICoga2VlcGluZyB0aGUgYFNvbWVgIHZhbHVlcy4gSXQgcmV0dXJucyBhIG5ldyBhcnJheSBjb250YWluaW5nIHRoZSB2YWx1ZXMgb2ZcbiAqIHRoZSBgU29tZWAgb3B0aW9ucy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29tcGFjdCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSBcImZwLXRzXCI7XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wYWN0KFtvcHRpb24uc29tZShcImFcIiksIG9wdGlvbi5ub25lLCBvcHRpb24uc29tZShcImJcIildKSwgW1wiYVwiLCBcImJcIl0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbXBhY3QgPSAvKiNfX1BVUkVfXyovIGZpbHRlck1hcChpZGVudGl0eSk7XG4vKipcbiAqIFNlcGFyYXRlIGFuIGFycmF5IG9mIGBFaXRoZXJgcyBpbnRvIGBMZWZ0YHMgYW5kIGBSaWdodGBzLCBjcmVhdGluZyB0d28gbmV3IGFycmF5czpcbiAqIG9uZSBjb250YWluaW5nIGFsbCB0aGUgbGVmdCB2YWx1ZXMgYW5kIG9uZSBjb250YWluaW5nIGFsbCB0aGUgcmlnaHQgdmFsdWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzZXBhcmF0ZSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgZWl0aGVyIH0gZnJvbSBcImZwLXRzXCI7XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzZXBhcmF0ZShbZWl0aGVyLnJpZ2h0KFwicjFcIiksIGVpdGhlci5sZWZ0KFwibDFcIiksIGVpdGhlci5yaWdodChcInIyXCIpXSksIHtcbiAqICAgbGVmdDogW1wibDFcIl0sXG4gKiAgIHJpZ2h0OiBbXCJyMVwiLCBcInIyXCJdLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc2VwYXJhdGUgPSBmdW5jdGlvbiAoZmEpIHtcbiAgICB2YXIgbGVmdCA9IFtdO1xuICAgIHZhciByaWdodCA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMCwgZmFfMSA9IGZhOyBfaSA8IGZhXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBlID0gZmFfMVtfaV07XG4gICAgICAgIGlmIChlLl90YWcgPT09ICdMZWZ0Jykge1xuICAgICAgICAgICAgbGVmdC5wdXNoKGUubGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByaWdodC5wdXNoKGUucmlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xufTtcbi8qKlxuICogR2l2ZW4gYW4gaXRlcmF0aW5nIGZ1bmN0aW9uIHRoYXQgaXMgYSBgUHJlZGljYXRlYCBvciBhIGBSZWZpbmVtZW50YCxcbiAqIGBmaWx0ZXJgIGNyZWF0ZXMgYSBuZXcgYEFycmF5YCBjb250YWluaW5nIHRoZSBlbGVtZW50cyBvZiB0aGUgb3JpZ2luYWxcbiAqIGBBcnJheWAgZm9yIHdoaWNoIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24gaXMgYHRydWVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaWx0ZXIgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IGlzU3RyaW5nIH0gZnJvbSBcImZwLXRzL2xpYi9zdHJpbmdcIjtcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbHRlcihpc1N0cmluZykoW1wiYVwiLCAxLCB7fSwgXCJiXCIsIDVdKSwgW1wiYVwiLCBcImJcIl0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaWx0ZXIoKHg6bnVtYmVyKSA9PiB4ID4gMCkoWy0zLCAxLCAtMiwgNV0pLCBbMSwgNV0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5maWx0ZXIocHJlZGljYXRlKTtcbiAgICB9O1xufTtcbi8qKlxuICogR2l2ZW4gYW4gaXRlcmF0aW5nIGZ1bmN0aW9uIHRoYXQgaXMgYSBgUHJlZGljYXRlYCBvciBhIGBSZWZpbmVtZW50YCxcbiAqIGBwYXJ0aXRpb25gIGNyZWF0ZXMgdHdvIG5ldyBgQXJyYXlgczogYHJpZ2h0YCBjb250YWluaW5nIHRoZSBlbGVtZW50cyBvZiB0aGUgb3JpZ2luYWxcbiAqIGBBcnJheWAgZm9yIHdoaWNoIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24gaXMgYHRydWVgLCBgbGVmdGAgY29udGFpbmluZyB0aGUgZWxlbWVudHNcbiAqIGZvciB3aGljaCBpdCBpcyBmYWxzZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGFydGl0aW9uIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gXCJmcC10cy9saWIvc3RyaW5nXCI7XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb24oaXNTdHJpbmcpKFtcImFcIiwgMSwge30sIFwiYlwiLCA1XSksIHsgbGVmdDogWzEsIHt9LCA1XSwgcmlnaHQ6IFtcImFcIiwgXCJiXCJdIH0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb24oKHg6IG51bWJlcikgPT4geCA+IDApKFstMywgMSwgLTIsIDVdKSwgeyBsZWZ0OiBbLTMsIC0yXSwgcmlnaHQ6IFsxLCA1XSB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb24gPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHBhcnRpdGlvbldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn07XG4vKipcbiAqIFNhbWUgYXMgW2BwYXJ0aXRpb25gXSgjcGFydGl0aW9uKSwgYnV0IHBhc3NpbmcgYWxzbyB0aGUgaW5kZXggdG8gdGhlIGl0ZXJhdGluZyBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGFydGl0aW9uV2l0aEluZGV4IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb25XaXRoSW5kZXgoKGluZGV4LCB4OiBudW1iZXIpID0+IGluZGV4IDwgMyAmJiB4ID4gMCkoWy0yLCA1LCA2LCA3XSksIHtcbiAqICAgbGVmdDogWy0yLCA3XSxcbiAqICAgcmlnaHQ6IFs1LCA2XSxcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbldpdGhJbmRleCA9IGZ1bmN0aW9uIChwcmVkaWNhdGVXaXRoSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBsZWZ0ID0gW107XG4gICAgICAgIHZhciByaWdodCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYiA9IGFzW2ldO1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZVdpdGhJbmRleChpLCBiKSkge1xuICAgICAgICAgICAgICAgIHJpZ2h0LnB1c2goYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZWZ0LnB1c2goYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0LCByaWdodCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEdpdmVuIGFuIGl0ZXJhdGluZyBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gYEVpdGhlcmAsXG4gKiBgcGFydGl0aW9uTWFwYCBhcHBsaWVzIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24gdG8gZWFjaCBlbGVtZW50IGFuZCBpdCBjcmVhdGVzIHR3byBgQXJyYXlgczpcbiAqIGByaWdodGAgY29udGFpbmluZyB0aGUgdmFsdWVzIG9mIGBSaWdodGAgcmVzdWx0cywgYGxlZnRgIGNvbnRhaW5pbmcgdGhlIHZhbHVlcyBvZiBgTGVmdGAgcmVzdWx0cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGFydGl0aW9uTWFwIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBFaXRoZXIsIGxlZnQsIHJpZ2h0IH0gZnJvbSBcImZwLXRzL2xpYi9FaXRoZXJcIjtcbiAqXG4gKiBjb25zdCB1cHBlcklmU3RyaW5nID0gPEI+KHg6IEIpOiBFaXRoZXI8Qiwgc3RyaW5nPiA9PlxuICogICB0eXBlb2YgeCA9PT0gXCJzdHJpbmdcIiA/IHJpZ2h0KHgudG9VcHBlckNhc2UoKSkgOiBsZWZ0KHgpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb25NYXAodXBwZXJJZlN0cmluZykoWy0yLCBcImhlbGxvXCIsIDYsIDcsIFwid29ybGRcIl0pLCB7XG4gKiAgIGxlZnQ6IFstMiwgNiwgN10sXG4gKiAgIHJpZ2h0OiBbICdIRUxMTycsICdXT1JMRCcgXSxcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xuLyoqXG4gKiBTYW1lIGFzIFtgcGFydGl0aW9uTWFwYF0oI3BhcnRpdGlvbk1hcCksIGJ1dCBwYXNzaW5nIGFsc28gdGhlIGluZGV4IHRvIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBhcnRpdGlvbk1hcFdpdGhJbmRleCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgRWl0aGVyLCBsZWZ0LCByaWdodCB9IGZyb20gXCJmcC10cy9saWIvRWl0aGVyXCI7XG4gKlxuICogY29uc3QgdXBwZXJJZlN0cmluZ0JlZm9yZTMgPSA8Qj4oaW5kZXg6IG51bWJlciwgeDogQik6IEVpdGhlcjxCLCBzdHJpbmc+ID0+XG4gKiAgIGluZGV4IDwgMyAmJiB0eXBlb2YgeCA9PT0gXCJzdHJpbmdcIiA/IHJpZ2h0KHgudG9VcHBlckNhc2UoKSkgOiBsZWZ0KHgpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb25NYXBXaXRoSW5kZXgodXBwZXJJZlN0cmluZ0JlZm9yZTMpKFstMiwgXCJoZWxsb1wiLCA2LCA3LCBcIndvcmxkXCJdKSwge1xuICogICBsZWZ0OiBbLTIsIDYsIDcsIFwid29ybGRcIl0sXG4gKiAgIHJpZ2h0OiBbXCJIRUxMT1wiXSxcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbk1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgbGVmdCA9IFtdO1xuICAgICAgICB2YXIgcmlnaHQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGUgPSBmKGksIGZhW2ldKTtcbiAgICAgICAgICAgIGlmIChlLl90YWcgPT09ICdMZWZ0Jykge1xuICAgICAgICAgICAgICAgIGxlZnQucHVzaChlLmxlZnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmlnaHQucHVzaChlLnJpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbiAgICB9O1xufTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFsdGBdKCNhbHQpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIEEgZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgQS5hbHRXKCgpID0+IFsnYScsICdiJ10pXG4gKiAgICksXG4gKiAgIFsxLCAyLCAzLCAnYScsICdiJ11cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGFsdFcgPSBmdW5jdGlvbiAodGhhdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIGZhLmNvbmNhdCh0aGF0KCkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBJZGVudGlmaWVzIGFuIGFzc29jaWF0aXZlIG9wZXJhdGlvbiBvbiBhIHR5cGUgY29uc3RydWN0b3IuIEl0IGlzIHNpbWlsYXIgdG8gYFNlbWlncm91cGAsIGV4Y2VwdCB0aGF0IGl0IGFwcGxpZXMgdG9cbiAqIHR5cGVzIG9mIGtpbmQgYCogLT4gKmAuXG4gKlxuICogSW4gY2FzZSBvZiBgQXJyYXlgIGNvbmNhdGVuYXRlcyB0aGUgaW5wdXRzIGludG8gYSBzaW5nbGUgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIEEgZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgQS5hbHQoKCkgPT4gWzQsIDVdKVxuICogICApLFxuICogICBbMSwgMiwgMywgNCwgNV1cbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFsdCA9IGFsdFc7XG4vKipcbiAqIFNhbWUgYXMgW2BmaWx0ZXJgXSgjZmlsdGVyKSwgYnV0IHBhc3NpbmcgYWxzbyB0aGUgaW5kZXggdG8gdGhlIGl0ZXJhdGluZyBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmlsdGVyV2l0aEluZGV4IH0gZnJvbSAnZnAtdHMvQXJyYXknO1xuICpcbiAqIGNvbnN0IGYgPSAoaW5kZXg6IG51bWJlciwgeDogbnVtYmVyKSA9PiB4ID4gMCAmJiBpbmRleCA8PSAyO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaWx0ZXJXaXRoSW5kZXgoZikoWy0zLCAxLCAtMiwgNV0pLCBbMV0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlcldpdGhJbmRleCA9IGZ1bmN0aW9uIChwcmVkaWNhdGVXaXRoSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5maWx0ZXIoZnVuY3Rpb24gKGIsIGkpIHsgcmV0dXJuIHByZWRpY2F0ZVdpdGhJbmRleChpLCBiKTsgfSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEdpdmVuIGFuIGl0ZXJhdGluZyBmdW5jdGlvbiB0aGF0IHRha2VzIGBBcnJheTxBPmAgYXMgaW5wdXQsIGBleHRlbmRgIHJldHVybnNcbiAqIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIHJlc3VsdHMgb2YgdGhlIGl0ZXJhdGluZyBmdW5jdGlvbiBhcHBsaWVkIHRvIHRoZSB3aG9sZSBpbnB1dFxuICogYEFycmF5YCwgdGhlbiB0byB0aGUgaW5wdXQgYEFycmF5YCB3aXRob3V0IHRoZSBmaXJzdCBlbGVtZW50LCB0aGVuIHRvIHRoZSBpbnB1dFxuICogYEFycmF5YCB3aXRob3V0IHRoZSBmaXJzdCB0d28gZWxlbWVudHMsIGV0Yy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogY29uc3QgZiA9IChhOiBzdHJpbmdbXSkgPT4gYS5qb2luKFwiLFwiKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZXh0ZW5kKGYpKFtcImFcIiwgXCJiXCIsIFwiY1wiXSksIFtcImEsYixjXCIsIFwiYixjXCIsIFwiY1wiXSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXh0ZW5kID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh3YSkge1xuICAgIHJldHVybiB3YS5tYXAoZnVuY3Rpb24gKF8sIGkpIHsgcmV0dXJuIGYod2Euc2xpY2UoaSkpOyB9KTtcbn07IH07XG4vKipcbiAqIGBkdXBsaWNhdGVgIHJldHVybnMgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgd2hvbGUgaW5wdXQgYEFycmF5YCxcbiAqIHRoZW4gdG8gdGhlIGlucHV0IGBBcnJheWAgZHJvcHBpbmcgdGhlIGZpcnN0IGVsZW1lbnQsIHRoZW4gdG8gdGhlIGlucHV0XG4gKiBgQXJyYXlgIGRyb3BwaW5nIHRoZSBmaXJzdCB0d28gZWxlbWVudHMsIGV0Yy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZHVwbGljYXRlIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkdXBsaWNhdGUoW1wiYVwiLCBcImJcIiwgXCJjXCJdKSwgW1tcImFcIiwgXCJiXCIsIFwiY1wiXSwgW1wiYlwiLCBcImNcIl0sIFtcImNcIl1dKTtcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBkdXBsaWNhdGUgPSAvKiNfX1BVUkVfXyovIGV4dGVuZChpZGVudGl0eSk7XG4vKipcbiAqIE1hcCBhbmQgZm9sZCBhbiBgQXJyYXlgLlxuICogTWFwIHRoZSBgQXJyYXlgIHBhc3NpbmcgZWFjaCB2YWx1ZSB0byB0aGUgaXRlcmF0aW5nIGZ1bmN0aW9uLlxuICogVGhlbiBmb2xkIHRoZSByZXN1bHRzIHVzaW5nIHRoZSBwcm92aWRlZCBgTW9ub2lkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZm9sZE1hcCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IG1vbm9pZCA9IHsgY29uY2F0OiAoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IGEgKyBiLCBlbXB0eTogXCJcIiB9O1xuICogY29uc3QgZiA9IChzOiBzdHJpbmcpID0+IHMudG9VcHBlckNhc2UoKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmb2xkTWFwKG1vbm9pZCkoZikoW1wiYVwiLCBcImJcIiwgXCJjXCJdKSwgXCJBQkNcIik7XG4gKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZvbGRNYXAgPSBSQS5mb2xkTWFwO1xuLyoqXG4gKiBTYW1lIGFzIFtgZm9sZE1hcGBdKCNmb2xkTWFwKSBidXQgcGFzc2luZyBhbHNvIHRoZSBpbmRleCB0byB0aGUgaXRlcmF0aW5nIGZ1bmN0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmb2xkTWFwV2l0aEluZGV4IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogY29uc3QgbW9ub2lkID0geyBjb25jYXQ6IChhOiBzdHJpbmcsIGI6IHN0cmluZykgPT4gYSArIGIsIGVtcHR5OiBcIlwiIH07XG4gKiBjb25zdCBmID0gKGluZGV4Om51bWJlciwgczogc3RyaW5nKSA9PiBgJHtzLnRvVXBwZXJDYXNlKCl9KCR7aW5kZXh9KWBcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZm9sZE1hcFdpdGhJbmRleChtb25vaWQpKGYpKFtcImFcIiwgXCJiXCIsIFwiY1wiXSksIFwiQSgwKUIoMSlDKDIpXCIpO1xuICpcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkTWFwV2l0aEluZGV4ID0gUkEuZm9sZE1hcFdpdGhJbmRleDtcbi8qKlxuICogUmVkdWNlcyBhbiBgQXJyYXlgLlxuICpcbiAqIGByZWR1Y2VgIGV4ZWN1dGVzIHRoZSBzdXBwbGllZCBpdGVyYXRpbmcgZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSxcbiAqIGluIG9yZGVyLCBwYXNzaW5nIGluIHRoZSBlbGVtZW50IGFuZCB0aGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGNhbGN1bGF0aW9uIG9uIHRoZSBwcmVjZWRpbmcgZWxlbWVudC5cbiAqXG4gKiBUaGUgZmlyc3QgdGltZSB0aGF0IHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24gaXMgY2FsbGVkIHRoZXJlIGlzIG5vIFwicmV0dXJuIHZhbHVlIG9mIHRoZVxuICogcHJldmlvdXMgY2FsY3VsYXRpb25cIiwgdGhlIGluaXRpYWwgdmFsdWUgaXMgdXNlZCBpbiBpdHMgcGxhY2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHJlZHVjZSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmVkdWNlKDUsIChhY2M6IG51bWJlciwgY3VyOiBudW1iZXIpID0+IGFjYyAqIGN1cikoWzIsIDNdKSwgNSAqIDIgKiAzKTtcbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gUkEucmVkdWNlO1xuLyoqXG4gKiBTYW1lIGFzIFtgcmVkdWNlYF0oI3JlZHVjZSkgYnV0IHBhc3NpbmcgYWxzbyB0aGUgaW5kZXggdG8gdGhlIGl0ZXJhdGluZyBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcmVkdWNlV2l0aEluZGV4IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogY29uc3QgZiA9IChpbmRleDogbnVtYmVyLCBhY2M6IHN0cmluZywgY3VyOiB1bmtub3duKSA9PlxuICogICBhY2MgKyAodHlwZW9mIGN1ciA9PT0gXCJzdHJpbmdcIiA/IGN1ci50b1VwcGVyQ2FzZSgpICsgaW5kZXggOiBcIlwiKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmVkdWNlV2l0aEluZGV4KFwiXCIsIGYpKFsyLCBcImFcIiwgXCJiXCIsIG51bGxdKSwgXCJBMUIyXCIpO1xuICpcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBSQS5yZWR1Y2VXaXRoSW5kZXg7XG4vKipcbiAqIFNhbWUgYXMgW2ByZWR1Y2VgXSgjcmVkdWNlKSBidXQgYXBwbGllZCBmcm9tIHRoZSBlbmQgdG8gdGhlIHN0YXJ0LlxuICpcbiAqICpOb3RlKjogdGhlIGl0ZXJhdGluZyBmdW5jdGlvbiBpbiB0aGlzIGNhc2UgdGFrZXMgdGhlIGFjY3VtdWxhdG9yIGFzIHRoZSBsYXN0IGFyZ3VtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZWR1Y2VSaWdodCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocmVkdWNlUmlnaHQoXCJcIiwgKGN1cjogc3RyaW5nLCBhY2M6IHN0cmluZykgPT4gYWNjICsgY3VyKShbXCJhXCIsIFwiYlwiLCBcImNcIl0pLCBcImNiYVwiKTtcbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHQgPSBSQS5yZWR1Y2VSaWdodDtcbi8qKlxuICogU2FtZSBhcyBbYHJlZHVjZVJpZ2h0YF0oI3JlZHVjZVJpZ2h0KSBidXQgcGFzc2luZyBhbHNvIHRoZSBpbmRleCB0byB0aGUgaXRlcmF0aW5nIGZ1bmN0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZWR1Y2VSaWdodFdpdGhJbmRleCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IGYgPSAoaW5kZXg6IG51bWJlciwgY3VyOiB1bmtub3duLCBhY2M6IHN0cmluZykgPT5cbiAqICAgYWNjICsgKHR5cGVvZiBjdXIgPT09IFwic3RyaW5nXCIgPyBjdXIudG9VcHBlckNhc2UoKSArIGluZGV4IDogXCJcIik7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHJlZHVjZVJpZ2h0V2l0aEluZGV4KFwiXCIsIGYpKFsyLCBcImFcIiwgXCJiXCIsIG51bGxdKSwgXCJCMkExXCIpO1xuICpcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodFdpdGhJbmRleCA9IFJBLnJlZHVjZVJpZ2h0V2l0aEluZGV4O1xuLyoqXG4gKiBHaXZlbiBhbiBpdGVyYXRpbmcgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYEhLVGAgKGhpZ2hlciBraW5kZWQgdHlwZSksIGB0cmF2ZXJzZWBcbiAqIGFwcGxpZXMgdGhlIGl0ZXJhdGluZyBmdW5jdGlvbiB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIGBBcnJheWAgYW5kIHRoZW4gW2BzZXF1ZW5jZWBdKCNzZXF1ZW5jZSktc1xuICogdGhlIHJlc3VsdHMgdXNpbmcgdGhlIHByb3ZpZGVkIGBBcHBsaWNhdGl2ZWAuXG4gKlxuICogRS5nLiBzdXBwb3NlIHlvdSBoYXZlIGFuIGBBcnJheWAgYW5kIHlvdSB3YW50IHRvIGZvcm1hdCBlYWNoIGVsZW1lbnQgd2l0aCBhIGZ1bmN0aW9uXG4gKiB0aGF0IHJldHVybnMgYSByZXN1bHQgb3IgYW4gZXJyb3IgYXMgYGYgPSAoYTogQSkgPT4gRWl0aGVyPEVycm9yLCBCPmAsIHVzaW5nIGB0cmF2ZXJzZWBcbiAqIHlvdSBjYW4gYXBwbHkgYGZgIHRvIGFsbCBlbGVtZW50cyBhbmQgZGlyZWN0bHkgb2J0YWluIGFzIGEgcmVzdWx0IGFuIGBFaXRoZXI8RXJyb3IsQXJyYXk8Qj4+YFxuICogaS5lLiBhbiBgQXJyYXk8Qj5gIGlmIGFsbCB0aGUgcmVzdWx0cyBhcmUgYEJgLCBvciBhbiBgRXJyb3JgIGlmIHNvbWUgb2YgdGhlIHJlc3VsdHNcbiAqIGFyZSBgRXJyb3Jgcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdHJhdmVyc2UgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IEFwcGxpY2F0aXZlLCBsZWZ0LCByaWdodCB9IGZyb20gXCJmcC10cy9saWIvRWl0aGVyXCI7XG4gKlxuICogY29uc3QgZiA9ICh4OiB1bmtub3duKSA9PlxuICogICB0eXBlb2YgeCA9PT0gXCJzdHJpbmdcIiA/IHJpZ2h0KHgudG9VcHBlckNhc2UoKSkgOiBsZWZ0KG5ldyBFcnJvcihcIm5vdCBhIHN0cmluZ1wiKSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRyYXZlcnNlKEFwcGxpY2F0aXZlKShmKShbXCJhXCIsIFwiYlwiXSksIHJpZ2h0KFtcIkFcIiwgXCJCXCJdKSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRyYXZlcnNlKEFwcGxpY2F0aXZlKShmKShbXCJhXCIsIDVdKSwgbGVmdChuZXcgRXJyb3IoXCJub3QgYSBzdHJpbmdcIikpKTtcbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleEYgPSB0cmF2ZXJzZVdpdGhJbmRleChGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4RihmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG59O1xuLyoqXG4gKiBgc2VxdWVuY2VgIHRha2VzIGFuIGBBcnJheWAgd2hlcmUgZWxlbWVudHMgYXJlIGBIS1Q8QT5gIChoaWdoZXIga2luZGVkIHR5cGUpIGFuZCxcbiAqIHVzaW5nIGFuIGFwcGxpY2F0aXZlIG9mIHRoYXQgYEhLVGAsIHJldHVybnMgYW4gYEhLVGAgb2YgYEFycmF5PEE+YC5cbiAqIEUuZy4gaXQgY2FuIHR1cm4gYW4gYEFycmF5PEVpdGhlcjxFcnJvciwgc3RyaW5nPj5gIGludG8gYW4gYEVpdGhlcjxFcnJvciwgQXJyYXk8c3RyaW5nPj5gLlxuICpcbiAqIGBzZXF1ZW5jZWAgcmVxdWlyZXMgYW4gYEFwcGxpY2F0aXZlYCBvZiB0aGUgYEhLVGAgeW91IGFyZSB0YXJnZXRpbmcsIGUuZy4gdG8gdHVybiBhblxuICogYEFycmF5PEVpdGhlcjxFLCBBPj5gIGludG8gYW4gYEVpdGhlcjxFLCBBcnJheTxBPj5gLCBpdCBuZWVkcyBhblxuICogYEFwcGxpY2F0aXZlYCBmb3IgYEVpdGhlcmAsIHRvIHRvIHR1cm4gYW4gYEFycmF5PE9wdGlvbjxBPj5gIGludG8gYW4gYE9wdGlvbjxBcnJheTxBPj5gLFxuICogaXQgbmVlZHMgYW4gYEFwcGxpY2F0aXZlYCBmb3IgYE9wdGlvbmAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNlcXVlbmNlIH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBBcHBsaWNhdGl2ZSwgbGVmdCwgcmlnaHQgfSBmcm9tIFwiZnAtdHMvbGliL0VpdGhlclwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2VxdWVuY2UoQXBwbGljYXRpdmUpKFtyaWdodChcImFcIiksIHJpZ2h0KFwiYlwiKV0pLCByaWdodChbXCJhXCIsIFwiYlwiXSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgc2VxdWVuY2UoQXBwbGljYXRpdmUpKFtyaWdodChcImFcIiksIGxlZnQobmV3IEVycm9yKFwibm90IGEgc3RyaW5nXCIpKV0pLFxuICogICBsZWZ0KG5ldyBFcnJvcihcIm5vdCBhIHN0cmluZ1wiKSlcbiAqICk7XG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7XG4gICAgICAgIHJldHVybiBfcmVkdWNlKHRhLCBGLm9mKHplcm8oKSksIGZ1bmN0aW9uIChmYXMsIGZhKSB7XG4gICAgICAgICAgICByZXR1cm4gRi5hcChGLm1hcChmYXMsIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHBpcGUoYXMsIGFwcGVuZChhKSk7IH07IH0pLCBmYSk7XG4gICAgICAgIH0pO1xuICAgIH07XG59O1xuLyoqXG4gKiBTYW1lIGFzIFtgdHJhdmVyc2VgXSgjdHJhdmVyc2UpIGJ1dCBwYXNzaW5nIGFsc28gdGhlIGluZGV4IHRvIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHRyYXZlcnNlV2l0aEluZGV4IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBBcHBsaWNhdGl2ZSwgbGVmdCwgcmlnaHQgfSBmcm9tIFwiZnAtdHMvbGliL0VpdGhlclwiO1xuICpcbiAqIGNvbnN0IGYgPSAoaW5kZXg6bnVtYmVyLCB4OnVua25vd24pID0+XG4gKiAgIHR5cGVvZiB4ID09PSBcInN0cmluZ1wiID8gcmlnaHQoeC50b1VwcGVyQ2FzZSgpICsgaW5kZXgpIDogbGVmdChuZXcgRXJyb3IoXCJub3QgYSBzdHJpbmdcIikpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSkoZikoW1wiYVwiLCBcImJcIl0pLCByaWdodChbXCJBMFwiLCBcIkIxXCJdKSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKShmKShbXCJhXCIsIDVdKSwgbGVmdChuZXcgRXJyb3IoXCJub3QgYSBzdHJpbmdcIikpKTtcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KEYub2YoemVybygpKSwgZnVuY3Rpb24gKGksIGZicywgYSkge1xuICAgICAgICAgICAgcmV0dXJuIEYuYXAoRi5tYXAoZmJzLCBmdW5jdGlvbiAoYnMpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7IHJldHVybiBwaXBlKGJzLCBhcHBlbmQoYikpOyB9OyB9KSwgZihpLCBhKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aXRoZXIgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciBfd2l0aGVyRiA9IF93aXRoZXIoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIF93aXRoZXJGKGZhLCBmKTsgfTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpbHQgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciBfd2lsdEYgPSBfd2lsdChGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3dpbHRGKGZhLCBmKTsgfTsgfTtcbn07XG4vKipcbiAqIGB1bmZvbGRgIHRha2VzIGEgZnVuY3Rpb24gYGZgIHdoaWNoIHJldHVybnMgYW4gYE9wdGlvbmAgb2YgYSB0dXBsZSBjb250YWluaW5nIGFuIG91dGNvbWVcbiAqIHZhbHVlIGFuZCBhbiBpbnB1dCBmb3IgdGhlIGZvbGxvd2luZyBpdGVyYXRpb24uXG4gKiBgdW5mb2xkYCBhcHBsaWVzIGBmYCB0byB0aGUgaW5pdGlhbCB2YWx1ZSBgYmAgYW5kIHRoZW4gcmVjdXJzaXZlbHkgdG8gdGhlIHNlY29uZFxuICogZWxlbWVudCBvZiB0aGUgdHVwbGUgY29udGFpbmVkIGluIHRoZSByZXR1cm5lZCBgb3B0aW9uYCBvZiB0aGUgcHJldmlvdXNcbiAqIGNhbGN1bGF0aW9uIHVudGlsIGBmYCByZXR1cm5zIGBPcHRpb24ubm9uZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuZm9sZCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogY29uc3QgZiA9IChuOiBudW1iZXIpID0+IHtcbiAqICAgaWYgKG4gPD0gMCkgcmV0dXJuIG9wdGlvbi5ub25lO1xuICogICBjb25zdCByZXR1cm5WYWx1ZSA9IG4gKiAyO1xuICogICBjb25zdCBpbnB1dEZvck5leHRSb3VuZCA9IG4gLSAxO1xuICogICByZXR1cm4gb3B0aW9uLnNvbWUoW3JldHVyblZhbHVlLCBpbnB1dEZvck5leHRSb3VuZF0gYXMgY29uc3QpO1xuICogfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5mb2xkKDUsIGYpLCBbMTAsIDgsIDYsIDQsIDJdKTtcbiAqXG4gKiBAc2luY2UgMi42LjZcbiAqL1xuZXhwb3J0IHZhciB1bmZvbGQgPSBmdW5jdGlvbiAoYiwgZikge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICB2YXIgYmIgPSBiO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdGFudC1jb25kaXRpb25cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgbXQgPSBmKGJiKTtcbiAgICAgICAgaWYgKF8uaXNTb21lKG10KSkge1xuICAgICAgICAgICAgdmFyIF9hID0gbXQudmFsdWUsIGEgPSBfYVswXSwgYl8xID0gX2FbMV07XG4gICAgICAgICAgICBvdXQucHVzaChhKTtcbiAgICAgICAgICAgIGJiID0gYl8xO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdBcnJheSc7XG4vKipcbiAqIGBnZXRTaG93YCBtYWtlcyBhIGBTaG93YCBmb3IgYW4gYEFycmF5PEE+YCBmcm9tIGEgYFNob3dgIGZvclxuICogYW4gYEFgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRTaG93IH0gZnJvbSAnZnAtdHMvQXJyYXknXG4gKlxuICogY29uc3QgbnVtU2hvdyA9IHsgc2hvdzogKG46IG51bWJlcikgPT4gKG4gPj0gMCA/IGAke259YCA6IGAoJHstbn0pYCkgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0U2hvdyhudW1TaG93KS5zaG93KFstMiwgLTEsIDAsIDFdKSwgXCJbKDIpLCAoMSksIDAsIDFdXCIpO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBSQS5nZXRTaG93O1xuLyoqXG4gKiBHZXQgYSBgU2VtaWdyb3VwYCBiYXNlZCBvbiB0aGUgY29uY2F0ZW5hdGlvbiBvZiBgQXJyYXlgcy5cbiAqIFNlZSBhbHNvIFtgZ2V0TW9ub2lkYF0oI2dldE1vbm9pZCkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldFNlbWlncm91cCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IFMgPSBnZXRTZW1pZ3JvdXA8bnVtYmVyPigpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLmNvbmNhdChbMSwgMl0sIFsyLCAzXSksIFsxLCAyLCAyLCAzXSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmlyc3QuY29uY2F0KHNlY29uZCk7IH1cbn0pOyB9O1xuLyoqXG4gKiBSZXR1cm5zIGEgYE1vbm9pZGAgZm9yIGBBcnJheTxBPmAgYmFzZWQgb24gdGhlIGNvbmNhdGVuYXRpb24gb2YgYEFycmF5YHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IE0gPSBnZXRNb25vaWQ8bnVtYmVyPigpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KFsxLCAyXSwgWzMsIDRdKSwgWzEsIDIsIDMsIDRdKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRTZW1pZ3JvdXAoKS5jb25jYXQsXG4gICAgZW1wdHk6IFtdXG59KTsgfTtcbi8qKlxuICogRGVyaXZlcyBhbiBgRXFgIG92ZXIgdGhlIGBBcnJheWAgb2YgYSBnaXZlbiBlbGVtZW50IHR5cGUgZnJvbSB0aGUgYEVxYCBvZiB0aGF0IHR5cGUuIFRoZSBkZXJpdmVkIGBFcWAgZGVmaW5lcyB0d29cbiAqIGFycmF5cyBhcyBlcXVhbCBpZiBhbGwgZWxlbWVudHMgb2YgYm90aCBhcnJheXMgYXJlIGNvbXBhcmVkIGVxdWFsIHBhaXJ3aXNlIHdpdGggdGhlIGdpdmVuIGBFYC4gSW4gY2FzZSBvZiBhcnJheXMgb2ZcbiAqIGRpZmZlcmVudCBsZW5ndGhzLCB0aGUgcmVzdWx0IGlzIG5vbiBlcXVhbGl0eS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBnZXRFcSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IEUgPSBnZXRFcShTLkVxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsnYScsICdiJ10sIFsnYScsICdiJ10pLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKFsnYSddLCBbXSksIGZhbHNlKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldEVxID0gUkEuZ2V0RXE7XG4vKipcbiAqIERlcml2ZXMgYW4gYE9yZGAgb3ZlciB0aGUgYEFycmF5YCBvZiBhIGdpdmVuIGVsZW1lbnQgdHlwZSBmcm9tIHRoZSBgT3JkYCBvZiB0aGF0IHR5cGUuIFRoZSBvcmRlcmluZyBiZXR3ZWVuIHR3byBzdWNoXG4gKiBhcnJheXMgaXMgZXF1YWwgdG86IHRoZSBmaXJzdCBub24gZXF1YWwgY29tcGFyaXNvbiBvZiBlYWNoIGFycmF5cyBlbGVtZW50cyB0YWtlbiBwYWlyd2lzZSBpbiBpbmNyZWFzaW5nIG9yZGVyLCBpblxuICogY2FzZSBvZiBlcXVhbGl0eSBvdmVyIGFsbCB0aGUgcGFpcndpc2UgZWxlbWVudHM7IHRoZSBsb25nZXN0IGFycmF5IGlzIGNvbnNpZGVyZWQgdGhlIGdyZWF0ZXN0LCBpZiBib3RoIGFycmF5cyBoYXZlXG4gKiB0aGUgc2FtZSBsZW5ndGgsIHRoZSByZXN1bHQgaXMgZXF1YWxpdHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldE9yZCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogY29uc3QgTyA9IGdldE9yZChTLk9yZClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoWydiJ10sIFsnYSddKSwgMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoWydhJ10sIFsnYSddKSwgMClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoWydhJ10sIFsnYiddKSwgLTEpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JkID0gUkEuZ2V0T3JkO1xuLyoqXG4gKiBHZXQgYSBgU2VtaWdyb3VwYCBiYXNlZCBvbiB0aGUgdW5pb24gb2YgdGhlIGVsZW1lbnRzIG9mIGBBcnJheWBzLlxuICogRWxlbWVudHMgd2hpY2ggZXF1YWwgYWNjb3JkaW5nIHRvIHRoZSBwcm92aWRlZCBgRXFgIGFyZSBpbmNsdWRlZFxuICogb25seSBvbmNlIGluIHRoZSByZXN1bHQuXG4gKiBTZWUgYWxzbyBbYGdldFVuaW9uTW9ub2lkYF0oI2dldFVuaW9uTW9ub2lkKS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0VW5pb25TZW1pZ3JvdXAgfSBmcm9tICdmcC10cy9BcnJheSc7XG4gKiBpbXBvcnQgeyBFcSB9IGZyb20gJ2ZwLXRzL251bWJlcic7XG4gKlxuICogY29uc3QgUyA9IGdldFVuaW9uU2VtaWdyb3VwPG51bWJlcj4oRXEpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLmNvbmNhdChbMSwgMl0sIFsyLCAzXSksIFsxLCAyLCAzXSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFVuaW9uU2VtaWdyb3VwID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgdW5pb25FID0gdW5pb24oRSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gdW5pb25FKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG4vKipcbiAqIEdldCBhIGBNb25vaWRgIGJhc2VkIG9uIHRoZSB1bmlvbiBvZiB0aGUgZWxlbWVudHMgb2YgYEFycmF5YHMuXG4gKiBFbGVtZW50cyB3aGljaCBlcXVhbCBhY2NvcmRpbmcgdG8gdGhlIHByb3ZpZGVkIGBFcWAgYXJlIGluY2x1ZGVkXG4gKiBvbmx5IG9uY2UgaW4gdGhlIHJlc3VsdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0VW5pb25Nb25vaWQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqIGltcG9ydCB7IEVxIH0gZnJvbSAnZnAtdHMvbnVtYmVyJztcbiAqXG4gKiBjb25zdCBNID0gZ2V0VW5pb25Nb25vaWQ8bnVtYmVyPihFcSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KFsxLCAyXSwgWzIsIDNdKSwgWzEsIDIsIDNdKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5lbXB0eSxbXSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFVuaW9uTW9ub2lkID0gZnVuY3Rpb24gKEUpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRVbmlvblNlbWlncm91cChFKS5jb25jYXQsXG4gICAgZW1wdHk6IFtdXG59KTsgfTtcbi8qKlxuICogR2V0IGEgYFNlbWlncm91cGAgYmFzZWQgb24gdGhlIGludGVyc2VjdGlvbiBvZiB0aGUgZWxlbWVudHMgb2YgYEFycmF5YHMuXG4gKiBPbmx5IGVsZW1lbnRzIHByZXNlbnQgaW4gdGhlIHR3byBhcnJheXMgd2hpY2ggYXJlIGVxdWFsIGFjY29yZGluZyB0byB0aGVcbiAqIHByb3ZpZGVkIGBFcWAgYXJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEludGVyc2VjdGlvblNlbWlncm91cCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgRXEgfSBmcm9tICdmcC10cy9udW1iZXInO1xuICpcbiAqIGNvbnN0IFMgPSBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXA8bnVtYmVyPihFcSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuY29uY2F0KFsxLCAyXSwgWzIsIDNdKSwgWzJdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgaW50ZXJzZWN0aW9uRSA9IGludGVyc2VjdGlvbihFKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBpbnRlcnNlY3Rpb25FKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG4vKipcbiAqIEdldCBhIGBNYWdtYWAgZm9yIGBBcnJheWAgd2hlcmUgdGhlIGBjb25jYXRgIGZ1bmN0aW9uIGlzIHRoZSBkaWZmZXJuY2UgYmV0d2VlblxuICogdGhlIGZpcnN0IGFuZCB0aGUgc2Vjb25kIGFycmF5LCBpLmUuIHRoZSByZXN1bHQgY29udGFpbnMgYWxsIHRoZSBlbGVtZW50cyBvZiB0aGVcbiAqIGZpcnN0IGFycmF5IGZvciB3aGljaCB0aGVpciBpcyBubyBlcXVhbCBlbGVtZW50IGluIHRoZSBzZWNvbmQgYXJyYXkgYWNjb3JkaW5nXG4gKiB0byB0aGUgYEVxYCBwcm92aWRlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldERpZmZlcmVuY2VNYWdtYSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICogaW1wb3J0IHsgRXEgfSBmcm9tICdmcC10cy9udW1iZXInO1xuICpcbiAqIGNvbnN0IFMgPSBnZXREaWZmZXJlbmNlTWFnbWE8bnVtYmVyPihFcSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuY29uY2F0KFsxLCAyXSwgWzIsIDNdKSwgWzFdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RGlmZmVyZW5jZU1hZ21hID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgZGlmZmVyZW5jZUUgPSBkaWZmZXJlbmNlKEUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGRpZmZlcmVuY2VFKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3IgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwXG59O1xuLyoqXG4gKiBHaXZlbiBhbiBpbnB1dCBhbiBgQXJyYXlgIG9mIGZ1bmN0aW9ucywgYGZsYXBgIHJldHVybnMgYW4gYEFycmF5YCBjb250YWluaW5nXG4gKiB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyBlYWNoIGZ1bmN0aW9uIHRvIHRoZSBnaXZlbiBpbnB1dC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmxhcCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGNvbnN0IGZ1bnMgPSBbXG4gKiAgIChuOiBudW1iZXIpID0+IGBEb3VibGU6ICR7biAqIDJ9YCxcbiAqICAgKG46IG51bWJlcikgPT4gYFRyaXBsZTogJHtuICogM31gLFxuICogICAobjogbnVtYmVyKSA9PiBgU3F1YXJlOiAke24gKiBufWAsXG4gKiBdO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmbGFwKDQpKGZ1bnMpLCBbJ0RvdWJsZTogOCcsICdUcmlwbGU6IDEyJywgJ1NxdWFyZTogMTYnXSk7XG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIEEgZnJvbSAnZnAtdHMvQXJyYXknXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgQS5jaGFpbkZpcnN0KCgpID0+IFsnYScsICdiJ10pXG4gKiAgICksXG4gKiAgIFsxLCAxLCAyLCAyLCAzLCAzXVxuICogKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBbMSwgMiwgM10sXG4gKiAgICAgQS5jaGFpbkZpcnN0KCgpID0+IFtdKVxuICogICApLFxuICogICBbXVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0ID0gXG4vKiNfX1BVUkVfXyovIGNoYWluRmlyc3RfKENoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBVbmZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHVuZm9sZDogdW5mb2xkXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBbHQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFsdDogX2FsdFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFplcm8gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ3VhcmQgPSAvKiNfX1BVUkVfXyovIGd1YXJkXyhaZXJvLCBQb2ludGVkKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQWx0ZXJuYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFsdDogX2FsdCxcbiAgICB6ZXJvOiB6ZXJvXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBFeHRlbmQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGV4dGVuZDogX2V4dGVuZFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29tcGFjdGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGVcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRmlsdGVyYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IF9wYXJ0aXRpb25NYXBXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uV2l0aEluZGV4OiBfcGFydGl0aW9uV2l0aEluZGV4LFxuICAgIGZpbHRlck1hcFdpdGhJbmRleDogX2ZpbHRlck1hcFdpdGhJbmRleCxcbiAgICBmaWx0ZXJXaXRoSW5kZXg6IF9maWx0ZXJXaXRoSW5kZXhcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgsXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleCxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXhcbn07XG52YXIgX3dpdGhlciA9IC8qI19fUFVSRV9fKi8gd2l0aGVyRGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xudmFyIF93aWx0ID0gLyojX19QVVJFX18qLyB3aWx0RGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBXaXRoZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGNoYWluUmVjRGVwdGhGaXJzdCA9IFJBLmNoYWluUmVjRGVwdGhGaXJzdDtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIENoYWluUmVjRGVwdGhGaXJzdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICBjaGFpblJlYzogX2NoYWluUmVjRGVwdGhGaXJzdFxufTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpblJlY0JyZWFkdGhGaXJzdCA9IFJBLmNoYWluUmVjQnJlYWR0aEZpcnN0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgQ2hhaW5SZWNCcmVhZHRoRmlyc3QgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgY2hhaW5SZWM6IF9jaGFpblJlY0JyZWFkdGhGaXJzdFxufTtcbi8qKlxuICogRmlsdGVyIHZhbHVlcyBpbnNpZGUgYSBjb250ZXh0LlxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJFID0gLyojX19QVVJFX18qLyBmaWx0ZXJFXyhXaXRoZXJhYmxlKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIEZyb21FaXRoZXIgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgZnJvbUVpdGhlcjogZnJvbUVpdGhlclxufTtcbi8qKlxuICogQGNhdGVnb3J5IGxpZnRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRWl0aGVySyA9IC8qI19fUFVSRV9fKi8gZnJvbUVpdGhlcktfKEZyb21FaXRoZXIpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdW5zYWZlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSB1bnNhZmVcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHVuc2FmZUluc2VydEF0ID0gTkVBLnVuc2FmZUluc2VydEF0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdW5zYWZlXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB1bnNhZmVVcGRhdGVBdCA9IGZ1bmN0aW9uIChpLCBhLCBhcykge1xuICAgIHJldHVybiBpc05vbkVtcHR5KGFzKSA/IE5FQS51bnNhZmVVcGRhdGVBdChpLCBhLCBhcykgOiBbXTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB1bnNhZmVcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHVuc2FmZURlbGV0ZUF0ID0gZnVuY3Rpb24gKGksIGFzKSB7XG4gICAgdmFyIHhzID0gYXMuc2xpY2UoKTtcbiAgICB4cy5zcGxpY2UoaSwgMSk7XG4gICAgcmV0dXJuIHhzO1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIGBldmVyeWAgdGVsbHMgaWYgdGhlIHByb3ZpZGVkIHByZWRpY2F0ZSBob2xkcyB0cnVlIGZvciBldmVyeSBlbGVtZW50IGluIHRoZSBgQXJyYXlgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBldmVyeSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5lcXVhbChldmVyeSgoeDogbnVtYmVyKSA9PiB4ID49IDApKFsxLCAyLCAzXSksIHRydWUpO1xuICogYXNzZXJ0LmVxdWFsKGV2ZXJ5KCh4OiBudW1iZXIpID0+IHggPj0gMCkoWy0xLCAyLCAzXSksIGZhbHNlKTtcbiAqXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBldmVyeSA9IFJBLmV2ZXJ5O1xuLyoqXG4gKiBgc29tZWAgdGVsbHMgaWYgdGhlIHByb3ZpZGVkIHByZWRpY2F0ZSBob2xkcyB0cnVlIGF0IGxlYXN0IGZvciBvbmUgZWxlbWVudCBpbiB0aGUgYEFycmF5YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzc2VydC5lcXVhbChzb21lKCh4OiBudW1iZXIpID0+IHggPj0gMCkoWzEsIDIsIDNdKSwgdHJ1ZSk7XG4gKiBhc3NlcnQuZXF1YWwoc29tZSgoeDogbnVtYmVyKSA9PiB4ID49IDEwKShbMSwgMiwgM10pLCBmYWxzZSk7XG4gKlxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgc29tZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBhcy5zb21lKHByZWRpY2F0ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEFsaWFzIG9mIFtgc29tZWBdKCNzb21lKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBleGlzdHMgPSBzb21lO1xuLyoqXG4gKiBQbGFjZXMgYW4gZWxlbWVudCBpbiBiZXR3ZWVuIG1lbWJlcnMgb2YgYW4gYEFycmF5YCwgdGhlbiBmb2xkcyB0aGUgcmVzdWx0cyB1c2luZyB0aGUgcHJvdmlkZWQgYE1vbm9pZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgaW50ZXJjYWxhdGUgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyY2FsYXRlKFMuTW9ub2lkKSgnLScpKFsnYScsICdiJywgJ2MnXSksICdhLWItYycpXG4gKlxuICogQHNpbmNlIDIuMTIuMFxuICovXG5leHBvcnQgdmFyIGludGVyY2FsYXRlID0gUkEuaW50ZXJjYWxhdGU7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkbyBub3RhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIERvID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVjb3JkKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kVG8gPSAvKiNfX1BVUkVfXyovIGJpbmRUb18oRnVuY3Rvcik7XG52YXIgbGV0XyA9IC8qI19fUFVSRV9fKi8gbGV0X18oRnVuY3Rvcik7XG5leHBvcnQgeyBcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMy4wXG4gKi9cbmxldF8gYXMgbGV0IH07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZCA9IC8qI19fUFVSRV9fKi8gYmluZF8oQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGFwUyA9IC8qI19fUFVSRV9fKi8gYXBTXyhBcHBseSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBsZWdhY3lcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWxpYXMgb2YgYGZsYXRNYXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluID0gZmxhdE1hcDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIGBOb25FbXB0eUFycmF5YCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHJhbmdlID0gTkVBLnJhbmdlO1xuLyoqXG4gKiBVc2UgYSBuZXcgYFtdYCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZW1wdHkgPSBbXTtcbi8qKlxuICogVXNlIGBwcmVwZW5kYCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgY29ucyA9IE5FQS5jb25zO1xuLyoqXG4gKiBVc2UgYGFwcGVuZGAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHNub2MgPSBORUEuc25vYztcbi8qKlxuICogVXNlIGBwcmVwZW5kQWxsYCBpbnN0ZWFkXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjkuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBwcmVwZW5kVG9BbGwgPSBwcmVwZW5kQWxsO1xuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYEZ1bmN0b3JgIGluc3RhbmNlLCBwYXNzIGBBLkZ1bmN0b3JgIGluc3RlYWQgb2YgYEEuYXJyYXlgXG4gKiAod2hlcmUgYEFgIGlzIGZyb20gYGltcG9ydCBBIGZyb20gJ2ZwLXRzL0FycmF5J2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBhcnJheSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IF9wYXJ0aXRpb25NYXBXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uV2l0aEluZGV4OiBfcGFydGl0aW9uV2l0aEluZGV4LFxuICAgIGZpbHRlck1hcFdpdGhJbmRleDogX2ZpbHRlck1hcFdpdGhJbmRleCxcbiAgICBmaWx0ZXJXaXRoSW5kZXg6IF9maWx0ZXJXaXRoSW5kZXgsXG4gICAgYWx0OiBfYWx0LFxuICAgIHplcm86IHplcm8sXG4gICAgdW5mb2xkOiB1bmZvbGQsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4LFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuIiwKICAiaW1wb3J0IHsgY29uc3RGYWxzZSwgY29uc3RUcnVlLCBmbG93LCBwaXBlIH0gZnJvbSAnLi9mdW5jdGlvbic7XG52YXIgY29udHJhbWFwXyA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIGYpIHsgcmV0dXJuIHBpcGUocHJlZGljYXRlLCBjb250cmFtYXAoZikpOyB9O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgY29udHJhbWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgICAgICByZXR1cm4gZmxvdyhmLCBwcmVkaWNhdGUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1ByZWRpY2F0ZSc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXBBbnkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHBpcGUoZmlyc3QsIG9yKHNlY29uZCkpOyB9XG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZEFueSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRTZW1pZ3JvdXBBbnkoKS5jb25jYXQsXG4gICAgZW1wdHk6IGNvbnN0RmFsc2Vcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U2VtaWdyb3VwQWxsID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBwaXBlKGZpcnN0LCBhbmQoc2Vjb25kKSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TW9ub2lkQWxsID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGdldFNlbWlncm91cEFsbCgpLmNvbmNhdCxcbiAgICBlbXB0eTogY29uc3RUcnVlXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIENvbnRyYXZhcmlhbnQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29udHJhbWFwOiBjb250cmFtYXBfXG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIG5vdCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgcmV0dXJuICFwcmVkaWNhdGUoYSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBvciA9IGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0KGEpIHx8IHNlY29uZChhKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGFuZCA9IGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0KGEpICYmIHNlY29uZChhKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbiIsCiAgImltcG9ydCB7IGNvbnN0RmFsc2UsIGNvbnN0VHJ1ZSwgZmxvdywgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xudmFyIGNvbnRyYW1hcF8gPSBmdW5jdGlvbiAocHJlZGljYXRlLCBmKSB7IHJldHVybiBwaXBlKHByZWRpY2F0ZSwgY29udHJhbWFwKGYpKTsgfTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGNvbnRyYW1hcCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICAgICAgcmV0dXJuIGZsb3coZiwgcHJlZGljYXRlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdQcmVkaWNhdGUnO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U2VtaWdyb3VwQW55ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBwaXBlKGZpcnN0LCBvcihzZWNvbmQpKTsgfVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRNb25vaWRBbnkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZ2V0U2VtaWdyb3VwQW55KCkuY29uY2F0LFxuICAgIGVtcHR5OiBjb25zdEZhbHNlXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cEFsbCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gcGlwZShmaXJzdCwgYW5kKHNlY29uZCkpOyB9XG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZEFsbCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRTZW1pZ3JvdXBBbGwoKS5jb25jYXQsXG4gICAgZW1wdHk6IGNvbnN0VHJ1ZVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBDb250cmF2YXJpYW50ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbnRyYW1hcDogY29udHJhbWFwX1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBub3QgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHJldHVybiAhcHJlZGljYXRlKGEpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgb3IgPSBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdChhKSB8fCBzZWNvbmQoYSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBhbmQgPSBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdChhKSAmJiBzZWNvbmQoYSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4iLAogICJpbXBvcnQgeyBnZXRBcHBsaWNhdGl2ZU1vbm9pZCB9IGZyb20gJy4vQXBwbGljYXRpdmUnO1xuaW1wb3J0IHsgYXBGaXJzdCBhcyBhcEZpcnN0XywgYXBTIGFzIGFwU18sIGFwU2Vjb25kIGFzIGFwU2Vjb25kXywgZ2V0QXBwbHlTZW1pZ3JvdXAgYXMgZ2V0QXBwbHlTZW1pZ3JvdXBfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgKiBhcyBjaGFpbmFibGUgZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBjaGFpbkVpdGhlcksgYXMgY2hhaW5FaXRoZXJLXywgZnJvbUVpdGhlcksgYXMgZnJvbUVpdGhlcktfLCB0YXBFaXRoZXIgYXMgdGFwRWl0aGVyXyB9IGZyb20gJy4vRnJvbUVpdGhlcic7XG5pbXBvcnQgeyBjb25zdE51bGwsIGNvbnN0VW5kZWZpbmVkLCBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgYXMgYXMgYXNfLCBhc1VuaXQgYXMgYXNVbml0XywgYmluZFRvIGFzIGJpbmRUb18sIGZsYXAgYXMgZmxhcF8sIGxldCBhcyBsZXRfXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0IHsgbm90IH0gZnJvbSAnLi9QcmVkaWNhdGUnO1xuaW1wb3J0IHsgZmlyc3QsIGxhc3QgfSBmcm9tICcuL1NlbWlncm91cCc7XG5pbXBvcnQgeyBzZXBhcmF0ZWQgfSBmcm9tICcuL1NlcGFyYXRlZCc7XG5pbXBvcnQgeyB3aWx0RGVmYXVsdCwgd2l0aGVyRGVmYXVsdCB9IGZyb20gJy4vV2l0aGVyYWJsZSc7XG5pbXBvcnQgeyBndWFyZCBhcyBndWFyZF8gfSBmcm9tICcuL1plcm8nO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29uc3RydWN0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIGBOb25lYCBkb2Vzbid0IGhhdmUgYSBjb25zdHJ1Y3RvciwgaW5zdGVhZCB5b3UgY2FuIHVzZSBpdCBkaXJlY3RseSBhcyBhIHZhbHVlLiBSZXByZXNlbnRzIGEgbWlzc2luZyB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBub25lID0gXy5ub25lO1xuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgYFNvbWVgLiBSZXByZXNlbnRzIGFuIG9wdGlvbmFsIHZhbHVlIHRoYXQgZXhpc3RzLlxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNvbWUgPSBfLnNvbWU7XG5leHBvcnQgZnVuY3Rpb24gZnJvbVByZWRpY2F0ZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChwcmVkaWNhdGUoYSkgPyBzb21lKGEpIDogbm9uZSk7IH07XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGBMZWZ0YCB2YWx1ZSBvZiBhbiBgRWl0aGVyYCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TGVmdCwgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHJpZ2h0LCBsZWZ0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0TGVmdChyaWdodCgxKSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldExlZnQobGVmdCgnYScpKSwgc29tZSgnYScpKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldExlZnQgPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChtYS5fdGFnID09PSAnUmlnaHQnID8gbm9uZSA6IHNvbWUobWEubGVmdCkpOyB9O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBgUmlnaHRgIHZhbHVlIG9mIGFuIGBFaXRoZXJgIGlmIHBvc3NpYmxlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRSaWdodCwgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHJpZ2h0LCBsZWZ0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0UmlnaHQocmlnaHQoMSkpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRSaWdodChsZWZ0KCdhJykpLCBub25lKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldFJpZ2h0ID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAobWEuX3RhZyA9PT0gJ0xlZnQnID8gbm9uZSA6IHNvbWUobWEucmlnaHQpKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbnZhciBfcmVkdWNlID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2UoYiwgZikpOyB9O1xudmFyIF9mb2xkTWFwID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcE0gPSBmb2xkTWFwKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBNKGYpKTsgfTtcbn07XG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG52YXIgX3RyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VGKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9hbHQgPSBmdW5jdGlvbiAoZmEsIHRoYXQpIHsgcmV0dXJuIHBpcGUoZmEsIGFsdCh0aGF0KSk7IH07XG52YXIgX2ZpbHRlciA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXIocHJlZGljYXRlKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9maWx0ZXJNYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlck1hcChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9leHRlbmQgPSBmdW5jdGlvbiAod2EsIGYpIHsgcmV0dXJuIHBpcGUod2EsIGV4dGVuZChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9wYXJ0aXRpb24gPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb24ocHJlZGljYXRlKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25NYXAoZikpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBVUkkgPSAnT3B0aW9uJztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U2hvdyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIHNob3c6IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKGlzTm9uZShtYSkgPyAnbm9uZScgOiBcInNvbWUoXCIuY29uY2F0KFMuc2hvdyhtYS52YWx1ZSksIFwiKVwiKSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgZ2V0RXEgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBFID0gZ2V0RXEoTi5FcSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhub25lLCBub25lKSwgdHJ1ZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhub25lLCBzb21lKDEpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgbm9uZSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIHNvbWUoMikpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBzb21lKDEpKSwgdHJ1ZSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRFcSA9IGZ1bmN0aW9uIChFKSB7IHJldHVybiAoe1xuICAgIGVxdWFsczogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggPT09IHkgfHwgKGlzTm9uZSh4KSA/IGlzTm9uZSh5KSA6IGlzTm9uZSh5KSA/IGZhbHNlIDogRS5lcXVhbHMoeC52YWx1ZSwgeS52YWx1ZSkpOyB9XG59KTsgfTtcbi8qKlxuICogVGhlIGBPcmRgIGluc3RhbmNlIGFsbG93cyBgT3B0aW9uYCB2YWx1ZXMgdG8gYmUgY29tcGFyZWQgd2l0aFxuICogYGNvbXBhcmVgLCB3aGVuZXZlciB0aGVyZSBpcyBhbiBgT3JkYCBpbnN0YW5jZSBmb3JcbiAqIHRoZSB0eXBlIHRoZSBgT3B0aW9uYCBjb250YWlucy5cbiAqXG4gKiBgTm9uZWAgaXMgY29uc2lkZXJlZCB0byBiZSBsZXNzIHRoYW4gYW55IGBTb21lYCB2YWx1ZS5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGdldE9yZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE8gPSBnZXRPcmQoTi5PcmQpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKG5vbmUsIG5vbmUpLCAwKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShub25lLCBzb21lKDEpKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIG5vbmUpLCAxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBzb21lKDIpKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIHNvbWUoMSkpLCAwKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE9yZCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIGVxdWFsczogZ2V0RXEoTykuZXF1YWxzLFxuICAgIGNvbXBhcmU6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiAoeCA9PT0geSA/IDAgOiBpc1NvbWUoeCkgPyAoaXNTb21lKHkpID8gTy5jb21wYXJlKHgudmFsdWUsIHkudmFsdWUpIDogMSkgOiAtMSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSBsZWZ0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZS4gSWYgYm90aCBvcGVyYW5kcyBhcmUgYFNvbWVgcyB0aGVuIHRoZSBpbm5lciB2YWx1ZXMgYXJlXG4gKiBjb25jYXRlbmF0ZWQgdXNpbmcgdGhlIHByb3ZpZGVkIGBTZW1pZ3JvdXBgXG4gKlxuICogfCB4ICAgICAgIHwgeSAgICAgICB8IGNvbmNhdCh4LCB5KSAgICAgICB8XG4gKiB8IC0tLS0tLS0gfCAtLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tIHxcbiAqIHwgbm9uZSAgICB8IG5vbmUgICAgfCBub25lICAgICAgICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgbm9uZSAgICB8IHNvbWUoYSkgICAgICAgICAgICB8XG4gKiB8IG5vbmUgICAgfCBzb21lKGIpIHwgc29tZShiKSAgICAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IHNvbWUoYikgfCBzb21lKGNvbmNhdChhLCBiKSkgfFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgTSA9IGdldE1vbm9pZChTZW1pZ3JvdXBTdW0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIG5vbmUpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBub25lKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgc29tZSgxKSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIHNvbWUoMikpLCBzb21lKDMpKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIChpc05vbmUoeCkgPyB5IDogaXNOb25lKHkpID8geCA6IHNvbWUoUy5jb25jYXQoeC52YWx1ZSwgeS52YWx1ZSkpKTsgfSxcbiAgICBlbXB0eTogbm9uZVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogc29tZShmKGZhLnZhbHVlKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogTWFwcyB0aGUgYFNvbWVgIHZhbHVlIG9mIHRoaXMgYE9wdGlvbmAgdG8gdGhlIHNwZWNpZmllZCBjb25zdGFudCB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIGFzID0gZHVhbCgyLCBhc18oRnVuY3RvcikpO1xuLyoqXG4gKiBNYXBzIHRoZSBgU29tZWAgdmFsdWUgb2YgdGhpcyBgT3B0aW9uYCB0byB0aGUgdm9pZCBjb25zdGFudCB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIGFzVW5pdCA9IGFzVW5pdF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIG9mID0gc29tZTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcCA9IGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZnVuY3Rpb24gKGZhYikge1xuICAgIHJldHVybiBpc05vbmUoZmFiKSA/IG5vbmUgOiBpc05vbmUoZmEpID8gbm9uZSA6IHNvbWUoZmFiLnZhbHVlKGZhLnZhbHVlKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbHkgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFwcGxpY2F0aXZlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjE0LjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0TWFwID0gLyojX19QVVJFX18qLyBkdWFsKDIsIGZ1bmN0aW9uIChtYSwgZikgeyByZXR1cm4gKGlzTm9uZShtYSkgPyBub25lIDogZihtYS52YWx1ZSkpOyB9KTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIENoYWluID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2UgPSBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBiIDogZihiLCBmYS52YWx1ZSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7IHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBNLmVtcHR5IDogZihmYS52YWx1ZSk7XG59OyB9OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBiIDogZihmYS52YWx1ZSwgYik7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodFxufTtcbi8qKlxuICogUmV0dXJucyB0aGUgcHJvdmlkZWQgYE9wdGlvbmAgYHRoYXRgIGlmIGBzZWxmYCBpcyBgTm9uZWAsIG90aGVyd2lzZSByZXR1cm5zIGBzZWxmYC5cbiAqXG4gKiBAcGFyYW0gc2VsZiAtIFRoZSBmaXJzdCBgT3B0aW9uYCB0byBiZSBjaGVja2VkLlxuICogQHBhcmFtIHRoYXQgLSBUaGUgYE9wdGlvbmAgdG8gcmV0dXJuIGlmIGBzZWxmYCBpcyBgTm9uZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE8gZnJvbSBcImZwLXRzL09wdGlvblwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLm5vbmUsICgpID0+IE8ubm9uZSksIE8ubm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5zb21lKDEpLCAoKSA9PiBPLm5vbmUpLCBPLnNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8ubm9uZSwgKCkgPT4gTy5zb21lKCdiJykpLCBPLnNvbWUoJ2InKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5zb21lKDEpLCAoKSA9PiBPLnNvbWUoJ2InKSksIE8uc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBvckVsc2UgPSBkdWFsKDIsIGZ1bmN0aW9uIChzZWxmLCB0aGF0KSB7IHJldHVybiAoaXNOb25lKHNlbGYpID8gdGhhdCgpIDogc2VsZik7IH0pO1xuLyoqXG4gKiBBbGlhcyBvZiBgb3JFbHNlYC5cbiAqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgYWx0YF0oI2FsdCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gb3JFbHNlO1xuLyoqXG4gKiBBbGlhcyBvZiBgb3JFbHNlYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhbHQgPSBvckVsc2U7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciB6ZXJvID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9uZTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFplcm8gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ3VhcmQgPSAvKiNfX1BVUkVfXyovIGd1YXJkXyhaZXJvLCBQb2ludGVkKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQWx0ZXJuYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFsdDogX2FsdCxcbiAgICB6ZXJvOiB6ZXJvXG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHdhKSB7XG4gICAgcmV0dXJuIGlzTm9uZSh3YSkgPyBub25lIDogc29tZShmKHdhKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBFeHRlbmQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGV4dGVuZDogX2V4dGVuZFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29tcGFjdCA9IC8qI19fUFVSRV9fKi8gZmxhdE1hcChpZGVudGl0eSk7XG52YXIgZGVmYXVsdFNlcGFyYXRlZCA9IC8qI19fUFVSRV9fKi8gc2VwYXJhdGVkKG5vbmUsIG5vbmUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzZXBhcmF0ZSA9IGZ1bmN0aW9uIChtYSkge1xuICAgIHJldHVybiBpc05vbmUobWEpID8gZGVmYXVsdFNlcGFyYXRlZCA6IHNlcGFyYXRlZChnZXRMZWZ0KG1hLnZhbHVlKSwgZ2V0UmlnaHQobWEudmFsdWUpKTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIENvbXBhY3RhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXIgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKGZhKSA/IG5vbmUgOiBwcmVkaWNhdGUoZmEudmFsdWUpID8gZmEgOiBub25lO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJNYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogZihmYS52YWx1ZSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb24gPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKF9maWx0ZXIoZmEsIG5vdChwcmVkaWNhdGUpKSwgX2ZpbHRlcihmYSwgcHJlZGljYXRlKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmbG93KG1hcChmKSwgc2VwYXJhdGUpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGaWx0ZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHtcbiAgICAgICAgICAgIHJldHVybiBpc05vbmUodGEpID8gRi5vZihub25lKSA6IEYubWFwKGYodGEudmFsdWUpLCBzb21lKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUodGEpID8gRi5vZihub25lKSA6IEYubWFwKHRhLnZhbHVlLCBzb21lKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xudmFyIF93aXRoZXIgPSAvKiNfX1BVUkVfXyovIHdpdGhlckRlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbnZhciBfd2lsdCA9IC8qI19fUFVSRV9fKi8gd2lsdERlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2l0aGVyID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpdGhlckYgPSBfd2l0aGVyKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2l0aGVyRihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aWx0ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpbHRGID0gX3dpbHQoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIF93aWx0RihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBXaXRoZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuLyoqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciB0aHJvd0Vycm9yID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9uZTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWRUaHJvdyA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgdGhyb3dFcnJvcjogdGhyb3dFcnJvclxufTtcbi8qKlxuICogVHJhbnNmb3JtcyBhbiBgRWl0aGVyYCB0byBhbiBgT3B0aW9uYCBkaXNjYXJkaW5nIHRoZSBlcnJvci5cbiAqXG4gKiBBbGlhcyBvZiBbZ2V0UmlnaHRdKCNnZXRyaWdodClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZyb21FaXRoZXIgPSBnZXRSaWdodDtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIEZyb21FaXRoZXIgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgZnJvbUVpdGhlcjogZnJvbUVpdGhlclxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBvcHRpb24gaXMgYW4gaW5zdGFuY2Ugb2YgYFNvbWVgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgaXNTb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc1NvbWUoc29tZSgxKSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNTb21lKG5vbmUpLCBmYWxzZSlcbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGlzU29tZSA9IF8uaXNTb21lO1xuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb3B0aW9uIGlzIGBOb25lYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGlzTm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNOb25lKHNvbWUoMSkpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc05vbmUobm9uZSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc05vbmUgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZhLl90YWcgPT09ICdOb25lJzsgfTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaFcgPSBmdW5jdGlvbiAob25Ob25lLCBvblNvbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gb25Ob25lKCkgOiBvblNvbWUobWEudmFsdWUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoV2BdKCNtYXRjaHcpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZFcgPSBtYXRjaFc7XG4vKipcbiAqIFRha2VzIGEgKGxhenkpIGRlZmF1bHQgdmFsdWUsIGEgZnVuY3Rpb24sIGFuZCBhbiBgT3B0aW9uYCB2YWx1ZSwgaWYgdGhlIGBPcHRpb25gIHZhbHVlIGlzIGBOb25lYCB0aGUgZGVmYXVsdCB2YWx1ZSBpc1xuICogcmV0dXJuZWQsIG90aGVyd2lzZSB0aGUgZnVuY3Rpb24gaXMgYXBwbGllZCB0byB0aGUgdmFsdWUgaW5zaWRlIHRoZSBgU29tZWAgYW5kIHRoZSByZXN1bHQgaXMgcmV0dXJuZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIG1hdGNoIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIG1hdGNoKCgpID0+ICdhIG5vbmUnLCBhID0+IGBhIHNvbWUgY29udGFpbmluZyAke2F9YClcbiAqICAgKSxcbiAqICAgJ2Egc29tZSBjb250YWluaW5nIDEnXG4gKiApXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgbWF0Y2goKCkgPT4gJ2Egbm9uZScsIGEgPT4gYGEgc29tZSBjb250YWluaW5nICR7YX1gKVxuICogICApLFxuICogICAnYSBub25lJ1xuICogKVxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2ggPSBtYXRjaFc7XG4vKipcbiAqIEFsaWFzIG9mIFtgbWF0Y2hgXSgjbWF0Y2gpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkID0gbWF0Y2g7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BnZXRPckVsc2VgXSgjZ2V0b3JlbHNlKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZSB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjYuMFxuICovXG5leHBvcnQgdmFyIGdldE9yRWxzZVcgPSBmdW5jdGlvbiAob25Ob25lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG9uTm9uZSgpIDogbWEudmFsdWU7XG4gICAgfTtcbn07XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyB0aGUgZ2l2ZW4gZGVmYXVsdCB2YWx1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBnZXRPckVsc2UgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgZ2V0T3JFbHNlKCgpID0+IDApXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIGdldE9yRWxzZSgoKSA9PiAwKVxuICogICApLFxuICogICAwXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPckVsc2UgPSBnZXRPckVsc2VXO1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZsYXAgPSAvKiNfX1BVUkVfXyovIGZsYXBfKEZ1bmN0b3IpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwRmlyc3QgPSAvKiNfX1BVUkVfXyovIGFwRmlyc3RfKEFwcGx5KTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBzZWNvbmQuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTZWNvbmQgPSAvKiNfX1BVUkVfXyovIGFwU2Vjb25kXyhBcHBseSk7XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0dGVuID0gY29tcGFjdDtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xNS4wXG4gKi9cbmV4cG9ydCB2YXIgdGFwID0gLyojX19QVVJFX18qLyBkdWFsKDIsIGNoYWluYWJsZS50YXAoQ2hhaW4pKTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCAqIGFzIE8gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgRSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogY29uc3QgY29tcHV0ZSA9ICh2YWx1ZTogbnVtYmVyKSA9PiBwaXBlKFxuICogICBPLm9mKHZhbHVlKSxcbiAqICAgTy50YXBFaXRoZXIoKHZhbHVlKSA9PiB2YWx1ZSA+IDAgPyBFLnJpZ2h0KCdvaycpIDogRS5sZWZ0KCdlcnJvcicpKSxcbiAqIClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbXB1dGUoMSksIE8ub2YoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbXB1dGUoLTQyKSwgTy5ub25lKVxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIHRhcEVpdGhlciA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCB0YXBFaXRoZXJfKEZyb21FaXRoZXIsIENoYWluKSk7XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKGlkZW50aXR5KTtcbi8qKlxuICogQGNhdGVnb3J5IGxpZnRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRWl0aGVySyA9IC8qI19fUFVSRV9fKi8gZnJvbUVpdGhlcktfKEZyb21FaXRoZXIpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRWl0aGVySyA9IFxuLyojX19QVVJFX18qLyBjaGFpbkVpdGhlcktfKEZyb21FaXRoZXIsIENoYWluKTtcbi8qKlxuICogQWxpYXMgb2YgYHRhcEVpdGhlcmAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMTIuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRmlyc3RFaXRoZXJLID0gdGFwRWl0aGVyO1xuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGBPcHRpb25gIGZyb20gYSBudWxsYWJsZSB0eXBlLiBJZiB0aGUgdmFsdWUgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLCByZXR1cm5zIGBOb25lYCwgb3RoZXJ3aXNlXG4gKiByZXR1cm5zIHRoZSB2YWx1ZSB3cmFwcGVkIGluIGEgYFNvbWVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBmcm9tTnVsbGFibGUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUodW5kZWZpbmVkKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKG51bGwpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUoMSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tTnVsbGFibGUgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKGEgPT0gbnVsbCA/IG5vbmUgOiBzb21lKGEpKTsgfTtcbi8qKlxuICogVHJhbnNmb3JtcyBhbiBleGNlcHRpb24gaW50byBhbiBgT3B0aW9uYC4gSWYgYGZgIHRocm93cywgcmV0dXJucyBgTm9uZWAsIG90aGVyd2lzZSByZXR1cm5zIHRoZSBvdXRwdXQgd3JhcHBlZCBpbiBhXG4gKiBgU29tZWAuXG4gKlxuICogU2VlIGFsc28gW2B0cnlDYXRjaEtgXSgjdHJ5Y2F0Y2hrKS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgdHJ5Q2F0Y2ggfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgdHJ5Q2F0Y2goKCkgPT4ge1xuICogICAgIHRocm93IG5ldyBFcnJvcigpXG4gKiAgIH0pLFxuICogICBub25lXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRyeUNhdGNoKCgpID0+IDEpLCBzb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSBpbnRlcm9wXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0cnlDYXRjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHNvbWUoZigpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgfVxufTtcbi8qKlxuICogQ29udmVydHMgYSBmdW5jdGlvbiB0aGF0IG1heSB0aHJvdyB0byBvbmUgcmV0dXJuaW5nIGEgYE9wdGlvbmAuXG4gKlxuICogQGNhdGVnb3J5IGludGVyb3BcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB0cnlDYXRjaEsgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyeUNhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFJldHVybnMgYSAqc21hcnQgY29uc3RydWN0b3IqIGZyb20gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBudWxsYWJsZSB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZnJvbU51bGxhYmxlSywgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBjb25zdCBmID0gKHM6IHN0cmluZyk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gKiAgIGNvbnN0IG4gPSBwYXJzZUZsb2F0KHMpXG4gKiAgIHJldHVybiBpc05hTihuKSA/IHVuZGVmaW5lZCA6IG5cbiAqIH1cbiAqXG4gKiBjb25zdCBnID0gZnJvbU51bGxhYmxlSyhmKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZygnMScpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnKCdhJyksIG5vbmUpXG4gKlxuICogQGNhdGVnb3J5IGxpZnRpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGZyb21OdWxsYWJsZUsgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmxvdyhmLCBmcm9tTnVsbGFibGUpOyB9O1xuLyoqXG4gKiBUaGlzIGlzIGBjaGFpbmAgKyBgZnJvbU51bGxhYmxlYCwgdXNlZnVsIHdoZW4gd29ya2luZyB3aXRoIG9wdGlvbmFsIHZhbHVlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZnJvbU51bGxhYmxlLCBjaGFpbk51bGxhYmxlSyB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgRW1wbG95ZWUge1xuICogICByZWFkb25seSBjb21wYW55Pzoge1xuICogICAgIHJlYWRvbmx5IGFkZHJlc3M/OiB7XG4gKiAgICAgICByZWFkb25seSBzdHJlZXQ/OiB7XG4gKiAgICAgICAgIHJlYWRvbmx5IG5hbWU/OiBzdHJpbmdcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBjb25zdCBlbXBsb3llZTE6IEVtcGxveWVlID0geyBjb21wYW55OiB7IGFkZHJlc3M6IHsgc3RyZWV0OiB7IG5hbWU6ICdoaWdoIHN0cmVldCcgfSB9IH0gfVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgZnJvbU51bGxhYmxlKGVtcGxveWVlMS5jb21wYW55KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhjb21wYW55ID0+IGNvbXBhbnkuYWRkcmVzcyksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoYWRkcmVzcyA9PiBhZGRyZXNzLnN0cmVldCksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoc3RyZWV0ID0+IHN0cmVldC5uYW1lKVxuICogICApLFxuICogICBzb21lKCdoaWdoIHN0cmVldCcpXG4gKiApXG4gKlxuICogY29uc3QgZW1wbG95ZWUyOiBFbXBsb3llZSA9IHsgY29tcGFueTogeyBhZGRyZXNzOiB7IHN0cmVldDoge30gfSB9IH1cbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIGZyb21OdWxsYWJsZShlbXBsb3llZTIuY29tcGFueSksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoY29tcGFueSA9PiBjb21wYW55LmFkZHJlc3MpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGFkZHJlc3MgPT4gYWRkcmVzcy5zdHJlZXQpLFxuICogICAgIGNoYWluTnVsbGFibGVLKHN0cmVldCA9PiBzdHJlZXQubmFtZSlcbiAqICAgKSxcbiAqICAgbm9uZVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbk51bGxhYmxlSyA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG5vbmUgOiBmcm9tTnVsbGFibGUoZihtYS52YWx1ZSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgYG51bGxgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCB0b051bGxhYmxlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIHRvTnVsbGFibGVcbiAqICAgKSxcbiAqICAgMVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgdG9OdWxsYWJsZVxuICogICApLFxuICogICBudWxsXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0b051bGxhYmxlID0gLyojX19QVVJFX18qLyBtYXRjaChjb25zdE51bGwsIGlkZW50aXR5KTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIHZhbHVlIG91dCBvZiB0aGUgc3RydWN0dXJlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSByZXR1cm5zIGB1bmRlZmluZWRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCB0b1VuZGVmaW5lZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICB0b1VuZGVmaW5lZFxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICB0b1VuZGVmaW5lZFxuICogICApLFxuICogICB1bmRlZmluZWRcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRvVW5kZWZpbmVkID0gLyojX19QVVJFX18qLyBtYXRjaChjb25zdFVuZGVmaW5lZCwgaWRlbnRpdHkpO1xuZXhwb3J0IGZ1bmN0aW9uIGVsZW0oRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSwgbWEpIHtcbiAgICAgICAgaWYgKG1hID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtRV8xID0gZWxlbShFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIGVsZW1FXzEoYSwgbWEpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gZmFsc2UgOiBFLmVxdWFscyhhLCBtYS52YWx1ZSk7XG4gICAgfTtcbn1cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHByZWRpY2F0ZSBpcyBzYXRpc2ZpZWQgYnkgdGhlIHdyYXBwZWQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZXhpc3RzIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAwKVxuICogICApLFxuICogICB0cnVlXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMSlcbiAqICAgKSxcbiAqICAgZmFsc2VcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAwKVxuICogICApLFxuICogICBmYWxzZVxuICogKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGV4aXN0cyA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gZmFsc2UgOiBwcmVkaWNhdGUobWEudmFsdWUpO1xuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZG8gbm90YXRpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBEbyA9IC8qI19fUFVSRV9fKi8gb2YoXy5lbXB0eVJlY29yZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZFRvID0gLyojX19QVVJFX18qLyBiaW5kVG9fKEZ1bmN0b3IpO1xudmFyIGxldF8gPSAvKiNfX1BVUkVfXyovIGxldF9fKEZ1bmN0b3IpO1xuZXhwb3J0IHsgXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTMuMFxuICovXG5sZXRfIGFzIGxldCB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmQgPSAvKiNfX1BVUkVfXyovIGNoYWluYWJsZS5iaW5kKENoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBhcFMgPSAvKiNfX1BVUkVfXyovIGFwU18oQXBwbHkpO1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgQXBUID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVhZG9ubHlBcnJheSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBhcnJheSB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seU5vbkVtcHR5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvID0gZigwLCBfLmhlYWQoYXMpKTtcbiAgICAgICAgaWYgKGlzTm9uZShvKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtvLnZhbHVlXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG9fMSA9IGYoaSwgYXNbaV0pO1xuICAgICAgICAgICAgaWYgKGlzTm9uZShvXzEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXQucHVzaChvXzEudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb21lKG91dCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgdmFyIGcgPSB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleChmKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoXy5pc05vbkVtcHR5KGFzKSA/IGcoYXMpIDogQXBUKTsgfTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VBcnJheVdpdGhJbmRleCA9IHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleDtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZShBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZUFycmF5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjc2VxdWVuY2UoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgc2VxdWVuY2VBcnJheSA9IFxuLyojX19QVVJFX18qLyB0cmF2ZXJzZUFycmF5KGlkZW50aXR5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxlZ2FjeVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBBbGlhcyBvZiBgZmxhdE1hcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW4gPSBmbGF0TWFwO1xuLyoqXG4gKiBBbGlhcyBvZiBgdGFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0ID0gdGFwO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgYFJlZmluZW1lbnRgIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWZpbmVtZW50KGdldE9wdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gaXNTb21lKGdldE9wdGlvbihhKSk7IH07XG59XG4vKipcbiAqIFVzZSBbYGNoYWluTnVsbGFibGVLYF0oI2NoYWlubnVsbGFibGVrKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbWFwTnVsbGFibGUgPSBjaGFpbk51bGxhYmxlSztcbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgTy5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBPLm9wdGlvbmBcbiAqICh3aGVyZSBgT2AgaXMgZnJvbSBgaW1wb3J0IE8gZnJvbSAnZnAtdHMvT3B0aW9uJ2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcHRpb24gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG9mOiBvZixcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHplcm86IHplcm8sXG4gICAgYWx0OiBfYWx0LFxuICAgIGV4dGVuZDogX2V4dGVuZCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0LFxuICAgIHRocm93RXJyb3I6IHRocm93RXJyb3Jcbn07XG4vKipcbiAqIFVzZSBbYGdldEFwcGx5U2VtaWdyb3VwYF0oLi9BcHBseS50cy5odG1sI2dldGFwcGx5c2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0QXBwbHlTZW1pZ3JvdXAgPSAvKiNfX1BVUkVfXyovIGdldEFwcGx5U2VtaWdyb3VwXyhBcHBseSk7XG4vKipcbiAqIFVzZSBbYGdldEFwcGxpY2F0aXZlTW9ub2lkYF0oLi9BcHBsaWNhdGl2ZS50cy5odG1sI2dldGFwcGxpY2F0aXZlbW9ub2lkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0QXBwbHlNb25vaWQgPSAvKiNfX1BVUkVfXyovIGdldEFwcGxpY2F0aXZlTW9ub2lkKEFwcGxpY2F0aXZlKTtcbi8qKlxuICogVXNlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZpcnN0IH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGdldE1vbm9pZChmaXJzdCgpKVxuICogYGBgXG4gKlxuICogaW5zdGVhZC5cbiAqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSBsZWZ0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZVxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShhKSAgICAgIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0Rmlyc3RNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgTSA9IGdldEZpcnN0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMikpLCBzb21lKDIpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEZpcnN0TW9ub2lkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0TW9ub2lkKGZpcnN0KCkpOyB9O1xuLyoqXG4gKiBVc2VcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgbGFzdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBnZXRNb25vaWQobGFzdCgpKVxuICogYGBgXG4gKlxuICogaW5zdGVhZC5cbiAqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSByaWdodC1tb3N0IG5vbi1gTm9uZWAgdmFsdWVcbiAqXG4gKiB8IHggICAgICAgfCB5ICAgICAgIHwgY29uY2F0KHgsIHkpIHxcbiAqIHwgLS0tLS0tLSB8IC0tLS0tLS0gfCAtLS0tLS0tLS0tLS0gfFxuICogfCBub25lICAgIHwgbm9uZSAgICB8IG5vbmUgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBub25lICAgIHwgc29tZShhKSAgICAgIHxcbiAqIHwgbm9uZSAgICB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICogfCBzb21lKGEpIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldExhc3RNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgTSA9IGdldExhc3RNb25vaWQ8bnVtYmVyPigpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIG5vbmUpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBub25lKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgc29tZSgyKSksIHNvbWUoMikpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIHNvbWUoMikpLCBzb21lKDIpKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TGFzdE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldE1vbm9pZChsYXN0KCkpOyB9O1xuIiwKICAiaW1wb3J0IHsgZ2V0QXBwbGljYXRpdmVNb25vaWQgfSBmcm9tICcuL0FwcGxpY2F0aXZlJztcbmltcG9ydCB7IGFwRmlyc3QgYXMgYXBGaXJzdF8sIGFwUyBhcyBhcFNfLCBhcFNlY29uZCBhcyBhcFNlY29uZF8sIGdldEFwcGx5U2VtaWdyb3VwIGFzIGdldEFwcGx5U2VtaWdyb3VwXyB9IGZyb20gJy4vQXBwbHknO1xuaW1wb3J0ICogYXMgY2hhaW5hYmxlIGZyb20gJy4vQ2hhaW4nO1xuaW1wb3J0IHsgY2hhaW5FaXRoZXJLIGFzIGNoYWluRWl0aGVyS18sIGZyb21FaXRoZXJLIGFzIGZyb21FaXRoZXJLXywgdGFwRWl0aGVyIGFzIHRhcEVpdGhlcl8gfSBmcm9tICcuL0Zyb21FaXRoZXInO1xuaW1wb3J0IHsgY29uc3ROdWxsLCBjb25zdFVuZGVmaW5lZCwgZHVhbCwgZmxvdywgaWRlbnRpdHksIHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGFzIGFzIGFzXywgYXNVbml0IGFzIGFzVW5pdF8sIGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IG5vdCB9IGZyb20gJy4vUHJlZGljYXRlJztcbmltcG9ydCB7IGZpcnN0LCBsYXN0IH0gZnJvbSAnLi9TZW1pZ3JvdXAnO1xuaW1wb3J0IHsgc2VwYXJhdGVkIH0gZnJvbSAnLi9TZXBhcmF0ZWQnO1xuaW1wb3J0IHsgd2lsdERlZmF1bHQsIHdpdGhlckRlZmF1bHQgfSBmcm9tICcuL1dpdGhlcmFibGUnO1xuaW1wb3J0IHsgZ3VhcmQgYXMgZ3VhcmRfIH0gZnJvbSAnLi9aZXJvJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBgTm9uZWAgZG9lc24ndCBoYXZlIGEgY29uc3RydWN0b3IsIGluc3RlYWQgeW91IGNhbiB1c2UgaXQgZGlyZWN0bHkgYXMgYSB2YWx1ZS4gUmVwcmVzZW50cyBhIG1pc3NpbmcgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbm9uZSA9IF8ubm9uZTtcbi8qKlxuICogQ29uc3RydWN0cyBhIGBTb21lYC4gUmVwcmVzZW50cyBhbiBvcHRpb25hbCB2YWx1ZSB0aGF0IGV4aXN0cy5cbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzb21lID0gXy5zb21lO1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21QcmVkaWNhdGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiAocHJlZGljYXRlKGEpID8gc29tZShhKSA6IG5vbmUpOyB9O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBgTGVmdGAgdmFsdWUgb2YgYW4gYEVpdGhlcmAgaWYgcG9zc2libGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldExlZnQsIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyByaWdodCwgbGVmdCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldExlZnQocmlnaHQoMSkpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRMZWZ0KGxlZnQoJ2EnKSksIHNvbWUoJ2EnKSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRMZWZ0ID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAobWEuX3RhZyA9PT0gJ1JpZ2h0JyA/IG5vbmUgOiBzb21lKG1hLmxlZnQpKTsgfTtcbi8qKlxuICogUmV0dXJucyB0aGUgYFJpZ2h0YCB2YWx1ZSBvZiBhbiBgRWl0aGVyYCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0UmlnaHQsIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyByaWdodCwgbGVmdCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldFJpZ2h0KHJpZ2h0KDEpKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0UmlnaHQobGVmdCgnYScpKSwgbm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRSaWdodCA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKG1hLl90YWcgPT09ICdMZWZ0JyA/IG5vbmUgOiBzb21lKG1hLnJpZ2h0KSk7IH07XG52YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfTtcbnZhciBfYXAgPSBmdW5jdGlvbiAoZmFiLCBmYSkgeyByZXR1cm4gcGlwZShmYWIsIGFwKGZhKSk7IH07XG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbnZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBNID0gZm9sZE1hcChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwTShmKSk7IH07XG59O1xudmFyIF9yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHQoYiwgZikpOyB9O1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xudmFyIF9maWx0ZXIgPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyKHByZWRpY2F0ZSkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZmlsdGVyTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZXh0ZW5kID0gZnVuY3Rpb24gKHdhLCBmKSB7IHJldHVybiBwaXBlKHdhLCBleHRlbmQoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcGFydGl0aW9uID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uKHByZWRpY2F0ZSkpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwKGYpKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ09wdGlvbic7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChpc05vbmUobWEpID8gJ25vbmUnIDogXCJzb21lKFwiLmNvbmNhdChTLnNob3cobWEudmFsdWUpLCBcIilcIikpOyB9XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGdldEVxIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMobm9uZSwgbm9uZSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMobm9uZSwgc29tZSgxKSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIG5vbmUpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBzb21lKDIpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgc29tZSgxKSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ID09PSB5IHx8IChpc05vbmUoeCkgPyBpc05vbmUoeSkgOiBpc05vbmUoeSkgPyBmYWxzZSA6IEUuZXF1YWxzKHgudmFsdWUsIHkudmFsdWUpKTsgfVxufSk7IH07XG4vKipcbiAqIFRoZSBgT3JkYCBpbnN0YW5jZSBhbGxvd3MgYE9wdGlvbmAgdmFsdWVzIHRvIGJlIGNvbXBhcmVkIHdpdGhcbiAqIGBjb21wYXJlYCwgd2hlbmV2ZXIgdGhlcmUgaXMgYW4gYE9yZGAgaW5zdGFuY2UgZm9yXG4gKiB0aGUgdHlwZSB0aGUgYE9wdGlvbmAgY29udGFpbnMuXG4gKlxuICogYE5vbmVgIGlzIGNvbnNpZGVyZWQgdG8gYmUgbGVzcyB0aGFuIGFueSBgU29tZWAgdmFsdWUuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBnZXRPcmQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBPID0gZ2V0T3JkKE4uT3JkKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShub25lLCBub25lKSwgMClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUobm9uZSwgc29tZSgxKSksIC0xKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBub25lKSwgMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoc29tZSgxKSwgc29tZSgyKSksIC0xKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBzb21lKDEpKSwgMClcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPcmQgPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGdldEVxKE8pLmVxdWFscyxcbiAgICBjb21wYXJlOiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gKHggPT09IHkgPyAwIDogaXNTb21lKHgpID8gKGlzU29tZSh5KSA/IE8uY29tcGFyZSh4LnZhbHVlLCB5LnZhbHVlKSA6IDEpIDogLTEpOyB9XG59KTsgfTtcbi8qKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgbGVmdC1tb3N0IG5vbi1gTm9uZWAgdmFsdWUuIElmIGJvdGggb3BlcmFuZHMgYXJlIGBTb21lYHMgdGhlbiB0aGUgaW5uZXIgdmFsdWVzIGFyZVxuICogY29uY2F0ZW5hdGVkIHVzaW5nIHRoZSBwcm92aWRlZCBgU2VtaWdyb3VwYFxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgICAgICAgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShjb25jYXQoYSwgYikpIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgU2VtaWdyb3VwU3VtIH0gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRNb25vaWQoU2VtaWdyb3VwU3VtKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMSkpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgzKSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRNb25vaWQgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiAoaXNOb25lKHgpID8geSA6IGlzTm9uZSh5KSA/IHggOiBzb21lKFMuY29uY2F0KHgudmFsdWUsIHkudmFsdWUpKSk7IH0sXG4gICAgZW1wdHk6IG5vbmVcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gbm9uZSA6IHNvbWUoZihmYS52YWx1ZSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIE1hcHMgdGhlIGBTb21lYCB2YWx1ZSBvZiB0aGlzIGBPcHRpb25gIHRvIHRoZSBzcGVjaWZpZWQgY29uc3RhbnQgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBhcyA9IGR1YWwoMiwgYXNfKEZ1bmN0b3IpKTtcbi8qKlxuICogTWFwcyB0aGUgYFNvbWVgIHZhbHVlIG9mIHRoaXMgYE9wdGlvbmAgdG8gdGhlIHZvaWQgY29uc3RhbnQgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBhc1VuaXQgPSBhc1VuaXRfKEZ1bmN0b3IpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBvZiA9IHNvbWU7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBQb2ludGVkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYWIpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhYikgPyBub25lIDogaXNOb25lKGZhKSA/IG5vbmUgOiBzb21lKGZhYi52YWx1ZShmYS52YWx1ZSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEFwcGx5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHsgcmV0dXJuIChpc05vbmUobWEpID8gbm9uZSA6IGYobWEudmFsdWUpKTsgfSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gYiA6IGYoYiwgZmEudmFsdWUpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZvbGRNYXAgPSBmdW5jdGlvbiAoTSkgeyByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gTS5lbXB0eSA6IGYoZmEudmFsdWUpO1xufTsgfTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gYiA6IGYoZmEudmFsdWUsIGIpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHRcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIHByb3ZpZGVkIGBPcHRpb25gIGB0aGF0YCBpZiBgc2VsZmAgaXMgYE5vbmVgLCBvdGhlcndpc2UgcmV0dXJucyBgc2VsZmAuXG4gKlxuICogQHBhcmFtIHNlbGYgLSBUaGUgZmlyc3QgYE9wdGlvbmAgdG8gYmUgY2hlY2tlZC5cbiAqIEBwYXJhbSB0aGF0IC0gVGhlIGBPcHRpb25gIHRvIHJldHVybiBpZiBgc2VsZmAgaXMgYE5vbmVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBPIGZyb20gXCJmcC10cy9PcHRpb25cIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5ub25lLCAoKSA9PiBPLm5vbmUpLCBPLm5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8uc29tZSgxKSwgKCkgPT4gTy5ub25lKSwgTy5zb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLm5vbmUsICgpID0+IE8uc29tZSgnYicpKSwgTy5zb21lKCdiJykpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8uc29tZSgxKSwgKCkgPT4gTy5zb21lKCdiJykpLCBPLnNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgb3JFbHNlID0gZHVhbCgyLCBmdW5jdGlvbiAoc2VsZiwgdGhhdCkgeyByZXR1cm4gKGlzTm9uZShzZWxmKSA/IHRoYXQoKSA6IHNlbGYpOyB9KTtcbi8qKlxuICogQWxpYXMgb2YgYG9yRWxzZWAuXG4gKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFsdGBdKCNhbHQpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgYWx0VyA9IG9yRWxzZTtcbi8qKlxuICogQWxpYXMgb2YgYG9yRWxzZWAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gb3JFbHNlO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBbHQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFsdDogX2FsdFxufTtcbi8qKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgemVybyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vbmU7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBaZXJvID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHplcm86IHplcm9cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGd1YXJkID0gLyojX19QVVJFX18qLyBndWFyZF8oWmVybywgUG9pbnRlZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdGVybmF0aXZlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBhbHQ6IF9hbHQsXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXh0ZW5kID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh3YSkge1xuICAgIHJldHVybiBpc05vbmUod2EpID8gbm9uZSA6IHNvbWUoZih3YSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRXh0ZW5kID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmRcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbXBhY3QgPSAvKiNfX1BVUkVfXyovIGZsYXRNYXAoaWRlbnRpdHkpO1xudmFyIGRlZmF1bHRTZXBhcmF0ZWQgPSAvKiNfX1BVUkVfXyovIHNlcGFyYXRlZChub25lLCBub25lKTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc2VwYXJhdGUgPSBmdW5jdGlvbiAobWEpIHtcbiAgICByZXR1cm4gaXNOb25lKG1hKSA/IGRlZmF1bHRTZXBhcmF0ZWQgOiBzZXBhcmF0ZWQoZ2V0TGVmdChtYS52YWx1ZSksIGdldFJpZ2h0KG1hLnZhbHVlKSk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21wYWN0YWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogcHJlZGljYXRlKGZhLnZhbHVlKSA/IGZhIDogbm9uZTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gbm9uZSA6IGYoZmEudmFsdWUpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChfZmlsdGVyKGZhLCBub3QocHJlZGljYXRlKSksIF9maWx0ZXIoZmEsIHByZWRpY2F0ZSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmxvdyhtYXAoZiksIHNlcGFyYXRlKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRmlsdGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNOb25lKHRhKSA/IEYub2Yobm9uZSkgOiBGLm1hcChmKHRhLnZhbHVlKSwgc29tZSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciBzZXF1ZW5jZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKHRhKSA/IEYub2Yobm9uZSkgOiBGLm1hcCh0YS52YWx1ZSwgc29tZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZVxufTtcbnZhciBfd2l0aGVyID0gLyojX19QVVJFX18qLyB3aXRoZXJEZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG52YXIgX3dpbHQgPSAvKiNfX1BVUkVfXyovIHdpbHREZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpdGhlciA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aXRoZXJGID0gX3dpdGhlcihGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3dpdGhlckYoZmEsIGYpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2lsdCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aWx0RiA9IF93aWx0KEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2lsdEYoZmEsIGYpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgV2l0aGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbi8qKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgdGhyb3dFcnJvciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vbmU7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIE1vbmFkVGhyb3cgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIHRocm93RXJyb3I6IHRocm93RXJyb3Jcbn07XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gYEVpdGhlcmAgdG8gYW4gYE9wdGlvbmAgZGlzY2FyZGluZyB0aGUgZXJyb3IuXG4gKlxuICogQWxpYXMgb2YgW2dldFJpZ2h0XSgjZ2V0cmlnaHQpXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRWl0aGVyID0gZ2V0UmlnaHQ7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBGcm9tRWl0aGVyID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGZyb21FaXRoZXI6IGZyb21FaXRoZXJcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyByZWZpbmVtZW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb3B0aW9uIGlzIGFuIGluc3RhbmNlIG9mIGBTb21lYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGlzU29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNTb21lKHNvbWUoMSkpLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzU29tZShub25lKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc1NvbWUgPSBfLmlzU29tZTtcbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9wdGlvbiBpcyBgTm9uZWAsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBpc05vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzTm9uZShzb21lKDEpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNOb25lKG5vbmUpLCB0cnVlKVxuICpcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgaXNOb25lID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmYS5fdGFnID09PSAnTm9uZSc7IH07XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaGBdKCNtYXRjaCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hXID0gZnVuY3Rpb24gKG9uTm9uZSwgb25Tb21lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG9uTm9uZSgpIDogb25Tb21lKG1hLnZhbHVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaFdgXSgjbWF0Y2h3KS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZvbGRXID0gbWF0Y2hXO1xuLyoqXG4gKiBUYWtlcyBhIChsYXp5KSBkZWZhdWx0IHZhbHVlLCBhIGZ1bmN0aW9uLCBhbmQgYW4gYE9wdGlvbmAgdmFsdWUsIGlmIHRoZSBgT3B0aW9uYCB2YWx1ZSBpcyBgTm9uZWAgdGhlIGRlZmF1bHQgdmFsdWUgaXNcbiAqIHJldHVybmVkLCBvdGhlcndpc2UgdGhlIGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gdGhlIHZhbHVlIGluc2lkZSB0aGUgYFNvbWVgIGFuZCB0aGUgcmVzdWx0IGlzIHJldHVybmVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBtYXRjaCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBtYXRjaCgoKSA9PiAnYSBub25lJywgYSA9PiBgYSBzb21lIGNvbnRhaW5pbmcgJHthfWApXG4gKiAgICksXG4gKiAgICdhIHNvbWUgY29udGFpbmluZyAxJ1xuICogKVxuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIG1hdGNoKCgpID0+ICdhIG5vbmUnLCBhID0+IGBhIHNvbWUgY29udGFpbmluZyAke2F9YClcbiAqICAgKSxcbiAqICAgJ2Egbm9uZSdcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoID0gbWF0Y2hXO1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZCA9IG1hdGNoO1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgZ2V0T3JFbHNlYF0oI2dldG9yZWxzZSkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGUgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi42LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPckVsc2VXID0gZnVuY3Rpb24gKG9uTm9uZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBvbk5vbmUoKSA6IG1hLnZhbHVlO1xuICAgIH07XG59O1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgdGhlIGdpdmVuIGRlZmF1bHQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZ2V0T3JFbHNlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGdldE9yRWxzZSgoKSA9PiAwKVxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBnZXRPckVsc2UoKCkgPT4gMClcbiAqICAgKSxcbiAqICAgMFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JFbHNlID0gZ2V0T3JFbHNlVztcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IGNvbXBhY3Q7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTUuMFxuICovXG5leHBvcnQgdmFyIHRhcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBjaGFpbmFibGUudGFwKENoYWluKSk7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBPIGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIEUgZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGNvbnN0IGNvbXB1dGUgPSAodmFsdWU6IG51bWJlcikgPT4gcGlwZShcbiAqICAgTy5vZih2YWx1ZSksXG4gKiAgIE8udGFwRWl0aGVyKCh2YWx1ZSkgPT4gdmFsdWUgPiAwID8gRS5yaWdodCgnb2snKSA6IEUubGVmdCgnZXJyb3InKSksXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wdXRlKDEpLCBPLm9mKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wdXRlKC00MiksIE8ubm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciB0YXBFaXRoZXIgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgdGFwRWl0aGVyXyhGcm9tRWl0aGVyLCBDaGFpbikpO1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBkdXBsaWNhdGUgPSAvKiNfX1BVUkVfXyovIGV4dGVuZChpZGVudGl0eSk7XG4vKipcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVpdGhlcksgPSAvKiNfX1BVUkVfXyovIGZyb21FaXRoZXJLXyhGcm9tRWl0aGVyKTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkVpdGhlcksgPSBcbi8qI19fUFVSRV9fKi8gY2hhaW5FaXRoZXJLXyhGcm9tRWl0aGVyLCBDaGFpbik7XG4vKipcbiAqIEFsaWFzIG9mIGB0YXBFaXRoZXJgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0RWl0aGVySyA9IHRhcEVpdGhlcjtcbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyBgT3B0aW9uYCBmcm9tIGEgbnVsbGFibGUgdHlwZS4gSWYgdGhlIHZhbHVlIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgcmV0dXJucyBgTm9uZWAsIG90aGVyd2lzZVxuICogcmV0dXJucyB0aGUgdmFsdWUgd3JhcHBlZCBpbiBhIGBTb21lYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgZnJvbU51bGxhYmxlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKHVuZGVmaW5lZCksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21OdWxsYWJsZShudWxsKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKDEpLCBzb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbU51bGxhYmxlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChhID09IG51bGwgPyBub25lIDogc29tZShhKSk7IH07XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gZXhjZXB0aW9uIGludG8gYW4gYE9wdGlvbmAuIElmIGBmYCB0aHJvd3MsIHJldHVybnMgYE5vbmVgLCBvdGhlcndpc2UgcmV0dXJucyB0aGUgb3V0cHV0IHdyYXBwZWQgaW4gYVxuICogYFNvbWVgLlxuICpcbiAqIFNlZSBhbHNvIFtgdHJ5Q2F0Y2hLYF0oI3RyeWNhdGNoaykuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIHRyeUNhdGNoIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHRyeUNhdGNoKCgpID0+IHtcbiAqICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICogICB9KSxcbiAqICAgbm9uZVxuICogKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0cnlDYXRjaCgoKSA9PiAxKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW50ZXJvcFxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHJ5Q2F0Y2ggPSBmdW5jdGlvbiAoZikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBzb21lKGYoKSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBub25lO1xuICAgIH1cbn07XG4vKipcbiAqIENvbnZlcnRzIGEgZnVuY3Rpb24gdGhhdCBtYXkgdGhyb3cgdG8gb25lIHJldHVybmluZyBhIGBPcHRpb25gLlxuICpcbiAqIEBjYXRlZ29yeSBpbnRlcm9wXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHJ5Q2F0Y2hLID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYVtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnlDYXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBmLmFwcGx5KHZvaWQgMCwgYSk7IH0pO1xuICAgIH07XG59O1xuLyoqXG4gKiBSZXR1cm5zIGEgKnNtYXJ0IGNvbnN0cnVjdG9yKiBmcm9tIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgbnVsbGFibGUgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZyb21OdWxsYWJsZUssIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgZiA9IChzOiBzdHJpbmcpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICogICBjb25zdCBuID0gcGFyc2VGbG9hdChzKVxuICogICByZXR1cm4gaXNOYU4obikgPyB1bmRlZmluZWQgOiBuXG4gKiB9XG4gKlxuICogY29uc3QgZyA9IGZyb21OdWxsYWJsZUsoZilcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGcoJzEnKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZygnYScpLCBub25lKVxuICpcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tTnVsbGFibGVLID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZsb3coZiwgZnJvbU51bGxhYmxlKTsgfTtcbi8qKlxuICogVGhpcyBpcyBgY2hhaW5gICsgYGZyb21OdWxsYWJsZWAsIHVzZWZ1bCB3aGVuIHdvcmtpbmcgd2l0aCBvcHRpb25hbCB2YWx1ZXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGZyb21OdWxsYWJsZSwgY2hhaW5OdWxsYWJsZUsgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogaW50ZXJmYWNlIEVtcGxveWVlIHtcbiAqICAgcmVhZG9ubHkgY29tcGFueT86IHtcbiAqICAgICByZWFkb25seSBhZGRyZXNzPzoge1xuICogICAgICAgcmVhZG9ubHkgc3RyZWV0Pzoge1xuICogICAgICAgICByZWFkb25seSBuYW1lPzogc3RyaW5nXG4gKiAgICAgICB9XG4gKiAgICAgfVxuICogICB9XG4gKiB9XG4gKlxuICogY29uc3QgZW1wbG95ZWUxOiBFbXBsb3llZSA9IHsgY29tcGFueTogeyBhZGRyZXNzOiB7IHN0cmVldDogeyBuYW1lOiAnaGlnaCBzdHJlZXQnIH0gfSB9IH1cbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIGZyb21OdWxsYWJsZShlbXBsb3llZTEuY29tcGFueSksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoY29tcGFueSA9PiBjb21wYW55LmFkZHJlc3MpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGFkZHJlc3MgPT4gYWRkcmVzcy5zdHJlZXQpLFxuICogICAgIGNoYWluTnVsbGFibGVLKHN0cmVldCA9PiBzdHJlZXQubmFtZSlcbiAqICAgKSxcbiAqICAgc29tZSgnaGlnaCBzdHJlZXQnKVxuICogKVxuICpcbiAqIGNvbnN0IGVtcGxveWVlMjogRW1wbG95ZWUgPSB7IGNvbXBhbnk6IHsgYWRkcmVzczogeyBzdHJlZXQ6IHt9IH0gfSB9XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBmcm9tTnVsbGFibGUoZW1wbG95ZWUyLmNvbXBhbnkpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGNvbXBhbnkgPT4gY29tcGFueS5hZGRyZXNzKSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhhZGRyZXNzID0+IGFkZHJlc3Muc3RyZWV0KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhzdHJlZXQgPT4gc3RyZWV0Lm5hbWUpXG4gKiAgICksXG4gKiAgIG5vbmVcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5OdWxsYWJsZUsgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBub25lIDogZnJvbU51bGxhYmxlKGYobWEudmFsdWUpKTtcbiAgICB9O1xufTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIHZhbHVlIG91dCBvZiB0aGUgc3RydWN0dXJlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSByZXR1cm5zIGBudWxsYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgdG9OdWxsYWJsZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICB0b051bGxhYmxlXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIHRvTnVsbGFibGVcbiAqICAgKSxcbiAqICAgbnVsbFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdG9OdWxsYWJsZSA9IC8qI19fUFVSRV9fKi8gbWF0Y2goY29uc3ROdWxsLCBpZGVudGl0eSk7XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgdG9VbmRlZmluZWQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgdG9VbmRlZmluZWRcbiAqICAgKSxcbiAqICAgMVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgdG9VbmRlZmluZWRcbiAqICAgKSxcbiAqICAgdW5kZWZpbmVkXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0b1VuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gbWF0Y2goY29uc3RVbmRlZmluZWQsIGlkZW50aXR5KTtcbmV4cG9ydCBmdW5jdGlvbiBlbGVtKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEsIG1hKSB7XG4gICAgICAgIGlmIChtYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZWxlbUVfMSA9IGVsZW0oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBlbGVtRV8xKGEsIG1hKTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IGZhbHNlIDogRS5lcXVhbHMoYSwgbWEudmFsdWUpO1xuICAgIH07XG59XG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBwcmVkaWNhdGUgaXMgc2F0aXNmaWVkIGJ5IHRoZSB3cmFwcGVkIHZhbHVlXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGV4aXN0cyB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMClcbiAqICAgKSxcbiAqICAgdHJ1ZVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgZXhpc3RzKG4gPT4gbiA+IDEpXG4gKiAgICksXG4gKiAgIGZhbHNlXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMClcbiAqICAgKSxcbiAqICAgZmFsc2VcbiAqIClcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBleGlzdHMgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IGZhbHNlIDogcHJlZGljYXRlKG1hLnZhbHVlKTtcbiAgICB9O1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBjaGFpbmFibGUuYmluZChDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIEFwVCA9IC8qI19fUFVSRV9fKi8gb2YoXy5lbXB0eVJlYWRvbmx5QXJyYXkpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gYXJyYXkgdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlOb25FbXB0eUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbyA9IGYoMCwgXy5oZWFkKGFzKSk7XG4gICAgICAgIGlmIChpc05vbmUobykpIHtcbiAgICAgICAgICAgIHJldHVybiBub25lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbby52YWx1ZV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvXzEgPSBmKGksIGFzW2ldKTtcbiAgICAgICAgICAgIGlmIChpc05vbmUob18xKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0LnB1c2gob18xLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29tZShvdXQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHZhciBnID0gdHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXgoZik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKF8uaXNOb25FbXB0eShhcykgPyBnKGFzKSA6IEFwVCk7IH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlQXJyYXlXaXRoSW5kZXggPSB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXg7XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2UoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VBcnJheSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3NlcXVlbmNlKEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlQXJyYXkgPSBcbi8qI19fUFVSRV9fKi8gdHJhdmVyc2VBcnJheShpZGVudGl0eSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBsZWdhY3lcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWxpYXMgb2YgYGZsYXRNYXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluID0gZmxhdE1hcDtcbi8qKlxuICogQWxpYXMgb2YgYHRhcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IHRhcDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIGBSZWZpbmVtZW50YCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVmaW5lbWVudChnZXRPcHRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGlzU29tZShnZXRPcHRpb24oYSkpOyB9O1xufVxuLyoqXG4gKiBVc2UgW2BjaGFpbk51bGxhYmxlS2BdKCNjaGFpbm51bGxhYmxlaykgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG1hcE51bGxhYmxlID0gY2hhaW5OdWxsYWJsZUs7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYE8uRnVuY3RvcmAgaW5zdGVhZCBvZiBgTy5vcHRpb25gXG4gKiAod2hlcmUgYE9gIGlzIGZyb20gYGltcG9ydCBPIGZyb20gJ2ZwLXRzL09wdGlvbidgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3B0aW9uID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBvZjogb2YsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICB6ZXJvOiB6ZXJvLFxuICAgIGFsdDogX2FsdCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdCxcbiAgICB0aHJvd0Vycm9yOiB0aHJvd0Vycm9yXG59O1xuLyoqXG4gKiBVc2UgW2BnZXRBcHBseVNlbWlncm91cGBdKC4vQXBwbHkudHMuaHRtbCNnZXRhcHBseXNlbWlncm91cCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEFwcGx5U2VtaWdyb3VwID0gLyojX19QVVJFX18qLyBnZXRBcHBseVNlbWlncm91cF8oQXBwbHkpO1xuLyoqXG4gKiBVc2UgW2BnZXRBcHBsaWNhdGl2ZU1vbm9pZGBdKC4vQXBwbGljYXRpdmUudHMuaHRtbCNnZXRhcHBsaWNhdGl2ZW1vbm9pZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEFwcGx5TW9ub2lkID0gLyojX19QVVJFX18qLyBnZXRBcHBsaWNhdGl2ZU1vbm9pZChBcHBsaWNhdGl2ZSk7XG4vKipcbiAqIFVzZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBmaXJzdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBnZXRNb25vaWQoZmlyc3QoKSlcbiAqIGBgYFxuICpcbiAqIGluc3RlYWQuXG4gKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgbGVmdC1tb3N0IG5vbi1gTm9uZWAgdmFsdWVcbiAqXG4gKiB8IHggICAgICAgfCB5ICAgICAgIHwgY29uY2F0KHgsIHkpIHxcbiAqIHwgLS0tLS0tLSB8IC0tLS0tLS0gfCAtLS0tLS0tLS0tLS0gfFxuICogfCBub25lICAgIHwgbm9uZSAgICB8IG5vbmUgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBub25lICAgIHwgc29tZShhKSAgICAgIHxcbiAqIHwgbm9uZSAgICB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICogfCBzb21lKGEpIHwgc29tZShiKSB8IHNvbWUoYSkgICAgICB8XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEZpcnN0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRGaXJzdE1vbm9pZDxudW1iZXI+KClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgbm9uZSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIG5vbmUpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgc29tZSgyKSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRGaXJzdE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldE1vbm9pZChmaXJzdCgpKTsgfTtcbi8qKlxuICogVXNlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGxhc3QgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogZ2V0TW9ub2lkKGxhc3QoKSlcbiAqIGBgYFxuICpcbiAqIGluc3RlYWQuXG4gKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgcmlnaHQtbW9zdCBub24tYE5vbmVgIHZhbHVlXG4gKlxuICogfCB4ICAgICAgIHwgeSAgICAgICB8IGNvbmNhdCh4LCB5KSB8XG4gKiB8IC0tLS0tLS0gfCAtLS0tLS0tIHwgLS0tLS0tLS0tLS0tIHxcbiAqIHwgbm9uZSAgICB8IG5vbmUgICAgfCBub25lICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgbm9uZSAgICB8IHNvbWUoYSkgICAgICB8XG4gKiB8IG5vbmUgICAgfCBzb21lKGIpIHwgc29tZShiKSAgICAgIHxcbiAqIHwgc29tZShhKSB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRMYXN0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRMYXN0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMikpLCBzb21lKDIpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldExhc3RNb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRNb25vaWQobGFzdCgpKTsgfTtcbiIsCiAgImltcG9ydCB7IGdldEFwcGxpY2F0aXZlTW9ub2lkIH0gZnJvbSAnLi9BcHBsaWNhdGl2ZSc7XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfLCBnZXRBcHBseVNlbWlncm91cCBhcyBnZXRBcHBseVNlbWlncm91cF8gfSBmcm9tICcuL0FwcGx5JztcbmltcG9ydCAqIGFzIGNoYWluYWJsZSBmcm9tICcuL0NoYWluJztcbmltcG9ydCB7IGNoYWluRWl0aGVySyBhcyBjaGFpbkVpdGhlcktfLCBmcm9tRWl0aGVySyBhcyBmcm9tRWl0aGVyS18sIHRhcEVpdGhlciBhcyB0YXBFaXRoZXJfIH0gZnJvbSAnLi9Gcm9tRWl0aGVyJztcbmltcG9ydCB7IGNvbnN0TnVsbCwgY29uc3RVbmRlZmluZWQsIGR1YWwsIGZsb3csIGlkZW50aXR5LCBwaXBlIH0gZnJvbSAnLi9mdW5jdGlvbic7XG5pbXBvcnQgeyBhcyBhcyBhc18sIGFzVW5pdCBhcyBhc1VuaXRfLCBiaW5kVG8gYXMgYmluZFRvXywgZmxhcCBhcyBmbGFwXywgbGV0IGFzIGxldF9fIH0gZnJvbSAnLi9GdW5jdG9yJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnLi9pbnRlcm5hbCc7XG5pbXBvcnQgeyBub3QgfSBmcm9tICcuL1ByZWRpY2F0ZSc7XG5pbXBvcnQgeyBmaXJzdCwgbGFzdCB9IGZyb20gJy4vU2VtaWdyb3VwJztcbmltcG9ydCB7IHNlcGFyYXRlZCB9IGZyb20gJy4vU2VwYXJhdGVkJztcbmltcG9ydCB7IHdpbHREZWZhdWx0LCB3aXRoZXJEZWZhdWx0IH0gZnJvbSAnLi9XaXRoZXJhYmxlJztcbmltcG9ydCB7IGd1YXJkIGFzIGd1YXJkXyB9IGZyb20gJy4vWmVybyc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogYE5vbmVgIGRvZXNuJ3QgaGF2ZSBhIGNvbnN0cnVjdG9yLCBpbnN0ZWFkIHlvdSBjYW4gdXNlIGl0IGRpcmVjdGx5IGFzIGEgdmFsdWUuIFJlcHJlc2VudHMgYSBtaXNzaW5nIHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG5vbmUgPSBfLm5vbmU7XG4vKipcbiAqIENvbnN0cnVjdHMgYSBgU29tZWAuIFJlcHJlc2VudHMgYW4gb3B0aW9uYWwgdmFsdWUgdGhhdCBleGlzdHMuXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc29tZSA9IF8uc29tZTtcbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHJlZGljYXRlKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKHByZWRpY2F0ZShhKSA/IHNvbWUoYSkgOiBub25lKTsgfTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgYExlZnRgIHZhbHVlIG9mIGFuIGBFaXRoZXJgIGlmIHBvc3NpYmxlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRMZWZ0LCBub25lLCBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcmlnaHQsIGxlZnQgfSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRMZWZ0KHJpZ2h0KDEpKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0TGVmdChsZWZ0KCdhJykpLCBzb21lKCdhJykpXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TGVmdCA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKG1hLl90YWcgPT09ICdSaWdodCcgPyBub25lIDogc29tZShtYS5sZWZ0KSk7IH07XG4vKipcbiAqIFJldHVybnMgdGhlIGBSaWdodGAgdmFsdWUgb2YgYW4gYEVpdGhlcmAgaWYgcG9zc2libGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldFJpZ2h0LCBub25lLCBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcmlnaHQsIGxlZnQgfSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRSaWdodChyaWdodCgxKSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldFJpZ2h0KGxlZnQoJ2EnKSksIG5vbmUpXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmlnaHQgPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChtYS5fdGFnID09PSAnTGVmdCcgPyBub25lIDogc29tZShtYS5yaWdodCkpOyB9O1xudmFyIF9tYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIG1hcChmKSk7IH07XG52YXIgX2FwID0gZnVuY3Rpb24gKGZhYiwgZmEpIHsgcmV0dXJuIHBpcGUoZmFiLCBhcChmYSkpOyB9O1xudmFyIF9yZWR1Y2UgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZShiLCBmKSk7IH07XG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbnZhciBfcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0KGIsIGYpKTsgfTtcbnZhciBfdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZUYgPSB0cmF2ZXJzZShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiBwaXBlKHRhLCB0cmF2ZXJzZUYoZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2FsdCA9IGZ1bmN0aW9uIChmYSwgdGhhdCkgeyByZXR1cm4gcGlwZShmYSwgYWx0KHRoYXQpKTsgfTtcbnZhciBfZmlsdGVyID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlcihwcmVkaWNhdGUpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZpbHRlck1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyTWFwKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbiA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbihwcmVkaWNhdGUpKTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9wYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbk1hcChmKSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdPcHRpb24nO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTaG93ID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgc2hvdzogZnVuY3Rpb24gKG1hKSB7IHJldHVybiAoaXNOb25lKG1hKSA/ICdub25lJyA6IFwic29tZShcIi5jb25jYXQoUy5zaG93KG1hLnZhbHVlKSwgXCIpXCIpKTsgfVxufSk7IH07XG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBnZXRFcSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IEUgPSBnZXRFcShOLkVxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKG5vbmUsIG5vbmUpLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKG5vbmUsIHNvbWUoMSkpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBub25lKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgc29tZSgyKSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIHNvbWUoMSkpLCB0cnVlKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldEVxID0gZnVuY3Rpb24gKEUpIHsgcmV0dXJuICh7XG4gICAgZXF1YWxzOiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCA9PT0geSB8fCAoaXNOb25lKHgpID8gaXNOb25lKHkpIDogaXNOb25lKHkpID8gZmFsc2UgOiBFLmVxdWFscyh4LnZhbHVlLCB5LnZhbHVlKSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBUaGUgYE9yZGAgaW5zdGFuY2UgYWxsb3dzIGBPcHRpb25gIHZhbHVlcyB0byBiZSBjb21wYXJlZCB3aXRoXG4gKiBgY29tcGFyZWAsIHdoZW5ldmVyIHRoZXJlIGlzIGFuIGBPcmRgIGluc3RhbmNlIGZvclxuICogdGhlIHR5cGUgdGhlIGBPcHRpb25gIGNvbnRhaW5zLlxuICpcbiAqIGBOb25lYCBpcyBjb25zaWRlcmVkIHRvIGJlIGxlc3MgdGhhbiBhbnkgYFNvbWVgIHZhbHVlLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgZ2V0T3JkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgTyA9IGdldE9yZChOLk9yZClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUobm9uZSwgbm9uZSksIDApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKG5vbmUsIHNvbWUoMSkpLCAtMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoc29tZSgxKSwgbm9uZSksIDEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIHNvbWUoMikpLCAtMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoc29tZSgxKSwgc29tZSgxKSksIDApXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JkID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgZXF1YWxzOiBnZXRFcShPKS5lcXVhbHMsXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuICh4ID09PSB5ID8gMCA6IGlzU29tZSh4KSA/IChpc1NvbWUoeSkgPyBPLmNvbXBhcmUoeC52YWx1ZSwgeS52YWx1ZSkgOiAxKSA6IC0xKTsgfVxufSk7IH07XG4vKipcbiAqIE1vbm9pZCByZXR1cm5pbmcgdGhlIGxlZnQtbW9zdCBub24tYE5vbmVgIHZhbHVlLiBJZiBib3RoIG9wZXJhbmRzIGFyZSBgU29tZWBzIHRoZW4gdGhlIGlubmVyIHZhbHVlcyBhcmVcbiAqIGNvbmNhdGVuYXRlZCB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGBcbiAqXG4gKiB8IHggICAgICAgfCB5ICAgICAgIHwgY29uY2F0KHgsIHkpICAgICAgIHxcbiAqIHwgLS0tLS0tLSB8IC0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0gfFxuICogfCBub25lICAgIHwgbm9uZSAgICB8IG5vbmUgICAgICAgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBub25lICAgIHwgc29tZShhKSAgICAgICAgICAgIHxcbiAqIHwgbm9uZSAgICB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgc29tZShiKSB8IHNvbWUoY29uY2F0KGEsIGIpKSB8XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldE1vbm9pZCwgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IFNlbWlncm91cFN1bSB9IGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBNID0gZ2V0TW9ub2lkKFNlbWlncm91cFN1bSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgbm9uZSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIG5vbmUpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBzb21lKDEpKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgc29tZSgyKSksIHNvbWUoMykpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TW9ub2lkID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gKGlzTm9uZSh4KSA/IHkgOiBpc05vbmUoeSkgPyB4IDogc29tZShTLmNvbmNhdCh4LnZhbHVlLCB5LnZhbHVlKSkpOyB9LFxuICAgIGVtcHR5OiBub25lXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IG5vbmUgOiBzb21lKGYoZmEudmFsdWUpKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3IgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwXG59O1xuLyoqXG4gKiBNYXBzIHRoZSBgU29tZWAgdmFsdWUgb2YgdGhpcyBgT3B0aW9uYCB0byB0aGUgc3BlY2lmaWVkIGNvbnN0YW50IHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgYXMgPSBkdWFsKDIsIGFzXyhGdW5jdG9yKSk7XG4vKipcbiAqIE1hcHMgdGhlIGBTb21lYCB2YWx1ZSBvZiB0aGlzIGBPcHRpb25gIHRvIHRoZSB2b2lkIGNvbnN0YW50IHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgYXNVbml0ID0gYXNVbml0XyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgb2YgPSBzb21lO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgUG9pbnRlZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmdW5jdGlvbiAoZmFiKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYWIpID8gbm9uZSA6IGlzTm9uZShmYSkgPyBub25lIDogc29tZShmYWIudmFsdWUoZmEudmFsdWUpKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbGljYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTQuMFxuICovXG5leHBvcnQgdmFyIGZsYXRNYXAgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgZnVuY3Rpb24gKG1hLCBmKSB7IHJldHVybiAoaXNOb25lKG1hKSA/IG5vbmUgOiBmKG1hLnZhbHVlKSk7IH0pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQ2hhaW4gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIE1vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZSA9IGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IGIgOiBmKGIsIGZhLnZhbHVlKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkTWFwID0gZnVuY3Rpb24gKE0pIHsgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IE0uZW1wdHkgOiBmKGZhLnZhbHVlKTtcbn07IH07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IGIgOiBmKGZhLnZhbHVlLCBiKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBwcm92aWRlZCBgT3B0aW9uYCBgdGhhdGAgaWYgYHNlbGZgIGlzIGBOb25lYCwgb3RoZXJ3aXNlIHJldHVybnMgYHNlbGZgLlxuICpcbiAqIEBwYXJhbSBzZWxmIC0gVGhlIGZpcnN0IGBPcHRpb25gIHRvIGJlIGNoZWNrZWQuXG4gKiBAcGFyYW0gdGhhdCAtIFRoZSBgT3B0aW9uYCB0byByZXR1cm4gaWYgYHNlbGZgIGlzIGBOb25lYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTyBmcm9tIFwiZnAtdHMvT3B0aW9uXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8ubm9uZSwgKCkgPT4gTy5ub25lKSwgTy5ub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLnNvbWUoMSksICgpID0+IE8ubm9uZSksIE8uc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5ub25lLCAoKSA9PiBPLnNvbWUoJ2InKSksIE8uc29tZSgnYicpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLnNvbWUoMSksICgpID0+IE8uc29tZSgnYicpKSwgTy5zb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIG9yRWxzZSA9IGR1YWwoMiwgZnVuY3Rpb24gKHNlbGYsIHRoYXQpIHsgcmV0dXJuIChpc05vbmUoc2VsZikgPyB0aGF0KCkgOiBzZWxmKTsgfSk7XG4vKipcbiAqIEFsaWFzIG9mIGBvckVsc2VgLlxuICpcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGFsdFcgPSBvckVsc2U7XG4vKipcbiAqIEFsaWFzIG9mIGBvckVsc2VgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFsdCA9IG9yRWxzZTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQWx0ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhbHQ6IF9hbHRcbn07XG4vKipcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIHplcm8gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBub25lOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgWmVybyA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICB6ZXJvOiB6ZXJvXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBndWFyZCA9IC8qI19fUFVSRV9fKi8gZ3VhcmRfKFplcm8sIFBvaW50ZWQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBbHRlcm5hdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgYWx0OiBfYWx0LFxuICAgIHplcm86IHplcm9cbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGV4dGVuZCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAod2EpIHtcbiAgICByZXR1cm4gaXNOb25lKHdhKSA/IG5vbmUgOiBzb21lKGYod2EpKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEV4dGVuZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb21wYWN0ID0gLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbnZhciBkZWZhdWx0U2VwYXJhdGVkID0gLyojX19QVVJFX18qLyBzZXBhcmF0ZWQobm9uZSwgbm9uZSk7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNlcGFyYXRlID0gZnVuY3Rpb24gKG1hKSB7XG4gICAgcmV0dXJuIGlzTm9uZShtYSkgPyBkZWZhdWx0U2VwYXJhdGVkIDogc2VwYXJhdGVkKGdldExlZnQobWEudmFsdWUpLCBnZXRSaWdodChtYS52YWx1ZSkpO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29tcGFjdGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGVcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUoZmEpID8gbm9uZSA6IHByZWRpY2F0ZShmYS52YWx1ZSkgPyBmYSA6IG5vbmU7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlck1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IG5vbmUgOiBmKGZhLnZhbHVlKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbiA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQoX2ZpbHRlcihmYSwgbm90KHByZWRpY2F0ZSkpLCBfZmlsdGVyKGZhLCBwcmVkaWNhdGUpKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZsb3cobWFwKGYpLCBzZXBhcmF0ZSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzTm9uZSh0YSkgPyBGLm9mKG5vbmUpIDogRi5tYXAoZih0YS52YWx1ZSksIHNvbWUpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgc2VxdWVuY2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZSh0YSkgPyBGLm9mKG5vbmUpIDogRi5tYXAodGEudmFsdWUsIHNvbWUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2Vcbn07XG52YXIgX3dpdGhlciA9IC8qI19fUFVSRV9fKi8gd2l0aGVyRGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xudmFyIF93aWx0ID0gLyojX19QVVJFX18qLyB3aWx0RGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aXRoZXIgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciBfd2l0aGVyRiA9IF93aXRoZXIoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIF93aXRoZXJGKGZhLCBmKTsgfTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpbHQgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciBfd2lsdEYgPSBfd2lsdChGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3dpbHRGKGZhLCBmKTsgfTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIFdpdGhlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4vKipcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIHRocm93RXJyb3IgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBub25lOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZFRocm93ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICB0aHJvd0Vycm9yOiB0aHJvd0Vycm9yXG59O1xuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGBFaXRoZXJgIHRvIGFuIGBPcHRpb25gIGRpc2NhcmRpbmcgdGhlIGVycm9yLlxuICpcbiAqIEFsaWFzIG9mIFtnZXRSaWdodF0oI2dldHJpZ2h0KVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVpdGhlciA9IGdldFJpZ2h0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgRnJvbUVpdGhlciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBmcm9tRWl0aGVyOiBmcm9tRWl0aGVyXG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gcmVmaW5lbWVudHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9wdGlvbiBpcyBhbiBpbnN0YW5jZSBvZiBgU29tZWAsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBpc1NvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzU29tZShzb21lKDEpKSwgdHJ1ZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc1NvbWUobm9uZSksIGZhbHNlKVxuICpcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgaXNTb21lID0gXy5pc1NvbWU7XG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBvcHRpb24gaXMgYE5vbmVgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgaXNOb25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc05vbmUoc29tZSgxKSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzTm9uZShub25lKSwgdHJ1ZSlcbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGlzTm9uZSA9IGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZmEuX3RhZyA9PT0gJ05vbmUnOyB9O1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgbWF0Y2hgXSgjbWF0Y2gpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBoYW5kbGVyIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoVyA9IGZ1bmN0aW9uIChvbk5vbmUsIG9uU29tZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBvbk5vbmUoKSA6IG9uU29tZShtYS52YWx1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEFsaWFzIG9mIFtgbWF0Y2hXYF0oI21hdGNodykuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkVyA9IG1hdGNoVztcbi8qKlxuICogVGFrZXMgYSAobGF6eSkgZGVmYXVsdCB2YWx1ZSwgYSBmdW5jdGlvbiwgYW5kIGFuIGBPcHRpb25gIHZhbHVlLCBpZiB0aGUgYE9wdGlvbmAgdmFsdWUgaXMgYE5vbmVgIHRoZSBkZWZhdWx0IHZhbHVlIGlzXG4gKiByZXR1cm5lZCwgb3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSB2YWx1ZSBpbnNpZGUgdGhlIGBTb21lYCBhbmQgdGhlIHJlc3VsdCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgbWF0Y2ggfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgbWF0Y2goKCkgPT4gJ2Egbm9uZScsIGEgPT4gYGEgc29tZSBjb250YWluaW5nICR7YX1gKVxuICogICApLFxuICogICAnYSBzb21lIGNvbnRhaW5pbmcgMSdcbiAqIClcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBtYXRjaCgoKSA9PiAnYSBub25lJywgYSA9PiBgYSBzb21lIGNvbnRhaW5pbmcgJHthfWApXG4gKiAgICksXG4gKiAgICdhIG5vbmUnXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaCA9IG1hdGNoVztcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaGBdKCNtYXRjaCkuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBtYXRjaDtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGdldE9yRWxzZWBdKCNnZXRvcmVsc2UpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBoYW5kbGVyIHJldHVybiB0eXBlIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JFbHNlVyA9IGZ1bmN0aW9uIChvbk5vbmUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gb25Ob25lKCkgOiBtYS52YWx1ZTtcbiAgICB9O1xufTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIHZhbHVlIG91dCBvZiB0aGUgc3RydWN0dXJlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSByZXR1cm5zIHRoZSBnaXZlbiBkZWZhdWx0IHZhbHVlXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGdldE9yRWxzZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBnZXRPckVsc2UoKCkgPT4gMClcbiAqICAgKSxcbiAqICAgMVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgZ2V0T3JFbHNlKCgpID0+IDApXG4gKiAgICksXG4gKiAgIDBcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE9yRWxzZSA9IGdldE9yRWxzZVc7XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhcCA9IC8qI19fUFVSRV9fKi8gZmxhcF8oRnVuY3Rvcik7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBGaXJzdCA9IC8qI19fUFVSRV9fKi8gYXBGaXJzdF8oQXBwbHkpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIHNlY29uZC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcFNlY29uZCA9IC8qI19fUFVSRV9fKi8gYXBTZWNvbmRfKEFwcGx5KTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZsYXR0ZW4gPSBjb21wYWN0O1xuLyoqXG4gKiBDb21wb3NlcyBjb21wdXRhdGlvbnMgaW4gc2VxdWVuY2UsIHVzaW5nIHRoZSByZXR1cm4gdmFsdWUgb2Ygb25lIGNvbXB1dGF0aW9uIHRvIGRldGVybWluZSB0aGUgbmV4dCBjb21wdXRhdGlvbiBhbmRcbiAqIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjE1LjBcbiAqL1xuZXhwb3J0IHZhciB0YXAgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgY2hhaW5hYmxlLnRhcChDaGFpbikpO1xuLyoqXG4gKiBDb21wb3NlcyBjb21wdXRhdGlvbnMgaW4gc2VxdWVuY2UsIHVzaW5nIHRoZSByZXR1cm4gdmFsdWUgb2Ygb25lIGNvbXB1dGF0aW9uIHRvIGRldGVybWluZSB0aGUgbmV4dCBjb21wdXRhdGlvbiBhbmRcbiAqIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICogaW1wb3J0ICogYXMgTyBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBFIGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBjb25zdCBjb21wdXRlID0gKHZhbHVlOiBudW1iZXIpID0+IHBpcGUoXG4gKiAgIE8ub2YodmFsdWUpLFxuICogICBPLnRhcEVpdGhlcigodmFsdWUpID0+IHZhbHVlID4gMCA/IEUucmlnaHQoJ29rJykgOiBFLmxlZnQoJ2Vycm9yJykpLFxuICogKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcHV0ZSgxKSwgTy5vZigxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcHV0ZSgtNDIpLCBPLm5vbmUpXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgdGFwRWl0aGVyID0gLyojX19QVVJFX18qLyBkdWFsKDIsIHRhcEVpdGhlcl8oRnJvbUVpdGhlciwgQ2hhaW4pKTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZHVwbGljYXRlID0gLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGZyb21FaXRoZXJLID0gLyojX19QVVJFX18qLyBmcm9tRWl0aGVyS18oRnJvbUVpdGhlcik7XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5FaXRoZXJLID0gXG4vKiNfX1BVUkVfXyovIGNoYWluRWl0aGVyS18oRnJvbUVpdGhlciwgQ2hhaW4pO1xuLyoqXG4gKiBBbGlhcyBvZiBgdGFwRWl0aGVyYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4xMi4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdEVpdGhlcksgPSB0YXBFaXRoZXI7XG4vKipcbiAqIENvbnN0cnVjdHMgYSBuZXcgYE9wdGlvbmAgZnJvbSBhIG51bGxhYmxlIHR5cGUuIElmIHRoZSB2YWx1ZSBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIHJldHVybnMgYE5vbmVgLCBvdGhlcndpc2VcbiAqIHJldHVybnMgdGhlIHZhbHVlIHdyYXBwZWQgaW4gYSBgU29tZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGZyb21OdWxsYWJsZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21OdWxsYWJsZSh1bmRlZmluZWQpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUobnVsbCksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21OdWxsYWJsZSgxKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZyb21OdWxsYWJsZSA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoYSA9PSBudWxsID8gbm9uZSA6IHNvbWUoYSkpOyB9O1xuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGV4Y2VwdGlvbiBpbnRvIGFuIGBPcHRpb25gLiBJZiBgZmAgdGhyb3dzLCByZXR1cm5zIGBOb25lYCwgb3RoZXJ3aXNlIHJldHVybnMgdGhlIG91dHB1dCB3cmFwcGVkIGluIGFcbiAqIGBTb21lYC5cbiAqXG4gKiBTZWUgYWxzbyBbYHRyeUNhdGNoS2BdKCN0cnljYXRjaGspLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCB0cnlDYXRjaCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICB0cnlDYXRjaCgoKSA9PiB7XG4gKiAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAqICAgfSksXG4gKiAgIG5vbmVcbiAqIClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodHJ5Q2F0Y2goKCkgPT4gMSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGludGVyb3BcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRyeUNhdGNoID0gZnVuY3Rpb24gKGYpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gc29tZShmKCkpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gbm9uZTtcbiAgICB9XG59O1xuLyoqXG4gKiBDb252ZXJ0cyBhIGZ1bmN0aW9uIHRoYXQgbWF5IHRocm93IHRvIG9uZSByZXR1cm5pbmcgYSBgT3B0aW9uYC5cbiAqXG4gKiBAY2F0ZWdvcnkgaW50ZXJvcFxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHRyeUNhdGNoSyA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ5Q2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gZi5hcHBseSh2b2lkIDAsIGEpOyB9KTtcbiAgICB9O1xufTtcbi8qKlxuICogUmV0dXJucyBhICpzbWFydCBjb25zdHJ1Y3RvciogZnJvbSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIG51bGxhYmxlIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmcm9tTnVsbGFibGVLLCBub25lLCBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IGYgPSAoczogc3RyaW5nKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAqICAgY29uc3QgbiA9IHBhcnNlRmxvYXQocylcbiAqICAgcmV0dXJuIGlzTmFOKG4pID8gdW5kZWZpbmVkIDogblxuICogfVxuICpcbiAqIGNvbnN0IGcgPSBmcm9tTnVsbGFibGVLKGYpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnKCcxJyksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGcoJ2EnKSwgbm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbU51bGxhYmxlSyA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmbG93KGYsIGZyb21OdWxsYWJsZSk7IH07XG4vKipcbiAqIFRoaXMgaXMgYGNoYWluYCArIGBmcm9tTnVsbGFibGVgLCB1c2VmdWwgd2hlbiB3b3JraW5nIHdpdGggb3B0aW9uYWwgdmFsdWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBmcm9tTnVsbGFibGUsIGNoYWluTnVsbGFibGVLIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBFbXBsb3llZSB7XG4gKiAgIHJlYWRvbmx5IGNvbXBhbnk/OiB7XG4gKiAgICAgcmVhZG9ubHkgYWRkcmVzcz86IHtcbiAqICAgICAgIHJlYWRvbmx5IHN0cmVldD86IHtcbiAqICAgICAgICAgcmVhZG9ubHkgbmFtZT86IHN0cmluZ1xuICogICAgICAgfVxuICogICAgIH1cbiAqICAgfVxuICogfVxuICpcbiAqIGNvbnN0IGVtcGxveWVlMTogRW1wbG95ZWUgPSB7IGNvbXBhbnk6IHsgYWRkcmVzczogeyBzdHJlZXQ6IHsgbmFtZTogJ2hpZ2ggc3RyZWV0JyB9IH0gfSB9XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBmcm9tTnVsbGFibGUoZW1wbG95ZWUxLmNvbXBhbnkpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGNvbXBhbnkgPT4gY29tcGFueS5hZGRyZXNzKSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhhZGRyZXNzID0+IGFkZHJlc3Muc3RyZWV0KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhzdHJlZXQgPT4gc3RyZWV0Lm5hbWUpXG4gKiAgICksXG4gKiAgIHNvbWUoJ2hpZ2ggc3RyZWV0JylcbiAqIClcbiAqXG4gKiBjb25zdCBlbXBsb3llZTI6IEVtcGxveWVlID0geyBjb21wYW55OiB7IGFkZHJlc3M6IHsgc3RyZWV0OiB7fSB9IH0gfVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgZnJvbU51bGxhYmxlKGVtcGxveWVlMi5jb21wYW55KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhjb21wYW55ID0+IGNvbXBhbnkuYWRkcmVzcyksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoYWRkcmVzcyA9PiBhZGRyZXNzLnN0cmVldCksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoc3RyZWV0ID0+IHN0cmVldC5uYW1lKVxuICogICApLFxuICogICBub25lXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGNoYWluTnVsbGFibGVLID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gbm9uZSA6IGZyb21OdWxsYWJsZShmKG1hLnZhbHVlKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyBgbnVsbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIHRvTnVsbGFibGUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgdG9OdWxsYWJsZVxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICB0b051bGxhYmxlXG4gKiAgICksXG4gKiAgIG51bGxcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRvTnVsbGFibGUgPSAvKiNfX1BVUkVfXyovIG1hdGNoKGNvbnN0TnVsbCwgaWRlbnRpdHkpO1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgYHVuZGVmaW5lZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIHRvVW5kZWZpbmVkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIHRvVW5kZWZpbmVkXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIHRvVW5kZWZpbmVkXG4gKiAgICksXG4gKiAgIHVuZGVmaW5lZFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdG9VbmRlZmluZWQgPSAvKiNfX1BVUkVfXyovIG1hdGNoKGNvbnN0VW5kZWZpbmVkLCBpZGVudGl0eSk7XG5leHBvcnQgZnVuY3Rpb24gZWxlbShFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBtYSkge1xuICAgICAgICBpZiAobWEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGVsZW1FXzEgPSBlbGVtKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gZWxlbUVfMShhLCBtYSk7IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBmYWxzZSA6IEUuZXF1YWxzKGEsIG1hLnZhbHVlKTtcbiAgICB9O1xufVxuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgcHJlZGljYXRlIGlzIHNhdGlzZmllZCBieSB0aGUgd3JhcHBlZCB2YWx1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBleGlzdHMgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgZXhpc3RzKG4gPT4gbiA+IDApXG4gKiAgICksXG4gKiAgIHRydWVcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAxKVxuICogICApLFxuICogICBmYWxzZVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgZXhpc3RzKG4gPT4gbiA+IDApXG4gKiAgICksXG4gKiAgIGZhbHNlXG4gKiApXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXhpc3RzID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBmYWxzZSA6IHByZWRpY2F0ZShtYS52YWx1ZSk7XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkbyBub3RhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIERvID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVjb3JkKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kVG8gPSAvKiNfX1BVUkVfXyovIGJpbmRUb18oRnVuY3Rvcik7XG52YXIgbGV0XyA9IC8qI19fUFVSRV9fKi8gbGV0X18oRnVuY3Rvcik7XG5leHBvcnQgeyBcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMy4wXG4gKi9cbmxldF8gYXMgbGV0IH07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZCA9IC8qI19fUFVSRV9fKi8gY2hhaW5hYmxlLmJpbmQoQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGFwUyA9IC8qI19fUFVSRV9fKi8gYXBTXyhBcHBseSk7XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBBcFQgPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWFkb25seUFycmF5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGFycmF5IHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5Tm9uRW1wdHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG8gPSBmKDAsIF8uaGVhZChhcykpO1xuICAgICAgICBpZiAoaXNOb25lKG8pKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9uZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gW28udmFsdWVdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgb18xID0gZihpLCBhc1tpXSk7XG4gICAgICAgICAgICBpZiAoaXNOb25lKG9fMSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dC5wdXNoKG9fMS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvbWUob3V0KTtcbiAgICB9O1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICB2YXIgZyA9IHRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4KGYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChfLmlzTm9uRW1wdHkoYXMpID8gZyhhcykgOiBBcFQpOyB9O1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZUFycmF5V2l0aEluZGV4ID0gdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlKEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlQXJyYXkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSNzZXF1ZW5jZShBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBzZXF1ZW5jZUFycmF5ID0gXG4vKiNfX1BVUkVfXyovIHRyYXZlcnNlQXJyYXkoaWRlbnRpdHkpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG4vKipcbiAqIEFsaWFzIG9mIGB0YXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRmlyc3QgPSB0YXA7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFVzZSBgUmVmaW5lbWVudGAgbW9kdWxlIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZmluZW1lbnQoZ2V0T3B0aW9uKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBpc1NvbWUoZ2V0T3B0aW9uKGEpKTsgfTtcbn1cbi8qKlxuICogVXNlIFtgY2hhaW5OdWxsYWJsZUtgXSgjY2hhaW5udWxsYWJsZWspIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBtYXBOdWxsYWJsZSA9IGNoYWluTnVsbGFibGVLO1xuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYEZ1bmN0b3JgIGluc3RhbmNlLCBwYXNzIGBPLkZ1bmN0b3JgIGluc3RlYWQgb2YgYE8ub3B0aW9uYFxuICogKHdoZXJlIGBPYCBpcyBmcm9tIGBpbXBvcnQgTyBmcm9tICdmcC10cy9PcHRpb24nYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG9wdGlvbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgemVybzogemVybyxcbiAgICBhbHQ6IF9hbHQsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHQsXG4gICAgdGhyb3dFcnJvcjogdGhyb3dFcnJvclxufTtcbi8qKlxuICogVXNlIFtgZ2V0QXBwbHlTZW1pZ3JvdXBgXSguL0FwcGx5LnRzLmh0bWwjZ2V0YXBwbHlzZW1pZ3JvdXApIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRBcHBseVNlbWlncm91cCA9IC8qI19fUFVSRV9fKi8gZ2V0QXBwbHlTZW1pZ3JvdXBfKEFwcGx5KTtcbi8qKlxuICogVXNlIFtgZ2V0QXBwbGljYXRpdmVNb25vaWRgXSguL0FwcGxpY2F0aXZlLnRzLmh0bWwjZ2V0YXBwbGljYXRpdmVtb25vaWQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRBcHBseU1vbm9pZCA9IC8qI19fUFVSRV9fKi8gZ2V0QXBwbGljYXRpdmVNb25vaWQoQXBwbGljYXRpdmUpO1xuLyoqXG4gKiBVc2VcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZmlyc3QgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogZ2V0TW9ub2lkKGZpcnN0KCkpXG4gKiBgYGBcbiAqXG4gKiBpbnN0ZWFkLlxuICpcbiAqIE1vbm9pZCByZXR1cm5pbmcgdGhlIGxlZnQtbW9zdCBub24tYE5vbmVgIHZhbHVlXG4gKlxuICogfCB4ICAgICAgIHwgeSAgICAgICB8IGNvbmNhdCh4LCB5KSB8XG4gKiB8IC0tLS0tLS0gfCAtLS0tLS0tIHwgLS0tLS0tLS0tLS0tIHxcbiAqIHwgbm9uZSAgICB8IG5vbmUgICAgfCBub25lICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgbm9uZSAgICB8IHNvbWUoYSkgICAgICB8XG4gKiB8IG5vbmUgICAgfCBzb21lKGIpIHwgc29tZShiKSAgICAgIHxcbiAqIHwgc29tZShhKSB8IHNvbWUoYikgfCBzb21lKGEpICAgICAgfFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRGaXJzdE1vbm9pZCwgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBjb25zdCBNID0gZ2V0Rmlyc3RNb25vaWQ8bnVtYmVyPigpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIG5vbmUpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBub25lKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgc29tZSgyKSksIHNvbWUoMikpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIHNvbWUoMikpLCBzb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rmlyc3RNb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRNb25vaWQoZmlyc3QoKSk7IH07XG4vKipcbiAqIFVzZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBsYXN0IH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGdldE1vbm9pZChsYXN0KCkpXG4gKiBgYGBcbiAqXG4gKiBpbnN0ZWFkLlxuICpcbiAqIE1vbm9pZCByZXR1cm5pbmcgdGhlIHJpZ2h0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZVxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShiKSAgICAgIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TGFzdE1vbm9pZCwgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBjb25zdCBNID0gZ2V0TGFzdE1vbm9pZDxudW1iZXI+KClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgbm9uZSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIG5vbmUpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgc29tZSgyKSksIHNvbWUoMikpXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRMYXN0TW9ub2lkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0TW9ub2lkKGxhc3QoKSk7IH07XG4iLAogICJpbXBvcnQgeyBnZXRBcHBsaWNhdGl2ZU1vbm9pZCB9IGZyb20gJy4vQXBwbGljYXRpdmUnO1xuaW1wb3J0IHsgYXBGaXJzdCBhcyBhcEZpcnN0XywgYXBTIGFzIGFwU18sIGFwU2Vjb25kIGFzIGFwU2Vjb25kXywgZ2V0QXBwbHlTZW1pZ3JvdXAgYXMgZ2V0QXBwbHlTZW1pZ3JvdXBfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgKiBhcyBjaGFpbmFibGUgZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBjaGFpbkVpdGhlcksgYXMgY2hhaW5FaXRoZXJLXywgZnJvbUVpdGhlcksgYXMgZnJvbUVpdGhlcktfLCB0YXBFaXRoZXIgYXMgdGFwRWl0aGVyXyB9IGZyb20gJy4vRnJvbUVpdGhlcic7XG5pbXBvcnQgeyBjb25zdE51bGwsIGNvbnN0VW5kZWZpbmVkLCBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgYXMgYXMgYXNfLCBhc1VuaXQgYXMgYXNVbml0XywgYmluZFRvIGFzIGJpbmRUb18sIGZsYXAgYXMgZmxhcF8sIGxldCBhcyBsZXRfXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0IHsgbm90IH0gZnJvbSAnLi9QcmVkaWNhdGUnO1xuaW1wb3J0IHsgZmlyc3QsIGxhc3QgfSBmcm9tICcuL1NlbWlncm91cCc7XG5pbXBvcnQgeyBzZXBhcmF0ZWQgfSBmcm9tICcuL1NlcGFyYXRlZCc7XG5pbXBvcnQgeyB3aWx0RGVmYXVsdCwgd2l0aGVyRGVmYXVsdCB9IGZyb20gJy4vV2l0aGVyYWJsZSc7XG5pbXBvcnQgeyBndWFyZCBhcyBndWFyZF8gfSBmcm9tICcuL1plcm8nO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29uc3RydWN0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIGBOb25lYCBkb2Vzbid0IGhhdmUgYSBjb25zdHJ1Y3RvciwgaW5zdGVhZCB5b3UgY2FuIHVzZSBpdCBkaXJlY3RseSBhcyBhIHZhbHVlLiBSZXByZXNlbnRzIGEgbWlzc2luZyB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBub25lID0gXy5ub25lO1xuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgYFNvbWVgLiBSZXByZXNlbnRzIGFuIG9wdGlvbmFsIHZhbHVlIHRoYXQgZXhpc3RzLlxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNvbWUgPSBfLnNvbWU7XG5leHBvcnQgZnVuY3Rpb24gZnJvbVByZWRpY2F0ZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChwcmVkaWNhdGUoYSkgPyBzb21lKGEpIDogbm9uZSk7IH07XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGBMZWZ0YCB2YWx1ZSBvZiBhbiBgRWl0aGVyYCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TGVmdCwgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHJpZ2h0LCBsZWZ0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0TGVmdChyaWdodCgxKSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldExlZnQobGVmdCgnYScpKSwgc29tZSgnYScpKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldExlZnQgPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChtYS5fdGFnID09PSAnUmlnaHQnID8gbm9uZSA6IHNvbWUobWEubGVmdCkpOyB9O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBgUmlnaHRgIHZhbHVlIG9mIGFuIGBFaXRoZXJgIGlmIHBvc3NpYmxlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRSaWdodCwgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHJpZ2h0LCBsZWZ0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0UmlnaHQocmlnaHQoMSkpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRSaWdodChsZWZ0KCdhJykpLCBub25lKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldFJpZ2h0ID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAobWEuX3RhZyA9PT0gJ0xlZnQnID8gbm9uZSA6IHNvbWUobWEucmlnaHQpKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbnZhciBfcmVkdWNlID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2UoYiwgZikpOyB9O1xudmFyIF9mb2xkTWFwID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcE0gPSBmb2xkTWFwKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBNKGYpKTsgfTtcbn07XG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG52YXIgX3RyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VGKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9hbHQgPSBmdW5jdGlvbiAoZmEsIHRoYXQpIHsgcmV0dXJuIHBpcGUoZmEsIGFsdCh0aGF0KSk7IH07XG52YXIgX2ZpbHRlciA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXIocHJlZGljYXRlKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9maWx0ZXJNYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlck1hcChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9leHRlbmQgPSBmdW5jdGlvbiAod2EsIGYpIHsgcmV0dXJuIHBpcGUod2EsIGV4dGVuZChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9wYXJ0aXRpb24gPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb24ocHJlZGljYXRlKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25NYXAoZikpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBVUkkgPSAnT3B0aW9uJztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U2hvdyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIHNob3c6IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKGlzTm9uZShtYSkgPyAnbm9uZScgOiBcInNvbWUoXCIuY29uY2F0KFMuc2hvdyhtYS52YWx1ZSksIFwiKVwiKSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgZ2V0RXEgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBFID0gZ2V0RXEoTi5FcSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhub25lLCBub25lKSwgdHJ1ZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhub25lLCBzb21lKDEpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgbm9uZSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIHNvbWUoMikpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBzb21lKDEpKSwgdHJ1ZSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRFcSA9IGZ1bmN0aW9uIChFKSB7IHJldHVybiAoe1xuICAgIGVxdWFsczogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggPT09IHkgfHwgKGlzTm9uZSh4KSA/IGlzTm9uZSh5KSA6IGlzTm9uZSh5KSA/IGZhbHNlIDogRS5lcXVhbHMoeC52YWx1ZSwgeS52YWx1ZSkpOyB9XG59KTsgfTtcbi8qKlxuICogVGhlIGBPcmRgIGluc3RhbmNlIGFsbG93cyBgT3B0aW9uYCB2YWx1ZXMgdG8gYmUgY29tcGFyZWQgd2l0aFxuICogYGNvbXBhcmVgLCB3aGVuZXZlciB0aGVyZSBpcyBhbiBgT3JkYCBpbnN0YW5jZSBmb3JcbiAqIHRoZSB0eXBlIHRoZSBgT3B0aW9uYCBjb250YWlucy5cbiAqXG4gKiBgTm9uZWAgaXMgY29uc2lkZXJlZCB0byBiZSBsZXNzIHRoYW4gYW55IGBTb21lYCB2YWx1ZS5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGdldE9yZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE8gPSBnZXRPcmQoTi5PcmQpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKG5vbmUsIG5vbmUpLCAwKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShub25lLCBzb21lKDEpKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIG5vbmUpLCAxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBzb21lKDIpKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIHNvbWUoMSkpLCAwKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE9yZCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIGVxdWFsczogZ2V0RXEoTykuZXF1YWxzLFxuICAgIGNvbXBhcmU6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiAoeCA9PT0geSA/IDAgOiBpc1NvbWUoeCkgPyAoaXNTb21lKHkpID8gTy5jb21wYXJlKHgudmFsdWUsIHkudmFsdWUpIDogMSkgOiAtMSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSBsZWZ0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZS4gSWYgYm90aCBvcGVyYW5kcyBhcmUgYFNvbWVgcyB0aGVuIHRoZSBpbm5lciB2YWx1ZXMgYXJlXG4gKiBjb25jYXRlbmF0ZWQgdXNpbmcgdGhlIHByb3ZpZGVkIGBTZW1pZ3JvdXBgXG4gKlxuICogfCB4ICAgICAgIHwgeSAgICAgICB8IGNvbmNhdCh4LCB5KSAgICAgICB8XG4gKiB8IC0tLS0tLS0gfCAtLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tIHxcbiAqIHwgbm9uZSAgICB8IG5vbmUgICAgfCBub25lICAgICAgICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgbm9uZSAgICB8IHNvbWUoYSkgICAgICAgICAgICB8XG4gKiB8IG5vbmUgICAgfCBzb21lKGIpIHwgc29tZShiKSAgICAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IHNvbWUoYikgfCBzb21lKGNvbmNhdChhLCBiKSkgfFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgTSA9IGdldE1vbm9pZChTZW1pZ3JvdXBTdW0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIG5vbmUpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBub25lKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgc29tZSgxKSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIHNvbWUoMikpLCBzb21lKDMpKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIChpc05vbmUoeCkgPyB5IDogaXNOb25lKHkpID8geCA6IHNvbWUoUy5jb25jYXQoeC52YWx1ZSwgeS52YWx1ZSkpKTsgfSxcbiAgICBlbXB0eTogbm9uZVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogc29tZShmKGZhLnZhbHVlKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogTWFwcyB0aGUgYFNvbWVgIHZhbHVlIG9mIHRoaXMgYE9wdGlvbmAgdG8gdGhlIHNwZWNpZmllZCBjb25zdGFudCB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIGFzID0gZHVhbCgyLCBhc18oRnVuY3RvcikpO1xuLyoqXG4gKiBNYXBzIHRoZSBgU29tZWAgdmFsdWUgb2YgdGhpcyBgT3B0aW9uYCB0byB0aGUgdm9pZCBjb25zdGFudCB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIGFzVW5pdCA9IGFzVW5pdF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIG9mID0gc29tZTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcCA9IGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZnVuY3Rpb24gKGZhYikge1xuICAgIHJldHVybiBpc05vbmUoZmFiKSA/IG5vbmUgOiBpc05vbmUoZmEpID8gbm9uZSA6IHNvbWUoZmFiLnZhbHVlKGZhLnZhbHVlKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbHkgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFwcGxpY2F0aXZlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjE0LjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0TWFwID0gLyojX19QVVJFX18qLyBkdWFsKDIsIGZ1bmN0aW9uIChtYSwgZikgeyByZXR1cm4gKGlzTm9uZShtYSkgPyBub25lIDogZihtYS52YWx1ZSkpOyB9KTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIENoYWluID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2UgPSBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBiIDogZihiLCBmYS52YWx1ZSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7IHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBNLmVtcHR5IDogZihmYS52YWx1ZSk7XG59OyB9OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBiIDogZihmYS52YWx1ZSwgYik7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodFxufTtcbi8qKlxuICogUmV0dXJucyB0aGUgcHJvdmlkZWQgYE9wdGlvbmAgYHRoYXRgIGlmIGBzZWxmYCBpcyBgTm9uZWAsIG90aGVyd2lzZSByZXR1cm5zIGBzZWxmYC5cbiAqXG4gKiBAcGFyYW0gc2VsZiAtIFRoZSBmaXJzdCBgT3B0aW9uYCB0byBiZSBjaGVja2VkLlxuICogQHBhcmFtIHRoYXQgLSBUaGUgYE9wdGlvbmAgdG8gcmV0dXJuIGlmIGBzZWxmYCBpcyBgTm9uZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE8gZnJvbSBcImZwLXRzL09wdGlvblwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLm5vbmUsICgpID0+IE8ubm9uZSksIE8ubm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5zb21lKDEpLCAoKSA9PiBPLm5vbmUpLCBPLnNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8ubm9uZSwgKCkgPT4gTy5zb21lKCdiJykpLCBPLnNvbWUoJ2InKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5zb21lKDEpLCAoKSA9PiBPLnNvbWUoJ2InKSksIE8uc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBvckVsc2UgPSBkdWFsKDIsIGZ1bmN0aW9uIChzZWxmLCB0aGF0KSB7IHJldHVybiAoaXNOb25lKHNlbGYpID8gdGhhdCgpIDogc2VsZik7IH0pO1xuLyoqXG4gKiBBbGlhcyBvZiBgb3JFbHNlYC5cbiAqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgYWx0YF0oI2FsdCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gb3JFbHNlO1xuLyoqXG4gKiBBbGlhcyBvZiBgb3JFbHNlYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhbHQgPSBvckVsc2U7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciB6ZXJvID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9uZTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFplcm8gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ3VhcmQgPSAvKiNfX1BVUkVfXyovIGd1YXJkXyhaZXJvLCBQb2ludGVkKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQWx0ZXJuYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFsdDogX2FsdCxcbiAgICB6ZXJvOiB6ZXJvXG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHdhKSB7XG4gICAgcmV0dXJuIGlzTm9uZSh3YSkgPyBub25lIDogc29tZShmKHdhKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBFeHRlbmQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGV4dGVuZDogX2V4dGVuZFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29tcGFjdCA9IC8qI19fUFVSRV9fKi8gZmxhdE1hcChpZGVudGl0eSk7XG52YXIgZGVmYXVsdFNlcGFyYXRlZCA9IC8qI19fUFVSRV9fKi8gc2VwYXJhdGVkKG5vbmUsIG5vbmUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzZXBhcmF0ZSA9IGZ1bmN0aW9uIChtYSkge1xuICAgIHJldHVybiBpc05vbmUobWEpID8gZGVmYXVsdFNlcGFyYXRlZCA6IHNlcGFyYXRlZChnZXRMZWZ0KG1hLnZhbHVlKSwgZ2V0UmlnaHQobWEudmFsdWUpKTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIENvbXBhY3RhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXIgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKGZhKSA/IG5vbmUgOiBwcmVkaWNhdGUoZmEudmFsdWUpID8gZmEgOiBub25lO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJNYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogZihmYS52YWx1ZSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb24gPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKF9maWx0ZXIoZmEsIG5vdChwcmVkaWNhdGUpKSwgX2ZpbHRlcihmYSwgcHJlZGljYXRlKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmbG93KG1hcChmKSwgc2VwYXJhdGUpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGaWx0ZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHtcbiAgICAgICAgICAgIHJldHVybiBpc05vbmUodGEpID8gRi5vZihub25lKSA6IEYubWFwKGYodGEudmFsdWUpLCBzb21lKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUodGEpID8gRi5vZihub25lKSA6IEYubWFwKHRhLnZhbHVlLCBzb21lKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xudmFyIF93aXRoZXIgPSAvKiNfX1BVUkVfXyovIHdpdGhlckRlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbnZhciBfd2lsdCA9IC8qI19fUFVSRV9fKi8gd2lsdERlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2l0aGVyID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpdGhlckYgPSBfd2l0aGVyKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2l0aGVyRihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aWx0ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpbHRGID0gX3dpbHQoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIF93aWx0RihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBXaXRoZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuLyoqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciB0aHJvd0Vycm9yID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9uZTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWRUaHJvdyA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgdGhyb3dFcnJvcjogdGhyb3dFcnJvclxufTtcbi8qKlxuICogVHJhbnNmb3JtcyBhbiBgRWl0aGVyYCB0byBhbiBgT3B0aW9uYCBkaXNjYXJkaW5nIHRoZSBlcnJvci5cbiAqXG4gKiBBbGlhcyBvZiBbZ2V0UmlnaHRdKCNnZXRyaWdodClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZyb21FaXRoZXIgPSBnZXRSaWdodDtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIEZyb21FaXRoZXIgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgZnJvbUVpdGhlcjogZnJvbUVpdGhlclxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBvcHRpb24gaXMgYW4gaW5zdGFuY2Ugb2YgYFNvbWVgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgaXNTb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc1NvbWUoc29tZSgxKSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNTb21lKG5vbmUpLCBmYWxzZSlcbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGlzU29tZSA9IF8uaXNTb21lO1xuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb3B0aW9uIGlzIGBOb25lYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGlzTm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNOb25lKHNvbWUoMSkpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc05vbmUobm9uZSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc05vbmUgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZhLl90YWcgPT09ICdOb25lJzsgfTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaFcgPSBmdW5jdGlvbiAob25Ob25lLCBvblNvbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gb25Ob25lKCkgOiBvblNvbWUobWEudmFsdWUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoV2BdKCNtYXRjaHcpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZFcgPSBtYXRjaFc7XG4vKipcbiAqIFRha2VzIGEgKGxhenkpIGRlZmF1bHQgdmFsdWUsIGEgZnVuY3Rpb24sIGFuZCBhbiBgT3B0aW9uYCB2YWx1ZSwgaWYgdGhlIGBPcHRpb25gIHZhbHVlIGlzIGBOb25lYCB0aGUgZGVmYXVsdCB2YWx1ZSBpc1xuICogcmV0dXJuZWQsIG90aGVyd2lzZSB0aGUgZnVuY3Rpb24gaXMgYXBwbGllZCB0byB0aGUgdmFsdWUgaW5zaWRlIHRoZSBgU29tZWAgYW5kIHRoZSByZXN1bHQgaXMgcmV0dXJuZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIG1hdGNoIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIG1hdGNoKCgpID0+ICdhIG5vbmUnLCBhID0+IGBhIHNvbWUgY29udGFpbmluZyAke2F9YClcbiAqICAgKSxcbiAqICAgJ2Egc29tZSBjb250YWluaW5nIDEnXG4gKiApXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgbWF0Y2goKCkgPT4gJ2Egbm9uZScsIGEgPT4gYGEgc29tZSBjb250YWluaW5nICR7YX1gKVxuICogICApLFxuICogICAnYSBub25lJ1xuICogKVxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2ggPSBtYXRjaFc7XG4vKipcbiAqIEFsaWFzIG9mIFtgbWF0Y2hgXSgjbWF0Y2gpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkID0gbWF0Y2g7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BnZXRPckVsc2VgXSgjZ2V0b3JlbHNlKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZSB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjYuMFxuICovXG5leHBvcnQgdmFyIGdldE9yRWxzZVcgPSBmdW5jdGlvbiAob25Ob25lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG9uTm9uZSgpIDogbWEudmFsdWU7XG4gICAgfTtcbn07XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyB0aGUgZ2l2ZW4gZGVmYXVsdCB2YWx1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBnZXRPckVsc2UgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgZ2V0T3JFbHNlKCgpID0+IDApXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIGdldE9yRWxzZSgoKSA9PiAwKVxuICogICApLFxuICogICAwXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPckVsc2UgPSBnZXRPckVsc2VXO1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZsYXAgPSAvKiNfX1BVUkVfXyovIGZsYXBfKEZ1bmN0b3IpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwRmlyc3QgPSAvKiNfX1BVUkVfXyovIGFwRmlyc3RfKEFwcGx5KTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBzZWNvbmQuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTZWNvbmQgPSAvKiNfX1BVUkVfXyovIGFwU2Vjb25kXyhBcHBseSk7XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0dGVuID0gY29tcGFjdDtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xNS4wXG4gKi9cbmV4cG9ydCB2YXIgdGFwID0gLyojX19QVVJFX18qLyBkdWFsKDIsIGNoYWluYWJsZS50YXAoQ2hhaW4pKTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCAqIGFzIE8gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgRSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogY29uc3QgY29tcHV0ZSA9ICh2YWx1ZTogbnVtYmVyKSA9PiBwaXBlKFxuICogICBPLm9mKHZhbHVlKSxcbiAqICAgTy50YXBFaXRoZXIoKHZhbHVlKSA9PiB2YWx1ZSA+IDAgPyBFLnJpZ2h0KCdvaycpIDogRS5sZWZ0KCdlcnJvcicpKSxcbiAqIClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbXB1dGUoMSksIE8ub2YoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbXB1dGUoLTQyKSwgTy5ub25lKVxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIHRhcEVpdGhlciA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCB0YXBFaXRoZXJfKEZyb21FaXRoZXIsIENoYWluKSk7XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKGlkZW50aXR5KTtcbi8qKlxuICogQGNhdGVnb3J5IGxpZnRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRWl0aGVySyA9IC8qI19fUFVSRV9fKi8gZnJvbUVpdGhlcktfKEZyb21FaXRoZXIpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRWl0aGVySyA9IFxuLyojX19QVVJFX18qLyBjaGFpbkVpdGhlcktfKEZyb21FaXRoZXIsIENoYWluKTtcbi8qKlxuICogQWxpYXMgb2YgYHRhcEVpdGhlcmAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMTIuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRmlyc3RFaXRoZXJLID0gdGFwRWl0aGVyO1xuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGBPcHRpb25gIGZyb20gYSBudWxsYWJsZSB0eXBlLiBJZiB0aGUgdmFsdWUgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLCByZXR1cm5zIGBOb25lYCwgb3RoZXJ3aXNlXG4gKiByZXR1cm5zIHRoZSB2YWx1ZSB3cmFwcGVkIGluIGEgYFNvbWVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBmcm9tTnVsbGFibGUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUodW5kZWZpbmVkKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKG51bGwpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUoMSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tTnVsbGFibGUgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKGEgPT0gbnVsbCA/IG5vbmUgOiBzb21lKGEpKTsgfTtcbi8qKlxuICogVHJhbnNmb3JtcyBhbiBleGNlcHRpb24gaW50byBhbiBgT3B0aW9uYC4gSWYgYGZgIHRocm93cywgcmV0dXJucyBgTm9uZWAsIG90aGVyd2lzZSByZXR1cm5zIHRoZSBvdXRwdXQgd3JhcHBlZCBpbiBhXG4gKiBgU29tZWAuXG4gKlxuICogU2VlIGFsc28gW2B0cnlDYXRjaEtgXSgjdHJ5Y2F0Y2hrKS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgdHJ5Q2F0Y2ggfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgdHJ5Q2F0Y2goKCkgPT4ge1xuICogICAgIHRocm93IG5ldyBFcnJvcigpXG4gKiAgIH0pLFxuICogICBub25lXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRyeUNhdGNoKCgpID0+IDEpLCBzb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSBpbnRlcm9wXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0cnlDYXRjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHNvbWUoZigpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgfVxufTtcbi8qKlxuICogQ29udmVydHMgYSBmdW5jdGlvbiB0aGF0IG1heSB0aHJvdyB0byBvbmUgcmV0dXJuaW5nIGEgYE9wdGlvbmAuXG4gKlxuICogQGNhdGVnb3J5IGludGVyb3BcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB0cnlDYXRjaEsgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyeUNhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFJldHVybnMgYSAqc21hcnQgY29uc3RydWN0b3IqIGZyb20gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBudWxsYWJsZSB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZnJvbU51bGxhYmxlSywgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBjb25zdCBmID0gKHM6IHN0cmluZyk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gKiAgIGNvbnN0IG4gPSBwYXJzZUZsb2F0KHMpXG4gKiAgIHJldHVybiBpc05hTihuKSA/IHVuZGVmaW5lZCA6IG5cbiAqIH1cbiAqXG4gKiBjb25zdCBnID0gZnJvbU51bGxhYmxlSyhmKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZygnMScpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnKCdhJyksIG5vbmUpXG4gKlxuICogQGNhdGVnb3J5IGxpZnRpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGZyb21OdWxsYWJsZUsgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmxvdyhmLCBmcm9tTnVsbGFibGUpOyB9O1xuLyoqXG4gKiBUaGlzIGlzIGBjaGFpbmAgKyBgZnJvbU51bGxhYmxlYCwgdXNlZnVsIHdoZW4gd29ya2luZyB3aXRoIG9wdGlvbmFsIHZhbHVlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZnJvbU51bGxhYmxlLCBjaGFpbk51bGxhYmxlSyB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgRW1wbG95ZWUge1xuICogICByZWFkb25seSBjb21wYW55Pzoge1xuICogICAgIHJlYWRvbmx5IGFkZHJlc3M/OiB7XG4gKiAgICAgICByZWFkb25seSBzdHJlZXQ/OiB7XG4gKiAgICAgICAgIHJlYWRvbmx5IG5hbWU/OiBzdHJpbmdcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBjb25zdCBlbXBsb3llZTE6IEVtcGxveWVlID0geyBjb21wYW55OiB7IGFkZHJlc3M6IHsgc3RyZWV0OiB7IG5hbWU6ICdoaWdoIHN0cmVldCcgfSB9IH0gfVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgZnJvbU51bGxhYmxlKGVtcGxveWVlMS5jb21wYW55KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhjb21wYW55ID0+IGNvbXBhbnkuYWRkcmVzcyksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoYWRkcmVzcyA9PiBhZGRyZXNzLnN0cmVldCksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoc3RyZWV0ID0+IHN0cmVldC5uYW1lKVxuICogICApLFxuICogICBzb21lKCdoaWdoIHN0cmVldCcpXG4gKiApXG4gKlxuICogY29uc3QgZW1wbG95ZWUyOiBFbXBsb3llZSA9IHsgY29tcGFueTogeyBhZGRyZXNzOiB7IHN0cmVldDoge30gfSB9IH1cbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIGZyb21OdWxsYWJsZShlbXBsb3llZTIuY29tcGFueSksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoY29tcGFueSA9PiBjb21wYW55LmFkZHJlc3MpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGFkZHJlc3MgPT4gYWRkcmVzcy5zdHJlZXQpLFxuICogICAgIGNoYWluTnVsbGFibGVLKHN0cmVldCA9PiBzdHJlZXQubmFtZSlcbiAqICAgKSxcbiAqICAgbm9uZVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbk51bGxhYmxlSyA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG5vbmUgOiBmcm9tTnVsbGFibGUoZihtYS52YWx1ZSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgYG51bGxgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCB0b051bGxhYmxlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIHRvTnVsbGFibGVcbiAqICAgKSxcbiAqICAgMVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgdG9OdWxsYWJsZVxuICogICApLFxuICogICBudWxsXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0b051bGxhYmxlID0gLyojX19QVVJFX18qLyBtYXRjaChjb25zdE51bGwsIGlkZW50aXR5KTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIHZhbHVlIG91dCBvZiB0aGUgc3RydWN0dXJlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSByZXR1cm5zIGB1bmRlZmluZWRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCB0b1VuZGVmaW5lZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICB0b1VuZGVmaW5lZFxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICB0b1VuZGVmaW5lZFxuICogICApLFxuICogICB1bmRlZmluZWRcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRvVW5kZWZpbmVkID0gLyojX19QVVJFX18qLyBtYXRjaChjb25zdFVuZGVmaW5lZCwgaWRlbnRpdHkpO1xuZXhwb3J0IGZ1bmN0aW9uIGVsZW0oRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSwgbWEpIHtcbiAgICAgICAgaWYgKG1hID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtRV8xID0gZWxlbShFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIGVsZW1FXzEoYSwgbWEpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gZmFsc2UgOiBFLmVxdWFscyhhLCBtYS52YWx1ZSk7XG4gICAgfTtcbn1cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHByZWRpY2F0ZSBpcyBzYXRpc2ZpZWQgYnkgdGhlIHdyYXBwZWQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZXhpc3RzIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAwKVxuICogICApLFxuICogICB0cnVlXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMSlcbiAqICAgKSxcbiAqICAgZmFsc2VcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAwKVxuICogICApLFxuICogICBmYWxzZVxuICogKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGV4aXN0cyA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gZmFsc2UgOiBwcmVkaWNhdGUobWEudmFsdWUpO1xuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZG8gbm90YXRpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBEbyA9IC8qI19fUFVSRV9fKi8gb2YoXy5lbXB0eVJlY29yZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZFRvID0gLyojX19QVVJFX18qLyBiaW5kVG9fKEZ1bmN0b3IpO1xudmFyIGxldF8gPSAvKiNfX1BVUkVfXyovIGxldF9fKEZ1bmN0b3IpO1xuZXhwb3J0IHsgXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTMuMFxuICovXG5sZXRfIGFzIGxldCB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmQgPSAvKiNfX1BVUkVfXyovIGNoYWluYWJsZS5iaW5kKENoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBhcFMgPSAvKiNfX1BVUkVfXyovIGFwU18oQXBwbHkpO1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgQXBUID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVhZG9ubHlBcnJheSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBhcnJheSB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seU5vbkVtcHR5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvID0gZigwLCBfLmhlYWQoYXMpKTtcbiAgICAgICAgaWYgKGlzTm9uZShvKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtvLnZhbHVlXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG9fMSA9IGYoaSwgYXNbaV0pO1xuICAgICAgICAgICAgaWYgKGlzTm9uZShvXzEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXQucHVzaChvXzEudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb21lKG91dCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgdmFyIGcgPSB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleChmKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoXy5pc05vbkVtcHR5KGFzKSA/IGcoYXMpIDogQXBUKTsgfTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VBcnJheVdpdGhJbmRleCA9IHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleDtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZShBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZUFycmF5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjc2VxdWVuY2UoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgc2VxdWVuY2VBcnJheSA9IFxuLyojX19QVVJFX18qLyB0cmF2ZXJzZUFycmF5KGlkZW50aXR5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxlZ2FjeVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBBbGlhcyBvZiBgZmxhdE1hcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW4gPSBmbGF0TWFwO1xuLyoqXG4gKiBBbGlhcyBvZiBgdGFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0ID0gdGFwO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgYFJlZmluZW1lbnRgIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWZpbmVtZW50KGdldE9wdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gaXNTb21lKGdldE9wdGlvbihhKSk7IH07XG59XG4vKipcbiAqIFVzZSBbYGNoYWluTnVsbGFibGVLYF0oI2NoYWlubnVsbGFibGVrKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbWFwTnVsbGFibGUgPSBjaGFpbk51bGxhYmxlSztcbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgTy5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBPLm9wdGlvbmBcbiAqICh3aGVyZSBgT2AgaXMgZnJvbSBgaW1wb3J0IE8gZnJvbSAnZnAtdHMvT3B0aW9uJ2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcHRpb24gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG9mOiBvZixcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHplcm86IHplcm8sXG4gICAgYWx0OiBfYWx0LFxuICAgIGV4dGVuZDogX2V4dGVuZCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0LFxuICAgIHRocm93RXJyb3I6IHRocm93RXJyb3Jcbn07XG4vKipcbiAqIFVzZSBbYGdldEFwcGx5U2VtaWdyb3VwYF0oLi9BcHBseS50cy5odG1sI2dldGFwcGx5c2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0QXBwbHlTZW1pZ3JvdXAgPSAvKiNfX1BVUkVfXyovIGdldEFwcGx5U2VtaWdyb3VwXyhBcHBseSk7XG4vKipcbiAqIFVzZSBbYGdldEFwcGxpY2F0aXZlTW9ub2lkYF0oLi9BcHBsaWNhdGl2ZS50cy5odG1sI2dldGFwcGxpY2F0aXZlbW9ub2lkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0QXBwbHlNb25vaWQgPSAvKiNfX1BVUkVfXyovIGdldEFwcGxpY2F0aXZlTW9ub2lkKEFwcGxpY2F0aXZlKTtcbi8qKlxuICogVXNlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZpcnN0IH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGdldE1vbm9pZChmaXJzdCgpKVxuICogYGBgXG4gKlxuICogaW5zdGVhZC5cbiAqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSBsZWZ0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZVxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShhKSAgICAgIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0Rmlyc3RNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgTSA9IGdldEZpcnN0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMikpLCBzb21lKDIpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEZpcnN0TW9ub2lkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0TW9ub2lkKGZpcnN0KCkpOyB9O1xuLyoqXG4gKiBVc2VcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgbGFzdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBnZXRNb25vaWQobGFzdCgpKVxuICogYGBgXG4gKlxuICogaW5zdGVhZC5cbiAqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSByaWdodC1tb3N0IG5vbi1gTm9uZWAgdmFsdWVcbiAqXG4gKiB8IHggICAgICAgfCB5ICAgICAgIHwgY29uY2F0KHgsIHkpIHxcbiAqIHwgLS0tLS0tLSB8IC0tLS0tLS0gfCAtLS0tLS0tLS0tLS0gfFxuICogfCBub25lICAgIHwgbm9uZSAgICB8IG5vbmUgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBub25lICAgIHwgc29tZShhKSAgICAgIHxcbiAqIHwgbm9uZSAgICB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICogfCBzb21lKGEpIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldExhc3RNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgTSA9IGdldExhc3RNb25vaWQ8bnVtYmVyPigpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIG5vbmUpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBub25lKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgc29tZSgyKSksIHNvbWUoMikpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIHNvbWUoMikpLCBzb21lKDIpKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TGFzdE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldE1vbm9pZChsYXN0KCkpOyB9O1xuIiwKICAiaW1wb3J0IHsgZ2V0QXBwbGljYXRpdmVNb25vaWQgfSBmcm9tICcuL0FwcGxpY2F0aXZlJztcbmltcG9ydCB7IGFwRmlyc3QgYXMgYXBGaXJzdF8sIGFwUyBhcyBhcFNfLCBhcFNlY29uZCBhcyBhcFNlY29uZF8sIGdldEFwcGx5U2VtaWdyb3VwIGFzIGdldEFwcGx5U2VtaWdyb3VwXyB9IGZyb20gJy4vQXBwbHknO1xuaW1wb3J0ICogYXMgY2hhaW5hYmxlIGZyb20gJy4vQ2hhaW4nO1xuaW1wb3J0IHsgY2hhaW5FaXRoZXJLIGFzIGNoYWluRWl0aGVyS18sIGZyb21FaXRoZXJLIGFzIGZyb21FaXRoZXJLXywgdGFwRWl0aGVyIGFzIHRhcEVpdGhlcl8gfSBmcm9tICcuL0Zyb21FaXRoZXInO1xuaW1wb3J0IHsgY29uc3ROdWxsLCBjb25zdFVuZGVmaW5lZCwgZHVhbCwgZmxvdywgaWRlbnRpdHksIHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGFzIGFzIGFzXywgYXNVbml0IGFzIGFzVW5pdF8sIGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IG5vdCB9IGZyb20gJy4vUHJlZGljYXRlJztcbmltcG9ydCB7IGZpcnN0LCBsYXN0IH0gZnJvbSAnLi9TZW1pZ3JvdXAnO1xuaW1wb3J0IHsgc2VwYXJhdGVkIH0gZnJvbSAnLi9TZXBhcmF0ZWQnO1xuaW1wb3J0IHsgd2lsdERlZmF1bHQsIHdpdGhlckRlZmF1bHQgfSBmcm9tICcuL1dpdGhlcmFibGUnO1xuaW1wb3J0IHsgZ3VhcmQgYXMgZ3VhcmRfIH0gZnJvbSAnLi9aZXJvJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBgTm9uZWAgZG9lc24ndCBoYXZlIGEgY29uc3RydWN0b3IsIGluc3RlYWQgeW91IGNhbiB1c2UgaXQgZGlyZWN0bHkgYXMgYSB2YWx1ZS4gUmVwcmVzZW50cyBhIG1pc3NpbmcgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbm9uZSA9IF8ubm9uZTtcbi8qKlxuICogQ29uc3RydWN0cyBhIGBTb21lYC4gUmVwcmVzZW50cyBhbiBvcHRpb25hbCB2YWx1ZSB0aGF0IGV4aXN0cy5cbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzb21lID0gXy5zb21lO1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21QcmVkaWNhdGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiAocHJlZGljYXRlKGEpID8gc29tZShhKSA6IG5vbmUpOyB9O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBgTGVmdGAgdmFsdWUgb2YgYW4gYEVpdGhlcmAgaWYgcG9zc2libGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldExlZnQsIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyByaWdodCwgbGVmdCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldExlZnQocmlnaHQoMSkpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRMZWZ0KGxlZnQoJ2EnKSksIHNvbWUoJ2EnKSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRMZWZ0ID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAobWEuX3RhZyA9PT0gJ1JpZ2h0JyA/IG5vbmUgOiBzb21lKG1hLmxlZnQpKTsgfTtcbi8qKlxuICogUmV0dXJucyB0aGUgYFJpZ2h0YCB2YWx1ZSBvZiBhbiBgRWl0aGVyYCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0UmlnaHQsIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyByaWdodCwgbGVmdCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldFJpZ2h0KHJpZ2h0KDEpKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0UmlnaHQobGVmdCgnYScpKSwgbm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRSaWdodCA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKG1hLl90YWcgPT09ICdMZWZ0JyA/IG5vbmUgOiBzb21lKG1hLnJpZ2h0KSk7IH07XG52YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfTtcbnZhciBfYXAgPSBmdW5jdGlvbiAoZmFiLCBmYSkgeyByZXR1cm4gcGlwZShmYWIsIGFwKGZhKSk7IH07XG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbnZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBNID0gZm9sZE1hcChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwTShmKSk7IH07XG59O1xudmFyIF9yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHQoYiwgZikpOyB9O1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xudmFyIF9maWx0ZXIgPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyKHByZWRpY2F0ZSkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZmlsdGVyTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZXh0ZW5kID0gZnVuY3Rpb24gKHdhLCBmKSB7IHJldHVybiBwaXBlKHdhLCBleHRlbmQoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcGFydGl0aW9uID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uKHByZWRpY2F0ZSkpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwKGYpKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ09wdGlvbic7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChpc05vbmUobWEpID8gJ25vbmUnIDogXCJzb21lKFwiLmNvbmNhdChTLnNob3cobWEudmFsdWUpLCBcIilcIikpOyB9XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGdldEVxIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMobm9uZSwgbm9uZSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMobm9uZSwgc29tZSgxKSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIG5vbmUpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBzb21lKDIpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgc29tZSgxKSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ID09PSB5IHx8IChpc05vbmUoeCkgPyBpc05vbmUoeSkgOiBpc05vbmUoeSkgPyBmYWxzZSA6IEUuZXF1YWxzKHgudmFsdWUsIHkudmFsdWUpKTsgfVxufSk7IH07XG4vKipcbiAqIFRoZSBgT3JkYCBpbnN0YW5jZSBhbGxvd3MgYE9wdGlvbmAgdmFsdWVzIHRvIGJlIGNvbXBhcmVkIHdpdGhcbiAqIGBjb21wYXJlYCwgd2hlbmV2ZXIgdGhlcmUgaXMgYW4gYE9yZGAgaW5zdGFuY2UgZm9yXG4gKiB0aGUgdHlwZSB0aGUgYE9wdGlvbmAgY29udGFpbnMuXG4gKlxuICogYE5vbmVgIGlzIGNvbnNpZGVyZWQgdG8gYmUgbGVzcyB0aGFuIGFueSBgU29tZWAgdmFsdWUuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBnZXRPcmQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBPID0gZ2V0T3JkKE4uT3JkKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShub25lLCBub25lKSwgMClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUobm9uZSwgc29tZSgxKSksIC0xKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBub25lKSwgMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoc29tZSgxKSwgc29tZSgyKSksIC0xKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBzb21lKDEpKSwgMClcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPcmQgPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGdldEVxKE8pLmVxdWFscyxcbiAgICBjb21wYXJlOiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gKHggPT09IHkgPyAwIDogaXNTb21lKHgpID8gKGlzU29tZSh5KSA/IE8uY29tcGFyZSh4LnZhbHVlLCB5LnZhbHVlKSA6IDEpIDogLTEpOyB9XG59KTsgfTtcbi8qKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgbGVmdC1tb3N0IG5vbi1gTm9uZWAgdmFsdWUuIElmIGJvdGggb3BlcmFuZHMgYXJlIGBTb21lYHMgdGhlbiB0aGUgaW5uZXIgdmFsdWVzIGFyZVxuICogY29uY2F0ZW5hdGVkIHVzaW5nIHRoZSBwcm92aWRlZCBgU2VtaWdyb3VwYFxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgICAgICAgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShjb25jYXQoYSwgYikpIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgU2VtaWdyb3VwU3VtIH0gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRNb25vaWQoU2VtaWdyb3VwU3VtKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMSkpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgzKSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRNb25vaWQgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiAoaXNOb25lKHgpID8geSA6IGlzTm9uZSh5KSA/IHggOiBzb21lKFMuY29uY2F0KHgudmFsdWUsIHkudmFsdWUpKSk7IH0sXG4gICAgZW1wdHk6IG5vbmVcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gbm9uZSA6IHNvbWUoZihmYS52YWx1ZSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIE1hcHMgdGhlIGBTb21lYCB2YWx1ZSBvZiB0aGlzIGBPcHRpb25gIHRvIHRoZSBzcGVjaWZpZWQgY29uc3RhbnQgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBhcyA9IGR1YWwoMiwgYXNfKEZ1bmN0b3IpKTtcbi8qKlxuICogTWFwcyB0aGUgYFNvbWVgIHZhbHVlIG9mIHRoaXMgYE9wdGlvbmAgdG8gdGhlIHZvaWQgY29uc3RhbnQgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBhc1VuaXQgPSBhc1VuaXRfKEZ1bmN0b3IpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBvZiA9IHNvbWU7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBQb2ludGVkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYWIpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhYikgPyBub25lIDogaXNOb25lKGZhKSA/IG5vbmUgOiBzb21lKGZhYi52YWx1ZShmYS52YWx1ZSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEFwcGx5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHsgcmV0dXJuIChpc05vbmUobWEpID8gbm9uZSA6IGYobWEudmFsdWUpKTsgfSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gYiA6IGYoYiwgZmEudmFsdWUpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZvbGRNYXAgPSBmdW5jdGlvbiAoTSkgeyByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gTS5lbXB0eSA6IGYoZmEudmFsdWUpO1xufTsgfTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gYiA6IGYoZmEudmFsdWUsIGIpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHRcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIHByb3ZpZGVkIGBPcHRpb25gIGB0aGF0YCBpZiBgc2VsZmAgaXMgYE5vbmVgLCBvdGhlcndpc2UgcmV0dXJucyBgc2VsZmAuXG4gKlxuICogQHBhcmFtIHNlbGYgLSBUaGUgZmlyc3QgYE9wdGlvbmAgdG8gYmUgY2hlY2tlZC5cbiAqIEBwYXJhbSB0aGF0IC0gVGhlIGBPcHRpb25gIHRvIHJldHVybiBpZiBgc2VsZmAgaXMgYE5vbmVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBPIGZyb20gXCJmcC10cy9PcHRpb25cIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5ub25lLCAoKSA9PiBPLm5vbmUpLCBPLm5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8uc29tZSgxKSwgKCkgPT4gTy5ub25lKSwgTy5zb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLm5vbmUsICgpID0+IE8uc29tZSgnYicpKSwgTy5zb21lKCdiJykpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8uc29tZSgxKSwgKCkgPT4gTy5zb21lKCdiJykpLCBPLnNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgb3JFbHNlID0gZHVhbCgyLCBmdW5jdGlvbiAoc2VsZiwgdGhhdCkgeyByZXR1cm4gKGlzTm9uZShzZWxmKSA/IHRoYXQoKSA6IHNlbGYpOyB9KTtcbi8qKlxuICogQWxpYXMgb2YgYG9yRWxzZWAuXG4gKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFsdGBdKCNhbHQpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgYWx0VyA9IG9yRWxzZTtcbi8qKlxuICogQWxpYXMgb2YgYG9yRWxzZWAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gb3JFbHNlO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBbHQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFsdDogX2FsdFxufTtcbi8qKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgemVybyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vbmU7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBaZXJvID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHplcm86IHplcm9cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGd1YXJkID0gLyojX19QVVJFX18qLyBndWFyZF8oWmVybywgUG9pbnRlZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdGVybmF0aXZlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBhbHQ6IF9hbHQsXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXh0ZW5kID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh3YSkge1xuICAgIHJldHVybiBpc05vbmUod2EpID8gbm9uZSA6IHNvbWUoZih3YSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRXh0ZW5kID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmRcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbXBhY3QgPSAvKiNfX1BVUkVfXyovIGZsYXRNYXAoaWRlbnRpdHkpO1xudmFyIGRlZmF1bHRTZXBhcmF0ZWQgPSAvKiNfX1BVUkVfXyovIHNlcGFyYXRlZChub25lLCBub25lKTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc2VwYXJhdGUgPSBmdW5jdGlvbiAobWEpIHtcbiAgICByZXR1cm4gaXNOb25lKG1hKSA/IGRlZmF1bHRTZXBhcmF0ZWQgOiBzZXBhcmF0ZWQoZ2V0TGVmdChtYS52YWx1ZSksIGdldFJpZ2h0KG1hLnZhbHVlKSk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21wYWN0YWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogcHJlZGljYXRlKGZhLnZhbHVlKSA/IGZhIDogbm9uZTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gbm9uZSA6IGYoZmEudmFsdWUpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChfZmlsdGVyKGZhLCBub3QocHJlZGljYXRlKSksIF9maWx0ZXIoZmEsIHByZWRpY2F0ZSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmxvdyhtYXAoZiksIHNlcGFyYXRlKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRmlsdGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNOb25lKHRhKSA/IEYub2Yobm9uZSkgOiBGLm1hcChmKHRhLnZhbHVlKSwgc29tZSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciBzZXF1ZW5jZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKHRhKSA/IEYub2Yobm9uZSkgOiBGLm1hcCh0YS52YWx1ZSwgc29tZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZVxufTtcbnZhciBfd2l0aGVyID0gLyojX19QVVJFX18qLyB3aXRoZXJEZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG52YXIgX3dpbHQgPSAvKiNfX1BVUkVfXyovIHdpbHREZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpdGhlciA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aXRoZXJGID0gX3dpdGhlcihGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3dpdGhlckYoZmEsIGYpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2lsdCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aWx0RiA9IF93aWx0KEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2lsdEYoZmEsIGYpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgV2l0aGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbi8qKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgdGhyb3dFcnJvciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vbmU7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIE1vbmFkVGhyb3cgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIHRocm93RXJyb3I6IHRocm93RXJyb3Jcbn07XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gYEVpdGhlcmAgdG8gYW4gYE9wdGlvbmAgZGlzY2FyZGluZyB0aGUgZXJyb3IuXG4gKlxuICogQWxpYXMgb2YgW2dldFJpZ2h0XSgjZ2V0cmlnaHQpXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRWl0aGVyID0gZ2V0UmlnaHQ7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBGcm9tRWl0aGVyID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGZyb21FaXRoZXI6IGZyb21FaXRoZXJcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyByZWZpbmVtZW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb3B0aW9uIGlzIGFuIGluc3RhbmNlIG9mIGBTb21lYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGlzU29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNTb21lKHNvbWUoMSkpLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzU29tZShub25lKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc1NvbWUgPSBfLmlzU29tZTtcbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9wdGlvbiBpcyBgTm9uZWAsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBpc05vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzTm9uZShzb21lKDEpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNOb25lKG5vbmUpLCB0cnVlKVxuICpcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgaXNOb25lID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmYS5fdGFnID09PSAnTm9uZSc7IH07XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaGBdKCNtYXRjaCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hXID0gZnVuY3Rpb24gKG9uTm9uZSwgb25Tb21lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG9uTm9uZSgpIDogb25Tb21lKG1hLnZhbHVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaFdgXSgjbWF0Y2h3KS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZvbGRXID0gbWF0Y2hXO1xuLyoqXG4gKiBUYWtlcyBhIChsYXp5KSBkZWZhdWx0IHZhbHVlLCBhIGZ1bmN0aW9uLCBhbmQgYW4gYE9wdGlvbmAgdmFsdWUsIGlmIHRoZSBgT3B0aW9uYCB2YWx1ZSBpcyBgTm9uZWAgdGhlIGRlZmF1bHQgdmFsdWUgaXNcbiAqIHJldHVybmVkLCBvdGhlcndpc2UgdGhlIGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gdGhlIHZhbHVlIGluc2lkZSB0aGUgYFNvbWVgIGFuZCB0aGUgcmVzdWx0IGlzIHJldHVybmVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBtYXRjaCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBtYXRjaCgoKSA9PiAnYSBub25lJywgYSA9PiBgYSBzb21lIGNvbnRhaW5pbmcgJHthfWApXG4gKiAgICksXG4gKiAgICdhIHNvbWUgY29udGFpbmluZyAxJ1xuICogKVxuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIG1hdGNoKCgpID0+ICdhIG5vbmUnLCBhID0+IGBhIHNvbWUgY29udGFpbmluZyAke2F9YClcbiAqICAgKSxcbiAqICAgJ2Egbm9uZSdcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoID0gbWF0Y2hXO1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZCA9IG1hdGNoO1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgZ2V0T3JFbHNlYF0oI2dldG9yZWxzZSkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGUgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi42LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPckVsc2VXID0gZnVuY3Rpb24gKG9uTm9uZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBvbk5vbmUoKSA6IG1hLnZhbHVlO1xuICAgIH07XG59O1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgdGhlIGdpdmVuIGRlZmF1bHQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZ2V0T3JFbHNlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGdldE9yRWxzZSgoKSA9PiAwKVxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBnZXRPckVsc2UoKCkgPT4gMClcbiAqICAgKSxcbiAqICAgMFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JFbHNlID0gZ2V0T3JFbHNlVztcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IGNvbXBhY3Q7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTUuMFxuICovXG5leHBvcnQgdmFyIHRhcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBjaGFpbmFibGUudGFwKENoYWluKSk7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBPIGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIEUgZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGNvbnN0IGNvbXB1dGUgPSAodmFsdWU6IG51bWJlcikgPT4gcGlwZShcbiAqICAgTy5vZih2YWx1ZSksXG4gKiAgIE8udGFwRWl0aGVyKCh2YWx1ZSkgPT4gdmFsdWUgPiAwID8gRS5yaWdodCgnb2snKSA6IEUubGVmdCgnZXJyb3InKSksXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wdXRlKDEpLCBPLm9mKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wdXRlKC00MiksIE8ubm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciB0YXBFaXRoZXIgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgdGFwRWl0aGVyXyhGcm9tRWl0aGVyLCBDaGFpbikpO1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBkdXBsaWNhdGUgPSAvKiNfX1BVUkVfXyovIGV4dGVuZChpZGVudGl0eSk7XG4vKipcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVpdGhlcksgPSAvKiNfX1BVUkVfXyovIGZyb21FaXRoZXJLXyhGcm9tRWl0aGVyKTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkVpdGhlcksgPSBcbi8qI19fUFVSRV9fKi8gY2hhaW5FaXRoZXJLXyhGcm9tRWl0aGVyLCBDaGFpbik7XG4vKipcbiAqIEFsaWFzIG9mIGB0YXBFaXRoZXJgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0RWl0aGVySyA9IHRhcEVpdGhlcjtcbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyBgT3B0aW9uYCBmcm9tIGEgbnVsbGFibGUgdHlwZS4gSWYgdGhlIHZhbHVlIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgcmV0dXJucyBgTm9uZWAsIG90aGVyd2lzZVxuICogcmV0dXJucyB0aGUgdmFsdWUgd3JhcHBlZCBpbiBhIGBTb21lYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgZnJvbU51bGxhYmxlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKHVuZGVmaW5lZCksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21OdWxsYWJsZShudWxsKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKDEpLCBzb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbU51bGxhYmxlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChhID09IG51bGwgPyBub25lIDogc29tZShhKSk7IH07XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gZXhjZXB0aW9uIGludG8gYW4gYE9wdGlvbmAuIElmIGBmYCB0aHJvd3MsIHJldHVybnMgYE5vbmVgLCBvdGhlcndpc2UgcmV0dXJucyB0aGUgb3V0cHV0IHdyYXBwZWQgaW4gYVxuICogYFNvbWVgLlxuICpcbiAqIFNlZSBhbHNvIFtgdHJ5Q2F0Y2hLYF0oI3RyeWNhdGNoaykuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIHRyeUNhdGNoIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHRyeUNhdGNoKCgpID0+IHtcbiAqICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICogICB9KSxcbiAqICAgbm9uZVxuICogKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0cnlDYXRjaCgoKSA9PiAxKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW50ZXJvcFxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHJ5Q2F0Y2ggPSBmdW5jdGlvbiAoZikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBzb21lKGYoKSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBub25lO1xuICAgIH1cbn07XG4vKipcbiAqIENvbnZlcnRzIGEgZnVuY3Rpb24gdGhhdCBtYXkgdGhyb3cgdG8gb25lIHJldHVybmluZyBhIGBPcHRpb25gLlxuICpcbiAqIEBjYXRlZ29yeSBpbnRlcm9wXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHJ5Q2F0Y2hLID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYVtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnlDYXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBmLmFwcGx5KHZvaWQgMCwgYSk7IH0pO1xuICAgIH07XG59O1xuLyoqXG4gKiBSZXR1cm5zIGEgKnNtYXJ0IGNvbnN0cnVjdG9yKiBmcm9tIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgbnVsbGFibGUgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZyb21OdWxsYWJsZUssIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgZiA9IChzOiBzdHJpbmcpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICogICBjb25zdCBuID0gcGFyc2VGbG9hdChzKVxuICogICByZXR1cm4gaXNOYU4obikgPyB1bmRlZmluZWQgOiBuXG4gKiB9XG4gKlxuICogY29uc3QgZyA9IGZyb21OdWxsYWJsZUsoZilcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGcoJzEnKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZygnYScpLCBub25lKVxuICpcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tTnVsbGFibGVLID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZsb3coZiwgZnJvbU51bGxhYmxlKTsgfTtcbi8qKlxuICogVGhpcyBpcyBgY2hhaW5gICsgYGZyb21OdWxsYWJsZWAsIHVzZWZ1bCB3aGVuIHdvcmtpbmcgd2l0aCBvcHRpb25hbCB2YWx1ZXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGZyb21OdWxsYWJsZSwgY2hhaW5OdWxsYWJsZUsgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogaW50ZXJmYWNlIEVtcGxveWVlIHtcbiAqICAgcmVhZG9ubHkgY29tcGFueT86IHtcbiAqICAgICByZWFkb25seSBhZGRyZXNzPzoge1xuICogICAgICAgcmVhZG9ubHkgc3RyZWV0Pzoge1xuICogICAgICAgICByZWFkb25seSBuYW1lPzogc3RyaW5nXG4gKiAgICAgICB9XG4gKiAgICAgfVxuICogICB9XG4gKiB9XG4gKlxuICogY29uc3QgZW1wbG95ZWUxOiBFbXBsb3llZSA9IHsgY29tcGFueTogeyBhZGRyZXNzOiB7IHN0cmVldDogeyBuYW1lOiAnaGlnaCBzdHJlZXQnIH0gfSB9IH1cbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIGZyb21OdWxsYWJsZShlbXBsb3llZTEuY29tcGFueSksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoY29tcGFueSA9PiBjb21wYW55LmFkZHJlc3MpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGFkZHJlc3MgPT4gYWRkcmVzcy5zdHJlZXQpLFxuICogICAgIGNoYWluTnVsbGFibGVLKHN0cmVldCA9PiBzdHJlZXQubmFtZSlcbiAqICAgKSxcbiAqICAgc29tZSgnaGlnaCBzdHJlZXQnKVxuICogKVxuICpcbiAqIGNvbnN0IGVtcGxveWVlMjogRW1wbG95ZWUgPSB7IGNvbXBhbnk6IHsgYWRkcmVzczogeyBzdHJlZXQ6IHt9IH0gfSB9XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBmcm9tTnVsbGFibGUoZW1wbG95ZWUyLmNvbXBhbnkpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGNvbXBhbnkgPT4gY29tcGFueS5hZGRyZXNzKSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhhZGRyZXNzID0+IGFkZHJlc3Muc3RyZWV0KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhzdHJlZXQgPT4gc3RyZWV0Lm5hbWUpXG4gKiAgICksXG4gKiAgIG5vbmVcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5OdWxsYWJsZUsgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBub25lIDogZnJvbU51bGxhYmxlKGYobWEudmFsdWUpKTtcbiAgICB9O1xufTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIHZhbHVlIG91dCBvZiB0aGUgc3RydWN0dXJlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSByZXR1cm5zIGBudWxsYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgdG9OdWxsYWJsZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICB0b051bGxhYmxlXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIHRvTnVsbGFibGVcbiAqICAgKSxcbiAqICAgbnVsbFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdG9OdWxsYWJsZSA9IC8qI19fUFVSRV9fKi8gbWF0Y2goY29uc3ROdWxsLCBpZGVudGl0eSk7XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgdG9VbmRlZmluZWQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgdG9VbmRlZmluZWRcbiAqICAgKSxcbiAqICAgMVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgdG9VbmRlZmluZWRcbiAqICAgKSxcbiAqICAgdW5kZWZpbmVkXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0b1VuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gbWF0Y2goY29uc3RVbmRlZmluZWQsIGlkZW50aXR5KTtcbmV4cG9ydCBmdW5jdGlvbiBlbGVtKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEsIG1hKSB7XG4gICAgICAgIGlmIChtYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZWxlbUVfMSA9IGVsZW0oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBlbGVtRV8xKGEsIG1hKTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IGZhbHNlIDogRS5lcXVhbHMoYSwgbWEudmFsdWUpO1xuICAgIH07XG59XG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBwcmVkaWNhdGUgaXMgc2F0aXNmaWVkIGJ5IHRoZSB3cmFwcGVkIHZhbHVlXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGV4aXN0cyB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMClcbiAqICAgKSxcbiAqICAgdHJ1ZVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgZXhpc3RzKG4gPT4gbiA+IDEpXG4gKiAgICksXG4gKiAgIGZhbHNlXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMClcbiAqICAgKSxcbiAqICAgZmFsc2VcbiAqIClcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBleGlzdHMgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IGZhbHNlIDogcHJlZGljYXRlKG1hLnZhbHVlKTtcbiAgICB9O1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBjaGFpbmFibGUuYmluZChDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIEFwVCA9IC8qI19fUFVSRV9fKi8gb2YoXy5lbXB0eVJlYWRvbmx5QXJyYXkpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gYXJyYXkgdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlOb25FbXB0eUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbyA9IGYoMCwgXy5oZWFkKGFzKSk7XG4gICAgICAgIGlmIChpc05vbmUobykpIHtcbiAgICAgICAgICAgIHJldHVybiBub25lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbby52YWx1ZV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvXzEgPSBmKGksIGFzW2ldKTtcbiAgICAgICAgICAgIGlmIChpc05vbmUob18xKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0LnB1c2gob18xLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29tZShvdXQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHZhciBnID0gdHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXgoZik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKF8uaXNOb25FbXB0eShhcykgPyBnKGFzKSA6IEFwVCk7IH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlQXJyYXlXaXRoSW5kZXggPSB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXg7XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2UoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VBcnJheSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3NlcXVlbmNlKEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlQXJyYXkgPSBcbi8qI19fUFVSRV9fKi8gdHJhdmVyc2VBcnJheShpZGVudGl0eSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBsZWdhY3lcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWxpYXMgb2YgYGZsYXRNYXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluID0gZmxhdE1hcDtcbi8qKlxuICogQWxpYXMgb2YgYHRhcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IHRhcDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIGBSZWZpbmVtZW50YCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVmaW5lbWVudChnZXRPcHRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGlzU29tZShnZXRPcHRpb24oYSkpOyB9O1xufVxuLyoqXG4gKiBVc2UgW2BjaGFpbk51bGxhYmxlS2BdKCNjaGFpbm51bGxhYmxlaykgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG1hcE51bGxhYmxlID0gY2hhaW5OdWxsYWJsZUs7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYE8uRnVuY3RvcmAgaW5zdGVhZCBvZiBgTy5vcHRpb25gXG4gKiAod2hlcmUgYE9gIGlzIGZyb20gYGltcG9ydCBPIGZyb20gJ2ZwLXRzL09wdGlvbidgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3B0aW9uID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBvZjogb2YsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICB6ZXJvOiB6ZXJvLFxuICAgIGFsdDogX2FsdCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdCxcbiAgICB0aHJvd0Vycm9yOiB0aHJvd0Vycm9yXG59O1xuLyoqXG4gKiBVc2UgW2BnZXRBcHBseVNlbWlncm91cGBdKC4vQXBwbHkudHMuaHRtbCNnZXRhcHBseXNlbWlncm91cCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEFwcGx5U2VtaWdyb3VwID0gLyojX19QVVJFX18qLyBnZXRBcHBseVNlbWlncm91cF8oQXBwbHkpO1xuLyoqXG4gKiBVc2UgW2BnZXRBcHBsaWNhdGl2ZU1vbm9pZGBdKC4vQXBwbGljYXRpdmUudHMuaHRtbCNnZXRhcHBsaWNhdGl2ZW1vbm9pZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEFwcGx5TW9ub2lkID0gLyojX19QVVJFX18qLyBnZXRBcHBsaWNhdGl2ZU1vbm9pZChBcHBsaWNhdGl2ZSk7XG4vKipcbiAqIFVzZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBmaXJzdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBnZXRNb25vaWQoZmlyc3QoKSlcbiAqIGBgYFxuICpcbiAqIGluc3RlYWQuXG4gKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgbGVmdC1tb3N0IG5vbi1gTm9uZWAgdmFsdWVcbiAqXG4gKiB8IHggICAgICAgfCB5ICAgICAgIHwgY29uY2F0KHgsIHkpIHxcbiAqIHwgLS0tLS0tLSB8IC0tLS0tLS0gfCAtLS0tLS0tLS0tLS0gfFxuICogfCBub25lICAgIHwgbm9uZSAgICB8IG5vbmUgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBub25lICAgIHwgc29tZShhKSAgICAgIHxcbiAqIHwgbm9uZSAgICB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICogfCBzb21lKGEpIHwgc29tZShiKSB8IHNvbWUoYSkgICAgICB8XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEZpcnN0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRGaXJzdE1vbm9pZDxudW1iZXI+KClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgbm9uZSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIG5vbmUpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgc29tZSgyKSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRGaXJzdE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldE1vbm9pZChmaXJzdCgpKTsgfTtcbi8qKlxuICogVXNlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGxhc3QgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogZ2V0TW9ub2lkKGxhc3QoKSlcbiAqIGBgYFxuICpcbiAqIGluc3RlYWQuXG4gKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgcmlnaHQtbW9zdCBub24tYE5vbmVgIHZhbHVlXG4gKlxuICogfCB4ICAgICAgIHwgeSAgICAgICB8IGNvbmNhdCh4LCB5KSB8XG4gKiB8IC0tLS0tLS0gfCAtLS0tLS0tIHwgLS0tLS0tLS0tLS0tIHxcbiAqIHwgbm9uZSAgICB8IG5vbmUgICAgfCBub25lICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgbm9uZSAgICB8IHNvbWUoYSkgICAgICB8XG4gKiB8IG5vbmUgICAgfCBzb21lKGIpIHwgc29tZShiKSAgICAgIHxcbiAqIHwgc29tZShhKSB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRMYXN0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRMYXN0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMikpLCBzb21lKDIpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldExhc3RNb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRNb25vaWQobGFzdCgpKTsgfTtcbiIsCiAgImltcG9ydCB7IGdldEFwcGxpY2F0aXZlTW9ub2lkIH0gZnJvbSAnLi9BcHBsaWNhdGl2ZSc7XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfLCBnZXRBcHBseVNlbWlncm91cCBhcyBnZXRBcHBseVNlbWlncm91cF8gfSBmcm9tICcuL0FwcGx5JztcbmltcG9ydCAqIGFzIGNoYWluYWJsZSBmcm9tICcuL0NoYWluJztcbmltcG9ydCB7IGNoYWluRWl0aGVySyBhcyBjaGFpbkVpdGhlcktfLCBmcm9tRWl0aGVySyBhcyBmcm9tRWl0aGVyS18sIHRhcEVpdGhlciBhcyB0YXBFaXRoZXJfIH0gZnJvbSAnLi9Gcm9tRWl0aGVyJztcbmltcG9ydCB7IGNvbnN0TnVsbCwgY29uc3RVbmRlZmluZWQsIGR1YWwsIGZsb3csIGlkZW50aXR5LCBwaXBlIH0gZnJvbSAnLi9mdW5jdGlvbic7XG5pbXBvcnQgeyBhcyBhcyBhc18sIGFzVW5pdCBhcyBhc1VuaXRfLCBiaW5kVG8gYXMgYmluZFRvXywgZmxhcCBhcyBmbGFwXywgbGV0IGFzIGxldF9fIH0gZnJvbSAnLi9GdW5jdG9yJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnLi9pbnRlcm5hbCc7XG5pbXBvcnQgeyBub3QgfSBmcm9tICcuL1ByZWRpY2F0ZSc7XG5pbXBvcnQgeyBmaXJzdCwgbGFzdCB9IGZyb20gJy4vU2VtaWdyb3VwJztcbmltcG9ydCB7IHNlcGFyYXRlZCB9IGZyb20gJy4vU2VwYXJhdGVkJztcbmltcG9ydCB7IHdpbHREZWZhdWx0LCB3aXRoZXJEZWZhdWx0IH0gZnJvbSAnLi9XaXRoZXJhYmxlJztcbmltcG9ydCB7IGd1YXJkIGFzIGd1YXJkXyB9IGZyb20gJy4vWmVybyc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogYE5vbmVgIGRvZXNuJ3QgaGF2ZSBhIGNvbnN0cnVjdG9yLCBpbnN0ZWFkIHlvdSBjYW4gdXNlIGl0IGRpcmVjdGx5IGFzIGEgdmFsdWUuIFJlcHJlc2VudHMgYSBtaXNzaW5nIHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG5vbmUgPSBfLm5vbmU7XG4vKipcbiAqIENvbnN0cnVjdHMgYSBgU29tZWAuIFJlcHJlc2VudHMgYW4gb3B0aW9uYWwgdmFsdWUgdGhhdCBleGlzdHMuXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc29tZSA9IF8uc29tZTtcbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHJlZGljYXRlKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKHByZWRpY2F0ZShhKSA/IHNvbWUoYSkgOiBub25lKTsgfTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgYExlZnRgIHZhbHVlIG9mIGFuIGBFaXRoZXJgIGlmIHBvc3NpYmxlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRMZWZ0LCBub25lLCBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcmlnaHQsIGxlZnQgfSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRMZWZ0KHJpZ2h0KDEpKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0TGVmdChsZWZ0KCdhJykpLCBzb21lKCdhJykpXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TGVmdCA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKG1hLl90YWcgPT09ICdSaWdodCcgPyBub25lIDogc29tZShtYS5sZWZ0KSk7IH07XG4vKipcbiAqIFJldHVybnMgdGhlIGBSaWdodGAgdmFsdWUgb2YgYW4gYEVpdGhlcmAgaWYgcG9zc2libGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldFJpZ2h0LCBub25lLCBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcmlnaHQsIGxlZnQgfSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRSaWdodChyaWdodCgxKSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldFJpZ2h0KGxlZnQoJ2EnKSksIG5vbmUpXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmlnaHQgPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChtYS5fdGFnID09PSAnTGVmdCcgPyBub25lIDogc29tZShtYS5yaWdodCkpOyB9O1xudmFyIF9tYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIG1hcChmKSk7IH07XG52YXIgX2FwID0gZnVuY3Rpb24gKGZhYiwgZmEpIHsgcmV0dXJuIHBpcGUoZmFiLCBhcChmYSkpOyB9O1xudmFyIF9yZWR1Y2UgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZShiLCBmKSk7IH07XG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbnZhciBfcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0KGIsIGYpKTsgfTtcbnZhciBfdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZUYgPSB0cmF2ZXJzZShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiBwaXBlKHRhLCB0cmF2ZXJzZUYoZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2FsdCA9IGZ1bmN0aW9uIChmYSwgdGhhdCkgeyByZXR1cm4gcGlwZShmYSwgYWx0KHRoYXQpKTsgfTtcbnZhciBfZmlsdGVyID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlcihwcmVkaWNhdGUpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZpbHRlck1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyTWFwKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbiA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbihwcmVkaWNhdGUpKTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9wYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbk1hcChmKSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdPcHRpb24nO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTaG93ID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgc2hvdzogZnVuY3Rpb24gKG1hKSB7IHJldHVybiAoaXNOb25lKG1hKSA/ICdub25lJyA6IFwic29tZShcIi5jb25jYXQoUy5zaG93KG1hLnZhbHVlKSwgXCIpXCIpKTsgfVxufSk7IH07XG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBnZXRFcSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IEUgPSBnZXRFcShOLkVxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKG5vbmUsIG5vbmUpLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKG5vbmUsIHNvbWUoMSkpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBub25lKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgc29tZSgyKSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIHNvbWUoMSkpLCB0cnVlKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldEVxID0gZnVuY3Rpb24gKEUpIHsgcmV0dXJuICh7XG4gICAgZXF1YWxzOiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCA9PT0geSB8fCAoaXNOb25lKHgpID8gaXNOb25lKHkpIDogaXNOb25lKHkpID8gZmFsc2UgOiBFLmVxdWFscyh4LnZhbHVlLCB5LnZhbHVlKSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBUaGUgYE9yZGAgaW5zdGFuY2UgYWxsb3dzIGBPcHRpb25gIHZhbHVlcyB0byBiZSBjb21wYXJlZCB3aXRoXG4gKiBgY29tcGFyZWAsIHdoZW5ldmVyIHRoZXJlIGlzIGFuIGBPcmRgIGluc3RhbmNlIGZvclxuICogdGhlIHR5cGUgdGhlIGBPcHRpb25gIGNvbnRhaW5zLlxuICpcbiAqIGBOb25lYCBpcyBjb25zaWRlcmVkIHRvIGJlIGxlc3MgdGhhbiBhbnkgYFNvbWVgIHZhbHVlLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgZ2V0T3JkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgTyA9IGdldE9yZChOLk9yZClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUobm9uZSwgbm9uZSksIDApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKG5vbmUsIHNvbWUoMSkpLCAtMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoc29tZSgxKSwgbm9uZSksIDEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIHNvbWUoMikpLCAtMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoc29tZSgxKSwgc29tZSgxKSksIDApXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JkID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgZXF1YWxzOiBnZXRFcShPKS5lcXVhbHMsXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuICh4ID09PSB5ID8gMCA6IGlzU29tZSh4KSA/IChpc1NvbWUoeSkgPyBPLmNvbXBhcmUoeC52YWx1ZSwgeS52YWx1ZSkgOiAxKSA6IC0xKTsgfVxufSk7IH07XG4vKipcbiAqIE1vbm9pZCByZXR1cm5pbmcgdGhlIGxlZnQtbW9zdCBub24tYE5vbmVgIHZhbHVlLiBJZiBib3RoIG9wZXJhbmRzIGFyZSBgU29tZWBzIHRoZW4gdGhlIGlubmVyIHZhbHVlcyBhcmVcbiAqIGNvbmNhdGVuYXRlZCB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGBcbiAqXG4gKiB8IHggICAgICAgfCB5ICAgICAgIHwgY29uY2F0KHgsIHkpICAgICAgIHxcbiAqIHwgLS0tLS0tLSB8IC0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0gfFxuICogfCBub25lICAgIHwgbm9uZSAgICB8IG5vbmUgICAgICAgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBub25lICAgIHwgc29tZShhKSAgICAgICAgICAgIHxcbiAqIHwgbm9uZSAgICB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgc29tZShiKSB8IHNvbWUoY29uY2F0KGEsIGIpKSB8XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldE1vbm9pZCwgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IFNlbWlncm91cFN1bSB9IGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBNID0gZ2V0TW9ub2lkKFNlbWlncm91cFN1bSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgbm9uZSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIG5vbmUpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBzb21lKDEpKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgc29tZSgyKSksIHNvbWUoMykpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TW9ub2lkID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gKGlzTm9uZSh4KSA/IHkgOiBpc05vbmUoeSkgPyB4IDogc29tZShTLmNvbmNhdCh4LnZhbHVlLCB5LnZhbHVlKSkpOyB9LFxuICAgIGVtcHR5OiBub25lXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IG5vbmUgOiBzb21lKGYoZmEudmFsdWUpKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3IgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwXG59O1xuLyoqXG4gKiBNYXBzIHRoZSBgU29tZWAgdmFsdWUgb2YgdGhpcyBgT3B0aW9uYCB0byB0aGUgc3BlY2lmaWVkIGNvbnN0YW50IHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgYXMgPSBkdWFsKDIsIGFzXyhGdW5jdG9yKSk7XG4vKipcbiAqIE1hcHMgdGhlIGBTb21lYCB2YWx1ZSBvZiB0aGlzIGBPcHRpb25gIHRvIHRoZSB2b2lkIGNvbnN0YW50IHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgYXNVbml0ID0gYXNVbml0XyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgb2YgPSBzb21lO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgUG9pbnRlZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmdW5jdGlvbiAoZmFiKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYWIpID8gbm9uZSA6IGlzTm9uZShmYSkgPyBub25lIDogc29tZShmYWIudmFsdWUoZmEudmFsdWUpKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbGljYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTQuMFxuICovXG5leHBvcnQgdmFyIGZsYXRNYXAgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgZnVuY3Rpb24gKG1hLCBmKSB7IHJldHVybiAoaXNOb25lKG1hKSA/IG5vbmUgOiBmKG1hLnZhbHVlKSk7IH0pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQ2hhaW4gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIE1vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZSA9IGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IGIgOiBmKGIsIGZhLnZhbHVlKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkTWFwID0gZnVuY3Rpb24gKE0pIHsgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IE0uZW1wdHkgOiBmKGZhLnZhbHVlKTtcbn07IH07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IGIgOiBmKGZhLnZhbHVlLCBiKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBwcm92aWRlZCBgT3B0aW9uYCBgdGhhdGAgaWYgYHNlbGZgIGlzIGBOb25lYCwgb3RoZXJ3aXNlIHJldHVybnMgYHNlbGZgLlxuICpcbiAqIEBwYXJhbSBzZWxmIC0gVGhlIGZpcnN0IGBPcHRpb25gIHRvIGJlIGNoZWNrZWQuXG4gKiBAcGFyYW0gdGhhdCAtIFRoZSBgT3B0aW9uYCB0byByZXR1cm4gaWYgYHNlbGZgIGlzIGBOb25lYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTyBmcm9tIFwiZnAtdHMvT3B0aW9uXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8ubm9uZSwgKCkgPT4gTy5ub25lKSwgTy5ub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLnNvbWUoMSksICgpID0+IE8ubm9uZSksIE8uc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5ub25lLCAoKSA9PiBPLnNvbWUoJ2InKSksIE8uc29tZSgnYicpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLnNvbWUoMSksICgpID0+IE8uc29tZSgnYicpKSwgTy5zb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIG9yRWxzZSA9IGR1YWwoMiwgZnVuY3Rpb24gKHNlbGYsIHRoYXQpIHsgcmV0dXJuIChpc05vbmUoc2VsZikgPyB0aGF0KCkgOiBzZWxmKTsgfSk7XG4vKipcbiAqIEFsaWFzIG9mIGBvckVsc2VgLlxuICpcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGFsdFcgPSBvckVsc2U7XG4vKipcbiAqIEFsaWFzIG9mIGBvckVsc2VgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFsdCA9IG9yRWxzZTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQWx0ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhbHQ6IF9hbHRcbn07XG4vKipcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIHplcm8gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBub25lOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgWmVybyA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICB6ZXJvOiB6ZXJvXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBndWFyZCA9IC8qI19fUFVSRV9fKi8gZ3VhcmRfKFplcm8sIFBvaW50ZWQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBbHRlcm5hdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgYWx0OiBfYWx0LFxuICAgIHplcm86IHplcm9cbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGV4dGVuZCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAod2EpIHtcbiAgICByZXR1cm4gaXNOb25lKHdhKSA/IG5vbmUgOiBzb21lKGYod2EpKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEV4dGVuZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb21wYWN0ID0gLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbnZhciBkZWZhdWx0U2VwYXJhdGVkID0gLyojX19QVVJFX18qLyBzZXBhcmF0ZWQobm9uZSwgbm9uZSk7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNlcGFyYXRlID0gZnVuY3Rpb24gKG1hKSB7XG4gICAgcmV0dXJuIGlzTm9uZShtYSkgPyBkZWZhdWx0U2VwYXJhdGVkIDogc2VwYXJhdGVkKGdldExlZnQobWEudmFsdWUpLCBnZXRSaWdodChtYS52YWx1ZSkpO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29tcGFjdGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGVcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUoZmEpID8gbm9uZSA6IHByZWRpY2F0ZShmYS52YWx1ZSkgPyBmYSA6IG5vbmU7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlck1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IG5vbmUgOiBmKGZhLnZhbHVlKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbiA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQoX2ZpbHRlcihmYSwgbm90KHByZWRpY2F0ZSkpLCBfZmlsdGVyKGZhLCBwcmVkaWNhdGUpKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZsb3cobWFwKGYpLCBzZXBhcmF0ZSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzTm9uZSh0YSkgPyBGLm9mKG5vbmUpIDogRi5tYXAoZih0YS52YWx1ZSksIHNvbWUpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgc2VxdWVuY2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZSh0YSkgPyBGLm9mKG5vbmUpIDogRi5tYXAodGEudmFsdWUsIHNvbWUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2Vcbn07XG52YXIgX3dpdGhlciA9IC8qI19fUFVSRV9fKi8gd2l0aGVyRGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xudmFyIF93aWx0ID0gLyojX19QVVJFX18qLyB3aWx0RGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aXRoZXIgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciBfd2l0aGVyRiA9IF93aXRoZXIoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIF93aXRoZXJGKGZhLCBmKTsgfTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpbHQgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciBfd2lsdEYgPSBfd2lsdChGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3dpbHRGKGZhLCBmKTsgfTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIFdpdGhlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4vKipcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIHRocm93RXJyb3IgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBub25lOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZFRocm93ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICB0aHJvd0Vycm9yOiB0aHJvd0Vycm9yXG59O1xuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGBFaXRoZXJgIHRvIGFuIGBPcHRpb25gIGRpc2NhcmRpbmcgdGhlIGVycm9yLlxuICpcbiAqIEFsaWFzIG9mIFtnZXRSaWdodF0oI2dldHJpZ2h0KVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVpdGhlciA9IGdldFJpZ2h0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgRnJvbUVpdGhlciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBmcm9tRWl0aGVyOiBmcm9tRWl0aGVyXG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gcmVmaW5lbWVudHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9wdGlvbiBpcyBhbiBpbnN0YW5jZSBvZiBgU29tZWAsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBpc1NvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzU29tZShzb21lKDEpKSwgdHJ1ZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc1NvbWUobm9uZSksIGZhbHNlKVxuICpcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgaXNTb21lID0gXy5pc1NvbWU7XG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBvcHRpb24gaXMgYE5vbmVgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgaXNOb25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc05vbmUoc29tZSgxKSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzTm9uZShub25lKSwgdHJ1ZSlcbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGlzTm9uZSA9IGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZmEuX3RhZyA9PT0gJ05vbmUnOyB9O1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgbWF0Y2hgXSgjbWF0Y2gpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBoYW5kbGVyIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoVyA9IGZ1bmN0aW9uIChvbk5vbmUsIG9uU29tZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBvbk5vbmUoKSA6IG9uU29tZShtYS52YWx1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEFsaWFzIG9mIFtgbWF0Y2hXYF0oI21hdGNodykuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkVyA9IG1hdGNoVztcbi8qKlxuICogVGFrZXMgYSAobGF6eSkgZGVmYXVsdCB2YWx1ZSwgYSBmdW5jdGlvbiwgYW5kIGFuIGBPcHRpb25gIHZhbHVlLCBpZiB0aGUgYE9wdGlvbmAgdmFsdWUgaXMgYE5vbmVgIHRoZSBkZWZhdWx0IHZhbHVlIGlzXG4gKiByZXR1cm5lZCwgb3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSB2YWx1ZSBpbnNpZGUgdGhlIGBTb21lYCBhbmQgdGhlIHJlc3VsdCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgbWF0Y2ggfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgbWF0Y2goKCkgPT4gJ2Egbm9uZScsIGEgPT4gYGEgc29tZSBjb250YWluaW5nICR7YX1gKVxuICogICApLFxuICogICAnYSBzb21lIGNvbnRhaW5pbmcgMSdcbiAqIClcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBtYXRjaCgoKSA9PiAnYSBub25lJywgYSA9PiBgYSBzb21lIGNvbnRhaW5pbmcgJHthfWApXG4gKiAgICksXG4gKiAgICdhIG5vbmUnXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaCA9IG1hdGNoVztcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaGBdKCNtYXRjaCkuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBtYXRjaDtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGdldE9yRWxzZWBdKCNnZXRvcmVsc2UpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBoYW5kbGVyIHJldHVybiB0eXBlIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JFbHNlVyA9IGZ1bmN0aW9uIChvbk5vbmUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gb25Ob25lKCkgOiBtYS52YWx1ZTtcbiAgICB9O1xufTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIHZhbHVlIG91dCBvZiB0aGUgc3RydWN0dXJlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSByZXR1cm5zIHRoZSBnaXZlbiBkZWZhdWx0IHZhbHVlXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGdldE9yRWxzZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBnZXRPckVsc2UoKCkgPT4gMClcbiAqICAgKSxcbiAqICAgMVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgZ2V0T3JFbHNlKCgpID0+IDApXG4gKiAgICksXG4gKiAgIDBcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE9yRWxzZSA9IGdldE9yRWxzZVc7XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhcCA9IC8qI19fUFVSRV9fKi8gZmxhcF8oRnVuY3Rvcik7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBGaXJzdCA9IC8qI19fUFVSRV9fKi8gYXBGaXJzdF8oQXBwbHkpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIHNlY29uZC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcFNlY29uZCA9IC8qI19fUFVSRV9fKi8gYXBTZWNvbmRfKEFwcGx5KTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZsYXR0ZW4gPSBjb21wYWN0O1xuLyoqXG4gKiBDb21wb3NlcyBjb21wdXRhdGlvbnMgaW4gc2VxdWVuY2UsIHVzaW5nIHRoZSByZXR1cm4gdmFsdWUgb2Ygb25lIGNvbXB1dGF0aW9uIHRvIGRldGVybWluZSB0aGUgbmV4dCBjb21wdXRhdGlvbiBhbmRcbiAqIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjE1LjBcbiAqL1xuZXhwb3J0IHZhciB0YXAgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgY2hhaW5hYmxlLnRhcChDaGFpbikpO1xuLyoqXG4gKiBDb21wb3NlcyBjb21wdXRhdGlvbnMgaW4gc2VxdWVuY2UsIHVzaW5nIHRoZSByZXR1cm4gdmFsdWUgb2Ygb25lIGNvbXB1dGF0aW9uIHRvIGRldGVybWluZSB0aGUgbmV4dCBjb21wdXRhdGlvbiBhbmRcbiAqIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICogaW1wb3J0ICogYXMgTyBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBFIGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBjb25zdCBjb21wdXRlID0gKHZhbHVlOiBudW1iZXIpID0+IHBpcGUoXG4gKiAgIE8ub2YodmFsdWUpLFxuICogICBPLnRhcEVpdGhlcigodmFsdWUpID0+IHZhbHVlID4gMCA/IEUucmlnaHQoJ29rJykgOiBFLmxlZnQoJ2Vycm9yJykpLFxuICogKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcHV0ZSgxKSwgTy5vZigxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcHV0ZSgtNDIpLCBPLm5vbmUpXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgdGFwRWl0aGVyID0gLyojX19QVVJFX18qLyBkdWFsKDIsIHRhcEVpdGhlcl8oRnJvbUVpdGhlciwgQ2hhaW4pKTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZHVwbGljYXRlID0gLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGZyb21FaXRoZXJLID0gLyojX19QVVJFX18qLyBmcm9tRWl0aGVyS18oRnJvbUVpdGhlcik7XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5FaXRoZXJLID0gXG4vKiNfX1BVUkVfXyovIGNoYWluRWl0aGVyS18oRnJvbUVpdGhlciwgQ2hhaW4pO1xuLyoqXG4gKiBBbGlhcyBvZiBgdGFwRWl0aGVyYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4xMi4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdEVpdGhlcksgPSB0YXBFaXRoZXI7XG4vKipcbiAqIENvbnN0cnVjdHMgYSBuZXcgYE9wdGlvbmAgZnJvbSBhIG51bGxhYmxlIHR5cGUuIElmIHRoZSB2YWx1ZSBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIHJldHVybnMgYE5vbmVgLCBvdGhlcndpc2VcbiAqIHJldHVybnMgdGhlIHZhbHVlIHdyYXBwZWQgaW4gYSBgU29tZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGZyb21OdWxsYWJsZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21OdWxsYWJsZSh1bmRlZmluZWQpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUobnVsbCksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21OdWxsYWJsZSgxKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZyb21OdWxsYWJsZSA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoYSA9PSBudWxsID8gbm9uZSA6IHNvbWUoYSkpOyB9O1xuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGV4Y2VwdGlvbiBpbnRvIGFuIGBPcHRpb25gLiBJZiBgZmAgdGhyb3dzLCByZXR1cm5zIGBOb25lYCwgb3RoZXJ3aXNlIHJldHVybnMgdGhlIG91dHB1dCB3cmFwcGVkIGluIGFcbiAqIGBTb21lYC5cbiAqXG4gKiBTZWUgYWxzbyBbYHRyeUNhdGNoS2BdKCN0cnljYXRjaGspLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCB0cnlDYXRjaCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICB0cnlDYXRjaCgoKSA9PiB7XG4gKiAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAqICAgfSksXG4gKiAgIG5vbmVcbiAqIClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodHJ5Q2F0Y2goKCkgPT4gMSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGludGVyb3BcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRyeUNhdGNoID0gZnVuY3Rpb24gKGYpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gc29tZShmKCkpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gbm9uZTtcbiAgICB9XG59O1xuLyoqXG4gKiBDb252ZXJ0cyBhIGZ1bmN0aW9uIHRoYXQgbWF5IHRocm93IHRvIG9uZSByZXR1cm5pbmcgYSBgT3B0aW9uYC5cbiAqXG4gKiBAY2F0ZWdvcnkgaW50ZXJvcFxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHRyeUNhdGNoSyA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ5Q2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gZi5hcHBseSh2b2lkIDAsIGEpOyB9KTtcbiAgICB9O1xufTtcbi8qKlxuICogUmV0dXJucyBhICpzbWFydCBjb25zdHJ1Y3RvciogZnJvbSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIG51bGxhYmxlIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmcm9tTnVsbGFibGVLLCBub25lLCBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IGYgPSAoczogc3RyaW5nKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAqICAgY29uc3QgbiA9IHBhcnNlRmxvYXQocylcbiAqICAgcmV0dXJuIGlzTmFOKG4pID8gdW5kZWZpbmVkIDogblxuICogfVxuICpcbiAqIGNvbnN0IGcgPSBmcm9tTnVsbGFibGVLKGYpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnKCcxJyksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGcoJ2EnKSwgbm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbU51bGxhYmxlSyA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmbG93KGYsIGZyb21OdWxsYWJsZSk7IH07XG4vKipcbiAqIFRoaXMgaXMgYGNoYWluYCArIGBmcm9tTnVsbGFibGVgLCB1c2VmdWwgd2hlbiB3b3JraW5nIHdpdGggb3B0aW9uYWwgdmFsdWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBmcm9tTnVsbGFibGUsIGNoYWluTnVsbGFibGVLIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBFbXBsb3llZSB7XG4gKiAgIHJlYWRvbmx5IGNvbXBhbnk/OiB7XG4gKiAgICAgcmVhZG9ubHkgYWRkcmVzcz86IHtcbiAqICAgICAgIHJlYWRvbmx5IHN0cmVldD86IHtcbiAqICAgICAgICAgcmVhZG9ubHkgbmFtZT86IHN0cmluZ1xuICogICAgICAgfVxuICogICAgIH1cbiAqICAgfVxuICogfVxuICpcbiAqIGNvbnN0IGVtcGxveWVlMTogRW1wbG95ZWUgPSB7IGNvbXBhbnk6IHsgYWRkcmVzczogeyBzdHJlZXQ6IHsgbmFtZTogJ2hpZ2ggc3RyZWV0JyB9IH0gfSB9XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBmcm9tTnVsbGFibGUoZW1wbG95ZWUxLmNvbXBhbnkpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGNvbXBhbnkgPT4gY29tcGFueS5hZGRyZXNzKSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhhZGRyZXNzID0+IGFkZHJlc3Muc3RyZWV0KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhzdHJlZXQgPT4gc3RyZWV0Lm5hbWUpXG4gKiAgICksXG4gKiAgIHNvbWUoJ2hpZ2ggc3RyZWV0JylcbiAqIClcbiAqXG4gKiBjb25zdCBlbXBsb3llZTI6IEVtcGxveWVlID0geyBjb21wYW55OiB7IGFkZHJlc3M6IHsgc3RyZWV0OiB7fSB9IH0gfVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgZnJvbU51bGxhYmxlKGVtcGxveWVlMi5jb21wYW55KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhjb21wYW55ID0+IGNvbXBhbnkuYWRkcmVzcyksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoYWRkcmVzcyA9PiBhZGRyZXNzLnN0cmVldCksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoc3RyZWV0ID0+IHN0cmVldC5uYW1lKVxuICogICApLFxuICogICBub25lXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGNoYWluTnVsbGFibGVLID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gbm9uZSA6IGZyb21OdWxsYWJsZShmKG1hLnZhbHVlKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyBgbnVsbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIHRvTnVsbGFibGUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgdG9OdWxsYWJsZVxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICB0b051bGxhYmxlXG4gKiAgICksXG4gKiAgIG51bGxcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRvTnVsbGFibGUgPSAvKiNfX1BVUkVfXyovIG1hdGNoKGNvbnN0TnVsbCwgaWRlbnRpdHkpO1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgYHVuZGVmaW5lZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIHRvVW5kZWZpbmVkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIHRvVW5kZWZpbmVkXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIHRvVW5kZWZpbmVkXG4gKiAgICksXG4gKiAgIHVuZGVmaW5lZFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdG9VbmRlZmluZWQgPSAvKiNfX1BVUkVfXyovIG1hdGNoKGNvbnN0VW5kZWZpbmVkLCBpZGVudGl0eSk7XG5leHBvcnQgZnVuY3Rpb24gZWxlbShFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBtYSkge1xuICAgICAgICBpZiAobWEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGVsZW1FXzEgPSBlbGVtKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gZWxlbUVfMShhLCBtYSk7IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBmYWxzZSA6IEUuZXF1YWxzKGEsIG1hLnZhbHVlKTtcbiAgICB9O1xufVxuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgcHJlZGljYXRlIGlzIHNhdGlzZmllZCBieSB0aGUgd3JhcHBlZCB2YWx1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBleGlzdHMgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgZXhpc3RzKG4gPT4gbiA+IDApXG4gKiAgICksXG4gKiAgIHRydWVcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAxKVxuICogICApLFxuICogICBmYWxzZVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgZXhpc3RzKG4gPT4gbiA+IDApXG4gKiAgICksXG4gKiAgIGZhbHNlXG4gKiApXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXhpc3RzID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBmYWxzZSA6IHByZWRpY2F0ZShtYS52YWx1ZSk7XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkbyBub3RhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIERvID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVjb3JkKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kVG8gPSAvKiNfX1BVUkVfXyovIGJpbmRUb18oRnVuY3Rvcik7XG52YXIgbGV0XyA9IC8qI19fUFVSRV9fKi8gbGV0X18oRnVuY3Rvcik7XG5leHBvcnQgeyBcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMy4wXG4gKi9cbmxldF8gYXMgbGV0IH07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZCA9IC8qI19fUFVSRV9fKi8gY2hhaW5hYmxlLmJpbmQoQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGFwUyA9IC8qI19fUFVSRV9fKi8gYXBTXyhBcHBseSk7XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBBcFQgPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWFkb25seUFycmF5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGFycmF5IHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5Tm9uRW1wdHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG8gPSBmKDAsIF8uaGVhZChhcykpO1xuICAgICAgICBpZiAoaXNOb25lKG8pKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9uZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gW28udmFsdWVdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgb18xID0gZihpLCBhc1tpXSk7XG4gICAgICAgICAgICBpZiAoaXNOb25lKG9fMSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dC5wdXNoKG9fMS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvbWUob3V0KTtcbiAgICB9O1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICB2YXIgZyA9IHRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4KGYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChfLmlzTm9uRW1wdHkoYXMpID8gZyhhcykgOiBBcFQpOyB9O1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZUFycmF5V2l0aEluZGV4ID0gdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlKEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlQXJyYXkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSNzZXF1ZW5jZShBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBzZXF1ZW5jZUFycmF5ID0gXG4vKiNfX1BVUkVfXyovIHRyYXZlcnNlQXJyYXkoaWRlbnRpdHkpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG4vKipcbiAqIEFsaWFzIG9mIGB0YXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRmlyc3QgPSB0YXA7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFVzZSBgUmVmaW5lbWVudGAgbW9kdWxlIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZmluZW1lbnQoZ2V0T3B0aW9uKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBpc1NvbWUoZ2V0T3B0aW9uKGEpKTsgfTtcbn1cbi8qKlxuICogVXNlIFtgY2hhaW5OdWxsYWJsZUtgXSgjY2hhaW5udWxsYWJsZWspIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBtYXBOdWxsYWJsZSA9IGNoYWluTnVsbGFibGVLO1xuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYEZ1bmN0b3JgIGluc3RhbmNlLCBwYXNzIGBPLkZ1bmN0b3JgIGluc3RlYWQgb2YgYE8ub3B0aW9uYFxuICogKHdoZXJlIGBPYCBpcyBmcm9tIGBpbXBvcnQgTyBmcm9tICdmcC10cy9PcHRpb24nYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG9wdGlvbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgemVybzogemVybyxcbiAgICBhbHQ6IF9hbHQsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHQsXG4gICAgdGhyb3dFcnJvcjogdGhyb3dFcnJvclxufTtcbi8qKlxuICogVXNlIFtgZ2V0QXBwbHlTZW1pZ3JvdXBgXSguL0FwcGx5LnRzLmh0bWwjZ2V0YXBwbHlzZW1pZ3JvdXApIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRBcHBseVNlbWlncm91cCA9IC8qI19fUFVSRV9fKi8gZ2V0QXBwbHlTZW1pZ3JvdXBfKEFwcGx5KTtcbi8qKlxuICogVXNlIFtgZ2V0QXBwbGljYXRpdmVNb25vaWRgXSguL0FwcGxpY2F0aXZlLnRzLmh0bWwjZ2V0YXBwbGljYXRpdmVtb25vaWQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRBcHBseU1vbm9pZCA9IC8qI19fUFVSRV9fKi8gZ2V0QXBwbGljYXRpdmVNb25vaWQoQXBwbGljYXRpdmUpO1xuLyoqXG4gKiBVc2VcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZmlyc3QgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogZ2V0TW9ub2lkKGZpcnN0KCkpXG4gKiBgYGBcbiAqXG4gKiBpbnN0ZWFkLlxuICpcbiAqIE1vbm9pZCByZXR1cm5pbmcgdGhlIGxlZnQtbW9zdCBub24tYE5vbmVgIHZhbHVlXG4gKlxuICogfCB4ICAgICAgIHwgeSAgICAgICB8IGNvbmNhdCh4LCB5KSB8XG4gKiB8IC0tLS0tLS0gfCAtLS0tLS0tIHwgLS0tLS0tLS0tLS0tIHxcbiAqIHwgbm9uZSAgICB8IG5vbmUgICAgfCBub25lICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgbm9uZSAgICB8IHNvbWUoYSkgICAgICB8XG4gKiB8IG5vbmUgICAgfCBzb21lKGIpIHwgc29tZShiKSAgICAgIHxcbiAqIHwgc29tZShhKSB8IHNvbWUoYikgfCBzb21lKGEpICAgICAgfFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRGaXJzdE1vbm9pZCwgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBjb25zdCBNID0gZ2V0Rmlyc3RNb25vaWQ8bnVtYmVyPigpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIG5vbmUpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBub25lKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgc29tZSgyKSksIHNvbWUoMikpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIHNvbWUoMikpLCBzb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rmlyc3RNb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRNb25vaWQoZmlyc3QoKSk7IH07XG4vKipcbiAqIFVzZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBsYXN0IH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGdldE1vbm9pZChsYXN0KCkpXG4gKiBgYGBcbiAqXG4gKiBpbnN0ZWFkLlxuICpcbiAqIE1vbm9pZCByZXR1cm5pbmcgdGhlIHJpZ2h0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZVxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShiKSAgICAgIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TGFzdE1vbm9pZCwgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBjb25zdCBNID0gZ2V0TGFzdE1vbm9pZDxudW1iZXI+KClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgbm9uZSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIG5vbmUpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgc29tZSgyKSksIHNvbWUoMikpXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRMYXN0TW9ub2lkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0TW9ub2lkKGxhc3QoKSk7IH07XG4iLAogICJpbXBvcnQgeyBnZXRBcHBsaWNhdGl2ZU1vbm9pZCB9IGZyb20gJy4vQXBwbGljYXRpdmUnO1xuaW1wb3J0IHsgYXBGaXJzdCBhcyBhcEZpcnN0XywgYXBTIGFzIGFwU18sIGFwU2Vjb25kIGFzIGFwU2Vjb25kXywgZ2V0QXBwbHlTZW1pZ3JvdXAgYXMgZ2V0QXBwbHlTZW1pZ3JvdXBfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgKiBhcyBjaGFpbmFibGUgZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBjaGFpbkVpdGhlcksgYXMgY2hhaW5FaXRoZXJLXywgZnJvbUVpdGhlcksgYXMgZnJvbUVpdGhlcktfLCB0YXBFaXRoZXIgYXMgdGFwRWl0aGVyXyB9IGZyb20gJy4vRnJvbUVpdGhlcic7XG5pbXBvcnQgeyBjb25zdE51bGwsIGNvbnN0VW5kZWZpbmVkLCBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgYXMgYXMgYXNfLCBhc1VuaXQgYXMgYXNVbml0XywgYmluZFRvIGFzIGJpbmRUb18sIGZsYXAgYXMgZmxhcF8sIGxldCBhcyBsZXRfXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0IHsgbm90IH0gZnJvbSAnLi9QcmVkaWNhdGUnO1xuaW1wb3J0IHsgZmlyc3QsIGxhc3QgfSBmcm9tICcuL1NlbWlncm91cCc7XG5pbXBvcnQgeyBzZXBhcmF0ZWQgfSBmcm9tICcuL1NlcGFyYXRlZCc7XG5pbXBvcnQgeyB3aWx0RGVmYXVsdCwgd2l0aGVyRGVmYXVsdCB9IGZyb20gJy4vV2l0aGVyYWJsZSc7XG5pbXBvcnQgeyBndWFyZCBhcyBndWFyZF8gfSBmcm9tICcuL1plcm8nO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29uc3RydWN0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIGBOb25lYCBkb2Vzbid0IGhhdmUgYSBjb25zdHJ1Y3RvciwgaW5zdGVhZCB5b3UgY2FuIHVzZSBpdCBkaXJlY3RseSBhcyBhIHZhbHVlLiBSZXByZXNlbnRzIGEgbWlzc2luZyB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBub25lID0gXy5ub25lO1xuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgYFNvbWVgLiBSZXByZXNlbnRzIGFuIG9wdGlvbmFsIHZhbHVlIHRoYXQgZXhpc3RzLlxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNvbWUgPSBfLnNvbWU7XG5leHBvcnQgZnVuY3Rpb24gZnJvbVByZWRpY2F0ZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChwcmVkaWNhdGUoYSkgPyBzb21lKGEpIDogbm9uZSk7IH07XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGBMZWZ0YCB2YWx1ZSBvZiBhbiBgRWl0aGVyYCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TGVmdCwgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHJpZ2h0LCBsZWZ0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0TGVmdChyaWdodCgxKSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldExlZnQobGVmdCgnYScpKSwgc29tZSgnYScpKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldExlZnQgPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChtYS5fdGFnID09PSAnUmlnaHQnID8gbm9uZSA6IHNvbWUobWEubGVmdCkpOyB9O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBgUmlnaHRgIHZhbHVlIG9mIGFuIGBFaXRoZXJgIGlmIHBvc3NpYmxlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRSaWdodCwgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHJpZ2h0LCBsZWZ0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0UmlnaHQocmlnaHQoMSkpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRSaWdodChsZWZ0KCdhJykpLCBub25lKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldFJpZ2h0ID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAobWEuX3RhZyA9PT0gJ0xlZnQnID8gbm9uZSA6IHNvbWUobWEucmlnaHQpKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbnZhciBfcmVkdWNlID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2UoYiwgZikpOyB9O1xudmFyIF9mb2xkTWFwID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcE0gPSBmb2xkTWFwKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBNKGYpKTsgfTtcbn07XG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG52YXIgX3RyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VGKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9hbHQgPSBmdW5jdGlvbiAoZmEsIHRoYXQpIHsgcmV0dXJuIHBpcGUoZmEsIGFsdCh0aGF0KSk7IH07XG52YXIgX2ZpbHRlciA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXIocHJlZGljYXRlKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9maWx0ZXJNYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlck1hcChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9leHRlbmQgPSBmdW5jdGlvbiAod2EsIGYpIHsgcmV0dXJuIHBpcGUod2EsIGV4dGVuZChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9wYXJ0aXRpb24gPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb24ocHJlZGljYXRlKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25NYXAoZikpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBVUkkgPSAnT3B0aW9uJztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U2hvdyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIHNob3c6IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKGlzTm9uZShtYSkgPyAnbm9uZScgOiBcInNvbWUoXCIuY29uY2F0KFMuc2hvdyhtYS52YWx1ZSksIFwiKVwiKSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgZ2V0RXEgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBFID0gZ2V0RXEoTi5FcSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhub25lLCBub25lKSwgdHJ1ZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhub25lLCBzb21lKDEpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgbm9uZSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIHNvbWUoMikpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBzb21lKDEpKSwgdHJ1ZSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRFcSA9IGZ1bmN0aW9uIChFKSB7IHJldHVybiAoe1xuICAgIGVxdWFsczogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggPT09IHkgfHwgKGlzTm9uZSh4KSA/IGlzTm9uZSh5KSA6IGlzTm9uZSh5KSA/IGZhbHNlIDogRS5lcXVhbHMoeC52YWx1ZSwgeS52YWx1ZSkpOyB9XG59KTsgfTtcbi8qKlxuICogVGhlIGBPcmRgIGluc3RhbmNlIGFsbG93cyBgT3B0aW9uYCB2YWx1ZXMgdG8gYmUgY29tcGFyZWQgd2l0aFxuICogYGNvbXBhcmVgLCB3aGVuZXZlciB0aGVyZSBpcyBhbiBgT3JkYCBpbnN0YW5jZSBmb3JcbiAqIHRoZSB0eXBlIHRoZSBgT3B0aW9uYCBjb250YWlucy5cbiAqXG4gKiBgTm9uZWAgaXMgY29uc2lkZXJlZCB0byBiZSBsZXNzIHRoYW4gYW55IGBTb21lYCB2YWx1ZS5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGdldE9yZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE8gPSBnZXRPcmQoTi5PcmQpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKG5vbmUsIG5vbmUpLCAwKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShub25lLCBzb21lKDEpKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIG5vbmUpLCAxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBzb21lKDIpKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIHNvbWUoMSkpLCAwKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE9yZCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIGVxdWFsczogZ2V0RXEoTykuZXF1YWxzLFxuICAgIGNvbXBhcmU6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiAoeCA9PT0geSA/IDAgOiBpc1NvbWUoeCkgPyAoaXNTb21lKHkpID8gTy5jb21wYXJlKHgudmFsdWUsIHkudmFsdWUpIDogMSkgOiAtMSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSBsZWZ0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZS4gSWYgYm90aCBvcGVyYW5kcyBhcmUgYFNvbWVgcyB0aGVuIHRoZSBpbm5lciB2YWx1ZXMgYXJlXG4gKiBjb25jYXRlbmF0ZWQgdXNpbmcgdGhlIHByb3ZpZGVkIGBTZW1pZ3JvdXBgXG4gKlxuICogfCB4ICAgICAgIHwgeSAgICAgICB8IGNvbmNhdCh4LCB5KSAgICAgICB8XG4gKiB8IC0tLS0tLS0gfCAtLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tIHxcbiAqIHwgbm9uZSAgICB8IG5vbmUgICAgfCBub25lICAgICAgICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgbm9uZSAgICB8IHNvbWUoYSkgICAgICAgICAgICB8XG4gKiB8IG5vbmUgICAgfCBzb21lKGIpIHwgc29tZShiKSAgICAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IHNvbWUoYikgfCBzb21lKGNvbmNhdChhLCBiKSkgfFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgTSA9IGdldE1vbm9pZChTZW1pZ3JvdXBTdW0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIG5vbmUpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBub25lKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgc29tZSgxKSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIHNvbWUoMikpLCBzb21lKDMpKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIChpc05vbmUoeCkgPyB5IDogaXNOb25lKHkpID8geCA6IHNvbWUoUy5jb25jYXQoeC52YWx1ZSwgeS52YWx1ZSkpKTsgfSxcbiAgICBlbXB0eTogbm9uZVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogc29tZShmKGZhLnZhbHVlKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogTWFwcyB0aGUgYFNvbWVgIHZhbHVlIG9mIHRoaXMgYE9wdGlvbmAgdG8gdGhlIHNwZWNpZmllZCBjb25zdGFudCB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIGFzID0gZHVhbCgyLCBhc18oRnVuY3RvcikpO1xuLyoqXG4gKiBNYXBzIHRoZSBgU29tZWAgdmFsdWUgb2YgdGhpcyBgT3B0aW9uYCB0byB0aGUgdm9pZCBjb25zdGFudCB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIGFzVW5pdCA9IGFzVW5pdF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIG9mID0gc29tZTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcCA9IGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZnVuY3Rpb24gKGZhYikge1xuICAgIHJldHVybiBpc05vbmUoZmFiKSA/IG5vbmUgOiBpc05vbmUoZmEpID8gbm9uZSA6IHNvbWUoZmFiLnZhbHVlKGZhLnZhbHVlKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbHkgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFwcGxpY2F0aXZlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjE0LjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0TWFwID0gLyojX19QVVJFX18qLyBkdWFsKDIsIGZ1bmN0aW9uIChtYSwgZikgeyByZXR1cm4gKGlzTm9uZShtYSkgPyBub25lIDogZihtYS52YWx1ZSkpOyB9KTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIENoYWluID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2UgPSBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBiIDogZihiLCBmYS52YWx1ZSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7IHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBNLmVtcHR5IDogZihmYS52YWx1ZSk7XG59OyB9OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBiIDogZihmYS52YWx1ZSwgYik7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodFxufTtcbi8qKlxuICogUmV0dXJucyB0aGUgcHJvdmlkZWQgYE9wdGlvbmAgYHRoYXRgIGlmIGBzZWxmYCBpcyBgTm9uZWAsIG90aGVyd2lzZSByZXR1cm5zIGBzZWxmYC5cbiAqXG4gKiBAcGFyYW0gc2VsZiAtIFRoZSBmaXJzdCBgT3B0aW9uYCB0byBiZSBjaGVja2VkLlxuICogQHBhcmFtIHRoYXQgLSBUaGUgYE9wdGlvbmAgdG8gcmV0dXJuIGlmIGBzZWxmYCBpcyBgTm9uZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE8gZnJvbSBcImZwLXRzL09wdGlvblwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLm5vbmUsICgpID0+IE8ubm9uZSksIE8ubm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5zb21lKDEpLCAoKSA9PiBPLm5vbmUpLCBPLnNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8ubm9uZSwgKCkgPT4gTy5zb21lKCdiJykpLCBPLnNvbWUoJ2InKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5zb21lKDEpLCAoKSA9PiBPLnNvbWUoJ2InKSksIE8uc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBvckVsc2UgPSBkdWFsKDIsIGZ1bmN0aW9uIChzZWxmLCB0aGF0KSB7IHJldHVybiAoaXNOb25lKHNlbGYpID8gdGhhdCgpIDogc2VsZik7IH0pO1xuLyoqXG4gKiBBbGlhcyBvZiBgb3JFbHNlYC5cbiAqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgYWx0YF0oI2FsdCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gb3JFbHNlO1xuLyoqXG4gKiBBbGlhcyBvZiBgb3JFbHNlYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhbHQgPSBvckVsc2U7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciB6ZXJvID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9uZTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFplcm8gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ3VhcmQgPSAvKiNfX1BVUkVfXyovIGd1YXJkXyhaZXJvLCBQb2ludGVkKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQWx0ZXJuYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFsdDogX2FsdCxcbiAgICB6ZXJvOiB6ZXJvXG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHdhKSB7XG4gICAgcmV0dXJuIGlzTm9uZSh3YSkgPyBub25lIDogc29tZShmKHdhKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBFeHRlbmQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGV4dGVuZDogX2V4dGVuZFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29tcGFjdCA9IC8qI19fUFVSRV9fKi8gZmxhdE1hcChpZGVudGl0eSk7XG52YXIgZGVmYXVsdFNlcGFyYXRlZCA9IC8qI19fUFVSRV9fKi8gc2VwYXJhdGVkKG5vbmUsIG5vbmUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzZXBhcmF0ZSA9IGZ1bmN0aW9uIChtYSkge1xuICAgIHJldHVybiBpc05vbmUobWEpID8gZGVmYXVsdFNlcGFyYXRlZCA6IHNlcGFyYXRlZChnZXRMZWZ0KG1hLnZhbHVlKSwgZ2V0UmlnaHQobWEudmFsdWUpKTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIENvbXBhY3RhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXIgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKGZhKSA/IG5vbmUgOiBwcmVkaWNhdGUoZmEudmFsdWUpID8gZmEgOiBub25lO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJNYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogZihmYS52YWx1ZSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb24gPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKF9maWx0ZXIoZmEsIG5vdChwcmVkaWNhdGUpKSwgX2ZpbHRlcihmYSwgcHJlZGljYXRlKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmbG93KG1hcChmKSwgc2VwYXJhdGUpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGaWx0ZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHtcbiAgICAgICAgICAgIHJldHVybiBpc05vbmUodGEpID8gRi5vZihub25lKSA6IEYubWFwKGYodGEudmFsdWUpLCBzb21lKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUodGEpID8gRi5vZihub25lKSA6IEYubWFwKHRhLnZhbHVlLCBzb21lKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xudmFyIF93aXRoZXIgPSAvKiNfX1BVUkVfXyovIHdpdGhlckRlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbnZhciBfd2lsdCA9IC8qI19fUFVSRV9fKi8gd2lsdERlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2l0aGVyID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpdGhlckYgPSBfd2l0aGVyKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2l0aGVyRihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aWx0ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpbHRGID0gX3dpbHQoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIF93aWx0RihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBXaXRoZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuLyoqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciB0aHJvd0Vycm9yID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9uZTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWRUaHJvdyA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgdGhyb3dFcnJvcjogdGhyb3dFcnJvclxufTtcbi8qKlxuICogVHJhbnNmb3JtcyBhbiBgRWl0aGVyYCB0byBhbiBgT3B0aW9uYCBkaXNjYXJkaW5nIHRoZSBlcnJvci5cbiAqXG4gKiBBbGlhcyBvZiBbZ2V0UmlnaHRdKCNnZXRyaWdodClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZyb21FaXRoZXIgPSBnZXRSaWdodDtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIEZyb21FaXRoZXIgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgZnJvbUVpdGhlcjogZnJvbUVpdGhlclxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBvcHRpb24gaXMgYW4gaW5zdGFuY2Ugb2YgYFNvbWVgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgaXNTb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc1NvbWUoc29tZSgxKSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNTb21lKG5vbmUpLCBmYWxzZSlcbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGlzU29tZSA9IF8uaXNTb21lO1xuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb3B0aW9uIGlzIGBOb25lYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGlzTm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNOb25lKHNvbWUoMSkpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc05vbmUobm9uZSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc05vbmUgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZhLl90YWcgPT09ICdOb25lJzsgfTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaFcgPSBmdW5jdGlvbiAob25Ob25lLCBvblNvbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gb25Ob25lKCkgOiBvblNvbWUobWEudmFsdWUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoV2BdKCNtYXRjaHcpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZFcgPSBtYXRjaFc7XG4vKipcbiAqIFRha2VzIGEgKGxhenkpIGRlZmF1bHQgdmFsdWUsIGEgZnVuY3Rpb24sIGFuZCBhbiBgT3B0aW9uYCB2YWx1ZSwgaWYgdGhlIGBPcHRpb25gIHZhbHVlIGlzIGBOb25lYCB0aGUgZGVmYXVsdCB2YWx1ZSBpc1xuICogcmV0dXJuZWQsIG90aGVyd2lzZSB0aGUgZnVuY3Rpb24gaXMgYXBwbGllZCB0byB0aGUgdmFsdWUgaW5zaWRlIHRoZSBgU29tZWAgYW5kIHRoZSByZXN1bHQgaXMgcmV0dXJuZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIG1hdGNoIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIG1hdGNoKCgpID0+ICdhIG5vbmUnLCBhID0+IGBhIHNvbWUgY29udGFpbmluZyAke2F9YClcbiAqICAgKSxcbiAqICAgJ2Egc29tZSBjb250YWluaW5nIDEnXG4gKiApXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgbWF0Y2goKCkgPT4gJ2Egbm9uZScsIGEgPT4gYGEgc29tZSBjb250YWluaW5nICR7YX1gKVxuICogICApLFxuICogICAnYSBub25lJ1xuICogKVxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2ggPSBtYXRjaFc7XG4vKipcbiAqIEFsaWFzIG9mIFtgbWF0Y2hgXSgjbWF0Y2gpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkID0gbWF0Y2g7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BnZXRPckVsc2VgXSgjZ2V0b3JlbHNlKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZSB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjYuMFxuICovXG5leHBvcnQgdmFyIGdldE9yRWxzZVcgPSBmdW5jdGlvbiAob25Ob25lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG9uTm9uZSgpIDogbWEudmFsdWU7XG4gICAgfTtcbn07XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyB0aGUgZ2l2ZW4gZGVmYXVsdCB2YWx1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBnZXRPckVsc2UgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgZ2V0T3JFbHNlKCgpID0+IDApXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIGdldE9yRWxzZSgoKSA9PiAwKVxuICogICApLFxuICogICAwXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPckVsc2UgPSBnZXRPckVsc2VXO1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZsYXAgPSAvKiNfX1BVUkVfXyovIGZsYXBfKEZ1bmN0b3IpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwRmlyc3QgPSAvKiNfX1BVUkVfXyovIGFwRmlyc3RfKEFwcGx5KTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBzZWNvbmQuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTZWNvbmQgPSAvKiNfX1BVUkVfXyovIGFwU2Vjb25kXyhBcHBseSk7XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0dGVuID0gY29tcGFjdDtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xNS4wXG4gKi9cbmV4cG9ydCB2YXIgdGFwID0gLyojX19QVVJFX18qLyBkdWFsKDIsIGNoYWluYWJsZS50YXAoQ2hhaW4pKTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCAqIGFzIE8gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgRSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogY29uc3QgY29tcHV0ZSA9ICh2YWx1ZTogbnVtYmVyKSA9PiBwaXBlKFxuICogICBPLm9mKHZhbHVlKSxcbiAqICAgTy50YXBFaXRoZXIoKHZhbHVlKSA9PiB2YWx1ZSA+IDAgPyBFLnJpZ2h0KCdvaycpIDogRS5sZWZ0KCdlcnJvcicpKSxcbiAqIClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbXB1dGUoMSksIE8ub2YoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbXB1dGUoLTQyKSwgTy5ub25lKVxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIHRhcEVpdGhlciA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCB0YXBFaXRoZXJfKEZyb21FaXRoZXIsIENoYWluKSk7XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKGlkZW50aXR5KTtcbi8qKlxuICogQGNhdGVnb3J5IGxpZnRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRWl0aGVySyA9IC8qI19fUFVSRV9fKi8gZnJvbUVpdGhlcktfKEZyb21FaXRoZXIpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRWl0aGVySyA9IFxuLyojX19QVVJFX18qLyBjaGFpbkVpdGhlcktfKEZyb21FaXRoZXIsIENoYWluKTtcbi8qKlxuICogQWxpYXMgb2YgYHRhcEVpdGhlcmAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMTIuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRmlyc3RFaXRoZXJLID0gdGFwRWl0aGVyO1xuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGBPcHRpb25gIGZyb20gYSBudWxsYWJsZSB0eXBlLiBJZiB0aGUgdmFsdWUgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLCByZXR1cm5zIGBOb25lYCwgb3RoZXJ3aXNlXG4gKiByZXR1cm5zIHRoZSB2YWx1ZSB3cmFwcGVkIGluIGEgYFNvbWVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBmcm9tTnVsbGFibGUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUodW5kZWZpbmVkKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKG51bGwpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUoMSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tTnVsbGFibGUgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKGEgPT0gbnVsbCA/IG5vbmUgOiBzb21lKGEpKTsgfTtcbi8qKlxuICogVHJhbnNmb3JtcyBhbiBleGNlcHRpb24gaW50byBhbiBgT3B0aW9uYC4gSWYgYGZgIHRocm93cywgcmV0dXJucyBgTm9uZWAsIG90aGVyd2lzZSByZXR1cm5zIHRoZSBvdXRwdXQgd3JhcHBlZCBpbiBhXG4gKiBgU29tZWAuXG4gKlxuICogU2VlIGFsc28gW2B0cnlDYXRjaEtgXSgjdHJ5Y2F0Y2hrKS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgdHJ5Q2F0Y2ggfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgdHJ5Q2F0Y2goKCkgPT4ge1xuICogICAgIHRocm93IG5ldyBFcnJvcigpXG4gKiAgIH0pLFxuICogICBub25lXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRyeUNhdGNoKCgpID0+IDEpLCBzb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSBpbnRlcm9wXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0cnlDYXRjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHNvbWUoZigpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgfVxufTtcbi8qKlxuICogQ29udmVydHMgYSBmdW5jdGlvbiB0aGF0IG1heSB0aHJvdyB0byBvbmUgcmV0dXJuaW5nIGEgYE9wdGlvbmAuXG4gKlxuICogQGNhdGVnb3J5IGludGVyb3BcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB0cnlDYXRjaEsgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyeUNhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFJldHVybnMgYSAqc21hcnQgY29uc3RydWN0b3IqIGZyb20gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBudWxsYWJsZSB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZnJvbU51bGxhYmxlSywgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBjb25zdCBmID0gKHM6IHN0cmluZyk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gKiAgIGNvbnN0IG4gPSBwYXJzZUZsb2F0KHMpXG4gKiAgIHJldHVybiBpc05hTihuKSA/IHVuZGVmaW5lZCA6IG5cbiAqIH1cbiAqXG4gKiBjb25zdCBnID0gZnJvbU51bGxhYmxlSyhmKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZygnMScpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnKCdhJyksIG5vbmUpXG4gKlxuICogQGNhdGVnb3J5IGxpZnRpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGZyb21OdWxsYWJsZUsgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmxvdyhmLCBmcm9tTnVsbGFibGUpOyB9O1xuLyoqXG4gKiBUaGlzIGlzIGBjaGFpbmAgKyBgZnJvbU51bGxhYmxlYCwgdXNlZnVsIHdoZW4gd29ya2luZyB3aXRoIG9wdGlvbmFsIHZhbHVlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZnJvbU51bGxhYmxlLCBjaGFpbk51bGxhYmxlSyB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgRW1wbG95ZWUge1xuICogICByZWFkb25seSBjb21wYW55Pzoge1xuICogICAgIHJlYWRvbmx5IGFkZHJlc3M/OiB7XG4gKiAgICAgICByZWFkb25seSBzdHJlZXQ/OiB7XG4gKiAgICAgICAgIHJlYWRvbmx5IG5hbWU/OiBzdHJpbmdcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBjb25zdCBlbXBsb3llZTE6IEVtcGxveWVlID0geyBjb21wYW55OiB7IGFkZHJlc3M6IHsgc3RyZWV0OiB7IG5hbWU6ICdoaWdoIHN0cmVldCcgfSB9IH0gfVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgZnJvbU51bGxhYmxlKGVtcGxveWVlMS5jb21wYW55KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhjb21wYW55ID0+IGNvbXBhbnkuYWRkcmVzcyksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoYWRkcmVzcyA9PiBhZGRyZXNzLnN0cmVldCksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoc3RyZWV0ID0+IHN0cmVldC5uYW1lKVxuICogICApLFxuICogICBzb21lKCdoaWdoIHN0cmVldCcpXG4gKiApXG4gKlxuICogY29uc3QgZW1wbG95ZWUyOiBFbXBsb3llZSA9IHsgY29tcGFueTogeyBhZGRyZXNzOiB7IHN0cmVldDoge30gfSB9IH1cbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIGZyb21OdWxsYWJsZShlbXBsb3llZTIuY29tcGFueSksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoY29tcGFueSA9PiBjb21wYW55LmFkZHJlc3MpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGFkZHJlc3MgPT4gYWRkcmVzcy5zdHJlZXQpLFxuICogICAgIGNoYWluTnVsbGFibGVLKHN0cmVldCA9PiBzdHJlZXQubmFtZSlcbiAqICAgKSxcbiAqICAgbm9uZVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbk51bGxhYmxlSyA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG5vbmUgOiBmcm9tTnVsbGFibGUoZihtYS52YWx1ZSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgYG51bGxgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCB0b051bGxhYmxlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIHRvTnVsbGFibGVcbiAqICAgKSxcbiAqICAgMVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgdG9OdWxsYWJsZVxuICogICApLFxuICogICBudWxsXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0b051bGxhYmxlID0gLyojX19QVVJFX18qLyBtYXRjaChjb25zdE51bGwsIGlkZW50aXR5KTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIHZhbHVlIG91dCBvZiB0aGUgc3RydWN0dXJlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSByZXR1cm5zIGB1bmRlZmluZWRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCB0b1VuZGVmaW5lZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICB0b1VuZGVmaW5lZFxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICB0b1VuZGVmaW5lZFxuICogICApLFxuICogICB1bmRlZmluZWRcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRvVW5kZWZpbmVkID0gLyojX19QVVJFX18qLyBtYXRjaChjb25zdFVuZGVmaW5lZCwgaWRlbnRpdHkpO1xuZXhwb3J0IGZ1bmN0aW9uIGVsZW0oRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSwgbWEpIHtcbiAgICAgICAgaWYgKG1hID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtRV8xID0gZWxlbShFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIGVsZW1FXzEoYSwgbWEpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gZmFsc2UgOiBFLmVxdWFscyhhLCBtYS52YWx1ZSk7XG4gICAgfTtcbn1cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHByZWRpY2F0ZSBpcyBzYXRpc2ZpZWQgYnkgdGhlIHdyYXBwZWQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZXhpc3RzIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAwKVxuICogICApLFxuICogICB0cnVlXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMSlcbiAqICAgKSxcbiAqICAgZmFsc2VcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAwKVxuICogICApLFxuICogICBmYWxzZVxuICogKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGV4aXN0cyA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gZmFsc2UgOiBwcmVkaWNhdGUobWEudmFsdWUpO1xuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZG8gbm90YXRpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBEbyA9IC8qI19fUFVSRV9fKi8gb2YoXy5lbXB0eVJlY29yZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZFRvID0gLyojX19QVVJFX18qLyBiaW5kVG9fKEZ1bmN0b3IpO1xudmFyIGxldF8gPSAvKiNfX1BVUkVfXyovIGxldF9fKEZ1bmN0b3IpO1xuZXhwb3J0IHsgXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTMuMFxuICovXG5sZXRfIGFzIGxldCB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmQgPSAvKiNfX1BVUkVfXyovIGNoYWluYWJsZS5iaW5kKENoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBhcFMgPSAvKiNfX1BVUkVfXyovIGFwU18oQXBwbHkpO1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgQXBUID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVhZG9ubHlBcnJheSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBhcnJheSB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seU5vbkVtcHR5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvID0gZigwLCBfLmhlYWQoYXMpKTtcbiAgICAgICAgaWYgKGlzTm9uZShvKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtvLnZhbHVlXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG9fMSA9IGYoaSwgYXNbaV0pO1xuICAgICAgICAgICAgaWYgKGlzTm9uZShvXzEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXQucHVzaChvXzEudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb21lKG91dCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgdmFyIGcgPSB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleChmKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoXy5pc05vbkVtcHR5KGFzKSA/IGcoYXMpIDogQXBUKTsgfTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VBcnJheVdpdGhJbmRleCA9IHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleDtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZShBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZUFycmF5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjc2VxdWVuY2UoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgc2VxdWVuY2VBcnJheSA9IFxuLyojX19QVVJFX18qLyB0cmF2ZXJzZUFycmF5KGlkZW50aXR5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxlZ2FjeVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBBbGlhcyBvZiBgZmxhdE1hcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW4gPSBmbGF0TWFwO1xuLyoqXG4gKiBBbGlhcyBvZiBgdGFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0ID0gdGFwO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgYFJlZmluZW1lbnRgIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWZpbmVtZW50KGdldE9wdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gaXNTb21lKGdldE9wdGlvbihhKSk7IH07XG59XG4vKipcbiAqIFVzZSBbYGNoYWluTnVsbGFibGVLYF0oI2NoYWlubnVsbGFibGVrKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbWFwTnVsbGFibGUgPSBjaGFpbk51bGxhYmxlSztcbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgTy5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBPLm9wdGlvbmBcbiAqICh3aGVyZSBgT2AgaXMgZnJvbSBgaW1wb3J0IE8gZnJvbSAnZnAtdHMvT3B0aW9uJ2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcHRpb24gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG9mOiBvZixcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHplcm86IHplcm8sXG4gICAgYWx0OiBfYWx0LFxuICAgIGV4dGVuZDogX2V4dGVuZCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0LFxuICAgIHRocm93RXJyb3I6IHRocm93RXJyb3Jcbn07XG4vKipcbiAqIFVzZSBbYGdldEFwcGx5U2VtaWdyb3VwYF0oLi9BcHBseS50cy5odG1sI2dldGFwcGx5c2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0QXBwbHlTZW1pZ3JvdXAgPSAvKiNfX1BVUkVfXyovIGdldEFwcGx5U2VtaWdyb3VwXyhBcHBseSk7XG4vKipcbiAqIFVzZSBbYGdldEFwcGxpY2F0aXZlTW9ub2lkYF0oLi9BcHBsaWNhdGl2ZS50cy5odG1sI2dldGFwcGxpY2F0aXZlbW9ub2lkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0QXBwbHlNb25vaWQgPSAvKiNfX1BVUkVfXyovIGdldEFwcGxpY2F0aXZlTW9ub2lkKEFwcGxpY2F0aXZlKTtcbi8qKlxuICogVXNlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZpcnN0IH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGdldE1vbm9pZChmaXJzdCgpKVxuICogYGBgXG4gKlxuICogaW5zdGVhZC5cbiAqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSBsZWZ0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZVxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShhKSAgICAgIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0Rmlyc3RNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgTSA9IGdldEZpcnN0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMikpLCBzb21lKDIpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEZpcnN0TW9ub2lkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0TW9ub2lkKGZpcnN0KCkpOyB9O1xuLyoqXG4gKiBVc2VcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgbGFzdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBnZXRNb25vaWQobGFzdCgpKVxuICogYGBgXG4gKlxuICogaW5zdGVhZC5cbiAqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSByaWdodC1tb3N0IG5vbi1gTm9uZWAgdmFsdWVcbiAqXG4gKiB8IHggICAgICAgfCB5ICAgICAgIHwgY29uY2F0KHgsIHkpIHxcbiAqIHwgLS0tLS0tLSB8IC0tLS0tLS0gfCAtLS0tLS0tLS0tLS0gfFxuICogfCBub25lICAgIHwgbm9uZSAgICB8IG5vbmUgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBub25lICAgIHwgc29tZShhKSAgICAgIHxcbiAqIHwgbm9uZSAgICB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICogfCBzb21lKGEpIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldExhc3RNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgTSA9IGdldExhc3RNb25vaWQ8bnVtYmVyPigpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIG5vbmUpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBub25lKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgc29tZSgyKSksIHNvbWUoMikpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIHNvbWUoMikpLCBzb21lKDIpKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TGFzdE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldE1vbm9pZChsYXN0KCkpOyB9O1xuIiwKICAiaW1wb3J0IHsgZ2V0QXBwbGljYXRpdmVNb25vaWQgfSBmcm9tICcuL0FwcGxpY2F0aXZlJztcbmltcG9ydCB7IGFwRmlyc3QgYXMgYXBGaXJzdF8sIGFwUyBhcyBhcFNfLCBhcFNlY29uZCBhcyBhcFNlY29uZF8sIGdldEFwcGx5U2VtaWdyb3VwIGFzIGdldEFwcGx5U2VtaWdyb3VwXyB9IGZyb20gJy4vQXBwbHknO1xuaW1wb3J0ICogYXMgY2hhaW5hYmxlIGZyb20gJy4vQ2hhaW4nO1xuaW1wb3J0IHsgY2hhaW5FaXRoZXJLIGFzIGNoYWluRWl0aGVyS18sIGZyb21FaXRoZXJLIGFzIGZyb21FaXRoZXJLXywgdGFwRWl0aGVyIGFzIHRhcEVpdGhlcl8gfSBmcm9tICcuL0Zyb21FaXRoZXInO1xuaW1wb3J0IHsgY29uc3ROdWxsLCBjb25zdFVuZGVmaW5lZCwgZHVhbCwgZmxvdywgaWRlbnRpdHksIHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGFzIGFzIGFzXywgYXNVbml0IGFzIGFzVW5pdF8sIGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IG5vdCB9IGZyb20gJy4vUHJlZGljYXRlJztcbmltcG9ydCB7IGZpcnN0LCBsYXN0IH0gZnJvbSAnLi9TZW1pZ3JvdXAnO1xuaW1wb3J0IHsgc2VwYXJhdGVkIH0gZnJvbSAnLi9TZXBhcmF0ZWQnO1xuaW1wb3J0IHsgd2lsdERlZmF1bHQsIHdpdGhlckRlZmF1bHQgfSBmcm9tICcuL1dpdGhlcmFibGUnO1xuaW1wb3J0IHsgZ3VhcmQgYXMgZ3VhcmRfIH0gZnJvbSAnLi9aZXJvJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBgTm9uZWAgZG9lc24ndCBoYXZlIGEgY29uc3RydWN0b3IsIGluc3RlYWQgeW91IGNhbiB1c2UgaXQgZGlyZWN0bHkgYXMgYSB2YWx1ZS4gUmVwcmVzZW50cyBhIG1pc3NpbmcgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbm9uZSA9IF8ubm9uZTtcbi8qKlxuICogQ29uc3RydWN0cyBhIGBTb21lYC4gUmVwcmVzZW50cyBhbiBvcHRpb25hbCB2YWx1ZSB0aGF0IGV4aXN0cy5cbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzb21lID0gXy5zb21lO1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21QcmVkaWNhdGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiAocHJlZGljYXRlKGEpID8gc29tZShhKSA6IG5vbmUpOyB9O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBgTGVmdGAgdmFsdWUgb2YgYW4gYEVpdGhlcmAgaWYgcG9zc2libGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldExlZnQsIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyByaWdodCwgbGVmdCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldExlZnQocmlnaHQoMSkpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRMZWZ0KGxlZnQoJ2EnKSksIHNvbWUoJ2EnKSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRMZWZ0ID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAobWEuX3RhZyA9PT0gJ1JpZ2h0JyA/IG5vbmUgOiBzb21lKG1hLmxlZnQpKTsgfTtcbi8qKlxuICogUmV0dXJucyB0aGUgYFJpZ2h0YCB2YWx1ZSBvZiBhbiBgRWl0aGVyYCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0UmlnaHQsIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyByaWdodCwgbGVmdCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldFJpZ2h0KHJpZ2h0KDEpKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0UmlnaHQobGVmdCgnYScpKSwgbm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRSaWdodCA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKG1hLl90YWcgPT09ICdMZWZ0JyA/IG5vbmUgOiBzb21lKG1hLnJpZ2h0KSk7IH07XG52YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfTtcbnZhciBfYXAgPSBmdW5jdGlvbiAoZmFiLCBmYSkgeyByZXR1cm4gcGlwZShmYWIsIGFwKGZhKSk7IH07XG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbnZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBNID0gZm9sZE1hcChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwTShmKSk7IH07XG59O1xudmFyIF9yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHQoYiwgZikpOyB9O1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xudmFyIF9maWx0ZXIgPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyKHByZWRpY2F0ZSkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZmlsdGVyTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZXh0ZW5kID0gZnVuY3Rpb24gKHdhLCBmKSB7IHJldHVybiBwaXBlKHdhLCBleHRlbmQoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcGFydGl0aW9uID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uKHByZWRpY2F0ZSkpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwKGYpKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ09wdGlvbic7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChpc05vbmUobWEpID8gJ25vbmUnIDogXCJzb21lKFwiLmNvbmNhdChTLnNob3cobWEudmFsdWUpLCBcIilcIikpOyB9XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGdldEVxIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMobm9uZSwgbm9uZSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMobm9uZSwgc29tZSgxKSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIG5vbmUpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBzb21lKDIpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgc29tZSgxKSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ID09PSB5IHx8IChpc05vbmUoeCkgPyBpc05vbmUoeSkgOiBpc05vbmUoeSkgPyBmYWxzZSA6IEUuZXF1YWxzKHgudmFsdWUsIHkudmFsdWUpKTsgfVxufSk7IH07XG4vKipcbiAqIFRoZSBgT3JkYCBpbnN0YW5jZSBhbGxvd3MgYE9wdGlvbmAgdmFsdWVzIHRvIGJlIGNvbXBhcmVkIHdpdGhcbiAqIGBjb21wYXJlYCwgd2hlbmV2ZXIgdGhlcmUgaXMgYW4gYE9yZGAgaW5zdGFuY2UgZm9yXG4gKiB0aGUgdHlwZSB0aGUgYE9wdGlvbmAgY29udGFpbnMuXG4gKlxuICogYE5vbmVgIGlzIGNvbnNpZGVyZWQgdG8gYmUgbGVzcyB0aGFuIGFueSBgU29tZWAgdmFsdWUuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBnZXRPcmQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBPID0gZ2V0T3JkKE4uT3JkKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShub25lLCBub25lKSwgMClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUobm9uZSwgc29tZSgxKSksIC0xKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBub25lKSwgMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoc29tZSgxKSwgc29tZSgyKSksIC0xKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBzb21lKDEpKSwgMClcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPcmQgPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGdldEVxKE8pLmVxdWFscyxcbiAgICBjb21wYXJlOiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gKHggPT09IHkgPyAwIDogaXNTb21lKHgpID8gKGlzU29tZSh5KSA/IE8uY29tcGFyZSh4LnZhbHVlLCB5LnZhbHVlKSA6IDEpIDogLTEpOyB9XG59KTsgfTtcbi8qKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgbGVmdC1tb3N0IG5vbi1gTm9uZWAgdmFsdWUuIElmIGJvdGggb3BlcmFuZHMgYXJlIGBTb21lYHMgdGhlbiB0aGUgaW5uZXIgdmFsdWVzIGFyZVxuICogY29uY2F0ZW5hdGVkIHVzaW5nIHRoZSBwcm92aWRlZCBgU2VtaWdyb3VwYFxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgICAgICAgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShjb25jYXQoYSwgYikpIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgU2VtaWdyb3VwU3VtIH0gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRNb25vaWQoU2VtaWdyb3VwU3VtKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMSkpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgzKSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRNb25vaWQgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiAoaXNOb25lKHgpID8geSA6IGlzTm9uZSh5KSA/IHggOiBzb21lKFMuY29uY2F0KHgudmFsdWUsIHkudmFsdWUpKSk7IH0sXG4gICAgZW1wdHk6IG5vbmVcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gbm9uZSA6IHNvbWUoZihmYS52YWx1ZSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIE1hcHMgdGhlIGBTb21lYCB2YWx1ZSBvZiB0aGlzIGBPcHRpb25gIHRvIHRoZSBzcGVjaWZpZWQgY29uc3RhbnQgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBhcyA9IGR1YWwoMiwgYXNfKEZ1bmN0b3IpKTtcbi8qKlxuICogTWFwcyB0aGUgYFNvbWVgIHZhbHVlIG9mIHRoaXMgYE9wdGlvbmAgdG8gdGhlIHZvaWQgY29uc3RhbnQgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBhc1VuaXQgPSBhc1VuaXRfKEZ1bmN0b3IpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBvZiA9IHNvbWU7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBQb2ludGVkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYWIpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhYikgPyBub25lIDogaXNOb25lKGZhKSA/IG5vbmUgOiBzb21lKGZhYi52YWx1ZShmYS52YWx1ZSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEFwcGx5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHsgcmV0dXJuIChpc05vbmUobWEpID8gbm9uZSA6IGYobWEudmFsdWUpKTsgfSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gYiA6IGYoYiwgZmEudmFsdWUpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZvbGRNYXAgPSBmdW5jdGlvbiAoTSkgeyByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gTS5lbXB0eSA6IGYoZmEudmFsdWUpO1xufTsgfTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gYiA6IGYoZmEudmFsdWUsIGIpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHRcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIHByb3ZpZGVkIGBPcHRpb25gIGB0aGF0YCBpZiBgc2VsZmAgaXMgYE5vbmVgLCBvdGhlcndpc2UgcmV0dXJucyBgc2VsZmAuXG4gKlxuICogQHBhcmFtIHNlbGYgLSBUaGUgZmlyc3QgYE9wdGlvbmAgdG8gYmUgY2hlY2tlZC5cbiAqIEBwYXJhbSB0aGF0IC0gVGhlIGBPcHRpb25gIHRvIHJldHVybiBpZiBgc2VsZmAgaXMgYE5vbmVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBPIGZyb20gXCJmcC10cy9PcHRpb25cIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5ub25lLCAoKSA9PiBPLm5vbmUpLCBPLm5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8uc29tZSgxKSwgKCkgPT4gTy5ub25lKSwgTy5zb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLm5vbmUsICgpID0+IE8uc29tZSgnYicpKSwgTy5zb21lKCdiJykpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8uc29tZSgxKSwgKCkgPT4gTy5zb21lKCdiJykpLCBPLnNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgb3JFbHNlID0gZHVhbCgyLCBmdW5jdGlvbiAoc2VsZiwgdGhhdCkgeyByZXR1cm4gKGlzTm9uZShzZWxmKSA/IHRoYXQoKSA6IHNlbGYpOyB9KTtcbi8qKlxuICogQWxpYXMgb2YgYG9yRWxzZWAuXG4gKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFsdGBdKCNhbHQpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgYWx0VyA9IG9yRWxzZTtcbi8qKlxuICogQWxpYXMgb2YgYG9yRWxzZWAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gb3JFbHNlO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBbHQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFsdDogX2FsdFxufTtcbi8qKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgemVybyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vbmU7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBaZXJvID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHplcm86IHplcm9cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGd1YXJkID0gLyojX19QVVJFX18qLyBndWFyZF8oWmVybywgUG9pbnRlZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdGVybmF0aXZlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBhbHQ6IF9hbHQsXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXh0ZW5kID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh3YSkge1xuICAgIHJldHVybiBpc05vbmUod2EpID8gbm9uZSA6IHNvbWUoZih3YSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRXh0ZW5kID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmRcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbXBhY3QgPSAvKiNfX1BVUkVfXyovIGZsYXRNYXAoaWRlbnRpdHkpO1xudmFyIGRlZmF1bHRTZXBhcmF0ZWQgPSAvKiNfX1BVUkVfXyovIHNlcGFyYXRlZChub25lLCBub25lKTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc2VwYXJhdGUgPSBmdW5jdGlvbiAobWEpIHtcbiAgICByZXR1cm4gaXNOb25lKG1hKSA/IGRlZmF1bHRTZXBhcmF0ZWQgOiBzZXBhcmF0ZWQoZ2V0TGVmdChtYS52YWx1ZSksIGdldFJpZ2h0KG1hLnZhbHVlKSk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21wYWN0YWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogcHJlZGljYXRlKGZhLnZhbHVlKSA/IGZhIDogbm9uZTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gbm9uZSA6IGYoZmEudmFsdWUpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChfZmlsdGVyKGZhLCBub3QocHJlZGljYXRlKSksIF9maWx0ZXIoZmEsIHByZWRpY2F0ZSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmxvdyhtYXAoZiksIHNlcGFyYXRlKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRmlsdGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNOb25lKHRhKSA/IEYub2Yobm9uZSkgOiBGLm1hcChmKHRhLnZhbHVlKSwgc29tZSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciBzZXF1ZW5jZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKHRhKSA/IEYub2Yobm9uZSkgOiBGLm1hcCh0YS52YWx1ZSwgc29tZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZVxufTtcbnZhciBfd2l0aGVyID0gLyojX19QVVJFX18qLyB3aXRoZXJEZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG52YXIgX3dpbHQgPSAvKiNfX1BVUkVfXyovIHdpbHREZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpdGhlciA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aXRoZXJGID0gX3dpdGhlcihGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3dpdGhlckYoZmEsIGYpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2lsdCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aWx0RiA9IF93aWx0KEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2lsdEYoZmEsIGYpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgV2l0aGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbi8qKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgdGhyb3dFcnJvciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vbmU7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIE1vbmFkVGhyb3cgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIHRocm93RXJyb3I6IHRocm93RXJyb3Jcbn07XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gYEVpdGhlcmAgdG8gYW4gYE9wdGlvbmAgZGlzY2FyZGluZyB0aGUgZXJyb3IuXG4gKlxuICogQWxpYXMgb2YgW2dldFJpZ2h0XSgjZ2V0cmlnaHQpXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRWl0aGVyID0gZ2V0UmlnaHQ7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBGcm9tRWl0aGVyID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGZyb21FaXRoZXI6IGZyb21FaXRoZXJcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyByZWZpbmVtZW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb3B0aW9uIGlzIGFuIGluc3RhbmNlIG9mIGBTb21lYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGlzU29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNTb21lKHNvbWUoMSkpLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzU29tZShub25lKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc1NvbWUgPSBfLmlzU29tZTtcbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9wdGlvbiBpcyBgTm9uZWAsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBpc05vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzTm9uZShzb21lKDEpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNOb25lKG5vbmUpLCB0cnVlKVxuICpcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgaXNOb25lID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmYS5fdGFnID09PSAnTm9uZSc7IH07XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaGBdKCNtYXRjaCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hXID0gZnVuY3Rpb24gKG9uTm9uZSwgb25Tb21lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG9uTm9uZSgpIDogb25Tb21lKG1hLnZhbHVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaFdgXSgjbWF0Y2h3KS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZvbGRXID0gbWF0Y2hXO1xuLyoqXG4gKiBUYWtlcyBhIChsYXp5KSBkZWZhdWx0IHZhbHVlLCBhIGZ1bmN0aW9uLCBhbmQgYW4gYE9wdGlvbmAgdmFsdWUsIGlmIHRoZSBgT3B0aW9uYCB2YWx1ZSBpcyBgTm9uZWAgdGhlIGRlZmF1bHQgdmFsdWUgaXNcbiAqIHJldHVybmVkLCBvdGhlcndpc2UgdGhlIGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gdGhlIHZhbHVlIGluc2lkZSB0aGUgYFNvbWVgIGFuZCB0aGUgcmVzdWx0IGlzIHJldHVybmVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBtYXRjaCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBtYXRjaCgoKSA9PiAnYSBub25lJywgYSA9PiBgYSBzb21lIGNvbnRhaW5pbmcgJHthfWApXG4gKiAgICksXG4gKiAgICdhIHNvbWUgY29udGFpbmluZyAxJ1xuICogKVxuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIG1hdGNoKCgpID0+ICdhIG5vbmUnLCBhID0+IGBhIHNvbWUgY29udGFpbmluZyAke2F9YClcbiAqICAgKSxcbiAqICAgJ2Egbm9uZSdcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoID0gbWF0Y2hXO1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZCA9IG1hdGNoO1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgZ2V0T3JFbHNlYF0oI2dldG9yZWxzZSkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGUgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi42LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPckVsc2VXID0gZnVuY3Rpb24gKG9uTm9uZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBvbk5vbmUoKSA6IG1hLnZhbHVlO1xuICAgIH07XG59O1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgdGhlIGdpdmVuIGRlZmF1bHQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZ2V0T3JFbHNlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGdldE9yRWxzZSgoKSA9PiAwKVxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBnZXRPckVsc2UoKCkgPT4gMClcbiAqICAgKSxcbiAqICAgMFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JFbHNlID0gZ2V0T3JFbHNlVztcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IGNvbXBhY3Q7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTUuMFxuICovXG5leHBvcnQgdmFyIHRhcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBjaGFpbmFibGUudGFwKENoYWluKSk7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBPIGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIEUgZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGNvbnN0IGNvbXB1dGUgPSAodmFsdWU6IG51bWJlcikgPT4gcGlwZShcbiAqICAgTy5vZih2YWx1ZSksXG4gKiAgIE8udGFwRWl0aGVyKCh2YWx1ZSkgPT4gdmFsdWUgPiAwID8gRS5yaWdodCgnb2snKSA6IEUubGVmdCgnZXJyb3InKSksXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wdXRlKDEpLCBPLm9mKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wdXRlKC00MiksIE8ubm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciB0YXBFaXRoZXIgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgdGFwRWl0aGVyXyhGcm9tRWl0aGVyLCBDaGFpbikpO1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBkdXBsaWNhdGUgPSAvKiNfX1BVUkVfXyovIGV4dGVuZChpZGVudGl0eSk7XG4vKipcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVpdGhlcksgPSAvKiNfX1BVUkVfXyovIGZyb21FaXRoZXJLXyhGcm9tRWl0aGVyKTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkVpdGhlcksgPSBcbi8qI19fUFVSRV9fKi8gY2hhaW5FaXRoZXJLXyhGcm9tRWl0aGVyLCBDaGFpbik7XG4vKipcbiAqIEFsaWFzIG9mIGB0YXBFaXRoZXJgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0RWl0aGVySyA9IHRhcEVpdGhlcjtcbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyBgT3B0aW9uYCBmcm9tIGEgbnVsbGFibGUgdHlwZS4gSWYgdGhlIHZhbHVlIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgcmV0dXJucyBgTm9uZWAsIG90aGVyd2lzZVxuICogcmV0dXJucyB0aGUgdmFsdWUgd3JhcHBlZCBpbiBhIGBTb21lYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgZnJvbU51bGxhYmxlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKHVuZGVmaW5lZCksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21OdWxsYWJsZShudWxsKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKDEpLCBzb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbU51bGxhYmxlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChhID09IG51bGwgPyBub25lIDogc29tZShhKSk7IH07XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gZXhjZXB0aW9uIGludG8gYW4gYE9wdGlvbmAuIElmIGBmYCB0aHJvd3MsIHJldHVybnMgYE5vbmVgLCBvdGhlcndpc2UgcmV0dXJucyB0aGUgb3V0cHV0IHdyYXBwZWQgaW4gYVxuICogYFNvbWVgLlxuICpcbiAqIFNlZSBhbHNvIFtgdHJ5Q2F0Y2hLYF0oI3RyeWNhdGNoaykuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIHRyeUNhdGNoIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHRyeUNhdGNoKCgpID0+IHtcbiAqICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICogICB9KSxcbiAqICAgbm9uZVxuICogKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0cnlDYXRjaCgoKSA9PiAxKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW50ZXJvcFxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHJ5Q2F0Y2ggPSBmdW5jdGlvbiAoZikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBzb21lKGYoKSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBub25lO1xuICAgIH1cbn07XG4vKipcbiAqIENvbnZlcnRzIGEgZnVuY3Rpb24gdGhhdCBtYXkgdGhyb3cgdG8gb25lIHJldHVybmluZyBhIGBPcHRpb25gLlxuICpcbiAqIEBjYXRlZ29yeSBpbnRlcm9wXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHJ5Q2F0Y2hLID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYVtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnlDYXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBmLmFwcGx5KHZvaWQgMCwgYSk7IH0pO1xuICAgIH07XG59O1xuLyoqXG4gKiBSZXR1cm5zIGEgKnNtYXJ0IGNvbnN0cnVjdG9yKiBmcm9tIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgbnVsbGFibGUgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZyb21OdWxsYWJsZUssIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgZiA9IChzOiBzdHJpbmcpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICogICBjb25zdCBuID0gcGFyc2VGbG9hdChzKVxuICogICByZXR1cm4gaXNOYU4obikgPyB1bmRlZmluZWQgOiBuXG4gKiB9XG4gKlxuICogY29uc3QgZyA9IGZyb21OdWxsYWJsZUsoZilcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGcoJzEnKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZygnYScpLCBub25lKVxuICpcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tTnVsbGFibGVLID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZsb3coZiwgZnJvbU51bGxhYmxlKTsgfTtcbi8qKlxuICogVGhpcyBpcyBgY2hhaW5gICsgYGZyb21OdWxsYWJsZWAsIHVzZWZ1bCB3aGVuIHdvcmtpbmcgd2l0aCBvcHRpb25hbCB2YWx1ZXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGZyb21OdWxsYWJsZSwgY2hhaW5OdWxsYWJsZUsgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogaW50ZXJmYWNlIEVtcGxveWVlIHtcbiAqICAgcmVhZG9ubHkgY29tcGFueT86IHtcbiAqICAgICByZWFkb25seSBhZGRyZXNzPzoge1xuICogICAgICAgcmVhZG9ubHkgc3RyZWV0Pzoge1xuICogICAgICAgICByZWFkb25seSBuYW1lPzogc3RyaW5nXG4gKiAgICAgICB9XG4gKiAgICAgfVxuICogICB9XG4gKiB9XG4gKlxuICogY29uc3QgZW1wbG95ZWUxOiBFbXBsb3llZSA9IHsgY29tcGFueTogeyBhZGRyZXNzOiB7IHN0cmVldDogeyBuYW1lOiAnaGlnaCBzdHJlZXQnIH0gfSB9IH1cbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIGZyb21OdWxsYWJsZShlbXBsb3llZTEuY29tcGFueSksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoY29tcGFueSA9PiBjb21wYW55LmFkZHJlc3MpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGFkZHJlc3MgPT4gYWRkcmVzcy5zdHJlZXQpLFxuICogICAgIGNoYWluTnVsbGFibGVLKHN0cmVldCA9PiBzdHJlZXQubmFtZSlcbiAqICAgKSxcbiAqICAgc29tZSgnaGlnaCBzdHJlZXQnKVxuICogKVxuICpcbiAqIGNvbnN0IGVtcGxveWVlMjogRW1wbG95ZWUgPSB7IGNvbXBhbnk6IHsgYWRkcmVzczogeyBzdHJlZXQ6IHt9IH0gfSB9XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBmcm9tTnVsbGFibGUoZW1wbG95ZWUyLmNvbXBhbnkpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGNvbXBhbnkgPT4gY29tcGFueS5hZGRyZXNzKSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhhZGRyZXNzID0+IGFkZHJlc3Muc3RyZWV0KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhzdHJlZXQgPT4gc3RyZWV0Lm5hbWUpXG4gKiAgICksXG4gKiAgIG5vbmVcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5OdWxsYWJsZUsgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBub25lIDogZnJvbU51bGxhYmxlKGYobWEudmFsdWUpKTtcbiAgICB9O1xufTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIHZhbHVlIG91dCBvZiB0aGUgc3RydWN0dXJlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSByZXR1cm5zIGBudWxsYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgdG9OdWxsYWJsZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICB0b051bGxhYmxlXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIHRvTnVsbGFibGVcbiAqICAgKSxcbiAqICAgbnVsbFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdG9OdWxsYWJsZSA9IC8qI19fUFVSRV9fKi8gbWF0Y2goY29uc3ROdWxsLCBpZGVudGl0eSk7XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgdG9VbmRlZmluZWQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgdG9VbmRlZmluZWRcbiAqICAgKSxcbiAqICAgMVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgdG9VbmRlZmluZWRcbiAqICAgKSxcbiAqICAgdW5kZWZpbmVkXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0b1VuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gbWF0Y2goY29uc3RVbmRlZmluZWQsIGlkZW50aXR5KTtcbmV4cG9ydCBmdW5jdGlvbiBlbGVtKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEsIG1hKSB7XG4gICAgICAgIGlmIChtYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZWxlbUVfMSA9IGVsZW0oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBlbGVtRV8xKGEsIG1hKTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IGZhbHNlIDogRS5lcXVhbHMoYSwgbWEudmFsdWUpO1xuICAgIH07XG59XG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBwcmVkaWNhdGUgaXMgc2F0aXNmaWVkIGJ5IHRoZSB3cmFwcGVkIHZhbHVlXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGV4aXN0cyB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMClcbiAqICAgKSxcbiAqICAgdHJ1ZVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgZXhpc3RzKG4gPT4gbiA+IDEpXG4gKiAgICksXG4gKiAgIGZhbHNlXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMClcbiAqICAgKSxcbiAqICAgZmFsc2VcbiAqIClcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBleGlzdHMgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IGZhbHNlIDogcHJlZGljYXRlKG1hLnZhbHVlKTtcbiAgICB9O1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBjaGFpbmFibGUuYmluZChDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIEFwVCA9IC8qI19fUFVSRV9fKi8gb2YoXy5lbXB0eVJlYWRvbmx5QXJyYXkpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gYXJyYXkgdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlOb25FbXB0eUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbyA9IGYoMCwgXy5oZWFkKGFzKSk7XG4gICAgICAgIGlmIChpc05vbmUobykpIHtcbiAgICAgICAgICAgIHJldHVybiBub25lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbby52YWx1ZV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvXzEgPSBmKGksIGFzW2ldKTtcbiAgICAgICAgICAgIGlmIChpc05vbmUob18xKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0LnB1c2gob18xLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29tZShvdXQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHZhciBnID0gdHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXgoZik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKF8uaXNOb25FbXB0eShhcykgPyBnKGFzKSA6IEFwVCk7IH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlQXJyYXlXaXRoSW5kZXggPSB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXg7XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2UoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VBcnJheSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3NlcXVlbmNlKEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlQXJyYXkgPSBcbi8qI19fUFVSRV9fKi8gdHJhdmVyc2VBcnJheShpZGVudGl0eSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBsZWdhY3lcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWxpYXMgb2YgYGZsYXRNYXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluID0gZmxhdE1hcDtcbi8qKlxuICogQWxpYXMgb2YgYHRhcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IHRhcDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIGBSZWZpbmVtZW50YCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVmaW5lbWVudChnZXRPcHRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGlzU29tZShnZXRPcHRpb24oYSkpOyB9O1xufVxuLyoqXG4gKiBVc2UgW2BjaGFpbk51bGxhYmxlS2BdKCNjaGFpbm51bGxhYmxlaykgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG1hcE51bGxhYmxlID0gY2hhaW5OdWxsYWJsZUs7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYE8uRnVuY3RvcmAgaW5zdGVhZCBvZiBgTy5vcHRpb25gXG4gKiAod2hlcmUgYE9gIGlzIGZyb20gYGltcG9ydCBPIGZyb20gJ2ZwLXRzL09wdGlvbidgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3B0aW9uID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBvZjogb2YsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICB6ZXJvOiB6ZXJvLFxuICAgIGFsdDogX2FsdCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdCxcbiAgICB0aHJvd0Vycm9yOiB0aHJvd0Vycm9yXG59O1xuLyoqXG4gKiBVc2UgW2BnZXRBcHBseVNlbWlncm91cGBdKC4vQXBwbHkudHMuaHRtbCNnZXRhcHBseXNlbWlncm91cCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEFwcGx5U2VtaWdyb3VwID0gLyojX19QVVJFX18qLyBnZXRBcHBseVNlbWlncm91cF8oQXBwbHkpO1xuLyoqXG4gKiBVc2UgW2BnZXRBcHBsaWNhdGl2ZU1vbm9pZGBdKC4vQXBwbGljYXRpdmUudHMuaHRtbCNnZXRhcHBsaWNhdGl2ZW1vbm9pZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEFwcGx5TW9ub2lkID0gLyojX19QVVJFX18qLyBnZXRBcHBsaWNhdGl2ZU1vbm9pZChBcHBsaWNhdGl2ZSk7XG4vKipcbiAqIFVzZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBmaXJzdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBnZXRNb25vaWQoZmlyc3QoKSlcbiAqIGBgYFxuICpcbiAqIGluc3RlYWQuXG4gKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgbGVmdC1tb3N0IG5vbi1gTm9uZWAgdmFsdWVcbiAqXG4gKiB8IHggICAgICAgfCB5ICAgICAgIHwgY29uY2F0KHgsIHkpIHxcbiAqIHwgLS0tLS0tLSB8IC0tLS0tLS0gfCAtLS0tLS0tLS0tLS0gfFxuICogfCBub25lICAgIHwgbm9uZSAgICB8IG5vbmUgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBub25lICAgIHwgc29tZShhKSAgICAgIHxcbiAqIHwgbm9uZSAgICB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICogfCBzb21lKGEpIHwgc29tZShiKSB8IHNvbWUoYSkgICAgICB8XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEZpcnN0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRGaXJzdE1vbm9pZDxudW1iZXI+KClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgbm9uZSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIG5vbmUpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgc29tZSgyKSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRGaXJzdE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldE1vbm9pZChmaXJzdCgpKTsgfTtcbi8qKlxuICogVXNlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGxhc3QgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogZ2V0TW9ub2lkKGxhc3QoKSlcbiAqIGBgYFxuICpcbiAqIGluc3RlYWQuXG4gKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgcmlnaHQtbW9zdCBub24tYE5vbmVgIHZhbHVlXG4gKlxuICogfCB4ICAgICAgIHwgeSAgICAgICB8IGNvbmNhdCh4LCB5KSB8XG4gKiB8IC0tLS0tLS0gfCAtLS0tLS0tIHwgLS0tLS0tLS0tLS0tIHxcbiAqIHwgbm9uZSAgICB8IG5vbmUgICAgfCBub25lICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgbm9uZSAgICB8IHNvbWUoYSkgICAgICB8XG4gKiB8IG5vbmUgICAgfCBzb21lKGIpIHwgc29tZShiKSAgICAgIHxcbiAqIHwgc29tZShhKSB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRMYXN0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRMYXN0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMikpLCBzb21lKDIpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldExhc3RNb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRNb25vaWQobGFzdCgpKTsgfTtcbiIsCiAgImltcG9ydCB7IGdldEFwcGxpY2F0aXZlTW9ub2lkIH0gZnJvbSAnLi9BcHBsaWNhdGl2ZSc7XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFMgYXMgYXBTXywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfLCBnZXRBcHBseVNlbWlncm91cCBhcyBnZXRBcHBseVNlbWlncm91cF8gfSBmcm9tICcuL0FwcGx5JztcbmltcG9ydCAqIGFzIGNoYWluYWJsZSBmcm9tICcuL0NoYWluJztcbmltcG9ydCB7IGNoYWluRWl0aGVySyBhcyBjaGFpbkVpdGhlcktfLCBmcm9tRWl0aGVySyBhcyBmcm9tRWl0aGVyS18sIHRhcEVpdGhlciBhcyB0YXBFaXRoZXJfIH0gZnJvbSAnLi9Gcm9tRWl0aGVyJztcbmltcG9ydCB7IGNvbnN0TnVsbCwgY29uc3RVbmRlZmluZWQsIGR1YWwsIGZsb3csIGlkZW50aXR5LCBwaXBlIH0gZnJvbSAnLi9mdW5jdGlvbic7XG5pbXBvcnQgeyBhcyBhcyBhc18sIGFzVW5pdCBhcyBhc1VuaXRfLCBiaW5kVG8gYXMgYmluZFRvXywgZmxhcCBhcyBmbGFwXywgbGV0IGFzIGxldF9fIH0gZnJvbSAnLi9GdW5jdG9yJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnLi9pbnRlcm5hbCc7XG5pbXBvcnQgeyBub3QgfSBmcm9tICcuL1ByZWRpY2F0ZSc7XG5pbXBvcnQgeyBmaXJzdCwgbGFzdCB9IGZyb20gJy4vU2VtaWdyb3VwJztcbmltcG9ydCB7IHNlcGFyYXRlZCB9IGZyb20gJy4vU2VwYXJhdGVkJztcbmltcG9ydCB7IHdpbHREZWZhdWx0LCB3aXRoZXJEZWZhdWx0IH0gZnJvbSAnLi9XaXRoZXJhYmxlJztcbmltcG9ydCB7IGd1YXJkIGFzIGd1YXJkXyB9IGZyb20gJy4vWmVybyc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogYE5vbmVgIGRvZXNuJ3QgaGF2ZSBhIGNvbnN0cnVjdG9yLCBpbnN0ZWFkIHlvdSBjYW4gdXNlIGl0IGRpcmVjdGx5IGFzIGEgdmFsdWUuIFJlcHJlc2VudHMgYSBtaXNzaW5nIHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG5vbmUgPSBfLm5vbmU7XG4vKipcbiAqIENvbnN0cnVjdHMgYSBgU29tZWAuIFJlcHJlc2VudHMgYW4gb3B0aW9uYWwgdmFsdWUgdGhhdCBleGlzdHMuXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc29tZSA9IF8uc29tZTtcbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHJlZGljYXRlKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKHByZWRpY2F0ZShhKSA/IHNvbWUoYSkgOiBub25lKTsgfTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgYExlZnRgIHZhbHVlIG9mIGFuIGBFaXRoZXJgIGlmIHBvc3NpYmxlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRMZWZ0LCBub25lLCBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcmlnaHQsIGxlZnQgfSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRMZWZ0KHJpZ2h0KDEpKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0TGVmdChsZWZ0KCdhJykpLCBzb21lKCdhJykpXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TGVmdCA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKG1hLl90YWcgPT09ICdSaWdodCcgPyBub25lIDogc29tZShtYS5sZWZ0KSk7IH07XG4vKipcbiAqIFJldHVybnMgdGhlIGBSaWdodGAgdmFsdWUgb2YgYW4gYEVpdGhlcmAgaWYgcG9zc2libGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldFJpZ2h0LCBub25lLCBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcmlnaHQsIGxlZnQgfSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRSaWdodChyaWdodCgxKSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldFJpZ2h0KGxlZnQoJ2EnKSksIG5vbmUpXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0UmlnaHQgPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChtYS5fdGFnID09PSAnTGVmdCcgPyBub25lIDogc29tZShtYS5yaWdodCkpOyB9O1xudmFyIF9tYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIG1hcChmKSk7IH07XG52YXIgX2FwID0gZnVuY3Rpb24gKGZhYiwgZmEpIHsgcmV0dXJuIHBpcGUoZmFiLCBhcChmYSkpOyB9O1xudmFyIF9yZWR1Y2UgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZShiLCBmKSk7IH07XG52YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTtcbnZhciBfcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0KGIsIGYpKTsgfTtcbnZhciBfdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZUYgPSB0cmF2ZXJzZShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiBwaXBlKHRhLCB0cmF2ZXJzZUYoZikpOyB9O1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2FsdCA9IGZ1bmN0aW9uIChmYSwgdGhhdCkgeyByZXR1cm4gcGlwZShmYSwgYWx0KHRoYXQpKTsgfTtcbnZhciBfZmlsdGVyID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlcihwcmVkaWNhdGUpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2ZpbHRlck1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyTWFwKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX2V4dGVuZCA9IGZ1bmN0aW9uICh3YSwgZikgeyByZXR1cm4gcGlwZSh3YSwgZXh0ZW5kKGYpKTsgfTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbiA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbihwcmVkaWNhdGUpKTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9wYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbk1hcChmKSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdPcHRpb24nO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTaG93ID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgc2hvdzogZnVuY3Rpb24gKG1hKSB7IHJldHVybiAoaXNOb25lKG1hKSA/ICdub25lJyA6IFwic29tZShcIi5jb25jYXQoUy5zaG93KG1hLnZhbHVlKSwgXCIpXCIpKTsgfVxufSk7IH07XG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBnZXRFcSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IEUgPSBnZXRFcShOLkVxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKG5vbmUsIG5vbmUpLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKG5vbmUsIHNvbWUoMSkpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBub25lKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgc29tZSgyKSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIHNvbWUoMSkpLCB0cnVlKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldEVxID0gZnVuY3Rpb24gKEUpIHsgcmV0dXJuICh7XG4gICAgZXF1YWxzOiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCA9PT0geSB8fCAoaXNOb25lKHgpID8gaXNOb25lKHkpIDogaXNOb25lKHkpID8gZmFsc2UgOiBFLmVxdWFscyh4LnZhbHVlLCB5LnZhbHVlKSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBUaGUgYE9yZGAgaW5zdGFuY2UgYWxsb3dzIGBPcHRpb25gIHZhbHVlcyB0byBiZSBjb21wYXJlZCB3aXRoXG4gKiBgY29tcGFyZWAsIHdoZW5ldmVyIHRoZXJlIGlzIGFuIGBPcmRgIGluc3RhbmNlIGZvclxuICogdGhlIHR5cGUgdGhlIGBPcHRpb25gIGNvbnRhaW5zLlxuICpcbiAqIGBOb25lYCBpcyBjb25zaWRlcmVkIHRvIGJlIGxlc3MgdGhhbiBhbnkgYFNvbWVgIHZhbHVlLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgZ2V0T3JkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgTyA9IGdldE9yZChOLk9yZClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUobm9uZSwgbm9uZSksIDApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKG5vbmUsIHNvbWUoMSkpLCAtMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoc29tZSgxKSwgbm9uZSksIDEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIHNvbWUoMikpLCAtMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoc29tZSgxKSwgc29tZSgxKSksIDApXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JkID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgZXF1YWxzOiBnZXRFcShPKS5lcXVhbHMsXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuICh4ID09PSB5ID8gMCA6IGlzU29tZSh4KSA/IChpc1NvbWUoeSkgPyBPLmNvbXBhcmUoeC52YWx1ZSwgeS52YWx1ZSkgOiAxKSA6IC0xKTsgfVxufSk7IH07XG4vKipcbiAqIE1vbm9pZCByZXR1cm5pbmcgdGhlIGxlZnQtbW9zdCBub24tYE5vbmVgIHZhbHVlLiBJZiBib3RoIG9wZXJhbmRzIGFyZSBgU29tZWBzIHRoZW4gdGhlIGlubmVyIHZhbHVlcyBhcmVcbiAqIGNvbmNhdGVuYXRlZCB1c2luZyB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGBcbiAqXG4gKiB8IHggICAgICAgfCB5ICAgICAgIHwgY29uY2F0KHgsIHkpICAgICAgIHxcbiAqIHwgLS0tLS0tLSB8IC0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0gfFxuICogfCBub25lICAgIHwgbm9uZSAgICB8IG5vbmUgICAgICAgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBub25lICAgIHwgc29tZShhKSAgICAgICAgICAgIHxcbiAqIHwgbm9uZSAgICB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgc29tZShiKSB8IHNvbWUoY29uY2F0KGEsIGIpKSB8XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldE1vbm9pZCwgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IFNlbWlncm91cFN1bSB9IGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBNID0gZ2V0TW9ub2lkKFNlbWlncm91cFN1bSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgbm9uZSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIG5vbmUpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBzb21lKDEpKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgc29tZSgyKSksIHNvbWUoMykpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TW9ub2lkID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gKGlzTm9uZSh4KSA/IHkgOiBpc05vbmUoeSkgPyB4IDogc29tZShTLmNvbmNhdCh4LnZhbHVlLCB5LnZhbHVlKSkpOyB9LFxuICAgIGVtcHR5OiBub25lXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IG5vbmUgOiBzb21lKGYoZmEudmFsdWUpKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3IgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwXG59O1xuLyoqXG4gKiBNYXBzIHRoZSBgU29tZWAgdmFsdWUgb2YgdGhpcyBgT3B0aW9uYCB0byB0aGUgc3BlY2lmaWVkIGNvbnN0YW50IHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgYXMgPSBkdWFsKDIsIGFzXyhGdW5jdG9yKSk7XG4vKipcbiAqIE1hcHMgdGhlIGBTb21lYCB2YWx1ZSBvZiB0aGlzIGBPcHRpb25gIHRvIHRoZSB2b2lkIGNvbnN0YW50IHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgYXNVbml0ID0gYXNVbml0XyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgb2YgPSBzb21lO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgUG9pbnRlZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmdW5jdGlvbiAoZmFiKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYWIpID8gbm9uZSA6IGlzTm9uZShmYSkgPyBub25lIDogc29tZShmYWIudmFsdWUoZmEudmFsdWUpKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbGljYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTQuMFxuICovXG5leHBvcnQgdmFyIGZsYXRNYXAgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgZnVuY3Rpb24gKG1hLCBmKSB7IHJldHVybiAoaXNOb25lKG1hKSA/IG5vbmUgOiBmKG1hLnZhbHVlKSk7IH0pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQ2hhaW4gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIE1vbmFkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZSA9IGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IGIgOiBmKGIsIGZhLnZhbHVlKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkTWFwID0gZnVuY3Rpb24gKE0pIHsgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IE0uZW1wdHkgOiBmKGZhLnZhbHVlKTtcbn07IH07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IGIgOiBmKGZhLnZhbHVlLCBiKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBwcm92aWRlZCBgT3B0aW9uYCBgdGhhdGAgaWYgYHNlbGZgIGlzIGBOb25lYCwgb3RoZXJ3aXNlIHJldHVybnMgYHNlbGZgLlxuICpcbiAqIEBwYXJhbSBzZWxmIC0gVGhlIGZpcnN0IGBPcHRpb25gIHRvIGJlIGNoZWNrZWQuXG4gKiBAcGFyYW0gdGhhdCAtIFRoZSBgT3B0aW9uYCB0byByZXR1cm4gaWYgYHNlbGZgIGlzIGBOb25lYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTyBmcm9tIFwiZnAtdHMvT3B0aW9uXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8ubm9uZSwgKCkgPT4gTy5ub25lKSwgTy5ub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLnNvbWUoMSksICgpID0+IE8ubm9uZSksIE8uc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5ub25lLCAoKSA9PiBPLnNvbWUoJ2InKSksIE8uc29tZSgnYicpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLnNvbWUoMSksICgpID0+IE8uc29tZSgnYicpKSwgTy5zb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIG9yRWxzZSA9IGR1YWwoMiwgZnVuY3Rpb24gKHNlbGYsIHRoYXQpIHsgcmV0dXJuIChpc05vbmUoc2VsZikgPyB0aGF0KCkgOiBzZWxmKTsgfSk7XG4vKipcbiAqIEFsaWFzIG9mIGBvckVsc2VgLlxuICpcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BhbHRgXSgjYWx0KS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGFsdFcgPSBvckVsc2U7XG4vKipcbiAqIEFsaWFzIG9mIGBvckVsc2VgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFsdCA9IG9yRWxzZTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQWx0ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhbHQ6IF9hbHRcbn07XG4vKipcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIHplcm8gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBub25lOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgWmVybyA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICB6ZXJvOiB6ZXJvXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBndWFyZCA9IC8qI19fUFVSRV9fKi8gZ3VhcmRfKFplcm8sIFBvaW50ZWQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBbHRlcm5hdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgYWx0OiBfYWx0LFxuICAgIHplcm86IHplcm9cbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGV4dGVuZCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAod2EpIHtcbiAgICByZXR1cm4gaXNOb25lKHdhKSA/IG5vbmUgOiBzb21lKGYod2EpKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEV4dGVuZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjb21wYWN0ID0gLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbnZhciBkZWZhdWx0U2VwYXJhdGVkID0gLyojX19QVVJFX18qLyBzZXBhcmF0ZWQobm9uZSwgbm9uZSk7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNlcGFyYXRlID0gZnVuY3Rpb24gKG1hKSB7XG4gICAgcmV0dXJuIGlzTm9uZShtYSkgPyBkZWZhdWx0U2VwYXJhdGVkIDogc2VwYXJhdGVkKGdldExlZnQobWEudmFsdWUpLCBnZXRSaWdodChtYS52YWx1ZSkpO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29tcGFjdGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGVcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUoZmEpID8gbm9uZSA6IHByZWRpY2F0ZShmYS52YWx1ZSkgPyBmYSA6IG5vbmU7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlck1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhKSA/IG5vbmUgOiBmKGZhLnZhbHVlKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbiA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQoX2ZpbHRlcihmYSwgbm90KHByZWRpY2F0ZSkpLCBfZmlsdGVyKGZhLCBwcmVkaWNhdGUpKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZsb3cobWFwKGYpLCBzZXBhcmF0ZSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzTm9uZSh0YSkgPyBGLm9mKG5vbmUpIDogRi5tYXAoZih0YS52YWx1ZSksIHNvbWUpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgc2VxdWVuY2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZSh0YSkgPyBGLm9mKG5vbmUpIDogRi5tYXAodGEudmFsdWUsIHNvbWUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2Vcbn07XG52YXIgX3dpdGhlciA9IC8qI19fUFVSRV9fKi8gd2l0aGVyRGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xudmFyIF93aWx0ID0gLyojX19QVVJFX18qLyB3aWx0RGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aXRoZXIgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciBfd2l0aGVyRiA9IF93aXRoZXIoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIF93aXRoZXJGKGZhLCBmKTsgfTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpbHQgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciBfd2lsdEYgPSBfd2lsdChGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3dpbHRGKGZhLCBmKTsgfTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIFdpdGhlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4vKipcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIHRocm93RXJyb3IgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBub25lOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZFRocm93ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICB0aHJvd0Vycm9yOiB0aHJvd0Vycm9yXG59O1xuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGBFaXRoZXJgIHRvIGFuIGBPcHRpb25gIGRpc2NhcmRpbmcgdGhlIGVycm9yLlxuICpcbiAqIEFsaWFzIG9mIFtnZXRSaWdodF0oI2dldHJpZ2h0KVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVpdGhlciA9IGdldFJpZ2h0O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgRnJvbUVpdGhlciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBmcm9tRWl0aGVyOiBmcm9tRWl0aGVyXG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gcmVmaW5lbWVudHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9wdGlvbiBpcyBhbiBpbnN0YW5jZSBvZiBgU29tZWAsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBpc1NvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzU29tZShzb21lKDEpKSwgdHJ1ZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc1NvbWUobm9uZSksIGZhbHNlKVxuICpcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgaXNTb21lID0gXy5pc1NvbWU7XG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBvcHRpb24gaXMgYE5vbmVgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgaXNOb25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc05vbmUoc29tZSgxKSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzTm9uZShub25lKSwgdHJ1ZSlcbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGlzTm9uZSA9IGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZmEuX3RhZyA9PT0gJ05vbmUnOyB9O1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgbWF0Y2hgXSgjbWF0Y2gpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBoYW5kbGVyIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoVyA9IGZ1bmN0aW9uIChvbk5vbmUsIG9uU29tZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBvbk5vbmUoKSA6IG9uU29tZShtYS52YWx1ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEFsaWFzIG9mIFtgbWF0Y2hXYF0oI21hdGNodykuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkVyA9IG1hdGNoVztcbi8qKlxuICogVGFrZXMgYSAobGF6eSkgZGVmYXVsdCB2YWx1ZSwgYSBmdW5jdGlvbiwgYW5kIGFuIGBPcHRpb25gIHZhbHVlLCBpZiB0aGUgYE9wdGlvbmAgdmFsdWUgaXMgYE5vbmVgIHRoZSBkZWZhdWx0IHZhbHVlIGlzXG4gKiByZXR1cm5lZCwgb3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSB2YWx1ZSBpbnNpZGUgdGhlIGBTb21lYCBhbmQgdGhlIHJlc3VsdCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgbWF0Y2ggfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgbWF0Y2goKCkgPT4gJ2Egbm9uZScsIGEgPT4gYGEgc29tZSBjb250YWluaW5nICR7YX1gKVxuICogICApLFxuICogICAnYSBzb21lIGNvbnRhaW5pbmcgMSdcbiAqIClcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBtYXRjaCgoKSA9PiAnYSBub25lJywgYSA9PiBgYSBzb21lIGNvbnRhaW5pbmcgJHthfWApXG4gKiAgICksXG4gKiAgICdhIG5vbmUnXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaCA9IG1hdGNoVztcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaGBdKCNtYXRjaCkuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZvbGQgPSBtYXRjaDtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGdldE9yRWxzZWBdKCNnZXRvcmVsc2UpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSBoYW5kbGVyIHJldHVybiB0eXBlIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuNi4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JFbHNlVyA9IGZ1bmN0aW9uIChvbk5vbmUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gb25Ob25lKCkgOiBtYS52YWx1ZTtcbiAgICB9O1xufTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIHZhbHVlIG91dCBvZiB0aGUgc3RydWN0dXJlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSByZXR1cm5zIHRoZSBnaXZlbiBkZWZhdWx0IHZhbHVlXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGdldE9yRWxzZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBnZXRPckVsc2UoKCkgPT4gMClcbiAqICAgKSxcbiAqICAgMVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgZ2V0T3JFbHNlKCgpID0+IDApXG4gKiAgICksXG4gKiAgIDBcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE9yRWxzZSA9IGdldE9yRWxzZVc7XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhcCA9IC8qI19fUFVSRV9fKi8gZmxhcF8oRnVuY3Rvcik7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBGaXJzdCA9IC8qI19fUFVSRV9fKi8gYXBGaXJzdF8oQXBwbHkpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIHNlY29uZC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcFNlY29uZCA9IC8qI19fUFVSRV9fKi8gYXBTZWNvbmRfKEFwcGx5KTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZsYXR0ZW4gPSBjb21wYWN0O1xuLyoqXG4gKiBDb21wb3NlcyBjb21wdXRhdGlvbnMgaW4gc2VxdWVuY2UsIHVzaW5nIHRoZSByZXR1cm4gdmFsdWUgb2Ygb25lIGNvbXB1dGF0aW9uIHRvIGRldGVybWluZSB0aGUgbmV4dCBjb21wdXRhdGlvbiBhbmRcbiAqIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjE1LjBcbiAqL1xuZXhwb3J0IHZhciB0YXAgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgY2hhaW5hYmxlLnRhcChDaGFpbikpO1xuLyoqXG4gKiBDb21wb3NlcyBjb21wdXRhdGlvbnMgaW4gc2VxdWVuY2UsIHVzaW5nIHRoZSByZXR1cm4gdmFsdWUgb2Ygb25lIGNvbXB1dGF0aW9uIHRvIGRldGVybWluZSB0aGUgbmV4dCBjb21wdXRhdGlvbiBhbmRcbiAqIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICogaW1wb3J0ICogYXMgTyBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBFIGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBjb25zdCBjb21wdXRlID0gKHZhbHVlOiBudW1iZXIpID0+IHBpcGUoXG4gKiAgIE8ub2YodmFsdWUpLFxuICogICBPLnRhcEVpdGhlcigodmFsdWUpID0+IHZhbHVlID4gMCA/IEUucmlnaHQoJ29rJykgOiBFLmxlZnQoJ2Vycm9yJykpLFxuICogKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcHV0ZSgxKSwgTy5vZigxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcHV0ZSgtNDIpLCBPLm5vbmUpXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgdGFwRWl0aGVyID0gLyojX19QVVJFX18qLyBkdWFsKDIsIHRhcEVpdGhlcl8oRnJvbUVpdGhlciwgQ2hhaW4pKTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZHVwbGljYXRlID0gLyojX19QVVJFX18qLyBleHRlbmQoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGZyb21FaXRoZXJLID0gLyojX19QVVJFX18qLyBmcm9tRWl0aGVyS18oRnJvbUVpdGhlcik7XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5FaXRoZXJLID0gXG4vKiNfX1BVUkVfXyovIGNoYWluRWl0aGVyS18oRnJvbUVpdGhlciwgQ2hhaW4pO1xuLyoqXG4gKiBBbGlhcyBvZiBgdGFwRWl0aGVyYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4xMi4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdEVpdGhlcksgPSB0YXBFaXRoZXI7XG4vKipcbiAqIENvbnN0cnVjdHMgYSBuZXcgYE9wdGlvbmAgZnJvbSBhIG51bGxhYmxlIHR5cGUuIElmIHRoZSB2YWx1ZSBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIHJldHVybnMgYE5vbmVgLCBvdGhlcndpc2VcbiAqIHJldHVybnMgdGhlIHZhbHVlIHdyYXBwZWQgaW4gYSBgU29tZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGZyb21OdWxsYWJsZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21OdWxsYWJsZSh1bmRlZmluZWQpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUobnVsbCksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21OdWxsYWJsZSgxKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZyb21OdWxsYWJsZSA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoYSA9PSBudWxsID8gbm9uZSA6IHNvbWUoYSkpOyB9O1xuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGV4Y2VwdGlvbiBpbnRvIGFuIGBPcHRpb25gLiBJZiBgZmAgdGhyb3dzLCByZXR1cm5zIGBOb25lYCwgb3RoZXJ3aXNlIHJldHVybnMgdGhlIG91dHB1dCB3cmFwcGVkIGluIGFcbiAqIGBTb21lYC5cbiAqXG4gKiBTZWUgYWxzbyBbYHRyeUNhdGNoS2BdKCN0cnljYXRjaGspLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCB0cnlDYXRjaCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICB0cnlDYXRjaCgoKSA9PiB7XG4gKiAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAqICAgfSksXG4gKiAgIG5vbmVcbiAqIClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodHJ5Q2F0Y2goKCkgPT4gMSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGludGVyb3BcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRyeUNhdGNoID0gZnVuY3Rpb24gKGYpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gc29tZShmKCkpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gbm9uZTtcbiAgICB9XG59O1xuLyoqXG4gKiBDb252ZXJ0cyBhIGZ1bmN0aW9uIHRoYXQgbWF5IHRocm93IHRvIG9uZSByZXR1cm5pbmcgYSBgT3B0aW9uYC5cbiAqXG4gKiBAY2F0ZWdvcnkgaW50ZXJvcFxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHRyeUNhdGNoSyA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ5Q2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gZi5hcHBseSh2b2lkIDAsIGEpOyB9KTtcbiAgICB9O1xufTtcbi8qKlxuICogUmV0dXJucyBhICpzbWFydCBjb25zdHJ1Y3RvciogZnJvbSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIG51bGxhYmxlIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmcm9tTnVsbGFibGVLLCBub25lLCBzb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IGYgPSAoczogc3RyaW5nKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAqICAgY29uc3QgbiA9IHBhcnNlRmxvYXQocylcbiAqICAgcmV0dXJuIGlzTmFOKG4pID8gdW5kZWZpbmVkIDogblxuICogfVxuICpcbiAqIGNvbnN0IGcgPSBmcm9tTnVsbGFibGVLKGYpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnKCcxJyksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGcoJ2EnKSwgbm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgbGlmdGluZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbU51bGxhYmxlSyA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmbG93KGYsIGZyb21OdWxsYWJsZSk7IH07XG4vKipcbiAqIFRoaXMgaXMgYGNoYWluYCArIGBmcm9tTnVsbGFibGVgLCB1c2VmdWwgd2hlbiB3b3JraW5nIHdpdGggb3B0aW9uYWwgdmFsdWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBmcm9tTnVsbGFibGUsIGNoYWluTnVsbGFibGVLIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGludGVyZmFjZSBFbXBsb3llZSB7XG4gKiAgIHJlYWRvbmx5IGNvbXBhbnk/OiB7XG4gKiAgICAgcmVhZG9ubHkgYWRkcmVzcz86IHtcbiAqICAgICAgIHJlYWRvbmx5IHN0cmVldD86IHtcbiAqICAgICAgICAgcmVhZG9ubHkgbmFtZT86IHN0cmluZ1xuICogICAgICAgfVxuICogICAgIH1cbiAqICAgfVxuICogfVxuICpcbiAqIGNvbnN0IGVtcGxveWVlMTogRW1wbG95ZWUgPSB7IGNvbXBhbnk6IHsgYWRkcmVzczogeyBzdHJlZXQ6IHsgbmFtZTogJ2hpZ2ggc3RyZWV0JyB9IH0gfSB9XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBmcm9tTnVsbGFibGUoZW1wbG95ZWUxLmNvbXBhbnkpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGNvbXBhbnkgPT4gY29tcGFueS5hZGRyZXNzKSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhhZGRyZXNzID0+IGFkZHJlc3Muc3RyZWV0KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhzdHJlZXQgPT4gc3RyZWV0Lm5hbWUpXG4gKiAgICksXG4gKiAgIHNvbWUoJ2hpZ2ggc3RyZWV0JylcbiAqIClcbiAqXG4gKiBjb25zdCBlbXBsb3llZTI6IEVtcGxveWVlID0geyBjb21wYW55OiB7IGFkZHJlc3M6IHsgc3RyZWV0OiB7fSB9IH0gfVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgZnJvbU51bGxhYmxlKGVtcGxveWVlMi5jb21wYW55KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhjb21wYW55ID0+IGNvbXBhbnkuYWRkcmVzcyksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoYWRkcmVzcyA9PiBhZGRyZXNzLnN0cmVldCksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoc3RyZWV0ID0+IHN0cmVldC5uYW1lKVxuICogICApLFxuICogICBub25lXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGNoYWluTnVsbGFibGVLID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gbm9uZSA6IGZyb21OdWxsYWJsZShmKG1hLnZhbHVlKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyBgbnVsbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIHRvTnVsbGFibGUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgdG9OdWxsYWJsZVxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICB0b051bGxhYmxlXG4gKiAgICksXG4gKiAgIG51bGxcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRvTnVsbGFibGUgPSAvKiNfX1BVUkVfXyovIG1hdGNoKGNvbnN0TnVsbCwgaWRlbnRpdHkpO1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgYHVuZGVmaW5lZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIHRvVW5kZWZpbmVkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIHRvVW5kZWZpbmVkXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIHRvVW5kZWZpbmVkXG4gKiAgICksXG4gKiAgIHVuZGVmaW5lZFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdG9VbmRlZmluZWQgPSAvKiNfX1BVUkVfXyovIG1hdGNoKGNvbnN0VW5kZWZpbmVkLCBpZGVudGl0eSk7XG5leHBvcnQgZnVuY3Rpb24gZWxlbShFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBtYSkge1xuICAgICAgICBpZiAobWEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGVsZW1FXzEgPSBlbGVtKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gZWxlbUVfMShhLCBtYSk7IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBmYWxzZSA6IEUuZXF1YWxzKGEsIG1hLnZhbHVlKTtcbiAgICB9O1xufVxuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgcHJlZGljYXRlIGlzIHNhdGlzZmllZCBieSB0aGUgd3JhcHBlZCB2YWx1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBleGlzdHMgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgZXhpc3RzKG4gPT4gbiA+IDApXG4gKiAgICksXG4gKiAgIHRydWVcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAxKVxuICogICApLFxuICogICBmYWxzZVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgZXhpc3RzKG4gPT4gbiA+IDApXG4gKiAgICksXG4gKiAgIGZhbHNlXG4gKiApXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXhpc3RzID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBmYWxzZSA6IHByZWRpY2F0ZShtYS52YWx1ZSk7XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkbyBub3RhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIERvID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVjb3JkKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kVG8gPSAvKiNfX1BVUkVfXyovIGJpbmRUb18oRnVuY3Rvcik7XG52YXIgbGV0XyA9IC8qI19fUFVSRV9fKi8gbGV0X18oRnVuY3Rvcik7XG5leHBvcnQgeyBcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMy4wXG4gKi9cbmxldF8gYXMgbGV0IH07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZCA9IC8qI19fUFVSRV9fKi8gY2hhaW5hYmxlLmJpbmQoQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGFwUyA9IC8qI19fUFVSRV9fKi8gYXBTXyhBcHBseSk7XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBBcFQgPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWFkb25seUFycmF5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGFycmF5IHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5Tm9uRW1wdHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgdmFyIG8gPSBmKDAsIF8uaGVhZChhcykpO1xuICAgICAgICBpZiAoaXNOb25lKG8pKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9uZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gW28udmFsdWVdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgb18xID0gZihpLCBhc1tpXSk7XG4gICAgICAgICAgICBpZiAoaXNOb25lKG9fMSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dC5wdXNoKG9fMS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvbWUob3V0KTtcbiAgICB9O1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICB2YXIgZyA9IHRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4KGYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChfLmlzTm9uRW1wdHkoYXMpID8gZyhhcykgOiBBcFQpOyB9O1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZUFycmF5V2l0aEluZGV4ID0gdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlKEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlQXJyYXkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSNzZXF1ZW5jZShBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBzZXF1ZW5jZUFycmF5ID0gXG4vKiNfX1BVUkVfXyovIHRyYXZlcnNlQXJyYXkoaWRlbnRpdHkpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gbGVnYWN5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbiA9IGZsYXRNYXA7XG4vKipcbiAqIEFsaWFzIG9mIGB0YXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRmlyc3QgPSB0YXA7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFVzZSBgUmVmaW5lbWVudGAgbW9kdWxlIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZmluZW1lbnQoZ2V0T3B0aW9uKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBpc1NvbWUoZ2V0T3B0aW9uKGEpKTsgfTtcbn1cbi8qKlxuICogVXNlIFtgY2hhaW5OdWxsYWJsZUtgXSgjY2hhaW5udWxsYWJsZWspIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBtYXBOdWxsYWJsZSA9IGNoYWluTnVsbGFibGVLO1xuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYEZ1bmN0b3JgIGluc3RhbmNlLCBwYXNzIGBPLkZ1bmN0b3JgIGluc3RlYWQgb2YgYE8ub3B0aW9uYFxuICogKHdoZXJlIGBPYCBpcyBmcm9tIGBpbXBvcnQgTyBmcm9tICdmcC10cy9PcHRpb24nYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG9wdGlvbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFwOiBfYXAsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgemVybzogemVybyxcbiAgICBhbHQ6IF9hbHQsXG4gICAgZXh0ZW5kOiBfZXh0ZW5kLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHQsXG4gICAgdGhyb3dFcnJvcjogdGhyb3dFcnJvclxufTtcbi8qKlxuICogVXNlIFtgZ2V0QXBwbHlTZW1pZ3JvdXBgXSguL0FwcGx5LnRzLmh0bWwjZ2V0YXBwbHlzZW1pZ3JvdXApIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRBcHBseVNlbWlncm91cCA9IC8qI19fUFVSRV9fKi8gZ2V0QXBwbHlTZW1pZ3JvdXBfKEFwcGx5KTtcbi8qKlxuICogVXNlIFtgZ2V0QXBwbGljYXRpdmVNb25vaWRgXSguL0FwcGxpY2F0aXZlLnRzLmh0bWwjZ2V0YXBwbGljYXRpdmVtb25vaWQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRBcHBseU1vbm9pZCA9IC8qI19fUFVSRV9fKi8gZ2V0QXBwbGljYXRpdmVNb25vaWQoQXBwbGljYXRpdmUpO1xuLyoqXG4gKiBVc2VcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZmlyc3QgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogZ2V0TW9ub2lkKGZpcnN0KCkpXG4gKiBgYGBcbiAqXG4gKiBpbnN0ZWFkLlxuICpcbiAqIE1vbm9pZCByZXR1cm5pbmcgdGhlIGxlZnQtbW9zdCBub24tYE5vbmVgIHZhbHVlXG4gKlxuICogfCB4ICAgICAgIHwgeSAgICAgICB8IGNvbmNhdCh4LCB5KSB8XG4gKiB8IC0tLS0tLS0gfCAtLS0tLS0tIHwgLS0tLS0tLS0tLS0tIHxcbiAqIHwgbm9uZSAgICB8IG5vbmUgICAgfCBub25lICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgbm9uZSAgICB8IHNvbWUoYSkgICAgICB8XG4gKiB8IG5vbmUgICAgfCBzb21lKGIpIHwgc29tZShiKSAgICAgIHxcbiAqIHwgc29tZShhKSB8IHNvbWUoYikgfCBzb21lKGEpICAgICAgfFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRGaXJzdE1vbm9pZCwgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBjb25zdCBNID0gZ2V0Rmlyc3RNb25vaWQ8bnVtYmVyPigpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIG5vbmUpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBub25lKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgc29tZSgyKSksIHNvbWUoMikpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIHNvbWUoMikpLCBzb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rmlyc3RNb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRNb25vaWQoZmlyc3QoKSk7IH07XG4vKipcbiAqIFVzZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBsYXN0IH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGdldE1vbm9pZChsYXN0KCkpXG4gKiBgYGBcbiAqXG4gKiBpbnN0ZWFkLlxuICpcbiAqIE1vbm9pZCByZXR1cm5pbmcgdGhlIHJpZ2h0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZVxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShiKSAgICAgIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TGFzdE1vbm9pZCwgc29tZSwgbm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBjb25zdCBNID0gZ2V0TGFzdE1vbm9pZDxudW1iZXI+KClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgbm9uZSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIG5vbmUpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgc29tZSgyKSksIHNvbWUoMikpXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRMYXN0TW9ub2lkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0TW9ub2lkKGxhc3QoKSk7IH07XG4iLAogICJpbXBvcnQgeyBnZXRBcHBsaWNhdGl2ZU1vbm9pZCB9IGZyb20gJy4vQXBwbGljYXRpdmUnO1xuaW1wb3J0IHsgYXBGaXJzdCBhcyBhcEZpcnN0XywgYXBTIGFzIGFwU18sIGFwU2Vjb25kIGFzIGFwU2Vjb25kXywgZ2V0QXBwbHlTZW1pZ3JvdXAgYXMgZ2V0QXBwbHlTZW1pZ3JvdXBfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgKiBhcyBjaGFpbmFibGUgZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBjaGFpbkVpdGhlcksgYXMgY2hhaW5FaXRoZXJLXywgZnJvbUVpdGhlcksgYXMgZnJvbUVpdGhlcktfLCB0YXBFaXRoZXIgYXMgdGFwRWl0aGVyXyB9IGZyb20gJy4vRnJvbUVpdGhlcic7XG5pbXBvcnQgeyBjb25zdE51bGwsIGNvbnN0VW5kZWZpbmVkLCBkdWFsLCBmbG93LCBpZGVudGl0eSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgYXMgYXMgYXNfLCBhc1VuaXQgYXMgYXNVbml0XywgYmluZFRvIGFzIGJpbmRUb18sIGZsYXAgYXMgZmxhcF8sIGxldCBhcyBsZXRfXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0IHsgbm90IH0gZnJvbSAnLi9QcmVkaWNhdGUnO1xuaW1wb3J0IHsgZmlyc3QsIGxhc3QgfSBmcm9tICcuL1NlbWlncm91cCc7XG5pbXBvcnQgeyBzZXBhcmF0ZWQgfSBmcm9tICcuL1NlcGFyYXRlZCc7XG5pbXBvcnQgeyB3aWx0RGVmYXVsdCwgd2l0aGVyRGVmYXVsdCB9IGZyb20gJy4vV2l0aGVyYWJsZSc7XG5pbXBvcnQgeyBndWFyZCBhcyBndWFyZF8gfSBmcm9tICcuL1plcm8nO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29uc3RydWN0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIGBOb25lYCBkb2Vzbid0IGhhdmUgYSBjb25zdHJ1Y3RvciwgaW5zdGVhZCB5b3UgY2FuIHVzZSBpdCBkaXJlY3RseSBhcyBhIHZhbHVlLiBSZXByZXNlbnRzIGEgbWlzc2luZyB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBub25lID0gXy5ub25lO1xuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgYFNvbWVgLiBSZXByZXNlbnRzIGFuIG9wdGlvbmFsIHZhbHVlIHRoYXQgZXhpc3RzLlxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNvbWUgPSBfLnNvbWU7XG5leHBvcnQgZnVuY3Rpb24gZnJvbVByZWRpY2F0ZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChwcmVkaWNhdGUoYSkgPyBzb21lKGEpIDogbm9uZSk7IH07XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGBMZWZ0YCB2YWx1ZSBvZiBhbiBgRWl0aGVyYCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TGVmdCwgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHJpZ2h0LCBsZWZ0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0TGVmdChyaWdodCgxKSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldExlZnQobGVmdCgnYScpKSwgc29tZSgnYScpKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldExlZnQgPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChtYS5fdGFnID09PSAnUmlnaHQnID8gbm9uZSA6IHNvbWUobWEubGVmdCkpOyB9O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBgUmlnaHRgIHZhbHVlIG9mIGFuIGBFaXRoZXJgIGlmIHBvc3NpYmxlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRSaWdodCwgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHJpZ2h0LCBsZWZ0IH0gZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0UmlnaHQocmlnaHQoMSkpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRSaWdodChsZWZ0KCdhJykpLCBub25lKVxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldFJpZ2h0ID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAobWEuX3RhZyA9PT0gJ0xlZnQnID8gbm9uZSA6IHNvbWUobWEucmlnaHQpKTsgfTtcbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xudmFyIF9hcCA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbnZhciBfcmVkdWNlID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2UoYiwgZikpOyB9O1xudmFyIF9mb2xkTWFwID0gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcE0gPSBmb2xkTWFwKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBNKGYpKTsgfTtcbn07XG52YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodChiLCBmKSk7IH07XG52YXIgX3RyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gcGlwZSh0YSwgdHJhdmVyc2VGKGYpKTsgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9hbHQgPSBmdW5jdGlvbiAoZmEsIHRoYXQpIHsgcmV0dXJuIHBpcGUoZmEsIGFsdCh0aGF0KSk7IH07XG52YXIgX2ZpbHRlciA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXIocHJlZGljYXRlKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9maWx0ZXJNYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlck1hcChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9leHRlbmQgPSBmdW5jdGlvbiAod2EsIGYpIHsgcmV0dXJuIHBpcGUod2EsIGV4dGVuZChmKSk7IH07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudmFyIF9wYXJ0aXRpb24gPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb24ocHJlZGljYXRlKSk7XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25NYXAoZikpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBVUkkgPSAnT3B0aW9uJztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U2hvdyA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIHNob3c6IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKGlzTm9uZShtYSkgPyAnbm9uZScgOiBcInNvbWUoXCIuY29uY2F0KFMuc2hvdyhtYS52YWx1ZSksIFwiKVwiKSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgZ2V0RXEgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBFID0gZ2V0RXEoTi5FcSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhub25lLCBub25lKSwgdHJ1ZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhub25lLCBzb21lKDEpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgbm9uZSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIHNvbWUoMikpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBzb21lKDEpKSwgdHJ1ZSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRFcSA9IGZ1bmN0aW9uIChFKSB7IHJldHVybiAoe1xuICAgIGVxdWFsczogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggPT09IHkgfHwgKGlzTm9uZSh4KSA/IGlzTm9uZSh5KSA6IGlzTm9uZSh5KSA/IGZhbHNlIDogRS5lcXVhbHMoeC52YWx1ZSwgeS52YWx1ZSkpOyB9XG59KTsgfTtcbi8qKlxuICogVGhlIGBPcmRgIGluc3RhbmNlIGFsbG93cyBgT3B0aW9uYCB2YWx1ZXMgdG8gYmUgY29tcGFyZWQgd2l0aFxuICogYGNvbXBhcmVgLCB3aGVuZXZlciB0aGVyZSBpcyBhbiBgT3JkYCBpbnN0YW5jZSBmb3JcbiAqIHRoZSB0eXBlIHRoZSBgT3B0aW9uYCBjb250YWlucy5cbiAqXG4gKiBgTm9uZWAgaXMgY29uc2lkZXJlZCB0byBiZSBsZXNzIHRoYW4gYW55IGBTb21lYCB2YWx1ZS5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGdldE9yZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE8gPSBnZXRPcmQoTi5PcmQpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKG5vbmUsIG5vbmUpLCAwKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShub25lLCBzb21lKDEpKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIG5vbmUpLCAxKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBzb21lKDIpKSwgLTEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoTy5jb21wYXJlKHNvbWUoMSksIHNvbWUoMSkpLCAwKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE9yZCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIGVxdWFsczogZ2V0RXEoTykuZXF1YWxzLFxuICAgIGNvbXBhcmU6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiAoeCA9PT0geSA/IDAgOiBpc1NvbWUoeCkgPyAoaXNTb21lKHkpID8gTy5jb21wYXJlKHgudmFsdWUsIHkudmFsdWUpIDogMSkgOiAtMSk7IH1cbn0pOyB9O1xuLyoqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSBsZWZ0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZS4gSWYgYm90aCBvcGVyYW5kcyBhcmUgYFNvbWVgcyB0aGVuIHRoZSBpbm5lciB2YWx1ZXMgYXJlXG4gKiBjb25jYXRlbmF0ZWQgdXNpbmcgdGhlIHByb3ZpZGVkIGBTZW1pZ3JvdXBgXG4gKlxuICogfCB4ICAgICAgIHwgeSAgICAgICB8IGNvbmNhdCh4LCB5KSAgICAgICB8XG4gKiB8IC0tLS0tLS0gfCAtLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tIHxcbiAqIHwgbm9uZSAgICB8IG5vbmUgICAgfCBub25lICAgICAgICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgbm9uZSAgICB8IHNvbWUoYSkgICAgICAgICAgICB8XG4gKiB8IG5vbmUgICAgfCBzb21lKGIpIHwgc29tZShiKSAgICAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IHNvbWUoYikgfCBzb21lKGNvbmNhdChhLCBiKSkgfFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgTSA9IGdldE1vbm9pZChTZW1pZ3JvdXBTdW0pXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIG5vbmUpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBub25lKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgc29tZSgxKSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIHNvbWUoMikpLCBzb21lKDMpKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIChpc05vbmUoeCkgPyB5IDogaXNOb25lKHkpID8geCA6IHNvbWUoUy5jb25jYXQoeC52YWx1ZSwgeS52YWx1ZSkpKTsgfSxcbiAgICBlbXB0eTogbm9uZVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogc29tZShmKGZhLnZhbHVlKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogTWFwcyB0aGUgYFNvbWVgIHZhbHVlIG9mIHRoaXMgYE9wdGlvbmAgdG8gdGhlIHNwZWNpZmllZCBjb25zdGFudCB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIGFzID0gZHVhbCgyLCBhc18oRnVuY3RvcikpO1xuLyoqXG4gKiBNYXBzIHRoZSBgU29tZWAgdmFsdWUgb2YgdGhpcyBgT3B0aW9uYCB0byB0aGUgdm9pZCBjb25zdGFudCB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIGFzVW5pdCA9IGFzVW5pdF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIG9mID0gc29tZTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcCA9IGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZnVuY3Rpb24gKGZhYikge1xuICAgIHJldHVybiBpc05vbmUoZmFiKSA/IG5vbmUgOiBpc05vbmUoZmEpID8gbm9uZSA6IHNvbWUoZmFiLnZhbHVlKGZhLnZhbHVlKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbHkgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFwcGxpY2F0aXZlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjE0LjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0TWFwID0gLyojX19QVVJFX18qLyBkdWFsKDIsIGZ1bmN0aW9uIChtYSwgZikgeyByZXR1cm4gKGlzTm9uZShtYSkgPyBub25lIDogZihtYS52YWx1ZSkpOyB9KTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIENoYWluID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2UgPSBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBiIDogZihiLCBmYS52YWx1ZSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7IHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBNLmVtcHR5IDogZihmYS52YWx1ZSk7XG59OyB9OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBiIDogZihmYS52YWx1ZSwgYik7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodFxufTtcbi8qKlxuICogUmV0dXJucyB0aGUgcHJvdmlkZWQgYE9wdGlvbmAgYHRoYXRgIGlmIGBzZWxmYCBpcyBgTm9uZWAsIG90aGVyd2lzZSByZXR1cm5zIGBzZWxmYC5cbiAqXG4gKiBAcGFyYW0gc2VsZiAtIFRoZSBmaXJzdCBgT3B0aW9uYCB0byBiZSBjaGVja2VkLlxuICogQHBhcmFtIHRoYXQgLSBUaGUgYE9wdGlvbmAgdG8gcmV0dXJuIGlmIGBzZWxmYCBpcyBgTm9uZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE8gZnJvbSBcImZwLXRzL09wdGlvblwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLm5vbmUsICgpID0+IE8ubm9uZSksIE8ubm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5zb21lKDEpLCAoKSA9PiBPLm5vbmUpLCBPLnNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8ubm9uZSwgKCkgPT4gTy5zb21lKCdiJykpLCBPLnNvbWUoJ2InKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5zb21lKDEpLCAoKSA9PiBPLnNvbWUoJ2InKSksIE8uc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBvckVsc2UgPSBkdWFsKDIsIGZ1bmN0aW9uIChzZWxmLCB0aGF0KSB7IHJldHVybiAoaXNOb25lKHNlbGYpID8gdGhhdCgpIDogc2VsZik7IH0pO1xuLyoqXG4gKiBBbGlhcyBvZiBgb3JFbHNlYC5cbiAqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgYWx0YF0oI2FsdCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIHJldHVybiB0eXBlcyB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBhbHRXID0gb3JFbHNlO1xuLyoqXG4gKiBBbGlhcyBvZiBgb3JFbHNlYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhbHQgPSBvckVsc2U7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYWx0OiBfYWx0XG59O1xuLyoqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciB6ZXJvID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9uZTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIFplcm8gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ3VhcmQgPSAvKiNfX1BVUkVfXyovIGd1YXJkXyhaZXJvLCBQb2ludGVkKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQWx0ZXJuYXRpdmUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFsdDogX2FsdCxcbiAgICB6ZXJvOiB6ZXJvXG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBleHRlbmQgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHdhKSB7XG4gICAgcmV0dXJuIGlzTm9uZSh3YSkgPyBub25lIDogc29tZShmKHdhKSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBFeHRlbmQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGV4dGVuZDogX2V4dGVuZFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY29tcGFjdCA9IC8qI19fUFVSRV9fKi8gZmxhdE1hcChpZGVudGl0eSk7XG52YXIgZGVmYXVsdFNlcGFyYXRlZCA9IC8qI19fUFVSRV9fKi8gc2VwYXJhdGVkKG5vbmUsIG5vbmUpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzZXBhcmF0ZSA9IGZ1bmN0aW9uIChtYSkge1xuICAgIHJldHVybiBpc05vbmUobWEpID8gZGVmYXVsdFNlcGFyYXRlZCA6IHNlcGFyYXRlZChnZXRMZWZ0KG1hLnZhbHVlKSwgZ2V0UmlnaHQobWEudmFsdWUpKTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIENvbXBhY3RhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXIgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKGZhKSA/IG5vbmUgOiBwcmVkaWNhdGUoZmEudmFsdWUpID8gZmEgOiBub25lO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJNYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogZihmYS52YWx1ZSk7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb24gPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKF9maWx0ZXIoZmEsIG5vdChwcmVkaWNhdGUpKSwgX2ZpbHRlcihmYSwgcHJlZGljYXRlKSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmbG93KG1hcChmKSwgc2VwYXJhdGUpOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGaWx0ZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHtcbiAgICAgICAgICAgIHJldHVybiBpc05vbmUodGEpID8gRi5vZihub25lKSA6IEYubWFwKGYodGEudmFsdWUpLCBzb21lKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjYuM1xuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUodGEpID8gRi5vZihub25lKSA6IEYubWFwKHRhLnZhbHVlLCBzb21lKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xudmFyIF93aXRoZXIgPSAvKiNfX1BVUkVfXyovIHdpdGhlckRlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbnZhciBfd2lsdCA9IC8qI19fUFVSRV9fKi8gd2lsdERlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2l0aGVyID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpdGhlckYgPSBfd2l0aGVyKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2l0aGVyRihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aWx0ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgX3dpbHRGID0gX3dpbHQoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIF93aWx0RihmYSwgZik7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBXaXRoZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuLyoqXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciB0aHJvd0Vycm9yID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9uZTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWRUaHJvdyA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2YsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgdGhyb3dFcnJvcjogdGhyb3dFcnJvclxufTtcbi8qKlxuICogVHJhbnNmb3JtcyBhbiBgRWl0aGVyYCB0byBhbiBgT3B0aW9uYCBkaXNjYXJkaW5nIHRoZSBlcnJvci5cbiAqXG4gKiBBbGlhcyBvZiBbZ2V0UmlnaHRdKCNnZXRyaWdodClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZyb21FaXRoZXIgPSBnZXRSaWdodDtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIEZyb21FaXRoZXIgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgZnJvbUVpdGhlcjogZnJvbUVpdGhlclxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBvcHRpb24gaXMgYW4gaW5zdGFuY2Ugb2YgYFNvbWVgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgaXNTb21lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc1NvbWUoc29tZSgxKSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNTb21lKG5vbmUpLCBmYWxzZSlcbiAqXG4gKiBAY2F0ZWdvcnkgcmVmaW5lbWVudHNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGlzU29tZSA9IF8uaXNTb21lO1xuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb3B0aW9uIGlzIGBOb25lYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGlzTm9uZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNOb25lKHNvbWUoMSkpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChpc05vbmUobm9uZSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc05vbmUgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZhLl90YWcgPT09ICdOb25lJzsgfTtcbi8qKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IHBhdHRlcm4gbWF0Y2hpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBtYXRjaFcgPSBmdW5jdGlvbiAob25Ob25lLCBvblNvbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gb25Ob25lKCkgOiBvblNvbWUobWEudmFsdWUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoV2BdKCNtYXRjaHcpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZFcgPSBtYXRjaFc7XG4vKipcbiAqIFRha2VzIGEgKGxhenkpIGRlZmF1bHQgdmFsdWUsIGEgZnVuY3Rpb24sIGFuZCBhbiBgT3B0aW9uYCB2YWx1ZSwgaWYgdGhlIGBPcHRpb25gIHZhbHVlIGlzIGBOb25lYCB0aGUgZGVmYXVsdCB2YWx1ZSBpc1xuICogcmV0dXJuZWQsIG90aGVyd2lzZSB0aGUgZnVuY3Rpb24gaXMgYXBwbGllZCB0byB0aGUgdmFsdWUgaW5zaWRlIHRoZSBgU29tZWAgYW5kIHRoZSByZXN1bHQgaXMgcmV0dXJuZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIG1hdGNoIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIG1hdGNoKCgpID0+ICdhIG5vbmUnLCBhID0+IGBhIHNvbWUgY29udGFpbmluZyAke2F9YClcbiAqICAgKSxcbiAqICAgJ2Egc29tZSBjb250YWluaW5nIDEnXG4gKiApXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgbWF0Y2goKCkgPT4gJ2Egbm9uZScsIGEgPT4gYGEgc29tZSBjb250YWluaW5nICR7YX1gKVxuICogICApLFxuICogICAnYSBub25lJ1xuICogKVxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2ggPSBtYXRjaFc7XG4vKipcbiAqIEFsaWFzIG9mIFtgbWF0Y2hgXSgjbWF0Y2gpLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkID0gbWF0Y2g7XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BnZXRPckVsc2VgXSgjZ2V0b3JlbHNlKS5cbiAqXG4gKiBUaGUgYFdgIHN1ZmZpeCAoc2hvcnQgZm9yICoqVyoqaWRlbmluZykgbWVhbnMgdGhhdCB0aGUgaGFuZGxlciByZXR1cm4gdHlwZSB3aWxsIGJlIG1lcmdlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgZXJyb3IgaGFuZGxpbmdcbiAqIEBzaW5jZSAyLjYuMFxuICovXG5leHBvcnQgdmFyIGdldE9yRWxzZVcgPSBmdW5jdGlvbiAob25Ob25lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG9uTm9uZSgpIDogbWEudmFsdWU7XG4gICAgfTtcbn07XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyB0aGUgZ2l2ZW4gZGVmYXVsdCB2YWx1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBnZXRPckVsc2UgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgZ2V0T3JFbHNlKCgpID0+IDApXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIGdldE9yRWxzZSgoKSA9PiAwKVxuICogICApLFxuICogICAwXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPckVsc2UgPSBnZXRPckVsc2VXO1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZsYXAgPSAvKiNfX1BVUkVfXyovIGZsYXBfKEZ1bmN0b3IpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwRmlyc3QgPSAvKiNfX1BVUkVfXyovIGFwRmlyc3RfKEFwcGx5KTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBzZWNvbmQuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTZWNvbmQgPSAvKiNfX1BVUkVfXyovIGFwU2Vjb25kXyhBcHBseSk7XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0dGVuID0gY29tcGFjdDtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xNS4wXG4gKi9cbmV4cG9ydCB2YXIgdGFwID0gLyojX19QVVJFX18qLyBkdWFsKDIsIGNoYWluYWJsZS50YXAoQ2hhaW4pKTtcbi8qKlxuICogQ29tcG9zZXMgY29tcHV0YXRpb25zIGluIHNlcXVlbmNlLCB1c2luZyB0aGUgcmV0dXJuIHZhbHVlIG9mIG9uZSBjb21wdXRhdGlvbiB0byBkZXRlcm1pbmUgdGhlIG5leHQgY29tcHV0YXRpb24gYW5kXG4gKiBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqIGltcG9ydCAqIGFzIE8gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgRSBmcm9tICdmcC10cy9FaXRoZXInXG4gKlxuICogY29uc3QgY29tcHV0ZSA9ICh2YWx1ZTogbnVtYmVyKSA9PiBwaXBlKFxuICogICBPLm9mKHZhbHVlKSxcbiAqICAgTy50YXBFaXRoZXIoKHZhbHVlKSA9PiB2YWx1ZSA+IDAgPyBFLnJpZ2h0KCdvaycpIDogRS5sZWZ0KCdlcnJvcicpKSxcbiAqIClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbXB1dGUoMSksIE8ub2YoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbXB1dGUoLTQyKSwgTy5ub25lKVxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIHRhcEVpdGhlciA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCB0YXBFaXRoZXJfKEZyb21FaXRoZXIsIENoYWluKSk7XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGR1cGxpY2F0ZSA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKGlkZW50aXR5KTtcbi8qKlxuICogQGNhdGVnb3J5IGxpZnRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRWl0aGVySyA9IC8qI19fUFVSRV9fKi8gZnJvbUVpdGhlcktfKEZyb21FaXRoZXIpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRWl0aGVySyA9IFxuLyojX19QVVJFX18qLyBjaGFpbkVpdGhlcktfKEZyb21FaXRoZXIsIENoYWluKTtcbi8qKlxuICogQWxpYXMgb2YgYHRhcEVpdGhlcmAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMTIuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRmlyc3RFaXRoZXJLID0gdGFwRWl0aGVyO1xuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGBPcHRpb25gIGZyb20gYSBudWxsYWJsZSB0eXBlLiBJZiB0aGUgdmFsdWUgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLCByZXR1cm5zIGBOb25lYCwgb3RoZXJ3aXNlXG4gKiByZXR1cm5zIHRoZSB2YWx1ZSB3cmFwcGVkIGluIGEgYFNvbWVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBmcm9tTnVsbGFibGUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUodW5kZWZpbmVkKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKG51bGwpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tTnVsbGFibGUoMSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tTnVsbGFibGUgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKGEgPT0gbnVsbCA/IG5vbmUgOiBzb21lKGEpKTsgfTtcbi8qKlxuICogVHJhbnNmb3JtcyBhbiBleGNlcHRpb24gaW50byBhbiBgT3B0aW9uYC4gSWYgYGZgIHRocm93cywgcmV0dXJucyBgTm9uZWAsIG90aGVyd2lzZSByZXR1cm5zIHRoZSBvdXRwdXQgd3JhcHBlZCBpbiBhXG4gKiBgU29tZWAuXG4gKlxuICogU2VlIGFsc28gW2B0cnlDYXRjaEtgXSgjdHJ5Y2F0Y2hrKS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgdHJ5Q2F0Y2ggfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgdHJ5Q2F0Y2goKCkgPT4ge1xuICogICAgIHRocm93IG5ldyBFcnJvcigpXG4gKiAgIH0pLFxuICogICBub25lXG4gKiApXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRyeUNhdGNoKCgpID0+IDEpLCBzb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSBpbnRlcm9wXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0cnlDYXRjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHNvbWUoZigpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgfVxufTtcbi8qKlxuICogQ29udmVydHMgYSBmdW5jdGlvbiB0aGF0IG1heSB0aHJvdyB0byBvbmUgcmV0dXJuaW5nIGEgYE9wdGlvbmAuXG4gKlxuICogQGNhdGVnb3J5IGludGVyb3BcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB0cnlDYXRjaEsgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyeUNhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGYuYXBwbHkodm9pZCAwLCBhKTsgfSk7XG4gICAgfTtcbn07XG4vKipcbiAqIFJldHVybnMgYSAqc21hcnQgY29uc3RydWN0b3IqIGZyb20gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBudWxsYWJsZSB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZnJvbU51bGxhYmxlSywgbm9uZSwgc29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBjb25zdCBmID0gKHM6IHN0cmluZyk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gKiAgIGNvbnN0IG4gPSBwYXJzZUZsb2F0KHMpXG4gKiAgIHJldHVybiBpc05hTihuKSA/IHVuZGVmaW5lZCA6IG5cbiAqIH1cbiAqXG4gKiBjb25zdCBnID0gZnJvbU51bGxhYmxlSyhmKVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZygnMScpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnKCdhJyksIG5vbmUpXG4gKlxuICogQGNhdGVnb3J5IGxpZnRpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIGZyb21OdWxsYWJsZUsgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmxvdyhmLCBmcm9tTnVsbGFibGUpOyB9O1xuLyoqXG4gKiBUaGlzIGlzIGBjaGFpbmAgKyBgZnJvbU51bGxhYmxlYCwgdXNlZnVsIHdoZW4gd29ya2luZyB3aXRoIG9wdGlvbmFsIHZhbHVlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZnJvbU51bGxhYmxlLCBjaGFpbk51bGxhYmxlSyB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBpbnRlcmZhY2UgRW1wbG95ZWUge1xuICogICByZWFkb25seSBjb21wYW55Pzoge1xuICogICAgIHJlYWRvbmx5IGFkZHJlc3M/OiB7XG4gKiAgICAgICByZWFkb25seSBzdHJlZXQ/OiB7XG4gKiAgICAgICAgIHJlYWRvbmx5IG5hbWU/OiBzdHJpbmdcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBjb25zdCBlbXBsb3llZTE6IEVtcGxveWVlID0geyBjb21wYW55OiB7IGFkZHJlc3M6IHsgc3RyZWV0OiB7IG5hbWU6ICdoaWdoIHN0cmVldCcgfSB9IH0gfVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgZnJvbU51bGxhYmxlKGVtcGxveWVlMS5jb21wYW55KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhjb21wYW55ID0+IGNvbXBhbnkuYWRkcmVzcyksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoYWRkcmVzcyA9PiBhZGRyZXNzLnN0cmVldCksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoc3RyZWV0ID0+IHN0cmVldC5uYW1lKVxuICogICApLFxuICogICBzb21lKCdoaWdoIHN0cmVldCcpXG4gKiApXG4gKlxuICogY29uc3QgZW1wbG95ZWUyOiBFbXBsb3llZSA9IHsgY29tcGFueTogeyBhZGRyZXNzOiB7IHN0cmVldDoge30gfSB9IH1cbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIGZyb21OdWxsYWJsZShlbXBsb3llZTIuY29tcGFueSksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoY29tcGFueSA9PiBjb21wYW55LmFkZHJlc3MpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGFkZHJlc3MgPT4gYWRkcmVzcy5zdHJlZXQpLFxuICogICAgIGNoYWluTnVsbGFibGVLKHN0cmVldCA9PiBzdHJlZXQubmFtZSlcbiAqICAgKSxcbiAqICAgbm9uZVxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbk51bGxhYmxlSyA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG5vbmUgOiBmcm9tTnVsbGFibGUoZihtYS52YWx1ZSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgYG51bGxgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCB0b051bGxhYmxlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIHRvTnVsbGFibGVcbiAqICAgKSxcbiAqICAgMVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgdG9OdWxsYWJsZVxuICogICApLFxuICogICBudWxsXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0b051bGxhYmxlID0gLyojX19QVVJFX18qLyBtYXRjaChjb25zdE51bGwsIGlkZW50aXR5KTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIHZhbHVlIG91dCBvZiB0aGUgc3RydWN0dXJlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSByZXR1cm5zIGB1bmRlZmluZWRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCB0b1VuZGVmaW5lZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICB0b1VuZGVmaW5lZFxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICB0b1VuZGVmaW5lZFxuICogICApLFxuICogICB1bmRlZmluZWRcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHRvVW5kZWZpbmVkID0gLyojX19QVVJFX18qLyBtYXRjaChjb25zdFVuZGVmaW5lZCwgaWRlbnRpdHkpO1xuZXhwb3J0IGZ1bmN0aW9uIGVsZW0oRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSwgbWEpIHtcbiAgICAgICAgaWYgKG1hID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtRV8xID0gZWxlbShFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIGVsZW1FXzEoYSwgbWEpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gZmFsc2UgOiBFLmVxdWFscyhhLCBtYS52YWx1ZSk7XG4gICAgfTtcbn1cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHByZWRpY2F0ZSBpcyBzYXRpc2ZpZWQgYnkgdGhlIHdyYXBwZWQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZXhpc3RzIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAwKVxuICogICApLFxuICogICB0cnVlXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMSlcbiAqICAgKSxcbiAqICAgZmFsc2VcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIGV4aXN0cyhuID0+IG4gPiAwKVxuICogICApLFxuICogICBmYWxzZVxuICogKVxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGV4aXN0cyA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7XG4gICAgICAgIHJldHVybiBpc05vbmUobWEpID8gZmFsc2UgOiBwcmVkaWNhdGUobWEudmFsdWUpO1xuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZG8gbm90YXRpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBEbyA9IC8qI19fUFVSRV9fKi8gb2YoXy5lbXB0eVJlY29yZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZFRvID0gLyojX19QVVJFX18qLyBiaW5kVG9fKEZ1bmN0b3IpO1xudmFyIGxldF8gPSAvKiNfX1BVUkVfXyovIGxldF9fKEZ1bmN0b3IpO1xuZXhwb3J0IHsgXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTMuMFxuICovXG5sZXRfIGFzIGxldCB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmQgPSAvKiNfX1BVUkVfXyovIGNoYWluYWJsZS5iaW5kKENoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBhcFMgPSAvKiNfX1BVUkVfXyovIGFwU18oQXBwbHkpO1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgQXBUID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVhZG9ubHlBcnJheSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBhcnJheSB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seU5vbkVtcHR5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHZhciBvID0gZigwLCBfLmhlYWQoYXMpKTtcbiAgICAgICAgaWYgKGlzTm9uZShvKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IFtvLnZhbHVlXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG9fMSA9IGYoaSwgYXNbaV0pO1xuICAgICAgICAgICAgaWYgKGlzTm9uZShvXzEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXQucHVzaChvXzEudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb21lKG91dCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgdmFyIGcgPSB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleChmKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7IHJldHVybiAoXy5pc05vbkVtcHR5KGFzKSA/IGcoYXMpIDogQXBUKTsgfTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VBcnJheVdpdGhJbmRleCA9IHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleDtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZShBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZUFycmF5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjc2VxdWVuY2UoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgc2VxdWVuY2VBcnJheSA9IFxuLyojX19QVVJFX18qLyB0cmF2ZXJzZUFycmF5KGlkZW50aXR5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxlZ2FjeVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBBbGlhcyBvZiBgZmxhdE1hcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW4gPSBmbGF0TWFwO1xuLyoqXG4gKiBBbGlhcyBvZiBgdGFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0ID0gdGFwO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgYFJlZmluZW1lbnRgIG1vZHVsZSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWZpbmVtZW50KGdldE9wdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gaXNTb21lKGdldE9wdGlvbihhKSk7IH07XG59XG4vKipcbiAqIFVzZSBbYGNoYWluTnVsbGFibGVLYF0oI2NoYWlubnVsbGFibGVrKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbWFwTnVsbGFibGUgPSBjaGFpbk51bGxhYmxlSztcbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgTy5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBPLm9wdGlvbmBcbiAqICh3aGVyZSBgT2AgaXMgZnJvbSBgaW1wb3J0IE8gZnJvbSAnZnAtdHMvT3B0aW9uJ2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBvcHRpb24gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG9mOiBvZixcbiAgICBhcDogX2FwLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcCxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0LFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UsXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHplcm86IHplcm8sXG4gICAgYWx0OiBfYWx0LFxuICAgIGV4dGVuZDogX2V4dGVuZCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0LFxuICAgIHRocm93RXJyb3I6IHRocm93RXJyb3Jcbn07XG4vKipcbiAqIFVzZSBbYGdldEFwcGx5U2VtaWdyb3VwYF0oLi9BcHBseS50cy5odG1sI2dldGFwcGx5c2VtaWdyb3VwKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0QXBwbHlTZW1pZ3JvdXAgPSAvKiNfX1BVUkVfXyovIGdldEFwcGx5U2VtaWdyb3VwXyhBcHBseSk7XG4vKipcbiAqIFVzZSBbYGdldEFwcGxpY2F0aXZlTW9ub2lkYF0oLi9BcHBsaWNhdGl2ZS50cy5odG1sI2dldGFwcGxpY2F0aXZlbW9ub2lkKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0QXBwbHlNb25vaWQgPSAvKiNfX1BVUkVfXyovIGdldEFwcGxpY2F0aXZlTW9ub2lkKEFwcGxpY2F0aXZlKTtcbi8qKlxuICogVXNlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZpcnN0IH0gZnJvbSAnZnAtdHMvU2VtaWdyb3VwJ1xuICogaW1wb3J0IHsgZ2V0TW9ub2lkIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGdldE1vbm9pZChmaXJzdCgpKVxuICogYGBgXG4gKlxuICogaW5zdGVhZC5cbiAqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSBsZWZ0LW1vc3Qgbm9uLWBOb25lYCB2YWx1ZVxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShhKSAgICAgIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0Rmlyc3RNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgTSA9IGdldEZpcnN0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMikpLCBzb21lKDIpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEZpcnN0TW9ub2lkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0TW9ub2lkKGZpcnN0KCkpOyB9O1xuLyoqXG4gKiBVc2VcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgbGFzdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBnZXRNb25vaWQobGFzdCgpKVxuICogYGBgXG4gKlxuICogaW5zdGVhZC5cbiAqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSByaWdodC1tb3N0IG5vbi1gTm9uZWAgdmFsdWVcbiAqXG4gKiB8IHggICAgICAgfCB5ICAgICAgIHwgY29uY2F0KHgsIHkpIHxcbiAqIHwgLS0tLS0tLSB8IC0tLS0tLS0gfCAtLS0tLS0tLS0tLS0gfFxuICogfCBub25lICAgIHwgbm9uZSAgICB8IG5vbmUgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBub25lICAgIHwgc29tZShhKSAgICAgIHxcbiAqIHwgbm9uZSAgICB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICogfCBzb21lKGEpIHwgc29tZShiKSB8IHNvbWUoYikgICAgICB8XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldExhc3RNb25vaWQsIHNvbWUsIG5vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgTSA9IGdldExhc3RNb25vaWQ8bnVtYmVyPigpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIG5vbmUpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBub25lKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgc29tZSgyKSksIHNvbWUoMikpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIHNvbWUoMikpLCBzb21lKDIpKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0TGFzdE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldE1vbm9pZChsYXN0KCkpOyB9O1xuIiwKICAiaW1wb3J0IHsgZ2V0QXBwbGljYXRpdmVNb25vaWQgfSBmcm9tICcuL0FwcGxpY2F0aXZlJztcbmltcG9ydCB7IGFwRmlyc3QgYXMgYXBGaXJzdF8sIGFwUyBhcyBhcFNfLCBhcFNlY29uZCBhcyBhcFNlY29uZF8sIGdldEFwcGx5U2VtaWdyb3VwIGFzIGdldEFwcGx5U2VtaWdyb3VwXyB9IGZyb20gJy4vQXBwbHknO1xuaW1wb3J0ICogYXMgY2hhaW5hYmxlIGZyb20gJy4vQ2hhaW4nO1xuaW1wb3J0IHsgY2hhaW5FaXRoZXJLIGFzIGNoYWluRWl0aGVyS18sIGZyb21FaXRoZXJLIGFzIGZyb21FaXRoZXJLXywgdGFwRWl0aGVyIGFzIHRhcEVpdGhlcl8gfSBmcm9tICcuL0Zyb21FaXRoZXInO1xuaW1wb3J0IHsgY29uc3ROdWxsLCBjb25zdFVuZGVmaW5lZCwgZHVhbCwgZmxvdywgaWRlbnRpdHksIHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGFzIGFzIGFzXywgYXNVbml0IGFzIGFzVW5pdF8sIGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IG5vdCB9IGZyb20gJy4vUHJlZGljYXRlJztcbmltcG9ydCB7IGZpcnN0LCBsYXN0IH0gZnJvbSAnLi9TZW1pZ3JvdXAnO1xuaW1wb3J0IHsgc2VwYXJhdGVkIH0gZnJvbSAnLi9TZXBhcmF0ZWQnO1xuaW1wb3J0IHsgd2lsdERlZmF1bHQsIHdpdGhlckRlZmF1bHQgfSBmcm9tICcuL1dpdGhlcmFibGUnO1xuaW1wb3J0IHsgZ3VhcmQgYXMgZ3VhcmRfIH0gZnJvbSAnLi9aZXJvJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnN0cnVjdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBgTm9uZWAgZG9lc24ndCBoYXZlIGEgY29uc3RydWN0b3IsIGluc3RlYWQgeW91IGNhbiB1c2UgaXQgZGlyZWN0bHkgYXMgYSB2YWx1ZS4gUmVwcmVzZW50cyBhIG1pc3NpbmcgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbm9uZSA9IF8ubm9uZTtcbi8qKlxuICogQ29uc3RydWN0cyBhIGBTb21lYC4gUmVwcmVzZW50cyBhbiBvcHRpb25hbCB2YWx1ZSB0aGF0IGV4aXN0cy5cbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzb21lID0gXy5zb21lO1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21QcmVkaWNhdGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiAocHJlZGljYXRlKGEpID8gc29tZShhKSA6IG5vbmUpOyB9O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBgTGVmdGAgdmFsdWUgb2YgYW4gYEVpdGhlcmAgaWYgcG9zc2libGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldExlZnQsIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyByaWdodCwgbGVmdCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldExlZnQocmlnaHQoMSkpLCBub25lKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChnZXRMZWZ0KGxlZnQoJ2EnKSksIHNvbWUoJ2EnKSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRMZWZ0ID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiAobWEuX3RhZyA9PT0gJ1JpZ2h0JyA/IG5vbmUgOiBzb21lKG1hLmxlZnQpKTsgfTtcbi8qKlxuICogUmV0dXJucyB0aGUgYFJpZ2h0YCB2YWx1ZSBvZiBhbiBgRWl0aGVyYCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0UmlnaHQsIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyByaWdodCwgbGVmdCB9IGZyb20gJ2ZwLXRzL0VpdGhlcidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGdldFJpZ2h0KHJpZ2h0KDEpKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZ2V0UmlnaHQobGVmdCgnYScpKSwgbm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRSaWdodCA9IGZ1bmN0aW9uIChtYSkgeyByZXR1cm4gKG1hLl90YWcgPT09ICdMZWZ0JyA/IG5vbmUgOiBzb21lKG1hLnJpZ2h0KSk7IH07XG52YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfTtcbnZhciBfYXAgPSBmdW5jdGlvbiAoZmFiLCBmYSkgeyByZXR1cm4gcGlwZShmYWIsIGFwKGZhKSk7IH07XG52YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlKGIsIGYpKTsgfTtcbnZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBNID0gZm9sZE1hcChNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwTShmKSk7IH07XG59O1xudmFyIF9yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHQoYiwgZikpOyB9O1xudmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHBpcGUodGEsIHRyYXZlcnNlRihmKSk7IH07XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfYWx0ID0gZnVuY3Rpb24gKGZhLCB0aGF0KSB7IHJldHVybiBwaXBlKGZhLCBhbHQodGhhdCkpOyB9O1xudmFyIF9maWx0ZXIgPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyKHByZWRpY2F0ZSkpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZmlsdGVyTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXAoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfZXh0ZW5kID0gZnVuY3Rpb24gKHdhLCBmKSB7IHJldHVybiBwaXBlKHdhLCBleHRlbmQoZikpOyB9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnZhciBfcGFydGl0aW9uID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uKHByZWRpY2F0ZSkpO1xufTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG52YXIgX3BhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwKGYpKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ09wdGlvbic7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldFNob3cgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBzaG93OiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIChpc05vbmUobWEpID8gJ25vbmUnIDogXCJzb21lKFwiLmNvbmNhdChTLnNob3cobWEudmFsdWUpLCBcIilcIikpOyB9XG59KTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIGdldEVxIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogY29uc3QgRSA9IGdldEVxKE4uRXEpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMobm9uZSwgbm9uZSksIHRydWUpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMobm9uZSwgc29tZSgxKSksIGZhbHNlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKEUuZXF1YWxzKHNvbWUoMSksIG5vbmUpLCBmYWxzZSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChFLmVxdWFscyhzb21lKDEpLCBzb21lKDIpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoRS5lcXVhbHMoc29tZSgxKSwgc29tZSgxKSksIHRydWUpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RXEgPSBmdW5jdGlvbiAoRSkgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ID09PSB5IHx8IChpc05vbmUoeCkgPyBpc05vbmUoeSkgOiBpc05vbmUoeSkgPyBmYWxzZSA6IEUuZXF1YWxzKHgudmFsdWUsIHkudmFsdWUpKTsgfVxufSk7IH07XG4vKipcbiAqIFRoZSBgT3JkYCBpbnN0YW5jZSBhbGxvd3MgYE9wdGlvbmAgdmFsdWVzIHRvIGJlIGNvbXBhcmVkIHdpdGhcbiAqIGBjb21wYXJlYCwgd2hlbmV2ZXIgdGhlcmUgaXMgYW4gYE9yZGAgaW5zdGFuY2UgZm9yXG4gKiB0aGUgdHlwZSB0aGUgYE9wdGlvbmAgY29udGFpbnMuXG4gKlxuICogYE5vbmVgIGlzIGNvbnNpZGVyZWQgdG8gYmUgbGVzcyB0aGFuIGFueSBgU29tZWAgdmFsdWUuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBub25lLCBzb21lLCBnZXRPcmQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqXG4gKiBjb25zdCBPID0gZ2V0T3JkKE4uT3JkKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShub25lLCBub25lKSwgMClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUobm9uZSwgc29tZSgxKSksIC0xKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBub25lKSwgMSlcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChPLmNvbXBhcmUoc29tZSgxKSwgc29tZSgyKSksIC0xKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKE8uY29tcGFyZShzb21lKDEpLCBzb21lKDEpKSwgMClcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPcmQgPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBlcXVhbHM6IGdldEVxKE8pLmVxdWFscyxcbiAgICBjb21wYXJlOiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gKHggPT09IHkgPyAwIDogaXNTb21lKHgpID8gKGlzU29tZSh5KSA/IE8uY29tcGFyZSh4LnZhbHVlLCB5LnZhbHVlKSA6IDEpIDogLTEpOyB9XG59KTsgfTtcbi8qKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgbGVmdC1tb3N0IG5vbi1gTm9uZWAgdmFsdWUuIElmIGJvdGggb3BlcmFuZHMgYXJlIGBTb21lYHMgdGhlbiB0aGUgaW5uZXIgdmFsdWVzIGFyZVxuICogY29uY2F0ZW5hdGVkIHVzaW5nIHRoZSBwcm92aWRlZCBgU2VtaWdyb3VwYFxuICpcbiAqIHwgeCAgICAgICB8IHkgICAgICAgfCBjb25jYXQoeCwgeSkgICAgICAgfFxuICogfCAtLS0tLS0tIHwgLS0tLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gKiB8IG5vbmUgICAgfCBub25lICAgIHwgbm9uZSAgICAgICAgICAgICAgIHxcbiAqIHwgc29tZShhKSB8IG5vbmUgICAgfCBzb21lKGEpICAgICAgICAgICAgfFxuICogfCBub25lICAgIHwgc29tZShiKSB8IHNvbWUoYikgICAgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBzb21lKGIpIHwgc29tZShjb25jYXQoYSwgYikpIHxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgU2VtaWdyb3VwU3VtIH0gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRNb25vaWQoU2VtaWdyb3VwU3VtKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMSkpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgzKSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRNb25vaWQgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiAoaXNOb25lKHgpID8geSA6IGlzTm9uZSh5KSA/IHggOiBzb21lKFMuY29uY2F0KHgudmFsdWUsIHkudmFsdWUpKSk7IH0sXG4gICAgZW1wdHk6IG5vbmVcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gbm9uZSA6IHNvbWUoZihmYS52YWx1ZSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIE1hcHMgdGhlIGBTb21lYCB2YWx1ZSBvZiB0aGlzIGBPcHRpb25gIHRvIHRoZSBzcGVjaWZpZWQgY29uc3RhbnQgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBhcyA9IGR1YWwoMiwgYXNfKEZ1bmN0b3IpKTtcbi8qKlxuICogTWFwcyB0aGUgYFNvbWVgIHZhbHVlIG9mIHRoaXMgYE9wdGlvbmAgdG8gdGhlIHZvaWQgY29uc3RhbnQgdmFsdWUuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBhc1VuaXQgPSBhc1VuaXRfKEZ1bmN0b3IpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBvZiA9IHNvbWU7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBQb2ludGVkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYWIpIHtcbiAgICByZXR1cm4gaXNOb25lKGZhYikgPyBub25lIDogaXNOb25lKGZhKSA/IG5vbmUgOiBzb21lKGZhYi52YWx1ZShmYS52YWx1ZSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEFwcGx5ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBcHBsaWNhdGl2ZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBvZjogb2Zcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBmdW5jdGlvbiAobWEsIGYpIHsgcmV0dXJuIChpc05vbmUobWEpID8gbm9uZSA6IGYobWEudmFsdWUpKTsgfSk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBDaGFpbiA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gYiA6IGYoYiwgZmEudmFsdWUpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZvbGRNYXAgPSBmdW5jdGlvbiAoTSkgeyByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gTS5lbXB0eSA6IGYoZmEudmFsdWUpO1xufTsgfTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gYiA6IGYoZmEudmFsdWUsIGIpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHRcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIHByb3ZpZGVkIGBPcHRpb25gIGB0aGF0YCBpZiBgc2VsZmAgaXMgYE5vbmVgLCBvdGhlcndpc2UgcmV0dXJucyBgc2VsZmAuXG4gKlxuICogQHBhcmFtIHNlbGYgLSBUaGUgZmlyc3QgYE9wdGlvbmAgdG8gYmUgY2hlY2tlZC5cbiAqIEBwYXJhbSB0aGF0IC0gVGhlIGBPcHRpb25gIHRvIHJldHVybiBpZiBgc2VsZmAgaXMgYE5vbmVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBPIGZyb20gXCJmcC10cy9PcHRpb25cIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTy5vckVsc2UoTy5ub25lLCAoKSA9PiBPLm5vbmUpLCBPLm5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8uc29tZSgxKSwgKCkgPT4gTy5ub25lKSwgTy5zb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChPLm9yRWxzZShPLm5vbmUsICgpID0+IE8uc29tZSgnYicpKSwgTy5zb21lKCdiJykpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE8ub3JFbHNlKE8uc29tZSgxKSwgKCkgPT4gTy5zb21lKCdiJykpLCBPLnNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgb3JFbHNlID0gZHVhbCgyLCBmdW5jdGlvbiAoc2VsZiwgdGhhdCkgeyByZXR1cm4gKGlzTm9uZShzZWxmKSA/IHRoYXQoKSA6IHNlbGYpOyB9KTtcbi8qKlxuICogQWxpYXMgb2YgYG9yRWxzZWAuXG4gKlxuICogTGVzcyBzdHJpY3QgdmVyc2lvbiBvZiBbYGFsdGBdKCNhbHQpLlxuICpcbiAqIFRoZSBgV2Agc3VmZml4IChzaG9ydCBmb3IgKipXKippZGVuaW5nKSBtZWFucyB0aGF0IHRoZSByZXR1cm4gdHlwZXMgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgYWx0VyA9IG9yRWxzZTtcbi8qKlxuICogQWxpYXMgb2YgYG9yRWxzZWAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYWx0ID0gb3JFbHNlO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBBbHQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFsdDogX2FsdFxufTtcbi8qKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgemVybyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vbmU7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBaZXJvID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHplcm86IHplcm9cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGd1YXJkID0gLyojX19QVVJFX18qLyBndWFyZF8oWmVybywgUG9pbnRlZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFsdGVybmF0aXZlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwLFxuICAgIG9mOiBvZixcbiAgICBhbHQ6IF9hbHQsXG4gICAgemVybzogemVyb1xufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZXh0ZW5kID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh3YSkge1xuICAgIHJldHVybiBpc05vbmUod2EpID8gbm9uZSA6IHNvbWUoZih3YSkpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRXh0ZW5kID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBleHRlbmQ6IF9leHRlbmRcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbXBhY3QgPSAvKiNfX1BVUkVfXyovIGZsYXRNYXAoaWRlbnRpdHkpO1xudmFyIGRlZmF1bHRTZXBhcmF0ZWQgPSAvKiNfX1BVUkVfXyovIHNlcGFyYXRlZChub25lLCBub25lKTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc2VwYXJhdGUgPSBmdW5jdGlvbiAobWEpIHtcbiAgICByZXR1cm4gaXNOb25lKG1hKSA/IGRlZmF1bHRTZXBhcmF0ZWQgOiBzZXBhcmF0ZWQoZ2V0TGVmdChtYS52YWx1ZSksIGdldFJpZ2h0KG1hLnZhbHVlKSk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21wYWN0YWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShmYSkgPyBub25lIDogcHJlZGljYXRlKGZhLnZhbHVlKSA/IGZhIDogbm9uZTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBpc05vbmUoZmEpID8gbm9uZSA6IGYoZmEudmFsdWUpO1xufTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChfZmlsdGVyKGZhLCBub3QocHJlZGljYXRlKSksIF9maWx0ZXIoZmEsIHByZWRpY2F0ZSkpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmxvdyhtYXAoZiksIHNlcGFyYXRlKTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRmlsdGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuNi4zXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2UgPSBmdW5jdGlvbiAoRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNOb25lKHRhKSA/IEYub2Yobm9uZSkgOiBGLm1hcChmKHRhLnZhbHVlKSwgc29tZSk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi42LjNcbiAqL1xuZXhwb3J0IHZhciBzZXF1ZW5jZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKHRhKSA/IEYub2Yobm9uZSkgOiBGLm1hcCh0YS52YWx1ZSwgc29tZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZVxufTtcbnZhciBfd2l0aGVyID0gLyojX19QVVJFX18qLyB3aXRoZXJEZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG52YXIgX3dpbHQgPSAvKiNfX1BVUkVfXyovIHdpbHREZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpdGhlciA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aXRoZXJGID0gX3dpdGhlcihGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3dpdGhlckYoZmEsIGYpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2lsdCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIF93aWx0RiA9IF93aWx0KEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfd2lsdEYoZmEsIGYpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgV2l0aGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQsXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbi8qKlxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgdGhyb3dFcnJvciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vbmU7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIE1vbmFkVGhyb3cgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXAsXG4gICAgb2Y6IG9mLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIHRocm93RXJyb3I6IHRocm93RXJyb3Jcbn07XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gYEVpdGhlcmAgdG8gYW4gYE9wdGlvbmAgZGlzY2FyZGluZyB0aGUgZXJyb3IuXG4gKlxuICogQWxpYXMgb2YgW2dldFJpZ2h0XSgjZ2V0cmlnaHQpXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tRWl0aGVyID0gZ2V0UmlnaHQ7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBGcm9tRWl0aGVyID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGZyb21FaXRoZXI6IGZyb21FaXRoZXJcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyByZWZpbmVtZW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb3B0aW9uIGlzIGFuIGluc3RhbmNlIG9mIGBTb21lYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGlzU29tZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNTb21lKHNvbWUoMSkpLCB0cnVlKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzU29tZShub25lKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc1NvbWUgPSBfLmlzU29tZTtcbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9wdGlvbiBpcyBgTm9uZWAsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBpc05vbmUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKGlzTm9uZShzb21lKDEpKSwgZmFsc2UpXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoaXNOb25lKG5vbmUpLCB0cnVlKVxuICpcbiAqIEBjYXRlZ29yeSByZWZpbmVtZW50c1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgaXNOb25lID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmYS5fdGFnID09PSAnTm9uZSc7IH07XG4vKipcbiAqIExlc3Mgc3RyaWN0IHZlcnNpb24gb2YgW2BtYXRjaGBdKCNtYXRjaCkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGVzIHdpbGwgYmUgbWVyZ2VkLlxuICpcbiAqIEBjYXRlZ29yeSBwYXR0ZXJuIG1hdGNoaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF0Y2hXID0gZnVuY3Rpb24gKG9uTm9uZSwgb25Tb21lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IG9uTm9uZSgpIDogb25Tb21lKG1hLnZhbHVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQWxpYXMgb2YgW2BtYXRjaFdgXSgjbWF0Y2h3KS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZvbGRXID0gbWF0Y2hXO1xuLyoqXG4gKiBUYWtlcyBhIChsYXp5KSBkZWZhdWx0IHZhbHVlLCBhIGZ1bmN0aW9uLCBhbmQgYW4gYE9wdGlvbmAgdmFsdWUsIGlmIHRoZSBgT3B0aW9uYCB2YWx1ZSBpcyBgTm9uZWAgdGhlIGRlZmF1bHQgdmFsdWUgaXNcbiAqIHJldHVybmVkLCBvdGhlcndpc2UgdGhlIGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gdGhlIHZhbHVlIGluc2lkZSB0aGUgYFNvbWVgIGFuZCB0aGUgcmVzdWx0IGlzIHJldHVybmVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lLCBub25lLCBtYXRjaCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBtYXRjaCgoKSA9PiAnYSBub25lJywgYSA9PiBgYSBzb21lIGNvbnRhaW5pbmcgJHthfWApXG4gKiAgICksXG4gKiAgICdhIHNvbWUgY29udGFpbmluZyAxJ1xuICogKVxuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIG1hdGNoKCgpID0+ICdhIG5vbmUnLCBhID0+IGBhIHNvbWUgY29udGFpbmluZyAke2F9YClcbiAqICAgKSxcbiAqICAgJ2Egbm9uZSdcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1hdGNoID0gbWF0Y2hXO1xuLyoqXG4gKiBBbGlhcyBvZiBbYG1hdGNoYF0oI21hdGNoKS5cbiAqXG4gKiBAY2F0ZWdvcnkgcGF0dGVybiBtYXRjaGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZCA9IG1hdGNoO1xuLyoqXG4gKiBMZXNzIHN0cmljdCB2ZXJzaW9uIG9mIFtgZ2V0T3JFbHNlYF0oI2dldG9yZWxzZSkuXG4gKlxuICogVGhlIGBXYCBzdWZmaXggKHNob3J0IGZvciAqKlcqKmlkZW5pbmcpIG1lYW5zIHRoYXQgdGhlIGhhbmRsZXIgcmV0dXJuIHR5cGUgd2lsbCBiZSBtZXJnZWQuXG4gKlxuICogQGNhdGVnb3J5IGVycm9yIGhhbmRsaW5nXG4gKiBAc2luY2UgMi42LjBcbiAqL1xuZXhwb3J0IHZhciBnZXRPckVsc2VXID0gZnVuY3Rpb24gKG9uTm9uZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBvbk5vbmUoKSA6IG1hLnZhbHVlO1xuICAgIH07XG59O1xuLyoqXG4gKiBFeHRyYWN0cyB0aGUgdmFsdWUgb3V0IG9mIHRoZSBzdHJ1Y3R1cmUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlIHJldHVybnMgdGhlIGdpdmVuIGRlZmF1bHQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgZ2V0T3JFbHNlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBzb21lKDEpLFxuICogICAgIGdldE9yRWxzZSgoKSA9PiAwKVxuICogICApLFxuICogICAxXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBnZXRPckVsc2UoKCkgPT4gMClcbiAqICAgKSxcbiAqICAgMFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBlcnJvciBoYW5kbGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0T3JFbHNlID0gZ2V0T3JFbHNlVztcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcEZpcnN0ID0gLyojX19QVVJFX18qLyBhcEZpcnN0XyhBcHBseSk7XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgc2Vjb25kLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwU2Vjb25kID0gLyojX19QVVJFX18qLyBhcFNlY29uZF8oQXBwbHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IGNvbXBhY3Q7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTUuMFxuICovXG5leHBvcnQgdmFyIHRhcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBjaGFpbmFibGUudGFwKENoYWluKSk7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBPIGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCAqIGFzIEUgZnJvbSAnZnAtdHMvRWl0aGVyJ1xuICpcbiAqIGNvbnN0IGNvbXB1dGUgPSAodmFsdWU6IG51bWJlcikgPT4gcGlwZShcbiAqICAgTy5vZih2YWx1ZSksXG4gKiAgIE8udGFwRWl0aGVyKCh2YWx1ZSkgPT4gdmFsdWUgPiAwID8gRS5yaWdodCgnb2snKSA6IEUubGVmdCgnZXJyb3InKSksXG4gKiApXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wdXRlKDEpLCBPLm9mKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wdXRlKC00MiksIE8ubm9uZSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciB0YXBFaXRoZXIgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgdGFwRWl0aGVyXyhGcm9tRWl0aGVyLCBDaGFpbikpO1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBkdXBsaWNhdGUgPSAvKiNfX1BVUkVfXyovIGV4dGVuZChpZGVudGl0eSk7XG4vKipcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVpdGhlcksgPSAvKiNfX1BVUkVfXyovIGZyb21FaXRoZXJLXyhGcm9tRWl0aGVyKTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkVpdGhlcksgPSBcbi8qI19fUFVSRV9fKi8gY2hhaW5FaXRoZXJLXyhGcm9tRWl0aGVyLCBDaGFpbik7XG4vKipcbiAqIEFsaWFzIG9mIGB0YXBFaXRoZXJgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0RWl0aGVySyA9IHRhcEVpdGhlcjtcbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyBgT3B0aW9uYCBmcm9tIGEgbnVsbGFibGUgdHlwZS4gSWYgdGhlIHZhbHVlIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgcmV0dXJucyBgTm9uZWAsIG90aGVyd2lzZVxuICogcmV0dXJucyB0aGUgdmFsdWUgd3JhcHBlZCBpbiBhIGBTb21lYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbm9uZSwgc29tZSwgZnJvbU51bGxhYmxlIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKHVuZGVmaW5lZCksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21OdWxsYWJsZShudWxsKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbU51bGxhYmxlKDEpLCBzb21lKDEpKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbU51bGxhYmxlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChhID09IG51bGwgPyBub25lIDogc29tZShhKSk7IH07XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gZXhjZXB0aW9uIGludG8gYW4gYE9wdGlvbmAuIElmIGBmYCB0aHJvd3MsIHJldHVybnMgYE5vbmVgLCBvdGhlcndpc2UgcmV0dXJucyB0aGUgb3V0cHV0IHdyYXBwZWQgaW4gYVxuICogYFNvbWVgLlxuICpcbiAqIFNlZSBhbHNvIFtgdHJ5Q2F0Y2hLYF0oI3RyeWNhdGNoaykuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG5vbmUsIHNvbWUsIHRyeUNhdGNoIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHRyeUNhdGNoKCgpID0+IHtcbiAqICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICogICB9KSxcbiAqICAgbm9uZVxuICogKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0cnlDYXRjaCgoKSA9PiAxKSwgc29tZSgxKSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW50ZXJvcFxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHJ5Q2F0Y2ggPSBmdW5jdGlvbiAoZikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBzb21lKGYoKSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBub25lO1xuICAgIH1cbn07XG4vKipcbiAqIENvbnZlcnRzIGEgZnVuY3Rpb24gdGhhdCBtYXkgdGhyb3cgdG8gb25lIHJldHVybmluZyBhIGBPcHRpb25gLlxuICpcbiAqIEBjYXRlZ29yeSBpbnRlcm9wXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgdHJ5Q2F0Y2hLID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYVtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnlDYXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBmLmFwcGx5KHZvaWQgMCwgYSk7IH0pO1xuICAgIH07XG59O1xuLyoqXG4gKiBSZXR1cm5zIGEgKnNtYXJ0IGNvbnN0cnVjdG9yKiBmcm9tIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgbnVsbGFibGUgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZyb21OdWxsYWJsZUssIG5vbmUsIHNvbWUgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogY29uc3QgZiA9IChzOiBzdHJpbmcpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICogICBjb25zdCBuID0gcGFyc2VGbG9hdChzKVxuICogICByZXR1cm4gaXNOYU4obikgPyB1bmRlZmluZWQgOiBuXG4gKiB9XG4gKlxuICogY29uc3QgZyA9IGZyb21OdWxsYWJsZUsoZilcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGcoJzEnKSwgc29tZSgxKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZygnYScpLCBub25lKVxuICpcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tTnVsbGFibGVLID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZsb3coZiwgZnJvbU51bGxhYmxlKTsgfTtcbi8qKlxuICogVGhpcyBpcyBgY2hhaW5gICsgYGZyb21OdWxsYWJsZWAsIHVzZWZ1bCB3aGVuIHdvcmtpbmcgd2l0aCBvcHRpb25hbCB2YWx1ZXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGZyb21OdWxsYWJsZSwgY2hhaW5OdWxsYWJsZUsgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogaW50ZXJmYWNlIEVtcGxveWVlIHtcbiAqICAgcmVhZG9ubHkgY29tcGFueT86IHtcbiAqICAgICByZWFkb25seSBhZGRyZXNzPzoge1xuICogICAgICAgcmVhZG9ubHkgc3RyZWV0Pzoge1xuICogICAgICAgICByZWFkb25seSBuYW1lPzogc3RyaW5nXG4gKiAgICAgICB9XG4gKiAgICAgfVxuICogICB9XG4gKiB9XG4gKlxuICogY29uc3QgZW1wbG95ZWUxOiBFbXBsb3llZSA9IHsgY29tcGFueTogeyBhZGRyZXNzOiB7IHN0cmVldDogeyBuYW1lOiAnaGlnaCBzdHJlZXQnIH0gfSB9IH1cbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIGZyb21OdWxsYWJsZShlbXBsb3llZTEuY29tcGFueSksXG4gKiAgICAgY2hhaW5OdWxsYWJsZUsoY29tcGFueSA9PiBjb21wYW55LmFkZHJlc3MpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGFkZHJlc3MgPT4gYWRkcmVzcy5zdHJlZXQpLFxuICogICAgIGNoYWluTnVsbGFibGVLKHN0cmVldCA9PiBzdHJlZXQubmFtZSlcbiAqICAgKSxcbiAqICAgc29tZSgnaGlnaCBzdHJlZXQnKVxuICogKVxuICpcbiAqIGNvbnN0IGVtcGxveWVlMjogRW1wbG95ZWUgPSB7IGNvbXBhbnk6IHsgYWRkcmVzczogeyBzdHJlZXQ6IHt9IH0gfSB9XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBmcm9tTnVsbGFibGUoZW1wbG95ZWUyLmNvbXBhbnkpLFxuICogICAgIGNoYWluTnVsbGFibGVLKGNvbXBhbnkgPT4gY29tcGFueS5hZGRyZXNzKSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhhZGRyZXNzID0+IGFkZHJlc3Muc3RyZWV0KSxcbiAqICAgICBjaGFpbk51bGxhYmxlSyhzdHJlZXQgPT4gc3RyZWV0Lm5hbWUpXG4gKiAgICksXG4gKiAgIG5vbmVcbiAqIClcbiAqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5OdWxsYWJsZUsgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHtcbiAgICAgICAgcmV0dXJuIGlzTm9uZShtYSkgPyBub25lIDogZnJvbU51bGxhYmxlKGYobWEudmFsdWUpKTtcbiAgICB9O1xufTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIHZhbHVlIG91dCBvZiB0aGUgc3RydWN0dXJlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSByZXR1cm5zIGBudWxsYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgdG9OdWxsYWJsZSB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICB0b051bGxhYmxlXG4gKiAgICksXG4gKiAgIDFcbiAqIClcbiAqIGFzc2VydC5zdHJpY3RFcXVhbChcbiAqICAgcGlwZShcbiAqICAgICBub25lLFxuICogICAgIHRvTnVsbGFibGVcbiAqICAgKSxcbiAqICAgbnVsbFxuICogKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdG9OdWxsYWJsZSA9IC8qI19fUFVSRV9fKi8gbWF0Y2goY29uc3ROdWxsLCBpZGVudGl0eSk7XG4vKipcbiAqIEV4dHJhY3RzIHRoZSB2YWx1ZSBvdXQgb2YgdGhlIHN0cnVjdHVyZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSwgbm9uZSwgdG9VbmRlZmluZWQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgdG9VbmRlZmluZWRcbiAqICAgKSxcbiAqICAgMVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIG5vbmUsXG4gKiAgICAgdG9VbmRlZmluZWRcbiAqICAgKSxcbiAqICAgdW5kZWZpbmVkXG4gKiApXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciB0b1VuZGVmaW5lZCA9IC8qI19fUFVSRV9fKi8gbWF0Y2goY29uc3RVbmRlZmluZWQsIGlkZW50aXR5KTtcbmV4cG9ydCBmdW5jdGlvbiBlbGVtKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEsIG1hKSB7XG4gICAgICAgIGlmIChtYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZWxlbUVfMSA9IGVsZW0oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBlbGVtRV8xKGEsIG1hKTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IGZhbHNlIDogRS5lcXVhbHMoYSwgbWEudmFsdWUpO1xuICAgIH07XG59XG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBwcmVkaWNhdGUgaXMgc2F0aXNmaWVkIGJ5IHRoZSB3cmFwcGVkIHZhbHVlXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUsIG5vbmUsIGV4aXN0cyB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgc29tZSgxKSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMClcbiAqICAgKSxcbiAqICAgdHJ1ZVxuICogKVxuICogYXNzZXJ0LnN0cmljdEVxdWFsKFxuICogICBwaXBlKFxuICogICAgIHNvbWUoMSksXG4gKiAgICAgZXhpc3RzKG4gPT4gbiA+IDEpXG4gKiAgICksXG4gKiAgIGZhbHNlXG4gKiApXG4gKiBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gKiAgIHBpcGUoXG4gKiAgICAgbm9uZSxcbiAqICAgICBleGlzdHMobiA9PiBuID4gMClcbiAqICAgKSxcbiAqICAgZmFsc2VcbiAqIClcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBleGlzdHMgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYSkge1xuICAgICAgICByZXR1cm4gaXNOb25lKG1hKSA/IGZhbHNlIDogcHJlZGljYXRlKG1hLnZhbHVlKTtcbiAgICB9O1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRvIG5vdGF0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgRG8gPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWNvcmQpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmRUbyA9IC8qI19fUFVSRV9fKi8gYmluZFRvXyhGdW5jdG9yKTtcbnZhciBsZXRfID0gLyojX19QVVJFX18qLyBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IFxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjEzLjBcbiAqL1xubGV0XyBhcyBsZXQgfTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kID0gLyojX19QVVJFX18qLyBjaGFpbmFibGUuYmluZChDaGFpbik7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTID0gLyojX19QVVJFX18qLyBhcFNfKEFwcGx5KTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIEFwVCA9IC8qI19fUFVSRV9fKi8gb2YoXy5lbXB0eVJlYWRvbmx5QXJyYXkpO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gYXJyYXkgdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlOb25FbXB0eUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICB2YXIgbyA9IGYoMCwgXy5oZWFkKGFzKSk7XG4gICAgICAgIGlmIChpc05vbmUobykpIHtcbiAgICAgICAgICAgIHJldHVybiBub25lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBbby52YWx1ZV07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvXzEgPSBmKGksIGFzW2ldKTtcbiAgICAgICAgICAgIGlmIChpc05vbmUob18xKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0LnB1c2gob18xLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29tZShvdXQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHZhciBnID0gdHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXgoZik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKF8uaXNOb25FbXB0eShhcykgPyBnKGFzKSA6IEFwVCk7IH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlQXJyYXlXaXRoSW5kZXggPSB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXg7XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2UoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VBcnJheSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3NlcXVlbmNlKEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlQXJyYXkgPSBcbi8qI19fUFVSRV9fKi8gdHJhdmVyc2VBcnJheShpZGVudGl0eSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBsZWdhY3lcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWxpYXMgb2YgYGZsYXRNYXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluID0gZmxhdE1hcDtcbi8qKlxuICogQWxpYXMgb2YgYHRhcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IHRhcDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIGBSZWZpbmVtZW50YCBtb2R1bGUgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVmaW5lbWVudChnZXRPcHRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGlzU29tZShnZXRPcHRpb24oYSkpOyB9O1xufVxuLyoqXG4gKiBVc2UgW2BjaGFpbk51bGxhYmxlS2BdKCNjaGFpbm51bGxhYmxlaykgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG1hcE51bGxhYmxlID0gY2hhaW5OdWxsYWJsZUs7XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYE8uRnVuY3RvcmAgaW5zdGVhZCBvZiBgTy5vcHRpb25gXG4gKiAod2hlcmUgYE9gIGlzIGZyb20gYGltcG9ydCBPIGZyb20gJ2ZwLXRzL09wdGlvbidgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgb3B0aW9uID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBvZjogb2YsXG4gICAgYXA6IF9hcCxcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UsXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAsXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodCxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICB6ZXJvOiB6ZXJvLFxuICAgIGFsdDogX2FsdCxcbiAgICBleHRlbmQ6IF9leHRlbmQsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdCxcbiAgICB0aHJvd0Vycm9yOiB0aHJvd0Vycm9yXG59O1xuLyoqXG4gKiBVc2UgW2BnZXRBcHBseVNlbWlncm91cGBdKC4vQXBwbHkudHMuaHRtbCNnZXRhcHBseXNlbWlncm91cCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEFwcGx5U2VtaWdyb3VwID0gLyojX19QVVJFX18qLyBnZXRBcHBseVNlbWlncm91cF8oQXBwbHkpO1xuLyoqXG4gKiBVc2UgW2BnZXRBcHBsaWNhdGl2ZU1vbm9pZGBdKC4vQXBwbGljYXRpdmUudHMuaHRtbCNnZXRhcHBsaWNhdGl2ZW1vbm9pZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEFwcGx5TW9ub2lkID0gLyojX19QVVJFX18qLyBnZXRBcHBsaWNhdGl2ZU1vbm9pZChBcHBsaWNhdGl2ZSk7XG4vKipcbiAqIFVzZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBmaXJzdCB9IGZyb20gJ2ZwLXRzL1NlbWlncm91cCdcbiAqIGltcG9ydCB7IGdldE1vbm9pZCB9IGZyb20gJ2ZwLXRzL09wdGlvbidcbiAqXG4gKiBnZXRNb25vaWQoZmlyc3QoKSlcbiAqIGBgYFxuICpcbiAqIGluc3RlYWQuXG4gKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgbGVmdC1tb3N0IG5vbi1gTm9uZWAgdmFsdWVcbiAqXG4gKiB8IHggICAgICAgfCB5ICAgICAgIHwgY29uY2F0KHgsIHkpIHxcbiAqIHwgLS0tLS0tLSB8IC0tLS0tLS0gfCAtLS0tLS0tLS0tLS0gfFxuICogfCBub25lICAgIHwgbm9uZSAgICB8IG5vbmUgICAgICAgICB8XG4gKiB8IHNvbWUoYSkgfCBub25lICAgIHwgc29tZShhKSAgICAgIHxcbiAqIHwgbm9uZSAgICB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICogfCBzb21lKGEpIHwgc29tZShiKSB8IHNvbWUoYSkgICAgICB8XG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEZpcnN0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRGaXJzdE1vbm9pZDxudW1iZXI+KClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQobm9uZSwgbm9uZSksIG5vbmUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHNvbWUoMSksIG5vbmUpLCBzb21lKDEpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgc29tZSgyKSksIHNvbWUoMSkpXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRGaXJzdE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldE1vbm9pZChmaXJzdCgpKTsgfTtcbi8qKlxuICogVXNlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGxhc3QgfSBmcm9tICdmcC10cy9TZW1pZ3JvdXAnXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQgfSBmcm9tICdmcC10cy9PcHRpb24nXG4gKlxuICogZ2V0TW9ub2lkKGxhc3QoKSlcbiAqIGBgYFxuICpcbiAqIGluc3RlYWQuXG4gKlxuICogTW9ub2lkIHJldHVybmluZyB0aGUgcmlnaHQtbW9zdCBub24tYE5vbmVgIHZhbHVlXG4gKlxuICogfCB4ICAgICAgIHwgeSAgICAgICB8IGNvbmNhdCh4LCB5KSB8XG4gKiB8IC0tLS0tLS0gfCAtLS0tLS0tIHwgLS0tLS0tLS0tLS0tIHxcbiAqIHwgbm9uZSAgICB8IG5vbmUgICAgfCBub25lICAgICAgICAgfFxuICogfCBzb21lKGEpIHwgbm9uZSAgICB8IHNvbWUoYSkgICAgICB8XG4gKiB8IG5vbmUgICAgfCBzb21lKGIpIHwgc29tZShiKSAgICAgIHxcbiAqIHwgc29tZShhKSB8IHNvbWUoYikgfCBzb21lKGIpICAgICAgfFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRMYXN0TW9ub2lkLCBzb21lLCBub25lIH0gZnJvbSAnZnAtdHMvT3B0aW9uJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRMYXN0TW9ub2lkPG51bWJlcj4oKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChub25lLCBub25lKSwgbm9uZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoc29tZSgxKSwgbm9uZSksIHNvbWUoMSkpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KG5vbmUsIHNvbWUoMikpLCBzb21lKDIpKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdChzb21lKDEpLCBzb21lKDIpKSwgc29tZSgyKSlcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldExhc3RNb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRNb25vaWQobGFzdCgpKTsgfTtcbiIsCiAgIi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5pbXBvcnQgeyBmbG93LCBpZGVudGl0eSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ0VuZG9tb3JwaGlzbSc7XG4vKipcbiAqIEVuZG9tb3JwaGlzbSBmb3JtIGEgYFNlbWlncm91cGAgd2hlcmUgdGhlIGBjb25jYXRgIG9wZXJhdGlvbiBpcyB0aGUgdXN1YWwgZnVuY3Rpb24gY29tcG9zaXRpb24uXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZmxvdyhmaXJzdCwgc2Vjb25kKTsgfVxufSk7IH07XG4vKipcbiAqIEVuZG9tb3JwaGlzbSBmb3JtIGEgYE1vbm9pZGAgd2hlcmUgdGhlIGBlbXB0eWAgdmFsdWUgaXMgdGhlIGBpZGVudGl0eWAgZnVuY3Rpb24uXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRTZW1pZ3JvdXAoKS5jb25jYXQsXG4gICAgZW1wdHk6IGlkZW50aXR5XG59KTsgfTtcbiIsCiAgIi8qKlxuICogTGlmdCBhIGNvbXB1dGF0aW9uIGZyb20gdGhlIGBJT2AgbW9uYWRcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmltcG9ydCB7IHRhcCB9IGZyb20gJy4vQ2hhaW4nO1xuaW1wb3J0IHsgZmxvdyB9IGZyb20gJy4vZnVuY3Rpb24nO1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21JT0soRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmxvdyhmLCBGLmZyb21JTyk7IH07XG59XG5leHBvcnQgZnVuY3Rpb24gY2hhaW5JT0soRiwgTSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICB2YXIgZyA9IGZsb3coZiwgRi5mcm9tSU8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiBNLmNoYWluKGZpcnN0LCBnKTsgfTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNoYWluRmlyc3RJT0soRiwgTSkge1xuICAgIHZhciB0YXBJT00gPSB0YXBJTyhGLCBNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkgeyByZXR1cm4gdGFwSU9NKGZpcnN0LCBmKTsgfTsgfTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiB0YXBJTyhGLCBNKSB7XG4gICAgdmFyIGNoYWluRmlyc3RNID0gdGFwKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2VsZiwgZikgeyByZXR1cm4gY2hhaW5GaXJzdE0oc2VsZiwgZmxvdyhmLCBGLmZyb21JTykpOyB9O1xufVxuIiwKICAiLyoqXG4gKiBMaWZ0IGEgY29tcHV0YXRpb24gZnJvbSB0aGUgYElPYCBtb25hZFxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuaW1wb3J0IHsgdGFwIH0gZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmbG93IH0gZnJvbSAnLi9mdW5jdGlvbic7XG5leHBvcnQgZnVuY3Rpb24gZnJvbUlPSyhGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmbG93KGYsIEYuZnJvbUlPKTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbklPSyhGLCBNKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHZhciBnID0gZmxvdyhmLCBGLmZyb21JTyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHsgcmV0dXJuIE0uY2hhaW4oZmlyc3QsIGcpOyB9O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gY2hhaW5GaXJzdElPSyhGLCBNKSB7XG4gICAgdmFyIHRhcElPTSA9IHRhcElPKEYsIE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7IHJldHVybiB0YXBJT00oZmlyc3QsIGYpOyB9OyB9O1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRhcElPKEYsIE0pIHtcbiAgICB2YXIgY2hhaW5GaXJzdE0gPSB0YXAoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmLCBmKSB7IHJldHVybiBjaGFpbkZpcnN0TShzZWxmLCBmbG93KGYsIEYuZnJvbUlPKSk7IH07XG59XG4iLAogICJpbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBwaXBlLCBTSyB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgZmxhcCBhcyBmbGFwXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0ICogYXMgTyBmcm9tICcuL09wdGlvbic7XG5pbXBvcnQgeyBzZXBhcmF0ZWQgfSBmcm9tICcuL1NlcGFyYXRlZCc7XG5pbXBvcnQgeyB3aWx0RGVmYXVsdCwgd2l0aGVyRGVmYXVsdCB9IGZyb20gJy4vV2l0aGVyYWJsZSc7XG4vKipcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbU1hcCA9IGZ1bmN0aW9uIChtKSB7IHJldHVybiBuZXcgTWFwKG0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9NYXAobSkge1xuICAgIHJldHVybiBuZXcgTWFwKG0pO1xufVxuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNob3coU0ssIFNBKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2hvdzogZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIHZhciBlbnRyaWVzID0gW107XG4gICAgICAgICAgICBtLmZvckVhY2goZnVuY3Rpb24gKGEsIGspIHtcbiAgICAgICAgICAgICAgICBlbnRyaWVzLnB1c2goXCJbXCIuY29uY2F0KFNLLnNob3coayksIFwiLCBcIikuY29uY2F0KFNBLnNob3coYSksIFwiXVwiKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBcIm5ldyBNYXAoW1wiLmNvbmNhdChlbnRyaWVzLnNvcnQoKS5qb2luKCcsICcpLCBcIl0pXCIpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2Yga2V5L3ZhbHVlIHBhaXJzIGluIGEgbWFwXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgc2l6ZSA9IGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLnNpemU7IH07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBvciBub3QgYSBtYXAgaXMgZW1wdHlcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpc0VtcHR5ID0gZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0uc2l6ZSA9PT0gMDsgfTtcbmV4cG9ydCBmdW5jdGlvbiBtZW1iZXIoRSkge1xuICAgIHZhciBsb29rdXBFID0gbG9va3VwKEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoaywgbSkge1xuICAgICAgICBpZiAobSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbWVtYmVyRV8xID0gbWVtYmVyKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtKSB7IHJldHVybiBtZW1iZXJFXzEoaywgbSk7IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF8uaXNTb21lKGxvb2t1cEUoaywgbSkpO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZWxlbShFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBtKSB7XG4gICAgICAgIGlmIChtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtRV8xID0gZWxlbShFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobSkgeyByZXR1cm4gZWxlbUVfMShhLCBtKTsgfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmFsdWVzID0gbS52YWx1ZXMoKTtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHdoaWxlICghKGUgPSB2YWx1ZXMubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICB2YXIgdiA9IGUudmFsdWU7XG4gICAgICAgICAgICBpZiAoRS5lcXVhbHMoYSwgdikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cbi8qKlxuICogR2V0IGEgc29ydGVkIGBSZWFkb25seUFycmF5YCBvZiB0aGUga2V5cyBjb250YWluZWQgaW4gYSBgUmVhZG9ubHlNYXBgLlxuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGtleXMgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAobSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShtLmtleXMoKSkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBHZXQgYSBzb3J0ZWQgYFJlYWRvbmx5QXJyYXlgIG9mIHRoZSB2YWx1ZXMgY29udGFpbmVkIGluIGEgYFJlYWRvbmx5TWFwYC5cbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB2YWx1ZXMgPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAobSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShtLnZhbHVlcygpKS5zb3J0KE8uY29tcGFyZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29sbGVjdChPKSB7XG4gICAgdmFyIGtleXNPID0ga2V5cyhPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgICAgICB2YXIga3MgPSBrZXlzTyhtKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwga3NfMSA9IGtzOyBfaSA8IGtzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtzXzFbX2ldO1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGYoa2V5LCBtLmdldChrZXkpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59XG4vKipcbiAqIEdldCBhIHNvcnRlZCBgUmVhZG9ubHlBcnJheWAgb2YgdGhlIGtleS92YWx1ZSBwYWlycyBjb250YWluZWQgaW4gYSBgUmVhZG9ubHlNYXBgLlxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdG9SZWFkb25seUFycmF5ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gY29sbGVjdChPKShmdW5jdGlvbiAoaywgYSkgeyByZXR1cm4gW2ssIGFdOyB9KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gdG9VbmZvbGRhYmxlKG9yZCwgVSkge1xuICAgIHZhciB0b1JlYWRvbmx5QXJyYXlPID0gdG9SZWFkb25seUFycmF5KG9yZCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHZhciBrYXMgPSB0b1JlYWRvbmx5QXJyYXlPKGQpO1xuICAgICAgICB2YXIgbGVuID0ga2FzLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIFUudW5mb2xkKDAsIGZ1bmN0aW9uIChiKSB7IHJldHVybiAoYiA8IGxlbiA/IF8uc29tZShba2FzW2JdLCBiICsgMV0pIDogXy5ub25lKTsgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogSW5zZXJ0IG9yIHJlcGxhY2UgYSBrZXkvdmFsdWUgcGFpciBpbiBhIGBSZWFkb25seU1hcGAuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHVwc2VydEF0ID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgbG9va3VwV2l0aEtleUUgPSBsb29rdXBXaXRoS2V5KEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoaywgYSkge1xuICAgICAgICB2YXIgbG9va3VwV2l0aEtleUVrID0gbG9va3VwV2l0aEtleUUoayk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgdmFyIGZvdW5kID0gbG9va3VwV2l0aEtleUVrKG0pO1xuICAgICAgICAgICAgaWYgKF8uaXNOb25lKGZvdW5kKSkge1xuICAgICAgICAgICAgICAgIHZhciBvdXQgPSBuZXcgTWFwKG0pO1xuICAgICAgICAgICAgICAgIG91dC5zZXQoaywgYSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZvdW5kLnZhbHVlWzFdICE9PSBhKSB7XG4gICAgICAgICAgICAgICAgdmFyIG91dCA9IG5ldyBNYXAobSk7XG4gICAgICAgICAgICAgICAgb3V0LnNldChmb3VuZC52YWx1ZVswXSwgYSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBEZWxldGUgYSBrZXkgYW5kIHZhbHVlIGZyb20gYSBtYXBcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBkZWxldGVBdCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIGxvb2t1cFdpdGhLZXlFID0gbG9va3VwV2l0aEtleShFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGspIHsgcmV0dXJuIGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIHZhciBmb3VuZCA9IGxvb2t1cFdpdGhLZXlFKGssIG0pO1xuICAgICAgICBpZiAoXy5pc1NvbWUoZm91bmQpKSB7XG4gICAgICAgICAgICB2YXIgciA9IG5ldyBNYXAobSk7XG4gICAgICAgICAgICByLmRlbGV0ZShmb3VuZC52YWx1ZVswXSk7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbTtcbiAgICB9OyB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlQXQgPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciBtb2RpZnlBdEUgPSBtb2RpZnlBdChFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGssIGEpIHsgcmV0dXJuIG1vZGlmeUF0RShrLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1vZGlmeUF0ID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgbG9va3VwV2l0aEtleUUgPSBsb29rdXBXaXRoS2V5KEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoaywgZikgeyByZXR1cm4gZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgdmFyIGZvdW5kID0gbG9va3VwV2l0aEtleUUoaywgbSk7XG4gICAgICAgIGlmIChfLmlzTm9uZShmb3VuZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9hID0gZm91bmQudmFsdWUsIGZrID0gX2FbMF0sIGZ2ID0gX2FbMV07XG4gICAgICAgIHZhciBuZXh0ID0gZihmdik7XG4gICAgICAgIGlmIChuZXh0ID09PSBmdikge1xuICAgICAgICAgICAgcmV0dXJuIF8uc29tZShtKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgciA9IG5ldyBNYXAobSk7XG4gICAgICAgIHIuc2V0KGZrLCBuZXh0KTtcbiAgICAgICAgcmV0dXJuIF8uc29tZShyKTtcbiAgICB9OyB9O1xufTtcbi8qKlxuICogRGVsZXRlIGEga2V5IGFuZCB2YWx1ZSBmcm9tIGEgbWFwLCByZXR1cm5pbmcgdGhlIHZhbHVlIGFzIHdlbGwgYXMgdGhlIHN1YnNlcXVlbnQgbWFwXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwb3AoRSkge1xuICAgIHZhciBsb29rdXBFID0gbG9va3VwKEUpO1xuICAgIHZhciBkZWxldGVBdEUgPSBkZWxldGVBdChFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGspIHtcbiAgICAgICAgdmFyIGRlbGV0ZUF0RWsgPSBkZWxldGVBdEUoayk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgcmV0dXJuIHBpcGUobG9va3VwRShrLCBtKSwgTy5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIFthLCBkZWxldGVBdEVrKG0pXTsgfSkpO1xuICAgICAgICB9O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbG9va3VwV2l0aEtleShFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChrLCBtKSB7XG4gICAgICAgIGlmIChtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBsb29rdXBXaXRoS2V5RV8xID0gbG9va3VwV2l0aEtleShFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobSkgeyByZXR1cm4gbG9va3VwV2l0aEtleUVfMShrLCBtKTsgfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZW50cmllcyA9IG0uZW50cmllcygpO1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgd2hpbGUgKCEoZSA9IGVudHJpZXMubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBlLnZhbHVlLCBrYSA9IF9hWzBdLCBhID0gX2FbMV07XG4gICAgICAgICAgICBpZiAoRS5lcXVhbHMoa2EsIGspKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uc29tZShba2EsIGFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbG9va3VwKEUpIHtcbiAgICB2YXIgbG9va3VwV2l0aEtleUUgPSBsb29rdXBXaXRoS2V5KEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoaywgbSkge1xuICAgICAgICBpZiAobSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbG9va3VwRV8xID0gbG9va3VwKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtKSB7IHJldHVybiBsb29rdXBFXzEoaywgbSk7IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBpcGUobG9va3VwV2l0aEtleUUoaywgbSksIE8ubWFwKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIF8gPSBfYVswXSwgYSA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgIH0pKTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU3VibWFwKFNLLCBTQSkge1xuICAgIHZhciBsb29rdXBXaXRoS2V5UyA9IGxvb2t1cFdpdGhLZXkoU0spO1xuICAgIHJldHVybiBmdW5jdGlvbiAobWUsIHRoYXQpIHtcbiAgICAgICAgaWYgKHRoYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGlzU3VibWFwU0tTQV8xID0gaXNTdWJtYXAoU0ssIFNBKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodGhhdCkgeyByZXR1cm4gaXNTdWJtYXBTS1NBXzEodGhhdCwgbWUpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbnRyaWVzID0gbWUuZW50cmllcygpO1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgd2hpbGUgKCEoZSA9IGVudHJpZXMubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBlLnZhbHVlLCBrID0gX2FbMF0sIGEgPSBfYVsxXTtcbiAgICAgICAgICAgIHZhciBkMk9wdEEgPSBsb29rdXBXaXRoS2V5UyhrLCB0aGF0KTtcbiAgICAgICAgICAgIGlmIChfLmlzTm9uZShkMk9wdEEpIHx8ICFTSy5lcXVhbHMoaywgZDJPcHRBLnZhbHVlWzBdKSB8fCAhU0EuZXF1YWxzKGEsIGQyT3B0QS52YWx1ZVsxXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZW1wdHkgPSBcbi8vIHRoZSB0eXBlIGFubm90YXRpb24gaGVyZSBpcyBpbnRlbmRlZCAob3RoZXJ3aXNlIGl0IGRvZXNuJ3QgdHlwZS1jaGVjaylcbm5ldyBNYXAoKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcShTSywgU0EpIHtcbiAgICB2YXIgaXNTdWJtYXBTS1NBID0gaXNTdWJtYXAoU0ssIFNBKTtcbiAgICByZXR1cm4gZnJvbUVxdWFscyhmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gaXNTdWJtYXBTS1NBKHgsIHkpICYmIGlzU3VibWFwU0tTQSh5LCB4KTsgfSk7XG59XG4vKipcbiAqIEdldHMgYE1vbm9pZGAgaW5zdGFuY2UgZm9yIE1hcHMgZ2l2ZW4gYFNlbWlncm91cGAgaW5zdGFuY2UgZm9yIHRoZWlyIHZhbHVlc1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9ub2lkKFNLLCBTQSkge1xuICAgIHZhciBsb29rdXBXaXRoS2V5UyA9IGxvb2t1cFdpdGhLZXkoU0spO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKG14LCBteSkge1xuICAgICAgICAgICAgaWYgKGlzRW1wdHkobXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG15O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRW1wdHkobXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG14O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTWFwKG14KTtcbiAgICAgICAgICAgIHZhciBlbnRyaWVzID0gbXkuZW50cmllcygpO1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICB3aGlsZSAoIShlID0gZW50cmllcy5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBlLnZhbHVlLCBrID0gX2FbMF0sIGEgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICB2YXIgbXhPcHRBID0gbG9va3VwV2l0aEtleVMoaywgbXgpO1xuICAgICAgICAgICAgICAgIGlmIChfLmlzU29tZShteE9wdEEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHIuc2V0KG14T3B0QS52YWx1ZVswXSwgU0EuY29uY2F0KG14T3B0QS52YWx1ZVsxXSwgYSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgci5zZXQoaywgYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0sXG4gICAgICAgIGVtcHR5OiBlbXB0eVxuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZSBhIG1hcCB3aXRoIG9uZSBrZXkvdmFsdWUgcGFpclxuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNpbmdsZXRvbiA9IGZ1bmN0aW9uIChrLCBhKSB7IHJldHVybiBuZXcgTWFwKFtbaywgYV1dKTsgfTtcbmV4cG9ydCBmdW5jdGlvbiBmcm9tRm9sZGFibGUoRSwgTSwgRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmthKSB7XG4gICAgICAgIHZhciBsb29rdXBXaXRoS2V5RSA9IGxvb2t1cFdpdGhLZXkoRSk7XG4gICAgICAgIHJldHVybiBGLnJlZHVjZShma2EsIG5ldyBNYXAoKSwgZnVuY3Rpb24gKGIsIF9hKSB7XG4gICAgICAgICAgICB2YXIgayA9IF9hWzBdLCBhID0gX2FbMV07XG4gICAgICAgICAgICB2YXIgYk9wdCA9IGxvb2t1cFdpdGhLZXlFKGssIGIpO1xuICAgICAgICAgICAgaWYgKF8uaXNTb21lKGJPcHQpKSB7XG4gICAgICAgICAgICAgICAgYi5zZXQoYk9wdC52YWx1ZVswXSwgTS5jb25jYXQoYk9wdC52YWx1ZVsxXSwgYSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYi5zZXQoaywgYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYjtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbnZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7XG4gICAgdmFyIG0gPSBuZXcgTWFwKCk7XG4gICAgdmFyIGVudHJpZXMgPSBmYS5lbnRyaWVzKCk7XG4gICAgdmFyIGU7XG4gICAgd2hpbGUgKCEoZSA9IGVudHJpZXMubmV4dCgpKS5kb25lKSB7XG4gICAgICAgIHZhciBfYSA9IGUudmFsdWUsIGtleSA9IF9hWzBdLCBhID0gX2FbMV07XG4gICAgICAgIG0uc2V0KGtleSwgZihrZXksIGEpKTtcbiAgICB9XG4gICAgcmV0dXJuIG07XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBsZWZ0ID0gbmV3IE1hcCgpO1xuICAgICAgICB2YXIgcmlnaHQgPSBuZXcgTWFwKCk7XG4gICAgICAgIHZhciBlbnRyaWVzID0gZmEuZW50cmllcygpO1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgd2hpbGUgKCEoZSA9IGVudHJpZXMubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBlLnZhbHVlLCBrID0gX2FbMF0sIGEgPSBfYVsxXTtcbiAgICAgICAgICAgIHZhciBlaSA9IGYoaywgYSk7XG4gICAgICAgICAgICBpZiAoXy5pc0xlZnQoZWkpKSB7XG4gICAgICAgICAgICAgICAgbGVmdC5zZXQoaywgZWkubGVmdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByaWdodC5zZXQoaywgZWkucmlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpdGlvbldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgdmFyIGxlZnQgPSBuZXcgTWFwKCk7XG4gICAgICAgIHZhciByaWdodCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIGVudHJpZXMgPSBtLmVudHJpZXMoKTtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHdoaWxlICghKGUgPSBlbnRyaWVzLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgICAgdmFyIF9hID0gZS52YWx1ZSwgayA9IF9hWzBdLCBhID0gX2FbMV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlV2l0aEluZGV4KGssIGEpKSB7XG4gICAgICAgICAgICAgICAgcmlnaHQuc2V0KGssIGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGVmdC5zZXQoaywgYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0LCByaWdodCk7XG4gICAgfTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlck1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgbSA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIGVudHJpZXMgPSBmYS5lbnRyaWVzKCk7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB3aGlsZSAoIShlID0gZW50cmllcy5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IGUudmFsdWUsIGsgPSBfYVswXSwgYSA9IF9hWzFdO1xuICAgICAgICAgICAgdmFyIG8gPSBmKGssIGEpO1xuICAgICAgICAgICAgaWYgKF8uaXNTb21lKG8pKSB7XG4gICAgICAgICAgICAgICAgbS5zZXQoaywgby52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG07XG4gICAgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobSkge1xuICAgICAgICB2YXIgb3V0ID0gbmV3IE1hcCgpO1xuICAgICAgICB2YXIgZW50cmllcyA9IG0uZW50cmllcygpO1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgd2hpbGUgKCEoZSA9IGVudHJpZXMubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBlLnZhbHVlLCBrID0gX2FbMF0sIGEgPSBfYVsxXTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGVXaXRoSW5kZXgoaywgYSkpIHtcbiAgICAgICAgICAgICAgICBvdXQuc2V0KGssIGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBfbWFwV2l0aEluZGV4KGZhLCBmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG52YXIgX2ZpbHRlciA9IGZ1bmN0aW9uIChmYSwgcCkge1xuICAgIHJldHVybiBfZmlsdGVyV2l0aEluZGV4KGZhLCBmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcChhKTsgfSk7XG59O1xudmFyIF9maWx0ZXJNYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIF9maWx0ZXJNYXBXaXRoSW5kZXgoZmEsIGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbnZhciBfcGFydGl0aW9uID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gX3BhcnRpdGlvbldpdGhJbmRleChmYSwgZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIHByZWRpY2F0ZShhKTsgfSk7XG59O1xudmFyIF9wYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIF9wYXJ0aXRpb25NYXBXaXRoSW5kZXgoZmEsIGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbnZhciBfZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJXaXRoSW5kZXgocCkpOyB9O1xudmFyIF9maWx0ZXJNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgZmlsdGVyTWFwV2l0aEluZGV4KGYpKTtcbn07XG52YXIgX3BhcnRpdGlvbldpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgcCkgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uV2l0aEluZGV4KHApKTsgfTtcbnZhciBfcGFydGl0aW9uTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbk1hcFdpdGhJbmRleChmKSk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjb21wYWN0ID0gZnVuY3Rpb24gKGZhKSB7XG4gICAgdmFyIG0gPSBuZXcgTWFwKCk7XG4gICAgdmFyIGVudHJpZXMgPSBmYS5lbnRyaWVzKCk7XG4gICAgdmFyIGU7XG4gICAgd2hpbGUgKCEoZSA9IGVudHJpZXMubmV4dCgpKS5kb25lKSB7XG4gICAgICAgIHZhciBfYSA9IGUudmFsdWUsIGsgPSBfYVswXSwgb2EgPSBfYVsxXTtcbiAgICAgICAgaWYgKF8uaXNTb21lKG9hKSkge1xuICAgICAgICAgICAgbS5zZXQoaywgb2EudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgcmV0dXJuIF9maWx0ZXIoZmEsIHByZWRpY2F0ZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlck1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gX2ZpbHRlck1hcChmYSwgZik7XG59OyB9O1xuLyoqXG4gKiBgbWFwYCBjYW4gYmUgdXNlZCB0byB0dXJuIGZ1bmN0aW9ucyBgKGE6IEEpID0+IEJgIGludG8gZnVuY3Rpb25zIGAoZmE6IEY8QT4pID0+IEY8Qj5gIHdob3NlIGFyZ3VtZW50IGFuZCByZXR1cm4gdHlwZXNcbiAqIHVzZSB0aGUgdHlwZSBjb25zdHJ1Y3RvciBgRmAgdG8gcmVwcmVzZW50IHNvbWUgY29tcHV0YXRpb25hbCBjb250ZXh0LlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfbWFwKGZhLCBmKTsgfTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjcuMVxuICovXG5leHBvcnQgdmFyIG1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICByZXR1cm4gX21hcFdpdGhJbmRleChmYSwgZik7XG59OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb24gPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gX3BhcnRpdGlvbihmYSwgcHJlZGljYXRlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gX3BhcnRpdGlvbk1hcChmYSwgZik7IH07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNlcGFyYXRlID0gZnVuY3Rpb24gKGZhKSB7XG4gICAgdmFyIGxlZnQgPSBuZXcgTWFwKCk7XG4gICAgdmFyIHJpZ2h0ID0gbmV3IE1hcCgpO1xuICAgIHZhciBlbnRyaWVzID0gZmEuZW50cmllcygpO1xuICAgIHZhciBlO1xuICAgIHdoaWxlICghKGUgPSBlbnRyaWVzLm5leHQoKSkuZG9uZSkge1xuICAgICAgICB2YXIgX2EgPSBlLnZhbHVlLCBrID0gX2FbMF0sIGVpID0gX2FbMV07XG4gICAgICAgIGlmIChfLmlzTGVmdChlaSkpIHtcbiAgICAgICAgICAgIGxlZnQuc2V0KGssIGVpLmxlZnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmlnaHQuc2V0KGssIGVpLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdSZWFkb25seU1hcCc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFLCBTKSB7XG4gICAgdmFyIHVuaW9uRVMgPSB1bmlvbihFLCBTKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiB1bmlvbkVTKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvbk1vbm9pZCA9IGZ1bmN0aW9uIChFLCBTKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZ2V0VW5pb25TZW1pZ3JvdXAoRSwgUykuY29uY2F0LFxuICAgIGVtcHR5OiBlbXB0eVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAgPSBmdW5jdGlvbiAoRSwgUykge1xuICAgIHZhciBpbnRlcnNlY3Rpb25FUyA9IGludGVyc2VjdGlvbihFLCBTKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBpbnRlcnNlY3Rpb25FUyhzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RGlmZmVyZW5jZU1hZ21hID0gZnVuY3Rpb24gKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGlmZmVyZW5jZUUgPSBkaWZmZXJlbmNlKEUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZGlmZmVyZW5jZUUoc2Vjb25kKShmaXJzdCk7IH1cbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJhYmxlV2l0aEluZGV4KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFVSSTogVVJJLFxuICAgICAgICBfRTogdW5kZWZpbmVkLFxuICAgICAgICBtYXA6IF9tYXAsXG4gICAgICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICAgICAgY29tcGFjdDogY29tcGFjdCxcbiAgICAgICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgICAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICAgICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgICAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgICAgIHBhcnRpdGlvbk1hcFdpdGhJbmRleDogX3BhcnRpdGlvbk1hcFdpdGhJbmRleCxcbiAgICAgICAgcGFydGl0aW9uV2l0aEluZGV4OiBfcGFydGl0aW9uV2l0aEluZGV4LFxuICAgICAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IF9maWx0ZXJNYXBXaXRoSW5kZXgsXG4gICAgICAgIGZpbHRlcldpdGhJbmRleDogX2ZpbHRlcldpdGhJbmRleFxuICAgIH07XG59XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3IgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZsYXAgPSAvKiNfX1BVUkVfXyovIGZsYXBfKEZ1bmN0b3IpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RnVuY3RvcldpdGhJbmRleCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgVVJJOiBVUkksXG4gICAgX0U6IHVuZGVmaW5lZCxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4XG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29tcGFjdGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGVcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2UgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciByZWR1Y2VXaXRoSW5kZXhPID0gcmVkdWNlV2l0aEluZGV4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gcmVkdWNlV2l0aEluZGV4TyhiLCBmdW5jdGlvbiAoXywgYiwgYSkgeyByZXR1cm4gZihiLCBhKTsgfSk7IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGZvbGRNYXAgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TyA9IGZvbGRNYXBXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChNKSB7XG4gICAgICAgIHZhciBmb2xkTWFwV2l0aEluZGV4T00gPSBmb2xkTWFwV2l0aEluZGV4TyhNKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmb2xkTWFwV2l0aEluZGV4T00oZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXhPID0gcmVkdWNlUmlnaHRXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiByZWR1Y2VSaWdodFdpdGhJbmRleE8oYiwgZnVuY3Rpb24gKF8sIGIsIGEpIHsgcmV0dXJuIGYoYiwgYSk7IH0pOyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRGb2xkYWJsZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHJlZHVjZU8gPSByZWR1Y2UoTyk7XG4gICAgdmFyIGZvbGRNYXBPID0gZm9sZE1hcChPKTtcbiAgICB2YXIgcmVkdWNlUmlnaHRPID0gcmVkdWNlUmlnaHQoTyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgVVJJOiBVUkksXG4gICAgICAgIF9FOiB1bmRlZmluZWQsXG4gICAgICAgIHJlZHVjZTogZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VPKGIsIGYpKTsgfSxcbiAgICAgICAgZm9sZE1hcDogZnVuY3Rpb24gKE0pIHtcbiAgICAgICAgICAgIHZhciBmb2xkTWFwT00gPSBmb2xkTWFwTyhNKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBPTShmKSk7IH07XG4gICAgICAgIH0sXG4gICAgICAgIHJlZHVjZVJpZ2h0OiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0TyhiLCBmKSk7IH1cbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciBrZXlzTyA9IGtleXMoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAobSkge1xuICAgICAgICB2YXIgb3V0ID0gYjtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGtleXNPKG0pOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGsgPSBfYVtfaV07XG4gICAgICAgICAgICBvdXQgPSBmKGssIG91dCwgbS5nZXQoaykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIGtleXNPID0ga2V5cyhPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKE0pIHsgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAobSkge1xuICAgICAgICB2YXIgb3V0ID0gTS5lbXB0eTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGtleXNPKG0pOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGsgPSBfYVtfaV07XG4gICAgICAgICAgICBvdXQgPSBNLmNvbmNhdChvdXQsIGYoaywgbS5nZXQoaykpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZVJpZ2h0V2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIga2V5c08gPSBrZXlzKE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgdmFyIG91dCA9IGI7XG4gICAgICAgIHZhciBrcyA9IGtleXNPKG0pO1xuICAgICAgICB2YXIgbGVuID0ga3MubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gbGVuIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciBrID0ga3NbaV07XG4gICAgICAgICAgICBvdXQgPSBmKGssIG0uZ2V0KGspLCBvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rm9sZGFibGVXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciBGID0gZ2V0Rm9sZGFibGUoTyk7XG4gICAgdmFyIHJlZHVjZVdpdGhJbmRleE8gPSByZWR1Y2VXaXRoSW5kZXgoTyk7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhPID0gZm9sZE1hcFdpdGhJbmRleChPKTtcbiAgICB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXhPID0gcmVkdWNlUmlnaHRXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgVVJJOiBVUkksXG4gICAgICAgIF9FOiB1bmRlZmluZWQsXG4gICAgICAgIHJlZHVjZTogRi5yZWR1Y2UsXG4gICAgICAgIGZvbGRNYXA6IEYuZm9sZE1hcCxcbiAgICAgICAgcmVkdWNlUmlnaHQ6IEYucmVkdWNlUmlnaHQsXG4gICAgICAgIHJlZHVjZVdpdGhJbmRleDogZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VXaXRoSW5kZXhPKGIsIGYpKTsgfSxcbiAgICAgICAgZm9sZE1hcFdpdGhJbmRleDogZnVuY3Rpb24gKE0pIHtcbiAgICAgICAgICAgIHZhciBmb2xkTWFwV2l0aEluZGV4T00gPSBmb2xkTWFwV2l0aEluZGV4TyhNKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBXaXRoSW5kZXhPTShmKSk7IH07XG4gICAgICAgIH0sXG4gICAgICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0V2l0aEluZGV4TyhiLCBmKSk7IH1cbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRUcmF2ZXJzYWJsZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFRXSSA9IGdldFRyYXZlcnNhYmxlV2l0aEluZGV4KE8pO1xuICAgIHZhciBGID0gZ2V0Rm9sZGFibGUoTyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgVVJJOiBVUkksXG4gICAgICAgIF9FOiB1bmRlZmluZWQsXG4gICAgICAgIG1hcDogX21hcCxcbiAgICAgICAgcmVkdWNlOiBGLnJlZHVjZSxcbiAgICAgICAgZm9sZE1hcDogRi5mb2xkTWFwLFxuICAgICAgICByZWR1Y2VSaWdodDogRi5yZWR1Y2VSaWdodCxcbiAgICAgICAgdHJhdmVyc2U6IFRXSS50cmF2ZXJzZSxcbiAgICAgICAgc2VxdWVuY2U6IFRXSS5zZXF1ZW5jZVxuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldFRyYXZlcnNhYmxlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgRldJID0gZ2V0Rm9sZGFibGVXaXRoSW5kZXgoTyk7XG4gICAgdmFyIGtleXNPID0ga2V5cyhPKTtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoRikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7XG4gICAgICAgICAgICB2YXIgZm0gPSBGLm9mKG5ldyBNYXAoKSk7XG4gICAgICAgICAgICB2YXIga3MgPSBrZXlzTyh0YSk7XG4gICAgICAgICAgICB2YXIgbGVuID0ga3MubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IHRhLmdldChrZXkpO1xuICAgICAgICAgICAgICAgIGZtID0gRi5hcChGLm1hcChmbSwgZnVuY3Rpb24gKG0pIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7IHJldHVybiBtLnNldChrZXksIGIpOyB9OyB9KSwgZihrZXksIGEpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgX2xvb3BfMShpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmbTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHZhciB0cmF2ZXJzZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleEYgPSB0cmF2ZXJzZVdpdGhJbmRleChGKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gdHJhdmVyc2VXaXRoSW5kZXhGKHRhLCBmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG4gICAgfTtcbiAgICB2YXIgc2VxdWVuY2UgPSBmdW5jdGlvbiAoRikge1xuICAgICAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhGID0gdHJhdmVyc2VXaXRoSW5kZXgoRik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4Rih0YSwgU0spOyB9O1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgVVJJOiBVUkksXG4gICAgICAgIF9FOiB1bmRlZmluZWQsXG4gICAgICAgIG1hcDogX21hcCxcbiAgICAgICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgICAgICByZWR1Y2U6IEZXSS5yZWR1Y2UsXG4gICAgICAgIGZvbGRNYXA6IEZXSS5mb2xkTWFwLFxuICAgICAgICByZWR1Y2VSaWdodDogRldJLnJlZHVjZVJpZ2h0LFxuICAgICAgICByZWR1Y2VXaXRoSW5kZXg6IEZXSS5yZWR1Y2VXaXRoSW5kZXgsXG4gICAgICAgIGZvbGRNYXBXaXRoSW5kZXg6IEZXSS5mb2xkTWFwV2l0aEluZGV4LFxuICAgICAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogRldJLnJlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgICAgICB0cmF2ZXJzZTogdHJhdmVyc2UsXG4gICAgICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICAgICAgdHJhdmVyc2VXaXRoSW5kZXg6IHRyYXZlcnNlV2l0aEluZGV4XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2l0aGVyYWJsZShPKSB7XG4gICAgdmFyIFRXSSA9IGdldFRyYXZlcnNhYmxlV2l0aEluZGV4KE8pO1xuICAgIHJldHVybiB7XG4gICAgICAgIFVSSTogVVJJLFxuICAgICAgICBfRTogdW5kZWZpbmVkLFxuICAgICAgICBtYXA6IF9tYXAsXG4gICAgICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICAgICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgICAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICAgICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgICAgICByZWR1Y2U6IFRXSS5yZWR1Y2UsXG4gICAgICAgIGZvbGRNYXA6IFRXSS5mb2xkTWFwLFxuICAgICAgICByZWR1Y2VSaWdodDogVFdJLnJlZHVjZVJpZ2h0LFxuICAgICAgICB0cmF2ZXJzZTogVFdJLnRyYXZlcnNlLFxuICAgICAgICBzZXF1ZW5jZTogVFdJLnNlcXVlbmNlLFxuICAgICAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgICAgIHJlZHVjZVdpdGhJbmRleDogVFdJLnJlZHVjZVdpdGhJbmRleCxcbiAgICAgICAgZm9sZE1hcFdpdGhJbmRleDogVFdJLmZvbGRNYXBXaXRoSW5kZXgsXG4gICAgICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBUV0kucmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgICAgIHRyYXZlcnNlV2l0aEluZGV4OiBUV0kudHJhdmVyc2VXaXRoSW5kZXgsXG4gICAgICAgIHdpbHQ6IHdpbHREZWZhdWx0KFRXSSwgQ29tcGFjdGFibGUpLFxuICAgICAgICB3aXRoZXI6IHdpdGhlckRlZmF1bHQoVFdJLCBDb21wYWN0YWJsZSlcbiAgICB9O1xufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gdXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaW9uID0gZnVuY3Rpb24gKEUsIE0pIHtcbiAgICB2YXIgbG9va3VwRSA9IGxvb2t1cChFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkgeyByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgIGlmIChpc0VtcHR5KGZpcnN0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlY29uZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3Q7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIGZpcnN0RW50cmllcyA9IGZpcnN0LmVudHJpZXMoKTtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHdoaWxlICghKGUgPSBmaXJzdEVudHJpZXMubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBlLnZhbHVlLCBrID0gX2FbMF0sIGEgPSBfYVsxXTtcbiAgICAgICAgICAgIHZhciBva2EgPSBsb29rdXBFKGspKHNlY29uZCk7XG4gICAgICAgICAgICBpZiAoXy5pc1NvbWUob2thKSkge1xuICAgICAgICAgICAgICAgIG91dC5zZXQoaywgTS5jb25jYXQoYSwgb2thLnZhbHVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXQuc2V0KGssIGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzZWNvbmRFbnRyaWVzID0gc2Vjb25kLmVudHJpZXMoKTtcbiAgICAgICAgd2hpbGUgKCEoZSA9IHNlY29uZEVudHJpZXMubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBlLnZhbHVlLCBrID0gX2JbMF0sIGEgPSBfYlsxXTtcbiAgICAgICAgICAgIHZhciBva2EgPSBsb29rdXBFKGspKG91dCk7XG4gICAgICAgICAgICBpZiAoXy5pc05vbmUob2thKSkge1xuICAgICAgICAgICAgICAgIG91dC5zZXQoaywgYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9OyB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGludGVyc2VjdGlvbiA9IGZ1bmN0aW9uIChFLCBNKSB7XG4gICAgdmFyIGxvb2t1cEUgPSBsb29rdXAoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHsgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICBpZiAoaXNFbXB0eShmaXJzdCkgfHwgaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIGVudHJpZXMgPSBmaXJzdC5lbnRyaWVzKCk7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB3aGlsZSAoIShlID0gZW50cmllcy5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IGUudmFsdWUsIGsgPSBfYVswXSwgYSA9IF9hWzFdO1xuICAgICAgICAgICAgdmFyIG9rYSA9IGxvb2t1cEUoaykoc2Vjb25kKTtcbiAgICAgICAgICAgIGlmIChfLmlzU29tZShva2EpKSB7XG4gICAgICAgICAgICAgICAgb3V0LnNldChrLCBNLmNvbmNhdChhLCBva2EudmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07IH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZGlmZmVyZW5jZSA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIG1lbWJlckUgPSBtZW1iZXIoRSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0VtcHR5KHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3V0ID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdmFyIGZpcnN0RW50cmllcyA9IGZpcnN0LmVudHJpZXMoKTtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgd2hpbGUgKCEoZSA9IGZpcnN0RW50cmllcy5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBlLnZhbHVlLCBrID0gX2FbMF0sIGEgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICBpZiAoIW1lbWJlckUoaykoc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXQuc2V0KGssIGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzZWNvbmRFbnRyaWVzID0gc2Vjb25kLmVudHJpZXMoKTtcbiAgICAgICAgICAgIHdoaWxlICghKGUgPSBzZWNvbmRFbnRyaWVzLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgICAgICAgIHZhciBfYiA9IGUudmFsdWUsIGsgPSBfYlswXSwgYSA9IF9iWzFdO1xuICAgICAgICAgICAgICAgIGlmICghbWVtYmVyRShrKShmaXJzdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnNldChrLCBhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgW2B1cHNlcnRBdGBdKCN1cHNlcnRhdCkgaW5zdGVhZC5cbiAqXG4gQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBpbnNlcnRBdCA9IHVwc2VydEF0O1xuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYEZ1bmN0b3JgIGluc3RhbmNlLCBwYXNzIGBSTS5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBSTS5yZWFkb25seU1hcGBcbiAqICh3aGVyZSBgUk1gIGlzIGZyb20gYGltcG9ydCBSTSBmcm9tICdmcC10cy9SZWFkb25seU1hcCdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlNYXAgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcFxufTtcbiIsCiAgInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5pbXBvcnQgeyBwaXBlIH0gZnJvbSAnLi9mdW5jdGlvbic7XG5pbXBvcnQgeyBmbGFwIGFzIGZsYXBfIH0gZnJvbSAnLi9GdW5jdG9yJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnLi9pbnRlcm5hbCc7XG5pbXBvcnQgKiBhcyBPIGZyb20gJy4vT3B0aW9uJztcbmltcG9ydCAqIGFzIFJNIGZyb20gJy4vUmVhZG9ubHlNYXAnO1xuaW1wb3J0IHsgc2VwYXJhdGVkIH0gZnJvbSAnLi9TZXBhcmF0ZWQnO1xuaW1wb3J0IHsgd2lsdERlZmF1bHQsIHdpdGhlckRlZmF1bHQgfSBmcm9tICcuL1dpdGhlcmFibGUnO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRTaG93ID0gUk0uZ2V0U2hvdztcbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2Yga2V5L3ZhbHVlIHBhaXJzIGluIGEgbWFwXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc2l6ZSA9IFJNLnNpemU7XG4vKipcbiAqIFRlc3Qgd2hldGhlciBvciBub3QgYSBtYXAgaXMgZW1wdHlcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc0VtcHR5ID0gUk0uaXNFbXB0eTtcbi8vIFRPRE86IHJlbW92ZSBub24tY3VycmllZCBvdmVybG9hZGluZyBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb3Igbm90IGEga2V5IGV4aXN0cyBpbiBhIG1hcFxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1lbWJlciA9IFJNLm1lbWJlcjtcbi8vIFRPRE86IHJlbW92ZSBub24tY3VycmllZCBvdmVybG9hZGluZyBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb3Igbm90IGEgdmFsdWUgaXMgYSBtZW1iZXIgb2YgYSBtYXBcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBlbGVtID0gUk0uZWxlbTtcbi8qKlxuICogR2V0IGEgc29ydGVkIGBBcnJheWAgb2YgdGhlIGtleXMgY29udGFpbmVkIGluIGEgYE1hcGAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIga2V5cyA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKG0ua2V5cygpKS5zb3J0KE8uY29tcGFyZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEdldCBhIHNvcnRlZCBgQXJyYXlgIG9mIHRoZSB2YWx1ZXMgY29udGFpbmVkIGluIGEgYE1hcGAuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdmFsdWVzID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20obS52YWx1ZXMoKSkuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbGxlY3QoTykge1xuICAgIHZhciBrZXlzTyA9IGtleXMoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICAgICAgdmFyIGtzID0ga2V5c08obSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtzXzEgPSBrczsgX2kgPCBrc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrc18xW19pXTtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChmKGtleSwgbS5nZXQoa2V5KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfTtcbiAgICB9O1xufVxuLyoqXG4gKiBHZXQgYSBzb3J0ZWQgYEFycmF5YCBvZiB0aGUga2V5L3ZhbHVlIHBhaXJzIGNvbnRhaW5lZCBpbiBhIGBNYXBgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9BcnJheShPKSB7XG4gICAgcmV0dXJuIGNvbGxlY3QoTykoZnVuY3Rpb24gKGssIGEpIHsgcmV0dXJuIFtrLCBhXTsgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdG9VbmZvbGRhYmxlKG9yZCwgVSkge1xuICAgIHZhciB0b0FycmF5TyA9IHRvQXJyYXkob3JkKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgdmFyIGthcyA9IHRvQXJyYXlPKGQpO1xuICAgICAgICB2YXIgbGVuID0ga2FzLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIFUudW5mb2xkKDAsIGZ1bmN0aW9uIChiKSB7IHJldHVybiAoYiA8IGxlbiA/IF8uc29tZShba2FzW2JdLCBiICsgMV0pIDogXy5ub25lKTsgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogSW5zZXJ0IG9yIHJlcGxhY2UgYSBrZXkvdmFsdWUgcGFpciBpbiBhIGBNYXBgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHVwc2VydEF0ID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgbG9va3VwV2l0aEtleUUgPSBsb29rdXBXaXRoS2V5KEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoaywgYSkge1xuICAgICAgICB2YXIgbG9va3VwV2l0aEtleUVrID0gbG9va3VwV2l0aEtleUUoayk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgdmFyIGZvdW5kID0gbG9va3VwV2l0aEtleUVrKG0pO1xuICAgICAgICAgICAgaWYgKF8uaXNOb25lKGZvdW5kKSkge1xuICAgICAgICAgICAgICAgIHZhciBvdXQgPSBuZXcgTWFwKG0pO1xuICAgICAgICAgICAgICAgIG91dC5zZXQoaywgYSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZvdW5kLnZhbHVlWzFdICE9PSBhKSB7XG4gICAgICAgICAgICAgICAgdmFyIG91dCA9IG5ldyBNYXAobSk7XG4gICAgICAgICAgICAgICAgb3V0LnNldChmb3VuZC52YWx1ZVswXSwgYSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBEZWxldGUgYSBrZXkgYW5kIHZhbHVlIGZyb20gYSBtYXBcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBkZWxldGVBdCA9IGZ1bmN0aW9uIChFKSB7XG4gICAgdmFyIGxvb2t1cFdpdGhLZXlFID0gbG9va3VwV2l0aEtleShFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGspIHsgcmV0dXJuIGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIHZhciBmb3VuZCA9IGxvb2t1cFdpdGhLZXlFKGssIG0pO1xuICAgICAgICBpZiAoXy5pc1NvbWUoZm91bmQpKSB7XG4gICAgICAgICAgICB2YXIgciA9IG5ldyBNYXAobSk7XG4gICAgICAgICAgICByLmRlbGV0ZShmb3VuZC52YWx1ZVswXSk7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbTtcbiAgICB9OyB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlQXQgPSBmdW5jdGlvbiAoRSkge1xuICAgIHZhciBtb2RpZnlBdEUgPSBtb2RpZnlBdChFKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGssIGEpIHsgcmV0dXJuIG1vZGlmeUF0RShrLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1vZGlmeUF0ID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgbG9va3VwV2l0aEtleUUgPSBsb29rdXBXaXRoS2V5KEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoaywgZikgeyByZXR1cm4gZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgdmFyIGZvdW5kID0gbG9va3VwV2l0aEtleUUoaywgbSk7XG4gICAgICAgIGlmIChfLmlzTm9uZShmb3VuZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHIgPSBuZXcgTWFwKG0pO1xuICAgICAgICByLnNldChmb3VuZC52YWx1ZVswXSwgZihmb3VuZC52YWx1ZVsxXSkpO1xuICAgICAgICByZXR1cm4gXy5zb21lKHIpO1xuICAgIH07IH07XG59O1xuLyoqXG4gKiBEZWxldGUgYSBrZXkgYW5kIHZhbHVlIGZyb20gYSBtYXAsIHJldHVybmluZyB0aGUgdmFsdWUgYXMgd2VsbCBhcyB0aGUgc3Vic2VxdWVudCBtYXBcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBvcChFKSB7XG4gICAgdmFyIGxvb2t1cEUgPSBsb29rdXAoRSk7XG4gICAgdmFyIGRlbGV0ZUF0RSA9IGRlbGV0ZUF0KEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoaykge1xuICAgICAgICB2YXIgZGVsZXRlQXRFayA9IGRlbGV0ZUF0RShrKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4gcGlwZShsb29rdXBFKGssIG0pLCBPLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gW2EsIGRlbGV0ZUF0RWsobSldOyB9KSk7XG4gICAgICAgIH07XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb29rdXBXaXRoS2V5KEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGssIG0pIHtcbiAgICAgICAgaWYgKG0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGxvb2t1cFdpdGhLZXlFXzEgPSBsb29rdXBXaXRoS2V5KEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtKSB7IHJldHVybiBsb29rdXBXaXRoS2V5RV8xKGssIG0pOyB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbnRyaWVzID0gbS5lbnRyaWVzKCk7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB3aGlsZSAoIShlID0gZW50cmllcy5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IGUudmFsdWUsIGthID0gX2FbMF0sIGEgPSBfYVsxXTtcbiAgICAgICAgICAgIGlmIChFLmVxdWFscyhrYSwgaykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5zb21lKFtrYSwgYV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgfTtcbn1cbi8vIFRPRE86IHJlbW92ZSBub24tY3VycmllZCBvdmVybG9hZGluZyBpbiB2M1xuLyoqXG4gKiBMb29rdXAgdGhlIHZhbHVlIGZvciBhIGtleSBpbiBhIGBNYXBgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGxvb2t1cCA9IFJNLmxvb2t1cDtcbi8vIFRPRE86IHJlbW92ZSBub24tY3VycmllZCBvdmVybG9hZGluZyBpbiB2M1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb3Igbm90IG9uZSBgTWFwYCBjb250YWlucyBhbGwgb2YgdGhlIGtleXMgYW5kIHZhbHVlcyBjb250YWluZWQgaW4gYW5vdGhlciBgTWFwYFxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGlzU3VibWFwID0gUk0uaXNTdWJtYXA7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGdldEVxID0gUk0uZ2V0RXE7XG4vKipcbiAqIEdldHMgYE1vbm9pZGAgaW5zdGFuY2UgZm9yIE1hcHMgZ2l2ZW4gYFNlbWlncm91cGAgaW5zdGFuY2UgZm9yIHRoZWlyIHZhbHVlc1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9ub2lkKFNLLCBTQSkge1xuICAgIHZhciBsb29rdXBXaXRoS2V5UyA9IGxvb2t1cFdpdGhLZXkoU0spO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKG14LCBteSkge1xuICAgICAgICAgICAgaWYgKGlzRW1wdHkobXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG15O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRW1wdHkobXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG14O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTWFwKG14KTtcbiAgICAgICAgICAgIHZhciBlbnRyaWVzID0gbXkuZW50cmllcygpO1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICB3aGlsZSAoIShlID0gZW50cmllcy5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBlLnZhbHVlLCBrID0gX2FbMF0sIGEgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICB2YXIgbXhPcHRBID0gbG9va3VwV2l0aEtleVMoaywgbXgpO1xuICAgICAgICAgICAgICAgIGlmIChfLmlzU29tZShteE9wdEEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHIuc2V0KG14T3B0QS52YWx1ZVswXSwgU0EuY29uY2F0KG14T3B0QS52YWx1ZVsxXSwgYSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgci5zZXQoaywgYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0sXG4gICAgICAgIGVtcHR5OiBuZXcgTWFwKClcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBtYXAgd2l0aCBvbmUga2V5L3ZhbHVlIHBhaXJcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBzaW5nbGV0b24gPSBmdW5jdGlvbiAoaywgYSkgeyByZXR1cm4gbmV3IE1hcChbW2ssIGFdXSk7IH07XG5leHBvcnQgZnVuY3Rpb24gZnJvbUZvbGRhYmxlKEUsIE0sIEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZrYSkge1xuICAgICAgICB2YXIgbG9va3VwV2l0aEtleUUgPSBsb29rdXBXaXRoS2V5KEUpO1xuICAgICAgICByZXR1cm4gRi5yZWR1Y2UoZmthLCBuZXcgTWFwKCksIGZ1bmN0aW9uIChiLCBfYSkge1xuICAgICAgICAgICAgdmFyIGsgPSBfYVswXSwgYSA9IF9hWzFdO1xuICAgICAgICAgICAgdmFyIGJPcHQgPSBsb29rdXBXaXRoS2V5RShrLCBiKTtcbiAgICAgICAgICAgIGlmIChfLmlzU29tZShiT3B0KSkge1xuICAgICAgICAgICAgICAgIGIuc2V0KGJPcHQudmFsdWVbMF0sIE0uY29uY2F0KGJPcHQudmFsdWVbMV0sIGEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGIuc2V0KGssIGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGI7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG52YXIgX21hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikge1xuICAgIHZhciBtID0gbmV3IE1hcCgpO1xuICAgIHZhciBlbnRyaWVzID0gZmEuZW50cmllcygpO1xuICAgIHZhciBlO1xuICAgIHdoaWxlICghKGUgPSBlbnRyaWVzLm5leHQoKSkuZG9uZSkge1xuICAgICAgICB2YXIgX2EgPSBlLnZhbHVlLCBrZXkgPSBfYVswXSwgYSA9IF9hWzFdO1xuICAgICAgICBtLnNldChrZXksIGYoa2V5LCBhKSk7XG4gICAgfVxuICAgIHJldHVybiBtO1xufTtcbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbk1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgbGVmdCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIHJpZ2h0ID0gbmV3IE1hcCgpO1xuICAgICAgICB2YXIgZW50cmllcyA9IGZhLmVudHJpZXMoKTtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHdoaWxlICghKGUgPSBlbnRyaWVzLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgICAgdmFyIF9hID0gZS52YWx1ZSwgayA9IF9hWzBdLCBhID0gX2FbMV07XG4gICAgICAgICAgICB2YXIgZWkgPSBmKGssIGEpO1xuICAgICAgICAgICAgaWYgKF8uaXNMZWZ0KGVpKSkge1xuICAgICAgICAgICAgICAgIGxlZnQuc2V0KGssIGVpLmxlZnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmlnaHQuc2V0KGssIGVpLnJpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbiAgICB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb25XaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgbGVmdCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIHJpZ2h0ID0gbmV3IE1hcCgpO1xuICAgICAgICB2YXIgZW50cmllcyA9IGZhLmVudHJpZXMoKTtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHdoaWxlICghKGUgPSBlbnRyaWVzLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgICAgdmFyIF9hID0gZS52YWx1ZSwgayA9IF9hWzBdLCBhID0gX2FbMV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlV2l0aEluZGV4KGssIGEpKSB7XG4gICAgICAgICAgICAgICAgcmlnaHQuc2V0KGssIGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGVmdC5zZXQoaywgYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0LCByaWdodCk7XG4gICAgfTtcbn1cbi8qKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlck1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgbSA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIGVudHJpZXMgPSBmYS5lbnRyaWVzKCk7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB3aGlsZSAoIShlID0gZW50cmllcy5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IGUudmFsdWUsIGsgPSBfYVswXSwgYSA9IF9hWzFdO1xuICAgICAgICAgICAgdmFyIG8gPSBmKGssIGEpO1xuICAgICAgICAgICAgaWYgKF8uaXNTb21lKG8pKSB7XG4gICAgICAgICAgICAgICAgbS5zZXQoaywgby52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG07XG4gICAgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyV2l0aEluZGV4KHApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgdmFyIG91dCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIGVudHJpZXMgPSBtLmVudHJpZXMoKTtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHdoaWxlICghKGUgPSBlbnRyaWVzLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgICAgdmFyIF9hID0gZS52YWx1ZSwgayA9IF9hWzBdLCBhID0gX2FbMV07XG4gICAgICAgICAgICBpZiAocChrLCBhKSkge1xuICAgICAgICAgICAgICAgIG91dC5zZXQoaywgYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxudmFyIF9tYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIF9tYXBXaXRoSW5kZXgoZmEsIGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbnZhciBfZmlsdGVyID0gZnVuY3Rpb24gKGZhLCBwKSB7XG4gICAgcmV0dXJuIF9maWx0ZXJXaXRoSW5kZXgoZmEsIGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBwKGEpOyB9KTtcbn07XG52YXIgX2ZpbHRlck1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gX2ZpbHRlck1hcFdpdGhJbmRleChmYSwgZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xudmFyIF9wYXJ0aXRpb24gPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBfcGFydGl0aW9uV2l0aEluZGV4KGZhLCBmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn07XG52YXIgX3BhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gX3BhcnRpdGlvbk1hcFdpdGhJbmRleChmYSwgZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xudmFyIF9maWx0ZXJXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIHApIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlcldpdGhJbmRleChwKSk7IH07XG52YXIgX2ZpbHRlck1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyTWFwV2l0aEluZGV4KGYpKTsgfTtcbnZhciBfcGFydGl0aW9uV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25XaXRoSW5kZXgocCkpOyB9O1xudmFyIF9wYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwV2l0aEluZGV4KGYpKTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbXBhY3QgPSBmdW5jdGlvbiAoZmEpIHtcbiAgICB2YXIgbSA9IG5ldyBNYXAoKTtcbiAgICB2YXIgZW50cmllcyA9IGZhLmVudHJpZXMoKTtcbiAgICB2YXIgZTtcbiAgICB3aGlsZSAoIShlID0gZW50cmllcy5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgdmFyIF9hID0gZS52YWx1ZSwgayA9IF9hWzBdLCBvYSA9IF9hWzFdO1xuICAgICAgICBpZiAoXy5pc1NvbWUob2EpKSB7XG4gICAgICAgICAgICBtLnNldChrLCBvYS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXIgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICByZXR1cm4gX2ZpbHRlcihmYSwgcHJlZGljYXRlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBfZmlsdGVyTWFwKGZhLCBmKTtcbn07IH07XG4vKipcbiAqIGBtYXBgIGNhbiBiZSB1c2VkIHRvIHR1cm4gZnVuY3Rpb25zIGAoYTogQSkgPT4gQmAgaW50byBmdW5jdGlvbnMgYChmYTogRjxBPikgPT4gRjxCPmAgd2hvc2UgYXJndW1lbnQgYW5kIHJldHVybiB0eXBlc1xuICogdXNlIHRoZSB0eXBlIGNvbnN0cnVjdG9yIGBGYCB0byByZXByZXNlbnQgc29tZSBjb21wdXRhdGlvbmFsIGNvbnRleHQuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIF9tYXAoZmEsIGYpOyB9OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuNy4xXG4gKi9cbmV4cG9ydCB2YXIgbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgIHJldHVybiBfbWFwV2l0aEluZGV4KGZhLCBmKTtcbn07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbiA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHJldHVybiBfcGFydGl0aW9uKGZhLCBwcmVkaWNhdGUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBfcGFydGl0aW9uTWFwKGZhLCBmKTsgfTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc2VwYXJhdGUgPSBmdW5jdGlvbiAoZmEpIHtcbiAgICB2YXIgbGVmdCA9IG5ldyBNYXAoKTtcbiAgICB2YXIgcmlnaHQgPSBuZXcgTWFwKCk7XG4gICAgdmFyIGVudHJpZXMgPSBmYS5lbnRyaWVzKCk7XG4gICAgdmFyIGU7XG4gICAgd2hpbGUgKCEoZSA9IGVudHJpZXMubmV4dCgpKS5kb25lKSB7XG4gICAgICAgIHZhciBfYSA9IGUudmFsdWUsIGsgPSBfYVswXSwgZWkgPSBfYVsxXTtcbiAgICAgICAgaWYgKF8uaXNMZWZ0KGVpKSkge1xuICAgICAgICAgICAgbGVmdC5zZXQoaywgZWkubGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByaWdodC5zZXQoaywgZWkucmlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ01hcCc7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChFLCBTKSB7XG4gICAgdmFyIHVuaW9uRVMgPSB1bmlvbihFLCBTKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiB1bmlvbkVTKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvbk1vbm9pZCA9IGZ1bmN0aW9uIChFLCBTKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZ2V0VW5pb25TZW1pZ3JvdXAoRSwgUykuY29uY2F0LFxuICAgIGVtcHR5OiBuZXcgTWFwKClcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwID0gZnVuY3Rpb24gKEUsIFMpIHtcbiAgICB2YXIgaW50ZXJzZWN0aW9uRVMgPSBpbnRlcnNlY3Rpb24oRSwgUyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gaW50ZXJzZWN0aW9uRVMoc2Vjb25kKShmaXJzdCk7IH1cbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldERpZmZlcmVuY2VNYWdtYSA9IGZ1bmN0aW9uIChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRpZmZlcmVuY2VFID0gZGlmZmVyZW5jZShFKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGRpZmZlcmVuY2VFKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsdGVyYWJsZVdpdGhJbmRleCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBVUkk6IFVSSSxcbiAgICAgICAgX0U6IHVuZGVmaW5lZCxcbiAgICAgICAgbWFwOiBfbWFwLFxuICAgICAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICAgICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgICAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICAgICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgICAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IF9wYXJ0aXRpb25NYXBXaXRoSW5kZXgsXG4gICAgICAgIHBhcnRpdGlvbldpdGhJbmRleDogX3BhcnRpdGlvbldpdGhJbmRleCxcbiAgICAgICAgZmlsdGVyTWFwV2l0aEluZGV4OiBfZmlsdGVyTWFwV2l0aEluZGV4LFxuICAgICAgICBmaWx0ZXJXaXRoSW5kZXg6IF9maWx0ZXJXaXRoSW5kZXhcbiAgICB9O1xufVxuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdpdGhlcmFibGUoTykge1xuICAgIHZhciBUV0kgPSBnZXRUcmF2ZXJzYWJsZVdpdGhJbmRleChPKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBVUkk6IFVSSSxcbiAgICAgICAgX0U6IHVuZGVmaW5lZCxcbiAgICAgICAgbWFwOiBfbWFwLFxuICAgICAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgICAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICAgICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgICAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICAgICAgcmVkdWNlOiBUV0kucmVkdWNlLFxuICAgICAgICBmb2xkTWFwOiBUV0kuZm9sZE1hcCxcbiAgICAgICAgcmVkdWNlUmlnaHQ6IFRXSS5yZWR1Y2VSaWdodCxcbiAgICAgICAgdHJhdmVyc2U6IFRXSS50cmF2ZXJzZSxcbiAgICAgICAgc2VxdWVuY2U6IFRXSS5zZXF1ZW5jZSxcbiAgICAgICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgICAgICByZWR1Y2VXaXRoSW5kZXg6IFRXSS5yZWR1Y2VXaXRoSW5kZXgsXG4gICAgICAgIGZvbGRNYXBXaXRoSW5kZXg6IFRXSS5mb2xkTWFwV2l0aEluZGV4LFxuICAgICAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogVFdJLnJlZHVjZVJpZ2h0V2l0aEluZGV4LFxuICAgICAgICB0cmF2ZXJzZVdpdGhJbmRleDogVFdJLnRyYXZlcnNlV2l0aEluZGV4LFxuICAgICAgICB3aWx0OiB3aWx0RGVmYXVsdChUV0ksIENvbXBhY3RhYmxlKSxcbiAgICAgICAgd2l0aGVyOiB3aXRoZXJEZWZhdWx0KFRXSSwgQ29tcGFjdGFibGUpXG4gICAgfTtcbn1cbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2UgPSBSTS5yZWR1Y2U7XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZm9sZE1hcCA9IFJNLmZvbGRNYXA7XG4vKipcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgcmVkdWNlUmlnaHQgPSBSTS5yZWR1Y2VSaWdodDtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRGb2xkYWJsZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBSTS5nZXRGb2xkYWJsZShPKSksIHsgVVJJOiBVUkkgfSk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHJlZHVjZVdpdGhJbmRleCA9IFJNLnJlZHVjZVdpdGhJbmRleDtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBmb2xkTWFwV2l0aEluZGV4ID0gUk0uZm9sZE1hcFdpdGhJbmRleDtcbi8qKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciByZWR1Y2VSaWdodFdpdGhJbmRleCA9IFJNLnJlZHVjZVJpZ2h0V2l0aEluZGV4O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGdldEZvbGRhYmxlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIFJNLmdldEZvbGRhYmxlV2l0aEluZGV4KE8pKSwgeyBVUkk6IFVSSSB9KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VHJhdmVyc2FibGVXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciBGV0kgPSBnZXRGb2xkYWJsZVdpdGhJbmRleChPKTtcbiAgICB2YXIga2V5c08gPSBrZXlzKE8pO1xuICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHtcbiAgICAgICAgICAgIHZhciBmbSA9IEYub2YobmV3IE1hcCgpKTtcbiAgICAgICAgICAgIHZhciBrcyA9IGtleXNPKHRhKTtcbiAgICAgICAgICAgIHZhciBsZW4gPSBrcy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBhID0gdGEuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgZm0gPSBGLmFwKEYubWFwKGZtLCBmdW5jdGlvbiAobSkgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIG0uc2V0KGtleSwgYik7IH07IH0pLCBmKGtleSwgYSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBfbG9vcF8xKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZtO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgdmFyIHRyYXZlcnNlID0gZnVuY3Rpb24gKEYpIHtcbiAgICAgICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4RiA9IHRyYXZlcnNlV2l0aEluZGV4KEYpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleEYodGEsIGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbiAgICB9O1xuICAgIHZhciBzZXF1ZW5jZSA9IGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleEYgPSB0cmF2ZXJzZVdpdGhJbmRleChGKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkgeyByZXR1cm4gdHJhdmVyc2VXaXRoSW5kZXhGKHRhLCBmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gYTsgfSk7IH07XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBVUkk6IFVSSSxcbiAgICAgICAgX0U6IHVuZGVmaW5lZCxcbiAgICAgICAgbWFwOiBfbWFwLFxuICAgICAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgICAgIHJlZHVjZTogRldJLnJlZHVjZSxcbiAgICAgICAgZm9sZE1hcDogRldJLmZvbGRNYXAsXG4gICAgICAgIHJlZHVjZVJpZ2h0OiBGV0kucmVkdWNlUmlnaHQsXG4gICAgICAgIHJlZHVjZVdpdGhJbmRleDogRldJLnJlZHVjZVdpdGhJbmRleCxcbiAgICAgICAgZm9sZE1hcFdpdGhJbmRleDogRldJLmZvbGRNYXBXaXRoSW5kZXgsXG4gICAgICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBGV0kucmVkdWNlUmlnaHRXaXRoSW5kZXgsXG4gICAgICAgIHRyYXZlcnNlOiB0cmF2ZXJzZSxcbiAgICAgICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgICAgICB0cmF2ZXJzZVdpdGhJbmRleDogdHJhdmVyc2VXaXRoSW5kZXhcbiAgICB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhcCA9IC8qI19fUFVSRV9fKi8gZmxhcF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIENvbXBhY3RhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGaWx0ZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXBcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxudmFyIGNvcHkgPSBmdW5jdGlvbiAobSkgeyByZXR1cm4gbmV3IE1hcChtKTsgfTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaW9uID0gZnVuY3Rpb24gKEUsIE0pIHtcbiAgICB2YXIgdW5pb25FTSA9IFJNLnVuaW9uKEUsIE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7IHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gY29weShzZWNvbmQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0VtcHR5KHNlY29uZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3B5KGZpcnN0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5pb25FTShzZWNvbmQpKGZpcnN0KTtcbiAgICB9OyB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGludGVyc2VjdGlvbiA9IGZ1bmN0aW9uIChFLCBNKSB7XG4gICAgdmFyIGludGVyc2VjdGlvbkVNID0gUk0uaW50ZXJzZWN0aW9uKEUsIE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7IHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpIHx8IGlzRW1wdHkoc2Vjb25kKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXAoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW50ZXJzZWN0aW9uRU0oc2Vjb25kKShmaXJzdCk7XG4gICAgfTsgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBkaWZmZXJlbmNlID0gZnVuY3Rpb24gKEUpIHtcbiAgICB2YXIgZGlmZmVyZW5jZUUgPSBSTS5kaWZmZXJlbmNlKEUpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgICAgIGlmIChpc0VtcHR5KGZpcnN0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb3B5KHNlY29uZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvcHkoZmlyc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRpZmZlcmVuY2VFKHNlY29uZCkoZmlyc3QpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgYSBgbmV3IE1hcCgpYCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZW1wdHkgPSBuZXcgTWFwKCk7XG4vKipcbiAqIFVzZSBbYHVwc2VydEF0YF0oI3Vwc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSB1cHNlcnRBdDtcbi8qKlxuICogVXNlIFtgRmlsdGVyYWJsZWBdKCNmaWx0ZXJhYmxlKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbWFwXyA9IEZpbHRlcmFibGU7XG4iLAogICJpbXBvcnQgeyBnZXRNb25vaWQgYXMgZ2V0RU0gfSBmcm9tICcuL0VuZG9tb3JwaGlzbSc7XG5pbXBvcnQgeyBnZXRNb25vaWQgYXMgZ2V0Rk0gfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnLi9pbnRlcm5hbCc7XG5pbXBvcnQgKiBhcyBTZSBmcm9tICcuL1NlbWlncm91cCc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2V0IGEgbW9ub2lkIHdoZXJlIGBjb25jYXRgIHdpbGwgcmV0dXJuIHRoZSBtaW5pbXVtLCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYm91bmRlZCBvcmRlci5cbiAqXG4gKiBUaGUgYGVtcHR5YCB2YWx1ZSBpcyB0aGUgYHRvcGAgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0ICogYXMgTSBmcm9tICdmcC10cy9Nb25vaWQnXG4gKlxuICogY29uc3QgTTEgPSBNLm1pbihOLkJvdW5kZWQpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoMSwgMiksIDEpXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChCKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogU2UubWluKEIpLmNvbmNhdCxcbiAgICBlbXB0eTogQi50b3Bcbn0pOyB9O1xuLyoqXG4gKiBHZXQgYSBtb25vaWQgd2hlcmUgYGNvbmNhdGAgd2lsbCByZXR1cm4gdGhlIG1heGltdW0sIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBib3VuZGVkIG9yZGVyLlxuICpcbiAqIFRoZSBgZW1wdHlgIHZhbHVlIGlzIHRoZSBgYm90dG9tYCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgKiBhcyBNIGZyb20gJ2ZwLXRzL01vbm9pZCdcbiAqXG4gKiBjb25zdCBNMSA9IE0ubWF4KE4uQm91bmRlZClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdCgxLCAyKSwgMilcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF4ID0gZnVuY3Rpb24gKEIpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBTZS5tYXgoQikuY29uY2F0LFxuICAgIGVtcHR5OiBCLmJvdHRvbVxufSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBUaGUgZHVhbCBvZiBhIGBNb25vaWRgLCBvYnRhaW5lZCBieSBzd2FwcGluZyB0aGUgYXJndW1lbnRzIG9mIGBjb25jYXRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXZlcnNlIH0gZnJvbSAnZnAtdHMvTW9ub2lkJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXZlcnNlKFMuTW9ub2lkKS5jb25jYXQoJ2EnLCAnYicpLCAnYmEnKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciByZXZlcnNlID0gZnVuY3Rpb24gKE0pIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBTZS5yZXZlcnNlKE0pLmNvbmNhdCxcbiAgICBlbXB0eTogTS5lbXB0eVxufSk7IH07XG4vKipcbiAqIEdpdmVuIGEgc3RydWN0IG9mIG1vbm9pZHMgcmV0dXJucyBhIG1vbm9pZCBmb3IgdGhlIHN0cnVjdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc3RydWN0IH0gZnJvbSAnZnAtdHMvTW9ub2lkJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogaW50ZXJmYWNlIFBvaW50IHtcbiAqICAgcmVhZG9ubHkgeDogbnVtYmVyXG4gKiAgIHJlYWRvbmx5IHk6IG51bWJlclxuICogfVxuICpcbiAqIGNvbnN0IE0gPSBzdHJ1Y3Q8UG9pbnQ+KHtcbiAqICAgeDogTi5Nb25vaWRTdW0sXG4gKiAgIHk6IE4uTW9ub2lkU3VtXG4gKiB9KVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoeyB4OiAxLCB5OiAyIH0sIHsgeDogMywgeTogNCB9KSwgeyB4OiA0LCB5OiA2IH0pXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHN0cnVjdCA9IGZ1bmN0aW9uIChtb25vaWRzKSB7XG4gICAgdmFyIGVtcHR5ID0ge307XG4gICAgZm9yICh2YXIgayBpbiBtb25vaWRzKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKG1vbm9pZHMsIGspKSB7XG4gICAgICAgICAgICBlbXB0eVtrXSA9IG1vbm9pZHNba10uZW1wdHk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBTZS5zdHJ1Y3QobW9ub2lkcykuY29uY2F0LFxuICAgICAgICBlbXB0eTogZW1wdHlcbiAgICB9O1xufTtcbi8qKlxuICogR2l2ZW4gYSB0dXBsZSBvZiBtb25vaWRzIHJldHVybnMgYSBtb25vaWQgZm9yIHRoZSB0dXBsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdHVwbGUgfSBmcm9tICdmcC10cy9Nb25vaWQnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIGNvbnN0IE0xID0gdHVwbGUoUy5Nb25vaWQsIE4uTW9ub2lkU3VtKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoWydhJywgMV0sIFsnYicsIDJdKSwgWydhYicsIDNdKVxuICpcbiAqIGNvbnN0IE0yID0gdHVwbGUoUy5Nb25vaWQsIE4uTW9ub2lkU3VtLCBCLk1vbm9pZEFsbClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KFsnYScsIDEsIHRydWVdLCBbJ2InLCAyLCBmYWxzZV0pLCBbJ2FiJywgMywgZmFsc2VdKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB0dXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbW9ub2lkcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG1vbm9pZHNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogU2UudHVwbGUuYXBwbHkoU2UsIG1vbm9pZHMpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IG1vbm9pZHMubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLmVtcHR5OyB9KVxuICAgIH0pO1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEdpdmVuIGEgc2VxdWVuY2Ugb2YgYGFzYCwgY29uY2F0IHRoZW0gYW5kIHJldHVybiB0aGUgdG90YWwuXG4gKlxuICogSWYgYGFzYCBpcyBlbXB0eSwgcmV0dXJuIHRoZSBtb25vaWQgYGVtcHR5YCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29uY2F0QWxsIH0gZnJvbSAnZnAtdHMvTW9ub2lkJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb25jYXRBbGwoTi5Nb25vaWRTdW0pKFsxLCAyLCAzXSksIDYpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbmNhdEFsbChOLk1vbm9pZFN1bSkoW10pLCAwKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoTSkgeyByZXR1cm4gU2UuY29uY2F0QWxsKE0pKE0uZW1wdHkpOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgW2BNb25vaWRgXSguL3ZvaWQudHMuaHRtbCNtb25vaWQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBtb25vaWRWb2lkID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwVm9pZC5jb25jYXQsXG4gICAgZW1wdHk6IHVuZGVmaW5lZFxufTtcbi8qKlxuICogVXNlIFtgdHVwbGVgXSgjdHVwbGUpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRUdXBsZU1vbm9pZCA9IHR1cGxlO1xuLyoqXG4gKiBVc2UgW2BzdHJ1Y3RgXSgjc3RydWN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U3RydWN0TW9ub2lkID0gc3RydWN0O1xuLyoqXG4gKiBVc2UgW2ByZXZlcnNlYF0oI3JldmVyc2UpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXREdWFsTW9ub2lkID0gcmV2ZXJzZTtcbi8qKlxuICogVXNlIFtgbWF4YF0oI21heCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEpvaW5Nb25vaWQgPSBtYXg7XG4vKipcbiAqIFVzZSBbYG1pbmBdKCNtaW4pIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRNZWV0TW9ub2lkID0gbWluO1xuLyoqXG4gKiBVc2UgW2Bjb25jYXRBbGxgXSgjY29uY2F0YWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZm9sZCA9IGNvbmNhdEFsbDtcbi8qKlxuICogVXNlIFtgTW9ub2lkQWxsYF0oLi9ib29sZWFuLnRzLmh0bWwjbW9ub2lkYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbW9ub2lkQWxsID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwQWxsLmNvbmNhdCxcbiAgICBlbXB0eTogdHJ1ZVxufTtcbi8qKlxuICogVXNlIFtgTW9ub2lkQW55YF0oLi9ib29sZWFuLnRzLmh0bWwjbW9ub2lkYW55KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbW9ub2lkQW55ID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwQW55LmNvbmNhdCxcbiAgICBlbXB0eTogZmFsc2Vcbn07XG4vKipcbiAqIFVzZSBbYGdldE1vbm9pZGBdKC4vZnVuY3Rpb24udHMuaHRtbCNnZXRtb25vaWQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRGdW5jdGlvbk1vbm9pZCA9IGdldEZNO1xuLyoqXG4gKiBVc2UgW2BnZXRFbmRvbW9ycGhpc21Nb25vaWRgXSguL2Z1bmN0aW9uLnRzLmh0bWwjZ2V0ZW5kb21vcnBoaXNtbW9ub2lkKSBpbnN0ZWFkLlxuICpcbiAqICoqTm90ZSoqLiBUaGUgZXhlY3V0aW9uIG9yZGVyIGluIFtgZ2V0RW5kb21vcnBoaXNtTW9ub2lkYF0oLi9mdW5jdGlvbi50cy5odG1sI2dldGVuZG9tb3JwaGlzbW1vbm9pZCkgaXMgcmV2ZXJzZWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRFbmRvbW9ycGhpc21Nb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByZXZlcnNlKGdldEVNKCkpOyB9O1xuLyoqXG4gKiBVc2UgW2BNb25vaWRgXSguL3N0cmluZy50cy5odG1sI21vbm9pZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG1vbm9pZFN0cmluZyA9IHtcbiAgICBjb25jYXQ6IFNlLnNlbWlncm91cFN0cmluZy5jb25jYXQsXG4gICAgZW1wdHk6ICcnXG59O1xuLyoqXG4gKiBVc2UgW2BNb25vaWRTdW1gXSguL251bWJlci50cy5odG1sI21vbm9pZHN1bSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG1vbm9pZFN1bSA9IHtcbiAgICBjb25jYXQ6IFNlLnNlbWlncm91cFN1bS5jb25jYXQsXG4gICAgZW1wdHk6IDBcbn07XG4vKipcbiAqIFVzZSBbYE1vbm9pZFByb2R1Y3RgXSguL251bWJlci50cy5odG1sI21vbm9pZHByb2R1Y3QpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBtb25vaWRQcm9kdWN0ID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwUHJvZHVjdC5jb25jYXQsXG4gICAgZW1wdHk6IDFcbn07XG4iLAogICJpbXBvcnQgeyBnZXRNb25vaWQgYXMgZ2V0RU0gfSBmcm9tICcuL0VuZG9tb3JwaGlzbSc7XG5pbXBvcnQgeyBnZXRNb25vaWQgYXMgZ2V0Rk0gfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnLi9pbnRlcm5hbCc7XG5pbXBvcnQgKiBhcyBTZSBmcm9tICcuL1NlbWlncm91cCc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2V0IGEgbW9ub2lkIHdoZXJlIGBjb25jYXRgIHdpbGwgcmV0dXJuIHRoZSBtaW5pbXVtLCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYm91bmRlZCBvcmRlci5cbiAqXG4gKiBUaGUgYGVtcHR5YCB2YWx1ZSBpcyB0aGUgYHRvcGAgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0ICogYXMgTSBmcm9tICdmcC10cy9Nb25vaWQnXG4gKlxuICogY29uc3QgTTEgPSBNLm1pbihOLkJvdW5kZWQpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoMSwgMiksIDEpXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChCKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogU2UubWluKEIpLmNvbmNhdCxcbiAgICBlbXB0eTogQi50b3Bcbn0pOyB9O1xuLyoqXG4gKiBHZXQgYSBtb25vaWQgd2hlcmUgYGNvbmNhdGAgd2lsbCByZXR1cm4gdGhlIG1heGltdW0sIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBib3VuZGVkIG9yZGVyLlxuICpcbiAqIFRoZSBgZW1wdHlgIHZhbHVlIGlzIHRoZSBgYm90dG9tYCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgKiBhcyBNIGZyb20gJ2ZwLXRzL01vbm9pZCdcbiAqXG4gKiBjb25zdCBNMSA9IE0ubWF4KE4uQm91bmRlZClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdCgxLCAyKSwgMilcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF4ID0gZnVuY3Rpb24gKEIpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBTZS5tYXgoQikuY29uY2F0LFxuICAgIGVtcHR5OiBCLmJvdHRvbVxufSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBUaGUgZHVhbCBvZiBhIGBNb25vaWRgLCBvYnRhaW5lZCBieSBzd2FwcGluZyB0aGUgYXJndW1lbnRzIG9mIGBjb25jYXRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXZlcnNlIH0gZnJvbSAnZnAtdHMvTW9ub2lkJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXZlcnNlKFMuTW9ub2lkKS5jb25jYXQoJ2EnLCAnYicpLCAnYmEnKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciByZXZlcnNlID0gZnVuY3Rpb24gKE0pIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBTZS5yZXZlcnNlKE0pLmNvbmNhdCxcbiAgICBlbXB0eTogTS5lbXB0eVxufSk7IH07XG4vKipcbiAqIEdpdmVuIGEgc3RydWN0IG9mIG1vbm9pZHMgcmV0dXJucyBhIG1vbm9pZCBmb3IgdGhlIHN0cnVjdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc3RydWN0IH0gZnJvbSAnZnAtdHMvTW9ub2lkJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogaW50ZXJmYWNlIFBvaW50IHtcbiAqICAgcmVhZG9ubHkgeDogbnVtYmVyXG4gKiAgIHJlYWRvbmx5IHk6IG51bWJlclxuICogfVxuICpcbiAqIGNvbnN0IE0gPSBzdHJ1Y3Q8UG9pbnQ+KHtcbiAqICAgeDogTi5Nb25vaWRTdW0sXG4gKiAgIHk6IE4uTW9ub2lkU3VtXG4gKiB9KVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoeyB4OiAxLCB5OiAyIH0sIHsgeDogMywgeTogNCB9KSwgeyB4OiA0LCB5OiA2IH0pXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHN0cnVjdCA9IGZ1bmN0aW9uIChtb25vaWRzKSB7XG4gICAgdmFyIGVtcHR5ID0ge307XG4gICAgZm9yICh2YXIgayBpbiBtb25vaWRzKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKG1vbm9pZHMsIGspKSB7XG4gICAgICAgICAgICBlbXB0eVtrXSA9IG1vbm9pZHNba10uZW1wdHk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBTZS5zdHJ1Y3QobW9ub2lkcykuY29uY2F0LFxuICAgICAgICBlbXB0eTogZW1wdHlcbiAgICB9O1xufTtcbi8qKlxuICogR2l2ZW4gYSB0dXBsZSBvZiBtb25vaWRzIHJldHVybnMgYSBtb25vaWQgZm9yIHRoZSB0dXBsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdHVwbGUgfSBmcm9tICdmcC10cy9Nb25vaWQnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIGNvbnN0IE0xID0gdHVwbGUoUy5Nb25vaWQsIE4uTW9ub2lkU3VtKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoWydhJywgMV0sIFsnYicsIDJdKSwgWydhYicsIDNdKVxuICpcbiAqIGNvbnN0IE0yID0gdHVwbGUoUy5Nb25vaWQsIE4uTW9ub2lkU3VtLCBCLk1vbm9pZEFsbClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KFsnYScsIDEsIHRydWVdLCBbJ2InLCAyLCBmYWxzZV0pLCBbJ2FiJywgMywgZmFsc2VdKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB0dXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbW9ub2lkcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG1vbm9pZHNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogU2UudHVwbGUuYXBwbHkoU2UsIG1vbm9pZHMpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IG1vbm9pZHMubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLmVtcHR5OyB9KVxuICAgIH0pO1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEdpdmVuIGEgc2VxdWVuY2Ugb2YgYGFzYCwgY29uY2F0IHRoZW0gYW5kIHJldHVybiB0aGUgdG90YWwuXG4gKlxuICogSWYgYGFzYCBpcyBlbXB0eSwgcmV0dXJuIHRoZSBtb25vaWQgYGVtcHR5YCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29uY2F0QWxsIH0gZnJvbSAnZnAtdHMvTW9ub2lkJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb25jYXRBbGwoTi5Nb25vaWRTdW0pKFsxLCAyLCAzXSksIDYpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbmNhdEFsbChOLk1vbm9pZFN1bSkoW10pLCAwKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoTSkgeyByZXR1cm4gU2UuY29uY2F0QWxsKE0pKE0uZW1wdHkpOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgW2BNb25vaWRgXSguL3ZvaWQudHMuaHRtbCNtb25vaWQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBtb25vaWRWb2lkID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwVm9pZC5jb25jYXQsXG4gICAgZW1wdHk6IHVuZGVmaW5lZFxufTtcbi8qKlxuICogVXNlIFtgdHVwbGVgXSgjdHVwbGUpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRUdXBsZU1vbm9pZCA9IHR1cGxlO1xuLyoqXG4gKiBVc2UgW2BzdHJ1Y3RgXSgjc3RydWN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U3RydWN0TW9ub2lkID0gc3RydWN0O1xuLyoqXG4gKiBVc2UgW2ByZXZlcnNlYF0oI3JldmVyc2UpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXREdWFsTW9ub2lkID0gcmV2ZXJzZTtcbi8qKlxuICogVXNlIFtgbWF4YF0oI21heCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEpvaW5Nb25vaWQgPSBtYXg7XG4vKipcbiAqIFVzZSBbYG1pbmBdKCNtaW4pIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRNZWV0TW9ub2lkID0gbWluO1xuLyoqXG4gKiBVc2UgW2Bjb25jYXRBbGxgXSgjY29uY2F0YWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZm9sZCA9IGNvbmNhdEFsbDtcbi8qKlxuICogVXNlIFtgTW9ub2lkQWxsYF0oLi9ib29sZWFuLnRzLmh0bWwjbW9ub2lkYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbW9ub2lkQWxsID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwQWxsLmNvbmNhdCxcbiAgICBlbXB0eTogdHJ1ZVxufTtcbi8qKlxuICogVXNlIFtgTW9ub2lkQW55YF0oLi9ib29sZWFuLnRzLmh0bWwjbW9ub2lkYW55KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbW9ub2lkQW55ID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwQW55LmNvbmNhdCxcbiAgICBlbXB0eTogZmFsc2Vcbn07XG4vKipcbiAqIFVzZSBbYGdldE1vbm9pZGBdKC4vZnVuY3Rpb24udHMuaHRtbCNnZXRtb25vaWQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRGdW5jdGlvbk1vbm9pZCA9IGdldEZNO1xuLyoqXG4gKiBVc2UgW2BnZXRFbmRvbW9ycGhpc21Nb25vaWRgXSguL2Z1bmN0aW9uLnRzLmh0bWwjZ2V0ZW5kb21vcnBoaXNtbW9ub2lkKSBpbnN0ZWFkLlxuICpcbiAqICoqTm90ZSoqLiBUaGUgZXhlY3V0aW9uIG9yZGVyIGluIFtgZ2V0RW5kb21vcnBoaXNtTW9ub2lkYF0oLi9mdW5jdGlvbi50cy5odG1sI2dldGVuZG9tb3JwaGlzbW1vbm9pZCkgaXMgcmV2ZXJzZWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRFbmRvbW9ycGhpc21Nb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByZXZlcnNlKGdldEVNKCkpOyB9O1xuLyoqXG4gKiBVc2UgW2BNb25vaWRgXSguL3N0cmluZy50cy5odG1sI21vbm9pZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG1vbm9pZFN0cmluZyA9IHtcbiAgICBjb25jYXQ6IFNlLnNlbWlncm91cFN0cmluZy5jb25jYXQsXG4gICAgZW1wdHk6ICcnXG59O1xuLyoqXG4gKiBVc2UgW2BNb25vaWRTdW1gXSguL251bWJlci50cy5odG1sI21vbm9pZHN1bSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG1vbm9pZFN1bSA9IHtcbiAgICBjb25jYXQ6IFNlLnNlbWlncm91cFN1bS5jb25jYXQsXG4gICAgZW1wdHk6IDBcbn07XG4vKipcbiAqIFVzZSBbYE1vbm9pZFByb2R1Y3RgXSguL251bWJlci50cy5odG1sI21vbm9pZHByb2R1Y3QpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBtb25vaWRQcm9kdWN0ID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwUHJvZHVjdC5jb25jYXQsXG4gICAgZW1wdHk6IDFcbn07XG4iLAogICJpbXBvcnQgeyBnZXRNb25vaWQgYXMgZ2V0RU0gfSBmcm9tICcuL0VuZG9tb3JwaGlzbSc7XG5pbXBvcnQgeyBnZXRNb25vaWQgYXMgZ2V0Rk0gfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnLi9pbnRlcm5hbCc7XG5pbXBvcnQgKiBhcyBTZSBmcm9tICcuL1NlbWlncm91cCc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb25zdHJ1Y3RvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogR2V0IGEgbW9ub2lkIHdoZXJlIGBjb25jYXRgIHdpbGwgcmV0dXJuIHRoZSBtaW5pbXVtLCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYm91bmRlZCBvcmRlci5cbiAqXG4gKiBUaGUgYGVtcHR5YCB2YWx1ZSBpcyB0aGUgYHRvcGAgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIE4gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0ICogYXMgTSBmcm9tICdmcC10cy9Nb25vaWQnXG4gKlxuICogY29uc3QgTTEgPSBNLm1pbihOLkJvdW5kZWQpXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoMSwgMiksIDEpXG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIG1pbiA9IGZ1bmN0aW9uIChCKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogU2UubWluKEIpLmNvbmNhdCxcbiAgICBlbXB0eTogQi50b3Bcbn0pOyB9O1xuLyoqXG4gKiBHZXQgYSBtb25vaWQgd2hlcmUgYGNvbmNhdGAgd2lsbCByZXR1cm4gdGhlIG1heGltdW0sIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBib3VuZGVkIG9yZGVyLlxuICpcbiAqIFRoZSBgZW1wdHlgIHZhbHVlIGlzIHRoZSBgYm90dG9tYCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgKiBhcyBNIGZyb20gJ2ZwLXRzL01vbm9pZCdcbiAqXG4gKiBjb25zdCBNMSA9IE0ubWF4KE4uQm91bmRlZClcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0xLmNvbmNhdCgxLCAyKSwgMilcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWF4ID0gZnVuY3Rpb24gKEIpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBTZS5tYXgoQikuY29uY2F0LFxuICAgIGVtcHR5OiBCLmJvdHRvbVxufSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjb21iaW5hdG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBUaGUgZHVhbCBvZiBhIGBNb25vaWRgLCBvYnRhaW5lZCBieSBzd2FwcGluZyB0aGUgYXJndW1lbnRzIG9mIGBjb25jYXRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyByZXZlcnNlIH0gZnJvbSAnZnAtdHMvTW9ub2lkJ1xuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChyZXZlcnNlKFMuTW9ub2lkKS5jb25jYXQoJ2EnLCAnYicpLCAnYmEnKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciByZXZlcnNlID0gZnVuY3Rpb24gKE0pIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBTZS5yZXZlcnNlKE0pLmNvbmNhdCxcbiAgICBlbXB0eTogTS5lbXB0eVxufSk7IH07XG4vKipcbiAqIEdpdmVuIGEgc3RydWN0IG9mIG1vbm9pZHMgcmV0dXJucyBhIG1vbm9pZCBmb3IgdGhlIHN0cnVjdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc3RydWN0IH0gZnJvbSAnZnAtdHMvTW9ub2lkJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogaW50ZXJmYWNlIFBvaW50IHtcbiAqICAgcmVhZG9ubHkgeDogbnVtYmVyXG4gKiAgIHJlYWRvbmx5IHk6IG51bWJlclxuICogfVxuICpcbiAqIGNvbnN0IE0gPSBzdHJ1Y3Q8UG9pbnQ+KHtcbiAqICAgeDogTi5Nb25vaWRTdW0sXG4gKiAgIHk6IE4uTW9ub2lkU3VtXG4gKiB9KVxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoeyB4OiAxLCB5OiAyIH0sIHsgeDogMywgeTogNCB9KSwgeyB4OiA0LCB5OiA2IH0pXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHN0cnVjdCA9IGZ1bmN0aW9uIChtb25vaWRzKSB7XG4gICAgdmFyIGVtcHR5ID0ge307XG4gICAgZm9yICh2YXIgayBpbiBtb25vaWRzKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKG1vbm9pZHMsIGspKSB7XG4gICAgICAgICAgICBlbXB0eVtrXSA9IG1vbm9pZHNba10uZW1wdHk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBTZS5zdHJ1Y3QobW9ub2lkcykuY29uY2F0LFxuICAgICAgICBlbXB0eTogZW1wdHlcbiAgICB9O1xufTtcbi8qKlxuICogR2l2ZW4gYSB0dXBsZSBvZiBtb25vaWRzIHJldHVybnMgYSBtb25vaWQgZm9yIHRoZSB0dXBsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdHVwbGUgfSBmcm9tICdmcC10cy9Nb25vaWQnXG4gKiBpbXBvcnQgKiBhcyBCIGZyb20gJ2ZwLXRzL2Jvb2xlYW4nXG4gKiBpbXBvcnQgKiBhcyBOIGZyb20gJ2ZwLXRzL251bWJlcidcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIGNvbnN0IE0xID0gdHVwbGUoUy5Nb25vaWQsIE4uTW9ub2lkU3VtKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNMS5jb25jYXQoWydhJywgMV0sIFsnYicsIDJdKSwgWydhYicsIDNdKVxuICpcbiAqIGNvbnN0IE0yID0gdHVwbGUoUy5Nb25vaWQsIE4uTW9ub2lkU3VtLCBCLk1vbm9pZEFsbClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTTIuY29uY2F0KFsnYScsIDEsIHRydWVdLCBbJ2InLCAyLCBmYWxzZV0pLCBbJ2FiJywgMywgZmFsc2VdKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB0dXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbW9ub2lkcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG1vbm9pZHNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuICh7XG4gICAgICAgIGNvbmNhdDogU2UudHVwbGUuYXBwbHkoU2UsIG1vbm9pZHMpLmNvbmNhdCxcbiAgICAgICAgZW1wdHk6IG1vbm9pZHMubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLmVtcHR5OyB9KVxuICAgIH0pO1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEdpdmVuIGEgc2VxdWVuY2Ugb2YgYGFzYCwgY29uY2F0IHRoZW0gYW5kIHJldHVybiB0aGUgdG90YWwuXG4gKlxuICogSWYgYGFzYCBpcyBlbXB0eSwgcmV0dXJuIHRoZSBtb25vaWQgYGVtcHR5YCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29uY2F0QWxsIH0gZnJvbSAnZnAtdHMvTW9ub2lkJ1xuICogaW1wb3J0ICogYXMgTiBmcm9tICdmcC10cy9udW1iZXInXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb25jYXRBbGwoTi5Nb25vaWRTdW0pKFsxLCAyLCAzXSksIDYpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbmNhdEFsbChOLk1vbm9pZFN1bSkoW10pLCAwKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjb25jYXRBbGwgPSBmdW5jdGlvbiAoTSkgeyByZXR1cm4gU2UuY29uY2F0QWxsKE0pKE0uZW1wdHkpOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgW2BNb25vaWRgXSguL3ZvaWQudHMuaHRtbCNtb25vaWQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBtb25vaWRWb2lkID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwVm9pZC5jb25jYXQsXG4gICAgZW1wdHk6IHVuZGVmaW5lZFxufTtcbi8qKlxuICogVXNlIFtgdHVwbGVgXSgjdHVwbGUpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRUdXBsZU1vbm9pZCA9IHR1cGxlO1xuLyoqXG4gKiBVc2UgW2BzdHJ1Y3RgXSgjc3RydWN0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U3RydWN0TW9ub2lkID0gc3RydWN0O1xuLyoqXG4gKiBVc2UgW2ByZXZlcnNlYF0oI3JldmVyc2UpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXREdWFsTW9ub2lkID0gcmV2ZXJzZTtcbi8qKlxuICogVXNlIFtgbWF4YF0oI21heCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldEpvaW5Nb25vaWQgPSBtYXg7XG4vKipcbiAqIFVzZSBbYG1pbmBdKCNtaW4pIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRNZWV0TW9ub2lkID0gbWluO1xuLyoqXG4gKiBVc2UgW2Bjb25jYXRBbGxgXSgjY29uY2F0YWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZm9sZCA9IGNvbmNhdEFsbDtcbi8qKlxuICogVXNlIFtgTW9ub2lkQWxsYF0oLi9ib29sZWFuLnRzLmh0bWwjbW9ub2lkYWxsKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbW9ub2lkQWxsID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwQWxsLmNvbmNhdCxcbiAgICBlbXB0eTogdHJ1ZVxufTtcbi8qKlxuICogVXNlIFtgTW9ub2lkQW55YF0oLi9ib29sZWFuLnRzLmh0bWwjbW9ub2lkYW55KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbW9ub2lkQW55ID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwQW55LmNvbmNhdCxcbiAgICBlbXB0eTogZmFsc2Vcbn07XG4vKipcbiAqIFVzZSBbYGdldE1vbm9pZGBdKC4vZnVuY3Rpb24udHMuaHRtbCNnZXRtb25vaWQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRGdW5jdGlvbk1vbm9pZCA9IGdldEZNO1xuLyoqXG4gKiBVc2UgW2BnZXRFbmRvbW9ycGhpc21Nb25vaWRgXSguL2Z1bmN0aW9uLnRzLmh0bWwjZ2V0ZW5kb21vcnBoaXNtbW9ub2lkKSBpbnN0ZWFkLlxuICpcbiAqICoqTm90ZSoqLiBUaGUgZXhlY3V0aW9uIG9yZGVyIGluIFtgZ2V0RW5kb21vcnBoaXNtTW9ub2lkYF0oLi9mdW5jdGlvbi50cy5odG1sI2dldGVuZG9tb3JwaGlzbW1vbm9pZCkgaXMgcmV2ZXJzZWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRFbmRvbW9ycGhpc21Nb25vaWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByZXZlcnNlKGdldEVNKCkpOyB9O1xuLyoqXG4gKiBVc2UgW2BNb25vaWRgXSguL3N0cmluZy50cy5odG1sI21vbm9pZCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG1vbm9pZFN0cmluZyA9IHtcbiAgICBjb25jYXQ6IFNlLnNlbWlncm91cFN0cmluZy5jb25jYXQsXG4gICAgZW1wdHk6ICcnXG59O1xuLyoqXG4gKiBVc2UgW2BNb25vaWRTdW1gXSguL251bWJlci50cy5odG1sI21vbm9pZHN1bSkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIG1vbm9pZFN1bSA9IHtcbiAgICBjb25jYXQ6IFNlLnNlbWlncm91cFN1bS5jb25jYXQsXG4gICAgZW1wdHk6IDBcbn07XG4vKipcbiAqIFVzZSBbYE1vbm9pZFByb2R1Y3RgXSguL251bWJlci50cy5odG1sI21vbm9pZHByb2R1Y3QpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBtb25vaWRQcm9kdWN0ID0ge1xuICAgIGNvbmNhdDogU2Uuc2VtaWdyb3VwUHJvZHVjdC5jb25jYXQsXG4gICAgZW1wdHk6IDFcbn07XG4iLAogICIvKipcbiAqIGBgYHRzXG4gKiBpbnRlcmZhY2UgVGFzazxBPiB7XG4gKiAgICgpOiBQcm9taXNlPEE+XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBgVGFzazxBPmAgcmVwcmVzZW50cyBhbiBhc3luY2hyb25vdXMgY29tcHV0YXRpb24gdGhhdCB5aWVsZHMgYSB2YWx1ZSBvZiB0eXBlIGBBYCBhbmQgKipuZXZlciBmYWlscyoqLlxuICogSWYgeW91IHdhbnQgdG8gcmVwcmVzZW50IGFuIGFzeW5jaHJvbm91cyBjb21wdXRhdGlvbiB0aGF0IG1heSBmYWlsLCBwbGVhc2Ugc2VlIGBUYXNrRWl0aGVyYC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuaW1wb3J0IHsgZ2V0QXBwbGljYXRpdmVNb25vaWQgfSBmcm9tICcuL0FwcGxpY2F0aXZlJztcbmltcG9ydCB7IGFwRmlyc3QgYXMgYXBGaXJzdF8sIGFwUyBhcyBhcFNfLCBhcFNlY29uZCBhcyBhcFNlY29uZF8sIGdldEFwcGx5U2VtaWdyb3VwIGFzIGdldEFwcGx5U2VtaWdyb3VwXyB9IGZyb20gJy4vQXBwbHknO1xuaW1wb3J0ICogYXMgY2hhaW5hYmxlIGZyb20gJy4vQ2hhaW4nO1xuaW1wb3J0IHsgZnJvbUlPSyBhcyBmcm9tSU9LXywgdGFwSU8gYXMgdGFwSU9fIH0gZnJvbSAnLi9Gcm9tSU8nO1xuaW1wb3J0IHsgZHVhbCwgaWRlbnRpdHksIHBpcGUgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGFzIGFzIGFzXywgYXNVbml0IGFzIGFzVW5pdF8sIGJpbmRUbyBhcyBiaW5kVG9fLCBmbGFwIGFzIGZsYXBfLCBsZXQgYXMgbGV0X18gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbnZlcnNpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUlPID0gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKG1hKTsgfTsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNvbWJpbmF0b3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIENyZWF0ZXMgYSB0YXNrIHRoYXQgd2lsbCBjb21wbGV0ZSBhZnRlciBhIHRpbWUgZGVsYXlcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2VxdWVuY2VUIH0gZnJvbSAnZnAtdHMvQXBwbHknXG4gKiBpbXBvcnQgKiBhcyBUIGZyb20gJ2ZwLXRzL1Rhc2snXG4gKiBpbXBvcnQgeyB0YWtlUmlnaHQgfSBmcm9tICdmcC10cy9BcnJheSdcbiAqXG4gKiBhc3luYyBmdW5jdGlvbiB0ZXN0KCkge1xuICogICBjb25zdCBsb2c6IEFycmF5PHN0cmluZz4gPSBbXVxuICogICBjb25zdCBhcHBlbmQgPSAobWVzc2FnZTogc3RyaW5nKTogVC5UYXNrPHZvaWQ+ID0+XG4gKiAgICAgVC5mcm9tSU8oKCkgPT4ge1xuICogICAgICAgbG9nLnB1c2gobWVzc2FnZSlcbiAqICAgICB9KVxuICogICBjb25zdCBmYSA9IGFwcGVuZCgnYScpXG4gKiAgIGNvbnN0IGZiID0gVC5kZWxheSgyMCkoYXBwZW5kKCdiJykpXG4gKiAgIGNvbnN0IGZjID0gVC5kZWxheSgxMCkoYXBwZW5kKCdjJykpXG4gKiAgIGNvbnN0IGZkID0gYXBwZW5kKCdkJylcbiAqICAgYXdhaXQgc2VxdWVuY2VUKFQuQXBwbHlQYXIpKGZhLCBmYiwgZmMsIGZkKSgpXG4gKiAgIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodGFrZVJpZ2h0KDIpKGxvZyksIFsnYycsICdiJ10pXG4gKiB9XG4gKlxuICogdGVzdCgpXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWxheShtaWxsaXMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihtYSkudGhlbihyZXNvbHZlKTtcbiAgICAgICAgICAgIH0sIG1pbGxpcyk7XG4gICAgICAgIH0pO1xuICAgIH07IH07XG59XG52YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfTtcbnZhciBfYXBQYXIgPSBmdW5jdGlvbiAoZmFiLCBmYSkgeyByZXR1cm4gcGlwZShmYWIsIGFwKGZhKSk7IH07XG52YXIgX2FwU2VxID0gZnVuY3Rpb24gKGZhYiwgZmEpIHsgcmV0dXJuIGZsYXRNYXAoZmFiLCBmdW5jdGlvbiAoZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfSk7IH07XG4vKipcbiAqIGBtYXBgIGNhbiBiZSB1c2VkIHRvIHR1cm4gZnVuY3Rpb25zIGAoYTogQSkgPT4gQmAgaW50byBmdW5jdGlvbnMgYChmYTogRjxBPikgPT4gRjxCPmAgd2hvc2UgYXJndW1lbnQgYW5kIHJldHVybiB0eXBlc1xuICogdXNlIHRoZSB0eXBlIGNvbnN0cnVjdG9yIGBGYCB0byByZXByZXNlbnQgc29tZSBjb21wdXRhdGlvbmFsIGNvbnRleHQuXG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmYSkudGhlbihmKTtcbn07IH07IH07XG4vKipcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmdW5jdGlvbiAoZmFiKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtQcm9taXNlLnJlc29sdmUoKS50aGVuKGZhYiksIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZmEpXSkudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGYgPSBfYVswXSwgYSA9IF9hWzFdO1xuICAgICAgICByZXR1cm4gZihhKTtcbiAgICB9KTtcbn07IH07IH07XG4vKipcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG9mID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhKTsgfTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjE0LjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0TWFwID0gLyojX19QVVJFX18qLyBkdWFsKDIsIGZ1bmN0aW9uIChtYSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgLnRoZW4obWEpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYSkgeyByZXR1cm4gZihhKSgpOyB9KTtcbiAgICB9O1xufSk7XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0dGVuID0gLyojX19QVVJFX18qLyBmbGF0TWFwKGlkZW50aXR5KTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1Rhc2snO1xuLyoqXG4gKiBNb25vaWQgcmV0dXJuaW5nIHRoZSBmaXJzdCBjb21wbGV0ZWQgdGFzay5cbiAqXG4gKiBOb3RlOiB1c2VzIGBQcm9taXNlLnJhY2VgIGludGVybmFsbHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFQgZnJvbSAnZnAtdHMvVGFzaydcbiAqXG4gKiBhc3luYyBmdW5jdGlvbiB0ZXN0KCkge1xuICogICBjb25zdCBTID0gVC5nZXRSYWNlTW9ub2lkPHN0cmluZz4oKVxuICogICBjb25zdCBmYSA9IFQuZGVsYXkoMjApKFQub2YoJ2EnKSlcbiAqICAgY29uc3QgZmIgPSBULmRlbGF5KDEwKShULm9mKCdiJykpXG4gKiAgIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoYXdhaXQgUy5jb25jYXQoZmEsIGZiKSgpLCAnYicpXG4gKiB9XG4gKlxuICogdGVzdCgpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYWNlTW9ub2lkKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFByb21pc2UucmFjZShbUHJvbWlzZS5yZXNvbHZlKCkudGhlbih4KSwgUHJvbWlzZS5yZXNvbHZlKCkudGhlbih5KV0pOyB9OyB9LFxuICAgICAgICBlbXB0eTogbmV2ZXJcbiAgICB9O1xufVxuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogTWFwcyB0aGUgdmFsdWUgdG8gdGhlIHNwZWNpZmllZCBjb25zdGFudCB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIGFzID0gZHVhbCgyLCBhc18oRnVuY3RvcikpO1xuLyoqXG4gKiBNYXBzIHRoZSB2YWx1ZSB0byB0aGUgdm9pZCBjb25zdGFudCB2YWx1ZS5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIGFzVW5pdCA9IGFzVW5pdF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhcCA9IC8qI19fUFVSRV9fKi8gZmxhcF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBQb2ludGVkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogUnVucyBjb21wdXRhdGlvbnMgaW4gcGFyYWxsZWwuXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEFwcGx5UGFyID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwUGFyXG59O1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGFwRmlyc3QgPSAvKiNfX1BVUkVfXyovIGFwRmlyc3RfKEFwcGx5UGFyKTtcbi8qKlxuICogQ29tYmluZSB0d28gZWZmZWN0ZnVsIGFjdGlvbnMsIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBzZWNvbmQuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBTZWNvbmQgPSAvKiNfX1BVUkVfXyovIGFwU2Vjb25kXyhBcHBseVBhcik7XG4vKipcbiAqIFJ1bnMgY29tcHV0YXRpb25zIGluIHBhcmFsbGVsLlxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFwcGxpY2F0aXZlUGFyID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwUGFyLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogUnVucyBjb21wdXRhdGlvbnMgc2VxdWVudGlhbGx5LlxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBBcHBseVNlcSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgYXA6IF9hcFNlcVxufTtcbi8qKlxuICogUnVucyBjb21wdXRhdGlvbnMgc2VxdWVudGlhbGx5LlxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEFwcGxpY2F0aXZlU2VxID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwU2VxLFxuICAgIG9mOiBvZlxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIENoYWluID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwUGFyLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG9mOiBvZixcbiAgICBhcDogX2FwUGFyLFxuICAgIGNoYWluOiBmbGF0TWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWRJTyA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFwOiBfYXBQYXIsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZnJvbUlPOiBmcm9tSU9cbn07XG4vKipcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZnJvbVRhc2sgPSBpZGVudGl0eTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIE1vbmFkVGFzayA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFwOiBfYXBQYXIsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZnJvbUlPOiBmcm9tSU8sXG4gICAgZnJvbVRhc2s6IGZyb21UYXNrXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgRnJvbUlPID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGZyb21JTzogZnJvbUlPXG59O1xuLyoqIEBpbnRlcm5hbCAqL1xudmFyIF9GbGF0TWFwID0ge1xuICAgIGZsYXRNYXA6IGZsYXRNYXBcbn07XG4vKiogQGludGVybmFsICovXG52YXIgX0Zyb21JTyA9IHtcbiAgICBmcm9tSU86IEZyb21JTy5mcm9tSU9cbn07XG4vKipcbiAqIEBjYXRlZ29yeSBzZXF1ZW5jaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhdE1hcElPID0gXy5mbGF0TWFwSU8oX0Zyb21JTywgX0ZsYXRNYXApO1xuLyoqXG4gKiBDb21wb3NlcyBjb21wdXRhdGlvbnMgaW4gc2VxdWVuY2UsIHVzaW5nIHRoZSByZXR1cm4gdmFsdWUgb2Ygb25lIGNvbXB1dGF0aW9uIHRvIGRldGVybWluZSB0aGUgbmV4dCBjb21wdXRhdGlvbiBhbmRcbiAqIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAY2F0ZWdvcnkgY29tYmluYXRvcnNcbiAqIEBzaW5jZSAyLjE1LjBcbiAqL1xuZXhwb3J0IHZhciB0YXAgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgY2hhaW5hYmxlLnRhcChDaGFpbikpO1xuLyoqXG4gKiBDb21wb3NlcyBjb21wdXRhdGlvbnMgaW4gc2VxdWVuY2UsIHVzaW5nIHRoZSByZXR1cm4gdmFsdWUgb2Ygb25lIGNvbXB1dGF0aW9uIHRvIGRldGVybWluZSB0aGUgbmV4dCBjb21wdXRhdGlvbiBhbmRcbiAqIGtlZXBpbmcgb25seSB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICogaW1wb3J0ICogYXMgVCBmcm9tICdmcC10cy9UYXNrJ1xuICogaW1wb3J0ICogYXMgQ29uc29sZSBmcm9tICdmcC10cy9Db25zb2xlJ1xuICpcbiAqIC8vIFdpbGwgcHJvZHVjZSBgSGVsbG8sIGZwLXRzYCB0byB0aGUgc3Rkb3V0XG4gKiBjb25zdCBlZmZlY3QgPSBwaXBlKFxuICogICBULm9mKCdmcC10cycpLFxuICogICBULnRhcElPKCh2YWx1ZSkgPT4gQ29uc29sZS5sb2coYEhlbGxvLCAke3ZhbHVlfWApKSxcbiAqIClcbiAqXG4gKiBhc3luYyBmdW5jdGlvbiB0ZXN0KCkge1xuICogICBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGF3YWl0IGVmZmVjdCgpLCAnZnAtdHMnKVxuICogfVxuICpcbiAqIHRlc3QoKVxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTYuMFxuICovXG5leHBvcnQgdmFyIHRhcElPID0gLyojX19QVVJFX18qLyBkdWFsKDIsIHRhcElPXyhGcm9tSU8sIENoYWluKSk7XG4vKipcbiAqIEBjYXRlZ29yeSBsaWZ0aW5nXG4gKiBAc2luY2UgMi40LjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tSU9LID0gXG4vKiNfX1BVUkVfXyovIGZyb21JT0tfKEZyb21JTyk7XG4vKipcbiAqIEFsaWFzIG9mIGBmbGF0TWFwSU9gLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgdmFyIGNoYWluSU9LID0gZmxhdE1hcElPO1xuLyoqXG4gKiBBbGlhcyBvZiBgdGFwSU9gLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0SU9LID0gdGFwSU87XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBGcm9tVGFzayA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBmcm9tSU86IGZyb21JTyxcbiAgICBmcm9tVGFzazogZnJvbVRhc2tcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBBIGBUYXNrYCB0aGF0IG5ldmVyIGNvbXBsZXRlcy5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBuZXZlciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChfKSB7IHJldHVybiB1bmRlZmluZWQ7IH0pOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZG8gbm90YXRpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBEbyA9IC8qI19fUFVSRV9fKi8gb2YoXy5lbXB0eVJlY29yZCk7XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZFRvID0gLyojX19QVVJFX18qLyBiaW5kVG9fKEZ1bmN0b3IpO1xudmFyIGxldF8gPSAvKiNfX1BVUkVfXyovIGxldF9fKEZ1bmN0b3IpO1xuZXhwb3J0IHsgXG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuMTMuMFxuICovXG5sZXRfIGFzIGxldCB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGJpbmQgPSAvKiNfX1BVUkVfXyovIGNoYWluYWJsZS5iaW5kKENoYWluKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBhcFMgPSAvKiNfX1BVUkVfXyovIGFwU18oQXBwbHlQYXIpO1xuLyoqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgQXBUID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVhZG9ubHlBcnJheSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBhcnJheSB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seU5vbkVtcHR5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmVQYXIpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYXMubWFwKGZ1bmN0aW9uIChhLCBpKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGYoaSwgYSkoKTsgfSk7IH0pKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZVBhcilgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4ID0gZnVuY3Rpb24gKGYpIHtcbiAgICB2YXIgZyA9IHRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4KGYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChfLmlzTm9uRW1wdHkoYXMpID8gZyhhcykgOiBBcFQpOyB9O1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlOb25FbXB0eUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlU2VxKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVJlYWRvbmx5Tm9uRW1wdHlBcnJheVdpdGhJbmRleFNlcSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF8udGFpbChhcykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGEsIGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjLnRoZW4oZnVuY3Rpb24gKGJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZihpICsgMSwgYSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnMucHVzaChiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBicztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGYoMCwgXy5oZWFkKGFzKSkpXG4gICAgICAgICAgICAgICAgLnRoZW4oXy5zaW5nbGV0b24pKTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZVNlcSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4U2VxID0gZnVuY3Rpb24gKGYpIHtcbiAgICB2YXIgZyA9IHRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4U2VxKGYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHsgcmV0dXJuIChfLmlzTm9uRW1wdHkoYXMpID8gZyhhcykgOiBBcFQpOyB9O1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZUFycmF5V2l0aEluZGV4ID0gdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlKEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlQXJyYXkgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSNzZXF1ZW5jZShBcHBsaWNhdGl2ZSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciBzZXF1ZW5jZUFycmF5ID0gXG4vKiNfX1BVUkVfXyovIHRyYXZlcnNlQXJyYXkoaWRlbnRpdHkpO1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlU2VxKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlU2VxQXJyYXlXaXRoSW5kZXggPSB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXhTZXE7XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2UoQXBwbGljYXRpdmVTZXEpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VTZXFBcnJheSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleFNlcShmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3NlcXVlbmNlKEFwcGxpY2F0aXZlU2VxKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlU2VxQXJyYXkgPSBcbi8qI19fUFVSRV9fKi8gdHJhdmVyc2VTZXFBcnJheShpZGVudGl0eSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBsZWdhY3lcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQWxpYXMgb2YgYGZsYXRNYXBgLlxuICpcbiAqIEBjYXRlZ29yeSBsZWdhY3lcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluID0gZmxhdE1hcDtcbi8qKlxuICogQWxpYXMgb2YgYHRhcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5GaXJzdCA9IHRhcDtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgVC5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBULnRhc2tgXG4gKiAod2hlcmUgYFRgIGlzIGZyb20gYGltcG9ydCBUIGZyb20gJ2ZwLXRzL1Rhc2snYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHRhc2sgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG9mOiBvZixcbiAgICBhcDogX2FwUGFyLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIGZyb21JTzogZnJvbUlPLFxuICAgIGZyb21UYXNrOiBmcm9tVGFza1xufTtcbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgVC5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBULnRhc2tTZXFgXG4gKiAod2hlcmUgYFRgIGlzIGZyb20gYGltcG9ydCBUIGZyb20gJ2ZwLXRzL1Rhc2snYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHRhc2tTZXEgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG9mOiBvZixcbiAgICBhcDogX2FwU2VxLFxuICAgIGNoYWluOiBmbGF0TWFwLFxuICAgIGZyb21JTzogZnJvbUlPLFxuICAgIGZyb21UYXNrOiBmcm9tVGFza1xufTtcbi8qKlxuICogVXNlIFtgZ2V0QXBwbHlTZW1pZ3JvdXBgXSguL0FwcGx5LnRzLmh0bWwjZ2V0YXBwbHlzZW1pZ3JvdXApIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRTZW1pZ3JvdXAgPSAvKiNfX1BVUkVfXyovIGdldEFwcGx5U2VtaWdyb3VwXyhBcHBseVNlcSk7XG4vKipcbiAqIFVzZSBbYGdldEFwcGxpY2F0aXZlTW9ub2lkYF0oLi9BcHBsaWNhdGl2ZS50cy5odG1sI2dldGFwcGxpY2F0aXZlbW9ub2lkKSBpbnN0ZWFkLlxuICpcbiAqIExpZnQgYSBtb25vaWQgaW50byAnVGFzaycsIHRoZSBpbm5lciB2YWx1ZXMgYXJlIGNvbmNhdGVuYXRlZCB1c2luZyB0aGUgcHJvdmlkZWQgYE1vbm9pZGAuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBnZXRNb25vaWQgPSAvKiNfX1BVUkVfXyovIGdldEFwcGxpY2F0aXZlTW9ub2lkKEFwcGxpY2F0aXZlU2VxKTtcbiIsCiAgIi8qKlxuICogYGBgdHNcbiAqIGludGVyZmFjZSBUYXNrPEE+IHtcbiAqICAgKCk6IFByb21pc2U8QT5cbiAqIH1cbiAqIGBgYFxuICpcbiAqIGBUYXNrPEE+YCByZXByZXNlbnRzIGFuIGFzeW5jaHJvbm91cyBjb21wdXRhdGlvbiB0aGF0IHlpZWxkcyBhIHZhbHVlIG9mIHR5cGUgYEFgIGFuZCAqKm5ldmVyIGZhaWxzKiouXG4gKiBJZiB5b3Ugd2FudCB0byByZXByZXNlbnQgYW4gYXN5bmNocm9ub3VzIGNvbXB1dGF0aW9uIHRoYXQgbWF5IGZhaWwsIHBsZWFzZSBzZWUgYFRhc2tFaXRoZXJgLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5pbXBvcnQgeyBnZXRBcHBsaWNhdGl2ZU1vbm9pZCB9IGZyb20gJy4vQXBwbGljYXRpdmUnO1xuaW1wb3J0IHsgYXBGaXJzdCBhcyBhcEZpcnN0XywgYXBTIGFzIGFwU18sIGFwU2Vjb25kIGFzIGFwU2Vjb25kXywgZ2V0QXBwbHlTZW1pZ3JvdXAgYXMgZ2V0QXBwbHlTZW1pZ3JvdXBfIH0gZnJvbSAnLi9BcHBseSc7XG5pbXBvcnQgKiBhcyBjaGFpbmFibGUgZnJvbSAnLi9DaGFpbic7XG5pbXBvcnQgeyBmcm9tSU9LIGFzIGZyb21JT0tfLCB0YXBJTyBhcyB0YXBJT18gfSBmcm9tICcuL0Zyb21JTyc7XG5pbXBvcnQgeyBkdWFsLCBpZGVudGl0eSwgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgYXMgYXMgYXNfLCBhc1VuaXQgYXMgYXNVbml0XywgYmluZFRvIGFzIGJpbmRUb18sIGZsYXAgYXMgZmxhcF8sIGxldCBhcyBsZXRfXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29udmVyc2lvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tSU8gPSBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4obWEpOyB9OyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29tYmluYXRvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQ3JlYXRlcyBhIHRhc2sgdGhhdCB3aWxsIGNvbXBsZXRlIGFmdGVyIGEgdGltZSBkZWxheVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzZXF1ZW5jZVQgfSBmcm9tICdmcC10cy9BcHBseSdcbiAqIGltcG9ydCAqIGFzIFQgZnJvbSAnZnAtdHMvVGFzaydcbiAqIGltcG9ydCB7IHRha2VSaWdodCB9IGZyb20gJ2ZwLXRzL0FycmF5J1xuICpcbiAqIGFzeW5jIGZ1bmN0aW9uIHRlc3QoKSB7XG4gKiAgIGNvbnN0IGxvZzogQXJyYXk8c3RyaW5nPiA9IFtdXG4gKiAgIGNvbnN0IGFwcGVuZCA9IChtZXNzYWdlOiBzdHJpbmcpOiBULlRhc2s8dm9pZD4gPT5cbiAqICAgICBULmZyb21JTygoKSA9PiB7XG4gKiAgICAgICBsb2cucHVzaChtZXNzYWdlKVxuICogICAgIH0pXG4gKiAgIGNvbnN0IGZhID0gYXBwZW5kKCdhJylcbiAqICAgY29uc3QgZmIgPSBULmRlbGF5KDIwKShhcHBlbmQoJ2InKSlcbiAqICAgY29uc3QgZmMgPSBULmRlbGF5KDEwKShhcHBlbmQoJ2MnKSlcbiAqICAgY29uc3QgZmQgPSBhcHBlbmQoJ2QnKVxuICogICBhd2FpdCBzZXF1ZW5jZVQoVC5BcHBseVBhcikoZmEsIGZiLCBmYywgZmQpKClcbiAqICAgYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0YWtlUmlnaHQoMikobG9nKSwgWydjJywgJ2InXSlcbiAqIH1cbiAqXG4gKiB0ZXN0KClcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGF5KG1pbGxpcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWEpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKG1hKS50aGVuKHJlc29sdmUpO1xuICAgICAgICAgICAgfSwgbWlsbGlzKTtcbiAgICAgICAgfSk7XG4gICAgfTsgfTtcbn1cbnZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xudmFyIF9hcFBhciA9IGZ1bmN0aW9uIChmYWIsIGZhKSB7IHJldHVybiBwaXBlKGZhYiwgYXAoZmEpKTsgfTtcbnZhciBfYXBTZXEgPSBmdW5jdGlvbiAoZmFiLCBmYSkgeyByZXR1cm4gZmxhdE1hcChmYWIsIGZ1bmN0aW9uIChmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9KTsgfTtcbi8qKlxuICogYG1hcGAgY2FuIGJlIHVzZWQgdG8gdHVybiBmdW5jdGlvbnMgYChhOiBBKSA9PiBCYCBpbnRvIGZ1bmN0aW9ucyBgKGZhOiBGPEE+KSA9PiBGPEI+YCB3aG9zZSBhcmd1bWVudCBhbmQgcmV0dXJuIHR5cGVzXG4gKiB1c2UgdGhlIHR5cGUgY29uc3RydWN0b3IgYEZgIHRvIHJlcHJlc2VudCBzb21lIGNvbXB1dGF0aW9uYWwgY29udGV4dC5cbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZhKS50aGVuKGYpO1xufTsgfTsgfTtcbi8qKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXAgPSBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYWIpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1Byb21pc2UucmVzb2x2ZSgpLnRoZW4oZmFiKSwgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmYSldKS50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgZiA9IF9hWzBdLCBhID0gX2FbMV07XG4gICAgICAgIHJldHVybiBmKGEpO1xuICAgIH0pO1xufTsgfTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgb2YgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGEpOyB9OyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgc2VxdWVuY2luZ1xuICogQHNpbmNlIDIuMTQuMFxuICovXG5leHBvcnQgdmFyIGZsYXRNYXAgPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgZnVuY3Rpb24gKG1hLCBmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAgICAgICAudGhlbihtYSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChhKSB7IHJldHVybiBmKGEpKCk7IH0pO1xuICAgIH07XG59KTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGZsYXR0ZW4gPSAvKiNfX1BVUkVfXyovIGZsYXRNYXAoaWRlbnRpdHkpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBVUkkgPSAnVGFzayc7XG4vKipcbiAqIE1vbm9pZCByZXR1cm5pbmcgdGhlIGZpcnN0IGNvbXBsZXRlZCB0YXNrLlxuICpcbiAqIE5vdGU6IHVzZXMgYFByb21pc2UucmFjZWAgaW50ZXJuYWxseS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgVCBmcm9tICdmcC10cy9UYXNrJ1xuICpcbiAqIGFzeW5jIGZ1bmN0aW9uIHRlc3QoKSB7XG4gKiAgIGNvbnN0IFMgPSBULmdldFJhY2VNb25vaWQ8c3RyaW5nPigpXG4gKiAgIGNvbnN0IGZhID0gVC5kZWxheSgyMCkoVC5vZignYScpKVxuICogICBjb25zdCBmYiA9IFQuZGVsYXkoMTApKFQub2YoJ2InKSlcbiAqICAgYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChhd2FpdCBTLmNvbmNhdChmYSwgZmIpKCksICdiJylcbiAqIH1cbiAqXG4gKiB0ZXN0KClcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJhY2VNb25vaWQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJvbWlzZS5yYWNlKFtQcm9taXNlLnJlc29sdmUoKS50aGVuKHgpLCBQcm9taXNlLnJlc29sdmUoKS50aGVuKHkpXSk7IH07IH0sXG4gICAgICAgIGVtcHR5OiBuZXZlclxuICAgIH07XG59XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3IgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwXG59O1xuLyoqXG4gKiBNYXBzIHRoZSB2YWx1ZSB0byB0aGUgc3BlY2lmaWVkIGNvbnN0YW50IHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgYXMgPSBkdWFsKDIsIGFzXyhGdW5jdG9yKSk7XG4vKipcbiAqIE1hcHMgdGhlIHZhbHVlIHRvIHRoZSB2b2lkIGNvbnN0YW50IHZhbHVlLlxuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgYXNVbml0ID0gYXNVbml0XyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFBvaW50ZWQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBSdW5zIGNvbXB1dGF0aW9ucyBpbiBwYXJhbGxlbC5cbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbHlQYXIgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBQYXJcbn07XG4vKipcbiAqIENvbWJpbmUgdHdvIGVmZmVjdGZ1bCBhY3Rpb25zLCBrZWVwaW5nIG9ubHkgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QuXG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgYXBGaXJzdCA9IC8qI19fUFVSRV9fKi8gYXBGaXJzdF8oQXBwbHlQYXIpO1xuLyoqXG4gKiBDb21iaW5lIHR3byBlZmZlY3RmdWwgYWN0aW9ucywga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIHNlY29uZC5cbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBhcFNlY29uZCA9IC8qI19fUFVSRV9fKi8gYXBTZWNvbmRfKEFwcGx5UGFyKTtcbi8qKlxuICogUnVucyBjb21wdXRhdGlvbnMgaW4gcGFyYWxsZWwuXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbGljYXRpdmVQYXIgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBQYXIsXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBSdW5zIGNvbXB1dGF0aW9ucyBzZXF1ZW50aWFsbHkuXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEFwcGx5U2VxID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBhcDogX2FwU2VxXG59O1xuLyoqXG4gKiBSdW5zIGNvbXB1dGF0aW9ucyBzZXF1ZW50aWFsbHkuXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQXBwbGljYXRpdmVTZXEgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBTZXEsXG4gICAgb2Y6IG9mXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgQ2hhaW4gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGFwOiBfYXBQYXIsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFwOiBfYXBQYXIsXG4gICAgY2hhaW46IGZsYXRNYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBNb25hZElPID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBvZjogb2YsXG4gICAgYXA6IF9hcFBhcixcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICBmcm9tSU86IGZyb21JT1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBmcm9tVGFzayA9IGlkZW50aXR5O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgTW9uYWRUYXNrID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBvZjogb2YsXG4gICAgYXA6IF9hcFBhcixcbiAgICBjaGFpbjogZmxhdE1hcCxcbiAgICBmcm9tSU86IGZyb21JTyxcbiAgICBmcm9tVGFzazogZnJvbVRhc2tcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBGcm9tSU8gPSB7XG4gICAgVVJJOiBVUkksXG4gICAgZnJvbUlPOiBmcm9tSU9cbn07XG4vKiogQGludGVybmFsICovXG52YXIgX0ZsYXRNYXAgPSB7XG4gICAgZmxhdE1hcDogZmxhdE1hcFxufTtcbi8qKiBAaW50ZXJuYWwgKi9cbnZhciBfRnJvbUlPID0ge1xuICAgIGZyb21JTzogRnJvbUlPLmZyb21JT1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHNlcXVlbmNpbmdcbiAqIEBzaW5jZSAyLjE2LjBcbiAqL1xuZXhwb3J0IHZhciBmbGF0TWFwSU8gPSBfLmZsYXRNYXBJTyhfRnJvbUlPLCBfRmxhdE1hcCk7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBjYXRlZ29yeSBjb21iaW5hdG9yc1xuICogQHNpbmNlIDIuMTUuMFxuICovXG5leHBvcnQgdmFyIHRhcCA9IC8qI19fUFVSRV9fKi8gZHVhbCgyLCBjaGFpbmFibGUudGFwKENoYWluKSk7XG4vKipcbiAqIENvbXBvc2VzIGNvbXB1dGF0aW9ucyBpbiBzZXF1ZW5jZSwgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBvbmUgY29tcHV0YXRpb24gdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IGNvbXB1dGF0aW9uIGFuZFxuICoga2VlcGluZyBvbmx5IHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKiBpbXBvcnQgKiBhcyBUIGZyb20gJ2ZwLXRzL1Rhc2snXG4gKiBpbXBvcnQgKiBhcyBDb25zb2xlIGZyb20gJ2ZwLXRzL0NvbnNvbGUnXG4gKlxuICogLy8gV2lsbCBwcm9kdWNlIGBIZWxsbywgZnAtdHNgIHRvIHRoZSBzdGRvdXRcbiAqIGNvbnN0IGVmZmVjdCA9IHBpcGUoXG4gKiAgIFQub2YoJ2ZwLXRzJyksXG4gKiAgIFQudGFwSU8oKHZhbHVlKSA9PiBDb25zb2xlLmxvZyhgSGVsbG8sICR7dmFsdWV9YCkpLFxuICogKVxuICpcbiAqIGFzeW5jIGZ1bmN0aW9uIHRlc3QoKSB7XG4gKiAgIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoYXdhaXQgZWZmZWN0KCksICdmcC10cycpXG4gKiB9XG4gKlxuICogdGVzdCgpXG4gKlxuICogQGNhdGVnb3J5IGNvbWJpbmF0b3JzXG4gKiBAc2luY2UgMi4xNi4wXG4gKi9cbmV4cG9ydCB2YXIgdGFwSU8gPSAvKiNfX1BVUkVfXyovIGR1YWwoMiwgdGFwSU9fKEZyb21JTywgQ2hhaW4pKTtcbi8qKlxuICogQGNhdGVnb3J5IGxpZnRpbmdcbiAqIEBzaW5jZSAyLjQuMFxuICovXG5leHBvcnQgdmFyIGZyb21JT0sgPSBcbi8qI19fUFVSRV9fKi8gZnJvbUlPS18oRnJvbUlPKTtcbi8qKlxuICogQWxpYXMgb2YgYGZsYXRNYXBJT2AuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuNC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW5JT0sgPSBmbGF0TWFwSU87XG4vKipcbiAqIEFsaWFzIG9mIGB0YXBJT2AuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGNoYWluRmlyc3RJT0sgPSB0YXBJTztcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEZyb21UYXNrID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGZyb21JTzogZnJvbUlPLFxuICAgIGZyb21UYXNrOiBmcm9tVGFza1xufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEEgYFRhc2tgIHRoYXQgbmV2ZXIgY29tcGxldGVzLlxuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIG5ldmVyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKF8pIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkbyBub3RhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIERvID0gLyojX19QVVJFX18qLyBvZihfLmVtcHR5UmVjb3JkKTtcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi44LjBcbiAqL1xuZXhwb3J0IHZhciBiaW5kVG8gPSAvKiNfX1BVUkVfXyovIGJpbmRUb18oRnVuY3Rvcik7XG52YXIgbGV0XyA9IC8qI19fUFVSRV9fKi8gbGV0X18oRnVuY3Rvcik7XG5leHBvcnQgeyBcbi8qKlxuICogQGNhdGVnb3J5IGRvIG5vdGF0aW9uXG4gKiBAc2luY2UgMi4xMy4wXG4gKi9cbmxldF8gYXMgbGV0IH07XG4vKipcbiAqIEBjYXRlZ29yeSBkbyBub3RhdGlvblxuICogQHNpbmNlIDIuOC4wXG4gKi9cbmV4cG9ydCB2YXIgYmluZCA9IC8qI19fUFVSRV9fKi8gY2hhaW5hYmxlLmJpbmQoQ2hhaW4pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgZG8gbm90YXRpb25cbiAqIEBzaW5jZSAyLjguMFxuICovXG5leHBvcnQgdmFyIGFwUyA9IC8qI19fUFVSRV9fKi8gYXBTXyhBcHBseVBhcik7XG4vKipcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBBcFQgPSAvKiNfX1BVUkVfXyovIG9mKF8uZW1wdHlSZWFkb25seUFycmF5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGFycmF5IHV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5Tm9uRW1wdHlBcnJheSN0cmF2ZXJzZVdpdGhJbmRleChBcHBsaWNhdGl2ZVBhcilgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChhcy5tYXAoZnVuY3Rpb24gKGEsIGkpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gZihpLCBhKSgpOyB9KTsgfSkpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlUGFyKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXggPSBmdW5jdGlvbiAoZikge1xuICAgIHZhciBnID0gdHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXgoZik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKF8uaXNOb25FbXB0eShhcykgPyBnKGFzKSA6IEFwVCk7IH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seU5vbkVtcHR5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmVTZXEpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlUmVhZG9ubHlOb25FbXB0eUFycmF5V2l0aEluZGV4U2VxID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gXy50YWlsKGFzKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgYSwgaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2MudGhlbihmdW5jdGlvbiAoYnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmKGkgKyAxLCBhKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicy5wdXNoKGIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJzO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZigwLCBfLmhlYWQoYXMpKSlcbiAgICAgICAgICAgICAgICAudGhlbihfLnNpbmdsZXRvbikpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlU2VxKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXhTZXEgPSBmdW5jdGlvbiAoZikge1xuICAgIHZhciBnID0gdHJhdmVyc2VSZWFkb25seU5vbkVtcHR5QXJyYXlXaXRoSW5kZXhTZXEoZik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcykgeyByZXR1cm4gKF8uaXNOb25FbXB0eShhcykgPyBnKGFzKSA6IEFwVCk7IH07XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3RyYXZlcnNlV2l0aEluZGV4KEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHRyYXZlcnNlQXJyYXlXaXRoSW5kZXggPSB0cmF2ZXJzZVJlYWRvbmx5QXJyYXlXaXRoSW5kZXg7XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2UoQXBwbGljYXRpdmUpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VBcnJheSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIGBSZWFkb25seUFycmF5I3NlcXVlbmNlKEFwcGxpY2F0aXZlKWAuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjkuMFxuICovXG5leHBvcnQgdmFyIHNlcXVlbmNlQXJyYXkgPSBcbi8qI19fUFVSRV9fKi8gdHJhdmVyc2VBcnJheShpZGVudGl0eSk7XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjdHJhdmVyc2VXaXRoSW5kZXgoQXBwbGljYXRpdmVTZXEpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJhdmVyc2VTZXFBcnJheVdpdGhJbmRleCA9IHRyYXZlcnNlUmVhZG9ubHlBcnJheVdpdGhJbmRleFNlcTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBgUmVhZG9ubHlBcnJheSN0cmF2ZXJzZShBcHBsaWNhdGl2ZVNlcSlgLlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi45LjBcbiAqL1xuZXhwb3J0IHZhciB0cmF2ZXJzZVNlcUFycmF5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gdHJhdmVyc2VSZWFkb25seUFycmF5V2l0aEluZGV4U2VxKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gYFJlYWRvbmx5QXJyYXkjc2VxdWVuY2UoQXBwbGljYXRpdmVTZXEpYC5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuOS4wXG4gKi9cbmV4cG9ydCB2YXIgc2VxdWVuY2VTZXFBcnJheSA9IFxuLyojX19QVVJFX18qLyB0cmF2ZXJzZVNlcUFycmF5KGlkZW50aXR5KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxlZ2FjeVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBBbGlhcyBvZiBgZmxhdE1hcGAuXG4gKlxuICogQGNhdGVnb3J5IGxlZ2FjeVxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgY2hhaW4gPSBmbGF0TWFwO1xuLyoqXG4gKiBBbGlhcyBvZiBgdGFwYC5cbiAqXG4gKiBAY2F0ZWdvcnkgbGVnYWN5XG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBjaGFpbkZpcnN0ID0gdGFwO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYEZ1bmN0b3JgIGluc3RhbmNlLCBwYXNzIGBULkZ1bmN0b3JgIGluc3RlYWQgb2YgYFQudGFza2BcbiAqICh3aGVyZSBgVGAgaXMgZnJvbSBgaW1wb3J0IFQgZnJvbSAnZnAtdHMvVGFzaydgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdGFzayA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFwOiBfYXBQYXIsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZnJvbUlPOiBmcm9tSU8sXG4gICAgZnJvbVRhc2s6IGZyb21UYXNrXG59O1xuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYEZ1bmN0b3JgIGluc3RhbmNlLCBwYXNzIGBULkZ1bmN0b3JgIGluc3RlYWQgb2YgYFQudGFza1NlcWBcbiAqICh3aGVyZSBgVGAgaXMgZnJvbSBgaW1wb3J0IFQgZnJvbSAnZnAtdHMvVGFzaydgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgdGFza1NlcSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgb2Y6IG9mLFxuICAgIGFwOiBfYXBTZXEsXG4gICAgY2hhaW46IGZsYXRNYXAsXG4gICAgZnJvbUlPOiBmcm9tSU8sXG4gICAgZnJvbVRhc2s6IGZyb21UYXNrXG59O1xuLyoqXG4gKiBVc2UgW2BnZXRBcHBseVNlbWlncm91cGBdKC4vQXBwbHkudHMuaHRtbCNnZXRhcHBseXNlbWlncm91cCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldFNlbWlncm91cCA9IC8qI19fUFVSRV9fKi8gZ2V0QXBwbHlTZW1pZ3JvdXBfKEFwcGx5U2VxKTtcbi8qKlxuICogVXNlIFtgZ2V0QXBwbGljYXRpdmVNb25vaWRgXSguL0FwcGxpY2F0aXZlLnRzLmh0bWwjZ2V0YXBwbGljYXRpdmVtb25vaWQpIGluc3RlYWQuXG4gKlxuICogTGlmdCBhIG1vbm9pZCBpbnRvICdUYXNrJywgdGhlIGlubmVyIHZhbHVlcyBhcmUgY29uY2F0ZW5hdGVkIHVzaW5nIHRoZSBwcm92aWRlZCBgTW9ub2lkYC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuMC4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGdldE1vbm9pZCA9IC8qI19fUFVSRV9fKi8gZ2V0QXBwbGljYXRpdmVNb25vaWQoQXBwbGljYXRpdmVTZXEpO1xuIiwKICAiaW1wb3J0IHsgaXNOb25FbXB0eSB9IGZyb20gJy4vUmVhZG9ubHlOb25FbXB0eUFycmF5Jztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGluc3RhbmNlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLkVxLmVxdWFscygnYScsICdhJyksIHRydWUpXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuRXEuZXF1YWxzKCdhJywgJ2InKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIEVxID0ge1xuICAgIGVxdWFsczogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0ID09PSBzZWNvbmQ7IH1cbn07XG4vKipcbiAqIGBzdHJpbmdgIHNlbWlncm91cCB1bmRlciBjb25jYXRlbmF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuU2VtaWdyb3VwLmNvbmNhdCgnYScsICdiJyksICdhYicpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIFNlbWlncm91cCA9IHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBmaXJzdCArIHNlY29uZDsgfVxufTtcbi8qKlxuICogQW4gZW1wdHkgYHN0cmluZ2AuXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0gJyc7XG4vKipcbiAqIGBzdHJpbmdgIG1vbm9pZCB1bmRlciBjb25jYXRlbmF0aW9uLlxuICpcbiAqIFRoZSBgZW1wdHlgIHZhbHVlIGlzIGAnJ2AuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5Nb25vaWQuY29uY2F0KCdhJywgJ2InKSwgJ2FiJylcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5Nb25vaWQuY29uY2F0KCdhJywgUy5Nb25vaWQuZW1wdHkpLCAnYScpXG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIE1vbm9pZCA9IHtcbiAgICBjb25jYXQ6IFNlbWlncm91cC5jb25jYXQsXG4gICAgZW1wdHk6IGVtcHR5XG59O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLk9yZC5jb21wYXJlKCdhJywgJ2EnKSwgMClcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5PcmQuY29tcGFyZSgnYScsICdiJyksIC0xKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLk9yZC5jb21wYXJlKCdiJywgJ2EnKSwgMSlcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgT3JkID0ge1xuICAgIGVxdWFsczogRXEuZXF1YWxzLFxuICAgIGNvbXBhcmU6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiAoZmlyc3QgPCBzZWNvbmQgPyAtMSA6IGZpcnN0ID4gc2Vjb25kID8gMSA6IDApOyB9XG59O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChTLlNob3cuc2hvdygnYScpLCAnXCJhXCInKVxuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBTaG93ID0ge1xuICAgIHNob3c6IGZ1bmN0aW9uIChzKSB7IHJldHVybiBKU09OLnN0cmluZ2lmeShzKTsgfVxufTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHJlZmluZW1lbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFMuaXNTdHJpbmcoJ2EnKSwgdHJ1ZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoUy5pc1N0cmluZygxKSwgZmFsc2UpXG4gKlxuICogQGNhdGVnb3J5IHJlZmluZW1lbnRzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgaXNTdHJpbmcgPSBmdW5jdGlvbiAodSkgeyByZXR1cm4gdHlwZW9mIHUgPT09ICdzdHJpbmcnOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY29tYmluYXRvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnYScsIFMudG9VcHBlckNhc2UpLCAnQScpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRvVXBwZXJDYXNlID0gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudG9VcHBlckNhc2UoKTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnQScsIFMudG9Mb3dlckNhc2UpLCAnYScpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRvTG93ZXJDYXNlID0gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudG9Mb3dlckNhc2UoKTsgfTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnYWJjJywgUy5yZXBsYWNlKCdiJywgJ2QnKSksICdhZGMnKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciByZXBsYWNlID0gZnVuY3Rpb24gKHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcmV0dXJuIHMucmVwbGFjZShzZWFyY2hWYWx1ZSwgcmVwbGFjZVZhbHVlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnIGEgJywgUy50cmltKSwgJ2EnKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB0cmltID0gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudHJpbSgpOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCcgYSAnLCBTLnRyaW1MZWZ0KSwgJ2EgJylcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdHJpbUxlZnQgPSBmdW5jdGlvbiAocykgeyByZXR1cm4gcy50cmltTGVmdCgpOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCcgYSAnLCBTLnRyaW1SaWdodCksICcgYScpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHRyaW1SaWdodCA9IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnRyaW1SaWdodCgpOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCdhYmNkJywgUy5zbGljZSgxLCAzKSksICdiYycpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHNsaWNlID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcmV0dXJuIHMuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgfTtcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB1dGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYSBgc3RyaW5nYCBpcyBlbXB0eS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCcnLCBTLmlzRW1wdHkpLCB0cnVlKVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCdhJywgUy5pc0VtcHR5KSwgZmFsc2UpXG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGlzRW1wdHkgPSBmdW5jdGlvbiAocykgeyByZXR1cm4gcy5sZW5ndGggPT09IDA7IH07XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgaW4gYSBgc3RyaW5nYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCdhYmMnLCBTLnNpemUpLCAzKVxuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBzaXplID0gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMubGVuZ3RoOyB9O1xuLyoqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0ICogYXMgUyBmcm9tICdmcC10cy9zdHJpbmcnXG4gKiBpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZnAtdHMvZnVuY3Rpb24nXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwaXBlKCdhYmMnLCBTLnNwbGl0KCcnKSksIFsnYScsICdiJywgJ2MnXSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnJywgUy5zcGxpdCgnJykpLCBbJyddKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBzcGxpdCA9IGZ1bmN0aW9uIChzZXBhcmF0b3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgdmFyIG91dCA9IHMuc3BsaXQoc2VwYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIGlzTm9uRW1wdHkob3V0KSA/IG91dCA6IFtzXTtcbiAgICB9O1xufTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnYWJjJywgUy5pbmNsdWRlcygnYicpKSwgdHJ1ZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnYWJjJywgUy5pbmNsdWRlcygnZCcpKSwgZmFsc2UpXG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGluY2x1ZGVzID0gZnVuY3Rpb24gKHNlYXJjaFN0cmluZywgcG9zaXRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcmV0dXJuIHMuaW5jbHVkZXMoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbik7XG4gICAgfTtcbn07XG4vKipcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBTIGZyb20gJ2ZwLXRzL3N0cmluZydcbiAqIGltcG9ydCB7IHBpcGUgfSBmcm9tICdmcC10cy9mdW5jdGlvbidcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBpcGUoJ2FiYycsIFMuc3RhcnRzV2l0aCgnYScpKSwgdHJ1ZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnYmMnLCBTLnN0YXJ0c1dpdGgoJ2EnKSksIGZhbHNlKVxuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBzdGFydHNXaXRoID0gZnVuY3Rpb24gKHNlYXJjaFN0cmluZywgcG9zaXRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcmV0dXJuIHMuc3RhcnRzV2l0aChzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKTtcbiAgICB9O1xufTtcbi8qKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCAqIGFzIFMgZnJvbSAnZnAtdHMvc3RyaW5nJ1xuICogaW1wb3J0IHsgcGlwZSB9IGZyb20gJ2ZwLXRzL2Z1bmN0aW9uJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnYWJjJywgUy5lbmRzV2l0aCgnYycpKSwgdHJ1ZSlcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGlwZSgnYWInLCBTLmVuZHNXaXRoKCdjJykpLCBmYWxzZSlcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZW5kc1dpdGggPSBmdW5jdGlvbiAoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgICByZXR1cm4gcy5lbmRzV2l0aChzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKTtcbiAgICB9O1xufTtcbiIsCiAgImltcG9ydCB7IGZyb21FcXVhbHMgfSBmcm9tICcuL0VxJztcbmltcG9ydCB7IGZsb3csIGlkZW50aXR5LCBwaXBlLCBTSyB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgZmxhcCBhcyBmbGFwXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0IHsgc2VwYXJhdGVkIH0gZnJvbSAnLi9TZXBhcmF0ZWQnO1xuaW1wb3J0ICogYXMgUyBmcm9tICcuL3N0cmluZyc7XG5pbXBvcnQgeyB3aWx0RGVmYXVsdCwgd2l0aGVyRGVmYXVsdCB9IGZyb20gJy4vV2l0aGVyYWJsZSc7XG4vKipcbiAqIEJ1aWxkcyBhIGBSZWFkb25seVJlY29yZGAgYnkgY29weWluZyBhIGBSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBSZWFkb25seVJlY29yZCwgZnJvbVJlY29yZCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogY29uc3QgeDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHsgYTogMSwgYjogMiB9O1xuICogY29uc3QgeTogUmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0gZnJvbVJlY29yZCh4KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoeCx5KTtcbiAqIC8vIGB5LmEgPSA1YCBnaXZlcyBjb21waWxlciBlcnJvclxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbVJlY29yZCA9IGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByKTsgfTtcbi8qKlxuICogQnVpbGRzIGEgbXV0YWJsZSBgUmVjb3JkYCBmcm9tIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUmVhZG9ubHlSZWNvcmQsIHRvUmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBjb25zdCB4OiBSZWFkb25seVJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7IGE6IDEsIGI6IDIgfTtcbiAqIGNvbnN0IHk6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB0b1JlY29yZCh4KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoeCx5KTtcbiAqIHkuYSA9IDU7IC8vIGl0J3Mgb2ssIHkgaXMgbXV0YWJsZVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdG9SZWNvcmQgPSBmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcik7IH07XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGtleS92YWx1ZSBwYWlycyBpbiBhIGBSZWFkb25seVJlY29yZGAsXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNpemUgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNpemUoeyBhOiB0cnVlLCBiOiAyLCBjOiBcInRocmVlXCIgfSksIDMpO1xuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNpemUgPSBmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmtleXMocikubGVuZ3RoOyB9O1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYSBgUmVhZG9ubHlSZWNvcmRgIGlzIGVtcHR5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGlzRW1wdHkoe30pLCB0cnVlKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaXNFbXB0eSh7IGE6IDMgfSksIGZhbHNlKTtcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGlzRW1wdHkgPSBmdW5jdGlvbiAocikge1xuICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufTtcbnZhciBrZXlzXyA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhyKS5zb3J0KE8uY29tcGFyZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGtleXMgPSAvKiNfX1BVUkVfXyovIGtleXNfKFMuT3JkKTtcbmV4cG9ydCBmdW5jdGlvbiBjb2xsZWN0KE8pIHtcbiAgICBpZiAodHlwZW9mIE8gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGNvbGxlY3QoUy5PcmQpKE8pO1xuICAgIH1cbiAgICB2YXIga2V5c08gPSBrZXlzXyhPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0ga2V5c08ocik7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChmKGtleSwgcltrZXldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59XG4vKipcbiAqIEdldCBhIHNvcnRlZCBgUmVhZG9ubHlBcnJheWAgb2YgdGhlIGtleS92YWx1ZSBwYWlycyBjb250YWluZWQgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB0b1JlYWRvbmx5QXJyYXkgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBjb25zdCB4ID0geyBjOiAzLCBhOiBcImZvb1wiLCBiOiBmYWxzZSB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0b1JlYWRvbmx5QXJyYXkoeCksIFtcbiAqICAgW1wiYVwiLCBcImZvb1wiXSxcbiAqICAgW1wiYlwiLCBmYWxzZV0sXG4gKiAgIFtcImNcIiwgM10sXG4gKiBdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHRvUmVhZG9ubHlBcnJheSA9IFxuLyojX19QVVJFX18qLyBjb2xsZWN0KFMuT3JkKShmdW5jdGlvbiAoaywgYSkgeyByZXR1cm4gW2ssIGFdOyB9KTtcbmV4cG9ydCBmdW5jdGlvbiB0b1VuZm9sZGFibGUoVSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgc2FzID0gdG9SZWFkb25seUFycmF5KHIpO1xuICAgICAgICB2YXIgbGVuID0gc2FzLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIFUudW5mb2xkKDAsIGZ1bmN0aW9uIChiKSB7IHJldHVybiAoYiA8IGxlbiA/IF8uc29tZShbc2FzW2JdLCBiICsgMV0pIDogXy5ub25lKTsgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogSW5zZXJ0IG9yIHJlcGxhY2UgYSBrZXkvdmFsdWUgcGFpciBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVwc2VydEF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cHNlcnRBdChcImFcIiwgNSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDUsIGI6IDIgfSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwc2VydEF0KFwiY1wiLCA1KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogMSwgYjogMiwgYzogNSB9KTtcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgdXBzZXJ0QXQgPSBmdW5jdGlvbiAoaywgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSAmJiByW2tdID09PSBhKSB7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gT2JqZWN0LmFzc2lnbih7fSwgcik7XG4gICAgICAgIG91dFtrXSA9IGE7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBvciBub3QgYSBrZXkgZXhpc3RzIGluIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBOb3RlLiBUaGlzIGZ1bmN0aW9uIGlzIG5vdCBwaXBlYWJsZSBiZWNhdXNlIGlzIGEgYFJlZmluZW1lbnRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBoYXMgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGhhcyhcImFcIiwgeyBhOiAxLCBiOiAyIH0pLCB0cnVlKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaGFzKFwiY1wiLCB7IGE6IDEsIGI6IDIgfSksIGZhbHNlKTtcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgaGFzID0gZnVuY3Rpb24gKGssIHIpIHsgcmV0dXJuIF8uaGFzLmNhbGwociwgayk7IH07XG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQXQoaykge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBpZiAoIV8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBPYmplY3QuYXNzaWduKHt9LCByKTtcbiAgICAgICAgZGVsZXRlIG91dFtrXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxuLyoqXG4gKiBSZXBsYWNlIGEga2V5L3ZhbHVlIHBhaXIgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEByZXR1cm5zIElmIHRoZSBzcGVjaWZpZWQga2V5IGV4aXN0cyBpdCByZXR1cm5zIGFuIGBPcHRpb25gIGNvbnRhaW5pbmcgYSBuZXcgYFJlY29yZGBcbiAqIHdpdGggdGhlIGVudHJ5IHVwZGF0ZWQsIG90aGVyd2lzZSBpdCByZXR1cm5zIGBOb25lYFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1cGRhdGVBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cGRhdGVBdChcImFcIiwgMykoeyBhOiAxLCBiOiAyIH0pLCBvcHRpb24uc29tZSh7IGE6IDMsIGI6IDIgfSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cGRhdGVBdChcImNcIiwgMykoeyBhOiAxLCBiOiAyIH0pLCBvcHRpb24ubm9uZSk7XG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlQXQgPSBmdW5jdGlvbiAoaywgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBpZiAoIWhhcyhrLCByKSkge1xuICAgICAgICAgICAgcmV0dXJuIF8ubm9uZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocltrXSA9PT0gYSkge1xuICAgICAgICAgICAgcmV0dXJuIF8uc29tZShyKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gT2JqZWN0LmFzc2lnbih7fSwgcik7XG4gICAgICAgIG91dFtrXSA9IGE7XG4gICAgICAgIHJldHVybiBfLnNvbWUob3V0KTtcbiAgICB9O1xufTtcbi8qKlxuICogQXBwbGllcyBhIG1hcHBpbmcgZnVuY3Rpb24gdG8gb25lIHNwZWNpZmljIGtleS92YWx1ZSBwYWlyIGluIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAcmV0dXJucyBJZiB0aGUgc3BlY2lmaWVkIGtleSBleGlzdHMgaXQgcmV0dXJucyBhbiBgT3B0aW9uYCBjb250YWluaW5nIGEgbmV3IGBSZWNvcmRgXG4gKiB3aXRoIHRoZSBlbnRyeSB1cGRhdGVkLCBvdGhlcndpc2UgaXQgcmV0dXJucyBgTm9uZWBcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbW9kaWZ5QXQgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobW9kaWZ5QXQoXCJhXCIsICh4OiBudW1iZXIpID0+IHggKiAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5zb21lKHsgYTogMywgYjogMiB9KSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG1vZGlmeUF0KFwiY1wiLCAoeDogbnVtYmVyKSA9PiB4ICogMykoeyBhOiAxLCBiOiAyIH0pLCBvcHRpb24ubm9uZSk7XG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaywgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBpZiAoIWhhcyhrLCByKSkge1xuICAgICAgICAgICAgcmV0dXJuIF8ubm9uZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV4dCA9IGYocltrXSk7XG4gICAgICAgIGlmIChuZXh0ID09PSByW2tdKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5zb21lKHIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBPYmplY3QuYXNzaWduKHt9LCByKTtcbiAgICAgICAgb3V0W2tdID0gbmV4dDtcbiAgICAgICAgcmV0dXJuIF8uc29tZShvdXQpO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBvcChrKSB7XG4gICAgdmFyIGRlbGV0ZUF0ayA9IGRlbGV0ZUF0KGspO1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgb2EgPSBsb29rdXAoaywgcik7XG4gICAgICAgIHJldHVybiBfLmlzTm9uZShvYSkgPyBfLm5vbmUgOiBfLnNvbWUoW29hLnZhbHVlLCBkZWxldGVBdGsocildKTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU3VicmVjb3JkKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1lLCB0aGF0KSB7XG4gICAgICAgIGlmICh0aGF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBpc1N1YnJlY29yZEVfMSA9IGlzU3VicmVjb3JkKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0aGF0KSB7IHJldHVybiBpc1N1YnJlY29yZEVfMSh0aGF0LCBtZSk7IH07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgayBpbiBtZSkge1xuICAgICAgICAgICAgaWYgKCFfLmhhcy5jYWxsKHRoYXQsIGspIHx8ICFFLmVxdWFscyhtZVtrXSwgdGhhdFtrXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb29rdXAoaywgcikge1xuICAgIGlmIChyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7IHJldHVybiBsb29rdXAoaywgcik7IH07XG4gICAgfVxuICAgIHJldHVybiBfLmhhcy5jYWxsKHIsIGspID8gXy5zb21lKHJba10pIDogXy5ub25lO1xufVxuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBlbXB0eSA9IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIG1hcFdpdGhJbmRleChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IGYoaywgcltrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1hcChmKSB7XG4gICAgcmV0dXJuIG1hcFdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlV2l0aEluZGV4KCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIHJlZHVjZVdpdGhJbmRleChTLk9yZCkuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICB9XG4gICAgdmFyIGtleXNPID0ga2V5c18oYXJnc1swXSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgdmFyIG91dCA9IGI7XG4gICAgICAgIHZhciBrcyA9IGtleXNPKGZhKTtcbiAgICAgICAgdmFyIGxlbiA9IGtzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIGsgPSBrc1tpXTtcbiAgICAgICAgICAgIG91dCA9IGYoaywgb3V0LCBmYVtrXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9OyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvbGRNYXBXaXRoSW5kZXgoTykge1xuICAgIGlmICgnY29tcGFyZScgaW4gTykge1xuICAgICAgICB2YXIga2V5c09fMSA9IGtleXNfKE8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKE0pIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dCA9IE0uZW1wdHk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrcyA9IGtleXNPXzEoZmEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0ga3MubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgayA9IGtzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0ID0gTS5jb25jYXQob3V0LCBmKGssIGZhW2tdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZvbGRNYXBXaXRoSW5kZXgoUy5PcmQpKE8pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVJpZ2h0V2l0aEluZGV4KCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KFMuT3JkKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgIH1cbiAgICB2YXIga2V5c08gPSBrZXlzXyhhcmdzWzBdKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgb3V0ID0gYjtcbiAgICAgICAgdmFyIGtzID0ga2V5c08oZmEpO1xuICAgICAgICB2YXIgbGVuID0ga3MubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gbGVuIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciBrID0ga3NbaV07XG4gICAgICAgICAgICBvdXQgPSBmKGssIGZhW2tdLCBvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTsgfTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5UmVjb3JkYCB3aXRoIG9uZSBrZXkvdmFsdWUgcGFpci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2luZ2xldG9uIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCI7XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzaW5nbGV0b24oXCJhXCIsIDEpLCB7IGE6IDEgfSk7XG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgc2luZ2xldG9uID0gZnVuY3Rpb24gKGssIGEpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIChfYSA9IHt9LCBfYVtrXSA9IGEsIF9hKTtcbn07XG5leHBvcnQgZnVuY3Rpb24gdHJhdmVyc2VXaXRoSW5kZXgoRikge1xuICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleE9GID0gX3RyYXZlcnNlV2l0aEluZGV4KFMuT3JkKShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh0YSkgeyByZXR1cm4gdHJhdmVyc2VXaXRoSW5kZXhPRih0YSwgZik7IH07IH07XG59XG5leHBvcnQgZnVuY3Rpb24gdHJhdmVyc2UoRikge1xuICAgIHZhciB0cmF2ZXJzZU9GID0gX3RyYXZlcnNlKFMuT3JkKShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh0YSkgeyByZXR1cm4gdHJhdmVyc2VPRih0YSwgZik7IH07IH07XG59XG5leHBvcnQgZnVuY3Rpb24gc2VxdWVuY2UoRikge1xuICAgIHJldHVybiBfc2VxdWVuY2UoUy5PcmQpKEYpO1xufVxuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aXRoZXIgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZUYgPSB0cmF2ZXJzZShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5tYXAocGlwZShmYSwgdHJhdmVyc2VGKGYpKSwgY29tcGFjdCk7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aWx0ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYubWFwKHBpcGUoZmEsIHRyYXZlcnNlRihmKSksIHNlcGFyYXRlKTsgfTsgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gcGFydGl0aW9uTWFwV2l0aEluZGV4KGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIGxlZnQgPSB7fTtcbiAgICAgICAgdmFyIHJpZ2h0ID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGYoaywgcltrXSk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChlLl90YWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTGVmdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0W2tdID0gZS5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0W2tdID0gZS5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpdGlvbldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIGxlZnQgPSB7fTtcbiAgICAgICAgdmFyIHJpZ2h0ID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IHJba107XG4gICAgICAgICAgICAgICAgaWYgKHByZWRpY2F0ZVdpdGhJbmRleChrLCBhKSkge1xuICAgICAgICAgICAgICAgICAgICByaWdodFtrXSA9IGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0W2tdID0gYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0LCByaWdodCk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJNYXBXaXRoSW5kZXgoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2IgPSBmKGssIHJba10pO1xuICAgICAgICAgICAgICAgIGlmIChfLmlzU29tZShvYikpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tdID0gb2IudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJXaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBmYSkge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwoZmEsIGtleSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGZhW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKHByZWRpY2F0ZVdpdGhJbmRleChrZXksIGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrZXldID0gYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhbmdlZCA/IG91dCA6IGZhO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbUZvbGRhYmxlKE0sIEYpIHtcbiAgICB2YXIgZnJvbUZvbGRhYmxlTWFwTSA9IGZyb21Gb2xkYWJsZU1hcChNLCBGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZrYSkgeyByZXR1cm4gZnJvbUZvbGRhYmxlTWFwTShma2EsIGlkZW50aXR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRm9sZGFibGVNYXAoTSwgRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHtcbiAgICAgICAgcmV0dXJuIEYucmVkdWNlKHRhLCB7fSwgZnVuY3Rpb24gKHIsIGEpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IGYoYSksIGsgPSBfYVswXSwgYiA9IF9hWzFdO1xuICAgICAgICAgICAgcltrXSA9IF8uaGFzLmNhbGwociwgaykgPyBNLmNvbmNhdChyW2tdLCBiKSA6IGI7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogQWxpYXMgb2YgW2B0b1JlYWRvbmx5QXJyYXlgXSgjdG9yZWFkb25seWFycmF5KS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdG9FbnRyaWVzIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0b0VudHJpZXMoeyBiOiAyLCBhOiAxIH0pLCBbWydhJywgMV0sIFsnYicsIDJdXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciB0b0VudHJpZXMgPSB0b1JlYWRvbmx5QXJyYXk7XG4vKipcbiAqIENvbnZlcnRzIGEgYFJlYWRvbmx5QXJyYXlgIG9mIGBba2V5LCB2YWx1ZV1gIHR1cGxlcyBpbnRvIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZnJvbUVudHJpZXMgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21FbnRyaWVzKFtbJ2EnLCAxXSwgWydiJywgMl0sIFsnYScsIDNdXSksIHsgYjogMiwgYTogMyB9KVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICovXG5leHBvcnQgdmFyIGZyb21FbnRyaWVzID0gZnVuY3Rpb24gKGZhKSB7XG4gICAgdmFyIG91dCA9IHt9O1xuICAgIGZvciAodmFyIF9pID0gMCwgZmFfMSA9IGZhOyBfaSA8IGZhXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBhID0gZmFfMVtfaV07XG4gICAgICAgIG91dFthWzBdXSA9IGFbMV07XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGV2ZXJ5KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmICghcHJlZGljYXRlKHJba10pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG4vKipcbiAqIFRlc3QgaWYgYXQgbGVhc3Qgb25lIHZhbHVlIGluIGEgYFJlYWRvbmx5UmVjb3JkYCBzYXRpc2ZpZXMgdGhlIHByZWRpY2F0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb21lKChuOiBudW1iZXIpID0+IG4gPj0gMCkoeyBhOiAxLCBiOiAtMiB9KSwgdHJ1ZSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvbWUoKG46IG51bWJlcikgPT4gbiA+PSAwKSh7IGE6IC0xLCBiOiAtMiB9KSwgZmFsc2UpO1xuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc29tZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKHJba10pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZWxlbShFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBmYSkge1xuICAgICAgICBpZiAoZmEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGVsZW1FXzEgPSBlbGVtKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZWxlbUVfMShhLCBmYSk7IH07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgayBpbiBmYSkge1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGZhW2tdLCBhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufVxuLyoqXG4gKiBVbmlvbiBvZiB0d28gYFJlYWRvbmx5UmVjb3JkYHMuXG4gKiBUYWtlcyB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYW5kIHByb2R1Y2VzIGEgYFJlYWRvbmx5UmVjb3JkYCBjb21iaW5pbmcgYWxsIHRoZVxuICogZW50cmllcyBvZiB0aGUgdHdvIGlucHV0cy5cbiAqIEl0IHVzZXMgdGhlIGBjb25jYXRgIGZ1bmN0aW9uIG9mIHRoZSBwcm92aWRlZCBgTWFnbWFgIHRvXG4gKiBjb21iaW5lIHRoZSBlbGVtZW50cyB3aXRoIHRoZSBzYW1lIGtleS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pb24gfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqIGltcG9ydCB7IE1hZ21hIH0gZnJvbSBcImZwLXRzL01hZ21hXCI7XG4gKlxuICogY29uc3QgbTE6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB4ICsgeSB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmlvbihtMSkoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiA0LCBiOiAyLCBjOiAzIH0pO1xuICogY29uc3QgbTI6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlcikgPT4geCB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmlvbihtMikoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiAxLCBiOiAyLCBjOiAzIH0pO1xuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB1bmlvbiA9IGZ1bmN0aW9uIChNKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0VtcHR5KHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIGZpcnN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhcyhrLCBzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IE0uY29uY2F0KGZpcnN0W2tdLCBzZWNvbmRba10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tdID0gZmlyc3Rba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBzZWNvbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWhhcyhrLCBvdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IHNlY29uZFtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBJbnRlcnNlY3Rpb24gb2YgdHdvIGBSZWFkb25seVJlY29yZGBzLlxuICogVGFrZXMgdHdvIGBSZWFkb25seVJlY29yZGBzIGFuZCBwcm9kdWNlcyBhIGBSZWFkb25seVJlY29yZGAgY29tYmluaW5nIG9ubHkgdGhlXG4gKiBlbnRyaWVzIG9mIHRoZSB0d28gaW5wdXRzd2l0aCB0aGUgc2FtZSBrZXkuXG4gKiBJdCB1c2VzIHRoZSBgY29uY2F0YCBmdW5jdGlvbiBvZiB0aGUgcHJvdmlkZWQgYE1hZ21hYCB0b1xuICogY29tYmluZSB0aGUgZWxlbWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGludGVyc2VjdGlvbiB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiO1xuICogaW1wb3J0IHsgTWFnbWEgfSBmcm9tIFwiZnAtdHMvTWFnbWFcIjtcbiAqXG4gKiBjb25zdCBtMTogTWFnbWE8bnVtYmVyPiA9IHsgY29uY2F0OiAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IHggKyB5IH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc2VjdGlvbihtMSkoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiA0fSk7XG4gKiBjb25zdCBtMjogTWFnbWE8bnVtYmVyPiA9IHsgY29uY2F0OiAoeDogbnVtYmVyKSA9PiB4IH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc2VjdGlvbihtMikoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiAxfSk7XG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGludGVyc2VjdGlvbiA9IGZ1bmN0aW9uIChNKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpIHx8IGlzRW1wdHkoc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gZmlyc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzKGssIHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tdID0gTS5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogRGlmZmVyZW5jZSBiZXR3ZWVuIHR3byBgUmVhZG9ubHlSZWNvcmRgcy5cbiAqIFRha2VzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBhbmQgcHJvZHVjZXMgYSBgUmVhZG9ubHlSZWNvcmRgIGNvbXBvc2VkIGJ5IHRoZVxuICogZW50cmllcyBvZiB0aGUgdHdvIGlucHV0cywgcmVtb3ZpbmcgdGhlIGVudHJpZXMgd2l0aCB0aGUgc2FtZVxuICoga2V5IGluIGJvdGggaW5wdXRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBkaWZmZXJlbmNlIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCI7XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkaWZmZXJlbmNlKHsgYTogMSB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYjogMiB9KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZGlmZmVyZW5jZSh7IGE6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGI6IDIgfSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRpZmZlcmVuY2UoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBiOiAyLCBjOiAzIH0pO1xuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBkaWZmZXJlbmNlID0gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Vjb25kO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0VtcHR5KHNlY29uZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gZmlyc3QpIHtcbiAgICAgICAgICAgIGlmICghaGFzKGssIHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICBvdXRba10gPSBmaXJzdFtrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrIGluIHNlY29uZCkge1xuICAgICAgICAgICAgaWYgKCFoYXMoaywgZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdID0gc2Vjb25kW2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIF9tYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIG1hcChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHJlZHVjZU8gPSByZWR1Y2UoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlTyhiLCBmKSk7IH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTykoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHJlZHVjZVJpZ2h0TyA9IHJlZHVjZVJpZ2h0KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0TyhiLCBmKSk7IH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX2ZpbHRlciA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIGZpbHRlcihwcmVkaWNhdGUpKTtcbn07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfZmlsdGVyTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXAoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3BhcnRpdGlvbiA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb24ocHJlZGljYXRlKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25NYXAoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3JlZHVjZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHJlZHVjZVdpdGhJbmRleE8gPSByZWR1Y2VXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlV2l0aEluZGV4TyhiLCBmKSk7IH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhPID0gZm9sZE1hcFdpdGhJbmRleChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKE0pIHtcbiAgICAgICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleE8oTSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBXaXRoSW5kZXhNKGYpKTsgfTtcbiAgICB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9yZWR1Y2VSaWdodFdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHJlZHVjZVJpZ2h0V2l0aEluZGV4TyA9IHJlZHVjZVJpZ2h0V2l0aEluZGV4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0V2l0aEluZGV4TyhiLCBmKSk7IH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3BhcnRpdGlvbk1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwV2l0aEluZGV4KGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9wYXJ0aXRpb25XaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25XaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSk7XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX2ZpbHRlck1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyTWFwV2l0aEluZGV4KGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9maWx0ZXJXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZVdpdGhJbmRleCkgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBfdHJhdmVyc2UgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleE8gPSBfdHJhdmVyc2VXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleE9GID0gdHJhdmVyc2VXaXRoSW5kZXhPKEYpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleE9GKHRhLCBmbG93KFNLLCBmKSk7IH07XG4gICAgfTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIF9zZXF1ZW5jZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHRyYXZlcnNlTyA9IF90cmF2ZXJzZShPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKEYpIHtcbiAgICAgICAgdmFyIHRyYXZlcnNlT0YgPSB0cmF2ZXJzZU8oRik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHsgcmV0dXJuIHRyYXZlcnNlT0YodGEsIGlkZW50aXR5KTsgfTtcbiAgICB9O1xufTtcbnZhciBfdHJhdmVyc2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoRikge1xuICAgICAgICB2YXIga2V5c08gPSBrZXlzXyhPKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikge1xuICAgICAgICAgICAgdmFyIGtzID0ga2V5c08odGEpO1xuICAgICAgICAgICAgaWYgKGtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBGLm9mKGVtcHR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmciA9IEYub2Yoe30pO1xuICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgZnIgPSBGLmFwKEYubWFwKGZyLCBmdW5jdGlvbiAocikgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgciwgKF9hID0ge30sIF9hW2tleV0gPSBiLCBfYSkpO1xuICAgICAgICAgICAgICAgIH07IH0pLCBmKGtleSwgdGFba2V5XSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwga3NfMSA9IGtzOyBfaSA8IGtzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtzXzFbX2ldO1xuICAgICAgICAgICAgICAgIF9sb29wXzEoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmcjtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogR2l2ZW4gYSBgUHJlZGljYXRlYCwgaXQgcHJvZHVjZXMgYSBuZXcgYFJlYWRvbmx5UmVjb3JkYCBrZWVwaW5nIG9ubHkgdGhlIGVudHJpZXMgd2l0aCBhXG4gKiB2YWx1ZSB0aGF0IHNhdGlzZmllcyB0aGUgcHJvdmlkZWQgcHJlZGljYXRlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaWx0ZXIgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmlsdGVyKChzOiBzdHJpbmcpID0+IHMubGVuZ3RoIDwgNCkoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcInZlcnlsb25nXCIgfSksIHtcbiAqICAgYTogXCJmb29cIixcbiAqICAgYjogXCJiYXJcIixcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZmlsdGVyV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBwcmVkaWNhdGUoYSk7IH0pO1xufTtcbi8qKlxuICogTWFwcyBhIGBSZWFkb25seVJlY29yZGAgd2l0aCBhbiBpdGVyYXRpbmcgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGBPcHRpb25gXG4gKiBhbmQgaXQga2VlcHMgb25seSB0aGUgYFNvbWVgIHZhbHVlcyBkaXNjYXJkaW5nIHRoZSBgTm9uZWBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaWx0ZXJNYXAgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSBcImZwLXRzXCJcbiAqXG4gKiBjb25zdCBmID0gKHM6IHN0cmluZykgPT4gcy5sZW5ndGggPCA0ID8gb3B0aW9uLnNvbWUoYCR7c30gaXMgc2hvcnRgKTogb3B0aW9uLm5vbmVcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmlsdGVyTWFwKGYpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiwgYzogXCJ2ZXJ5bG9uZ1wiIH0pLCB7XG4gKiAgIGE6IFwiZm9vIGlzIHNob3J0XCIsXG4gKiAgIGI6IFwiYmFyIGlzIHNob3J0XCIsXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJNYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmlsdGVyTWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbi8qKlxuICogUGFydGl0aW9uIGEgYFJlYWRvbmx5UmVjb3JkYCBpbnRvIHR3byBwYXJ0cyBhY2NvcmRpbmcgdG8gYSBgUHJlZGljYXRlYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGFydGl0aW9uIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBhcnRpdGlvbigoczogc3RyaW5nKSA9PiBzLmxlbmd0aCA8IDQpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiwgYzogXCJ2ZXJ5bG9uZ1wiIH0pLCB7XG4gKiAgIGxlZnQ6e1xuICogICAgIGM6IFwidmVyeWxvbmdcIlxuICogICB9LFxuICogICByaWdodDoge1xuICogICAgIGE6IFwiZm9vXCIsXG4gKiAgICAgYjogXCJiYXJcIixcbiAqICAgfSxcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbiA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gcGFydGl0aW9uV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBwcmVkaWNhdGUoYSk7IH0pO1xufTtcbi8qKlxuICogTWFwcyBhIGBSZWFkb25seVJlY29yZGAgd2l0aCBhIGZ1bmN0aW9uIHJldHVybmluZyBhbiBgRWl0aGVyYCBhbmRcbiAqIHBhcnRpdGlvbnMgdGhlIHJlc3VsdGluZyBgUmVhZG9ubHlSZWNvcmRgIGludG8gYExlZnRgcyBhbmQgYFJpZ2h0YHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBhcnRpdGlvbk1hcCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKiBpbXBvcnQgeyBlaXRoZXIgfSBmcm9tIFwiZnAtdHNcIlxuICpcbiAqIGNvbnN0IGYgPSAoczogc3RyaW5nKSA9PiAocy5sZW5ndGggPCA0ID8gZWl0aGVyLnJpZ2h0KGAke3N9IGlzIHNob3J0YCkgOiBlaXRoZXIubGVmdChgJHtzfSBpcyBub3Qgc2hvcnRgKSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBhcnRpdGlvbk1hcChmKSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIsIGM6IFwidmVyeWxvbmdcIiB9KSwge1xuICogICBsZWZ0OiB7XG4gKiAgICAgYzogXCJ2ZXJ5bG9uZyBpcyBub3Qgc2hvcnRcIixcbiAqICAgfSxcbiAqICAgcmlnaHQ6IHtcbiAqICAgICBhOiBcImZvbyBpcyBzaG9ydFwiLFxuICogICAgIGI6IFwiYmFyIGlzIHNob3J0XCIsXG4gKiAgIH0sXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2UoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB2YXIgcmVkdWNlV2l0aEluZGV4T18xID0gcmVkdWNlV2l0aEluZGV4KGFyZ3NbMF0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIHJlZHVjZVdpdGhJbmRleE9fMShiLCBmdW5jdGlvbiAoXywgYiwgYSkgeyByZXR1cm4gZihiLCBhKTsgfSk7IH07XG4gICAgfVxuICAgIHJldHVybiByZWR1Y2UoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZm9sZE1hcChPKSB7XG4gICAgaWYgKCdjb21wYXJlJyBpbiBPKSB7XG4gICAgICAgIHZhciBmb2xkTWFwV2l0aEluZGV4T18xID0gZm9sZE1hcFdpdGhJbmRleChPKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChNKSB7XG4gICAgICAgICAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE0gPSBmb2xkTWFwV2l0aEluZGV4T18xKE0pO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmb2xkTWFwV2l0aEluZGV4TShmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmb2xkTWFwKFMuT3JkKShPKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VSaWdodCgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHZhciByZWR1Y2VSaWdodFdpdGhJbmRleE9fMSA9IHJlZHVjZVJpZ2h0V2l0aEluZGV4KGFyZ3NbMF0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4T18xKGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0KFMuT3JkKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufVxuLyoqXG4gKiBDb21wYWN0IGEgYFJlYWRvbmx5UmVjb3JkYCBvZiBgT3B0aW9uYHMgZGlzY2FyZGluZyB0aGUgYE5vbmVgIHZhbHVlcyBhbmRcbiAqIGtlZXBpbmcgdGhlIGBTb21lYCB2YWx1ZXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGNvbXBhY3QgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcGFjdCh7IGE6IG9wdGlvbi5zb21lKFwiZm9vXCIpLCBiOiBvcHRpb24ubm9uZSwgYzogb3B0aW9uLnNvbWUoXCJiYXJcIikgfSksIHtcbiAqICAgYTogXCJmb29cIixcbiAqICAgYzogXCJiYXJcIixcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGNvbXBhY3QgPSBmdW5jdGlvbiAocikge1xuICAgIHZhciBvdXQgPSB7fTtcbiAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgIHZhciBvYSA9IHJba107XG4gICAgICAgICAgICBpZiAoXy5pc1NvbWUob2EpKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdID0gb2EudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIFNlcGFyYXRlIGEgYFJlYWRvbmx5UmVjb3JkYCBvZiBgRWl0aGVyYHMgaW50byBgTGVmdGBzIGFuZCBgUmlnaHRgcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2VwYXJhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqIGltcG9ydCB7IGVpdGhlciB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHNlcGFyYXRlKHsgYTogZWl0aGVyLnJpZ2h0KFwiZm9vXCIpLCBiOiBlaXRoZXIubGVmdChcImJhclwiKSwgYzogZWl0aGVyLnJpZ2h0KFwiYmF6XCIpIH0pLFxuICogICB7XG4gKiAgICAgcmlnaHQ6IHtcbiAqICAgICAgIGE6IFwiZm9vXCIsXG4gKiAgICAgICBjOiBcImJhelwiLFxuICogICAgIH0sXG4gKiAgICAgbGVmdDoge1xuICogICAgICAgYjogXCJiYXJcIixcbiAqICAgICB9LFxuICogICB9XG4gKiApO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNlcGFyYXRlID0gZnVuY3Rpb24gKHIpIHtcbiAgICB2YXIgbGVmdCA9IHt9O1xuICAgIHZhciByaWdodCA9IHt9O1xuICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgdmFyIGUgPSByW2tdO1xuICAgICAgICAgICAgaWYgKF8uaXNMZWZ0KGUpKSB7XG4gICAgICAgICAgICAgICAgbGVmdFtrXSA9IGUubGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJpZ2h0W2tdID0gZS5yaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdSZWFkb25seVJlY29yZCc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hvdyhPKSB7XG4gICAgaWYgKCdjb21wYXJlJyBpbiBPKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gY29sbGVjdChPKShmdW5jdGlvbiAoaywgYSkgeyByZXR1cm4gXCJcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoayksIFwiOiBcIikuY29uY2F0KFMuc2hvdyhhKSk7IH0pKHIpLmpvaW4oJywgJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzID09PSAnJyA/ICd7fScgOiBcInsgXCIuY29uY2F0KGVsZW1lbnRzLCBcIiB9XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIGdldFNob3coUy5PcmQpKE8pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVxKEUpIHtcbiAgICB2YXIgaXNTdWJyZWNvcmRFID0gaXNTdWJyZWNvcmQoRSk7XG4gICAgcmV0dXJuIGZyb21FcXVhbHMoZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGlzU3VicmVjb3JkRSh4KSh5KSAmJiBpc1N1YnJlY29yZEUoeSkoeCk7IH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE1vbm9pZChTKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0VtcHR5KHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgciA9IE9iamVjdC5hc3NpZ24oe30sIGZpcnN0KTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gc2Vjb25kKSB7XG4gICAgICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwoc2Vjb25kLCBrKSkge1xuICAgICAgICAgICAgICAgICAgICByW2tdID0gXy5oYXMuY2FsbChmaXJzdCwgaykgPyBTLmNvbmNhdChmaXJzdFtrXSwgc2Vjb25kW2tdKSA6IHNlY29uZFtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW1wdHk6IGVtcHR5XG4gICAgfTtcbn1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIFRha2VzIGEgdmFsdWUgYW5kIGEgYFJlYWRvbmx5UmVjb3JkYCBvZiBmdW5jdGlvbnMgYW5kIHJldHVybnMgYVxuICogYFJlYWRvbmx5UmVjb3JkYCBieSBhcHBseWluZyBlYWNoIGZ1bmN0aW9uIHRvIHRoZSBpbnB1dCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmxhcCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogY29uc3QgZmFiID0geyB4OiAobjogbnVtYmVyKSA9PiBgJHtufSB0aW1lcyAyYCwgeTogKG46IG51bWJlcikgPT4gYCR7biAqIDJ9YCB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmbGFwKDMpKGZhYiksIHtcbiAqICAgeDogXCIzIHRpbWVzIDJcIixcbiAqICAgeTogXCI2XCIsXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZsYXAgPSAvKiNfX1BVUkVfXyovIGZsYXBfKEZ1bmN0b3IpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIFByb2R1Y2VzIGEgYEZvbGRhYmxlYCBpbnN0YW5jZSBmb3IgYSBgUmVhZG9ubHlSZWNvcmRgLCB1c2luZyB0aGVcbiAqIHByb3ZpZGVkIGBPcmRgIHRvIHNvcnQgdGhlIGBSZWFkb25seVJlY29yZGAncyBlbnRyaWVzIGJ5IGtleS5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldEZvbGRhYmxlID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTylcbn0pOyB9O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBGb2xkYWJsZVdpdGhJbmRleDFgIGluc3RhbmNlIGZvciBhIGBSZWFkb25seVJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlYWRvbmx5UmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rm9sZGFibGVXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UoTyksXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAoTyksXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodChPKSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgoTyksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgoTyksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleChPKVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIENvbXBhY3RhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGaWx0ZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgZmlsdGVyTWFwV2l0aEluZGV4OiBfZmlsdGVyTWFwV2l0aEluZGV4LFxuICAgIGZpbHRlcldpdGhJbmRleDogX2ZpbHRlcldpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IF9wYXJ0aXRpb25NYXBXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uV2l0aEluZGV4OiBfcGFydGl0aW9uV2l0aEluZGV4XG59O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBUcmF2ZXJzYWJsZWAgaW5zdGFuY2UgZm9yIGEgYFJlYWRvbmx5UmVjb3JkYCwgdXNpbmcgdGhlXG4gKiBwcm92aWRlZCBgT3JkYCB0byBzb3J0IHRoZSBgUmVhZG9ubHlSZWNvcmRgJ3MgZW50cmllcyBieSBrZXkuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRUcmF2ZXJzYWJsZSA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UoTyksXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAoTyksXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodChPKSxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlKE8pLFxuICAgIHNlcXVlbmNlOiBfc2VxdWVuY2UoTylcbn0pOyB9O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBUcmF2ZXJzYWJsZVdpdGhJbmRleGAgaW5zdGFuY2UgZm9yIGEgYFJlYWRvbmx5UmVjb3JkYCwgdXNpbmcgdGhlXG4gKiBwcm92aWRlZCBgT3JkYCB0byBzb3J0IHRoZSBgUmVhZG9ubHlSZWNvcmRgJ3MgZW50cmllcyBieSBrZXkuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTyksXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4KE8pLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4KE8pLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoTyksXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZShPKSxcbiAgICBzZXF1ZW5jZTogX3NlcXVlbmNlKE8pLFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXgoTylcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0V2l0aGVyYWJsZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFQgPSBnZXRUcmF2ZXJzYWJsZShPKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBVUkk6IFVSSSxcbiAgICAgICAgbWFwOiBfbWFwLFxuICAgICAgICByZWR1Y2U6IF9yZWR1Y2UoTyksXG4gICAgICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgICAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pLFxuICAgICAgICB0cmF2ZXJzZTogVC50cmF2ZXJzZSxcbiAgICAgICAgc2VxdWVuY2U6IFQuc2VxdWVuY2UsXG4gICAgICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICAgICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgICAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICAgICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgICAgICB3aXRoZXI6IHdpdGhlckRlZmF1bHQoVCwgQ29tcGFjdGFibGUpLFxuICAgICAgICB3aWx0OiB3aWx0RGVmYXVsdChULCBDb21wYWN0YWJsZSlcbiAgICB9O1xufTtcbi8qKlxuICogR2l2ZW4gYSBgU2VtaWdyb3VwYCBpbiB0aGUgYmFzZSB0eXBlLCBpdCBwcm9kdWNlcyBhIGBTZW1pZ3JvdXBgXG4gKiBpbiB0aGUgYFJlYWRvbmx5UmVjb3JkYCBvZiB0aGUgYmFzZSB0eXBlLlxuICogVGhlIHJlc3VsdGluZyBgU2VtaWdyb3VwYCBjb25jYXRlbmF0ZXMgdHdvIGBSZWFkb25seVJlY29yZGBzIGJ5XG4gKiBgdW5pb25gLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRVbmlvblNlbWlncm91cCwgUmVhZG9ubHlSZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgU2VtaWdyb3VwIH0gZnJvbSBcImZwLXRzL1NlbWlncm91cFwiXG4gKlxuICogY29uc3Qgc051bWJlcjogU2VtaWdyb3VwPG51bWJlcj4gPSB7IGNvbmNhdDogKHgsIHkpID0+IHggLSB5IH07XG4gKiBjb25zdCBzUmVhZG9ubHlSZWNvcmQ6IFNlbWlncm91cDxSZWFkb25seVJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0gZ2V0VW5pb25TZW1pZ3JvdXAoc051bWJlcik7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNSZWFkb25seVJlY29yZC5jb25jYXQoeyBhOiAxLCBiOiAyIH0sIHsgYjogMywgYzogNCB9KSwgeyBhOiAxLCBiOiAtMSwgYzogNCB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VW5pb25TZW1pZ3JvdXAgPSBmdW5jdGlvbiAoUykge1xuICAgIHZhciB1bmlvblMgPSB1bmlvbihTKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiB1bmlvblMoc2Vjb25kKShmaXJzdCk7IH1cbiAgICB9O1xufTtcbi8qKlxuICogU2FtZSBhcyBgZ2V0TW9ub2lkYC5cbiAqIFJldHVybnMgYSBgTW9ub2lkYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5UmVjb3JkYHMgZ2l2ZW4gYSBgU2VtaWdyb3VwYFxuICogaW5zdGFuY2UgZm9yIHRoZSBiYXNlIHR5cGUuXG4gKiBUaGUgYE1vbm9pZGAgbWFrZXMgdGhlIHVuaW9uIG9mIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBjb21iaW5pbmcgdGhlXG4gKiBlbnRyaWVzIHRoYXQgaGF2ZSB0aGUgc2FtZSBrZXkgd2l0aCB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFNlbWlncm91cFN1bSB9IGZyb20gJ2ZwLXRzL251bWJlcidcbiAqIGltcG9ydCB7IGdldFVuaW9uTW9ub2lkIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogY29uc3QgTSA9IGdldFVuaW9uTW9ub2lkKFNlbWlncm91cFN1bSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHsgZm9vOiAxMjMsIGJhcjogMjM0IH0sIHsgZm9vOiA0NTYsIGJhejogNTY3IH0pLCB7IGZvbzogNTc5ICwgYmFyOiAyMzQsIGJhejogNTY3IH0pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvbk1vbm9pZCA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZ2V0VW5pb25TZW1pZ3JvdXAoUykuY29uY2F0LFxuICAgIGVtcHR5OiBlbXB0eVxufSk7IH07XG4vKipcbiAqIEdpdmVuIGEgYFNlbWlncm91cGAgaW4gdGhlIGJhc2UgdHlwZSwgaXQgcHJvZHVjZXMgYSBgU2VtaWdyb3VwYFxuICogaW4gdGhlIGBSZWFkb25seVJlY29yZGAgb2YgdGhlIGJhc2UgdHlwZS5cbiAqIFRoZSByZXN1bHRpbmcgYFNlbWlncm91cGAgY29uY2F0ZW5hdGVzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBieVxuICogYGludGVyc2VjdGlvbmAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEludGVyc2VjdGlvblNlbWlncm91cCwgUmVhZG9ubHlSZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgU2VtaWdyb3VwIH0gZnJvbSBcImZwLXRzL1NlbWlncm91cFwiXG4gKlxuICogY29uc3Qgc051bWJlcjogU2VtaWdyb3VwPG51bWJlcj4gPSB7IGNvbmNhdDogKHgsIHkpID0+IHggLSB5IH07XG4gKiBjb25zdCBzUmVhZG9ubHlSZWNvcmQ6IFNlbWlncm91cDxSZWFkb25seVJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0gZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwKHNOdW1iZXIpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzUmVhZG9ubHlSZWNvcmQuY29uY2F0KHsgYTogMSwgYjogMiB9LCB7IGI6IDMsIGM6IDQgfSksIHsgYjogLTEgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldEludGVyc2VjdGlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGludGVyc2VjdGlvblMgPSBpbnRlcnNlY3Rpb24oUyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gaW50ZXJzZWN0aW9uUyhzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBNYWdtYWAgd2l0aCBhIGBjb25jYXRgIGZ1bmN0aW9uIHRoYXQgY29tYmluZXNcbiAqIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBieSBtYWtpbmcgdGhlIGBkaWZmZXJlbmNlYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0RGlmZmVyZW5jZU1hZ21hLCBkaWZmZXJlbmNlLCBSZWFkb25seVJlY29yZCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKiBpbXBvcnQgeyBNYWdtYSB9IGZyb20gXCJmcC10cy9NYWdtYVwiXG4gKlxuICogY29uc3QgcjEgPSB7IGE6IDMsIGM6IDMgfTtcbiAqIGNvbnN0IHIyID0geyBhOiAxLCBiOiAyIH07XG4gKiBjb25zdCBtOiBNYWdtYTxSZWFkb25seVJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0gZ2V0RGlmZmVyZW5jZU1hZ21hPG51bWJlcj4oKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobS5jb25jYXQocjEsIHIyKSwgZGlmZmVyZW5jZShyMikocjEpKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobS5jb25jYXQocjEsIHIyKSwgeyBjOiAzLCBiOiAyIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXREaWZmZXJlbmNlTWFnbWEgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGRpZmZlcmVuY2Uoc2Vjb25kKShmaXJzdCk7IH1cbn0pOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgYGdldEZvbGRhYmxlYCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZClcbn07XG4vKipcbiAqIFVzZSBgZ2V0Rm9sZGFibGVXaXRoSW5kZXhgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVdpdGhJbmRleChTLk9yZCksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfZm9sZE1hcFdpdGhJbmRleChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0V2l0aEluZGV4KFMuT3JkKVxufTtcbi8qKlxuICogVXNlIGBnZXRUcmF2ZXJzYWJsZWAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICB0cmF2ZXJzZTogLyojX19QVVJFX18qLyBfdHJhdmVyc2UoUy5PcmQpLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZVxufTtcbi8qKlxuICogVXNlIGBnZXRUcmF2ZXJzYWJsZVdpdGhJbmRleGAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZCksXG4gICAgcmVkdWNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VXaXRoSW5kZXgoUy5PcmQpLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXBXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodFdpdGhJbmRleChTLk9yZCksXG4gICAgdHJhdmVyc2U6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlKFMuT3JkKSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlV2l0aEluZGV4KFMuT3JkKVxufTtcbnZhciBfd2l0aGVyID0gLyojX19QVVJFX18qLyB3aXRoZXJEZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG52YXIgX3dpbHQgPSAvKiNfX1BVUkVfXyovIHdpbHREZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG4vKipcbiAqIFVzZSBgZ2V0V2l0aGVyYWJsZWAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIFdpdGhlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHRyYXZlcnNlOiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4vKipcbiAqIFVzZSBbYHVwc2VydEF0YF0oI3Vwc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSB1cHNlcnRBdDtcbmV4cG9ydCBmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShrLCByKSB7XG4gICAgcmV0dXJuIF8uaGFzLmNhbGwociA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHIsIGspO1xufVxuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYEZ1bmN0b3JgIGluc3RhbmNlLCBwYXNzIGBSUi5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBSUi5yZWFkb25seVJlY29yZGBcbiAqICh3aGVyZSBgUlJgIGlzIGZyb20gYGltcG9ydCBSUiBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlSZWNvcmQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHRyYXZlcnNlOiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VXaXRoSW5kZXgoUy5PcmQpLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXBXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodFdpdGhJbmRleChTLk9yZCksXG4gICAgZmlsdGVyTWFwV2l0aEluZGV4OiBfZmlsdGVyTWFwV2l0aEluZGV4LFxuICAgIGZpbHRlcldpdGhJbmRleDogX2ZpbHRlcldpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IF9wYXJ0aXRpb25NYXBXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uV2l0aEluZGV4OiBfcGFydGl0aW9uV2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZVdpdGhJbmRleChTLk9yZCksXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuIiwKICAiaW1wb3J0IHsgZnJvbUVxdWFscyB9IGZyb20gJy4vRXEnO1xuaW1wb3J0IHsgZmxvdywgaWRlbnRpdHksIHBpcGUsIFNLIH0gZnJvbSAnLi9mdW5jdGlvbic7XG5pbXBvcnQgeyBmbGFwIGFzIGZsYXBfIH0gZnJvbSAnLi9GdW5jdG9yJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnLi9pbnRlcm5hbCc7XG5pbXBvcnQgeyBzZXBhcmF0ZWQgfSBmcm9tICcuL1NlcGFyYXRlZCc7XG5pbXBvcnQgKiBhcyBTIGZyb20gJy4vc3RyaW5nJztcbmltcG9ydCB7IHdpbHREZWZhdWx0LCB3aXRoZXJEZWZhdWx0IH0gZnJvbSAnLi9XaXRoZXJhYmxlJztcbi8qKlxuICogQnVpbGRzIGEgYFJlYWRvbmx5UmVjb3JkYCBieSBjb3B5aW5nIGEgYFJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFJlYWRvbmx5UmVjb3JkLCBmcm9tUmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBjb25zdCB4OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0geyBhOiAxLCBiOiAyIH07XG4gKiBjb25zdCB5OiBSZWFkb25seVJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSBmcm9tUmVjb3JkKHgpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh4LHkpO1xuICogLy8gYHkuYSA9IDVgIGdpdmVzIGNvbXBpbGVyIGVycm9yXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tUmVjb3JkID0gZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHIpOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBtdXRhYmxlIGBSZWNvcmRgIGZyb20gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBSZWFkb25seVJlY29yZCwgdG9SZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGNvbnN0IHg6IFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHsgYTogMSwgYjogMiB9O1xuICogY29uc3QgeTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHRvUmVjb3JkKHgpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh4LHkpO1xuICogeS5hID0gNTsgLy8gaXQncyBvaywgeSBpcyBtdXRhYmxlXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0b1JlY29yZCA9IGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByKTsgfTtcbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2Yga2V5L3ZhbHVlIHBhaXJzIGluIGEgYFJlYWRvbmx5UmVjb3JkYCxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2l6ZSB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2l6ZSh7IGE6IHRydWUsIGI6IDIsIGM6IFwidGhyZWVcIiB9KSwgMyk7XG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgc2l6ZSA9IGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3Qua2V5cyhyKS5sZW5ndGg7IH07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIGBSZWFkb25seVJlY29yZGAgaXMgZW1wdHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGlzRW1wdHkgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaXNFbXB0eSh7fSksIHRydWUpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpc0VtcHR5KHsgYTogMyB9KSwgZmFsc2UpO1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIChyKSB7XG4gICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59O1xudmFyIGtleXNfID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHIpLnNvcnQoTy5jb21wYXJlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIga2V5cyA9IC8qI19fUFVSRV9fKi8ga2V5c18oUy5PcmQpO1xuZXhwb3J0IGZ1bmN0aW9uIGNvbGxlY3QoTykge1xuICAgIGlmICh0eXBlb2YgTyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gY29sbGVjdChTLk9yZCkoTyk7XG4gICAgfVxuICAgIHZhciBrZXlzTyA9IGtleXNfKE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBrZXlzTyhyKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGYoa2V5LCByW2tleV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfTtcbn1cbi8qKlxuICogR2V0IGEgc29ydGVkIGBSZWFkb25seUFycmF5YCBvZiB0aGUga2V5L3ZhbHVlIHBhaXJzIGNvbnRhaW5lZCBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHRvUmVhZG9ubHlBcnJheSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGNvbnN0IHggPSB7IGM6IDMsIGE6IFwiZm9vXCIsIGI6IGZhbHNlIH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRvUmVhZG9ubHlBcnJheSh4KSwgW1xuICogICBbXCJhXCIsIFwiZm9vXCJdLFxuICogICBbXCJiXCIsIGZhbHNlXSxcbiAqICAgW1wiY1wiLCAzXSxcbiAqIF0pO1xuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdG9SZWFkb25seUFycmF5ID0gXG4vKiNfX1BVUkVfXyovIGNvbGxlY3QoUy5PcmQpKGZ1bmN0aW9uIChrLCBhKSB7IHJldHVybiBbaywgYV07IH0pO1xuZXhwb3J0IGZ1bmN0aW9uIHRvVW5mb2xkYWJsZShVKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBzYXMgPSB0b1JlYWRvbmx5QXJyYXkocik7XG4gICAgICAgIHZhciBsZW4gPSBzYXMubGVuZ3RoO1xuICAgICAgICByZXR1cm4gVS51bmZvbGQoMCwgZnVuY3Rpb24gKGIpIHsgcmV0dXJuIChiIDwgbGVuID8gXy5zb21lKFtzYXNbYl0sIGIgKyAxXSkgOiBfLm5vbmUpOyB9KTtcbiAgICB9O1xufVxuLyoqXG4gKiBJbnNlcnQgb3IgcmVwbGFjZSBhIGtleS92YWx1ZSBwYWlyIGluIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdXBzZXJ0QXQgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwc2VydEF0KFwiYVwiLCA1KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogNSwgYjogMiB9KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBzZXJ0QXQoXCJjXCIsIDUpKHsgYTogMSwgYjogMiB9KSwgeyBhOiAxLCBiOiAyLCBjOiA1IH0pO1xuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB1cHNlcnRBdCA9IGZ1bmN0aW9uIChrLCBhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspICYmIHJba10gPT09IGEpIHtcbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBPYmplY3QuYXNzaWduKHt9LCByKTtcbiAgICAgICAgb3V0W2tdID0gYTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9yIG5vdCBhIGtleSBleGlzdHMgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIE5vdGUuIFRoaXMgZnVuY3Rpb24gaXMgbm90IHBpcGVhYmxlIGJlY2F1c2UgaXMgYSBgUmVmaW5lbWVudGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGhhcyB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaGFzKFwiYVwiLCB7IGE6IDEsIGI6IDIgfSksIHRydWUpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChoYXMoXCJjXCIsIHsgYTogMSwgYjogMiB9KSwgZmFsc2UpO1xuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBoYXMgPSBmdW5jdGlvbiAoaywgcikgeyByZXR1cm4gXy5oYXMuY2FsbChyLCBrKTsgfTtcbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVBdChrKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGlmICghXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IE9iamVjdC5hc3NpZ24oe30sIHIpO1xuICAgICAgICBkZWxldGUgb3V0W2tdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFJlcGxhY2UgYSBrZXkvdmFsdWUgcGFpciBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQHJldHVybnMgSWYgdGhlIHNwZWNpZmllZCBrZXkgZXhpc3RzIGl0IHJldHVybnMgYW4gYE9wdGlvbmAgY29udGFpbmluZyBhIG5ldyBgUmVjb3JkYFxuICogd2l0aCB0aGUgZW50cnkgdXBkYXRlZCwgb3RoZXJ3aXNlIGl0IHJldHVybnMgYE5vbmVgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVwZGF0ZUF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tICdmcC10cydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwZGF0ZUF0KFwiYVwiLCAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5zb21lKHsgYTogMywgYjogMiB9KSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwZGF0ZUF0KFwiY1wiLCAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5ub25lKTtcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChrLCBhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGlmICghaGFzKGssIHIpKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyW2tdID09PSBhKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5zb21lKHIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBPYmplY3QuYXNzaWduKHt9LCByKTtcbiAgICAgICAgb3V0W2tdID0gYTtcbiAgICAgICAgcmV0dXJuIF8uc29tZShvdXQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBsaWVzIGEgbWFwcGluZyBmdW5jdGlvbiB0byBvbmUgc3BlY2lmaWMga2V5L3ZhbHVlIHBhaXIgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEByZXR1cm5zIElmIHRoZSBzcGVjaWZpZWQga2V5IGV4aXN0cyBpdCByZXR1cm5zIGFuIGBPcHRpb25gIGNvbnRhaW5pbmcgYSBuZXcgYFJlY29yZGBcbiAqIHdpdGggdGhlIGVudHJ5IHVwZGF0ZWQsIG90aGVyd2lzZSBpdCByZXR1cm5zIGBOb25lYFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtb2RpZnlBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtb2RpZnlBdChcImFcIiwgKHg6IG51bWJlcikgPT4geCAqIDMpKHsgYTogMSwgYjogMiB9KSwgb3B0aW9uLnNvbWUoeyBhOiAzLCBiOiAyIH0pKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobW9kaWZ5QXQoXCJjXCIsICh4OiBudW1iZXIpID0+IHggKiAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5ub25lKTtcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtb2RpZnlBdCA9IGZ1bmN0aW9uIChrLCBmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGlmICghaGFzKGssIHIpKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXh0ID0gZihyW2tdKTtcbiAgICAgICAgaWYgKG5leHQgPT09IHJba10pIHtcbiAgICAgICAgICAgIHJldHVybiBfLnNvbWUocik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IE9iamVjdC5hc3NpZ24oe30sIHIpO1xuICAgICAgICBvdXRba10gPSBuZXh0O1xuICAgICAgICByZXR1cm4gXy5zb21lKG91dCk7XG4gICAgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gcG9wKGspIHtcbiAgICB2YXIgZGVsZXRlQXRrID0gZGVsZXRlQXQoayk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBvYSA9IGxvb2t1cChrLCByKTtcbiAgICAgICAgcmV0dXJuIF8uaXNOb25lKG9hKSA/IF8ubm9uZSA6IF8uc29tZShbb2EudmFsdWUsIGRlbGV0ZUF0ayhyKV0pO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTdWJyZWNvcmQoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWUsIHRoYXQpIHtcbiAgICAgICAgaWYgKHRoYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGlzU3VicmVjb3JkRV8xID0gaXNTdWJyZWNvcmQoRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRoYXQpIHsgcmV0dXJuIGlzU3VicmVjb3JkRV8xKHRoYXQsIG1lKTsgfTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrIGluIG1lKSB7XG4gICAgICAgICAgICBpZiAoIV8uaGFzLmNhbGwodGhhdCwgaykgfHwgIUUuZXF1YWxzKG1lW2tdLCB0aGF0W2tdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvb2t1cChrLCByKSB7XG4gICAgaWYgKHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHsgcmV0dXJuIGxvb2t1cChrLCByKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIF8uaGFzLmNhbGwociwgaykgPyBfLnNvbWUocltrXSkgOiBfLm5vbmU7XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0ge307XG5leHBvcnQgZnVuY3Rpb24gbWFwV2l0aEluZGV4KGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdID0gZihrLCByW2tdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbWFwKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VXaXRoSW5kZXgoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KFMuT3JkKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgIH1cbiAgICB2YXIga2V5c08gPSBrZXlzXyhhcmdzWzBdKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgb3V0ID0gYjtcbiAgICAgICAgdmFyIGtzID0ga2V5c08oZmEpO1xuICAgICAgICB2YXIgbGVuID0ga3MubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgayA9IGtzW2ldO1xuICAgICAgICAgICAgb3V0ID0gZihrLCBvdXQsIGZhW2tdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07IH07XG59XG5leHBvcnQgZnVuY3Rpb24gZm9sZE1hcFdpdGhJbmRleChPKSB7XG4gICAgaWYgKCdjb21wYXJlJyBpbiBPKSB7XG4gICAgICAgIHZhciBrZXlzT18xID0ga2V5c18oTyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoTSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3V0ID0gTS5lbXB0eTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtzID0ga2V5c09fMShmYSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW4gPSBrcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0ga3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQgPSBNLmNvbmNhdChvdXQsIGYoaywgZmFba10pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZm9sZE1hcFdpdGhJbmRleChTLk9yZCkoTyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlUmlnaHRXaXRoSW5kZXgoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICByZXR1cm4gcmVkdWNlUmlnaHRXaXRoSW5kZXgoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgfVxuICAgIHZhciBrZXlzTyA9IGtleXNfKGFyZ3NbMF0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBvdXQgPSBiO1xuICAgICAgICB2YXIga3MgPSBrZXlzTyhmYSk7XG4gICAgICAgIHZhciBsZW4gPSBrcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgdmFyIGsgPSBrc1tpXTtcbiAgICAgICAgICAgIG91dCA9IGYoaywgZmFba10sIG91dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9OyB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBgUmVhZG9ubHlSZWNvcmRgIHdpdGggb25lIGtleS92YWx1ZSBwYWlyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzaW5nbGV0b24gfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNpbmdsZXRvbihcImFcIiwgMSksIHsgYTogMSB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzaW5nbGV0b24gPSBmdW5jdGlvbiAoaywgYSkge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKF9hID0ge30sIF9hW2tdID0gYSwgX2EpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiB0cmF2ZXJzZVdpdGhJbmRleChGKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4T0YgPSBfdHJhdmVyc2VXaXRoSW5kZXgoUy5PcmQpKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHRhKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleE9GKHRhLCBmKTsgfTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0cmF2ZXJzZShGKSB7XG4gICAgdmFyIHRyYXZlcnNlT0YgPSBfdHJhdmVyc2UoUy5PcmQpKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHRhKSB7IHJldHVybiB0cmF2ZXJzZU9GKHRhLCBmKTsgfTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXF1ZW5jZShGKSB7XG4gICAgcmV0dXJuIF9zZXF1ZW5jZShTLk9yZCkoRik7XG59XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpdGhlciA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLm1hcChwaXBlKGZhLCB0cmF2ZXJzZUYoZikpLCBjb21wYWN0KTsgfTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpbHQgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZUYgPSB0cmF2ZXJzZShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5tYXAocGlwZShmYSwgdHJhdmVyc2VGKGYpKSwgc2VwYXJhdGUpOyB9OyB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgbGVmdCA9IHt9O1xuICAgICAgICB2YXIgcmlnaHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gZihrLCByW2tdKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUuX3RhZykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdMZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRba10gPSBlLmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRba10gPSBlLnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gcGFydGl0aW9uV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgbGVmdCA9IHt9O1xuICAgICAgICB2YXIgcmlnaHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciBhID0gcltrXTtcbiAgICAgICAgICAgICAgICBpZiAocHJlZGljYXRlV2l0aEluZGV4KGssIGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0W2tdID0gYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnRba10gPSBhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlck1hcFdpdGhJbmRleChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciBvYiA9IGYoaywgcltrXSk7XG4gICAgICAgICAgICAgICAgaWYgKF8uaXNTb21lKG9iKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBvYi52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGZhKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChmYSwga2V5KSkge1xuICAgICAgICAgICAgICAgIHZhciBhID0gZmFba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAocHJlZGljYXRlV2l0aEluZGV4KGtleSwgYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tleV0gPSBhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFuZ2VkID8gb3V0IDogZmE7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRm9sZGFibGUoTSwgRikge1xuICAgIHZhciBmcm9tRm9sZGFibGVNYXBNID0gZnJvbUZvbGRhYmxlTWFwKE0sIEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmthKSB7IHJldHVybiBmcm9tRm9sZGFibGVNYXBNKGZrYSwgaWRlbnRpdHkpOyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Gb2xkYWJsZU1hcChNLCBGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikge1xuICAgICAgICByZXR1cm4gRi5yZWR1Y2UodGEsIHt9LCBmdW5jdGlvbiAociwgYSkge1xuICAgICAgICAgICAgdmFyIF9hID0gZihhKSwgayA9IF9hWzBdLCBiID0gX2FbMV07XG4gICAgICAgICAgICByW2tdID0gXy5oYXMuY2FsbChyLCBrKSA/IE0uY29uY2F0KHJba10sIGIpIDogYjtcbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuLyoqXG4gKiBBbGlhcyBvZiBbYHRvUmVhZG9ubHlBcnJheWBdKCN0b3JlYWRvbmx5YXJyYXkpLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB0b0VudHJpZXMgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRvRW50cmllcyh7IGI6IDIsIGE6IDEgfSksIFtbJ2EnLCAxXSwgWydiJywgMl1dKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMTIuMFxuICovXG5leHBvcnQgdmFyIHRvRW50cmllcyA9IHRvUmVhZG9ubHlBcnJheTtcbi8qKlxuICogQ29udmVydHMgYSBgUmVhZG9ubHlBcnJheWAgb2YgYFtrZXksIHZhbHVlXWAgdHVwbGVzIGludG8gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmcm9tRW50cmllcyB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbUVudHJpZXMoW1snYScsIDFdLCBbJ2InLCAyXSwgWydhJywgM11dKSwgeyBiOiAyLCBhOiAzIH0pXG4gKlxuICogQHNpbmNlIDIuMTIuMFxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVudHJpZXMgPSBmdW5jdGlvbiAoZmEpIHtcbiAgICB2YXIgb3V0ID0ge307XG4gICAgZm9yICh2YXIgX2kgPSAwLCBmYV8xID0gZmE7IF9pIDwgZmFfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGEgPSBmYV8xW19pXTtcbiAgICAgICAgb3V0W2FbMF1dID0gYVsxXTtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn07XG5leHBvcnQgZnVuY3Rpb24gZXZlcnkocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKCFwcmVkaWNhdGUocltrXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbi8qKlxuICogVGVzdCBpZiBhdCBsZWFzdCBvbmUgdmFsdWUgaW4gYSBgUmVhZG9ubHlSZWNvcmRgIHNhdGlzZmllcyB0aGUgcHJlZGljYXRlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvbWUoKG46IG51bWJlcikgPT4gbiA+PSAwKSh7IGE6IDEsIGI6IC0yIH0pLCB0cnVlKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29tZSgobjogbnVtYmVyKSA9PiBuID49IDApKHsgYTogLTEsIGI6IC0yIH0pLCBmYWxzZSk7XG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb21lKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUocltrXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbGVtKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGZhKSB7XG4gICAgICAgIGlmIChmYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZWxlbUVfMSA9IGVsZW0oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBlbGVtRV8xKGEsIGZhKTsgfTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrIGluIGZhKSB7XG4gICAgICAgICAgICBpZiAoRS5lcXVhbHMoZmFba10sIGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG4vKipcbiAqIFVuaW9uIG9mIHR3byBgUmVhZG9ubHlSZWNvcmRgcy5cbiAqIFRha2VzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBhbmQgcHJvZHVjZXMgYSBgUmVhZG9ubHlSZWNvcmRgIGNvbWJpbmluZyBhbGwgdGhlXG4gKiBlbnRyaWVzIG9mIHRoZSB0d28gaW5wdXRzLlxuICogSXQgdXNlcyB0aGUgYGNvbmNhdGAgZnVuY3Rpb24gb2YgdGhlIHByb3ZpZGVkIGBNYWdtYWAgdG9cbiAqIGNvbWJpbmUgdGhlIGVsZW1lbnRzIHdpdGggdGhlIHNhbWUga2V5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1bmlvbiB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiO1xuICogaW1wb3J0IHsgTWFnbWEgfSBmcm9tIFwiZnAtdHMvTWFnbWFcIjtcbiAqXG4gKiBjb25zdCBtMTogTWFnbWE8bnVtYmVyPiA9IHsgY29uY2F0OiAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IHggKyB5IH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuaW9uKG0xKSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDQsIGI6IDIsIGM6IDMgfSk7XG4gKiBjb25zdCBtMjogTWFnbWE8bnVtYmVyPiA9IHsgY29uY2F0OiAoeDogbnVtYmVyKSA9PiB4IH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuaW9uKG0yKSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDEsIGI6IDIsIGM6IDMgfSk7XG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaW9uID0gZnVuY3Rpb24gKE0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShmaXJzdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Vjb25kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRW1wdHkoc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gZmlyc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzKGssIHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tdID0gTS5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBmaXJzdFtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIHNlY29uZCkge1xuICAgICAgICAgICAgICAgIGlmICghaGFzKGssIG91dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tdID0gc2Vjb25kW2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEludGVyc2VjdGlvbiBvZiB0d28gYFJlYWRvbmx5UmVjb3JkYHMuXG4gKiBUYWtlcyB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYW5kIHByb2R1Y2VzIGEgYFJlYWRvbmx5UmVjb3JkYCBjb21iaW5pbmcgb25seSB0aGVcbiAqIGVudHJpZXMgb2YgdGhlIHR3byBpbnB1dHN3aXRoIHRoZSBzYW1lIGtleS5cbiAqIEl0IHVzZXMgdGhlIGBjb25jYXRgIGZ1bmN0aW9uIG9mIHRoZSBwcm92aWRlZCBgTWFnbWFgIHRvXG4gKiBjb21iaW5lIHRoZSBlbGVtZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaW50ZXJzZWN0aW9uIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCI7XG4gKiBpbXBvcnQgeyBNYWdtYSB9IGZyb20gXCJmcC10cy9NYWdtYVwiO1xuICpcbiAqIGNvbnN0IG0xOiBNYWdtYTxudW1iZXI+ID0geyBjb25jYXQ6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4geCArIHkgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW50ZXJzZWN0aW9uKG0xKSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDR9KTtcbiAqIGNvbnN0IG0yOiBNYWdtYTxudW1iZXI+ID0geyBjb25jYXQ6ICh4OiBudW1iZXIpID0+IHggfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW50ZXJzZWN0aW9uKG0yKSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDF9KTtcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgaW50ZXJzZWN0aW9uID0gZnVuY3Rpb24gKE0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShmaXJzdCkgfHwgaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBmaXJzdCkge1xuICAgICAgICAgICAgICAgIGlmIChoYXMoaywgc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBNLmNvbmNhdChmaXJzdFtrXSwgc2Vjb25kW2tdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBEaWZmZXJlbmNlIGJldHdlZW4gdHdvIGBSZWFkb25seVJlY29yZGBzLlxuICogVGFrZXMgdHdvIGBSZWFkb25seVJlY29yZGBzIGFuZCBwcm9kdWNlcyBhIGBSZWFkb25seVJlY29yZGAgY29tcG9zZWQgYnkgdGhlXG4gKiBlbnRyaWVzIG9mIHRoZSB0d28gaW5wdXRzLCByZW1vdmluZyB0aGUgZW50cmllcyB3aXRoIHRoZSBzYW1lXG4gKiBrZXkgaW4gYm90aCBpbnB1dHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGRpZmZlcmVuY2UgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRpZmZlcmVuY2UoeyBhOiAxIH0pKHsgYTogMSwgYjogMiB9KSwgeyBiOiAyIH0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkaWZmZXJlbmNlKHsgYTogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYjogMiB9KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZGlmZmVyZW5jZSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGI6IDIsIGM6IDMgfSk7XG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGRpZmZlcmVuY2UgPSBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICBpZiAoaXNFbXB0eShmaXJzdCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWNvbmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRW1wdHkoc2Vjb25kKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiBmaXJzdCkge1xuICAgICAgICAgICAgaWYgKCFoYXMoaywgc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IGZpcnN0W2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGsgaW4gc2Vjb25kKSB7XG4gICAgICAgICAgICBpZiAoIWhhcyhrLCBmaXJzdCkpIHtcbiAgICAgICAgICAgICAgICBvdXRba10gPSBzZWNvbmRba107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9tYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIG1hcFdpdGhJbmRleChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcmVkdWNlID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgcmVkdWNlTyA9IHJlZHVjZShPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VPKGIsIGYpKTsgfTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIF9mb2xkTWFwID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuIGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBNID0gZm9sZE1hcChPKShNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwTShmKSk7IH07XG59OyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgcmVkdWNlUmlnaHRPID0gcmVkdWNlUmlnaHQoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRPKGIsIGYpKTsgfTtcbn07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfZmlsdGVyID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgZmlsdGVyKHByZWRpY2F0ZSkpO1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9maWx0ZXJNYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlck1hcChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcGFydGl0aW9uID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbihwcmVkaWNhdGUpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9wYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbk1hcChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgcmVkdWNlV2l0aEluZGV4TyA9IHJlZHVjZVdpdGhJbmRleChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VXaXRoSW5kZXhPKGIsIGYpKTsgfTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIF9mb2xkTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE8gPSBmb2xkTWFwV2l0aEluZGV4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoTSkge1xuICAgICAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE0gPSBmb2xkTWFwV2l0aEluZGV4TyhNKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcFdpdGhJbmRleE0oZikpOyB9O1xuICAgIH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3JlZHVjZVJpZ2h0V2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXhPID0gcmVkdWNlUmlnaHRXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXhPKGIsIGYpKTsgfTtcbn07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcGFydGl0aW9uTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3BhcnRpdGlvbldpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpKTtcbn07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfZmlsdGVyTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXBXaXRoSW5kZXgoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX2ZpbHRlcldpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlV2l0aEluZGV4KSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJXaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSk7IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4TyA9IF90cmF2ZXJzZVdpdGhJbmRleChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKEYpIHtcbiAgICAgICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4T0YgPSB0cmF2ZXJzZVdpdGhJbmRleE8oRik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4T0YodGEsIGZsb3coU0ssIGYpKTsgfTtcbiAgICB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX3NlcXVlbmNlID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgdHJhdmVyc2VPID0gX3RyYXZlcnNlKE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoRikge1xuICAgICAgICB2YXIgdHJhdmVyc2VPRiA9IHRyYXZlcnNlTyhGKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkgeyByZXR1cm4gdHJhdmVyc2VPRih0YSwgaWRlbnRpdHkpOyB9O1xuICAgIH07XG59O1xudmFyIF90cmF2ZXJzZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciBrZXlzTyA9IGtleXNfKE8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7XG4gICAgICAgICAgICB2YXIga3MgPSBrZXlzTyh0YSk7XG4gICAgICAgICAgICBpZiAoa3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEYub2YoZW1wdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZyID0gRi5vZih7fSk7XG4gICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBmciA9IEYuYXAoRi5tYXAoZnIsIGZ1bmN0aW9uIChyKSB7IHJldHVybiBmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByLCAoX2EgPSB7fSwgX2Fba2V5XSA9IGIsIF9hKSk7XG4gICAgICAgICAgICAgICAgfTsgfSksIGYoa2V5LCB0YVtrZXldKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBrc18xID0ga3M7IF9pIDwga3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0ga3NfMVtfaV07XG4gICAgICAgICAgICAgICAgX2xvb3BfMShrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZyO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBHaXZlbiBhIGBQcmVkaWNhdGVgLCBpdCBwcm9kdWNlcyBhIG5ldyBgUmVhZG9ubHlSZWNvcmRgIGtlZXBpbmcgb25seSB0aGUgZW50cmllcyB3aXRoIGFcbiAqIHZhbHVlIHRoYXQgc2F0aXNmaWVzIHRoZSBwcm92aWRlZCBwcmVkaWNhdGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZpbHRlciB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaWx0ZXIoKHM6IHN0cmluZykgPT4gcy5sZW5ndGggPCA0KSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIsIGM6IFwidmVyeWxvbmdcIiB9KSwge1xuICogICBhOiBcImZvb1wiLFxuICogICBiOiBcImJhclwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmaWx0ZXJXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIHByZWRpY2F0ZShhKTsgfSk7XG59O1xuLyoqXG4gKiBNYXBzIGEgYFJlYWRvbmx5UmVjb3JkYCB3aXRoIGFuIGl0ZXJhdGluZyBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gYE9wdGlvbmBcbiAqIGFuZCBpdCBrZWVwcyBvbmx5IHRoZSBgU29tZWAgdmFsdWVzIGRpc2NhcmRpbmcgdGhlIGBOb25lYHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZpbHRlck1hcCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tIFwiZnAtdHNcIlxuICpcbiAqIGNvbnN0IGYgPSAoczogc3RyaW5nKSA9PiBzLmxlbmd0aCA8IDQgPyBvcHRpb24uc29tZShgJHtzfSBpcyBzaG9ydGApOiBvcHRpb24ubm9uZVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaWx0ZXJNYXAoZikoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcInZlcnlsb25nXCIgfSksIHtcbiAqICAgYTogXCJmb28gaXMgc2hvcnRcIixcbiAqICAgYjogXCJiYXIgaXMgc2hvcnRcIixcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlck1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmaWx0ZXJNYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xuLyoqXG4gKiBQYXJ0aXRpb24gYSBgUmVhZG9ubHlSZWNvcmRgIGludG8gdHdvIHBhcnRzIGFjY29yZGluZyB0byBhIGBQcmVkaWNhdGVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwYXJ0aXRpb24gfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGFydGl0aW9uKChzOiBzdHJpbmcpID0+IHMubGVuZ3RoIDwgNCkoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcInZlcnlsb25nXCIgfSksIHtcbiAqICAgbGVmdDp7XG4gKiAgICAgYzogXCJ2ZXJ5bG9uZ1wiXG4gKiAgIH0sXG4gKiAgIHJpZ2h0OiB7XG4gKiAgICAgYTogXCJmb29cIixcbiAqICAgICBiOiBcImJhclwiLFxuICogICB9LFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwYXJ0aXRpb25XaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIHByZWRpY2F0ZShhKTsgfSk7XG59O1xuLyoqXG4gKiBNYXBzIGEgYFJlYWRvbmx5UmVjb3JkYCB3aXRoIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGFuIGBFaXRoZXJgIGFuZFxuICogcGFydGl0aW9ucyB0aGUgcmVzdWx0aW5nIGBSZWFkb25seVJlY29yZGAgaW50byBgTGVmdGBzIGFuZCBgUmlnaHRgcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGFydGl0aW9uTWFwIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IGVpdGhlciB9IGZyb20gXCJmcC10c1wiXG4gKlxuICogY29uc3QgZiA9IChzOiBzdHJpbmcpID0+IChzLmxlbmd0aCA8IDQgPyBlaXRoZXIucmlnaHQoYCR7c30gaXMgc2hvcnRgKSA6IGVpdGhlci5sZWZ0KGAke3N9IGlzIG5vdCBzaG9ydGApKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGFydGl0aW9uTWFwKGYpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiwgYzogXCJ2ZXJ5bG9uZ1wiIH0pLCB7XG4gKiAgIGxlZnQ6IHtcbiAqICAgICBjOiBcInZlcnlsb25nIGlzIG5vdCBzaG9ydFwiLFxuICogICB9LFxuICogICByaWdodDoge1xuICogICAgIGE6IFwiZm9vIGlzIHNob3J0XCIsXG4gKiAgICAgYjogXCJiYXIgaXMgc2hvcnRcIixcbiAqICAgfSxcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIHBhcnRpdGlvbk1hcFdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZSgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHZhciByZWR1Y2VXaXRoSW5kZXhPXzEgPSByZWR1Y2VXaXRoSW5kZXgoYXJnc1swXSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gcmVkdWNlV2l0aEluZGV4T18xKGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlZHVjZShTLk9yZCkuYXBwbHkodm9pZCAwLCBhcmdzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb2xkTWFwKE8pIHtcbiAgICBpZiAoJ2NvbXBhcmUnIGluIE8pIHtcbiAgICAgICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhPXzEgPSBmb2xkTWFwV2l0aEluZGV4KE8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKE0pIHtcbiAgICAgICAgICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TSA9IGZvbGRNYXBXaXRoSW5kZXhPXzEoTSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZvbGRNYXBXaXRoSW5kZXhNKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZvbGRNYXAoUy5PcmQpKE8pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVJpZ2h0KCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdmFyIHJlZHVjZVJpZ2h0V2l0aEluZGV4T18xID0gcmVkdWNlUmlnaHRXaXRoSW5kZXgoYXJnc1swXSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gcmVkdWNlUmlnaHRXaXRoSW5kZXhPXzEoYiwgZnVuY3Rpb24gKF8sIGIsIGEpIHsgcmV0dXJuIGYoYiwgYSk7IH0pOyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVkdWNlUmlnaHQoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG59XG4vKipcbiAqIENvbXBhY3QgYSBgUmVhZG9ubHlSZWNvcmRgIG9mIGBPcHRpb25gcyBkaXNjYXJkaW5nIHRoZSBgTm9uZWAgdmFsdWVzIGFuZFxuICoga2VlcGluZyB0aGUgYFNvbWVgIHZhbHVlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29tcGFjdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wYWN0KHsgYTogb3B0aW9uLnNvbWUoXCJmb29cIiksIGI6IG9wdGlvbi5ub25lLCBjOiBvcHRpb24uc29tZShcImJhclwiKSB9KSwge1xuICogICBhOiBcImZvb1wiLFxuICogICBjOiBcImJhclwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY29tcGFjdCA9IGZ1bmN0aW9uIChyKSB7XG4gICAgdmFyIG91dCA9IHt9O1xuICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgdmFyIG9hID0gcltrXTtcbiAgICAgICAgICAgIGlmIChfLmlzU29tZShvYSkpIHtcbiAgICAgICAgICAgICAgICBvdXRba10gPSBvYS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogU2VwYXJhdGUgYSBgUmVhZG9ubHlSZWNvcmRgIG9mIGBFaXRoZXJgcyBpbnRvIGBMZWZ0YHMgYW5kIGBSaWdodGBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzZXBhcmF0ZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICogaW1wb3J0IHsgZWl0aGVyIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgc2VwYXJhdGUoeyBhOiBlaXRoZXIucmlnaHQoXCJmb29cIiksIGI6IGVpdGhlci5sZWZ0KFwiYmFyXCIpLCBjOiBlaXRoZXIucmlnaHQoXCJiYXpcIikgfSksXG4gKiAgIHtcbiAqICAgICByaWdodDoge1xuICogICAgICAgYTogXCJmb29cIixcbiAqICAgICAgIGM6IFwiYmF6XCIsXG4gKiAgICAgfSxcbiAqICAgICBsZWZ0OiB7XG4gKiAgICAgICBiOiBcImJhclwiLFxuICogICAgIH0sXG4gKiAgIH1cbiAqICk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgc2VwYXJhdGUgPSBmdW5jdGlvbiAocikge1xuICAgIHZhciBsZWZ0ID0ge307XG4gICAgdmFyIHJpZ2h0ID0ge307XG4gICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHJba107XG4gICAgICAgICAgICBpZiAoXy5pc0xlZnQoZSkpIHtcbiAgICAgICAgICAgICAgICBsZWZ0W2tdID0gZS5sZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmlnaHRba10gPSBlLnJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5UmVjb3JkJztcbmV4cG9ydCBmdW5jdGlvbiBnZXRTaG93KE8pIHtcbiAgICBpZiAoJ2NvbXBhcmUnIGluIE8pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBjb2xsZWN0KE8pKGZ1bmN0aW9uIChrLCBhKSB7IHJldHVybiBcIlwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShrKSwgXCI6IFwiKS5jb25jYXQoUy5zaG93KGEpKTsgfSkocikuam9pbignLCAnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudHMgPT09ICcnID8gJ3t9JyA6IFwieyBcIi5jb25jYXQoZWxlbWVudHMsIFwiIH1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pOyB9O1xuICAgIH1cbiAgICByZXR1cm4gZ2V0U2hvdyhTLk9yZCkoTyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RXEoRSkge1xuICAgIHZhciBpc1N1YnJlY29yZEUgPSBpc1N1YnJlY29yZChFKTtcbiAgICByZXR1cm4gZnJvbUVxdWFscyhmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gaXNTdWJyZWNvcmRFKHgpKHkpICYmIGlzU3VicmVjb3JkRSh5KSh4KTsgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9ub2lkKFMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShmaXJzdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Vjb25kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRW1wdHkoc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByID0gT2JqZWN0LmFzc2lnbih7fSwgZmlyc3QpO1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBzZWNvbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChzZWNvbmQsIGspKSB7XG4gICAgICAgICAgICAgICAgICAgIHJba10gPSBfLmhhcy5jYWxsKGZpcnN0LCBrKSA/IFMuY29uY2F0KGZpcnN0W2tdLCBzZWNvbmRba10pIDogc2Vjb25kW2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9LFxuICAgICAgICBlbXB0eTogZW1wdHlcbiAgICB9O1xufVxuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogVGFrZXMgYSB2YWx1ZSBhbmQgYSBgUmVhZG9ubHlSZWNvcmRgIG9mIGZ1bmN0aW9ucyBhbmQgcmV0dXJucyBhXG4gKiBgUmVhZG9ubHlSZWNvcmRgIGJ5IGFwcGx5aW5nIGVhY2ggZnVuY3Rpb24gdG8gdGhlIGlucHV0IHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmbGFwIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBjb25zdCBmYWIgPSB7IHg6IChuOiBudW1iZXIpID0+IGAke259IHRpbWVzIDJgLCB5OiAobjogbnVtYmVyKSA9PiBgJHtuICogMn1gIH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZsYXAoMykoZmFiKSwge1xuICogICB4OiBcIjMgdGltZXMgMlwiLFxuICogICB5OiBcIjZcIixcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhcCA9IC8qI19fUFVSRV9fKi8gZmxhcF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3JXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleFxufTtcbi8qKlxuICogUHJvZHVjZXMgYSBgRm9sZGFibGVgIGluc3RhbmNlIGZvciBhIGBSZWFkb25seVJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlYWRvbmx5UmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rm9sZGFibGUgPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UoTyksXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAoTyksXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodChPKVxufSk7IH07XG4vKipcbiAqIFByb2R1Y2VzIGEgYEZvbGRhYmxlV2l0aEluZGV4MWAgaW5zdGFuY2UgZm9yIGEgYFJlYWRvbmx5UmVjb3JkYCwgdXNpbmcgdGhlXG4gKiBwcm92aWRlZCBgT3JkYCB0byBzb3J0IHRoZSBgUmVhZG9ubHlSZWNvcmRgJ3MgZW50cmllcyBieSBrZXkuXG4gKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRGb2xkYWJsZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZShPKSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcChPKSxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleChPKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleChPKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4KE8pXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29tcGFjdGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGVcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRmlsdGVyYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IF9maWx0ZXJNYXBXaXRoSW5kZXgsXG4gICAgZmlsdGVyV2l0aEluZGV4OiBfZmlsdGVyV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbk1hcFdpdGhJbmRleDogX3BhcnRpdGlvbk1hcFdpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25XaXRoSW5kZXg6IF9wYXJ0aXRpb25XaXRoSW5kZXhcbn07XG4vKipcbiAqIFByb2R1Y2VzIGEgYFRyYXZlcnNhYmxlYCBpbnN0YW5jZSBmb3IgYSBgUmVhZG9ubHlSZWNvcmRgLCB1c2luZyB0aGVcbiAqIHByb3ZpZGVkIGBPcmRgIHRvIHNvcnQgdGhlIGBSZWFkb25seVJlY29yZGAncyBlbnRyaWVzIGJ5IGtleS5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFRyYXZlcnNhYmxlID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZShPKSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcChPKSxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pLFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UoTyksXG4gICAgc2VxdWVuY2U6IF9zZXF1ZW5jZShPKVxufSk7IH07XG4vKipcbiAqIFByb2R1Y2VzIGEgYFRyYXZlcnNhYmxlV2l0aEluZGV4YCBpbnN0YW5jZSBmb3IgYSBgUmVhZG9ubHlSZWNvcmRgLCB1c2luZyB0aGVcbiAqIHByb3ZpZGVkIGBPcmRgIHRvIHNvcnQgdGhlIGBSZWFkb25seVJlY29yZGAncyBlbnRyaWVzIGJ5IGtleS5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFRyYXZlcnNhYmxlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UoTyksXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAoTyksXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodChPKSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgoTyksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgoTyksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleChPKSxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlKE8pLFxuICAgIHNlcXVlbmNlOiBfc2VxdWVuY2UoTyksXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleChPKVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRXaXRoZXJhYmxlID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgVCA9IGdldFRyYXZlcnNhYmxlKE8pO1xuICAgIHJldHVybiB7XG4gICAgICAgIFVSSTogVVJJLFxuICAgICAgICBtYXA6IF9tYXAsXG4gICAgICAgIHJlZHVjZTogX3JlZHVjZShPKSxcbiAgICAgICAgZm9sZE1hcDogX2ZvbGRNYXAoTyksXG4gICAgICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTyksXG4gICAgICAgIHRyYXZlcnNlOiBULnRyYXZlcnNlLFxuICAgICAgICBzZXF1ZW5jZTogVC5zZXF1ZW5jZSxcbiAgICAgICAgY29tcGFjdDogY29tcGFjdCxcbiAgICAgICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgICAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICAgICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgICAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgICAgIHdpdGhlcjogd2l0aGVyRGVmYXVsdChULCBDb21wYWN0YWJsZSksXG4gICAgICAgIHdpbHQ6IHdpbHREZWZhdWx0KFQsIENvbXBhY3RhYmxlKVxuICAgIH07XG59O1xuLyoqXG4gKiBHaXZlbiBhIGBTZW1pZ3JvdXBgIGluIHRoZSBiYXNlIHR5cGUsIGl0IHByb2R1Y2VzIGEgYFNlbWlncm91cGBcbiAqIGluIHRoZSBgUmVhZG9ubHlSZWNvcmRgIG9mIHRoZSBiYXNlIHR5cGUuXG4gKiBUaGUgcmVzdWx0aW5nIGBTZW1pZ3JvdXBgIGNvbmNhdGVuYXRlcyB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYnlcbiAqIGB1bmlvbmAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldFVuaW9uU2VtaWdyb3VwLCBSZWFkb25seVJlY29yZCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXAgfSBmcm9tIFwiZnAtdHMvU2VtaWdyb3VwXCJcbiAqXG4gKiBjb25zdCBzTnVtYmVyOiBTZW1pZ3JvdXA8bnVtYmVyPiA9IHsgY29uY2F0OiAoeCwgeSkgPT4geCAtIHkgfTtcbiAqIGNvbnN0IHNSZWFkb25seVJlY29yZDogU2VtaWdyb3VwPFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPj4gPSBnZXRVbmlvblNlbWlncm91cChzTnVtYmVyKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc1JlYWRvbmx5UmVjb3JkLmNvbmNhdCh7IGE6IDEsIGI6IDIgfSwgeyBiOiAzLCBjOiA0IH0pLCB7IGE6IDEsIGI6IC0xLCBjOiA0IH0pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIHVuaW9uUyA9IHVuaW9uKFMpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uUyhzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBTYW1lIGFzIGBnZXRNb25vaWRgLlxuICogUmV0dXJucyBhIGBNb25vaWRgIGluc3RhbmNlIGZvciBgUmVhZG9ubHlSZWNvcmRgcyBnaXZlbiBhIGBTZW1pZ3JvdXBgXG4gKiBpbnN0YW5jZSBmb3IgdGhlIGJhc2UgdHlwZS5cbiAqIFRoZSBgTW9ub2lkYCBtYWtlcyB0aGUgdW5pb24gb2YgdHdvIGBSZWFkb25seVJlY29yZGBzIGNvbWJpbmluZyB0aGVcbiAqIGVudHJpZXMgdGhhdCBoYXZlIHRoZSBzYW1lIGtleSB3aXRoIHRoZSBwcm92aWRlZCBgU2VtaWdyb3VwYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgU2VtaWdyb3VwU3VtIH0gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgZ2V0VW5pb25Nb25vaWQgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBjb25zdCBNID0gZ2V0VW5pb25Nb25vaWQoU2VtaWdyb3VwU3VtKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoeyBmb286IDEyMywgYmFyOiAyMzQgfSwgeyBmb286IDQ1NiwgYmF6OiA1NjcgfSksIHsgZm9vOiA1NzkgLCBiYXI6IDIzNCwgYmF6OiA1NjcgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFVuaW9uTW9ub2lkID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRVbmlvblNlbWlncm91cChTKS5jb25jYXQsXG4gICAgZW1wdHk6IGVtcHR5XG59KTsgfTtcbi8qKlxuICogR2l2ZW4gYSBgU2VtaWdyb3VwYCBpbiB0aGUgYmFzZSB0eXBlLCBpdCBwcm9kdWNlcyBhIGBTZW1pZ3JvdXBgXG4gKiBpbiB0aGUgYFJlYWRvbmx5UmVjb3JkYCBvZiB0aGUgYmFzZSB0eXBlLlxuICogVGhlIHJlc3VsdGluZyBgU2VtaWdyb3VwYCBjb25jYXRlbmF0ZXMgdHdvIGBSZWFkb25seVJlY29yZGBzIGJ5XG4gKiBgaW50ZXJzZWN0aW9uYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwLCBSZWFkb25seVJlY29yZCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXAgfSBmcm9tIFwiZnAtdHMvU2VtaWdyb3VwXCJcbiAqXG4gKiBjb25zdCBzTnVtYmVyOiBTZW1pZ3JvdXA8bnVtYmVyPiA9IHsgY29uY2F0OiAoeCwgeSkgPT4geCAtIHkgfTtcbiAqIGNvbnN0IHNSZWFkb25seVJlY29yZDogU2VtaWdyb3VwPFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPj4gPSBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAoc051bWJlcik7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNSZWFkb25seVJlY29yZC5jb25jYXQoeyBhOiAxLCBiOiAyIH0sIHsgYjogMywgYzogNCB9KSwgeyBiOiAtMSB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwID0gZnVuY3Rpb24gKFMpIHtcbiAgICB2YXIgaW50ZXJzZWN0aW9uUyA9IGludGVyc2VjdGlvbihTKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBpbnRlcnNlY3Rpb25TKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG4vKipcbiAqIFByb2R1Y2VzIGEgYE1hZ21hYCB3aXRoIGEgYGNvbmNhdGAgZnVuY3Rpb24gdGhhdCBjb21iaW5lc1xuICogdHdvIGBSZWFkb25seVJlY29yZGBzIGJ5IG1ha2luZyB0aGUgYGRpZmZlcmVuY2VgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXREaWZmZXJlbmNlTWFnbWEsIGRpZmZlcmVuY2UsIFJlYWRvbmx5UmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IE1hZ21hIH0gZnJvbSBcImZwLXRzL01hZ21hXCJcbiAqXG4gKiBjb25zdCByMSA9IHsgYTogMywgYzogMyB9O1xuICogY29uc3QgcjIgPSB7IGE6IDEsIGI6IDIgfTtcbiAqIGNvbnN0IG06IE1hZ21hPFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPj4gPSBnZXREaWZmZXJlbmNlTWFnbWE8bnVtYmVyPigpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtLmNvbmNhdChyMSwgcjIpLCBkaWZmZXJlbmNlKHIyKShyMSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtLmNvbmNhdChyMSwgcjIpLCB7IGM6IDMsIGI6IDIgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldERpZmZlcmVuY2VNYWdtYSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZGlmZmVyZW5jZShzZWNvbmQpKGZpcnN0KTsgfVxufSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFVzZSBgZ2V0Rm9sZGFibGVgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKVxufTtcbi8qKlxuICogVXNlIGBnZXRGb2xkYWJsZVdpdGhJbmRleGAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHJlZHVjZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlV2l0aEluZGV4KFMuT3JkKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwV2l0aEluZGV4KFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoUy5PcmQpXG59O1xuLyoqXG4gKiBVc2UgYGdldFRyYXZlcnNhYmxlYCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHRyYXZlcnNlOiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBVc2UgYGdldFRyYXZlcnNhYmxlV2l0aEluZGV4YCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVdpdGhJbmRleChTLk9yZCksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfZm9sZE1hcFdpdGhJbmRleChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0V2l0aEluZGV4KFMuT3JkKSxcbiAgICB0cmF2ZXJzZTogLyojX19QVVJFX18qLyBfdHJhdmVyc2UoUy5PcmQpLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfdHJhdmVyc2VXaXRoSW5kZXgoUy5PcmQpXG59O1xudmFyIF93aXRoZXIgPSAvKiNfX1BVUkVfXyovIHdpdGhlckRlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbnZhciBfd2lsdCA9IC8qI19fUFVSRV9fKi8gd2lsdERlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbi8qKlxuICogVXNlIGBnZXRXaXRoZXJhYmxlYCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgV2l0aGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZCksXG4gICAgdHJhdmVyc2U6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlKFMuT3JkKSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbi8qKlxuICogVXNlIFtgdXBzZXJ0QXRgXSgjdXBzZXJ0YXQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBpbnNlcnRBdCA9IHVwc2VydEF0O1xuZXhwb3J0IGZ1bmN0aW9uIGhhc093blByb3BlcnR5KGssIHIpIHtcbiAgICByZXR1cm4gXy5oYXMuY2FsbChyID09PSB1bmRlZmluZWQgPyB0aGlzIDogciwgayk7XG59XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJSLkZ1bmN0b3JgIGluc3RlYWQgb2YgYFJSLnJlYWRvbmx5UmVjb3JkYFxuICogKHdoZXJlIGBSUmAgaXMgZnJvbSBgaW1wb3J0IFJSIGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciByZWFkb25seVJlY29yZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZCksXG4gICAgdHJhdmVyc2U6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlKFMuT3JkKSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVdpdGhJbmRleChTLk9yZCksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfZm9sZE1hcFdpdGhJbmRleChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0V2l0aEluZGV4KFMuT3JkKSxcbiAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IF9maWx0ZXJNYXBXaXRoSW5kZXgsXG4gICAgZmlsdGVyV2l0aEluZGV4OiBfZmlsdGVyV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbk1hcFdpdGhJbmRleDogX3BhcnRpdGlvbk1hcFdpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25XaXRoSW5kZXg6IF9wYXJ0aXRpb25XaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlV2l0aEluZGV4KFMuT3JkKSxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4iLAogICJpbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGZsYXAgYXMgZmxhcF8gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IHNlcGFyYXRlZCB9IGZyb20gJy4vU2VwYXJhdGVkJztcbmltcG9ydCAqIGFzIFMgZnJvbSAnLi9zdHJpbmcnO1xuaW1wb3J0IHsgd2lsdERlZmF1bHQsIHdpdGhlckRlZmF1bHQgfSBmcm9tICcuL1dpdGhlcmFibGUnO1xuLyoqXG4gKiBCdWlsZHMgYSBgUmVhZG9ubHlSZWNvcmRgIGJ5IGNvcHlpbmcgYSBgUmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUmVhZG9ubHlSZWNvcmQsIGZyb21SZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGNvbnN0IHg6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7IGE6IDEsIGI6IDIgfTtcbiAqIGNvbnN0IHk6IFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IGZyb21SZWNvcmQoeCk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHgseSk7XG4gKiAvLyBgeS5hID0gNWAgZ2l2ZXMgY29tcGlsZXIgZXJyb3JcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWNvcmQgPSBmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcik7IH07XG4vKipcbiAqIEJ1aWxkcyBhIG11dGFibGUgYFJlY29yZGAgZnJvbSBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFJlYWRvbmx5UmVjb3JkLCB0b1JlY29yZCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogY29uc3QgeDogUmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0geyBhOiAxLCBiOiAyIH07XG4gKiBjb25zdCB5OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0gdG9SZWNvcmQoeCk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHgseSk7XG4gKiB5LmEgPSA1OyAvLyBpdCdzIG9rLCB5IGlzIG11dGFibGVcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHRvUmVjb3JkID0gZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHIpOyB9O1xuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIG51bWJlciBvZiBrZXkvdmFsdWUgcGFpcnMgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzaXplIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCI7XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzaXplKHsgYTogdHJ1ZSwgYjogMiwgYzogXCJ0aHJlZVwiIH0pLCAzKTtcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzaXplID0gZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5rZXlzKHIpLmxlbmd0aDsgfTtcbi8qKlxuICogVGVzdCB3aGV0aGVyIGEgYFJlYWRvbmx5UmVjb3JkYCBpcyBlbXB0eS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpc0VtcHR5KHt9KSwgdHJ1ZSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGlzRW1wdHkoeyBhOiAzIH0pLCBmYWxzZSk7XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpc0VtcHR5ID0gZnVuY3Rpb24gKHIpIHtcbiAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG52YXIga2V5c18gPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMocikuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBrZXlzID0gLyojX19QVVJFX18qLyBrZXlzXyhTLk9yZCk7XG5leHBvcnQgZnVuY3Rpb24gY29sbGVjdChPKSB7XG4gICAgaWYgKHR5cGVvZiBPID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBjb2xsZWN0KFMuT3JkKShPKTtcbiAgICB9XG4gICAgdmFyIGtleXNPID0ga2V5c18oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGtleXNPKHIpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goZihrZXksIHJba2V5XSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfTtcbiAgICB9O1xufVxuLyoqXG4gKiBHZXQgYSBzb3J0ZWQgYFJlYWRvbmx5QXJyYXlgIG9mIHRoZSBrZXkvdmFsdWUgcGFpcnMgY29udGFpbmVkIGluIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdG9SZWFkb25seUFycmF5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogY29uc3QgeCA9IHsgYzogMywgYTogXCJmb29cIiwgYjogZmFsc2UgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodG9SZWFkb25seUFycmF5KHgpLCBbXG4gKiAgIFtcImFcIiwgXCJmb29cIl0sXG4gKiAgIFtcImJcIiwgZmFsc2VdLFxuICogICBbXCJjXCIsIDNdLFxuICogXSk7XG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0b1JlYWRvbmx5QXJyYXkgPSBcbi8qI19fUFVSRV9fKi8gY29sbGVjdChTLk9yZCkoZnVuY3Rpb24gKGssIGEpIHsgcmV0dXJuIFtrLCBhXTsgfSk7XG5leHBvcnQgZnVuY3Rpb24gdG9VbmZvbGRhYmxlKFUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIHNhcyA9IHRvUmVhZG9ubHlBcnJheShyKTtcbiAgICAgICAgdmFyIGxlbiA9IHNhcy5sZW5ndGg7XG4gICAgICAgIHJldHVybiBVLnVuZm9sZCgwLCBmdW5jdGlvbiAoYikgeyByZXR1cm4gKGIgPCBsZW4gPyBfLnNvbWUoW3Nhc1tiXSwgYiArIDFdKSA6IF8ubm9uZSk7IH0pO1xuICAgIH07XG59XG4vKipcbiAqIEluc2VydCBvciByZXBsYWNlIGEga2V5L3ZhbHVlIHBhaXIgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1cHNlcnRBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBzZXJ0QXQoXCJhXCIsIDUpKHsgYTogMSwgYjogMiB9KSwgeyBhOiA1LCBiOiAyIH0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cHNlcnRBdChcImNcIiwgNSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDEsIGI6IDIsIGM6IDUgfSk7XG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHVwc2VydEF0ID0gZnVuY3Rpb24gKGssIGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykgJiYgcltrXSA9PT0gYSkge1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IE9iamVjdC5hc3NpZ24oe30sIHIpO1xuICAgICAgICBvdXRba10gPSBhO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb3Igbm90IGEga2V5IGV4aXN0cyBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogTm90ZS4gVGhpcyBmdW5jdGlvbiBpcyBub3QgcGlwZWFibGUgYmVjYXVzZSBpcyBhIGBSZWZpbmVtZW50YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaGFzIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChoYXMoXCJhXCIsIHsgYTogMSwgYjogMiB9KSwgdHJ1ZSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGhhcyhcImNcIiwgeyBhOiAxLCBiOiAyIH0pLCBmYWxzZSk7XG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGhhcyA9IGZ1bmN0aW9uIChrLCByKSB7IHJldHVybiBfLmhhcy5jYWxsKHIsIGspOyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUF0KGspIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgaWYgKCFfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gT2JqZWN0LmFzc2lnbih7fSwgcik7XG4gICAgICAgIGRlbGV0ZSBvdXRba107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbi8qKlxuICogUmVwbGFjZSBhIGtleS92YWx1ZSBwYWlyIGluIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAcmV0dXJucyBJZiB0aGUgc3BlY2lmaWVkIGtleSBleGlzdHMgaXQgcmV0dXJucyBhbiBgT3B0aW9uYCBjb250YWluaW5nIGEgbmV3IGBSZWNvcmRgXG4gKiB3aXRoIHRoZSBlbnRyeSB1cGRhdGVkLCBvdGhlcndpc2UgaXQgcmV0dXJucyBgTm9uZWBcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdXBkYXRlQXQgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBkYXRlQXQoXCJhXCIsIDMpKHsgYTogMSwgYjogMiB9KSwgb3B0aW9uLnNvbWUoeyBhOiAzLCBiOiAyIH0pKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBkYXRlQXQoXCJjXCIsIDMpKHsgYTogMSwgYjogMiB9KSwgb3B0aW9uLm5vbmUpO1xuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUF0ID0gZnVuY3Rpb24gKGssIGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgaWYgKCFoYXMoaywgcikpIHtcbiAgICAgICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJba10gPT09IGEpIHtcbiAgICAgICAgICAgIHJldHVybiBfLnNvbWUocik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IE9iamVjdC5hc3NpZ24oe30sIHIpO1xuICAgICAgICBvdXRba10gPSBhO1xuICAgICAgICByZXR1cm4gXy5zb21lKG91dCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEFwcGxpZXMgYSBtYXBwaW5nIGZ1bmN0aW9uIHRvIG9uZSBzcGVjaWZpYyBrZXkvdmFsdWUgcGFpciBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQHJldHVybnMgSWYgdGhlIHNwZWNpZmllZCBrZXkgZXhpc3RzIGl0IHJldHVybnMgYW4gYE9wdGlvbmAgY29udGFpbmluZyBhIG5ldyBgUmVjb3JkYFxuICogd2l0aCB0aGUgZW50cnkgdXBkYXRlZCwgb3RoZXJ3aXNlIGl0IHJldHVybnMgYE5vbmVgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1vZGlmeUF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tICdmcC10cydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG1vZGlmeUF0KFwiYVwiLCAoeDogbnVtYmVyKSA9PiB4ICogMykoeyBhOiAxLCBiOiAyIH0pLCBvcHRpb24uc29tZSh7IGE6IDMsIGI6IDIgfSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtb2RpZnlBdChcImNcIiwgKHg6IG51bWJlcikgPT4geCAqIDMpKHsgYTogMSwgYjogMiB9KSwgb3B0aW9uLm5vbmUpO1xuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1vZGlmeUF0ID0gZnVuY3Rpb24gKGssIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgaWYgKCFoYXMoaywgcikpIHtcbiAgICAgICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5leHQgPSBmKHJba10pO1xuICAgICAgICBpZiAobmV4dCA9PT0gcltrXSkge1xuICAgICAgICAgICAgcmV0dXJuIF8uc29tZShyKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gT2JqZWN0LmFzc2lnbih7fSwgcik7XG4gICAgICAgIG91dFtrXSA9IG5leHQ7XG4gICAgICAgIHJldHVybiBfLnNvbWUob3V0KTtcbiAgICB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBwb3Aoaykge1xuICAgIHZhciBkZWxldGVBdGsgPSBkZWxldGVBdChrKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIG9hID0gbG9va3VwKGssIHIpO1xuICAgICAgICByZXR1cm4gXy5pc05vbmUob2EpID8gXy5ub25lIDogXy5zb21lKFtvYS52YWx1ZSwgZGVsZXRlQXRrKHIpXSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1N1YnJlY29yZChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtZSwgdGhhdCkge1xuICAgICAgICBpZiAodGhhdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgaXNTdWJyZWNvcmRFXzEgPSBpc1N1YnJlY29yZChFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodGhhdCkgeyByZXR1cm4gaXNTdWJyZWNvcmRFXzEodGhhdCwgbWUpOyB9O1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGsgaW4gbWUpIHtcbiAgICAgICAgICAgIGlmICghXy5oYXMuY2FsbCh0aGF0LCBrKSB8fCAhRS5lcXVhbHMobWVba10sIHRoYXRba10pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbG9va3VwKGssIHIpIHtcbiAgICBpZiAociA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocikgeyByZXR1cm4gbG9va3VwKGssIHIpOyB9O1xuICAgIH1cbiAgICByZXR1cm4gXy5oYXMuY2FsbChyLCBrKSA/IF8uc29tZShyW2tdKSA6IF8ubm9uZTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZW1wdHkgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBtYXBXaXRoSW5kZXgoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10gPSBmKGssIHJba10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXAoZikge1xuICAgIHJldHVybiBtYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVdpdGhJbmRleCgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJldHVybiByZWR1Y2VXaXRoSW5kZXgoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgfVxuICAgIHZhciBrZXlzTyA9IGtleXNfKGFyZ3NbMF0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBvdXQgPSBiO1xuICAgICAgICB2YXIga3MgPSBrZXlzTyhmYSk7XG4gICAgICAgIHZhciBsZW4gPSBrcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrID0ga3NbaV07XG4gICAgICAgICAgICBvdXQgPSBmKGssIG91dCwgZmFba10pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb2xkTWFwV2l0aEluZGV4KE8pIHtcbiAgICBpZiAoJ2NvbXBhcmUnIGluIE8pIHtcbiAgICAgICAgdmFyIGtleXNPXzEgPSBrZXlzXyhPKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChNKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvdXQgPSBNLmVtcHR5O1xuICAgICAgICAgICAgICAgICAgICB2YXIga3MgPSBrZXlzT18xKGZhKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbiA9IGtzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSBrc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dCA9IE0uY29uY2F0KG91dCwgZihrLCBmYVtrXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmb2xkTWFwV2l0aEluZGV4KFMuT3JkKShPKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VSaWdodFdpdGhJbmRleCgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJldHVybiByZWR1Y2VSaWdodFdpdGhJbmRleChTLk9yZCkuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICB9XG4gICAgdmFyIGtleXNPID0ga2V5c18oYXJnc1swXSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgdmFyIG91dCA9IGI7XG4gICAgICAgIHZhciBrcyA9IGtleXNPKGZhKTtcbiAgICAgICAgdmFyIGxlbiA9IGtzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB2YXIgayA9IGtzW2ldO1xuICAgICAgICAgICAgb3V0ID0gZihrLCBmYVtrXSwgb3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07IH07XG59XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seVJlY29yZGAgd2l0aCBvbmUga2V5L3ZhbHVlIHBhaXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNpbmdsZXRvbiB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2luZ2xldG9uKFwiYVwiLCAxKSwgeyBhOiAxIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNpbmdsZXRvbiA9IGZ1bmN0aW9uIChrLCBhKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSB7fSwgX2Fba10gPSBhLCBfYSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHRyYXZlcnNlV2l0aEluZGV4KEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhPRiA9IF90cmF2ZXJzZVdpdGhJbmRleChTLk9yZCkoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAodGEpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4T0YodGEsIGYpOyB9OyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRyYXZlcnNlKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VPRiA9IF90cmF2ZXJzZShTLk9yZCkoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAodGEpIHsgcmV0dXJuIHRyYXZlcnNlT0YodGEsIGYpOyB9OyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcXVlbmNlKEYpIHtcbiAgICByZXR1cm4gX3NlcXVlbmNlKFMuT3JkKShGKTtcbn1cbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2l0aGVyID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYubWFwKHBpcGUoZmEsIHRyYXZlcnNlRihmKSksIGNvbXBhY3QpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2lsdCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLm1hcChwaXBlKGZhLCB0cmF2ZXJzZUYoZikpLCBzZXBhcmF0ZSk7IH07IH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpdGlvbk1hcFdpdGhJbmRleChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBsZWZ0ID0ge307XG4gICAgICAgIHZhciByaWdodCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSBmKGssIHJba10pO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5fdGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0xlZnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdFtrXSA9IGUubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdSaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodFtrXSA9IGUucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0LCByaWdodCk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb25XaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBsZWZ0ID0ge307XG4gICAgICAgIHZhciByaWdodCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSByW2tdO1xuICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGVXaXRoSW5kZXgoaywgYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRba10gPSBhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdFtrXSA9IGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyTWFwV2l0aEluZGV4KGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iID0gZihrLCByW2tdKTtcbiAgICAgICAgICAgICAgICBpZiAoXy5pc1NvbWUob2IpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IG9iLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZmEpIHtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKGZhLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBmYVtrZXldO1xuICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGVXaXRoSW5kZXgoa2V5LCBhKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRba2V5XSA9IGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYW5nZWQgPyBvdXQgOiBmYTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Gb2xkYWJsZShNLCBGKSB7XG4gICAgdmFyIGZyb21Gb2xkYWJsZU1hcE0gPSBmcm9tRm9sZGFibGVNYXAoTSwgRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChma2EpIHsgcmV0dXJuIGZyb21Gb2xkYWJsZU1hcE0oZmthLCBpZGVudGl0eSk7IH07XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbUZvbGRhYmxlTWFwKE0sIEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7XG4gICAgICAgIHJldHVybiBGLnJlZHVjZSh0YSwge30sIGZ1bmN0aW9uIChyLCBhKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBmKGEpLCBrID0gX2FbMF0sIGIgPSBfYVsxXTtcbiAgICAgICAgICAgIHJba10gPSBfLmhhcy5jYWxsKHIsIGspID8gTS5jb25jYXQocltrXSwgYikgOiBiO1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG4vKipcbiAqIEFsaWFzIG9mIFtgdG9SZWFkb25seUFycmF5YF0oI3RvcmVhZG9ubHlhcnJheSkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHRvRW50cmllcyB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodG9FbnRyaWVzKHsgYjogMiwgYTogMSB9KSwgW1snYScsIDFdLCBbJ2InLCAyXV0pXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4xMi4wXG4gKi9cbmV4cG9ydCB2YXIgdG9FbnRyaWVzID0gdG9SZWFkb25seUFycmF5O1xuLyoqXG4gKiBDb252ZXJ0cyBhIGBSZWFkb25seUFycmF5YCBvZiBgW2tleSwgdmFsdWVdYCB0dXBsZXMgaW50byBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZyb21FbnRyaWVzIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tRW50cmllcyhbWydhJywgMV0sIFsnYicsIDJdLCBbJ2EnLCAzXV0pLCB7IGI6IDIsIGE6IDMgfSlcbiAqXG4gKiBAc2luY2UgMi4xMi4wXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqL1xuZXhwb3J0IHZhciBmcm9tRW50cmllcyA9IGZ1bmN0aW9uIChmYSkge1xuICAgIHZhciBvdXQgPSB7fTtcbiAgICBmb3IgKHZhciBfaSA9IDAsIGZhXzEgPSBmYTsgX2kgPCBmYV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgYSA9IGZhXzFbX2ldO1xuICAgICAgICBvdXRbYVswXV0gPSBhWzFdO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBldmVyeShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoIXByZWRpY2F0ZShyW2tdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuLyoqXG4gKiBUZXN0IGlmIGF0IGxlYXN0IG9uZSB2YWx1ZSBpbiBhIGBSZWFkb25seVJlY29yZGAgc2F0aXNmaWVzIHRoZSBwcmVkaWNhdGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29tZSgobjogbnVtYmVyKSA9PiBuID49IDApKHsgYTogMSwgYjogLTIgfSksIHRydWUpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb21lKChuOiBudW1iZXIpID0+IG4gPj0gMCkoeyBhOiAtMSwgYjogLTIgfSksIGZhbHNlKTtcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbWUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShyW2tdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVsZW0oRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSwgZmEpIHtcbiAgICAgICAgaWYgKGZhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtRV8xID0gZWxlbShFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGVsZW1FXzEoYSwgZmEpOyB9O1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGsgaW4gZmEpIHtcbiAgICAgICAgICAgIGlmIChFLmVxdWFscyhmYVtrXSwgYSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cbi8qKlxuICogVW5pb24gb2YgdHdvIGBSZWFkb25seVJlY29yZGBzLlxuICogVGFrZXMgdHdvIGBSZWFkb25seVJlY29yZGBzIGFuZCBwcm9kdWNlcyBhIGBSZWFkb25seVJlY29yZGAgY29tYmluaW5nIGFsbCB0aGVcbiAqIGVudHJpZXMgb2YgdGhlIHR3byBpbnB1dHMuXG4gKiBJdCB1c2VzIHRoZSBgY29uY2F0YCBmdW5jdGlvbiBvZiB0aGUgcHJvdmlkZWQgYE1hZ21hYCB0b1xuICogY29tYmluZSB0aGUgZWxlbWVudHMgd2l0aCB0aGUgc2FtZSBrZXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuaW9uIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCI7XG4gKiBpbXBvcnQgeyBNYWdtYSB9IGZyb20gXCJmcC10cy9NYWdtYVwiO1xuICpcbiAqIGNvbnN0IG0xOiBNYWdtYTxudW1iZXI+ID0geyBjb25jYXQ6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4geCArIHkgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pb24obTEpKHsgYTogMywgYzogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogNCwgYjogMiwgYzogMyB9KTtcbiAqIGNvbnN0IG0yOiBNYWdtYTxudW1iZXI+ID0geyBjb25jYXQ6ICh4OiBudW1iZXIpID0+IHggfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pb24obTIpKHsgYTogMywgYzogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogMSwgYjogMiwgYzogMyB9KTtcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoTSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgICAgIGlmIChpc0VtcHR5KGZpcnN0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWNvbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBmaXJzdCkge1xuICAgICAgICAgICAgICAgIGlmIChoYXMoaywgc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBNLmNvbmNhdChmaXJzdFtrXSwgc2Vjb25kW2tdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IGZpcnN0W2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gc2Vjb25kKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXMoaywgb3V0KSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBzZWNvbmRba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogSW50ZXJzZWN0aW9uIG9mIHR3byBgUmVhZG9ubHlSZWNvcmRgcy5cbiAqIFRha2VzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBhbmQgcHJvZHVjZXMgYSBgUmVhZG9ubHlSZWNvcmRgIGNvbWJpbmluZyBvbmx5IHRoZVxuICogZW50cmllcyBvZiB0aGUgdHdvIGlucHV0c3dpdGggdGhlIHNhbWUga2V5LlxuICogSXQgdXNlcyB0aGUgYGNvbmNhdGAgZnVuY3Rpb24gb2YgdGhlIHByb3ZpZGVkIGBNYWdtYWAgdG9cbiAqIGNvbWJpbmUgdGhlIGVsZW1lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNlY3Rpb24gfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqIGltcG9ydCB7IE1hZ21hIH0gZnJvbSBcImZwLXRzL01hZ21hXCI7XG4gKlxuICogY29uc3QgbTE6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB4ICsgeSB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcnNlY3Rpb24obTEpKHsgYTogMywgYzogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogNH0pO1xuICogY29uc3QgbTI6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlcikgPT4geCB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcnNlY3Rpb24obTIpKHsgYTogMywgYzogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogMX0pO1xuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNlY3Rpb24gPSBmdW5jdGlvbiAoTSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgICAgIGlmIChpc0VtcHR5KGZpcnN0KSB8fCBpc0VtcHR5KHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIGZpcnN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhcyhrLCBzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IE0uY29uY2F0KGZpcnN0W2tdLCBzZWNvbmRba10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIERpZmZlcmVuY2UgYmV0d2VlbiB0d28gYFJlYWRvbmx5UmVjb3JkYHMuXG4gKiBUYWtlcyB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYW5kIHByb2R1Y2VzIGEgYFJlYWRvbmx5UmVjb3JkYCBjb21wb3NlZCBieSB0aGVcbiAqIGVudHJpZXMgb2YgdGhlIHR3byBpbnB1dHMsIHJlbW92aW5nIHRoZSBlbnRyaWVzIHdpdGggdGhlIHNhbWVcbiAqIGtleSBpbiBib3RoIGlucHV0cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZGlmZmVyZW5jZSB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZGlmZmVyZW5jZSh7IGE6IDEgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGI6IDIgfSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRpZmZlcmVuY2UoeyBhOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBiOiAyIH0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkaWZmZXJlbmNlKHsgYTogMywgYzogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYjogMiwgYzogMyB9KTtcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZGlmZmVyZW5jZSA9IGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgIGlmIChpc0VtcHR5KGZpcnN0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlY29uZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3Q7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIGZpcnN0KSB7XG4gICAgICAgICAgICBpZiAoIWhhcyhrLCBzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdID0gZmlyc3Rba107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgayBpbiBzZWNvbmQpIHtcbiAgICAgICAgICAgIGlmICghaGFzKGssIGZpcnN0KSkge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IHNlY29uZFtrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX21hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwV2l0aEluZGV4KGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9yZWR1Y2UgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciByZWR1Y2VPID0gcmVkdWNlKE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZU8oYiwgZikpOyB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcE0gPSBmb2xkTWFwKE8pKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBNKGYpKTsgfTtcbn07IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciByZWR1Y2VSaWdodE8gPSByZWR1Y2VSaWdodChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodE8oYiwgZikpOyB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9maWx0ZXIgPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwaXBlKGZhLCBmaWx0ZXIocHJlZGljYXRlKSk7XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX2ZpbHRlck1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyTWFwKGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9wYXJ0aXRpb24gPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uKHByZWRpY2F0ZSkpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3BhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwKGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9yZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciByZWR1Y2VXaXRoSW5kZXhPID0gcmVkdWNlV2l0aEluZGV4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleE8oYiwgZikpOyB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX2ZvbGRNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TyA9IGZvbGRNYXBXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChNKSB7XG4gICAgICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TSA9IGZvbGRNYXBXaXRoSW5kZXhPKE0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG4gICAgfTtcbn07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciByZWR1Y2VSaWdodFdpdGhJbmRleE8gPSByZWR1Y2VSaWdodFdpdGhJbmRleChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodFdpdGhJbmRleE8oYiwgZikpOyB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9wYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbk1hcFdpdGhJbmRleChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcGFydGl0aW9uV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGVXaXRoSW5kZXgpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkpO1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9maWx0ZXJNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlck1hcFdpdGhJbmRleChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGVXaXRoSW5kZXgpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlcldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX3RyYXZlcnNlID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhPID0gX3RyYXZlcnNlV2l0aEluZGV4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoRikge1xuICAgICAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhPRiA9IHRyYXZlcnNlV2l0aEluZGV4TyhGKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gdHJhdmVyc2VXaXRoSW5kZXhPRih0YSwgZmxvdyhTSywgZikpOyB9O1xuICAgIH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBfc2VxdWVuY2UgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciB0cmF2ZXJzZU8gPSBfdHJhdmVyc2UoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB0cmF2ZXJzZU9GID0gdHJhdmVyc2VPKEYpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7IHJldHVybiB0cmF2ZXJzZU9GKHRhLCBpZGVudGl0eSk7IH07XG4gICAgfTtcbn07XG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKEYpIHtcbiAgICAgICAgdmFyIGtleXNPID0ga2V5c18oTyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHtcbiAgICAgICAgICAgIHZhciBrcyA9IGtleXNPKHRhKTtcbiAgICAgICAgICAgIGlmIChrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRi5vZihlbXB0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnIgPSBGLm9mKHt9KTtcbiAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGZyID0gRi5hcChGLm1hcChmciwgZnVuY3Rpb24gKHIpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHIsIChfYSA9IHt9LCBfYVtrZXldID0gYiwgX2EpKTtcbiAgICAgICAgICAgICAgICB9OyB9KSwgZihrZXksIHRhW2tleV0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtzXzEgPSBrczsgX2kgPCBrc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrc18xW19pXTtcbiAgICAgICAgICAgICAgICBfbG9vcF8xKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZnI7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEdpdmVuIGEgYFByZWRpY2F0ZWAsIGl0IHByb2R1Y2VzIGEgbmV3IGBSZWFkb25seVJlY29yZGAga2VlcGluZyBvbmx5IHRoZSBlbnRyaWVzIHdpdGggYVxuICogdmFsdWUgdGhhdCBzYXRpc2ZpZXMgdGhlIHByb3ZpZGVkIHByZWRpY2F0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbHRlcigoczogc3RyaW5nKSA9PiBzLmxlbmd0aCA8IDQpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiwgYzogXCJ2ZXJ5bG9uZ1wiIH0pLCB7XG4gKiAgIGE6IFwiZm9vXCIsXG4gKiAgIGI6IFwiYmFyXCIsXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXIgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn07XG4vKipcbiAqIE1hcHMgYSBgUmVhZG9ubHlSZWNvcmRgIHdpdGggYW4gaXRlcmF0aW5nIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBgT3B0aW9uYFxuICogYW5kIGl0IGtlZXBzIG9ubHkgdGhlIGBTb21lYCB2YWx1ZXMgZGlzY2FyZGluZyB0aGUgYE5vbmVgcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmlsdGVyTWFwIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gXCJmcC10c1wiXG4gKlxuICogY29uc3QgZiA9IChzOiBzdHJpbmcpID0+IHMubGVuZ3RoIDwgNCA/IG9wdGlvbi5zb21lKGAke3N9IGlzIHNob3J0YCk6IG9wdGlvbi5ub25lXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbHRlck1hcChmKSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIsIGM6IFwidmVyeWxvbmdcIiB9KSwge1xuICogICBhOiBcImZvbyBpcyBzaG9ydFwiLFxuICogICBiOiBcImJhciBpcyBzaG9ydFwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZpbHRlck1hcFdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG4vKipcbiAqIFBhcnRpdGlvbiBhIGBSZWFkb25seVJlY29yZGAgaW50byB0d28gcGFydHMgYWNjb3JkaW5nIHRvIGEgYFByZWRpY2F0ZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBhcnRpdGlvbiB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb24oKHM6IHN0cmluZykgPT4gcy5sZW5ndGggPCA0KSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIsIGM6IFwidmVyeWxvbmdcIiB9KSwge1xuICogICBsZWZ0OntcbiAqICAgICBjOiBcInZlcnlsb25nXCJcbiAqICAgfSxcbiAqICAgcmlnaHQ6IHtcbiAqICAgICBhOiBcImZvb1wiLFxuICogICAgIGI6IFwiYmFyXCIsXG4gKiAgIH0sXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb24gPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHBhcnRpdGlvbldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn07XG4vKipcbiAqIE1hcHMgYSBgUmVhZG9ubHlSZWNvcmRgIHdpdGggYSBmdW5jdGlvbiByZXR1cm5pbmcgYW4gYEVpdGhlcmAgYW5kXG4gKiBwYXJ0aXRpb25zIHRoZSByZXN1bHRpbmcgYFJlYWRvbmx5UmVjb3JkYCBpbnRvIGBMZWZ0YHMgYW5kIGBSaWdodGBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwYXJ0aXRpb25NYXAgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgZWl0aGVyIH0gZnJvbSBcImZwLXRzXCJcbiAqXG4gKiBjb25zdCBmID0gKHM6IHN0cmluZykgPT4gKHMubGVuZ3RoIDwgNCA/IGVpdGhlci5yaWdodChgJHtzfSBpcyBzaG9ydGApIDogZWl0aGVyLmxlZnQoYCR7c30gaXMgbm90IHNob3J0YCkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb25NYXAoZikoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcInZlcnlsb25nXCIgfSksIHtcbiAqICAgbGVmdDoge1xuICogICAgIGM6IFwidmVyeWxvbmcgaXMgbm90IHNob3J0XCIsXG4gKiAgIH0sXG4gKiAgIHJpZ2h0OiB7XG4gKiAgICAgYTogXCJmb28gaXMgc2hvcnRcIixcbiAqICAgICBiOiBcImJhciBpcyBzaG9ydFwiLFxuICogICB9LFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gcGFydGl0aW9uTWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdmFyIHJlZHVjZVdpdGhJbmRleE9fMSA9IHJlZHVjZVdpdGhJbmRleChhcmdzWzBdKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiByZWR1Y2VXaXRoSW5kZXhPXzEoYiwgZnVuY3Rpb24gKF8sIGIsIGEpIHsgcmV0dXJuIGYoYiwgYSk7IH0pOyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVkdWNlKFMuT3JkKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvbGRNYXAoTykge1xuICAgIGlmICgnY29tcGFyZScgaW4gTykge1xuICAgICAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE9fMSA9IGZvbGRNYXBXaXRoSW5kZXgoTyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoTSkge1xuICAgICAgICAgICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleE9fMShNKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZm9sZE1hcFdpdGhJbmRleE0oZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZm9sZE1hcChTLk9yZCkoTyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlUmlnaHQoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXhPXzEgPSByZWR1Y2VSaWdodFdpdGhJbmRleChhcmdzWzBdKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiByZWR1Y2VSaWdodFdpdGhJbmRleE9fMShiLCBmdW5jdGlvbiAoXywgYiwgYSkgeyByZXR1cm4gZihiLCBhKTsgfSk7IH07XG4gICAgfVxuICAgIHJldHVybiByZWR1Y2VSaWdodChTLk9yZCkuYXBwbHkodm9pZCAwLCBhcmdzKTtcbn1cbi8qKlxuICogQ29tcGFjdCBhIGBSZWFkb25seVJlY29yZGAgb2YgYE9wdGlvbmBzIGRpc2NhcmRpbmcgdGhlIGBOb25lYCB2YWx1ZXMgYW5kXG4gKiBrZWVwaW5nIHRoZSBgU29tZWAgdmFsdWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBjb21wYWN0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tICdmcC10cydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbXBhY3QoeyBhOiBvcHRpb24uc29tZShcImZvb1wiKSwgYjogb3B0aW9uLm5vbmUsIGM6IG9wdGlvbi5zb21lKFwiYmFyXCIpIH0pLCB7XG4gKiAgIGE6IFwiZm9vXCIsXG4gKiAgIGM6IFwiYmFyXCIsXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjb21wYWN0ID0gZnVuY3Rpb24gKHIpIHtcbiAgICB2YXIgb3V0ID0ge307XG4gICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICB2YXIgb2EgPSByW2tdO1xuICAgICAgICAgICAgaWYgKF8uaXNTb21lKG9hKSkge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IG9hLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBTZXBhcmF0ZSBhIGBSZWFkb25seVJlY29yZGAgb2YgYEVpdGhlcmBzIGludG8gYExlZnRgcyBhbmQgYFJpZ2h0YHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNlcGFyYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKiBpbXBvcnQgeyBlaXRoZXIgfSBmcm9tICdmcC10cydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBzZXBhcmF0ZSh7IGE6IGVpdGhlci5yaWdodChcImZvb1wiKSwgYjogZWl0aGVyLmxlZnQoXCJiYXJcIiksIGM6IGVpdGhlci5yaWdodChcImJhelwiKSB9KSxcbiAqICAge1xuICogICAgIHJpZ2h0OiB7XG4gKiAgICAgICBhOiBcImZvb1wiLFxuICogICAgICAgYzogXCJiYXpcIixcbiAqICAgICB9LFxuICogICAgIGxlZnQ6IHtcbiAqICAgICAgIGI6IFwiYmFyXCIsXG4gKiAgICAgfSxcbiAqICAgfVxuICogKTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzZXBhcmF0ZSA9IGZ1bmN0aW9uIChyKSB7XG4gICAgdmFyIGxlZnQgPSB7fTtcbiAgICB2YXIgcmlnaHQgPSB7fTtcbiAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgIHZhciBlID0gcltrXTtcbiAgICAgICAgICAgIGlmIChfLmlzTGVmdChlKSkge1xuICAgICAgICAgICAgICAgIGxlZnRba10gPSBlLmxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByaWdodFtrXSA9IGUucmlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0LCByaWdodCk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBVUkkgPSAnUmVhZG9ubHlSZWNvcmQnO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNob3coTykge1xuICAgIGlmICgnY29tcGFyZScgaW4gTykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGNvbGxlY3QoTykoZnVuY3Rpb24gKGssIGEpIHsgcmV0dXJuIFwiXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KGspLCBcIjogXCIpLmNvbmNhdChTLnNob3coYSkpOyB9KShyKS5qb2luKCcsICcpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50cyA9PT0gJycgPyAne30nIDogXCJ7IFwiLmNvbmNhdChlbGVtZW50cywgXCIgfVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7IH07XG4gICAgfVxuICAgIHJldHVybiBnZXRTaG93KFMuT3JkKShPKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcShFKSB7XG4gICAgdmFyIGlzU3VicmVjb3JkRSA9IGlzU3VicmVjb3JkKEUpO1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBpc1N1YnJlY29yZEUoeCkoeSkgJiYgaXNTdWJyZWNvcmRFKHkpKHgpOyB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb25vaWQoUykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgICAgIGlmIChpc0VtcHR5KGZpcnN0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWNvbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHIgPSBPYmplY3QuYXNzaWduKHt9LCBmaXJzdCk7XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIHNlY29uZCkge1xuICAgICAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHNlY29uZCwgaykpIHtcbiAgICAgICAgICAgICAgICAgICAgcltrXSA9IF8uaGFzLmNhbGwoZmlyc3QsIGspID8gUy5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSkgOiBzZWNvbmRba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0sXG4gICAgICAgIGVtcHR5OiBlbXB0eVxuICAgIH07XG59XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3IgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwXG59O1xuLyoqXG4gKiBUYWtlcyBhIHZhbHVlIGFuZCBhIGBSZWFkb25seVJlY29yZGAgb2YgZnVuY3Rpb25zIGFuZCByZXR1cm5zIGFcbiAqIGBSZWFkb25seVJlY29yZGAgYnkgYXBwbHlpbmcgZWFjaCBmdW5jdGlvbiB0byB0aGUgaW5wdXQgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZsYXAgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGNvbnN0IGZhYiA9IHsgeDogKG46IG51bWJlcikgPT4gYCR7bn0gdGltZXMgMmAsIHk6IChuOiBudW1iZXIpID0+IGAke24gKiAyfWAgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmxhcCgzKShmYWIpLCB7XG4gKiAgIHg6IFwiMyB0aW1lcyAyXCIsXG4gKiAgIHk6IFwiNlwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvcldpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4XG59O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBGb2xkYWJsZWAgaW5zdGFuY2UgZm9yIGEgYFJlYWRvbmx5UmVjb3JkYCwgdXNpbmcgdGhlXG4gKiBwcm92aWRlZCBgT3JkYCB0byBzb3J0IHRoZSBgUmVhZG9ubHlSZWNvcmRgJ3MgZW50cmllcyBieSBrZXkuXG4gKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRGb2xkYWJsZSA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZShPKSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcChPKSxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pXG59KTsgfTtcbi8qKlxuICogUHJvZHVjZXMgYSBgRm9sZGFibGVXaXRoSW5kZXgxYCBpbnN0YW5jZSBmb3IgYSBgUmVhZG9ubHlSZWNvcmRgLCB1c2luZyB0aGVcbiAqIHByb3ZpZGVkIGBPcmRgIHRvIHNvcnQgdGhlIGBSZWFkb25seVJlY29yZGAncyBlbnRyaWVzIGJ5IGtleS5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldEZvbGRhYmxlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTyksXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4KE8pLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4KE8pLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoTylcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21wYWN0YWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRmlsdGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGaWx0ZXJhYmxlV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIGZpbHRlck1hcFdpdGhJbmRleDogX2ZpbHRlck1hcFdpdGhJbmRleCxcbiAgICBmaWx0ZXJXaXRoSW5kZXg6IF9maWx0ZXJXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uTWFwV2l0aEluZGV4OiBfcGFydGl0aW9uTWFwV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbldpdGhJbmRleDogX3BhcnRpdGlvbldpdGhJbmRleFxufTtcbi8qKlxuICogUHJvZHVjZXMgYSBgVHJhdmVyc2FibGVgIGluc3RhbmNlIGZvciBhIGBSZWFkb25seVJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlYWRvbmx5UmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VHJhdmVyc2FibGUgPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTyksXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZShPKSxcbiAgICBzZXF1ZW5jZTogX3NlcXVlbmNlKE8pXG59KTsgfTtcbi8qKlxuICogUHJvZHVjZXMgYSBgVHJhdmVyc2FibGVXaXRoSW5kZXhgIGluc3RhbmNlIGZvciBhIGBSZWFkb25seVJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlYWRvbmx5UmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VHJhdmVyc2FibGVXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZShPKSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcChPKSxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleChPKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleChPKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4KE8pLFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UoTyksXG4gICAgc2VxdWVuY2U6IF9zZXF1ZW5jZShPKSxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogX3RyYXZlcnNlV2l0aEluZGV4KE8pXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFdpdGhlcmFibGUgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciBUID0gZ2V0VHJhdmVyc2FibGUoTyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgVVJJOiBVUkksXG4gICAgICAgIG1hcDogX21hcCxcbiAgICAgICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgICAgICBmb2xkTWFwOiBfZm9sZE1hcChPKSxcbiAgICAgICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodChPKSxcbiAgICAgICAgdHJhdmVyc2U6IFQudHJhdmVyc2UsXG4gICAgICAgIHNlcXVlbmNlOiBULnNlcXVlbmNlLFxuICAgICAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgICAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICAgICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgICAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICAgICAgd2l0aGVyOiB3aXRoZXJEZWZhdWx0KFQsIENvbXBhY3RhYmxlKSxcbiAgICAgICAgd2lsdDogd2lsdERlZmF1bHQoVCwgQ29tcGFjdGFibGUpXG4gICAgfTtcbn07XG4vKipcbiAqIEdpdmVuIGEgYFNlbWlncm91cGAgaW4gdGhlIGJhc2UgdHlwZSwgaXQgcHJvZHVjZXMgYSBgU2VtaWdyb3VwYFxuICogaW4gdGhlIGBSZWFkb25seVJlY29yZGAgb2YgdGhlIGJhc2UgdHlwZS5cbiAqIFRoZSByZXN1bHRpbmcgYFNlbWlncm91cGAgY29uY2F0ZW5hdGVzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBieVxuICogYHVuaW9uYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0VW5pb25TZW1pZ3JvdXAsIFJlYWRvbmx5UmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IFNlbWlncm91cCB9IGZyb20gXCJmcC10cy9TZW1pZ3JvdXBcIlxuICpcbiAqIGNvbnN0IHNOdW1iZXI6IFNlbWlncm91cDxudW1iZXI+ID0geyBjb25jYXQ6ICh4LCB5KSA9PiB4IC0geSB9O1xuICogY29uc3Qgc1JlYWRvbmx5UmVjb3JkOiBTZW1pZ3JvdXA8UmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PiA9IGdldFVuaW9uU2VtaWdyb3VwKHNOdW1iZXIpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzUmVhZG9ubHlSZWNvcmQuY29uY2F0KHsgYTogMSwgYjogMiB9LCB7IGI6IDMsIGM6IDQgfSksIHsgYTogMSwgYjogLTEsIGM6IDQgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFVuaW9uU2VtaWdyb3VwID0gZnVuY3Rpb24gKFMpIHtcbiAgICB2YXIgdW5pb25TID0gdW5pb24oUyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gdW5pb25TKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG4vKipcbiAqIFNhbWUgYXMgYGdldE1vbm9pZGAuXG4gKiBSZXR1cm5zIGEgYE1vbm9pZGAgaW5zdGFuY2UgZm9yIGBSZWFkb25seVJlY29yZGBzIGdpdmVuIGEgYFNlbWlncm91cGBcbiAqIGluc3RhbmNlIGZvciB0aGUgYmFzZSB0eXBlLlxuICogVGhlIGBNb25vaWRgIG1ha2VzIHRoZSB1bmlvbiBvZiB0d28gYFJlYWRvbmx5UmVjb3JkYHMgY29tYmluaW5nIHRoZVxuICogZW50cmllcyB0aGF0IGhhdmUgdGhlIHNhbWUga2V5IHdpdGggdGhlIHByb3ZpZGVkIGBTZW1pZ3JvdXBgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgeyBnZXRVbmlvbk1vbm9pZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRVbmlvbk1vbm9pZChTZW1pZ3JvdXBTdW0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdCh7IGZvbzogMTIzLCBiYXI6IDIzNCB9LCB7IGZvbzogNDU2LCBiYXo6IDU2NyB9KSwgeyBmb286IDU3OSAsIGJhcjogMjM0LCBiYXo6IDU2NyB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VW5pb25Nb25vaWQgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGdldFVuaW9uU2VtaWdyb3VwKFMpLmNvbmNhdCxcbiAgICBlbXB0eTogZW1wdHlcbn0pOyB9O1xuLyoqXG4gKiBHaXZlbiBhIGBTZW1pZ3JvdXBgIGluIHRoZSBiYXNlIHR5cGUsIGl0IHByb2R1Y2VzIGEgYFNlbWlncm91cGBcbiAqIGluIHRoZSBgUmVhZG9ubHlSZWNvcmRgIG9mIHRoZSBiYXNlIHR5cGUuXG4gKiBUaGUgcmVzdWx0aW5nIGBTZW1pZ3JvdXBgIGNvbmNhdGVuYXRlcyB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYnlcbiAqIGBpbnRlcnNlY3Rpb25gLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAsIFJlYWRvbmx5UmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IFNlbWlncm91cCB9IGZyb20gXCJmcC10cy9TZW1pZ3JvdXBcIlxuICpcbiAqIGNvbnN0IHNOdW1iZXI6IFNlbWlncm91cDxudW1iZXI+ID0geyBjb25jYXQ6ICh4LCB5KSA9PiB4IC0geSB9O1xuICogY29uc3Qgc1JlYWRvbmx5UmVjb3JkOiBTZW1pZ3JvdXA8UmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PiA9IGdldEludGVyc2VjdGlvblNlbWlncm91cChzTnVtYmVyKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc1JlYWRvbmx5UmVjb3JkLmNvbmNhdCh7IGE6IDEsIGI6IDIgfSwgeyBiOiAzLCBjOiA0IH0pLCB7IGI6IC0xIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAgPSBmdW5jdGlvbiAoUykge1xuICAgIHZhciBpbnRlcnNlY3Rpb25TID0gaW50ZXJzZWN0aW9uKFMpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGludGVyc2VjdGlvblMoc2Vjb25kKShmaXJzdCk7IH1cbiAgICB9O1xufTtcbi8qKlxuICogUHJvZHVjZXMgYSBgTWFnbWFgIHdpdGggYSBgY29uY2F0YCBmdW5jdGlvbiB0aGF0IGNvbWJpbmVzXG4gKiB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYnkgbWFraW5nIHRoZSBgZGlmZmVyZW5jZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldERpZmZlcmVuY2VNYWdtYSwgZGlmZmVyZW5jZSwgUmVhZG9ubHlSZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgTWFnbWEgfSBmcm9tIFwiZnAtdHMvTWFnbWFcIlxuICpcbiAqIGNvbnN0IHIxID0geyBhOiAzLCBjOiAzIH07XG4gKiBjb25zdCByMiA9IHsgYTogMSwgYjogMiB9O1xuICogY29uc3QgbTogTWFnbWE8UmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PiA9IGdldERpZmZlcmVuY2VNYWdtYTxudW1iZXI+KCk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG0uY29uY2F0KHIxLCByMiksIGRpZmZlcmVuY2UocjIpKHIxKSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG0uY29uY2F0KHIxLCByMiksIHsgYzogMywgYjogMiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RGlmZmVyZW5jZU1hZ21hID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBkaWZmZXJlbmNlKHNlY29uZCkoZmlyc3QpOyB9XG59KTsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIGBnZXRGb2xkYWJsZWAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpXG59O1xuLyoqXG4gKiBVc2UgYGdldEZvbGRhYmxlV2l0aEluZGV4YCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZCksXG4gICAgcmVkdWNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VXaXRoSW5kZXgoUy5PcmQpLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXBXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodFdpdGhJbmRleChTLk9yZClcbn07XG4vKipcbiAqIFVzZSBgZ2V0VHJhdmVyc2FibGVgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZCksXG4gICAgdHJhdmVyc2U6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlKFMuT3JkKSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2Vcbn07XG4vKipcbiAqIFVzZSBgZ2V0VHJhdmVyc2FibGVXaXRoSW5kZXhgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHJlZHVjZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlV2l0aEluZGV4KFMuT3JkKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwV2l0aEluZGV4KFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHRyYXZlcnNlOiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZVdpdGhJbmRleChTLk9yZClcbn07XG52YXIgX3dpdGhlciA9IC8qI19fUFVSRV9fKi8gd2l0aGVyRGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xudmFyIF93aWx0ID0gLyojX19QVVJFX18qLyB3aWx0RGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xuLyoqXG4gKiBVc2UgYGdldFdpdGhlcmFibGVgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBXaXRoZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICB0cmF2ZXJzZTogLyojX19QVVJFX18qLyBfdHJhdmVyc2UoUy5PcmQpLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuLyoqXG4gKiBVc2UgW2B1cHNlcnRBdGBdKCN1cHNlcnRhdCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGluc2VydEF0ID0gdXBzZXJ0QXQ7XG5leHBvcnQgZnVuY3Rpb24gaGFzT3duUHJvcGVydHkoaywgcikge1xuICAgIHJldHVybiBfLmhhcy5jYWxsKHIgPT09IHVuZGVmaW5lZCA/IHRoaXMgOiByLCBrKTtcbn1cbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgUlIuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUlIucmVhZG9ubHlSZWNvcmRgXG4gKiAod2hlcmUgYFJSYCBpcyBmcm9tIGBpbXBvcnQgUlIgZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHJlYWRvbmx5UmVjb3JkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICB0cmF2ZXJzZTogLyojX19QVVJFX18qLyBfdHJhdmVyc2UoUy5PcmQpLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlV2l0aEluZGV4KFMuT3JkKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwV2l0aEluZGV4KFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoUy5PcmQpLFxuICAgIGZpbHRlck1hcFdpdGhJbmRleDogX2ZpbHRlck1hcFdpdGhJbmRleCxcbiAgICBmaWx0ZXJXaXRoSW5kZXg6IF9maWx0ZXJXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uTWFwV2l0aEluZGV4OiBfcGFydGl0aW9uTWFwV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbldpdGhJbmRleDogX3BhcnRpdGlvbldpdGhJbmRleCxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfdHJhdmVyc2VXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbiIsCiAgImltcG9ydCB7IGZyb21FcXVhbHMgfSBmcm9tICcuL0VxJztcbmltcG9ydCB7IGZsb3csIGlkZW50aXR5LCBwaXBlLCBTSyB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgZmxhcCBhcyBmbGFwXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0IHsgc2VwYXJhdGVkIH0gZnJvbSAnLi9TZXBhcmF0ZWQnO1xuaW1wb3J0ICogYXMgUyBmcm9tICcuL3N0cmluZyc7XG5pbXBvcnQgeyB3aWx0RGVmYXVsdCwgd2l0aGVyRGVmYXVsdCB9IGZyb20gJy4vV2l0aGVyYWJsZSc7XG4vKipcbiAqIEJ1aWxkcyBhIGBSZWFkb25seVJlY29yZGAgYnkgY29weWluZyBhIGBSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBSZWFkb25seVJlY29yZCwgZnJvbVJlY29yZCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogY29uc3QgeDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHsgYTogMSwgYjogMiB9O1xuICogY29uc3QgeTogUmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0gZnJvbVJlY29yZCh4KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoeCx5KTtcbiAqIC8vIGB5LmEgPSA1YCBnaXZlcyBjb21waWxlciBlcnJvclxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZnJvbVJlY29yZCA9IGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByKTsgfTtcbi8qKlxuICogQnVpbGRzIGEgbXV0YWJsZSBgUmVjb3JkYCBmcm9tIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUmVhZG9ubHlSZWNvcmQsIHRvUmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBjb25zdCB4OiBSZWFkb25seVJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7IGE6IDEsIGI6IDIgfTtcbiAqIGNvbnN0IHk6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB0b1JlY29yZCh4KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoeCx5KTtcbiAqIHkuYSA9IDU7IC8vIGl0J3Mgb2ssIHkgaXMgbXV0YWJsZVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdG9SZWNvcmQgPSBmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcik7IH07XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGtleS92YWx1ZSBwYWlycyBpbiBhIGBSZWFkb25seVJlY29yZGAsXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNpemUgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNpemUoeyBhOiB0cnVlLCBiOiAyLCBjOiBcInRocmVlXCIgfSksIDMpO1xuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNpemUgPSBmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmtleXMocikubGVuZ3RoOyB9O1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYSBgUmVhZG9ubHlSZWNvcmRgIGlzIGVtcHR5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGlzRW1wdHkoe30pLCB0cnVlKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaXNFbXB0eSh7IGE6IDMgfSksIGZhbHNlKTtcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGlzRW1wdHkgPSBmdW5jdGlvbiAocikge1xuICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufTtcbnZhciBrZXlzXyA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhyKS5zb3J0KE8uY29tcGFyZSk7XG4gICAgfTtcbn07XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGtleXMgPSAvKiNfX1BVUkVfXyovIGtleXNfKFMuT3JkKTtcbmV4cG9ydCBmdW5jdGlvbiBjb2xsZWN0KE8pIHtcbiAgICBpZiAodHlwZW9mIE8gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGNvbGxlY3QoUy5PcmQpKE8pO1xuICAgIH1cbiAgICB2YXIga2V5c08gPSBrZXlzXyhPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0ga2V5c08ocik7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChmKGtleSwgcltrZXldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59XG4vKipcbiAqIEdldCBhIHNvcnRlZCBgUmVhZG9ubHlBcnJheWAgb2YgdGhlIGtleS92YWx1ZSBwYWlycyBjb250YWluZWQgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB0b1JlYWRvbmx5QXJyYXkgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBjb25zdCB4ID0geyBjOiAzLCBhOiBcImZvb1wiLCBiOiBmYWxzZSB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0b1JlYWRvbmx5QXJyYXkoeCksIFtcbiAqICAgW1wiYVwiLCBcImZvb1wiXSxcbiAqICAgW1wiYlwiLCBmYWxzZV0sXG4gKiAgIFtcImNcIiwgM10sXG4gKiBdKTtcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHRvUmVhZG9ubHlBcnJheSA9IFxuLyojX19QVVJFX18qLyBjb2xsZWN0KFMuT3JkKShmdW5jdGlvbiAoaywgYSkgeyByZXR1cm4gW2ssIGFdOyB9KTtcbmV4cG9ydCBmdW5jdGlvbiB0b1VuZm9sZGFibGUoVSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgc2FzID0gdG9SZWFkb25seUFycmF5KHIpO1xuICAgICAgICB2YXIgbGVuID0gc2FzLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIFUudW5mb2xkKDAsIGZ1bmN0aW9uIChiKSB7IHJldHVybiAoYiA8IGxlbiA/IF8uc29tZShbc2FzW2JdLCBiICsgMV0pIDogXy5ub25lKTsgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogSW5zZXJ0IG9yIHJlcGxhY2UgYSBrZXkvdmFsdWUgcGFpciBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVwc2VydEF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cHNlcnRBdChcImFcIiwgNSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDUsIGI6IDIgfSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwc2VydEF0KFwiY1wiLCA1KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogMSwgYjogMiwgYzogNSB9KTtcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgdXBzZXJ0QXQgPSBmdW5jdGlvbiAoaywgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSAmJiByW2tdID09PSBhKSB7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gT2JqZWN0LmFzc2lnbih7fSwgcik7XG4gICAgICAgIG91dFtrXSA9IGE7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBvciBub3QgYSBrZXkgZXhpc3RzIGluIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBOb3RlLiBUaGlzIGZ1bmN0aW9uIGlzIG5vdCBwaXBlYWJsZSBiZWNhdXNlIGlzIGEgYFJlZmluZW1lbnRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBoYXMgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGhhcyhcImFcIiwgeyBhOiAxLCBiOiAyIH0pLCB0cnVlKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaGFzKFwiY1wiLCB7IGE6IDEsIGI6IDIgfSksIGZhbHNlKTtcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgaGFzID0gZnVuY3Rpb24gKGssIHIpIHsgcmV0dXJuIF8uaGFzLmNhbGwociwgayk7IH07XG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQXQoaykge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBpZiAoIV8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBPYmplY3QuYXNzaWduKHt9LCByKTtcbiAgICAgICAgZGVsZXRlIG91dFtrXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxuLyoqXG4gKiBSZXBsYWNlIGEga2V5L3ZhbHVlIHBhaXIgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEByZXR1cm5zIElmIHRoZSBzcGVjaWZpZWQga2V5IGV4aXN0cyBpdCByZXR1cm5zIGFuIGBPcHRpb25gIGNvbnRhaW5pbmcgYSBuZXcgYFJlY29yZGBcbiAqIHdpdGggdGhlIGVudHJ5IHVwZGF0ZWQsIG90aGVyd2lzZSBpdCByZXR1cm5zIGBOb25lYFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1cGRhdGVBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cGRhdGVBdChcImFcIiwgMykoeyBhOiAxLCBiOiAyIH0pLCBvcHRpb24uc29tZSh7IGE6IDMsIGI6IDIgfSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cGRhdGVBdChcImNcIiwgMykoeyBhOiAxLCBiOiAyIH0pLCBvcHRpb24ubm9uZSk7XG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlQXQgPSBmdW5jdGlvbiAoaywgYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBpZiAoIWhhcyhrLCByKSkge1xuICAgICAgICAgICAgcmV0dXJuIF8ubm9uZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocltrXSA9PT0gYSkge1xuICAgICAgICAgICAgcmV0dXJuIF8uc29tZShyKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gT2JqZWN0LmFzc2lnbih7fSwgcik7XG4gICAgICAgIG91dFtrXSA9IGE7XG4gICAgICAgIHJldHVybiBfLnNvbWUob3V0KTtcbiAgICB9O1xufTtcbi8qKlxuICogQXBwbGllcyBhIG1hcHBpbmcgZnVuY3Rpb24gdG8gb25lIHNwZWNpZmljIGtleS92YWx1ZSBwYWlyIGluIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAcmV0dXJucyBJZiB0aGUgc3BlY2lmaWVkIGtleSBleGlzdHMgaXQgcmV0dXJucyBhbiBgT3B0aW9uYCBjb250YWluaW5nIGEgbmV3IGBSZWNvcmRgXG4gKiB3aXRoIHRoZSBlbnRyeSB1cGRhdGVkLCBvdGhlcndpc2UgaXQgcmV0dXJucyBgTm9uZWBcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbW9kaWZ5QXQgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobW9kaWZ5QXQoXCJhXCIsICh4OiBudW1iZXIpID0+IHggKiAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5zb21lKHsgYTogMywgYjogMiB9KSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG1vZGlmeUF0KFwiY1wiLCAoeDogbnVtYmVyKSA9PiB4ICogMykoeyBhOiAxLCBiOiAyIH0pLCBvcHRpb24ubm9uZSk7XG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgbW9kaWZ5QXQgPSBmdW5jdGlvbiAoaywgZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBpZiAoIWhhcyhrLCByKSkge1xuICAgICAgICAgICAgcmV0dXJuIF8ubm9uZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV4dCA9IGYocltrXSk7XG4gICAgICAgIGlmIChuZXh0ID09PSByW2tdKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5zb21lKHIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBPYmplY3QuYXNzaWduKHt9LCByKTtcbiAgICAgICAgb3V0W2tdID0gbmV4dDtcbiAgICAgICAgcmV0dXJuIF8uc29tZShvdXQpO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBvcChrKSB7XG4gICAgdmFyIGRlbGV0ZUF0ayA9IGRlbGV0ZUF0KGspO1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgb2EgPSBsb29rdXAoaywgcik7XG4gICAgICAgIHJldHVybiBfLmlzTm9uZShvYSkgPyBfLm5vbmUgOiBfLnNvbWUoW29hLnZhbHVlLCBkZWxldGVBdGsocildKTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU3VicmVjb3JkKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1lLCB0aGF0KSB7XG4gICAgICAgIGlmICh0aGF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBpc1N1YnJlY29yZEVfMSA9IGlzU3VicmVjb3JkKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0aGF0KSB7IHJldHVybiBpc1N1YnJlY29yZEVfMSh0aGF0LCBtZSk7IH07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgayBpbiBtZSkge1xuICAgICAgICAgICAgaWYgKCFfLmhhcy5jYWxsKHRoYXQsIGspIHx8ICFFLmVxdWFscyhtZVtrXSwgdGhhdFtrXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb29rdXAoaywgcikge1xuICAgIGlmIChyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7IHJldHVybiBsb29rdXAoaywgcik7IH07XG4gICAgfVxuICAgIHJldHVybiBfLmhhcy5jYWxsKHIsIGspID8gXy5zb21lKHJba10pIDogXy5ub25lO1xufVxuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBlbXB0eSA9IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIG1hcFdpdGhJbmRleChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IGYoaywgcltrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1hcChmKSB7XG4gICAgcmV0dXJuIG1hcFdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlV2l0aEluZGV4KCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIHJlZHVjZVdpdGhJbmRleChTLk9yZCkuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICB9XG4gICAgdmFyIGtleXNPID0ga2V5c18oYXJnc1swXSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgdmFyIG91dCA9IGI7XG4gICAgICAgIHZhciBrcyA9IGtleXNPKGZhKTtcbiAgICAgICAgdmFyIGxlbiA9IGtzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIGsgPSBrc1tpXTtcbiAgICAgICAgICAgIG91dCA9IGYoaywgb3V0LCBmYVtrXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9OyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvbGRNYXBXaXRoSW5kZXgoTykge1xuICAgIGlmICgnY29tcGFyZScgaW4gTykge1xuICAgICAgICB2YXIga2V5c09fMSA9IGtleXNfKE8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKE0pIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dCA9IE0uZW1wdHk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrcyA9IGtleXNPXzEoZmEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0ga3MubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgayA9IGtzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0ID0gTS5jb25jYXQob3V0LCBmKGssIGZhW2tdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZvbGRNYXBXaXRoSW5kZXgoUy5PcmQpKE8pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVJpZ2h0V2l0aEluZGV4KCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4KFMuT3JkKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgIH1cbiAgICB2YXIga2V5c08gPSBrZXlzXyhhcmdzWzBdKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgb3V0ID0gYjtcbiAgICAgICAgdmFyIGtzID0ga2V5c08oZmEpO1xuICAgICAgICB2YXIgbGVuID0ga3MubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gbGVuIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciBrID0ga3NbaV07XG4gICAgICAgICAgICBvdXQgPSBmKGssIGZhW2tdLCBvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTsgfTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgYFJlYWRvbmx5UmVjb3JkYCB3aXRoIG9uZSBrZXkvdmFsdWUgcGFpci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2luZ2xldG9uIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCI7XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzaW5nbGV0b24oXCJhXCIsIDEpLCB7IGE6IDEgfSk7XG4gKlxuICogQGNhdGVnb3J5IGNvbnN0cnVjdG9yc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgc2luZ2xldG9uID0gZnVuY3Rpb24gKGssIGEpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIChfYSA9IHt9LCBfYVtrXSA9IGEsIF9hKTtcbn07XG5leHBvcnQgZnVuY3Rpb24gdHJhdmVyc2VXaXRoSW5kZXgoRikge1xuICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleE9GID0gX3RyYXZlcnNlV2l0aEluZGV4KFMuT3JkKShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh0YSkgeyByZXR1cm4gdHJhdmVyc2VXaXRoSW5kZXhPRih0YSwgZik7IH07IH07XG59XG5leHBvcnQgZnVuY3Rpb24gdHJhdmVyc2UoRikge1xuICAgIHZhciB0cmF2ZXJzZU9GID0gX3RyYXZlcnNlKFMuT3JkKShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh0YSkgeyByZXR1cm4gdHJhdmVyc2VPRih0YSwgZik7IH07IH07XG59XG5leHBvcnQgZnVuY3Rpb24gc2VxdWVuY2UoRikge1xuICAgIHJldHVybiBfc2VxdWVuY2UoUy5PcmQpKEYpO1xufVxuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aXRoZXIgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZUYgPSB0cmF2ZXJzZShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5tYXAocGlwZShmYSwgdHJhdmVyc2VGKGYpKSwgY29tcGFjdCk7IH07IH07XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi42LjVcbiAqL1xuZXhwb3J0IHZhciB3aWx0ID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYubWFwKHBpcGUoZmEsIHRyYXZlcnNlRihmKSksIHNlcGFyYXRlKTsgfTsgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gcGFydGl0aW9uTWFwV2l0aEluZGV4KGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIGxlZnQgPSB7fTtcbiAgICAgICAgdmFyIHJpZ2h0ID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGYoaywgcltrXSk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChlLl90YWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTGVmdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0W2tdID0gZS5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0W2tdID0gZS5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpdGlvbldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIGxlZnQgPSB7fTtcbiAgICAgICAgdmFyIHJpZ2h0ID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IHJba107XG4gICAgICAgICAgICAgICAgaWYgKHByZWRpY2F0ZVdpdGhJbmRleChrLCBhKSkge1xuICAgICAgICAgICAgICAgICAgICByaWdodFtrXSA9IGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0W2tdID0gYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0LCByaWdodCk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJNYXBXaXRoSW5kZXgoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2IgPSBmKGssIHJba10pO1xuICAgICAgICAgICAgICAgIGlmIChfLmlzU29tZShvYikpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tdID0gb2IudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJXaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBmYSkge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwoZmEsIGtleSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGZhW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKHByZWRpY2F0ZVdpdGhJbmRleChrZXksIGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrZXldID0gYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhbmdlZCA/IG91dCA6IGZhO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbUZvbGRhYmxlKE0sIEYpIHtcbiAgICB2YXIgZnJvbUZvbGRhYmxlTWFwTSA9IGZyb21Gb2xkYWJsZU1hcChNLCBGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZrYSkgeyByZXR1cm4gZnJvbUZvbGRhYmxlTWFwTShma2EsIGlkZW50aXR5KTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRm9sZGFibGVNYXAoTSwgRikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHtcbiAgICAgICAgcmV0dXJuIEYucmVkdWNlKHRhLCB7fSwgZnVuY3Rpb24gKHIsIGEpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IGYoYSksIGsgPSBfYVswXSwgYiA9IF9hWzFdO1xuICAgICAgICAgICAgcltrXSA9IF8uaGFzLmNhbGwociwgaykgPyBNLmNvbmNhdChyW2tdLCBiKSA6IGI7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogQWxpYXMgb2YgW2B0b1JlYWRvbmx5QXJyYXlgXSgjdG9yZWFkb25seWFycmF5KS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdG9FbnRyaWVzIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh0b0VudHJpZXMoeyBiOiAyLCBhOiAxIH0pLCBbWydhJywgMV0sIFsnYicsIDJdXSlcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjEyLjBcbiAqL1xuZXhwb3J0IHZhciB0b0VudHJpZXMgPSB0b1JlYWRvbmx5QXJyYXk7XG4vKipcbiAqIENvbnZlcnRzIGEgYFJlYWRvbmx5QXJyYXlgIG9mIGBba2V5LCB2YWx1ZV1gIHR1cGxlcyBpbnRvIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZnJvbUVudHJpZXMgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21FbnRyaWVzKFtbJ2EnLCAxXSwgWydiJywgMl0sIFsnYScsIDNdXSksIHsgYjogMiwgYTogMyB9KVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICovXG5leHBvcnQgdmFyIGZyb21FbnRyaWVzID0gZnVuY3Rpb24gKGZhKSB7XG4gICAgdmFyIG91dCA9IHt9O1xuICAgIGZvciAodmFyIF9pID0gMCwgZmFfMSA9IGZhOyBfaSA8IGZhXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBhID0gZmFfMVtfaV07XG4gICAgICAgIG91dFthWzBdXSA9IGFbMV07XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGV2ZXJ5KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmICghcHJlZGljYXRlKHJba10pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG4vKipcbiAqIFRlc3QgaWYgYXQgbGVhc3Qgb25lIHZhbHVlIGluIGEgYFJlYWRvbmx5UmVjb3JkYCBzYXRpc2ZpZXMgdGhlIHByZWRpY2F0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc29tZSB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb21lKChuOiBudW1iZXIpID0+IG4gPj0gMCkoeyBhOiAxLCBiOiAtMiB9KSwgdHJ1ZSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvbWUoKG46IG51bWJlcikgPT4gbiA+PSAwKSh7IGE6IC0xLCBiOiAtMiB9KSwgZmFsc2UpO1xuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc29tZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKHJba10pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZWxlbShFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBmYSkge1xuICAgICAgICBpZiAoZmEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGVsZW1FXzEgPSBlbGVtKEUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gZWxlbUVfMShhLCBmYSk7IH07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgayBpbiBmYSkge1xuICAgICAgICAgICAgaWYgKEUuZXF1YWxzKGZhW2tdLCBhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufVxuLyoqXG4gKiBVbmlvbiBvZiB0d28gYFJlYWRvbmx5UmVjb3JkYHMuXG4gKiBUYWtlcyB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYW5kIHByb2R1Y2VzIGEgYFJlYWRvbmx5UmVjb3JkYCBjb21iaW5pbmcgYWxsIHRoZVxuICogZW50cmllcyBvZiB0aGUgdHdvIGlucHV0cy5cbiAqIEl0IHVzZXMgdGhlIGBjb25jYXRgIGZ1bmN0aW9uIG9mIHRoZSBwcm92aWRlZCBgTWFnbWFgIHRvXG4gKiBjb21iaW5lIHRoZSBlbGVtZW50cyB3aXRoIHRoZSBzYW1lIGtleS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdW5pb24gfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqIGltcG9ydCB7IE1hZ21hIH0gZnJvbSBcImZwLXRzL01hZ21hXCI7XG4gKlxuICogY29uc3QgbTE6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB4ICsgeSB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmlvbihtMSkoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiA0LCBiOiAyLCBjOiAzIH0pO1xuICogY29uc3QgbTI6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlcikgPT4geCB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmlvbihtMikoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiAxLCBiOiAyLCBjOiAzIH0pO1xuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB1bmlvbiA9IGZ1bmN0aW9uIChNKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0VtcHR5KHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIGZpcnN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhcyhrLCBzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IE0uY29uY2F0KGZpcnN0W2tdLCBzZWNvbmRba10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tdID0gZmlyc3Rba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBzZWNvbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWhhcyhrLCBvdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IHNlY29uZFtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBJbnRlcnNlY3Rpb24gb2YgdHdvIGBSZWFkb25seVJlY29yZGBzLlxuICogVGFrZXMgdHdvIGBSZWFkb25seVJlY29yZGBzIGFuZCBwcm9kdWNlcyBhIGBSZWFkb25seVJlY29yZGAgY29tYmluaW5nIG9ubHkgdGhlXG4gKiBlbnRyaWVzIG9mIHRoZSB0d28gaW5wdXRzd2l0aCB0aGUgc2FtZSBrZXkuXG4gKiBJdCB1c2VzIHRoZSBgY29uY2F0YCBmdW5jdGlvbiBvZiB0aGUgcHJvdmlkZWQgYE1hZ21hYCB0b1xuICogY29tYmluZSB0aGUgZWxlbWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGludGVyc2VjdGlvbiB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiO1xuICogaW1wb3J0IHsgTWFnbWEgfSBmcm9tIFwiZnAtdHMvTWFnbWFcIjtcbiAqXG4gKiBjb25zdCBtMTogTWFnbWE8bnVtYmVyPiA9IHsgY29uY2F0OiAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IHggKyB5IH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc2VjdGlvbihtMSkoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiA0fSk7XG4gKiBjb25zdCBtMjogTWFnbWE8bnVtYmVyPiA9IHsgY29uY2F0OiAoeDogbnVtYmVyKSA9PiB4IH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGludGVyc2VjdGlvbihtMikoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiAxfSk7XG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGludGVyc2VjdGlvbiA9IGZ1bmN0aW9uIChNKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpIHx8IGlzRW1wdHkoc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gZmlyc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzKGssIHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tdID0gTS5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogRGlmZmVyZW5jZSBiZXR3ZWVuIHR3byBgUmVhZG9ubHlSZWNvcmRgcy5cbiAqIFRha2VzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBhbmQgcHJvZHVjZXMgYSBgUmVhZG9ubHlSZWNvcmRgIGNvbXBvc2VkIGJ5IHRoZVxuICogZW50cmllcyBvZiB0aGUgdHdvIGlucHV0cywgcmVtb3ZpbmcgdGhlIGVudHJpZXMgd2l0aCB0aGUgc2FtZVxuICoga2V5IGluIGJvdGggaW5wdXRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBkaWZmZXJlbmNlIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCI7XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkaWZmZXJlbmNlKHsgYTogMSB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYjogMiB9KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZGlmZmVyZW5jZSh7IGE6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGI6IDIgfSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRpZmZlcmVuY2UoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBiOiAyLCBjOiAzIH0pO1xuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBkaWZmZXJlbmNlID0gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Vjb25kO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0VtcHR5KHNlY29uZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gZmlyc3QpIHtcbiAgICAgICAgICAgIGlmICghaGFzKGssIHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICBvdXRba10gPSBmaXJzdFtrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrIGluIHNlY29uZCkge1xuICAgICAgICAgICAgaWYgKCFoYXMoaywgZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdID0gc2Vjb25kW2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIF9tYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIG1hcChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfbWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXBXaXRoSW5kZXgoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3JlZHVjZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHJlZHVjZU8gPSByZWR1Y2UoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlTyhiLCBmKSk7IH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBfZm9sZE1hcCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiBmdW5jdGlvbiAoTSkge1xuICAgIHZhciBmb2xkTWFwTSA9IGZvbGRNYXAoTykoTSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcE0oZikpOyB9O1xufTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHJlZHVjZVJpZ2h0TyA9IHJlZHVjZVJpZ2h0KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0TyhiLCBmKSk7IH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX2ZpbHRlciA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIGZpbHRlcihwcmVkaWNhdGUpKTtcbn07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfZmlsdGVyTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXAoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3BhcnRpdGlvbiA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb24ocHJlZGljYXRlKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25NYXAoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3JlZHVjZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHJlZHVjZVdpdGhJbmRleE8gPSByZWR1Y2VXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlV2l0aEluZGV4TyhiLCBmKSk7IH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBfZm9sZE1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhPID0gZm9sZE1hcFdpdGhJbmRleChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKE0pIHtcbiAgICAgICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleE8oTSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBXaXRoSW5kZXhNKGYpKTsgfTtcbiAgICB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9yZWR1Y2VSaWdodFdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHJlZHVjZVJpZ2h0V2l0aEluZGV4TyA9IHJlZHVjZVJpZ2h0V2l0aEluZGV4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVJpZ2h0V2l0aEluZGV4TyhiLCBmKSk7IH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3BhcnRpdGlvbk1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwV2l0aEluZGV4KGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9wYXJ0aXRpb25XaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25XaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSk7XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX2ZpbHRlck1hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyTWFwV2l0aEluZGV4KGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9maWx0ZXJXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZVdpdGhJbmRleCkgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBfdHJhdmVyc2UgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleE8gPSBfdHJhdmVyc2VXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB0cmF2ZXJzZVdpdGhJbmRleE9GID0gdHJhdmVyc2VXaXRoSW5kZXhPKEYpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleE9GKHRhLCBmbG93KFNLLCBmKSk7IH07XG4gICAgfTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIF9zZXF1ZW5jZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHRyYXZlcnNlTyA9IF90cmF2ZXJzZShPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKEYpIHtcbiAgICAgICAgdmFyIHRyYXZlcnNlT0YgPSB0cmF2ZXJzZU8oRik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEpIHsgcmV0dXJuIHRyYXZlcnNlT0YodGEsIGlkZW50aXR5KTsgfTtcbiAgICB9O1xufTtcbnZhciBfdHJhdmVyc2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoRikge1xuICAgICAgICB2YXIga2V5c08gPSBrZXlzXyhPKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikge1xuICAgICAgICAgICAgdmFyIGtzID0ga2V5c08odGEpO1xuICAgICAgICAgICAgaWYgKGtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBGLm9mKGVtcHR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmciA9IEYub2Yoe30pO1xuICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgZnIgPSBGLmFwKEYubWFwKGZyLCBmdW5jdGlvbiAocikgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgciwgKF9hID0ge30sIF9hW2tleV0gPSBiLCBfYSkpO1xuICAgICAgICAgICAgICAgIH07IH0pLCBmKGtleSwgdGFba2V5XSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwga3NfMSA9IGtzOyBfaSA8IGtzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtzXzFbX2ldO1xuICAgICAgICAgICAgICAgIF9sb29wXzEoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmcjtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogR2l2ZW4gYSBgUHJlZGljYXRlYCwgaXQgcHJvZHVjZXMgYSBuZXcgYFJlYWRvbmx5UmVjb3JkYCBrZWVwaW5nIG9ubHkgdGhlIGVudHJpZXMgd2l0aCBhXG4gKiB2YWx1ZSB0aGF0IHNhdGlzZmllcyB0aGUgcHJvdmlkZWQgcHJlZGljYXRlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaWx0ZXIgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmlsdGVyKChzOiBzdHJpbmcpID0+IHMubGVuZ3RoIDwgNCkoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcInZlcnlsb25nXCIgfSksIHtcbiAqICAgYTogXCJmb29cIixcbiAqICAgYjogXCJiYXJcIixcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZmlsdGVyV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBwcmVkaWNhdGUoYSk7IH0pO1xufTtcbi8qKlxuICogTWFwcyBhIGBSZWFkb25seVJlY29yZGAgd2l0aCBhbiBpdGVyYXRpbmcgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGBPcHRpb25gXG4gKiBhbmQgaXQga2VlcHMgb25seSB0aGUgYFNvbWVgIHZhbHVlcyBkaXNjYXJkaW5nIHRoZSBgTm9uZWBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaWx0ZXJNYXAgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSBcImZwLXRzXCJcbiAqXG4gKiBjb25zdCBmID0gKHM6IHN0cmluZykgPT4gcy5sZW5ndGggPCA0ID8gb3B0aW9uLnNvbWUoYCR7c30gaXMgc2hvcnRgKTogb3B0aW9uLm5vbmVcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmlsdGVyTWFwKGYpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiwgYzogXCJ2ZXJ5bG9uZ1wiIH0pLCB7XG4gKiAgIGE6IFwiZm9vIGlzIHNob3J0XCIsXG4gKiAgIGI6IFwiYmFyIGlzIHNob3J0XCIsXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJNYXAgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gZmlsdGVyTWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbi8qKlxuICogUGFydGl0aW9uIGEgYFJlYWRvbmx5UmVjb3JkYCBpbnRvIHR3byBwYXJ0cyBhY2NvcmRpbmcgdG8gYSBgUHJlZGljYXRlYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGFydGl0aW9uIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBhcnRpdGlvbigoczogc3RyaW5nKSA9PiBzLmxlbmd0aCA8IDQpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiwgYzogXCJ2ZXJ5bG9uZ1wiIH0pLCB7XG4gKiAgIGxlZnQ6e1xuICogICAgIGM6IFwidmVyeWxvbmdcIlxuICogICB9LFxuICogICByaWdodDoge1xuICogICAgIGE6IFwiZm9vXCIsXG4gKiAgICAgYjogXCJiYXJcIixcbiAqICAgfSxcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbiA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gcGFydGl0aW9uV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBwcmVkaWNhdGUoYSk7IH0pO1xufTtcbi8qKlxuICogTWFwcyBhIGBSZWFkb25seVJlY29yZGAgd2l0aCBhIGZ1bmN0aW9uIHJldHVybmluZyBhbiBgRWl0aGVyYCBhbmRcbiAqIHBhcnRpdGlvbnMgdGhlIHJlc3VsdGluZyBgUmVhZG9ubHlSZWNvcmRgIGludG8gYExlZnRgcyBhbmQgYFJpZ2h0YHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBhcnRpdGlvbk1hcCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKiBpbXBvcnQgeyBlaXRoZXIgfSBmcm9tIFwiZnAtdHNcIlxuICpcbiAqIGNvbnN0IGYgPSAoczogc3RyaW5nKSA9PiAocy5sZW5ndGggPCA0ID8gZWl0aGVyLnJpZ2h0KGAke3N9IGlzIHNob3J0YCkgOiBlaXRoZXIubGVmdChgJHtzfSBpcyBub3Qgc2hvcnRgKSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBhcnRpdGlvbk1hcChmKSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIsIGM6IFwidmVyeWxvbmdcIiB9KSwge1xuICogICBsZWZ0OiB7XG4gKiAgICAgYzogXCJ2ZXJ5bG9uZyBpcyBub3Qgc2hvcnRcIixcbiAqICAgfSxcbiAqICAgcmlnaHQ6IHtcbiAqICAgICBhOiBcImZvbyBpcyBzaG9ydFwiLFxuICogICAgIGI6IFwiYmFyIGlzIHNob3J0XCIsXG4gKiAgIH0sXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufTtcbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2UoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB2YXIgcmVkdWNlV2l0aEluZGV4T18xID0gcmVkdWNlV2l0aEluZGV4KGFyZ3NbMF0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIHJlZHVjZVdpdGhJbmRleE9fMShiLCBmdW5jdGlvbiAoXywgYiwgYSkgeyByZXR1cm4gZihiLCBhKTsgfSk7IH07XG4gICAgfVxuICAgIHJldHVybiByZWR1Y2UoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZm9sZE1hcChPKSB7XG4gICAgaWYgKCdjb21wYXJlJyBpbiBPKSB7XG4gICAgICAgIHZhciBmb2xkTWFwV2l0aEluZGV4T18xID0gZm9sZE1hcFdpdGhJbmRleChPKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChNKSB7XG4gICAgICAgICAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE0gPSBmb2xkTWFwV2l0aEluZGV4T18xKE0pO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmb2xkTWFwV2l0aEluZGV4TShmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmb2xkTWFwKFMuT3JkKShPKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VSaWdodCgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHZhciByZWR1Y2VSaWdodFdpdGhJbmRleE9fMSA9IHJlZHVjZVJpZ2h0V2l0aEluZGV4KGFyZ3NbMF0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIHJlZHVjZVJpZ2h0V2l0aEluZGV4T18xKGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlZHVjZVJpZ2h0KFMuT3JkKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufVxuLyoqXG4gKiBDb21wYWN0IGEgYFJlYWRvbmx5UmVjb3JkYCBvZiBgT3B0aW9uYHMgZGlzY2FyZGluZyB0aGUgYE5vbmVgIHZhbHVlcyBhbmRcbiAqIGtlZXBpbmcgdGhlIGBTb21lYCB2YWx1ZXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGNvbXBhY3QgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcGFjdCh7IGE6IG9wdGlvbi5zb21lKFwiZm9vXCIpLCBiOiBvcHRpb24ubm9uZSwgYzogb3B0aW9uLnNvbWUoXCJiYXJcIikgfSksIHtcbiAqICAgYTogXCJmb29cIixcbiAqICAgYzogXCJiYXJcIixcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGNvbXBhY3QgPSBmdW5jdGlvbiAocikge1xuICAgIHZhciBvdXQgPSB7fTtcbiAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgIHZhciBvYSA9IHJba107XG4gICAgICAgICAgICBpZiAoXy5pc1NvbWUob2EpKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdID0gb2EudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIFNlcGFyYXRlIGEgYFJlYWRvbmx5UmVjb3JkYCBvZiBgRWl0aGVyYHMgaW50byBgTGVmdGBzIGFuZCBgUmlnaHRgcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2VwYXJhdGUgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqIGltcG9ydCB7IGVpdGhlciB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHNlcGFyYXRlKHsgYTogZWl0aGVyLnJpZ2h0KFwiZm9vXCIpLCBiOiBlaXRoZXIubGVmdChcImJhclwiKSwgYzogZWl0aGVyLnJpZ2h0KFwiYmF6XCIpIH0pLFxuICogICB7XG4gKiAgICAgcmlnaHQ6IHtcbiAqICAgICAgIGE6IFwiZm9vXCIsXG4gKiAgICAgICBjOiBcImJhelwiLFxuICogICAgIH0sXG4gKiAgICAgbGVmdDoge1xuICogICAgICAgYjogXCJiYXJcIixcbiAqICAgICB9LFxuICogICB9XG4gKiApO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNlcGFyYXRlID0gZnVuY3Rpb24gKHIpIHtcbiAgICB2YXIgbGVmdCA9IHt9O1xuICAgIHZhciByaWdodCA9IHt9O1xuICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgdmFyIGUgPSByW2tdO1xuICAgICAgICAgICAgaWYgKF8uaXNMZWZ0KGUpKSB7XG4gICAgICAgICAgICAgICAgbGVmdFtrXSA9IGUubGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJpZ2h0W2tdID0gZS5yaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdSZWFkb25seVJlY29yZCc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hvdyhPKSB7XG4gICAgaWYgKCdjb21wYXJlJyBpbiBPKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gY29sbGVjdChPKShmdW5jdGlvbiAoaywgYSkgeyByZXR1cm4gXCJcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoayksIFwiOiBcIikuY29uY2F0KFMuc2hvdyhhKSk7IH0pKHIpLmpvaW4oJywgJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzID09PSAnJyA/ICd7fScgOiBcInsgXCIuY29uY2F0KGVsZW1lbnRzLCBcIiB9XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIGdldFNob3coUy5PcmQpKE8pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVxKEUpIHtcbiAgICB2YXIgaXNTdWJyZWNvcmRFID0gaXNTdWJyZWNvcmQoRSk7XG4gICAgcmV0dXJuIGZyb21FcXVhbHMoZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGlzU3VicmVjb3JkRSh4KSh5KSAmJiBpc1N1YnJlY29yZEUoeSkoeCk7IH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE1vbm9pZChTKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0VtcHR5KHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgciA9IE9iamVjdC5hc3NpZ24oe30sIGZpcnN0KTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gc2Vjb25kKSB7XG4gICAgICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwoc2Vjb25kLCBrKSkge1xuICAgICAgICAgICAgICAgICAgICByW2tdID0gXy5oYXMuY2FsbChmaXJzdCwgaykgPyBTLmNvbmNhdChmaXJzdFtrXSwgc2Vjb25kW2tdKSA6IHNlY29uZFtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW1wdHk6IGVtcHR5XG4gICAgfTtcbn1cbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvciA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXBcbn07XG4vKipcbiAqIFRha2VzIGEgdmFsdWUgYW5kIGEgYFJlYWRvbmx5UmVjb3JkYCBvZiBmdW5jdGlvbnMgYW5kIHJldHVybnMgYVxuICogYFJlYWRvbmx5UmVjb3JkYCBieSBhcHBseWluZyBlYWNoIGZ1bmN0aW9uIHRvIHRoZSBpbnB1dCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmxhcCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogY29uc3QgZmFiID0geyB4OiAobjogbnVtYmVyKSA9PiBgJHtufSB0aW1lcyAyYCwgeTogKG46IG51bWJlcikgPT4gYCR7biAqIDJ9YCB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmbGFwKDMpKGZhYiksIHtcbiAqICAgeDogXCIzIHRpbWVzIDJcIixcbiAqICAgeTogXCI2XCIsXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgbWFwcGluZ1xuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGZsYXAgPSAvKiNfX1BVUkVfXyovIGZsYXBfKEZ1bmN0b3IpO1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXhcbn07XG4vKipcbiAqIFByb2R1Y2VzIGEgYEZvbGRhYmxlYCBpbnN0YW5jZSBmb3IgYSBgUmVhZG9ubHlSZWNvcmRgLCB1c2luZyB0aGVcbiAqIHByb3ZpZGVkIGBPcmRgIHRvIHNvcnQgdGhlIGBSZWFkb25seVJlY29yZGAncyBlbnRyaWVzIGJ5IGtleS5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldEZvbGRhYmxlID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTylcbn0pOyB9O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBGb2xkYWJsZVdpdGhJbmRleDFgIGluc3RhbmNlIGZvciBhIGBSZWFkb25seVJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlYWRvbmx5UmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rm9sZGFibGVXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UoTyksXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAoTyksXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodChPKSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgoTyksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgoTyksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleChPKVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIENvbXBhY3RhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGaWx0ZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXBcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgZmlsdGVyTWFwV2l0aEluZGV4OiBfZmlsdGVyTWFwV2l0aEluZGV4LFxuICAgIGZpbHRlcldpdGhJbmRleDogX2ZpbHRlcldpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IF9wYXJ0aXRpb25NYXBXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uV2l0aEluZGV4OiBfcGFydGl0aW9uV2l0aEluZGV4XG59O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBUcmF2ZXJzYWJsZWAgaW5zdGFuY2UgZm9yIGEgYFJlYWRvbmx5UmVjb3JkYCwgdXNpbmcgdGhlXG4gKiBwcm92aWRlZCBgT3JkYCB0byBzb3J0IHRoZSBgUmVhZG9ubHlSZWNvcmRgJ3MgZW50cmllcyBieSBrZXkuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRUcmF2ZXJzYWJsZSA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UoTyksXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAoTyksXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodChPKSxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlKE8pLFxuICAgIHNlcXVlbmNlOiBfc2VxdWVuY2UoTylcbn0pOyB9O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBUcmF2ZXJzYWJsZVdpdGhJbmRleGAgaW5zdGFuY2UgZm9yIGEgYFJlYWRvbmx5UmVjb3JkYCwgdXNpbmcgdGhlXG4gKiBwcm92aWRlZCBgT3JkYCB0byBzb3J0IHRoZSBgUmVhZG9ubHlSZWNvcmRgJ3MgZW50cmllcyBieSBrZXkuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTyksXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4KE8pLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4KE8pLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoTyksXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZShPKSxcbiAgICBzZXF1ZW5jZTogX3NlcXVlbmNlKE8pLFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXgoTylcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0V2l0aGVyYWJsZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFQgPSBnZXRUcmF2ZXJzYWJsZShPKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBVUkk6IFVSSSxcbiAgICAgICAgbWFwOiBfbWFwLFxuICAgICAgICByZWR1Y2U6IF9yZWR1Y2UoTyksXG4gICAgICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgICAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pLFxuICAgICAgICB0cmF2ZXJzZTogVC50cmF2ZXJzZSxcbiAgICAgICAgc2VxdWVuY2U6IFQuc2VxdWVuY2UsXG4gICAgICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICAgICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgICAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICAgICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgICAgICB3aXRoZXI6IHdpdGhlckRlZmF1bHQoVCwgQ29tcGFjdGFibGUpLFxuICAgICAgICB3aWx0OiB3aWx0RGVmYXVsdChULCBDb21wYWN0YWJsZSlcbiAgICB9O1xufTtcbi8qKlxuICogR2l2ZW4gYSBgU2VtaWdyb3VwYCBpbiB0aGUgYmFzZSB0eXBlLCBpdCBwcm9kdWNlcyBhIGBTZW1pZ3JvdXBgXG4gKiBpbiB0aGUgYFJlYWRvbmx5UmVjb3JkYCBvZiB0aGUgYmFzZSB0eXBlLlxuICogVGhlIHJlc3VsdGluZyBgU2VtaWdyb3VwYCBjb25jYXRlbmF0ZXMgdHdvIGBSZWFkb25seVJlY29yZGBzIGJ5XG4gKiBgdW5pb25gLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRVbmlvblNlbWlncm91cCwgUmVhZG9ubHlSZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgU2VtaWdyb3VwIH0gZnJvbSBcImZwLXRzL1NlbWlncm91cFwiXG4gKlxuICogY29uc3Qgc051bWJlcjogU2VtaWdyb3VwPG51bWJlcj4gPSB7IGNvbmNhdDogKHgsIHkpID0+IHggLSB5IH07XG4gKiBjb25zdCBzUmVhZG9ubHlSZWNvcmQ6IFNlbWlncm91cDxSZWFkb25seVJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0gZ2V0VW5pb25TZW1pZ3JvdXAoc051bWJlcik7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNSZWFkb25seVJlY29yZC5jb25jYXQoeyBhOiAxLCBiOiAyIH0sIHsgYjogMywgYzogNCB9KSwgeyBhOiAxLCBiOiAtMSwgYzogNCB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VW5pb25TZW1pZ3JvdXAgPSBmdW5jdGlvbiAoUykge1xuICAgIHZhciB1bmlvblMgPSB1bmlvbihTKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiB1bmlvblMoc2Vjb25kKShmaXJzdCk7IH1cbiAgICB9O1xufTtcbi8qKlxuICogU2FtZSBhcyBgZ2V0TW9ub2lkYC5cbiAqIFJldHVybnMgYSBgTW9ub2lkYCBpbnN0YW5jZSBmb3IgYFJlYWRvbmx5UmVjb3JkYHMgZ2l2ZW4gYSBgU2VtaWdyb3VwYFxuICogaW5zdGFuY2UgZm9yIHRoZSBiYXNlIHR5cGUuXG4gKiBUaGUgYE1vbm9pZGAgbWFrZXMgdGhlIHVuaW9uIG9mIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBjb21iaW5pbmcgdGhlXG4gKiBlbnRyaWVzIHRoYXQgaGF2ZSB0aGUgc2FtZSBrZXkgd2l0aCB0aGUgcHJvdmlkZWQgYFNlbWlncm91cGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFNlbWlncm91cFN1bSB9IGZyb20gJ2ZwLXRzL251bWJlcidcbiAqIGltcG9ydCB7IGdldFVuaW9uTW9ub2lkIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogY29uc3QgTSA9IGdldFVuaW9uTW9ub2lkKFNlbWlncm91cFN1bSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKE0uY29uY2F0KHsgZm9vOiAxMjMsIGJhcjogMjM0IH0sIHsgZm9vOiA0NTYsIGJhejogNTY3IH0pLCB7IGZvbzogNTc5ICwgYmFyOiAyMzQsIGJhejogNTY3IH0pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvbk1vbm9pZCA9IGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZ2V0VW5pb25TZW1pZ3JvdXAoUykuY29uY2F0LFxuICAgIGVtcHR5OiBlbXB0eVxufSk7IH07XG4vKipcbiAqIEdpdmVuIGEgYFNlbWlncm91cGAgaW4gdGhlIGJhc2UgdHlwZSwgaXQgcHJvZHVjZXMgYSBgU2VtaWdyb3VwYFxuICogaW4gdGhlIGBSZWFkb25seVJlY29yZGAgb2YgdGhlIGJhc2UgdHlwZS5cbiAqIFRoZSByZXN1bHRpbmcgYFNlbWlncm91cGAgY29uY2F0ZW5hdGVzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBieVxuICogYGludGVyc2VjdGlvbmAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEludGVyc2VjdGlvblNlbWlncm91cCwgUmVhZG9ubHlSZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgU2VtaWdyb3VwIH0gZnJvbSBcImZwLXRzL1NlbWlncm91cFwiXG4gKlxuICogY29uc3Qgc051bWJlcjogU2VtaWdyb3VwPG51bWJlcj4gPSB7IGNvbmNhdDogKHgsIHkpID0+IHggLSB5IH07XG4gKiBjb25zdCBzUmVhZG9ubHlSZWNvcmQ6IFNlbWlncm91cDxSZWFkb25seVJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0gZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwKHNOdW1iZXIpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzUmVhZG9ubHlSZWNvcmQuY29uY2F0KHsgYTogMSwgYjogMiB9LCB7IGI6IDMsIGM6IDQgfSksIHsgYjogLTEgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldEludGVyc2VjdGlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIGludGVyc2VjdGlvblMgPSBpbnRlcnNlY3Rpb24oUyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gaW50ZXJzZWN0aW9uUyhzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBNYWdtYWAgd2l0aCBhIGBjb25jYXRgIGZ1bmN0aW9uIHRoYXQgY29tYmluZXNcbiAqIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBieSBtYWtpbmcgdGhlIGBkaWZmZXJlbmNlYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0RGlmZmVyZW5jZU1hZ21hLCBkaWZmZXJlbmNlLCBSZWFkb25seVJlY29yZCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKiBpbXBvcnQgeyBNYWdtYSB9IGZyb20gXCJmcC10cy9NYWdtYVwiXG4gKlxuICogY29uc3QgcjEgPSB7IGE6IDMsIGM6IDMgfTtcbiAqIGNvbnN0IHIyID0geyBhOiAxLCBiOiAyIH07XG4gKiBjb25zdCBtOiBNYWdtYTxSZWFkb25seVJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0gZ2V0RGlmZmVyZW5jZU1hZ21hPG51bWJlcj4oKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobS5jb25jYXQocjEsIHIyKSwgZGlmZmVyZW5jZShyMikocjEpKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobS5jb25jYXQocjEsIHIyKSwgeyBjOiAzLCBiOiAyIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXREaWZmZXJlbmNlTWFnbWEgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGRpZmZlcmVuY2Uoc2Vjb25kKShmaXJzdCk7IH1cbn0pOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgYGdldEZvbGRhYmxlYCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZClcbn07XG4vKipcbiAqIFVzZSBgZ2V0Rm9sZGFibGVXaXRoSW5kZXhgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVdpdGhJbmRleChTLk9yZCksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfZm9sZE1hcFdpdGhJbmRleChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0V2l0aEluZGV4KFMuT3JkKVxufTtcbi8qKlxuICogVXNlIGBnZXRUcmF2ZXJzYWJsZWAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICB0cmF2ZXJzZTogLyojX19QVVJFX18qLyBfdHJhdmVyc2UoUy5PcmQpLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZVxufTtcbi8qKlxuICogVXNlIGBnZXRUcmF2ZXJzYWJsZVdpdGhJbmRleGAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZCksXG4gICAgcmVkdWNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VXaXRoSW5kZXgoUy5PcmQpLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXBXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodFdpdGhJbmRleChTLk9yZCksXG4gICAgdHJhdmVyc2U6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlKFMuT3JkKSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlV2l0aEluZGV4KFMuT3JkKVxufTtcbnZhciBfd2l0aGVyID0gLyojX19QVVJFX18qLyB3aXRoZXJEZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG52YXIgX3dpbHQgPSAvKiNfX1BVUkVfXyovIHdpbHREZWZhdWx0KFRyYXZlcnNhYmxlLCBDb21wYWN0YWJsZSk7XG4vKipcbiAqIFVzZSBgZ2V0V2l0aGVyYWJsZWAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIFdpdGhlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHRyYXZlcnNlOiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4vKipcbiAqIFVzZSBbYHVwc2VydEF0YF0oI3Vwc2VydGF0KSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaW5zZXJ0QXQgPSB1cHNlcnRBdDtcbmV4cG9ydCBmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShrLCByKSB7XG4gICAgcmV0dXJuIF8uaGFzLmNhbGwociA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHIsIGspO1xufVxuLyoqXG4gKiBUaGlzIGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzbWFsbCwgc3BlY2lmaWMgaW5zdGFuY2VzIGluc3RlYWQuXG4gKiBGb3IgZXhhbXBsZSBpZiBhIGZ1bmN0aW9uIG5lZWRzIGEgYEZ1bmN0b3JgIGluc3RhbmNlLCBwYXNzIGBSUi5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBSUi5yZWFkb25seVJlY29yZGBcbiAqICh3aGVyZSBgUlJgIGlzIGZyb20gYGltcG9ydCBSUiBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdgKVxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi41LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgcmVhZG9ubHlSZWNvcmQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHRyYXZlcnNlOiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VXaXRoSW5kZXgoUy5PcmQpLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXBXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodFdpdGhJbmRleChTLk9yZCksXG4gICAgZmlsdGVyTWFwV2l0aEluZGV4OiBfZmlsdGVyTWFwV2l0aEluZGV4LFxuICAgIGZpbHRlcldpdGhJbmRleDogX2ZpbHRlcldpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IF9wYXJ0aXRpb25NYXBXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uV2l0aEluZGV4OiBfcGFydGl0aW9uV2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZVdpdGhJbmRleChTLk9yZCksXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuIiwKICAiaW1wb3J0IHsgZnJvbUVxdWFscyB9IGZyb20gJy4vRXEnO1xuaW1wb3J0IHsgZmxvdywgaWRlbnRpdHksIHBpcGUsIFNLIH0gZnJvbSAnLi9mdW5jdGlvbic7XG5pbXBvcnQgeyBmbGFwIGFzIGZsYXBfIH0gZnJvbSAnLi9GdW5jdG9yJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnLi9pbnRlcm5hbCc7XG5pbXBvcnQgeyBzZXBhcmF0ZWQgfSBmcm9tICcuL1NlcGFyYXRlZCc7XG5pbXBvcnQgKiBhcyBTIGZyb20gJy4vc3RyaW5nJztcbmltcG9ydCB7IHdpbHREZWZhdWx0LCB3aXRoZXJEZWZhdWx0IH0gZnJvbSAnLi9XaXRoZXJhYmxlJztcbi8qKlxuICogQnVpbGRzIGEgYFJlYWRvbmx5UmVjb3JkYCBieSBjb3B5aW5nIGEgYFJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFJlYWRvbmx5UmVjb3JkLCBmcm9tUmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBjb25zdCB4OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0geyBhOiAxLCBiOiAyIH07XG4gKiBjb25zdCB5OiBSZWFkb25seVJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSBmcm9tUmVjb3JkKHgpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh4LHkpO1xuICogLy8gYHkuYSA9IDVgIGdpdmVzIGNvbXBpbGVyIGVycm9yXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmcm9tUmVjb3JkID0gZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHIpOyB9O1xuLyoqXG4gKiBCdWlsZHMgYSBtdXRhYmxlIGBSZWNvcmRgIGZyb20gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBSZWFkb25seVJlY29yZCwgdG9SZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGNvbnN0IHg6IFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHsgYTogMSwgYjogMiB9O1xuICogY29uc3QgeTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHRvUmVjb3JkKHgpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh4LHkpO1xuICogeS5hID0gNTsgLy8gaXQncyBvaywgeSBpcyBtdXRhYmxlXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0b1JlY29yZCA9IGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByKTsgfTtcbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2Yga2V5L3ZhbHVlIHBhaXJzIGluIGEgYFJlYWRvbmx5UmVjb3JkYCxcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2l6ZSB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2l6ZSh7IGE6IHRydWUsIGI6IDIsIGM6IFwidGhyZWVcIiB9KSwgMyk7XG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgc2l6ZSA9IGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3Qua2V5cyhyKS5sZW5ndGg7IH07XG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIGBSZWFkb25seVJlY29yZGAgaXMgZW1wdHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGlzRW1wdHkgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaXNFbXB0eSh7fSksIHRydWUpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpc0VtcHR5KHsgYTogMyB9KSwgZmFsc2UpO1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIChyKSB7XG4gICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59O1xudmFyIGtleXNfID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHIpLnNvcnQoTy5jb21wYXJlKTtcbiAgICB9O1xufTtcbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIga2V5cyA9IC8qI19fUFVSRV9fKi8ga2V5c18oUy5PcmQpO1xuZXhwb3J0IGZ1bmN0aW9uIGNvbGxlY3QoTykge1xuICAgIGlmICh0eXBlb2YgTyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gY29sbGVjdChTLk9yZCkoTyk7XG4gICAgfVxuICAgIHZhciBrZXlzTyA9IGtleXNfKE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBrZXlzTyhyKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGYoa2V5LCByW2tleV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfTtcbn1cbi8qKlxuICogR2V0IGEgc29ydGVkIGBSZWFkb25seUFycmF5YCBvZiB0aGUga2V5L3ZhbHVlIHBhaXJzIGNvbnRhaW5lZCBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHRvUmVhZG9ubHlBcnJheSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGNvbnN0IHggPSB7IGM6IDMsIGE6IFwiZm9vXCIsIGI6IGZhbHNlIH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRvUmVhZG9ubHlBcnJheSh4KSwgW1xuICogICBbXCJhXCIsIFwiZm9vXCJdLFxuICogICBbXCJiXCIsIGZhbHNlXSxcbiAqICAgW1wiY1wiLCAzXSxcbiAqIF0pO1xuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgdG9SZWFkb25seUFycmF5ID0gXG4vKiNfX1BVUkVfXyovIGNvbGxlY3QoUy5PcmQpKGZ1bmN0aW9uIChrLCBhKSB7IHJldHVybiBbaywgYV07IH0pO1xuZXhwb3J0IGZ1bmN0aW9uIHRvVW5mb2xkYWJsZShVKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBzYXMgPSB0b1JlYWRvbmx5QXJyYXkocik7XG4gICAgICAgIHZhciBsZW4gPSBzYXMubGVuZ3RoO1xuICAgICAgICByZXR1cm4gVS51bmZvbGQoMCwgZnVuY3Rpb24gKGIpIHsgcmV0dXJuIChiIDwgbGVuID8gXy5zb21lKFtzYXNbYl0sIGIgKyAxXSkgOiBfLm5vbmUpOyB9KTtcbiAgICB9O1xufVxuLyoqXG4gKiBJbnNlcnQgb3IgcmVwbGFjZSBhIGtleS92YWx1ZSBwYWlyIGluIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdXBzZXJ0QXQgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwc2VydEF0KFwiYVwiLCA1KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogNSwgYjogMiB9KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBzZXJ0QXQoXCJjXCIsIDUpKHsgYTogMSwgYjogMiB9KSwgeyBhOiAxLCBiOiAyLCBjOiA1IH0pO1xuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB1cHNlcnRBdCA9IGZ1bmN0aW9uIChrLCBhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspICYmIHJba10gPT09IGEpIHtcbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBPYmplY3QuYXNzaWduKHt9LCByKTtcbiAgICAgICAgb3V0W2tdID0gYTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKlxuICogVGVzdCB3aGV0aGVyIG9yIG5vdCBhIGtleSBleGlzdHMgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIE5vdGUuIFRoaXMgZnVuY3Rpb24gaXMgbm90IHBpcGVhYmxlIGJlY2F1c2UgaXMgYSBgUmVmaW5lbWVudGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGhhcyB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaGFzKFwiYVwiLCB7IGE6IDEsIGI6IDIgfSksIHRydWUpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChoYXMoXCJjXCIsIHsgYTogMSwgYjogMiB9KSwgZmFsc2UpO1xuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBoYXMgPSBmdW5jdGlvbiAoaywgcikgeyByZXR1cm4gXy5oYXMuY2FsbChyLCBrKTsgfTtcbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVBdChrKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGlmICghXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IE9iamVjdC5hc3NpZ24oe30sIHIpO1xuICAgICAgICBkZWxldGUgb3V0W2tdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG4vKipcbiAqIFJlcGxhY2UgYSBrZXkvdmFsdWUgcGFpciBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQHJldHVybnMgSWYgdGhlIHNwZWNpZmllZCBrZXkgZXhpc3RzIGl0IHJldHVybnMgYW4gYE9wdGlvbmAgY29udGFpbmluZyBhIG5ldyBgUmVjb3JkYFxuICogd2l0aCB0aGUgZW50cnkgdXBkYXRlZCwgb3RoZXJ3aXNlIGl0IHJldHVybnMgYE5vbmVgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVwZGF0ZUF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tICdmcC10cydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwZGF0ZUF0KFwiYVwiLCAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5zb21lKHsgYTogMywgYjogMiB9KSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwZGF0ZUF0KFwiY1wiLCAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5ub25lKTtcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVBdCA9IGZ1bmN0aW9uIChrLCBhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGlmICghaGFzKGssIHIpKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyW2tdID09PSBhKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5zb21lKHIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBPYmplY3QuYXNzaWduKHt9LCByKTtcbiAgICAgICAgb3V0W2tdID0gYTtcbiAgICAgICAgcmV0dXJuIF8uc29tZShvdXQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBBcHBsaWVzIGEgbWFwcGluZyBmdW5jdGlvbiB0byBvbmUgc3BlY2lmaWMga2V5L3ZhbHVlIHBhaXIgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEByZXR1cm5zIElmIHRoZSBzcGVjaWZpZWQga2V5IGV4aXN0cyBpdCByZXR1cm5zIGFuIGBPcHRpb25gIGNvbnRhaW5pbmcgYSBuZXcgYFJlY29yZGBcbiAqIHdpdGggdGhlIGVudHJ5IHVwZGF0ZWQsIG90aGVyd2lzZSBpdCByZXR1cm5zIGBOb25lYFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtb2RpZnlBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtb2RpZnlBdChcImFcIiwgKHg6IG51bWJlcikgPT4geCAqIDMpKHsgYTogMSwgYjogMiB9KSwgb3B0aW9uLnNvbWUoeyBhOiAzLCBiOiAyIH0pKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobW9kaWZ5QXQoXCJjXCIsICh4OiBudW1iZXIpID0+IHggKiAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5ub25lKTtcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBtb2RpZnlBdCA9IGZ1bmN0aW9uIChrLCBmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGlmICghaGFzKGssIHIpKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXh0ID0gZihyW2tdKTtcbiAgICAgICAgaWYgKG5leHQgPT09IHJba10pIHtcbiAgICAgICAgICAgIHJldHVybiBfLnNvbWUocik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IE9iamVjdC5hc3NpZ24oe30sIHIpO1xuICAgICAgICBvdXRba10gPSBuZXh0O1xuICAgICAgICByZXR1cm4gXy5zb21lKG91dCk7XG4gICAgfTtcbn07XG5leHBvcnQgZnVuY3Rpb24gcG9wKGspIHtcbiAgICB2YXIgZGVsZXRlQXRrID0gZGVsZXRlQXQoayk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBvYSA9IGxvb2t1cChrLCByKTtcbiAgICAgICAgcmV0dXJuIF8uaXNOb25lKG9hKSA/IF8ubm9uZSA6IF8uc29tZShbb2EudmFsdWUsIGRlbGV0ZUF0ayhyKV0pO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTdWJyZWNvcmQoRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWUsIHRoYXQpIHtcbiAgICAgICAgaWYgKHRoYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGlzU3VicmVjb3JkRV8xID0gaXNTdWJyZWNvcmQoRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRoYXQpIHsgcmV0dXJuIGlzU3VicmVjb3JkRV8xKHRoYXQsIG1lKTsgfTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrIGluIG1lKSB7XG4gICAgICAgICAgICBpZiAoIV8uaGFzLmNhbGwodGhhdCwgaykgfHwgIUUuZXF1YWxzKG1lW2tdLCB0aGF0W2tdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvb2t1cChrLCByKSB7XG4gICAgaWYgKHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHsgcmV0dXJuIGxvb2t1cChrLCByKTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIF8uaGFzLmNhbGwociwgaykgPyBfLnNvbWUocltrXSkgOiBfLm5vbmU7XG59XG4vKipcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGVtcHR5ID0ge307XG5leHBvcnQgZnVuY3Rpb24gbWFwV2l0aEluZGV4KGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdID0gZihrLCByW2tdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbWFwKGYpIHtcbiAgICByZXR1cm4gbWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VXaXRoSW5kZXgoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICByZXR1cm4gcmVkdWNlV2l0aEluZGV4KFMuT3JkKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgIH1cbiAgICB2YXIga2V5c08gPSBrZXlzXyhhcmdzWzBdKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGIsIGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICB2YXIgb3V0ID0gYjtcbiAgICAgICAgdmFyIGtzID0ga2V5c08oZmEpO1xuICAgICAgICB2YXIgbGVuID0ga3MubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgayA9IGtzW2ldO1xuICAgICAgICAgICAgb3V0ID0gZihrLCBvdXQsIGZhW2tdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07IH07XG59XG5leHBvcnQgZnVuY3Rpb24gZm9sZE1hcFdpdGhJbmRleChPKSB7XG4gICAgaWYgKCdjb21wYXJlJyBpbiBPKSB7XG4gICAgICAgIHZhciBrZXlzT18xID0ga2V5c18oTyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoTSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3V0ID0gTS5lbXB0eTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtzID0ga2V5c09fMShmYSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW4gPSBrcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0ga3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQgPSBNLmNvbmNhdChvdXQsIGYoaywgZmFba10pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZm9sZE1hcFdpdGhJbmRleChTLk9yZCkoTyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlUmlnaHRXaXRoSW5kZXgoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICByZXR1cm4gcmVkdWNlUmlnaHRXaXRoSW5kZXgoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgfVxuICAgIHZhciBrZXlzTyA9IGtleXNfKGFyZ3NbMF0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBvdXQgPSBiO1xuICAgICAgICB2YXIga3MgPSBrZXlzTyhmYSk7XG4gICAgICAgIHZhciBsZW4gPSBrcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgdmFyIGsgPSBrc1tpXTtcbiAgICAgICAgICAgIG91dCA9IGYoaywgZmFba10sIG91dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9OyB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBgUmVhZG9ubHlSZWNvcmRgIHdpdGggb25lIGtleS92YWx1ZSBwYWlyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzaW5nbGV0b24gfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNpbmdsZXRvbihcImFcIiwgMSksIHsgYTogMSB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgY29uc3RydWN0b3JzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzaW5nbGV0b24gPSBmdW5jdGlvbiAoaywgYSkge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKF9hID0ge30sIF9hW2tdID0gYSwgX2EpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiB0cmF2ZXJzZVdpdGhJbmRleChGKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4T0YgPSBfdHJhdmVyc2VXaXRoSW5kZXgoUy5PcmQpKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHRhKSB7IHJldHVybiB0cmF2ZXJzZVdpdGhJbmRleE9GKHRhLCBmKTsgfTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0cmF2ZXJzZShGKSB7XG4gICAgdmFyIHRyYXZlcnNlT0YgPSBfdHJhdmVyc2UoUy5PcmQpKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKHRhKSB7IHJldHVybiB0cmF2ZXJzZU9GKHRhLCBmKTsgfTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXF1ZW5jZShGKSB7XG4gICAgcmV0dXJuIF9zZXF1ZW5jZShTLk9yZCkoRik7XG59XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpdGhlciA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLm1hcChwaXBlKGZhLCB0cmF2ZXJzZUYoZikpLCBjb21wYWN0KTsgfTsgfTtcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjYuNVxuICovXG5leHBvcnQgdmFyIHdpbHQgPSBmdW5jdGlvbiAoRikge1xuICAgIHZhciB0cmF2ZXJzZUYgPSB0cmF2ZXJzZShGKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZ1bmN0aW9uIChmYSkgeyByZXR1cm4gRi5tYXAocGlwZShmYSwgdHJhdmVyc2VGKGYpKSwgc2VwYXJhdGUpOyB9OyB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgbGVmdCA9IHt9O1xuICAgICAgICB2YXIgcmlnaHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gZihrLCByW2tdKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUuX3RhZykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdMZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRba10gPSBlLmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRba10gPSBlLnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gcGFydGl0aW9uV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgbGVmdCA9IHt9O1xuICAgICAgICB2YXIgcmlnaHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciBhID0gcltrXTtcbiAgICAgICAgICAgICAgICBpZiAocHJlZGljYXRlV2l0aEluZGV4KGssIGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0W2tdID0gYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnRba10gPSBhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VwYXJhdGVkKGxlZnQsIHJpZ2h0KTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlck1hcFdpdGhJbmRleChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciBvYiA9IGYoaywgcltrXSk7XG4gICAgICAgICAgICAgICAgaWYgKF8uaXNTb21lKG9iKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBvYi52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGZhKSB7XG4gICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChmYSwga2V5KSkge1xuICAgICAgICAgICAgICAgIHZhciBhID0gZmFba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAocHJlZGljYXRlV2l0aEluZGV4KGtleSwgYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tleV0gPSBhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFuZ2VkID8gb3V0IDogZmE7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRm9sZGFibGUoTSwgRikge1xuICAgIHZhciBmcm9tRm9sZGFibGVNYXBNID0gZnJvbUZvbGRhYmxlTWFwKE0sIEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmthKSB7IHJldHVybiBmcm9tRm9sZGFibGVNYXBNKGZrYSwgaWRlbnRpdHkpOyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Gb2xkYWJsZU1hcChNLCBGKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikge1xuICAgICAgICByZXR1cm4gRi5yZWR1Y2UodGEsIHt9LCBmdW5jdGlvbiAociwgYSkge1xuICAgICAgICAgICAgdmFyIF9hID0gZihhKSwgayA9IF9hWzBdLCBiID0gX2FbMV07XG4gICAgICAgICAgICByW2tdID0gXy5oYXMuY2FsbChyLCBrKSA/IE0uY29uY2F0KHJba10sIGIpIDogYjtcbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuLyoqXG4gKiBBbGlhcyBvZiBbYHRvUmVhZG9ubHlBcnJheWBdKCN0b3JlYWRvbmx5YXJyYXkpLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB0b0VudHJpZXMgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHRvRW50cmllcyh7IGI6IDIsIGE6IDEgfSksIFtbJ2EnLCAxXSwgWydiJywgMl1dKVxuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMTIuMFxuICovXG5leHBvcnQgdmFyIHRvRW50cmllcyA9IHRvUmVhZG9ubHlBcnJheTtcbi8qKlxuICogQ29udmVydHMgYSBgUmVhZG9ubHlBcnJheWAgb2YgYFtrZXksIHZhbHVlXWAgdHVwbGVzIGludG8gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmcm9tRW50cmllcyB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZnJvbUVudHJpZXMoW1snYScsIDFdLCBbJ2InLCAyXSwgWydhJywgM11dKSwgeyBiOiAyLCBhOiAzIH0pXG4gKlxuICogQHNpbmNlIDIuMTIuMFxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKi9cbmV4cG9ydCB2YXIgZnJvbUVudHJpZXMgPSBmdW5jdGlvbiAoZmEpIHtcbiAgICB2YXIgb3V0ID0ge307XG4gICAgZm9yICh2YXIgX2kgPSAwLCBmYV8xID0gZmE7IF9pIDwgZmFfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGEgPSBmYV8xW19pXTtcbiAgICAgICAgb3V0W2FbMF1dID0gYVsxXTtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn07XG5leHBvcnQgZnVuY3Rpb24gZXZlcnkocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKCFwcmVkaWNhdGUocltrXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbi8qKlxuICogVGVzdCBpZiBhdCBsZWFzdCBvbmUgdmFsdWUgaW4gYSBgUmVhZG9ubHlSZWNvcmRgIHNhdGlzZmllcyB0aGUgcHJlZGljYXRlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzb21lIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvbWUoKG46IG51bWJlcikgPT4gbiA+PSAwKSh7IGE6IDEsIGI6IC0yIH0pLCB0cnVlKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29tZSgobjogbnVtYmVyKSA9PiBuID49IDApKHsgYTogLTEsIGI6IC0yIH0pLCBmYWxzZSk7XG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb21lKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUocltrXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbGVtKEUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGZhKSB7XG4gICAgICAgIGlmIChmYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZWxlbUVfMSA9IGVsZW0oRSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBlbGVtRV8xKGEsIGZhKTsgfTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrIGluIGZhKSB7XG4gICAgICAgICAgICBpZiAoRS5lcXVhbHMoZmFba10sIGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG4vKipcbiAqIFVuaW9uIG9mIHR3byBgUmVhZG9ubHlSZWNvcmRgcy5cbiAqIFRha2VzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBhbmQgcHJvZHVjZXMgYSBgUmVhZG9ubHlSZWNvcmRgIGNvbWJpbmluZyBhbGwgdGhlXG4gKiBlbnRyaWVzIG9mIHRoZSB0d28gaW5wdXRzLlxuICogSXQgdXNlcyB0aGUgYGNvbmNhdGAgZnVuY3Rpb24gb2YgdGhlIHByb3ZpZGVkIGBNYWdtYWAgdG9cbiAqIGNvbWJpbmUgdGhlIGVsZW1lbnRzIHdpdGggdGhlIHNhbWUga2V5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1bmlvbiB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiO1xuICogaW1wb3J0IHsgTWFnbWEgfSBmcm9tIFwiZnAtdHMvTWFnbWFcIjtcbiAqXG4gKiBjb25zdCBtMTogTWFnbWE8bnVtYmVyPiA9IHsgY29uY2F0OiAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IHggKyB5IH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuaW9uKG0xKSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDQsIGI6IDIsIGM6IDMgfSk7XG4gKiBjb25zdCBtMjogTWFnbWE8bnVtYmVyPiA9IHsgY29uY2F0OiAoeDogbnVtYmVyKSA9PiB4IH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVuaW9uKG0yKSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDEsIGI6IDIsIGM6IDMgfSk7XG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIHVuaW9uID0gZnVuY3Rpb24gKE0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShmaXJzdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Vjb25kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRW1wdHkoc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gZmlyc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzKGssIHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tdID0gTS5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBmaXJzdFtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIHNlY29uZCkge1xuICAgICAgICAgICAgICAgIGlmICghaGFzKGssIG91dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W2tdID0gc2Vjb25kW2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEludGVyc2VjdGlvbiBvZiB0d28gYFJlYWRvbmx5UmVjb3JkYHMuXG4gKiBUYWtlcyB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYW5kIHByb2R1Y2VzIGEgYFJlYWRvbmx5UmVjb3JkYCBjb21iaW5pbmcgb25seSB0aGVcbiAqIGVudHJpZXMgb2YgdGhlIHR3byBpbnB1dHN3aXRoIHRoZSBzYW1lIGtleS5cbiAqIEl0IHVzZXMgdGhlIGBjb25jYXRgIGZ1bmN0aW9uIG9mIHRoZSBwcm92aWRlZCBgTWFnbWFgIHRvXG4gKiBjb21iaW5lIHRoZSBlbGVtZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaW50ZXJzZWN0aW9uIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCI7XG4gKiBpbXBvcnQgeyBNYWdtYSB9IGZyb20gXCJmcC10cy9NYWdtYVwiO1xuICpcbiAqIGNvbnN0IG0xOiBNYWdtYTxudW1iZXI+ID0geyBjb25jYXQ6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4geCArIHkgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW50ZXJzZWN0aW9uKG0xKSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDR9KTtcbiAqIGNvbnN0IG0yOiBNYWdtYTxudW1iZXI+ID0geyBjb25jYXQ6ICh4OiBudW1iZXIpID0+IHggfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW50ZXJzZWN0aW9uKG0yKSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDF9KTtcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgaW50ZXJzZWN0aW9uID0gZnVuY3Rpb24gKE0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShmaXJzdCkgfHwgaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBmaXJzdCkge1xuICAgICAgICAgICAgICAgIGlmIChoYXMoaywgc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBNLmNvbmNhdChmaXJzdFtrXSwgc2Vjb25kW2tdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBEaWZmZXJlbmNlIGJldHdlZW4gdHdvIGBSZWFkb25seVJlY29yZGBzLlxuICogVGFrZXMgdHdvIGBSZWFkb25seVJlY29yZGBzIGFuZCBwcm9kdWNlcyBhIGBSZWFkb25seVJlY29yZGAgY29tcG9zZWQgYnkgdGhlXG4gKiBlbnRyaWVzIG9mIHRoZSB0d28gaW5wdXRzLCByZW1vdmluZyB0aGUgZW50cmllcyB3aXRoIHRoZSBzYW1lXG4gKiBrZXkgaW4gYm90aCBpbnB1dHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGRpZmZlcmVuY2UgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRpZmZlcmVuY2UoeyBhOiAxIH0pKHsgYTogMSwgYjogMiB9KSwgeyBiOiAyIH0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkaWZmZXJlbmNlKHsgYTogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYjogMiB9KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZGlmZmVyZW5jZSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGI6IDIsIGM6IDMgfSk7XG4gKlxuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGRpZmZlcmVuY2UgPSBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmaXJzdCkge1xuICAgICAgICBpZiAoaXNFbXB0eShmaXJzdCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWNvbmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRW1wdHkoc2Vjb25kKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiBmaXJzdCkge1xuICAgICAgICAgICAgaWYgKCFoYXMoaywgc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IGZpcnN0W2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGsgaW4gc2Vjb25kKSB7XG4gICAgICAgICAgICBpZiAoIWhhcyhrLCBmaXJzdCkpIHtcbiAgICAgICAgICAgICAgICBvdXRba10gPSBzZWNvbmRba107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX21hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwKGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9tYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIG1hcFdpdGhJbmRleChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcmVkdWNlID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgcmVkdWNlTyA9IHJlZHVjZShPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VPKGIsIGYpKTsgfTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIF9mb2xkTWFwID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuIGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIGZvbGRNYXBNID0gZm9sZE1hcChPKShNKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwTShmKSk7IH07XG59OyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3JlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgcmVkdWNlUmlnaHRPID0gcmVkdWNlUmlnaHQoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRPKGIsIGYpKTsgfTtcbn07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfZmlsdGVyID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgZmlsdGVyKHByZWRpY2F0ZSkpO1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9maWx0ZXJNYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlck1hcChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcGFydGl0aW9uID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGUpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbihwcmVkaWNhdGUpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9wYXJ0aXRpb25NYXAgPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbk1hcChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcmVkdWNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgcmVkdWNlV2l0aEluZGV4TyA9IHJlZHVjZVdpdGhJbmRleChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VXaXRoSW5kZXhPKGIsIGYpKTsgfTtcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIF9mb2xkTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE8gPSBmb2xkTWFwV2l0aEluZGV4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoTSkge1xuICAgICAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE0gPSBmb2xkTWFwV2l0aEluZGV4TyhNKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZm9sZE1hcFdpdGhJbmRleE0oZikpOyB9O1xuICAgIH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3JlZHVjZVJpZ2h0V2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXhPID0gcmVkdWNlUmlnaHRXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmYSwgYiwgZikgeyByZXR1cm4gcGlwZShmYSwgcmVkdWNlUmlnaHRXaXRoSW5kZXhPKGIsIGYpKTsgfTtcbn07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcGFydGl0aW9uTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBwYXJ0aXRpb25NYXBXaXRoSW5kZXgoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3BhcnRpdGlvbldpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpKTtcbn07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfZmlsdGVyTWFwV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJNYXBXaXRoSW5kZXgoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX2ZpbHRlcldpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgcHJlZGljYXRlV2l0aEluZGV4KSB7IHJldHVybiBwaXBlKGZhLCBmaWx0ZXJXaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSk7IH07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIF90cmF2ZXJzZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4TyA9IF90cmF2ZXJzZVdpdGhJbmRleChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKEYpIHtcbiAgICAgICAgdmFyIHRyYXZlcnNlV2l0aEluZGV4T0YgPSB0cmF2ZXJzZVdpdGhJbmRleE8oRik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4T0YodGEsIGZsb3coU0ssIGYpKTsgfTtcbiAgICB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX3NlcXVlbmNlID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgdHJhdmVyc2VPID0gX3RyYXZlcnNlKE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoRikge1xuICAgICAgICB2YXIgdHJhdmVyc2VPRiA9IHRyYXZlcnNlTyhGKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSkgeyByZXR1cm4gdHJhdmVyc2VPRih0YSwgaWRlbnRpdHkpOyB9O1xuICAgIH07XG59O1xudmFyIF90cmF2ZXJzZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciBrZXlzTyA9IGtleXNfKE8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7XG4gICAgICAgICAgICB2YXIga3MgPSBrZXlzTyh0YSk7XG4gICAgICAgICAgICBpZiAoa3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEYub2YoZW1wdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZyID0gRi5vZih7fSk7XG4gICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBmciA9IEYuYXAoRi5tYXAoZnIsIGZ1bmN0aW9uIChyKSB7IHJldHVybiBmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByLCAoX2EgPSB7fSwgX2Fba2V5XSA9IGIsIF9hKSk7XG4gICAgICAgICAgICAgICAgfTsgfSksIGYoa2V5LCB0YVtrZXldKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBrc18xID0ga3M7IF9pIDwga3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0ga3NfMVtfaV07XG4gICAgICAgICAgICAgICAgX2xvb3BfMShrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZyO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuLyoqXG4gKiBHaXZlbiBhIGBQcmVkaWNhdGVgLCBpdCBwcm9kdWNlcyBhIG5ldyBgUmVhZG9ubHlSZWNvcmRgIGtlZXBpbmcgb25seSB0aGUgZW50cmllcyB3aXRoIGFcbiAqIHZhbHVlIHRoYXQgc2F0aXNmaWVzIHRoZSBwcm92aWRlZCBwcmVkaWNhdGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZpbHRlciB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaWx0ZXIoKHM6IHN0cmluZykgPT4gcy5sZW5ndGggPCA0KSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIsIGM6IFwidmVyeWxvbmdcIiB9KSwge1xuICogICBhOiBcImZvb1wiLFxuICogICBiOiBcImJhclwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmaWx0ZXJXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIHByZWRpY2F0ZShhKTsgfSk7XG59O1xuLyoqXG4gKiBNYXBzIGEgYFJlYWRvbmx5UmVjb3JkYCB3aXRoIGFuIGl0ZXJhdGluZyBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gYE9wdGlvbmBcbiAqIGFuZCBpdCBrZWVwcyBvbmx5IHRoZSBgU29tZWAgdmFsdWVzIGRpc2NhcmRpbmcgdGhlIGBOb25lYHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZpbHRlck1hcCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tIFwiZnAtdHNcIlxuICpcbiAqIGNvbnN0IGYgPSAoczogc3RyaW5nKSA9PiBzLmxlbmd0aCA8IDQgPyBvcHRpb24uc29tZShgJHtzfSBpcyBzaG9ydGApOiBvcHRpb24ubm9uZVxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaWx0ZXJNYXAoZikoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcInZlcnlsb25nXCIgfSksIHtcbiAqICAgYTogXCJmb28gaXMgc2hvcnRcIixcbiAqICAgYjogXCJiYXIgaXMgc2hvcnRcIixcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZpbHRlck1hcCA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBmaWx0ZXJNYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xuLyoqXG4gKiBQYXJ0aXRpb24gYSBgUmVhZG9ubHlSZWNvcmRgIGludG8gdHdvIHBhcnRzIGFjY29yZGluZyB0byBhIGBQcmVkaWNhdGVgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwYXJ0aXRpb24gfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGFydGl0aW9uKChzOiBzdHJpbmcpID0+IHMubGVuZ3RoIDwgNCkoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcInZlcnlsb25nXCIgfSksIHtcbiAqICAgbGVmdDp7XG4gKiAgICAgYzogXCJ2ZXJ5bG9uZ1wiXG4gKiAgIH0sXG4gKiAgIHJpZ2h0OiB7XG4gKiAgICAgYTogXCJmb29cIixcbiAqICAgICBiOiBcImJhclwiLFxuICogICB9LFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwYXJ0aXRpb25XaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIHByZWRpY2F0ZShhKTsgfSk7XG59O1xuLyoqXG4gKiBNYXBzIGEgYFJlYWRvbmx5UmVjb3JkYCB3aXRoIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGFuIGBFaXRoZXJgIGFuZFxuICogcGFydGl0aW9ucyB0aGUgcmVzdWx0aW5nIGBSZWFkb25seVJlY29yZGAgaW50byBgTGVmdGBzIGFuZCBgUmlnaHRgcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGFydGl0aW9uTWFwIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IGVpdGhlciB9IGZyb20gXCJmcC10c1wiXG4gKlxuICogY29uc3QgZiA9IChzOiBzdHJpbmcpID0+IChzLmxlbmd0aCA8IDQgPyBlaXRoZXIucmlnaHQoYCR7c30gaXMgc2hvcnRgKSA6IGVpdGhlci5sZWZ0KGAke3N9IGlzIG5vdCBzaG9ydGApKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwocGFydGl0aW9uTWFwKGYpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiwgYzogXCJ2ZXJ5bG9uZ1wiIH0pLCB7XG4gKiAgIGxlZnQ6IHtcbiAqICAgICBjOiBcInZlcnlsb25nIGlzIG5vdCBzaG9ydFwiLFxuICogICB9LFxuICogICByaWdodDoge1xuICogICAgIGE6IFwiZm9vIGlzIHNob3J0XCIsXG4gKiAgICAgYjogXCJiYXIgaXMgc2hvcnRcIixcbiAqICAgfSxcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHBhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIHBhcnRpdGlvbk1hcFdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZSgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHZhciByZWR1Y2VXaXRoSW5kZXhPXzEgPSByZWR1Y2VXaXRoSW5kZXgoYXJnc1swXSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gcmVkdWNlV2l0aEluZGV4T18xKGIsIGZ1bmN0aW9uIChfLCBiLCBhKSB7IHJldHVybiBmKGIsIGEpOyB9KTsgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlZHVjZShTLk9yZCkuYXBwbHkodm9pZCAwLCBhcmdzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb2xkTWFwKE8pIHtcbiAgICBpZiAoJ2NvbXBhcmUnIGluIE8pIHtcbiAgICAgICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhPXzEgPSBmb2xkTWFwV2l0aEluZGV4KE8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKE0pIHtcbiAgICAgICAgICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TSA9IGZvbGRNYXBXaXRoSW5kZXhPXzEoTSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZvbGRNYXBXaXRoSW5kZXhNKGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTsgfTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZvbGRNYXAoUy5PcmQpKE8pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVJpZ2h0KCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdmFyIHJlZHVjZVJpZ2h0V2l0aEluZGV4T18xID0gcmVkdWNlUmlnaHRXaXRoSW5kZXgoYXJnc1swXSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gcmVkdWNlUmlnaHRXaXRoSW5kZXhPXzEoYiwgZnVuY3Rpb24gKF8sIGIsIGEpIHsgcmV0dXJuIGYoYiwgYSk7IH0pOyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVkdWNlUmlnaHQoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG59XG4vKipcbiAqIENvbXBhY3QgYSBgUmVhZG9ubHlSZWNvcmRgIG9mIGBPcHRpb25gcyBkaXNjYXJkaW5nIHRoZSBgTm9uZWAgdmFsdWVzIGFuZFxuICoga2VlcGluZyB0aGUgYFNvbWVgIHZhbHVlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29tcGFjdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChjb21wYWN0KHsgYTogb3B0aW9uLnNvbWUoXCJmb29cIiksIGI6IG9wdGlvbi5ub25lLCBjOiBvcHRpb24uc29tZShcImJhclwiKSB9KSwge1xuICogICBhOiBcImZvb1wiLFxuICogICBjOiBcImJhclwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgY29tcGFjdCA9IGZ1bmN0aW9uIChyKSB7XG4gICAgdmFyIG91dCA9IHt9O1xuICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICBpZiAoXy5oYXMuY2FsbChyLCBrKSkge1xuICAgICAgICAgICAgdmFyIG9hID0gcltrXTtcbiAgICAgICAgICAgIGlmIChfLmlzU29tZShvYSkpIHtcbiAgICAgICAgICAgICAgICBvdXRba10gPSBvYS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogU2VwYXJhdGUgYSBgUmVhZG9ubHlSZWNvcmRgIG9mIGBFaXRoZXJgcyBpbnRvIGBMZWZ0YHMgYW5kIGBSaWdodGBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzZXBhcmF0ZSB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICogaW1wb3J0IHsgZWl0aGVyIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgc2VwYXJhdGUoeyBhOiBlaXRoZXIucmlnaHQoXCJmb29cIiksIGI6IGVpdGhlci5sZWZ0KFwiYmFyXCIpLCBjOiBlaXRoZXIucmlnaHQoXCJiYXpcIikgfSksXG4gKiAgIHtcbiAqICAgICByaWdodDoge1xuICogICAgICAgYTogXCJmb29cIixcbiAqICAgICAgIGM6IFwiYmF6XCIsXG4gKiAgICAgfSxcbiAqICAgICBsZWZ0OiB7XG4gKiAgICAgICBiOiBcImJhclwiLFxuICogICAgIH0sXG4gKiAgIH1cbiAqICk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgc2VwYXJhdGUgPSBmdW5jdGlvbiAocikge1xuICAgIHZhciBsZWZ0ID0ge307XG4gICAgdmFyIHJpZ2h0ID0ge307XG4gICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHJba107XG4gICAgICAgICAgICBpZiAoXy5pc0xlZnQoZSkpIHtcbiAgICAgICAgICAgICAgICBsZWZ0W2tdID0gZS5sZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmlnaHRba10gPSBlLnJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IHR5cGUgbGFtYmRhc1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgVVJJID0gJ1JlYWRvbmx5UmVjb3JkJztcbmV4cG9ydCBmdW5jdGlvbiBnZXRTaG93KE8pIHtcbiAgICBpZiAoJ2NvbXBhcmUnIGluIE8pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChTKSB7IHJldHVybiAoe1xuICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBjb2xsZWN0KE8pKGZ1bmN0aW9uIChrLCBhKSB7IHJldHVybiBcIlwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShrKSwgXCI6IFwiKS5jb25jYXQoUy5zaG93KGEpKTsgfSkocikuam9pbignLCAnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudHMgPT09ICcnID8gJ3t9JyA6IFwieyBcIi5jb25jYXQoZWxlbWVudHMsIFwiIH1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pOyB9O1xuICAgIH1cbiAgICByZXR1cm4gZ2V0U2hvdyhTLk9yZCkoTyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RXEoRSkge1xuICAgIHZhciBpc1N1YnJlY29yZEUgPSBpc1N1YnJlY29yZChFKTtcbiAgICByZXR1cm4gZnJvbUVxdWFscyhmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gaXNTdWJyZWNvcmRFKHgpKHkpICYmIGlzU3VicmVjb3JkRSh5KSh4KTsgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9ub2lkKFMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShmaXJzdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Vjb25kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRW1wdHkoc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByID0gT2JqZWN0LmFzc2lnbih7fSwgZmlyc3QpO1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBzZWNvbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXMuY2FsbChzZWNvbmQsIGspKSB7XG4gICAgICAgICAgICAgICAgICAgIHJba10gPSBfLmhhcy5jYWxsKGZpcnN0LCBrKSA/IFMuY29uY2F0KGZpcnN0W2tdLCBzZWNvbmRba10pIDogc2Vjb25kW2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9LFxuICAgICAgICBlbXB0eTogZW1wdHlcbiAgICB9O1xufVxuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGdW5jdG9yID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcFxufTtcbi8qKlxuICogVGFrZXMgYSB2YWx1ZSBhbmQgYSBgUmVhZG9ubHlSZWNvcmRgIG9mIGZ1bmN0aW9ucyBhbmQgcmV0dXJucyBhXG4gKiBgUmVhZG9ubHlSZWNvcmRgIGJ5IGFwcGx5aW5nIGVhY2ggZnVuY3Rpb24gdG8gdGhlIGlucHV0IHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmbGFwIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBjb25zdCBmYWIgPSB7IHg6IChuOiBudW1iZXIpID0+IGAke259IHRpbWVzIDJgLCB5OiAobjogbnVtYmVyKSA9PiBgJHtuICogMn1gIH07XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZsYXAoMykoZmFiKSwge1xuICogICB4OiBcIjMgdGltZXMgMlwiLFxuICogICB5OiBcIjZcIixcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmxhcCA9IC8qI19fUFVSRV9fKi8gZmxhcF8oRnVuY3Rvcik7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3JXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleFxufTtcbi8qKlxuICogUHJvZHVjZXMgYSBgRm9sZGFibGVgIGluc3RhbmNlIGZvciBhIGBSZWFkb25seVJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlYWRvbmx5UmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSBmb2xkaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rm9sZGFibGUgPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IF9yZWR1Y2UoTyksXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAoTyksXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodChPKVxufSk7IH07XG4vKipcbiAqIFByb2R1Y2VzIGEgYEZvbGRhYmxlV2l0aEluZGV4MWAgaW5zdGFuY2UgZm9yIGEgYFJlYWRvbmx5UmVjb3JkYCwgdXNpbmcgdGhlXG4gKiBwcm92aWRlZCBgT3JkYCB0byBzb3J0IHRoZSBgUmVhZG9ubHlSZWNvcmRgJ3MgZW50cmllcyBieSBrZXkuXG4gKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRGb2xkYWJsZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZShPKSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcChPKSxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleChPKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleChPKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4KE8pXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29tcGFjdGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGVcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRmlsdGVyYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IF9maWx0ZXJNYXBXaXRoSW5kZXgsXG4gICAgZmlsdGVyV2l0aEluZGV4OiBfZmlsdGVyV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbk1hcFdpdGhJbmRleDogX3BhcnRpdGlvbk1hcFdpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25XaXRoSW5kZXg6IF9wYXJ0aXRpb25XaXRoSW5kZXhcbn07XG4vKipcbiAqIFByb2R1Y2VzIGEgYFRyYXZlcnNhYmxlYCBpbnN0YW5jZSBmb3IgYSBgUmVhZG9ubHlSZWNvcmRgLCB1c2luZyB0aGVcbiAqIHByb3ZpZGVkIGBPcmRgIHRvIHNvcnQgdGhlIGBSZWFkb25seVJlY29yZGAncyBlbnRyaWVzIGJ5IGtleS5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFRyYXZlcnNhYmxlID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogX3JlZHVjZShPKSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcChPKSxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pLFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UoTyksXG4gICAgc2VxdWVuY2U6IF9zZXF1ZW5jZShPKVxufSk7IH07XG4vKipcbiAqIFByb2R1Y2VzIGEgYFRyYXZlcnNhYmxlV2l0aEluZGV4YCBpbnN0YW5jZSBmb3IgYSBgUmVhZG9ubHlSZWNvcmRgLCB1c2luZyB0aGVcbiAqIHByb3ZpZGVkIGBPcmRgIHRvIHNvcnQgdGhlIGBSZWFkb25seVJlY29yZGAncyBlbnRyaWVzIGJ5IGtleS5cbiAqXG4gKiBAY2F0ZWdvcnkgdHJhdmVyc2luZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFRyYXZlcnNhYmxlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2U6IF9yZWR1Y2UoTyksXG4gICAgZm9sZE1hcDogX2ZvbGRNYXAoTyksXG4gICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodChPKSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IF9yZWR1Y2VXaXRoSW5kZXgoTyksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogX2ZvbGRNYXBXaXRoSW5kZXgoTyksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IF9yZWR1Y2VSaWdodFdpdGhJbmRleChPKSxcbiAgICB0cmF2ZXJzZTogX3RyYXZlcnNlKE8pLFxuICAgIHNlcXVlbmNlOiBfc2VxdWVuY2UoTyksXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IF90cmF2ZXJzZVdpdGhJbmRleChPKVxufSk7IH07XG4vKipcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRXaXRoZXJhYmxlID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgVCA9IGdldFRyYXZlcnNhYmxlKE8pO1xuICAgIHJldHVybiB7XG4gICAgICAgIFVSSTogVVJJLFxuICAgICAgICBtYXA6IF9tYXAsXG4gICAgICAgIHJlZHVjZTogX3JlZHVjZShPKSxcbiAgICAgICAgZm9sZE1hcDogX2ZvbGRNYXAoTyksXG4gICAgICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTyksXG4gICAgICAgIHRyYXZlcnNlOiBULnRyYXZlcnNlLFxuICAgICAgICBzZXF1ZW5jZTogVC5zZXF1ZW5jZSxcbiAgICAgICAgY29tcGFjdDogY29tcGFjdCxcbiAgICAgICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgICAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICAgICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgICAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgICAgIHdpdGhlcjogd2l0aGVyRGVmYXVsdChULCBDb21wYWN0YWJsZSksXG4gICAgICAgIHdpbHQ6IHdpbHREZWZhdWx0KFQsIENvbXBhY3RhYmxlKVxuICAgIH07XG59O1xuLyoqXG4gKiBHaXZlbiBhIGBTZW1pZ3JvdXBgIGluIHRoZSBiYXNlIHR5cGUsIGl0IHByb2R1Y2VzIGEgYFNlbWlncm91cGBcbiAqIGluIHRoZSBgUmVhZG9ubHlSZWNvcmRgIG9mIHRoZSBiYXNlIHR5cGUuXG4gKiBUaGUgcmVzdWx0aW5nIGBTZW1pZ3JvdXBgIGNvbmNhdGVuYXRlcyB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYnlcbiAqIGB1bmlvbmAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldFVuaW9uU2VtaWdyb3VwLCBSZWFkb25seVJlY29yZCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXAgfSBmcm9tIFwiZnAtdHMvU2VtaWdyb3VwXCJcbiAqXG4gKiBjb25zdCBzTnVtYmVyOiBTZW1pZ3JvdXA8bnVtYmVyPiA9IHsgY29uY2F0OiAoeCwgeSkgPT4geCAtIHkgfTtcbiAqIGNvbnN0IHNSZWFkb25seVJlY29yZDogU2VtaWdyb3VwPFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPj4gPSBnZXRVbmlvblNlbWlncm91cChzTnVtYmVyKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc1JlYWRvbmx5UmVjb3JkLmNvbmNhdCh7IGE6IDEsIGI6IDIgfSwgeyBiOiAzLCBjOiA0IH0pLCB7IGE6IDEsIGI6IC0xLCBjOiA0IH0pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIHVuaW9uUyA9IHVuaW9uKFMpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uUyhzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBTYW1lIGFzIGBnZXRNb25vaWRgLlxuICogUmV0dXJucyBhIGBNb25vaWRgIGluc3RhbmNlIGZvciBgUmVhZG9ubHlSZWNvcmRgcyBnaXZlbiBhIGBTZW1pZ3JvdXBgXG4gKiBpbnN0YW5jZSBmb3IgdGhlIGJhc2UgdHlwZS5cbiAqIFRoZSBgTW9ub2lkYCBtYWtlcyB0aGUgdW5pb24gb2YgdHdvIGBSZWFkb25seVJlY29yZGBzIGNvbWJpbmluZyB0aGVcbiAqIGVudHJpZXMgdGhhdCBoYXZlIHRoZSBzYW1lIGtleSB3aXRoIHRoZSBwcm92aWRlZCBgU2VtaWdyb3VwYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgU2VtaWdyb3VwU3VtIH0gZnJvbSAnZnAtdHMvbnVtYmVyJ1xuICogaW1wb3J0IHsgZ2V0VW5pb25Nb25vaWQgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqXG4gKiBjb25zdCBNID0gZ2V0VW5pb25Nb25vaWQoU2VtaWdyb3VwU3VtKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoeyBmb286IDEyMywgYmFyOiAyMzQgfSwgeyBmb286IDQ1NiwgYmF6OiA1NjcgfSksIHsgZm9vOiA1NzkgLCBiYXI6IDIzNCwgYmF6OiA1NjcgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFVuaW9uTW9ub2lkID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRVbmlvblNlbWlncm91cChTKS5jb25jYXQsXG4gICAgZW1wdHk6IGVtcHR5XG59KTsgfTtcbi8qKlxuICogR2l2ZW4gYSBgU2VtaWdyb3VwYCBpbiB0aGUgYmFzZSB0eXBlLCBpdCBwcm9kdWNlcyBhIGBTZW1pZ3JvdXBgXG4gKiBpbiB0aGUgYFJlYWRvbmx5UmVjb3JkYCBvZiB0aGUgYmFzZSB0eXBlLlxuICogVGhlIHJlc3VsdGluZyBgU2VtaWdyb3VwYCBjb25jYXRlbmF0ZXMgdHdvIGBSZWFkb25seVJlY29yZGBzIGJ5XG4gKiBgaW50ZXJzZWN0aW9uYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwLCBSZWFkb25seVJlY29yZCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXAgfSBmcm9tIFwiZnAtdHMvU2VtaWdyb3VwXCJcbiAqXG4gKiBjb25zdCBzTnVtYmVyOiBTZW1pZ3JvdXA8bnVtYmVyPiA9IHsgY29uY2F0OiAoeCwgeSkgPT4geCAtIHkgfTtcbiAqIGNvbnN0IHNSZWFkb25seVJlY29yZDogU2VtaWdyb3VwPFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPj4gPSBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAoc051bWJlcik7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNSZWFkb25seVJlY29yZC5jb25jYXQoeyBhOiAxLCBiOiAyIH0sIHsgYjogMywgYzogNCB9KSwgeyBiOiAtMSB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwID0gZnVuY3Rpb24gKFMpIHtcbiAgICB2YXIgaW50ZXJzZWN0aW9uUyA9IGludGVyc2VjdGlvbihTKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBpbnRlcnNlY3Rpb25TKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG4vKipcbiAqIFByb2R1Y2VzIGEgYE1hZ21hYCB3aXRoIGEgYGNvbmNhdGAgZnVuY3Rpb24gdGhhdCBjb21iaW5lc1xuICogdHdvIGBSZWFkb25seVJlY29yZGBzIGJ5IG1ha2luZyB0aGUgYGRpZmZlcmVuY2VgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXREaWZmZXJlbmNlTWFnbWEsIGRpZmZlcmVuY2UsIFJlYWRvbmx5UmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IE1hZ21hIH0gZnJvbSBcImZwLXRzL01hZ21hXCJcbiAqXG4gKiBjb25zdCByMSA9IHsgYTogMywgYzogMyB9O1xuICogY29uc3QgcjIgPSB7IGE6IDEsIGI6IDIgfTtcbiAqIGNvbnN0IG06IE1hZ21hPFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPj4gPSBnZXREaWZmZXJlbmNlTWFnbWE8bnVtYmVyPigpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtLmNvbmNhdChyMSwgcjIpLCBkaWZmZXJlbmNlKHIyKShyMSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtLmNvbmNhdChyMSwgcjIpLCB7IGM6IDMsIGI6IDIgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldERpZmZlcmVuY2VNYWdtYSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gZGlmZmVyZW5jZShzZWNvbmQpKGZpcnN0KTsgfVxufSk7IH07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBkZXByZWNhdGVkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIFVzZSBgZ2V0Rm9sZGFibGVgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKVxufTtcbi8qKlxuICogVXNlIGBnZXRGb2xkYWJsZVdpdGhJbmRleGAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHJlZHVjZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlV2l0aEluZGV4KFMuT3JkKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwV2l0aEluZGV4KFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoUy5PcmQpXG59O1xuLyoqXG4gKiBVc2UgYGdldFRyYXZlcnNhYmxlYCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHRyYXZlcnNlOiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlXG59O1xuLyoqXG4gKiBVc2UgYGdldFRyYXZlcnNhYmxlV2l0aEluZGV4YCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgVHJhdmVyc2FibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVdpdGhJbmRleChTLk9yZCksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfZm9sZE1hcFdpdGhJbmRleChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0V2l0aEluZGV4KFMuT3JkKSxcbiAgICB0cmF2ZXJzZTogLyojX19QVVJFX18qLyBfdHJhdmVyc2UoUy5PcmQpLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfdHJhdmVyc2VXaXRoSW5kZXgoUy5PcmQpXG59O1xudmFyIF93aXRoZXIgPSAvKiNfX1BVUkVfXyovIHdpdGhlckRlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbnZhciBfd2lsdCA9IC8qI19fUFVSRV9fKi8gd2lsdERlZmF1bHQoVHJhdmVyc2FibGUsIENvbXBhY3RhYmxlKTtcbi8qKlxuICogVXNlIGBnZXRXaXRoZXJhYmxlYCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgV2l0aGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZCksXG4gICAgdHJhdmVyc2U6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlKFMuT3JkKSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbi8qKlxuICogVXNlIFtgdXBzZXJ0QXRgXSgjdXBzZXJ0YXQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBpbnNlcnRBdCA9IHVwc2VydEF0O1xuZXhwb3J0IGZ1bmN0aW9uIGhhc093blByb3BlcnR5KGssIHIpIHtcbiAgICByZXR1cm4gXy5oYXMuY2FsbChyID09PSB1bmRlZmluZWQgPyB0aGlzIDogciwgayk7XG59XG4vKipcbiAqIFRoaXMgaW5zdGFuY2UgaXMgZGVwcmVjYXRlZCwgdXNlIHNtYWxsLCBzcGVjaWZpYyBpbnN0YW5jZXMgaW5zdGVhZC5cbiAqIEZvciBleGFtcGxlIGlmIGEgZnVuY3Rpb24gbmVlZHMgYSBgRnVuY3RvcmAgaW5zdGFuY2UsIHBhc3MgYFJSLkZ1bmN0b3JgIGluc3RlYWQgb2YgYFJSLnJlYWRvbmx5UmVjb3JkYFxuICogKHdoZXJlIGBSUmAgaXMgZnJvbSBgaW1wb3J0IFJSIGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjUuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciByZWFkb25seVJlY29yZCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZCksXG4gICAgdHJhdmVyc2U6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlKFMuT3JkKSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIG1hcFdpdGhJbmRleDogX21hcFdpdGhJbmRleCxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVdpdGhJbmRleChTLk9yZCksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfZm9sZE1hcFdpdGhJbmRleChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0V2l0aEluZGV4KFMuT3JkKSxcbiAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IF9maWx0ZXJNYXBXaXRoSW5kZXgsXG4gICAgZmlsdGVyV2l0aEluZGV4OiBfZmlsdGVyV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbk1hcFdpdGhJbmRleDogX3BhcnRpdGlvbk1hcFdpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25XaXRoSW5kZXg6IF9wYXJ0aXRpb25XaXRoSW5kZXgsXG4gICAgdHJhdmVyc2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlV2l0aEluZGV4KFMuT3JkKSxcbiAgICB3aXRoZXI6IF93aXRoZXIsXG4gICAgd2lsdDogX3dpbHRcbn07XG4iLAogICJpbXBvcnQgeyBmcm9tRXF1YWxzIH0gZnJvbSAnLi9FcSc7XG5pbXBvcnQgeyBmbG93LCBpZGVudGl0eSwgcGlwZSwgU0sgfSBmcm9tICcuL2Z1bmN0aW9uJztcbmltcG9ydCB7IGZsYXAgYXMgZmxhcF8gfSBmcm9tICcuL0Z1bmN0b3InO1xuaW1wb3J0ICogYXMgXyBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7IHNlcGFyYXRlZCB9IGZyb20gJy4vU2VwYXJhdGVkJztcbmltcG9ydCAqIGFzIFMgZnJvbSAnLi9zdHJpbmcnO1xuaW1wb3J0IHsgd2lsdERlZmF1bHQsIHdpdGhlckRlZmF1bHQgfSBmcm9tICcuL1dpdGhlcmFibGUnO1xuLyoqXG4gKiBCdWlsZHMgYSBgUmVhZG9ubHlSZWNvcmRgIGJ5IGNvcHlpbmcgYSBgUmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgUmVhZG9ubHlSZWNvcmQsIGZyb21SZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGNvbnN0IHg6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7IGE6IDEsIGI6IDIgfTtcbiAqIGNvbnN0IHk6IFJlYWRvbmx5UmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IGZyb21SZWNvcmQoeCk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHgseSk7XG4gKiAvLyBgeS5hID0gNWAgZ2l2ZXMgY29tcGlsZXIgZXJyb3JcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIGZyb21SZWNvcmQgPSBmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcik7IH07XG4vKipcbiAqIEJ1aWxkcyBhIG11dGFibGUgYFJlY29yZGAgZnJvbSBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IFJlYWRvbmx5UmVjb3JkLCB0b1JlY29yZCB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogY29uc3QgeDogUmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0geyBhOiAxLCBiOiAyIH07XG4gKiBjb25zdCB5OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0gdG9SZWNvcmQoeCk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHgseSk7XG4gKiB5LmEgPSA1OyAvLyBpdCdzIG9rLCB5IGlzIG11dGFibGVcbiAqXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHRvUmVjb3JkID0gZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHIpOyB9O1xuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIG51bWJlciBvZiBrZXkvdmFsdWUgcGFpcnMgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzaXplIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCI7XG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzaXplKHsgYTogdHJ1ZSwgYjogMiwgYzogXCJ0aHJlZVwiIH0pLCAzKTtcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzaXplID0gZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5rZXlzKHIpLmxlbmd0aDsgfTtcbi8qKlxuICogVGVzdCB3aGV0aGVyIGEgYFJlYWRvbmx5UmVjb3JkYCBpcyBlbXB0eS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpc0VtcHR5KHt9KSwgdHJ1ZSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGlzRW1wdHkoeyBhOiAzIH0pLCBmYWxzZSk7XG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBpc0VtcHR5ID0gZnVuY3Rpb24gKHIpIHtcbiAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG52YXIga2V5c18gPSBmdW5jdGlvbiAoTykge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMocikuc29ydChPLmNvbXBhcmUpO1xuICAgIH07XG59O1xuLyoqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBrZXlzID0gLyojX19QVVJFX18qLyBrZXlzXyhTLk9yZCk7XG5leHBvcnQgZnVuY3Rpb24gY29sbGVjdChPKSB7XG4gICAgaWYgKHR5cGVvZiBPID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBjb2xsZWN0KFMuT3JkKShPKTtcbiAgICB9XG4gICAgdmFyIGtleXNPID0ga2V5c18oTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGtleXNPKHIpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goZihrZXksIHJba2V5XSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfTtcbiAgICB9O1xufVxuLyoqXG4gKiBHZXQgYSBzb3J0ZWQgYFJlYWRvbmx5QXJyYXlgIG9mIHRoZSBrZXkvdmFsdWUgcGFpcnMgY29udGFpbmVkIGluIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdG9SZWFkb25seUFycmF5IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogY29uc3QgeCA9IHsgYzogMywgYTogXCJmb29cIiwgYjogZmFsc2UgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodG9SZWFkb25seUFycmF5KHgpLCBbXG4gKiAgIFtcImFcIiwgXCJmb29cIl0sXG4gKiAgIFtcImJcIiwgZmFsc2VdLFxuICogICBbXCJjXCIsIDNdLFxuICogXSk7XG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciB0b1JlYWRvbmx5QXJyYXkgPSBcbi8qI19fUFVSRV9fKi8gY29sbGVjdChTLk9yZCkoZnVuY3Rpb24gKGssIGEpIHsgcmV0dXJuIFtrLCBhXTsgfSk7XG5leHBvcnQgZnVuY3Rpb24gdG9VbmZvbGRhYmxlKFUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIHNhcyA9IHRvUmVhZG9ubHlBcnJheShyKTtcbiAgICAgICAgdmFyIGxlbiA9IHNhcy5sZW5ndGg7XG4gICAgICAgIHJldHVybiBVLnVuZm9sZCgwLCBmdW5jdGlvbiAoYikgeyByZXR1cm4gKGIgPCBsZW4gPyBfLnNvbWUoW3Nhc1tiXSwgYiArIDFdKSA6IF8ubm9uZSk7IH0pO1xuICAgIH07XG59XG4vKipcbiAqIEluc2VydCBvciByZXBsYWNlIGEga2V5L3ZhbHVlIHBhaXIgaW4gYSBgUmVhZG9ubHlSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1cHNlcnRBdCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBzZXJ0QXQoXCJhXCIsIDUpKHsgYTogMSwgYjogMiB9KSwgeyBhOiA1LCBiOiAyIH0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cHNlcnRBdChcImNcIiwgNSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDEsIGI6IDIsIGM6IDUgfSk7XG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIHVwc2VydEF0ID0gZnVuY3Rpb24gKGssIGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykgJiYgcltrXSA9PT0gYSkge1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IE9iamVjdC5hc3NpZ24oe30sIHIpO1xuICAgICAgICBvdXRba10gPSBhO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb3Igbm90IGEga2V5IGV4aXN0cyBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogTm90ZS4gVGhpcyBmdW5jdGlvbiBpcyBub3QgcGlwZWFibGUgYmVjYXVzZSBpcyBhIGBSZWZpbmVtZW50YC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgaGFzIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChoYXMoXCJhXCIsIHsgYTogMSwgYjogMiB9KSwgdHJ1ZSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGhhcyhcImNcIiwgeyBhOiAxLCBiOiAyIH0pLCBmYWxzZSk7XG4gKlxuICogQHNpbmNlIDIuMTAuMFxuICovXG5leHBvcnQgdmFyIGhhcyA9IGZ1bmN0aW9uIChrLCByKSB7IHJldHVybiBfLmhhcy5jYWxsKHIsIGspOyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUF0KGspIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgaWYgKCFfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gT2JqZWN0LmFzc2lnbih7fSwgcik7XG4gICAgICAgIGRlbGV0ZSBvdXRba107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbi8qKlxuICogUmVwbGFjZSBhIGtleS92YWx1ZSBwYWlyIGluIGEgYFJlYWRvbmx5UmVjb3JkYC5cbiAqXG4gKiBAcmV0dXJucyBJZiB0aGUgc3BlY2lmaWVkIGtleSBleGlzdHMgaXQgcmV0dXJucyBhbiBgT3B0aW9uYCBjb250YWluaW5nIGEgbmV3IGBSZWNvcmRgXG4gKiB3aXRoIHRoZSBlbnRyeSB1cGRhdGVkLCBvdGhlcndpc2UgaXQgcmV0dXJucyBgTm9uZWBcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdXBkYXRlQXQgfSBmcm9tICdmcC10cy9SZWFkb25seVJlY29yZCdcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBkYXRlQXQoXCJhXCIsIDMpKHsgYTogMSwgYjogMiB9KSwgb3B0aW9uLnNvbWUoeyBhOiAzLCBiOiAyIH0pKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBkYXRlQXQoXCJjXCIsIDMpKHsgYTogMSwgYjogMiB9KSwgb3B0aW9uLm5vbmUpO1xuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZUF0ID0gZnVuY3Rpb24gKGssIGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgaWYgKCFoYXMoaywgcikpIHtcbiAgICAgICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJba10gPT09IGEpIHtcbiAgICAgICAgICAgIHJldHVybiBfLnNvbWUocik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IE9iamVjdC5hc3NpZ24oe30sIHIpO1xuICAgICAgICBvdXRba10gPSBhO1xuICAgICAgICByZXR1cm4gXy5zb21lKG91dCk7XG4gICAgfTtcbn07XG4vKipcbiAqIEFwcGxpZXMgYSBtYXBwaW5nIGZ1bmN0aW9uIHRvIG9uZSBzcGVjaWZpYyBrZXkvdmFsdWUgcGFpciBpbiBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQHJldHVybnMgSWYgdGhlIHNwZWNpZmllZCBrZXkgZXhpc3RzIGl0IHJldHVybnMgYW4gYE9wdGlvbmAgY29udGFpbmluZyBhIG5ldyBgUmVjb3JkYFxuICogd2l0aCB0aGUgZW50cnkgdXBkYXRlZCwgb3RoZXJ3aXNlIGl0IHJldHVybnMgYE5vbmVgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1vZGlmeUF0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tICdmcC10cydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG1vZGlmeUF0KFwiYVwiLCAoeDogbnVtYmVyKSA9PiB4ICogMykoeyBhOiAxLCBiOiAyIH0pLCBvcHRpb24uc29tZSh7IGE6IDMsIGI6IDIgfSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtb2RpZnlBdChcImNcIiwgKHg6IG51bWJlcikgPT4geCAqIDMpKHsgYTogMSwgYjogMiB9KSwgb3B0aW9uLm5vbmUpO1xuICpcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIG1vZGlmeUF0ID0gZnVuY3Rpb24gKGssIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgaWYgKCFoYXMoaywgcikpIHtcbiAgICAgICAgICAgIHJldHVybiBfLm5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5leHQgPSBmKHJba10pO1xuICAgICAgICBpZiAobmV4dCA9PT0gcltrXSkge1xuICAgICAgICAgICAgcmV0dXJuIF8uc29tZShyKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gT2JqZWN0LmFzc2lnbih7fSwgcik7XG4gICAgICAgIG91dFtrXSA9IG5leHQ7XG4gICAgICAgIHJldHVybiBfLnNvbWUob3V0KTtcbiAgICB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBwb3Aoaykge1xuICAgIHZhciBkZWxldGVBdGsgPSBkZWxldGVBdChrKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIG9hID0gbG9va3VwKGssIHIpO1xuICAgICAgICByZXR1cm4gXy5pc05vbmUob2EpID8gXy5ub25lIDogXy5zb21lKFtvYS52YWx1ZSwgZGVsZXRlQXRrKHIpXSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1N1YnJlY29yZChFKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtZSwgdGhhdCkge1xuICAgICAgICBpZiAodGhhdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgaXNTdWJyZWNvcmRFXzEgPSBpc1N1YnJlY29yZChFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodGhhdCkgeyByZXR1cm4gaXNTdWJyZWNvcmRFXzEodGhhdCwgbWUpOyB9O1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGsgaW4gbWUpIHtcbiAgICAgICAgICAgIGlmICghXy5oYXMuY2FsbCh0aGF0LCBrKSB8fCAhRS5lcXVhbHMobWVba10sIHRoYXRba10pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbG9va3VwKGssIHIpIHtcbiAgICBpZiAociA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocikgeyByZXR1cm4gbG9va3VwKGssIHIpOyB9O1xuICAgIH1cbiAgICByZXR1cm4gXy5oYXMuY2FsbChyLCBrKSA/IF8uc29tZShyW2tdKSA6IF8ubm9uZTtcbn1cbi8qKlxuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZW1wdHkgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBtYXBXaXRoSW5kZXgoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgICAgICBvdXRba10gPSBmKGssIHJba10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXAoZikge1xuICAgIHJldHVybiBtYXBXaXRoSW5kZXgoZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVdpdGhJbmRleCgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJldHVybiByZWR1Y2VXaXRoSW5kZXgoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgfVxuICAgIHZhciBrZXlzTyA9IGtleXNfKGFyZ3NbMF0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYiwgZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgIHZhciBvdXQgPSBiO1xuICAgICAgICB2YXIga3MgPSBrZXlzTyhmYSk7XG4gICAgICAgIHZhciBsZW4gPSBrcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrID0ga3NbaV07XG4gICAgICAgICAgICBvdXQgPSBmKGssIG91dCwgZmFba10pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTsgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb2xkTWFwV2l0aEluZGV4KE8pIHtcbiAgICBpZiAoJ2NvbXBhcmUnIGluIE8pIHtcbiAgICAgICAgdmFyIGtleXNPXzEgPSBrZXlzXyhPKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChNKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvdXQgPSBNLmVtcHR5O1xuICAgICAgICAgICAgICAgICAgICB2YXIga3MgPSBrZXlzT18xKGZhKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbiA9IGtzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSBrc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dCA9IE0uY29uY2F0KG91dCwgZihrLCBmYVtrXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmb2xkTWFwV2l0aEluZGV4KFMuT3JkKShPKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VSaWdodFdpdGhJbmRleCgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJldHVybiByZWR1Y2VSaWdodFdpdGhJbmRleChTLk9yZCkuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICB9XG4gICAgdmFyIGtleXNPID0ga2V5c18oYXJnc1swXSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgdmFyIG91dCA9IGI7XG4gICAgICAgIHZhciBrcyA9IGtleXNPKGZhKTtcbiAgICAgICAgdmFyIGxlbiA9IGtzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB2YXIgayA9IGtzW2ldO1xuICAgICAgICAgICAgb3V0ID0gZihrLCBmYVtrXSwgb3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07IH07XG59XG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkb25seVJlY29yZGAgd2l0aCBvbmUga2V5L3ZhbHVlIHBhaXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNpbmdsZXRvbiB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2luZ2xldG9uKFwiYVwiLCAxKSwgeyBhOiAxIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBjb25zdHJ1Y3RvcnNcbiAqIEBzaW5jZSAyLjUuMFxuICovXG5leHBvcnQgdmFyIHNpbmdsZXRvbiA9IGZ1bmN0aW9uIChrLCBhKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSB7fSwgX2Fba10gPSBhLCBfYSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHRyYXZlcnNlV2l0aEluZGV4KEYpIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhPRiA9IF90cmF2ZXJzZVdpdGhJbmRleChTLk9yZCkoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAodGEpIHsgcmV0dXJuIHRyYXZlcnNlV2l0aEluZGV4T0YodGEsIGYpOyB9OyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRyYXZlcnNlKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VPRiA9IF90cmF2ZXJzZShTLk9yZCkoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAodGEpIHsgcmV0dXJuIHRyYXZlcnNlT0YodGEsIGYpOyB9OyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcXVlbmNlKEYpIHtcbiAgICByZXR1cm4gX3NlcXVlbmNlKFMuT3JkKShGKTtcbn1cbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2l0aGVyID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYubWFwKHBpcGUoZmEsIHRyYXZlcnNlRihmKSksIGNvbXBhY3QpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2lsdCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLm1hcChwaXBlKGZhLCB0cmF2ZXJzZUYoZikpLCBzZXBhcmF0ZSk7IH07IH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpdGlvbk1hcFdpdGhJbmRleChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBsZWZ0ID0ge307XG4gICAgICAgIHZhciByaWdodCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSBmKGssIHJba10pO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5fdGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0xlZnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdFtrXSA9IGUubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdSaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodFtrXSA9IGUucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0LCByaWdodCk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb25XaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBsZWZ0ID0ge307XG4gICAgICAgIHZhciByaWdodCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSByW2tdO1xuICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGVXaXRoSW5kZXgoaywgYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRba10gPSBhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdFtrXSA9IGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXBhcmF0ZWQobGVmdCwgcmlnaHQpO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyTWFwV2l0aEluZGV4KGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iID0gZihrLCByW2tdKTtcbiAgICAgICAgICAgICAgICBpZiAoXy5pc1NvbWUob2IpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IG9iLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZmEpIHtcbiAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKGZhLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBmYVtrZXldO1xuICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGVXaXRoSW5kZXgoa2V5LCBhKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRba2V5XSA9IGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYW5nZWQgPyBvdXQgOiBmYTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Gb2xkYWJsZShNLCBGKSB7XG4gICAgdmFyIGZyb21Gb2xkYWJsZU1hcE0gPSBmcm9tRm9sZGFibGVNYXAoTSwgRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChma2EpIHsgcmV0dXJuIGZyb21Gb2xkYWJsZU1hcE0oZmthLCBpZGVudGl0eSk7IH07XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbUZvbGRhYmxlTWFwKE0sIEYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhLCBmKSB7XG4gICAgICAgIHJldHVybiBGLnJlZHVjZSh0YSwge30sIGZ1bmN0aW9uIChyLCBhKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBmKGEpLCBrID0gX2FbMF0sIGIgPSBfYVsxXTtcbiAgICAgICAgICAgIHJba10gPSBfLmhhcy5jYWxsKHIsIGspID8gTS5jb25jYXQocltrXSwgYikgOiBiO1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG4vKipcbiAqIEFsaWFzIG9mIFtgdG9SZWFkb25seUFycmF5YF0oI3RvcmVhZG9ubHlhcnJheSkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHRvRW50cmllcyB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodG9FbnRyaWVzKHsgYjogMiwgYTogMSB9KSwgW1snYScsIDFdLCBbJ2InLCAyXV0pXG4gKlxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKiBAc2luY2UgMi4xMi4wXG4gKi9cbmV4cG9ydCB2YXIgdG9FbnRyaWVzID0gdG9SZWFkb25seUFycmF5O1xuLyoqXG4gKiBDb252ZXJ0cyBhIGBSZWFkb25seUFycmF5YCBvZiBgW2tleSwgdmFsdWVdYCB0dXBsZXMgaW50byBhIGBSZWFkb25seVJlY29yZGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZyb21FbnRyaWVzIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmcm9tRW50cmllcyhbWydhJywgMV0sIFsnYicsIDJdLCBbJ2EnLCAzXV0pLCB7IGI6IDIsIGE6IDMgfSlcbiAqXG4gKiBAc2luY2UgMi4xMi4wXG4gKiBAY2F0ZWdvcnkgY29udmVyc2lvbnNcbiAqL1xuZXhwb3J0IHZhciBmcm9tRW50cmllcyA9IGZ1bmN0aW9uIChmYSkge1xuICAgIHZhciBvdXQgPSB7fTtcbiAgICBmb3IgKHZhciBfaSA9IDAsIGZhXzEgPSBmYTsgX2kgPCBmYV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgYSA9IGZhXzFbX2ldO1xuICAgICAgICBvdXRbYVswXV0gPSBhWzFdO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBldmVyeShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgICAgICBpZiAoIXByZWRpY2F0ZShyW2tdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuLyoqXG4gKiBUZXN0IGlmIGF0IGxlYXN0IG9uZSB2YWx1ZSBpbiBhIGBSZWFkb25seVJlY29yZGAgc2F0aXNmaWVzIHRoZSBwcmVkaWNhdGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29tZSgobjogbnVtYmVyKSA9PiBuID49IDApKHsgYTogMSwgYjogLTIgfSksIHRydWUpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzb21lKChuOiBudW1iZXIpID0+IG4gPj0gMCkoeyBhOiAtMSwgYjogLTIgfSksIGZhbHNlKTtcbiAqXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbWUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGZvciAodmFyIGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShyW2tdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVsZW0oRSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSwgZmEpIHtcbiAgICAgICAgaWYgKGZhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtRV8xID0gZWxlbShFKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIGVsZW1FXzEoYSwgZmEpOyB9O1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGsgaW4gZmEpIHtcbiAgICAgICAgICAgIGlmIChFLmVxdWFscyhmYVtrXSwgYSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cbi8qKlxuICogVW5pb24gb2YgdHdvIGBSZWFkb25seVJlY29yZGBzLlxuICogVGFrZXMgdHdvIGBSZWFkb25seVJlY29yZGBzIGFuZCBwcm9kdWNlcyBhIGBSZWFkb25seVJlY29yZGAgY29tYmluaW5nIGFsbCB0aGVcbiAqIGVudHJpZXMgb2YgdGhlIHR3byBpbnB1dHMuXG4gKiBJdCB1c2VzIHRoZSBgY29uY2F0YCBmdW5jdGlvbiBvZiB0aGUgcHJvdmlkZWQgYE1hZ21hYCB0b1xuICogY29tYmluZSB0aGUgZWxlbWVudHMgd2l0aCB0aGUgc2FtZSBrZXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVuaW9uIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCI7XG4gKiBpbXBvcnQgeyBNYWdtYSB9IGZyb20gXCJmcC10cy9NYWdtYVwiO1xuICpcbiAqIGNvbnN0IG0xOiBNYWdtYTxudW1iZXI+ID0geyBjb25jYXQ6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4geCArIHkgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pb24obTEpKHsgYTogMywgYzogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogNCwgYjogMiwgYzogMyB9KTtcbiAqIGNvbnN0IG0yOiBNYWdtYTxudW1iZXI+ID0geyBjb25jYXQ6ICh4OiBudW1iZXIpID0+IHggfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodW5pb24obTIpKHsgYTogMywgYzogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogMSwgYjogMiwgYzogMyB9KTtcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgdW5pb24gPSBmdW5jdGlvbiAoTSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgICAgIGlmIChpc0VtcHR5KGZpcnN0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWNvbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBmaXJzdCkge1xuICAgICAgICAgICAgICAgIGlmIChoYXMoaywgc2Vjb25kKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBNLmNvbmNhdChmaXJzdFtrXSwgc2Vjb25kW2tdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IGZpcnN0W2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gc2Vjb25kKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXMoaywgb3V0KSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRba10gPSBzZWNvbmRba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogSW50ZXJzZWN0aW9uIG9mIHR3byBgUmVhZG9ubHlSZWNvcmRgcy5cbiAqIFRha2VzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBhbmQgcHJvZHVjZXMgYSBgUmVhZG9ubHlSZWNvcmRgIGNvbWJpbmluZyBvbmx5IHRoZVxuICogZW50cmllcyBvZiB0aGUgdHdvIGlucHV0c3dpdGggdGhlIHNhbWUga2V5LlxuICogSXQgdXNlcyB0aGUgYGNvbmNhdGAgZnVuY3Rpb24gb2YgdGhlIHByb3ZpZGVkIGBNYWdtYWAgdG9cbiAqIGNvbWJpbmUgdGhlIGVsZW1lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNlY3Rpb24gfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIjtcbiAqIGltcG9ydCB7IE1hZ21hIH0gZnJvbSBcImZwLXRzL01hZ21hXCI7XG4gKlxuICogY29uc3QgbTE6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB4ICsgeSB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcnNlY3Rpb24obTEpKHsgYTogMywgYzogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogNH0pO1xuICogY29uc3QgbTI6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlcikgPT4geCB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpbnRlcnNlY3Rpb24obTIpKHsgYTogMywgYzogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogMX0pO1xuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBpbnRlcnNlY3Rpb24gPSBmdW5jdGlvbiAoTSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgICAgIGlmIChpc0VtcHR5KGZpcnN0KSB8fCBpc0VtcHR5KHNlY29uZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIGZpcnN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhcyhrLCBzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtrXSA9IE0uY29uY2F0KGZpcnN0W2tdLCBzZWNvbmRba10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIERpZmZlcmVuY2UgYmV0d2VlbiB0d28gYFJlYWRvbmx5UmVjb3JkYHMuXG4gKiBUYWtlcyB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYW5kIHByb2R1Y2VzIGEgYFJlYWRvbmx5UmVjb3JkYCBjb21wb3NlZCBieSB0aGVcbiAqIGVudHJpZXMgb2YgdGhlIHR3byBpbnB1dHMsIHJlbW92aW5nIHRoZSBlbnRyaWVzIHdpdGggdGhlIHNhbWVcbiAqIGtleSBpbiBib3RoIGlucHV0cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZGlmZmVyZW5jZSB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZGlmZmVyZW5jZSh7IGE6IDEgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGI6IDIgfSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRpZmZlcmVuY2UoeyBhOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBiOiAyIH0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkaWZmZXJlbmNlKHsgYTogMywgYzogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYjogMiwgYzogMyB9KTtcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZGlmZmVyZW5jZSA9IGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgIGlmIChpc0VtcHR5KGZpcnN0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlY29uZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3Q7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrIGluIGZpcnN0KSB7XG4gICAgICAgICAgICBpZiAoIWhhcyhrLCBzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgb3V0W2tdID0gZmlyc3Rba107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgayBpbiBzZWNvbmQpIHtcbiAgICAgICAgICAgIGlmICghaGFzKGssIGZpcnN0KSkge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IHNlY29uZFtrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBfbWFwID0gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBtYXAoZikpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX21hcFdpdGhJbmRleCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgbWFwV2l0aEluZGV4KGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9yZWR1Y2UgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciByZWR1Y2VPID0gcmVkdWNlKE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZU8oYiwgZikpOyB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX2ZvbGRNYXAgPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gZnVuY3Rpb24gKE0pIHtcbiAgICB2YXIgZm9sZE1hcE0gPSBmb2xkTWFwKE8pKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZvbGRNYXBNKGYpKTsgfTtcbn07IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcmVkdWNlUmlnaHQgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciByZWR1Y2VSaWdodE8gPSByZWR1Y2VSaWdodChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodE8oYiwgZikpOyB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9maWx0ZXIgPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBwaXBlKGZhLCBmaWx0ZXIocHJlZGljYXRlKSk7XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX2ZpbHRlck1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgZmlsdGVyTWFwKGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9wYXJ0aXRpb24gPSBmdW5jdGlvbiAoZmEsIHByZWRpY2F0ZSkgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uKHByZWRpY2F0ZSkpOyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCB2YXIgX3BhcnRpdGlvbk1hcCA9IGZ1bmN0aW9uIChmYSwgZikgeyByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uTWFwKGYpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9yZWR1Y2VXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciByZWR1Y2VXaXRoSW5kZXhPID0gcmVkdWNlV2l0aEluZGV4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmEsIGIsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHJlZHVjZVdpdGhJbmRleE8oYiwgZikpOyB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX2ZvbGRNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TyA9IGZvbGRNYXBXaXRoSW5kZXgoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChNKSB7XG4gICAgICAgIHZhciBmb2xkTWFwV2l0aEluZGV4TSA9IGZvbGRNYXBXaXRoSW5kZXhPKE0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBmKSB7IHJldHVybiBwaXBlKGZhLCBmb2xkTWFwV2l0aEluZGV4TShmKSk7IH07XG4gICAgfTtcbn07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcmVkdWNlUmlnaHRXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciByZWR1Y2VSaWdodFdpdGhJbmRleE8gPSByZWR1Y2VSaWdodFdpdGhJbmRleChPKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZhLCBiLCBmKSB7IHJldHVybiBwaXBlKGZhLCByZWR1Y2VSaWdodFdpdGhJbmRleE8oYiwgZikpOyB9O1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9wYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIHBhcnRpdGlvbk1hcFdpdGhJbmRleChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfcGFydGl0aW9uV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGVXaXRoSW5kZXgpIHtcbiAgICByZXR1cm4gcGlwZShmYSwgcGFydGl0aW9uV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkpO1xufTtcbi8qKiBAaW50ZXJuYWwgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgdmFyIF9maWx0ZXJNYXBXaXRoSW5kZXggPSBmdW5jdGlvbiAoZmEsIGYpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlck1hcFdpdGhJbmRleChmKSk7IH07XG4vKiogQGludGVybmFsICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IHZhciBfZmlsdGVyV2l0aEluZGV4ID0gZnVuY3Rpb24gKGZhLCBwcmVkaWNhdGVXaXRoSW5kZXgpIHsgcmV0dXJuIHBpcGUoZmEsIGZpbHRlcldpdGhJbmRleChwcmVkaWNhdGVXaXRoSW5kZXgpKTsgfTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgX3RyYXZlcnNlID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhPID0gX3RyYXZlcnNlV2l0aEluZGV4KE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoRikge1xuICAgICAgICB2YXIgdHJhdmVyc2VXaXRoSW5kZXhPRiA9IHRyYXZlcnNlV2l0aEluZGV4TyhGKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YSwgZikgeyByZXR1cm4gdHJhdmVyc2VXaXRoSW5kZXhPRih0YSwgZmxvdyhTSywgZikpOyB9O1xuICAgIH07XG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBfc2VxdWVuY2UgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciB0cmF2ZXJzZU8gPSBfdHJhdmVyc2UoTyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChGKSB7XG4gICAgICAgIHZhciB0cmF2ZXJzZU9GID0gdHJhdmVyc2VPKEYpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhKSB7IHJldHVybiB0cmF2ZXJzZU9GKHRhLCBpZGVudGl0eSk7IH07XG4gICAgfTtcbn07XG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKEYpIHtcbiAgICAgICAgdmFyIGtleXNPID0ga2V5c18oTyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHtcbiAgICAgICAgICAgIHZhciBrcyA9IGtleXNPKHRhKTtcbiAgICAgICAgICAgIGlmIChrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRi5vZihlbXB0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnIgPSBGLm9mKHt9KTtcbiAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGZyID0gRi5hcChGLm1hcChmciwgZnVuY3Rpb24gKHIpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHIsIChfYSA9IHt9LCBfYVtrZXldID0gYiwgX2EpKTtcbiAgICAgICAgICAgICAgICB9OyB9KSwgZihrZXksIHRhW2tleV0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtzXzEgPSBrczsgX2kgPCBrc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrc18xW19pXTtcbiAgICAgICAgICAgICAgICBfbG9vcF8xKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZnI7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIEdpdmVuIGEgYFByZWRpY2F0ZWAsIGl0IHByb2R1Y2VzIGEgbmV3IGBSZWFkb25seVJlY29yZGAga2VlcGluZyBvbmx5IHRoZSBlbnRyaWVzIHdpdGggYVxuICogdmFsdWUgdGhhdCBzYXRpc2ZpZXMgdGhlIHByb3ZpZGVkIHByZWRpY2F0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbHRlcigoczogc3RyaW5nKSA9PiBzLmxlbmd0aCA8IDQpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiwgYzogXCJ2ZXJ5bG9uZ1wiIH0pLCB7XG4gKiAgIGE6IFwiZm9vXCIsXG4gKiAgIGI6IFwiYmFyXCIsXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXIgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn07XG4vKipcbiAqIE1hcHMgYSBgUmVhZG9ubHlSZWNvcmRgIHdpdGggYW4gaXRlcmF0aW5nIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBgT3B0aW9uYFxuICogYW5kIGl0IGtlZXBzIG9ubHkgdGhlIGBTb21lYCB2YWx1ZXMgZGlzY2FyZGluZyB0aGUgYE5vbmVgcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmlsdGVyTWFwIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gXCJmcC10c1wiXG4gKlxuICogY29uc3QgZiA9IChzOiBzdHJpbmcpID0+IHMubGVuZ3RoIDwgNCA/IG9wdGlvbi5zb21lKGAke3N9IGlzIHNob3J0YCk6IG9wdGlvbi5ub25lXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbHRlck1hcChmKSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIsIGM6IFwidmVyeWxvbmdcIiB9KSwge1xuICogICBhOiBcImZvbyBpcyBzaG9ydFwiLFxuICogICBiOiBcImJhciBpcyBzaG9ydFwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyTWFwID0gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGZpbHRlck1hcFdpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gZihhKTsgfSk7IH07XG4vKipcbiAqIFBhcnRpdGlvbiBhIGBSZWFkb25seVJlY29yZGAgaW50byB0d28gcGFydHMgYWNjb3JkaW5nIHRvIGEgYFByZWRpY2F0ZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBhcnRpdGlvbiB9IGZyb20gXCJmcC10cy9SZWFkb25seVJlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb24oKHM6IHN0cmluZykgPT4gcy5sZW5ndGggPCA0KSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIsIGM6IFwidmVyeWxvbmdcIiB9KSwge1xuICogICBsZWZ0OntcbiAqICAgICBjOiBcInZlcnlsb25nXCJcbiAqICAgfSxcbiAqICAgcmlnaHQ6IHtcbiAqICAgICBhOiBcImZvb1wiLFxuICogICAgIGI6IFwiYmFyXCIsXG4gKiAgIH0sXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb24gPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHBhcnRpdGlvbldpdGhJbmRleChmdW5jdGlvbiAoXywgYSkgeyByZXR1cm4gcHJlZGljYXRlKGEpOyB9KTtcbn07XG4vKipcbiAqIE1hcHMgYSBgUmVhZG9ubHlSZWNvcmRgIHdpdGggYSBmdW5jdGlvbiByZXR1cm5pbmcgYW4gYEVpdGhlcmAgYW5kXG4gKiBwYXJ0aXRpb25zIHRoZSByZXN1bHRpbmcgYFJlYWRvbmx5UmVjb3JkYCBpbnRvIGBMZWZ0YHMgYW5kIGBSaWdodGBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwYXJ0aXRpb25NYXAgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgZWl0aGVyIH0gZnJvbSBcImZwLXRzXCJcbiAqXG4gKiBjb25zdCBmID0gKHM6IHN0cmluZykgPT4gKHMubGVuZ3RoIDwgNCA/IGVpdGhlci5yaWdodChgJHtzfSBpcyBzaG9ydGApIDogZWl0aGVyLmxlZnQoYCR7c30gaXMgbm90IHNob3J0YCkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb25NYXAoZikoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcInZlcnlsb25nXCIgfSksIHtcbiAqICAgbGVmdDoge1xuICogICAgIGM6IFwidmVyeWxvbmcgaXMgbm90IHNob3J0XCIsXG4gKiAgIH0sXG4gKiAgIHJpZ2h0OiB7XG4gKiAgICAgYTogXCJmb28gaXMgc2hvcnRcIixcbiAqICAgICBiOiBcImJhciBpcyBzaG9ydFwiLFxuICogICB9LFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNS4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uTWFwID0gZnVuY3Rpb24gKGYpIHtcbiAgICByZXR1cm4gcGFydGl0aW9uTWFwV2l0aEluZGV4KGZ1bmN0aW9uIChfLCBhKSB7IHJldHVybiBmKGEpOyB9KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdmFyIHJlZHVjZVdpdGhJbmRleE9fMSA9IHJlZHVjZVdpdGhJbmRleChhcmdzWzBdKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiByZWR1Y2VXaXRoSW5kZXhPXzEoYiwgZnVuY3Rpb24gKF8sIGIsIGEpIHsgcmV0dXJuIGYoYiwgYSk7IH0pOyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVkdWNlKFMuT3JkKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvbGRNYXAoTykge1xuICAgIGlmICgnY29tcGFyZScgaW4gTykge1xuICAgICAgICB2YXIgZm9sZE1hcFdpdGhJbmRleE9fMSA9IGZvbGRNYXBXaXRoSW5kZXgoTyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoTSkge1xuICAgICAgICAgICAgdmFyIGZvbGRNYXBXaXRoSW5kZXhNID0gZm9sZE1hcFdpdGhJbmRleE9fMShNKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZm9sZE1hcFdpdGhJbmRleE0oZnVuY3Rpb24gKF8sIGEpIHsgcmV0dXJuIGYoYSk7IH0pOyB9O1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZm9sZE1hcChTLk9yZCkoTyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlUmlnaHQoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB2YXIgcmVkdWNlUmlnaHRXaXRoSW5kZXhPXzEgPSByZWR1Y2VSaWdodFdpdGhJbmRleChhcmdzWzBdKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChiLCBmKSB7IHJldHVybiByZWR1Y2VSaWdodFdpdGhJbmRleE9fMShiLCBmdW5jdGlvbiAoXywgYiwgYSkgeyByZXR1cm4gZihiLCBhKTsgfSk7IH07XG4gICAgfVxuICAgIHJldHVybiByZWR1Y2VSaWdodChTLk9yZCkuYXBwbHkodm9pZCAwLCBhcmdzKTtcbn1cbi8qKlxuICogQ29tcGFjdCBhIGBSZWFkb25seVJlY29yZGAgb2YgYE9wdGlvbmBzIGRpc2NhcmRpbmcgdGhlIGBOb25lYCB2YWx1ZXMgYW5kXG4gKiBrZWVwaW5nIHRoZSBgU29tZWAgdmFsdWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBjb21wYWN0IH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKiBpbXBvcnQgeyBvcHRpb24gfSBmcm9tICdmcC10cydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGNvbXBhY3QoeyBhOiBvcHRpb24uc29tZShcImZvb1wiKSwgYjogb3B0aW9uLm5vbmUsIGM6IG9wdGlvbi5zb21lKFwiYmFyXCIpIH0pLCB7XG4gKiAgIGE6IFwiZm9vXCIsXG4gKiAgIGM6IFwiYmFyXCIsXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBjb21wYWN0ID0gZnVuY3Rpb24gKHIpIHtcbiAgICB2YXIgb3V0ID0ge307XG4gICAgZm9yICh2YXIgayBpbiByKSB7XG4gICAgICAgIGlmIChfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICB2YXIgb2EgPSByW2tdO1xuICAgICAgICAgICAgaWYgKF8uaXNTb21lKG9hKSkge1xuICAgICAgICAgICAgICAgIG91dFtrXSA9IG9hLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBTZXBhcmF0ZSBhIGBSZWFkb25seVJlY29yZGAgb2YgYEVpdGhlcmBzIGludG8gYExlZnRgcyBhbmQgYFJpZ2h0YHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNlcGFyYXRlIH0gZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnXG4gKiBpbXBvcnQgeyBlaXRoZXIgfSBmcm9tICdmcC10cydcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxuICogICBzZXBhcmF0ZSh7IGE6IGVpdGhlci5yaWdodChcImZvb1wiKSwgYjogZWl0aGVyLmxlZnQoXCJiYXJcIiksIGM6IGVpdGhlci5yaWdodChcImJhelwiKSB9KSxcbiAqICAge1xuICogICAgIHJpZ2h0OiB7XG4gKiAgICAgICBhOiBcImZvb1wiLFxuICogICAgICAgYzogXCJiYXpcIixcbiAqICAgICB9LFxuICogICAgIGxlZnQ6IHtcbiAqICAgICAgIGI6IFwiYmFyXCIsXG4gKiAgICAgfSxcbiAqICAgfVxuICogKTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBzZXBhcmF0ZSA9IGZ1bmN0aW9uIChyKSB7XG4gICAgdmFyIGxlZnQgPSB7fTtcbiAgICB2YXIgcmlnaHQgPSB7fTtcbiAgICBmb3IgKHZhciBrIGluIHIpIHtcbiAgICAgICAgaWYgKF8uaGFzLmNhbGwociwgaykpIHtcbiAgICAgICAgICAgIHZhciBlID0gcltrXTtcbiAgICAgICAgICAgIGlmIChfLmlzTGVmdChlKSkge1xuICAgICAgICAgICAgICAgIGxlZnRba10gPSBlLmxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByaWdodFtrXSA9IGUucmlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNlcGFyYXRlZChsZWZ0LCByaWdodCk7XG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgdHlwZSBsYW1iZGFzXG4gKiBAc2luY2UgMi41LjBcbiAqL1xuZXhwb3J0IHZhciBVUkkgPSAnUmVhZG9ubHlSZWNvcmQnO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNob3coTykge1xuICAgIGlmICgnY29tcGFyZScgaW4gTykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGNvbGxlY3QoTykoZnVuY3Rpb24gKGssIGEpIHsgcmV0dXJuIFwiXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KGspLCBcIjogXCIpLmNvbmNhdChTLnNob3coYSkpOyB9KShyKS5qb2luKCcsICcpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50cyA9PT0gJycgPyAne30nIDogXCJ7IFwiLmNvbmNhdChlbGVtZW50cywgXCIgfVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7IH07XG4gICAgfVxuICAgIHJldHVybiBnZXRTaG93KFMuT3JkKShPKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcShFKSB7XG4gICAgdmFyIGlzU3VicmVjb3JkRSA9IGlzU3VicmVjb3JkKEUpO1xuICAgIHJldHVybiBmcm9tRXF1YWxzKGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBpc1N1YnJlY29yZEUoeCkoeSkgJiYgaXNTdWJyZWNvcmRFKHkpKHgpOyB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb25vaWQoUykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgICAgIGlmIChpc0VtcHR5KGZpcnN0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWNvbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHIgPSBPYmplY3QuYXNzaWduKHt9LCBmaXJzdCk7XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIHNlY29uZCkge1xuICAgICAgICAgICAgICAgIGlmIChfLmhhcy5jYWxsKHNlY29uZCwgaykpIHtcbiAgICAgICAgICAgICAgICAgICAgcltrXSA9IF8uaGFzLmNhbGwoZmlyc3QsIGspID8gUy5jb25jYXQoZmlyc3Rba10sIHNlY29uZFtrXSkgOiBzZWNvbmRba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0sXG4gICAgICAgIGVtcHR5OiBlbXB0eVxuICAgIH07XG59XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3IgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwXG59O1xuLyoqXG4gKiBUYWtlcyBhIHZhbHVlIGFuZCBhIGBSZWFkb25seVJlY29yZGAgb2YgZnVuY3Rpb25zIGFuZCByZXR1cm5zIGFcbiAqIGBSZWFkb25seVJlY29yZGAgYnkgYXBwbHlpbmcgZWFjaCBmdW5jdGlvbiB0byB0aGUgaW5wdXQgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGZsYXAgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICpcbiAqIGNvbnN0IGZhYiA9IHsgeDogKG46IG51bWJlcikgPT4gYCR7bn0gdGltZXMgMmAsIHk6IChuOiBudW1iZXIpID0+IGAke24gKiAyfWAgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmxhcCgzKShmYWIpLCB7XG4gKiAgIHg6IFwiMyB0aW1lcyAyXCIsXG4gKiAgIHk6IFwiNlwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvcldpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4XG59O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBGb2xkYWJsZWAgaW5zdGFuY2UgZm9yIGEgYFJlYWRvbmx5UmVjb3JkYCwgdXNpbmcgdGhlXG4gKiBwcm92aWRlZCBgT3JkYCB0byBzb3J0IHRoZSBgUmVhZG9ubHlSZWNvcmRgJ3MgZW50cmllcyBieSBrZXkuXG4gKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRGb2xkYWJsZSA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZShPKSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcChPKSxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pXG59KTsgfTtcbi8qKlxuICogUHJvZHVjZXMgYSBgRm9sZGFibGVXaXRoSW5kZXgxYCBpbnN0YW5jZSBmb3IgYSBgUmVhZG9ubHlSZWNvcmRgLCB1c2luZyB0aGVcbiAqIHByb3ZpZGVkIGBPcmRgIHRvIHNvcnQgdGhlIGBSZWFkb25seVJlY29yZGAncyBlbnRyaWVzIGJ5IGtleS5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldEZvbGRhYmxlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTyksXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4KE8pLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4KE8pLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoTylcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBDb21wYWN0YWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZVxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRmlsdGVyYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwXG59O1xuLyoqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IHZhciBGaWx0ZXJhYmxlV2l0aEluZGV4ID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgIGZpbHRlck1hcDogX2ZpbHRlck1hcCxcbiAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgIGZpbHRlck1hcFdpdGhJbmRleDogX2ZpbHRlck1hcFdpdGhJbmRleCxcbiAgICBmaWx0ZXJXaXRoSW5kZXg6IF9maWx0ZXJXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uTWFwV2l0aEluZGV4OiBfcGFydGl0aW9uTWFwV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbldpdGhJbmRleDogX3BhcnRpdGlvbldpdGhJbmRleFxufTtcbi8qKlxuICogUHJvZHVjZXMgYSBgVHJhdmVyc2FibGVgIGluc3RhbmNlIGZvciBhIGBSZWFkb25seVJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlYWRvbmx5UmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VHJhdmVyc2FibGUgPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTyksXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZShPKSxcbiAgICBzZXF1ZW5jZTogX3NlcXVlbmNlKE8pXG59KTsgfTtcbi8qKlxuICogUHJvZHVjZXMgYSBgVHJhdmVyc2FibGVXaXRoSW5kZXhgIGluc3RhbmNlIGZvciBhIGBSZWFkb25seVJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlYWRvbmx5UmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VHJhdmVyc2FibGVXaXRoSW5kZXggPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogX3JlZHVjZShPKSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcChPKSxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleChPKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleChPKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4KE8pLFxuICAgIHRyYXZlcnNlOiBfdHJhdmVyc2UoTyksXG4gICAgc2VxdWVuY2U6IF9zZXF1ZW5jZShPKSxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogX3RyYXZlcnNlV2l0aEluZGV4KE8pXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFdpdGhlcmFibGUgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciBUID0gZ2V0VHJhdmVyc2FibGUoTyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgVVJJOiBVUkksXG4gICAgICAgIG1hcDogX21hcCxcbiAgICAgICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgICAgICBmb2xkTWFwOiBfZm9sZE1hcChPKSxcbiAgICAgICAgcmVkdWNlUmlnaHQ6IF9yZWR1Y2VSaWdodChPKSxcbiAgICAgICAgdHJhdmVyc2U6IFQudHJhdmVyc2UsXG4gICAgICAgIHNlcXVlbmNlOiBULnNlcXVlbmNlLFxuICAgICAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgICAgICBzZXBhcmF0ZTogc2VwYXJhdGUsXG4gICAgICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICAgICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgICAgICBwYXJ0aXRpb246IF9wYXJ0aXRpb24sXG4gICAgICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICAgICAgd2l0aGVyOiB3aXRoZXJEZWZhdWx0KFQsIENvbXBhY3RhYmxlKSxcbiAgICAgICAgd2lsdDogd2lsdERlZmF1bHQoVCwgQ29tcGFjdGFibGUpXG4gICAgfTtcbn07XG4vKipcbiAqIEdpdmVuIGEgYFNlbWlncm91cGAgaW4gdGhlIGJhc2UgdHlwZSwgaXQgcHJvZHVjZXMgYSBgU2VtaWdyb3VwYFxuICogaW4gdGhlIGBSZWFkb25seVJlY29yZGAgb2YgdGhlIGJhc2UgdHlwZS5cbiAqIFRoZSByZXN1bHRpbmcgYFNlbWlncm91cGAgY29uY2F0ZW5hdGVzIHR3byBgUmVhZG9ubHlSZWNvcmRgcyBieVxuICogYHVuaW9uYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZ2V0VW5pb25TZW1pZ3JvdXAsIFJlYWRvbmx5UmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IFNlbWlncm91cCB9IGZyb20gXCJmcC10cy9TZW1pZ3JvdXBcIlxuICpcbiAqIGNvbnN0IHNOdW1iZXI6IFNlbWlncm91cDxudW1iZXI+ID0geyBjb25jYXQ6ICh4LCB5KSA9PiB4IC0geSB9O1xuICogY29uc3Qgc1JlYWRvbmx5UmVjb3JkOiBTZW1pZ3JvdXA8UmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PiA9IGdldFVuaW9uU2VtaWdyb3VwKHNOdW1iZXIpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzUmVhZG9ubHlSZWNvcmQuY29uY2F0KHsgYTogMSwgYjogMiB9LCB7IGI6IDMsIGM6IDQgfSksIHsgYTogMSwgYjogLTEsIGM6IDQgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFVuaW9uU2VtaWdyb3VwID0gZnVuY3Rpb24gKFMpIHtcbiAgICB2YXIgdW5pb25TID0gdW5pb24oUyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uY2F0OiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgeyByZXR1cm4gdW5pb25TKHNlY29uZCkoZmlyc3QpOyB9XG4gICAgfTtcbn07XG4vKipcbiAqIFNhbWUgYXMgYGdldE1vbm9pZGAuXG4gKiBSZXR1cm5zIGEgYE1vbm9pZGAgaW5zdGFuY2UgZm9yIGBSZWFkb25seVJlY29yZGBzIGdpdmVuIGEgYFNlbWlncm91cGBcbiAqIGluc3RhbmNlIGZvciB0aGUgYmFzZSB0eXBlLlxuICogVGhlIGBNb25vaWRgIG1ha2VzIHRoZSB1bmlvbiBvZiB0d28gYFJlYWRvbmx5UmVjb3JkYHMgY29tYmluaW5nIHRoZVxuICogZW50cmllcyB0aGF0IGhhdmUgdGhlIHNhbWUga2V5IHdpdGggdGhlIHByb3ZpZGVkIGBTZW1pZ3JvdXBgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgeyBnZXRVbmlvbk1vbm9pZCB9IGZyb20gJ2ZwLXRzL1JlYWRvbmx5UmVjb3JkJ1xuICpcbiAqIGNvbnN0IE0gPSBnZXRVbmlvbk1vbm9pZChTZW1pZ3JvdXBTdW0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdCh7IGZvbzogMTIzLCBiYXI6IDIzNCB9LCB7IGZvbzogNDU2LCBiYXo6IDU2NyB9KSwgeyBmb286IDU3OSAsIGJhcjogMjM0LCBiYXo6IDU2NyB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VW5pb25Nb25vaWQgPSBmdW5jdGlvbiAoUykgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGdldFVuaW9uU2VtaWdyb3VwKFMpLmNvbmNhdCxcbiAgICBlbXB0eTogZW1wdHlcbn0pOyB9O1xuLyoqXG4gKiBHaXZlbiBhIGBTZW1pZ3JvdXBgIGluIHRoZSBiYXNlIHR5cGUsIGl0IHByb2R1Y2VzIGEgYFNlbWlncm91cGBcbiAqIGluIHRoZSBgUmVhZG9ubHlSZWNvcmRgIG9mIHRoZSBiYXNlIHR5cGUuXG4gKiBUaGUgcmVzdWx0aW5nIGBTZW1pZ3JvdXBgIGNvbmNhdGVuYXRlcyB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYnlcbiAqIGBpbnRlcnNlY3Rpb25gLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAsIFJlYWRvbmx5UmVjb3JkIH0gZnJvbSBcImZwLXRzL1JlYWRvbmx5UmVjb3JkXCJcbiAqIGltcG9ydCB7IFNlbWlncm91cCB9IGZyb20gXCJmcC10cy9TZW1pZ3JvdXBcIlxuICpcbiAqIGNvbnN0IHNOdW1iZXI6IFNlbWlncm91cDxudW1iZXI+ID0geyBjb25jYXQ6ICh4LCB5KSA9PiB4IC0geSB9O1xuICogY29uc3Qgc1JlYWRvbmx5UmVjb3JkOiBTZW1pZ3JvdXA8UmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PiA9IGdldEludGVyc2VjdGlvblNlbWlncm91cChzTnVtYmVyKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc1JlYWRvbmx5UmVjb3JkLmNvbmNhdCh7IGE6IDEsIGI6IDIgfSwgeyBiOiAzLCBjOiA0IH0pLCB7IGI6IC0xIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAgPSBmdW5jdGlvbiAoUykge1xuICAgIHZhciBpbnRlcnNlY3Rpb25TID0gaW50ZXJzZWN0aW9uKFMpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGludGVyc2VjdGlvblMoc2Vjb25kKShmaXJzdCk7IH1cbiAgICB9O1xufTtcbi8qKlxuICogUHJvZHVjZXMgYSBgTWFnbWFgIHdpdGggYSBgY29uY2F0YCBmdW5jdGlvbiB0aGF0IGNvbWJpbmVzXG4gKiB0d28gYFJlYWRvbmx5UmVjb3JkYHMgYnkgbWFraW5nIHRoZSBgZGlmZmVyZW5jZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldERpZmZlcmVuY2VNYWdtYSwgZGlmZmVyZW5jZSwgUmVhZG9ubHlSZWNvcmQgfSBmcm9tIFwiZnAtdHMvUmVhZG9ubHlSZWNvcmRcIlxuICogaW1wb3J0IHsgTWFnbWEgfSBmcm9tIFwiZnAtdHMvTWFnbWFcIlxuICpcbiAqIGNvbnN0IHIxID0geyBhOiAzLCBjOiAzIH07XG4gKiBjb25zdCByMiA9IHsgYTogMSwgYjogMiB9O1xuICogY29uc3QgbTogTWFnbWE8UmVhZG9ubHlSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PiA9IGdldERpZmZlcmVuY2VNYWdtYTxudW1iZXI+KCk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG0uY29uY2F0KHIxLCByMiksIGRpZmZlcmVuY2UocjIpKHIxKSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG0uY29uY2F0KHIxLCByMiksIHsgYzogMywgYjogMiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RGlmZmVyZW5jZU1hZ21hID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICBjb25jYXQ6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7IHJldHVybiBkaWZmZXJlbmNlKHNlY29uZCkoZmlyc3QpOyB9XG59KTsgfTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGRlcHJlY2F0ZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXNlIGBnZXRGb2xkYWJsZWAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIEZvbGRhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpXG59O1xuLyoqXG4gKiBVc2UgYGdldEZvbGRhYmxlV2l0aEluZGV4YCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGVXaXRoSW5kZXggPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZCksXG4gICAgcmVkdWNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VXaXRoSW5kZXgoUy5PcmQpLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXBXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodFdpdGhJbmRleChTLk9yZClcbn07XG4vKipcbiAqIFVzZSBgZ2V0VHJhdmVyc2FibGVgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZSA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZCksXG4gICAgdHJhdmVyc2U6IC8qI19fUFVSRV9fKi8gX3RyYXZlcnNlKFMuT3JkKSxcbiAgICBzZXF1ZW5jZTogc2VxdWVuY2Vcbn07XG4vKipcbiAqIFVzZSBgZ2V0VHJhdmVyc2FibGVXaXRoSW5kZXhgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHJlZHVjZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlV2l0aEluZGV4KFMuT3JkKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwV2l0aEluZGV4KFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHRyYXZlcnNlOiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZVdpdGhJbmRleChTLk9yZClcbn07XG52YXIgX3dpdGhlciA9IC8qI19fUFVSRV9fKi8gd2l0aGVyRGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xudmFyIF93aWx0ID0gLyojX19QVVJFX18qLyB3aWx0RGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xuLyoqXG4gKiBVc2UgYGdldFdpdGhlcmFibGVgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBXaXRoZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICB0cmF2ZXJzZTogLyojX19QVVJFX18qLyBfdHJhdmVyc2UoUy5PcmQpLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuLyoqXG4gKiBVc2UgW2B1cHNlcnRBdGBdKCN1cHNlcnRhdCkgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGluc2VydEF0ID0gdXBzZXJ0QXQ7XG5leHBvcnQgZnVuY3Rpb24gaGFzT3duUHJvcGVydHkoaywgcikge1xuICAgIHJldHVybiBfLmhhcy5jYWxsKHIgPT09IHVuZGVmaW5lZCA/IHRoaXMgOiByLCBrKTtcbn1cbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgUlIuRnVuY3RvcmAgaW5zdGVhZCBvZiBgUlIucmVhZG9ubHlSZWNvcmRgXG4gKiAod2hlcmUgYFJSYCBpcyBmcm9tIGBpbXBvcnQgUlIgZnJvbSAnZnAtdHMvUmVhZG9ubHlSZWNvcmQnYClcbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNS4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIHJlYWRvbmx5UmVjb3JkID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICB0cmF2ZXJzZTogLyojX19QVVJFX18qLyBfdHJhdmVyc2UoUy5PcmQpLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlV2l0aEluZGV4KFMuT3JkKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwV2l0aEluZGV4KFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoUy5PcmQpLFxuICAgIGZpbHRlck1hcFdpdGhJbmRleDogX2ZpbHRlck1hcFdpdGhJbmRleCxcbiAgICBmaWx0ZXJXaXRoSW5kZXg6IF9maWx0ZXJXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uTWFwV2l0aEluZGV4OiBfcGFydGl0aW9uTWFwV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbldpdGhJbmRleDogX3BhcnRpdGlvbldpdGhJbmRleCxcbiAgICB0cmF2ZXJzZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfdHJhdmVyc2VXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHdpdGhlcjogX3dpdGhlcixcbiAgICB3aWx0OiBfd2lsdFxufTtcbiIsCiAgInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5pbXBvcnQgKiBhcyBBIGZyb20gJy4vQXJyYXknO1xuaW1wb3J0IHsgcGlwZSB9IGZyb20gJy4vZnVuY3Rpb24nO1xuaW1wb3J0IHsgZmxhcCBhcyBmbGFwXyB9IGZyb20gJy4vRnVuY3Rvcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0ICogYXMgUlIgZnJvbSAnLi9SZWFkb25seVJlY29yZCc7XG5pbXBvcnQgKiBhcyBTZSBmcm9tICcuL1NlbWlncm91cCc7XG5pbXBvcnQgKiBhcyBTIGZyb20gJy4vc3RyaW5nJztcbmltcG9ydCB7IHdpbHREZWZhdWx0LCB3aXRoZXJEZWZhdWx0IH0gZnJvbSAnLi9XaXRoZXJhYmxlJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIG1vZGVsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGtleS92YWx1ZSBwYWlycyBpbiBhIGBSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzaXplIH0gZnJvbSBcImZwLXRzL1JlY29yZFwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2l6ZSh7IGE6IHRydWUsIGI6IDIsIGM6IFwidGhyZWVcIiB9KSwgMyk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc2l6ZSA9IFJSLnNpemU7XG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIGBSZWNvcmRgIGlzIGVtcHR5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSBcImZwLXRzL1JlY29yZFwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaXNFbXB0eSh7fSksIHRydWUpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChpc0VtcHR5KHsgYTogMyB9KSwgZmFsc2UpO1xuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGlzRW1wdHkgPSBSUi5pc0VtcHR5O1xudmFyIGtleXNfID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHIpLnNvcnQoTy5jb21wYXJlKTtcbiAgICB9O1xufTtcbi8qKlxuICogVGhlIGtleXMgb2YgYSBgUmVjb3JkYCwgc29ydGVkIGFscGhhYmV0aWNhbGx5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBrZXlzIH0gZnJvbSBcImZwLXRzL1JlY29yZFwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoa2V5cyh7IGM6IDEsIGE6IDIsIGI6IDMgfSksIFtcImFcIiwgXCJiXCIsIFwiY1wiXSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIga2V5cyA9IC8qI19fUFVSRV9fKi8ga2V5c18oUy5PcmQpO1xuZXhwb3J0IGZ1bmN0aW9uIGNvbGxlY3QoTykge1xuICAgIGlmICh0eXBlb2YgTyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gY29sbGVjdChTLk9yZCkoTyk7XG4gICAgfVxuICAgIHZhciBrZXlzTyA9IGtleXNfKE8pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBrZXlzTyhyKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGYoa2V5LCByW2tleV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfTtcbn1cbi8qKlxuICogR2V0IGEgc29ydGVkIGBBcnJheWAgb2YgdGhlIGtleS92YWx1ZSBwYWlycyBjb250YWluZWQgaW4gYSBgUmVjb3JkYC5cbiAqIFNvcnRlZCBhbHBoYWJldGljYWxseSBieSBrZXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHRvQXJyYXkgfSBmcm9tICdmcC10cy9SZWNvcmQnXG4gKlxuICogY29uc3QgeCA9IHsgYzogMywgYTogXCJmb29cIiwgYjogZmFsc2UgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodG9BcnJheSh4KSwgW1xuICogICBbXCJhXCIsIFwiZm9vXCJdLFxuICogICBbXCJiXCIsIGZhbHNlXSxcbiAqICAgW1wiY1wiLCAzXSxcbiAqIF0pO1xuICpcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdG9BcnJheSA9IC8qI19fUFVSRV9fKi8gY29sbGVjdChTLk9yZCkoZnVuY3Rpb24gKGssIGEpIHsgcmV0dXJuIFtcbiAgICBrLFxuICAgIGFcbl07IH0pO1xuZXhwb3J0IGZ1bmN0aW9uIHRvVW5mb2xkYWJsZShVKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHZhciBzYXMgPSB0b0FycmF5KHIpO1xuICAgICAgICB2YXIgbGVuID0gc2FzLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIFUudW5mb2xkKDAsIGZ1bmN0aW9uIChiKSB7IHJldHVybiAoYiA8IGxlbiA/IF8uc29tZShbc2FzW2JdLCBiICsgMV0pIDogXy5ub25lKTsgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogSW5zZXJ0IG9yIHJlcGxhY2UgYSBrZXkvdmFsdWUgcGFpciBpbiBhIGBSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1cHNlcnRBdCB9IGZyb20gJ2ZwLXRzL1JlY29yZCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHVwc2VydEF0KFwiYVwiLCA1KSh7IGE6IDEsIGI6IDIgfSksIHsgYTogNSwgYjogMiB9KTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodXBzZXJ0QXQoXCJjXCIsIDUpKHsgYTogMSwgYjogMiB9KSwgeyBhOiAxLCBiOiAyLCBjOiA1IH0pO1xuICpcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciB1cHNlcnRBdCA9IFJSLnVwc2VydEF0O1xuLyoqXG4gKiBUZXN0IHdoZXRoZXIgb3Igbm90IGEga2V5IGV4aXN0cyBpbiBhIGBSZWNvcmRgLlxuICpcbiAqIE5vdGUuIFRoaXMgZnVuY3Rpb24gaXMgbm90IHBpcGVhYmxlIGJlY2F1c2UgaXMgYSBgUmVmaW5lbWVudGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGhhcyB9IGZyb20gJ2ZwLXRzL1JlY29yZCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGhhcyhcImFcIiwgeyBhOiAxLCBiOiAyIH0pLCB0cnVlKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaGFzKFwiY1wiLCB7IGE6IDEsIGI6IDIgfSksIGZhbHNlKTtcbiAqXG4gKiBAc2luY2UgMi4xMC4wXG4gKi9cbmV4cG9ydCB2YXIgaGFzID0gUlIuaGFzO1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUF0KGspIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgaWYgKCFfLmhhcy5jYWxsKHIsIGspKSB7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gT2JqZWN0LmFzc2lnbih7fSwgcik7XG4gICAgICAgIGRlbGV0ZSBvdXRba107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbi8qKlxuICogUmVwbGFjZSBhIGtleS92YWx1ZSBwYWlyIGluIGEgYFJlY29yZGAuXG4gKlxuICogQHJldHVybnMgSWYgdGhlIHNwZWNpZmllZCBrZXkgZXhpc3RzIGl0IHJldHVybnMgYW4gYE9wdGlvbmAgY29udGFpbmluZyBhIG5ldyBgUmVjb3JkYFxuICogd2l0aCB0aGUgZW50cnkgdXBkYXRlZCwgb3RoZXJ3aXNlIGl0IHJldHVybnMgYE5vbmVgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHVwZGF0ZUF0IH0gZnJvbSAnZnAtdHMvUmVjb3JkJ1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cGRhdGVBdChcImFcIiwgMykoeyBhOiAxLCBiOiAyIH0pLCBvcHRpb24uc29tZSh7IGE6IDMsIGI6IDIgfSkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1cGRhdGVBdChcImNcIiwgMykoeyBhOiAxLCBiOiAyIH0pLCBvcHRpb24ubm9uZSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlQXQgPSBmdW5jdGlvbiAoaywgYSkge1xuICAgIHJldHVybiBtb2RpZnlBdChrLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9KTtcbn07XG4vKipcbiAqIEFwcGxpZXMgYSBtYXBwaW5nIGZ1bmN0aW9uIHRvIG9uZSBzcGNpZmljIGtleS92YWx1ZSBwYWlyIGluIGEgYFJlY29yZGAuXG4gKlxuICogQHJldHVybnMgSWYgdGhlIHNwZWNpZmllZCBrZXkgZXhpc3RzIGl0IHJldHVybnMgYW4gYE9wdGlvbmAgY29udGFpbmluZyBhIG5ldyBgUmVjb3JkYFxuICogd2l0aCB0aGUgZW50cnkgdXBkYXRlZCwgb3RoZXJ3aXNlIGl0IHJldHVybnMgYE5vbmVgXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1vZGlmeUF0IH0gZnJvbSAnZnAtdHMvUmVjb3JkJ1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtb2RpZnlBdChcImFcIiwgKHg6IG51bWJlcikgPT4geCAqIDMpKHsgYTogMSwgYjogMiB9KSwgb3B0aW9uLnNvbWUoeyBhOiAzLCBiOiAyIH0pKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobW9kaWZ5QXQoXCJjXCIsICh4OiBudW1iZXIpID0+IHggKiAzKSh7IGE6IDEsIGI6IDIgfSksIG9wdGlvbi5ub25lKTtcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtb2RpZnlBdCA9IGZ1bmN0aW9uIChrLCBmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIGlmICghaGFzKGssIHIpKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5ub25lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSBPYmplY3QuYXNzaWduKHt9LCByKTtcbiAgICAgICAgb3V0W2tdID0gZihyW2tdKTtcbiAgICAgICAgcmV0dXJuIF8uc29tZShvdXQpO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBvcChrKSB7XG4gICAgdmFyIGRlbGV0ZUF0ayA9IGRlbGV0ZUF0KGspO1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgICB2YXIgb2EgPSBsb29rdXAoaywgcik7XG4gICAgICAgIHJldHVybiBfLmlzTm9uZShvYSkgPyBfLm5vbmUgOiBfLnNvbWUoW29hLnZhbHVlLCBkZWxldGVBdGsocildKTtcbiAgICB9O1xufVxuLy8gVE9ETzogcmVtb3ZlIG5vbi1jdXJyaWVkIG92ZXJsb2FkaW5nIGluIHYzXG4vKipcbiAqIFRlc3Qgd2hldGhlciBvbmUgYFJlY29yZGAgY29udGFpbnMgYWxsIG9mIHRoZSBrZXlzIGFuZCB2YWx1ZXNcbiAqIGNvbnRhaW5lZCBpbiBhbm90aGVyIGBSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpc1N1YnJlY29yZCB9IGZyb20gJ2ZwLXRzL1JlY29yZCdcbiAqIGltcG9ydCB7IHN0cmluZyB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIGlzU3VicmVjb3JkKHN0cmluZy5FcSkoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcImJhelwiIH0pKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiwgYzogXCJiYXpcIiB9KSxcbiAqICAgdHJ1ZVxuICogKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIGlzU3VicmVjb3JkKHN0cmluZy5FcSkoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcImJhelwiIH0pKHsgYTogXCJmb29cIiwgYzogXCJiYXpcIiB9KSxcbiAqICAgdHJ1ZVxuICogKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIGlzU3VicmVjb3JkKHN0cmluZy5FcSkoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcImJhelwiIH0pKHsgYTogXCJmb29cIiwgYjogXCJub3QtYmFyXCIsIGM6IFwiYmF6XCIgfSksXG4gKiAgIGZhbHNlXG4gKiApO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcbiAqICAgaXNTdWJyZWNvcmQoc3RyaW5nLkVxKSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIgfSkoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcImJhelwiIH0pLFxuICogICBmYWxzZVxuICogKTtcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBpc1N1YnJlY29yZCA9IFJSLmlzU3VicmVjb3JkO1xuLy8gVE9ETzogcmVtb3ZlIG5vbi1jdXJyaWVkIG92ZXJsb2FkaW5nIGluIHYzXG4vKipcbiAqIExvb2t1cCB0aGUgdmFsdWUgZm9yIGEga2V5IGluIGEgYFJlY29yZGAuXG4gKlxuICogQHJldHVybnMgSWYgdGhlIHNwZWNpZmllZCBrZXkgZXhpc3RzIGl0IHJldHVybnMgYW4gYE9wdGlvbmAgY29udGFpbmluZyB0aGUgdmFsdWUsXG4gKiBvdGhlcndpc2UgaXQgcmV0dXJucyBgTm9uZWBcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbG9va3VwIH0gZnJvbSAnZnAtdHMvUmVjb3JkJ1xuICogaW1wb3J0IHsgb3B0aW9uIH0gZnJvbSAnZnAtdHMnXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChsb29rdXAoXCJiXCIpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiB9KSwgb3B0aW9uLnNvbWUoXCJiYXJcIikpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChsb29rdXAoXCJjXCIpKHsgYTogXCJmb29cIiwgYjogXCJiYXJcIiB9KSwgb3B0aW9uLm5vbmUpO1xuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGxvb2t1cCA9IFJSLmxvb2t1cDtcbi8qKlxuICogTWFwIGEgYFJlY29yZGAgcGFzc2luZyB0aGUga2V5L3ZhbHVlIHBhaXJzIHRvIHRoZSBpdGVyYXRpbmcgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1hcFdpdGhJbmRleCB9IGZyb20gXCJmcC10cy9SZWNvcmRcIjtcbiAqXG4gKiBjb25zdCBmID0gKGs6IHN0cmluZywgbjogbnVtYmVyKSA9PiBgJHtrLnRvVXBwZXJDYXNlKCl9LSR7bn1gO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChtYXBXaXRoSW5kZXgoZikoeyBhOiAzLCBiOiA1IH0pLCB7IGE6IFwiQS0zXCIsIGI6IFwiQi01XCIgfSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgbWFwV2l0aEluZGV4ID0gUlIubWFwV2l0aEluZGV4O1xuLyoqXG4gKiBNYXAgYSBgUmVjb3JkYCBwYXNzaW5nIHRoZSB2YWx1ZXMgdG8gdGhlIGl0ZXJhdGluZyBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWFwIH0gZnJvbSBcImZwLXRzL1JlY29yZFwiO1xuICpcbiAqIGNvbnN0IGYgPSAobjogbnVtYmVyKSA9PiBgLSR7bn0tYDtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobWFwKGYpKHsgYTogMywgYjogNSB9KSwgeyBhOiBcIi0zLVwiLCBiOiBcIi01LVwiIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBtYXBwaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBtYXAgPSBSUi5tYXA7XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlV2l0aEluZGV4KCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gYXJncy5sZW5ndGggPT09IDEgPyBSUi5yZWR1Y2VXaXRoSW5kZXgoYXJnc1swXSkgOiBSUi5yZWR1Y2VXaXRoSW5kZXgoUy5PcmQpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZm9sZE1hcFdpdGhJbmRleChPKSB7XG4gICAgcmV0dXJuICdjb21wYXJlJyBpbiBPID8gUlIuZm9sZE1hcFdpdGhJbmRleChPKSA6IFJSLmZvbGRNYXBXaXRoSW5kZXgoUy5PcmQpKE8pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVJpZ2h0V2l0aEluZGV4KCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gYXJncy5sZW5ndGggPT09IDEgPyBSUi5yZWR1Y2VSaWdodFdpdGhJbmRleChhcmdzWzBdKSA6IFJSLnJlZHVjZVJpZ2h0V2l0aEluZGV4KFMuT3JkKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBgUmVjb3JkYCB3aXRoIG9uZSBrZXkvdmFsdWUgcGFpci5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgc2luZ2xldG9uIH0gZnJvbSBcImZwLXRzL1JlY29yZFwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc2luZ2xldG9uKFwiYVwiLCAxKSwgeyBhOiAxIH0pO1xuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNpbmdsZXRvbiA9IFJSLnNpbmdsZXRvbjtcbmV4cG9ydCBmdW5jdGlvbiB0cmF2ZXJzZVdpdGhJbmRleChGKSB7XG4gICAgcmV0dXJuIFJSLnRyYXZlcnNlV2l0aEluZGV4KEYpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRyYXZlcnNlKEYpIHtcbiAgICByZXR1cm4gUlIudHJhdmVyc2UoRik7XG59XG5leHBvcnQgZnVuY3Rpb24gc2VxdWVuY2UoRikge1xuICAgIHJldHVybiBSUi5zZXF1ZW5jZShGKTtcbn1cbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2l0aGVyID0gZnVuY3Rpb24gKEYpIHtcbiAgICB2YXIgdHJhdmVyc2VGID0gdHJhdmVyc2UoRik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiBmdW5jdGlvbiAoZmEpIHsgcmV0dXJuIEYubWFwKHBpcGUoZmEsIHRyYXZlcnNlRihmKSksIGNvbXBhY3QpOyB9OyB9O1xufTtcbi8qKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuNi41XG4gKi9cbmV4cG9ydCB2YXIgd2lsdCA9IGZ1bmN0aW9uIChGKSB7XG4gICAgdmFyIHRyYXZlcnNlRiA9IHRyYXZlcnNlKEYpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBGLm1hcChwaXBlKGZhLCB0cmF2ZXJzZUYoZikpLCBzZXBhcmF0ZSk7IH07IH07XG59O1xuLyoqXG4gKiBNYXBzIGEgYFJlY29yZGAgd2l0aCBhIGZ1bmN0aW9uIHJldHVybmluZyBhbiBgRWl0aGVyYCBhbmRcbiAqIHBhcnRpdGlvbnMgdGhlIHJlc3VsdGluZyBgUmVjb3JkYCBpbnRvIGBMZWZ0YHMgYW5kIGBSaWdodGBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBwYXJ0aXRpb25NYXBXaXRoSW5kZXggfSBmcm9tIFwiZnAtdHMvUmVjb3JkXCJcbiAqIGltcG9ydCB7IGVpdGhlciB9IGZyb20gXCJmcC10c1wiXG4gKlxuICogY29uc3QgZiA9IChrZXk6IHN0cmluZywgYTogbnVtYmVyKSA9PlxuICogICBhID49IDAgPyBlaXRoZXIucmlnaHQoYCR7a2V5fSBpcyA+PSAwICgke2F9KWApIDogZWl0aGVyLmxlZnQoYCR7a2V5fSBpcyA8IDAgKCR7YX0pYCk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHBhcnRpdGlvbk1hcFdpdGhJbmRleChmKSh7IGE6IC0xLCBiOiAyLCBjOiAxMjMgfSksIHtcbiAqICAgbGVmdDoge1xuICogICAgIGE6IFwiYSBpcyA8IDAgKC0xKVwiLFxuICogICB9LFxuICogICByaWdodDoge1xuICogICAgIGI6IFwiYiBpcyA+PSAwICgyKVwiLFxuICogICAgIGM6IFwiYyBpcyA+PSAwICgxMjMpXCIsXG4gKiAgIH0sXG4gKiB9KTtcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBSUi5wYXJ0aXRpb25NYXBXaXRoSW5kZXg7XG5leHBvcnQgZnVuY3Rpb24gcGFydGl0aW9uV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBSUi5wYXJ0aXRpb25XaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KTtcbn1cbi8qKlxuICogTWFwcyBhIGBSZWNvcmRgIHdpdGggYW4gaXRlcmF0aW5nIGZ1bmN0aW9uIHRoYXQgdGFrZXMga2V5IGFuZCB2YWx1ZSBhbmRcbiAqIHJldHVybnMgYW4gYE9wdGlvbmAsIGtlZXBpbmcgb25seSB0aGUgYFNvbWVgIHZhbHVlcyBhbmQgZGlzY2FyZGluZyBgTm9uZWBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaWx0ZXJNYXBXaXRoSW5kZXggfSBmcm9tIFwiZnAtdHMvUmVjb3JkXCJcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gXCJmcC10c1wiXG4gKlxuICogY29uc3QgZiA9IChrZXk6IHN0cmluZywgYTogbnVtYmVyKSA9PiAoYSA+PSAwID8gb3B0aW9uLnNvbWUoYCR7a2V5fSR7YX1gKSA6IG9wdGlvbi5ub25lKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmlsdGVyTWFwV2l0aEluZGV4KGYpKHsgYTogLTEsIGI6IDIsIGM6IDMgfSksIHtcbiAqICAgYjogXCJiMlwiLFxuICogICBjOiBcImMzXCIsXG4gKiB9KTtcbiAqXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBmaWx0ZXJNYXBXaXRoSW5kZXggPSBSUi5maWx0ZXJNYXBXaXRoSW5kZXg7XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyV2l0aEluZGV4KHByZWRpY2F0ZVdpdGhJbmRleCkge1xuICAgIHJldHVybiBSUi5maWx0ZXJXaXRoSW5kZXgocHJlZGljYXRlV2l0aEluZGV4KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRm9sZGFibGUoTSwgRikge1xuICAgIHJldHVybiBSUi5mcm9tRm9sZGFibGUoTSwgRik7XG59XG4vKipcbiAqIEFsaWFzIG9mIFtgdG9BcnJheWBdKCN0b0FycmF5KS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgdG9FbnRyaWVzIH0gZnJvbSAnZnAtdHMvUmVjb3JkJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwodG9FbnRyaWVzKHsgYjogMiwgYTogMSB9KSwgW1snYScsIDFdLCBbJ2InLCAyXV0pXG4gKlxuICogQHNpbmNlIDIuMTIuMFxuICogQGNhdGVnb3J5IGNvbnZlcnNpb25zXG4gKi9cbmV4cG9ydCB2YXIgdG9FbnRyaWVzID0gdG9BcnJheTtcbi8qKlxuICogQ29udmVydHMgYW4gYEFycmF5YCBvZiBgW2tleSwgdmFsdWVdYCB0dXBsZXMgaW50byBhIGBSZWNvcmRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmcm9tRW50cmllcyB9IGZyb20gJ2ZwLXRzL1JlY29yZCdcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZyb21FbnRyaWVzKFtbJ2EnLCAxXSwgWydiJywgMl0sIFsnYScsIDNdXSksIHsgYjogMiwgYTogMyB9KVxuICpcbiAqIEBzaW5jZSAyLjEyLjBcbiAqIEBjYXRlZ29yeSBjb252ZXJzaW9uc1xuICovXG5leHBvcnQgdmFyIGZyb21FbnRyaWVzID0gZnVuY3Rpb24gKGZhKSB7IHJldHVybiBmcm9tRm9sZGFibGUoU2UubGFzdCgpLCBBLkZvbGRhYmxlKShmYSk7IH07XG5leHBvcnQgZnVuY3Rpb24gZnJvbUZvbGRhYmxlTWFwKE0sIEYpIHtcbiAgICByZXR1cm4gUlIuZnJvbUZvbGRhYmxlTWFwKE0sIEYpO1xufVxuLyoqXG4gKiBUZXN0IGlmIGV2ZXJ5IHZhbHVlIGluIGEgYFJlY29yZGAgc2F0aXNmaWVzIHRoZSBwcmVkaWNhdGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGV2ZXJ5IH0gZnJvbSBcImZwLXRzL1JlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChldmVyeSgobjogbnVtYmVyKSA9PiBuID49IDApKHsgYTogMSwgYjogMiB9KSwgdHJ1ZSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGV2ZXJ5KChuOiBudW1iZXIpID0+IG4gPj0gMCkoeyBhOiAxLCBiOiAtMSB9KSwgZmFsc2UpO1xuICpcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGV2ZXJ5ID0gUlIuZXZlcnk7XG4vKipcbiAqIFRlc3QgaWYgYXQgbGVhc3Qgb25lIHZhbHVlIGluIGEgYFJlY29yZGAgc2F0aXNmaWVzIHRoZSBwcmVkaWNhdGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHNvbWUgfSBmcm9tIFwiZnAtdHMvUmVjb3JkXCJcbiAqXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKHNvbWUoKG46IG51bWJlcikgPT4gbiA+PSAwKSh7IGE6IDEsIGI6IC0yIH0pLCB0cnVlKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoc29tZSgobjogbnVtYmVyKSA9PiBuID49IDApKHsgYTogLTEsIGI6IC0yIH0pLCBmYWxzZSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgc29tZSA9IFJSLnNvbWU7XG4vLyBUT0RPOiByZW1vdmUgbm9uLWN1cnJpZWQgb3ZlcmxvYWRpbmcgaW4gdjNcbi8qKlxuICogR2l2ZW4gYW4gYEVxYCBjaGVja3MgaWYgYSBgUmVjb3JkYCBjb250YWlucyBhbiBlbnRyeSB3aXRoXG4gKiB2YWx1ZSBlcXVhbCB0byBhIHByb3ZpZGVkIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBlbGVtIH0gZnJvbSBcImZwLXRzL1JlY29yZFwiXG4gKiBpbXBvcnQgeyBudW1iZXIgfSBmcm9tIFwiZnAtdHNcIlxuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZWxlbShudW1iZXIuRXEpKDEyMywgeyBmb286IDEyMywgYmFyOiAyMzQgfSksIHRydWUpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChlbGVtKG51bWJlci5FcSkoLTcsIHsgZm9vOiAxMjMsIGJhcjogMjM0IH0pLCBmYWxzZSk7XG4gKlxuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZWxlbSA9IFJSLmVsZW07XG4vKipcbiAqIFVuaW9uIG9mIHR3byBgUmVjb3JkYHMuXG4gKiBUYWtlcyB0d28gYFJlY29yZGBzIGFuZCBwcm9kdWNlcyBhIGBSZWNvcmRgIGNvbWJpbmluZyBhbGwgdGhlXG4gKiBlbnRyaWVzIG9mIHRoZSB0d28gaW5wdXRzLlxuICogSXQgdXNlcyB0aGUgYGNvbmNhdGAgZnVuY3Rpb24gb2YgdGhlIHByb3ZpZGVkIGBNYWdtYWAgdG9cbiAqIGNvbWJpbmUgdGhlIGVsZW1lbnRzIHdpdGggdGhlIHNhbWUga2V5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyB1bmlvbiB9IGZyb20gXCJmcC10cy9SZWNvcmRcIjtcbiAqIGltcG9ydCB7IE1hZ21hIH0gZnJvbSBcImZwLXRzL01hZ21hXCI7XG4gKlxuICogY29uc3QgbTE6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB4ICsgeSB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmlvbihtMSkoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiA0LCBiOiAyLCBjOiAzIH0pO1xuICogY29uc3QgbTI6IE1hZ21hPG51bWJlcj4gPSB7IGNvbmNhdDogKHg6IG51bWJlcikgPT4geCB9O1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCh1bmlvbihtMikoeyBhOiAzLCBjOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBhOiAxLCBiOiAyLCBjOiAzIH0pO1xuICpcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciB1bmlvbiA9IGZ1bmN0aW9uIChNKSB7XG4gICAgdmFyIHVuaW9uTSA9IFJSLnVuaW9uKE0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2Vjb25kKSB7IHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgICAgaWYgKGlzRW1wdHkoZmlyc3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oe30sIHNlY29uZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRW1wdHkoc2Vjb25kKSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKHt9LCBmaXJzdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuaW9uTShzZWNvbmQpKGZpcnN0KTtcbiAgICB9OyB9O1xufTtcbi8qKlxuICogSW50ZXJzZWN0aW9uIG9mIHR3byBgUmVjb3JkYHMuXG4gKiBUYWtlcyB0d28gYFJlY29yZGBzIGFuZCBwcm9kdWNlcyBhIGBSZWNvcmRgIGNvbWJpbmluZyBvbmx5IHRoZVxuICogZW50cmllcyBvZiB0aGUgdHdvIGlucHV0c3dpdGggdGhlIHNhbWUga2V5LlxuICogSXQgdXNlcyB0aGUgYGNvbmNhdGAgZnVuY3Rpb24gb2YgdGhlIHByb3ZpZGVkIGBNYWdtYWAgdG9cbiAqIGNvbWJpbmUgdGhlIGVsZW1lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBpbnRlcnNlY3Rpb24gfSBmcm9tIFwiZnAtdHMvUmVjb3JkXCI7XG4gKiBpbXBvcnQgeyBNYWdtYSB9IGZyb20gXCJmcC10cy9NYWdtYVwiO1xuICpcbiAqIGNvbnN0IG0xOiBNYWdtYTxudW1iZXI+ID0geyBjb25jYXQ6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4geCArIHkgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW50ZXJzZWN0aW9uKG0xKSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDR9KTtcbiAqIGNvbnN0IG0yOiBNYWdtYTxudW1iZXI+ID0geyBjb25jYXQ6ICh4OiBudW1iZXIpID0+IHggfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoaW50ZXJzZWN0aW9uKG0yKSh7IGE6IDMsIGM6IDMgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGE6IDF9KTtcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgaW50ZXJzZWN0aW9uID0gZnVuY3Rpb24gKE0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShmaXJzdCkgfHwgaXNFbXB0eShzZWNvbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFJSLmludGVyc2VjdGlvbihNKShzZWNvbmQpKGZpcnN0KTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogRGlmZmVyZW5jZSBiZXR3ZWVuIHR3byBgUmVjb3JkYHMuXG4gKiBUYWtlcyB0d28gYFJlY29yZGBzIGFuZCBwcm9kdWNlcyBhIGBSZWNvcmRgIGNvbXBvc2VkIGJ5IHRoZVxuICogZW50cmllcyBvZiB0aGUgdHdvIGlucHV0cywgcmVtb3ZpbmcgdGhlIGVudHJpZXMgd2l0aCB0aGUgc2FtZVxuICoga2V5IGluIGJvdGggaW5wdXRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBkaWZmZXJlbmNlIH0gZnJvbSBcImZwLXRzL1JlY29yZFwiO1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZGlmZmVyZW5jZSh7IGE6IDEgfSkoeyBhOiAxLCBiOiAyIH0pLCB7IGI6IDIgfSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGRpZmZlcmVuY2UoeyBhOiAzIH0pKHsgYTogMSwgYjogMiB9KSwgeyBiOiAyIH0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChkaWZmZXJlbmNlKHsgYTogMywgYzogMyB9KSh7IGE6IDEsIGI6IDIgfSksIHsgYjogMiwgYzogMyB9KTtcbiAqXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZGlmZmVyZW5jZSA9IGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZpcnN0KSB7XG4gICAgICAgIGlmIChpc0VtcHR5KGZpcnN0KSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKHt9LCBzZWNvbmQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0VtcHR5KHNlY29uZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbih7fSwgZmlyc3QpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSUi5kaWZmZXJlbmNlKHNlY29uZCkoZmlyc3QpO1xuICAgIH07XG59O1xudmFyIF9tYXAgPSBSUi5fbWFwO1xudmFyIF9tYXBXaXRoSW5kZXggPSBSUi5fbWFwV2l0aEluZGV4O1xudmFyIF9yZWR1Y2UgPSBSUi5fcmVkdWNlO1xudmFyIF9mb2xkTWFwID0gUlIuX2ZvbGRNYXA7XG52YXIgX3JlZHVjZVJpZ2h0ID0gUlIuX3JlZHVjZVJpZ2h0O1xudmFyIF9maWx0ZXIgPSBSUi5fZmlsdGVyO1xudmFyIF9maWx0ZXJNYXAgPSBSUi5fZmlsdGVyTWFwO1xudmFyIF9wYXJ0aXRpb24gPSBSUi5fcGFydGl0aW9uO1xudmFyIF9wYXJ0aXRpb25NYXAgPSBSUi5fcGFydGl0aW9uTWFwO1xudmFyIF9yZWR1Y2VXaXRoSW5kZXggPSBSUi5fcmVkdWNlV2l0aEluZGV4O1xudmFyIF9mb2xkTWFwV2l0aEluZGV4ID0gUlIuX2ZvbGRNYXBXaXRoSW5kZXg7XG52YXIgX3JlZHVjZVJpZ2h0V2l0aEluZGV4ID0gUlIuX3JlZHVjZVJpZ2h0V2l0aEluZGV4O1xudmFyIF9wYXJ0aXRpb25NYXBXaXRoSW5kZXggPSBSUi5fcGFydGl0aW9uTWFwV2l0aEluZGV4O1xudmFyIF9wYXJ0aXRpb25XaXRoSW5kZXggPSBSUi5fcGFydGl0aW9uV2l0aEluZGV4O1xudmFyIF9maWx0ZXJNYXBXaXRoSW5kZXggPSBSUi5fZmlsdGVyTWFwV2l0aEluZGV4O1xudmFyIF9maWx0ZXJXaXRoSW5kZXggPSBSUi5fZmlsdGVyV2l0aEluZGV4O1xudmFyIF90cmF2ZXJzZSA9IFJSLl90cmF2ZXJzZTtcbnZhciBfc2VxdWVuY2UgPSBSUi5fc2VxdWVuY2U7XG52YXIgX3RyYXZlcnNlV2l0aEluZGV4ID0gZnVuY3Rpb24gKE8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKEYpIHtcbiAgICAgICAgdmFyIGtleXNPID0ga2V5c18oTyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGEsIGYpIHtcbiAgICAgICAgICAgIHZhciBrcyA9IGtleXNPKHRhKTtcbiAgICAgICAgICAgIGlmIChrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRi5vZih7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnIgPSBGLm9mKHt9KTtcbiAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGZyID0gRi5hcChGLm1hcChmciwgZnVuY3Rpb24gKHIpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJba2V5XSA9IGI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgICAgIH07IH0pLCBmKGtleSwgdGFba2V5XSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwga3NfMSA9IGtzOyBfaSA8IGtzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtzXzFbX2ldO1xuICAgICAgICAgICAgICAgIF9sb29wXzEoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmcjtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbi8qKlxuICogR2l2ZW4gYSBgUHJlZGljYXRlYCwgaXQgcHJvZHVjZXMgYSBuZXcgYFJlY29yZGAga2VlcGluZyBvbmx5IHRoZSBlbnRyaWVzIHdpdGggYVxuICogdmFsdWUgdGhhdCBzYXRpc2ZpZXMgdGhlIHByb3ZpZGVkIHByZWRpY2F0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSBcImZwLXRzL1JlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaWx0ZXIoKHM6IHN0cmluZykgPT4gcy5sZW5ndGggPCA0KSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIsIGM6IFwidmVyeWxvbmdcIiB9KSwge1xuICogICBhOiBcImZvb1wiLFxuICogICBiOiBcImJhclwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyID0gUlIuZmlsdGVyO1xuLyoqXG4gKiBNYXBzIGEgYFJlY29yZGAgd2l0aCBhbiBpdGVyYXRpbmcgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGBPcHRpb25gXG4gKiBhbmQgaXQga2VlcHMgb25seSB0aGUgYFNvbWVgIHZhbHVlcyBkaXNjYXJkaW5nIHRoZSBgTm9uZWBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBmaWx0ZXJNYXAgfSBmcm9tIFwiZnAtdHMvUmVjb3JkXCJcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gXCJmcC10c1wiXG4gKlxuICogY29uc3QgZiA9IChzOiBzdHJpbmcpID0+IHMubGVuZ3RoIDwgNCA/IG9wdGlvbi5zb21lKGAke3N9IGlzIHNob3J0YCk6IG9wdGlvbi5ub25lXG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGZpbHRlck1hcChmKSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIsIGM6IFwidmVyeWxvbmdcIiB9KSwge1xuICogICBhOiBcImZvbyBpcyBzaG9ydFwiLFxuICogICBiOiBcImJhciBpcyBzaG9ydFwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgZmlsdGVyTWFwID0gUlIuZmlsdGVyTWFwO1xuLyoqXG4gKiBQYXJ0aXRpb24gYSBgUmVjb3JkYCBpbnRvIHR3byBwYXJ0cyBhY2NvcmRpbmcgdG8gYSBgUHJlZGljYXRlYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgcGFydGl0aW9uIH0gZnJvbSBcImZwLXRzL1JlY29yZFwiXG4gKlxuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb24oKHM6IHN0cmluZykgPT4gcy5sZW5ndGggPCA0KSh7IGE6IFwiZm9vXCIsIGI6IFwiYmFyXCIsIGM6IFwidmVyeWxvbmdcIiB9KSwge1xuICogICBsZWZ0OntcbiAqICAgICBjOiBcInZlcnlsb25nXCJcbiAqICAgfSxcbiAqICAgcmlnaHQ6IHtcbiAqICAgICBhOiBcImZvb1wiLFxuICogICAgIGI6IFwiYmFyXCIsXG4gKiAgIH0sXG4gKiB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBwYXJ0aXRpb24gPSBSUi5wYXJ0aXRpb247XG4vKipcbiAqIE1hcHMgYSBgUmVjb3JkYCB3aXRoIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGFuIGBFaXRoZXJgIGFuZFxuICogcGFydGl0aW9ucyB0aGUgcmVzdWx0aW5nIGBSZWNvcmRgIGludG8gYExlZnRgcyBhbmQgYFJpZ2h0YHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IHBhcnRpdGlvbk1hcCB9IGZyb20gXCJmcC10cy9SZWNvcmRcIlxuICogaW1wb3J0IHsgZWl0aGVyIH0gZnJvbSBcImZwLXRzXCJcbiAqXG4gKiBjb25zdCBmID0gKHM6IHN0cmluZykgPT4gKHMubGVuZ3RoIDwgNCA/IGVpdGhlci5yaWdodChgJHtzfSBpcyBzaG9ydGApIDogZWl0aGVyLmxlZnQoYCR7c30gaXMgbm90IHNob3J0YCkpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChwYXJ0aXRpb25NYXAoZikoeyBhOiBcImZvb1wiLCBiOiBcImJhclwiLCBjOiBcInZlcnlsb25nXCIgfSksIHtcbiAqICAgbGVmdDoge1xuICogICAgIGM6IFwidmVyeWxvbmcgaXMgbm90IHNob3J0XCIsXG4gKiAgIH0sXG4gKiAgIHJpZ2h0OiB7XG4gKiAgICAgYTogXCJmb28gaXMgc2hvcnRcIixcbiAqICAgICBiOiBcImJhciBpcyBzaG9ydFwiLFxuICogICB9LFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IGZpbHRlcmluZ1xuICogQHNpbmNlIDIuMC4wXG4gKi9cbmV4cG9ydCB2YXIgcGFydGl0aW9uTWFwID0gUlIucGFydGl0aW9uTWFwO1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZSgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZ3MubGVuZ3RoID09PSAxID8gUlIucmVkdWNlKGFyZ3NbMF0pIDogUlIucmVkdWNlKFMuT3JkKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvbGRNYXAoTykge1xuICAgIHJldHVybiAnY29tcGFyZScgaW4gTyA/IFJSLmZvbGRNYXAoTykgOiBSUi5mb2xkTWFwKFMuT3JkKShPKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VSaWdodCgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZ3MubGVuZ3RoID09PSAxID8gUlIucmVkdWNlUmlnaHQoYXJnc1swXSkgOiBSUi5yZWR1Y2VSaWdodChTLk9yZCkuYXBwbHkodm9pZCAwLCBhcmdzKTtcbn1cbi8qKlxuICogQ29tcGFjdCBhIGBSZWNvcmRgIG9mIGBPcHRpb25gcyBkaXNjYXJkaW5nIHRoZSBgTm9uZWAgdmFsdWVzIGFuZFxuICoga2VlcGluZyB0aGUgYFNvbWVgIHZhbHVlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29tcGFjdCB9IGZyb20gJ2ZwLXRzL1JlY29yZCdcbiAqIGltcG9ydCB7IG9wdGlvbiB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoY29tcGFjdCh7IGE6IG9wdGlvbi5zb21lKFwiZm9vXCIpLCBiOiBvcHRpb24ubm9uZSwgYzogb3B0aW9uLnNvbWUoXCJiYXJcIikgfSksIHtcbiAqICAgYTogXCJmb29cIixcbiAqICAgYzogXCJiYXJcIixcbiAqIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIGNvbXBhY3QgPSBSUi5jb21wYWN0O1xuLyoqXG4gKiBTZXBhcmF0ZSBhIGBSZWNvcmRgIG9mIGBFaXRoZXJgcyBpbnRvIGBMZWZ0YHMgYW5kIGBSaWdodGBzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBzZXBhcmF0ZSB9IGZyb20gJ2ZwLXRzL1JlY29yZCdcbiAqIGltcG9ydCB7IGVpdGhlciB9IGZyb20gJ2ZwLXRzJ1xuICpcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXG4gKiAgIHNlcGFyYXRlKHsgYTogZWl0aGVyLnJpZ2h0KFwiZm9vXCIpLCBiOiBlaXRoZXIubGVmdChcImJhclwiKSwgYzogZWl0aGVyLnJpZ2h0KFwiYmF6XCIpIH0pLFxuICogICB7XG4gKiAgICAgcmlnaHQ6IHtcbiAqICAgICAgIGE6IFwiZm9vXCIsXG4gKiAgICAgICBjOiBcImJhelwiLFxuICogICAgIH0sXG4gKiAgICAgbGVmdDoge1xuICogICAgICAgYjogXCJiYXJcIixcbiAqICAgICB9LFxuICogICB9XG4gKiApO1xuICpcbiAqIEBjYXRlZ29yeSBmaWx0ZXJpbmdcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIHNlcGFyYXRlID0gUlIuc2VwYXJhdGU7XG4vKipcbiAqIEBjYXRlZ29yeSB0eXBlIGxhbWJkYXNcbiAqIEBzaW5jZSAyLjAuMFxuICovXG5leHBvcnQgdmFyIFVSSSA9ICdSZWNvcmQnO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNob3coTykge1xuICAgIHJldHVybiAnY29tcGFyZScgaW4gTyA/IFJSLmdldFNob3coTykgOiBSUi5nZXRTaG93KFMuT3JkKShPKTtcbn1cbi8qKlxuICogR2l2ZW4gYW4gYEVxYCBmb3IgdGhlIGJhc2UgdHlwZSwgaXQgcHJvZHVjZXMgYW4gYEVxYFxuICogZm9yIGEgYFJlY29yZGAgb2YgdGhhdCBiYXNlIHR5cGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldEVxIH0gZnJvbSBcImZwLXRzL1JlY29yZFwiO1xuICogaW1wb3J0IHsgc3RyaW5nIH0gZnJvbSBcImZwLXRzXCI7XG4gKiBpbXBvcnQgeyBFcSB9IGZyb20gXCJmcC10cy9FcVwiO1xuICpcbiAqIGNvbnN0IGVxOiBFcTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiA9IGdldEVxKHN0cmluZy5FcSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGVxLmVxdWFscyh7IGE6IFwiZm9vXCIgfSwgeyBiOiBcImJhclwiIH0pLCBmYWxzZSk7XG4gKiBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKGVxLmVxdWFscyh7IGE6IFwiZm9vXCIgfSwgeyBhOiBcImZvb1wiIH0pLCB0cnVlKTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRFcSA9IFJSLmdldEVxO1xuLyoqXG4gKiBSZXR1cm5zIGEgYE1vbm9pZGAgaW5zdGFuY2UgZm9yIGBSZWNvcmRgcywgZ2l2ZW4gYSBgU2VtaWdyb3VwYFxuICogaW5zdGFuY2UgZm9yIHRoZSBiYXNlIHR5cGUuXG4gKiBUaGUgYE1vbm9pZGAgbWFrZXMgdGhlIHVuaW9uIG9mIHR3byBgUmVjb3JkYHMgY29taW5pbmcgdGhlXG4gKiBvdmVybGFwcGluZyBlbnRyaWVzIHdpdGggdGhlIHByb3ZpZGVkIGBTZW1pZ3JvdXBgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgeyBnZXRNb25vaWQgfSBmcm9tICdmcC10cy9SZWNvcmQnXG4gKlxuICogY29uc3QgTSA9IGdldE1vbm9pZChTZW1pZ3JvdXBTdW0pO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChNLmNvbmNhdCh7IGZvbzogMTIzLCBiYXI6IDIzNCB9LCB7IGZvbzogNDU2LCBiYXo6IDU2NyB9KSwgeyBmb286IDU3OSAsIGJhcjogMjM0LCBiYXo6IDU2NyB9KTtcbiAqXG4gKiBAY2F0ZWdvcnkgaW5zdGFuY2VzXG4gKiBAc2luY2UgMi4wLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRNb25vaWQgPSBSUi5nZXRNb25vaWQ7XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZ1bmN0b3IgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwXG59O1xuLyoqXG4gKiBUYWtlcyBhIHZhbHVlIGFuZCBhIGBSZWNvcmRgIG9mIGZ1bmN0aW9ucyBhbmQgcmV0dXJucyBhXG4gKiBgUmVjb3JkYCBieSBhcHBseWluZyBlYWNoIGZ1bmN0aW9uIHRvIHRoZSBpbnB1dCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZmxhcCB9IGZyb20gXCJmcC10cy9SZWNvcmRcIlxuICpcbiAqIGNvbnN0IGZhYiA9IHsgeDogKG46IG51bWJlcikgPT4gYCR7bn0gdGltZXMgMmAsIHk6IChuOiBudW1iZXIpID0+IGAke24gKiAyfWAgfTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoZmxhcCgzKShmYWIpLCB7XG4gKiAgIHg6IFwiMyB0aW1lcyAyXCIsXG4gKiAgIHk6IFwiNlwiLFxuICogfSk7XG4gKlxuICogQGNhdGVnb3J5IG1hcHBpbmdcbiAqIEBzaW5jZSAyLjEwLjBcbiAqL1xuZXhwb3J0IHZhciBmbGFwID0gLyojX19QVVJFX18qLyBmbGFwXyhGdW5jdG9yKTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRnVuY3RvcldpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4XG59O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBGb2xkYWJsZWAgaW5zdGFuY2UgZm9yIGEgYFJlY29yZGAsIHVzaW5nIHRoZVxuICogcHJvdmlkZWQgYE9yZGAgdG8gc29ydCB0aGUgYFJlY29yZGAncyBlbnRyaWVzIGJ5IGtleS5cbiAqXG4gKiBAY2F0ZWdvcnkgZm9sZGluZ1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldEZvbGRhYmxlID0gZnVuY3Rpb24gKE8pIHsgcmV0dXJuICh7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTylcbn0pOyB9O1xuLyoqXG4gKiBQcm9kdWNlcyBhIGBGb2xkYWJsZVdpdGhJbmRleDFgIGluc3RhbmNlIGZvciBhIGBSZWNvcmRgLCB1c2luZyB0aGVcbiAqIHByb3ZpZGVkIGBPcmRgIHRvIHNvcnQgdGhlIGBSZWNvcmRgJ3MgZW50cmllcyBieSBrZXkuXG4gKlxuICogQGNhdGVnb3J5IGZvbGRpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRGb2xkYWJsZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogVVJJLFxuICAgIHJlZHVjZTogX3JlZHVjZShPKSxcbiAgICBmb2xkTWFwOiBfZm9sZE1hcChPKSxcbiAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pLFxuICAgIHJlZHVjZVdpdGhJbmRleDogX3JlZHVjZVdpdGhJbmRleChPKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiBfZm9sZE1hcFdpdGhJbmRleChPKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogX3JlZHVjZVJpZ2h0V2l0aEluZGV4KE8pXG59KTsgfTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgQ29tcGFjdGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgY29tcGFjdDogY29tcGFjdCxcbiAgICBzZXBhcmF0ZTogc2VwYXJhdGVcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgdmFyIEZpbHRlcmFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcFxufTtcbi8qKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCB2YXIgRmlsdGVyYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICBmaWx0ZXJNYXBXaXRoSW5kZXg6IF9maWx0ZXJNYXBXaXRoSW5kZXgsXG4gICAgZmlsdGVyV2l0aEluZGV4OiBfZmlsdGVyV2l0aEluZGV4LFxuICAgIHBhcnRpdGlvbk1hcFdpdGhJbmRleDogX3BhcnRpdGlvbk1hcFdpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25XaXRoSW5kZXg6IF9wYXJ0aXRpb25XaXRoSW5kZXhcbn07XG4vKipcbiAqIFByb2R1Y2VzIGEgYFRyYXZlcnNhYmxlYCBpbnN0YW5jZSBmb3IgYSBgUmVjb3JkYCwgdXNpbmcgdGhlXG4gKiBwcm92aWRlZCBgT3JkYCB0byBzb3J0IHRoZSBgUmVjb3JkYCdzIGVudHJpZXMgYnkga2V5LlxuICpcbiAqIEBjYXRlZ29yeSB0cmF2ZXJzaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VHJhdmVyc2FibGUgPSBmdW5jdGlvbiAoTykgeyByZXR1cm4gKHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTyksXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZShPKSxcbiAgICBzZXF1ZW5jZTogX3NlcXVlbmNlKE8pXG59KTsgfTtcbi8qKlxuICogUHJvZHVjZXMgYSBgVHJhdmVyc2FibGVXaXRoSW5kZXhgIGluc3RhbmNlIGZvciBhIGBSZWNvcmRgLCB1c2luZyB0aGVcbiAqIHByb3ZpZGVkIGBPcmRgIHRvIHNvcnQgdGhlIGBSZWNvcmRgJ3MgZW50cmllcyBieSBrZXkuXG4gKlxuICogQGNhdGVnb3J5IHRyYXZlcnNpbmdcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IGZ1bmN0aW9uIChPKSB7IHJldHVybiAoe1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlOiBfcmVkdWNlKE8pLFxuICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgIHJlZHVjZVJpZ2h0OiBfcmVkdWNlUmlnaHQoTyksXG4gICAgcmVkdWNlV2l0aEluZGV4OiBfcmVkdWNlV2l0aEluZGV4KE8pLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IF9mb2xkTWFwV2l0aEluZGV4KE8pLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoTyksXG4gICAgdHJhdmVyc2U6IF90cmF2ZXJzZShPKSxcbiAgICBzZXF1ZW5jZTogX3NlcXVlbmNlKE8pLFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiBfdHJhdmVyc2VXaXRoSW5kZXgoTylcbn0pOyB9O1xuLyoqXG4gKiBAY2F0ZWdvcnkgZmlsdGVyaW5nXG4gKiBAc2luY2UgMi4xMS4wXG4gKi9cbmV4cG9ydCB2YXIgZ2V0V2l0aGVyYWJsZSA9IGZ1bmN0aW9uIChPKSB7XG4gICAgdmFyIFQgPSBnZXRUcmF2ZXJzYWJsZShPKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBVUkk6IFVSSSxcbiAgICAgICAgbWFwOiBfbWFwLFxuICAgICAgICByZWR1Y2U6IF9yZWR1Y2UoTyksXG4gICAgICAgIGZvbGRNYXA6IF9mb2xkTWFwKE8pLFxuICAgICAgICByZWR1Y2VSaWdodDogX3JlZHVjZVJpZ2h0KE8pLFxuICAgICAgICB0cmF2ZXJzZTogVC50cmF2ZXJzZSxcbiAgICAgICAgc2VxdWVuY2U6IFQuc2VxdWVuY2UsXG4gICAgICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICAgICAgZmlsdGVyOiBfZmlsdGVyLFxuICAgICAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICAgICAgcGFydGl0aW9uTWFwOiBfcGFydGl0aW9uTWFwLFxuICAgICAgICB3aXRoZXI6IHdpdGhlckRlZmF1bHQoVCwgQ29tcGFjdGFibGUpLFxuICAgICAgICB3aWx0OiB3aWx0RGVmYXVsdChULCBDb21wYWN0YWJsZSlcbiAgICB9O1xufTtcbi8qKlxuICogR2l2ZW4gYSBgU2VtaWdyb3VwYCBpbiB0aGUgYmFzZSB0eXBlLCBpdCBwcm9kdWNlcyBhIGBTZW1pZ3JvdXBgXG4gKiBpbiB0aGUgYFJlY29yZGAgb2YgdGhlIGJhc2UgdHlwZS5cbiAqIFRoZSByZXN1bHRpbmcgYFNlbWlncm91cGAgY29uY2F0ZW5hdGVzIHR3byBgUmVjb3JkYHMgYnlcbiAqIGB1bmlvbmAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGdldFVuaW9uU2VtaWdyb3VwIH0gZnJvbSBcImZwLXRzL1JlY29yZFwiXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXAgfSBmcm9tIFwiZnAtdHMvU2VtaWdyb3VwXCJcbiAqXG4gKiBjb25zdCBzTnVtYmVyOiBTZW1pZ3JvdXA8bnVtYmVyPiA9IHsgY29uY2F0OiAoeCwgeSkgPT4geCAtIHkgfTtcbiAqIGNvbnN0IHNSZWNvcmQ6IFNlbWlncm91cDxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PiA9IGdldFVuaW9uU2VtaWdyb3VwKHNOdW1iZXIpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzUmVjb3JkLmNvbmNhdCh7IGE6IDEsIGI6IDIgfSwgeyBiOiAzLCBjOiA0IH0pLCB7IGE6IDEsIGI6IC0xLCBjOiA0IH0pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRVbmlvblNlbWlncm91cCA9IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIHVuaW9uUyA9IHVuaW9uKFMpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIHVuaW9uUyhzZWNvbmQpKGZpcnN0KTsgfVxuICAgIH07XG59O1xuLyoqXG4gKiBTYW1lIGFzIGBnZXRNb25vaWRgLlxuICogUmV0dXJucyBhIGBNb25vaWRgIGluc3RhbmNlIGZvciBgUmVjb3JkYHMgZ2l2ZW4gYSBgU2VtaWdyb3VwYFxuICogaW5zdGFuY2UgZm9yIHRoZSBiYXNlIHR5cGUuXG4gKiBUaGUgYE1vbm9pZGAgbWFrZXMgdGhlIHVuaW9uIG9mIHR3byBgUmVjb3JkYHMgY29tYmluaW5nIHRoZVxuICogZW50cmllcyB0aGF0IGhhdmUgdGhlIHNhbWUga2V5IHdpdGggdGhlIHByb3ZpZGVkIGBTZW1pZ3JvdXBgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBTZW1pZ3JvdXBTdW0gfSBmcm9tICdmcC10cy9udW1iZXInXG4gKiBpbXBvcnQgeyBnZXRVbmlvbk1vbm9pZCB9IGZyb20gJ2ZwLXRzL1JlY29yZCdcbiAqXG4gKiBjb25zdCBNID0gZ2V0VW5pb25Nb25vaWQoU2VtaWdyb3VwU3VtKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoTS5jb25jYXQoeyBmb286IDEyMywgYmFyOiAyMzQgfSwgeyBmb286IDQ1NiwgYmF6OiA1NjcgfSksIHsgZm9vOiA1NzkgLCBiYXI6IDIzNCwgYmF6OiA1NjcgfSk7XG4gKlxuICogQGNhdGVnb3J5IGluc3RhbmNlc1xuICogQHNpbmNlIDIuMTEuMFxuICovXG5leHBvcnQgdmFyIGdldFVuaW9uTW9ub2lkID0gZnVuY3Rpb24gKFMpIHsgcmV0dXJuICh7XG4gICAgY29uY2F0OiBnZXRVbmlvblNlbWlncm91cChTKS5jb25jYXQsXG4gICAgZW1wdHk6IHt9XG59KTsgfTtcbi8qKlxuICogR2l2ZW4gYSBgU2VtaWdyb3VwYCBpbiB0aGUgYmFzZSB0eXBlLCBpdCBwcm9kdWNlcyBhIGBTZW1pZ3JvdXBgXG4gKiBpbiB0aGUgYFJlY29yZGAgb2YgdGhlIGJhc2UgdHlwZS5cbiAqIFRoZSByZXN1bHRpbmcgYFNlbWlncm91cGAgY29uY2F0ZW5hdGVzIHR3byBgUmVjb3JkYHMgYnlcbiAqIGBpbnRlcnNlY3Rpb25gLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAgfSBmcm9tIFwiZnAtdHMvUmVjb3JkXCJcbiAqIGltcG9ydCB7IFNlbWlncm91cCB9IGZyb20gXCJmcC10cy9TZW1pZ3JvdXBcIlxuICpcbiAqIGNvbnN0IHNOdW1iZXI6IFNlbWlncm91cDxudW1iZXI+ID0geyBjb25jYXQ6ICh4LCB5KSA9PiB4IC0geSB9O1xuICogY29uc3Qgc1JlY29yZDogU2VtaWdyb3VwPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0gZ2V0SW50ZXJzZWN0aW9uU2VtaWdyb3VwKHNOdW1iZXIpO1xuICogYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChzUmVjb3JkLmNvbmNhdCh7IGE6IDEsIGI6IDIgfSwgeyBiOiAzLCBjOiA0IH0pLCB7IGI6IC0xIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXRJbnRlcnNlY3Rpb25TZW1pZ3JvdXAgPSBmdW5jdGlvbiAoUykge1xuICAgIHZhciBpbnRlcnNlY3Rpb25TID0gaW50ZXJzZWN0aW9uKFMpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGludGVyc2VjdGlvblMoc2Vjb25kKShmaXJzdCk7IH1cbiAgICB9O1xufTtcbi8qKlxuICogUHJvZHVjZXMgYSBgTWFnbWFgIHdpdGggYSBgY29uY2F0YCBmdW5jdGlvbiB0aGF0IGNvbWJpbmVzXG4gKiB0d28gYFJlY29yZGBzIGJ5IG1ha2luZyB0aGUgYGRpZmZlcmVuY2VgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBnZXREaWZmZXJlbmNlTWFnbWEsIGRpZmZlcmVuY2UgfSBmcm9tIFwiZnAtdHMvUmVjb3JkXCJcbiAqIGltcG9ydCB7IE1hZ21hIH0gZnJvbSBcImZwLXRzL01hZ21hXCJcbiAqXG4gKiBjb25zdCByMSA9IHsgYTogMywgYzogMyB9O1xuICogY29uc3QgcjIgPSB7IGE6IDEsIGI6IDIgfTtcbiAqIGNvbnN0IG06IE1hZ21hPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0gZ2V0RGlmZmVyZW5jZU1hZ21hPG51bWJlcj4oKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobS5jb25jYXQocjEsIHIyKSwgZGlmZmVyZW5jZShyMikocjEpKTtcbiAqIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwobS5jb25jYXQocjEsIHIyKSwgeyBjOiAzLCBiOiAyIH0pO1xuICpcbiAqIEBjYXRlZ29yeSBpbnN0YW5jZXNcbiAqIEBzaW5jZSAyLjExLjBcbiAqL1xuZXhwb3J0IHZhciBnZXREaWZmZXJlbmNlTWFnbWEgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGNvbmNhdDogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGRpZmZlcmVuY2Uoc2Vjb25kKShmaXJzdCk7IH1cbn0pOyB9O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZGVwcmVjYXRlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBVc2UgYGdldEZvbGRhYmxlYCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi43LjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgRm9sZGFibGUgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgcmVkdWNlOiAvKiNfX1BVUkVfXyovIF9yZWR1Y2UoUy5PcmQpLFxuICAgIGZvbGRNYXA6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXAoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodChTLk9yZClcbn07XG4vKipcbiAqIFVzZSBgZ2V0Rm9sZGFibGVXaXRoSW5kZXhgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBGb2xkYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICByZWR1Y2VXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVdpdGhJbmRleChTLk9yZCksXG4gICAgZm9sZE1hcFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfZm9sZE1hcFdpdGhJbmRleChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHRXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0V2l0aEluZGV4KFMuT3JkKVxufTtcbi8qKlxuICogVXNlIGBnZXRUcmF2ZXJzYWJsZWAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgem9uZSBvZiBkZWF0aFxuICogQHNpbmNlIDIuNy4wXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIFRyYXZlcnNhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICB0cmF2ZXJzZTogLyojX19QVVJFX18qLyBfdHJhdmVyc2UoUy5PcmQpLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZVxufTtcbi8qKlxuICogVXNlIHRoZSBgZ2V0VHJhdmVyc2FibGVXaXRoSW5kZXhgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBUcmF2ZXJzYWJsZVdpdGhJbmRleCA9IHtcbiAgICBVUkk6IFVSSSxcbiAgICBtYXA6IF9tYXAsXG4gICAgbWFwV2l0aEluZGV4OiBfbWFwV2l0aEluZGV4LFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHJlZHVjZVdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlV2l0aEluZGV4KFMuT3JkKSxcbiAgICBmb2xkTWFwV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwV2l0aEluZGV4KFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodFdpdGhJbmRleDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHRXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHRyYXZlcnNlOiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZVdpdGhJbmRleChTLk9yZClcbn07XG52YXIgX3dpdGhlciA9IC8qI19fUFVSRV9fKi8gd2l0aGVyRGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xudmFyIF93aWx0ID0gLyojX19QVVJFX18qLyB3aWx0RGVmYXVsdChUcmF2ZXJzYWJsZSwgQ29tcGFjdGFibGUpO1xuLyoqXG4gKiBVc2UgYGdldFdpdGhlcmFibGVgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjcuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBXaXRoZXJhYmxlID0ge1xuICAgIFVSSTogVVJJLFxuICAgIG1hcDogX21hcCxcbiAgICByZWR1Y2U6IC8qI19fUFVSRV9fKi8gX3JlZHVjZShTLk9yZCksXG4gICAgZm9sZE1hcDogLyojX19QVVJFX18qLyBfZm9sZE1hcChTLk9yZCksXG4gICAgcmVkdWNlUmlnaHQ6IC8qI19fUFVSRV9fKi8gX3JlZHVjZVJpZ2h0KFMuT3JkKSxcbiAgICB0cmF2ZXJzZTogLyojX19QVVJFX18qLyBfdHJhdmVyc2UoUy5PcmQpLFxuICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIHNlcGFyYXRlOiBzZXBhcmF0ZSxcbiAgICBmaWx0ZXI6IF9maWx0ZXIsXG4gICAgZmlsdGVyTWFwOiBfZmlsdGVyTWFwLFxuICAgIHBhcnRpdGlvbjogX3BhcnRpdGlvbixcbiAgICBwYXJ0aXRpb25NYXA6IF9wYXJ0aXRpb25NYXAsXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuLyoqXG4gKiBVc2UgYSBuZXcgYHt9YCBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgZW1wdHkgPSB7fTtcbi8qKlxuICogVXNlIFtgdXBzZXJ0QXRgXSgjdXBzZXJ0YXQpIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBpbnNlcnRBdCA9IHVwc2VydEF0O1xuLyoqXG4gKiBVc2UgW2BoYXNgXSgjaGFzKSBpbnN0ZWFkLlxuICpcbiAqIEBjYXRlZ29yeSB6b25lIG9mIGRlYXRoXG4gKiBAc2luY2UgMi4wLjBcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgaGFzT3duUHJvcGVydHkgPSBSUi5oYXNPd25Qcm9wZXJ0eTtcbi8qKlxuICogVGhpcyBpbnN0YW5jZSBpcyBkZXByZWNhdGVkLCB1c2Ugc21hbGwsIHNwZWNpZmljIGluc3RhbmNlcyBpbnN0ZWFkLlxuICogRm9yIGV4YW1wbGUgaWYgYSBmdW5jdGlvbiBuZWVkcyBhIGBGdW5jdG9yYCBpbnN0YW5jZSwgcGFzcyBgUi5GdW5jdG9yYCBpbnN0ZWFkIG9mIGBSLnJlY29yZGBcbiAqICh3aGVyZSBgUmAgaXMgZnJvbSBgaW1wb3J0IFIgZnJvbSAnZnAtdHMvUmVjb3JkJ2ApXG4gKlxuICogQGNhdGVnb3J5IHpvbmUgb2YgZGVhdGhcbiAqIEBzaW5jZSAyLjAuMFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciByZWNvcmQgPSB7XG4gICAgVVJJOiBVUkksXG4gICAgbWFwOiBfbWFwLFxuICAgIHJlZHVjZTogLyojX19QVVJFX18qLyBfcmVkdWNlKFMuT3JkKSxcbiAgICBmb2xkTWFwOiAvKiNfX1BVUkVfXyovIF9mb2xkTWFwKFMuT3JkKSxcbiAgICByZWR1Y2VSaWdodDogLyojX19QVVJFX18qLyBfcmVkdWNlUmlnaHQoUy5PcmQpLFxuICAgIHRyYXZlcnNlOiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZShTLk9yZCksXG4gICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgc2VwYXJhdGU6IHNlcGFyYXRlLFxuICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICBmaWx0ZXJNYXA6IF9maWx0ZXJNYXAsXG4gICAgcGFydGl0aW9uOiBfcGFydGl0aW9uLFxuICAgIHBhcnRpdGlvbk1hcDogX3BhcnRpdGlvbk1hcCxcbiAgICBtYXBXaXRoSW5kZXg6IF9tYXBXaXRoSW5kZXgsXG4gICAgcmVkdWNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VXaXRoSW5kZXgoUy5PcmQpLFxuICAgIGZvbGRNYXBXaXRoSW5kZXg6IC8qI19fUFVSRV9fKi8gX2ZvbGRNYXBXaXRoSW5kZXgoUy5PcmQpLFxuICAgIHJlZHVjZVJpZ2h0V2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF9yZWR1Y2VSaWdodFdpdGhJbmRleChTLk9yZCksXG4gICAgZmlsdGVyTWFwV2l0aEluZGV4OiBfZmlsdGVyTWFwV2l0aEluZGV4LFxuICAgIGZpbHRlcldpdGhJbmRleDogX2ZpbHRlcldpdGhJbmRleCxcbiAgICBwYXJ0aXRpb25NYXBXaXRoSW5kZXg6IF9wYXJ0aXRpb25NYXBXaXRoSW5kZXgsXG4gICAgcGFydGl0aW9uV2l0aEluZGV4OiBfcGFydGl0aW9uV2l0aEluZGV4LFxuICAgIHRyYXZlcnNlV2l0aEluZGV4OiAvKiNfX1BVUkVfXyovIF90cmF2ZXJzZVdpdGhJbmRleChTLk9yZCksXG4gICAgd2l0aGVyOiBfd2l0aGVyLFxuICAgIHdpbHQ6IF93aWx0XG59O1xuIiwKICAiaW1wb3J0ICogYXMgTyBmcm9tIFwiZnAtdHMvT3B0aW9uXCI7XG5pbXBvcnQgKiBhcyBNIGZyb20gXCJmcC10cy9NYXBcIjtcbmltcG9ydCAqIGFzIEEgZnJvbSBcImZwLXRzL0FycmF5XCI7XG5pbXBvcnQgeyBmbG93LCBwaXBlLCBnZXRNb25vaWQgYXMgZ2V0RnVuY3Rpb25Nb25vaWQsIGFwcGx5LCBjb25zdGFudCwgZmxpcCwgdHVwbGVkLCB9IGZyb20gXCJmcC10cy9mdW5jdGlvblwiO1xuaW1wb3J0IHsgbm90IH0gZnJvbSBcImZwLXRzL1ByZWRpY2F0ZVwiO1xuaW1wb3J0IHsgZ2V0TW9ub2lkIGFzIGdldEVuZG9Nb25vaWQgfSBmcm9tIFwiZnAtdHMvRW5kb21vcnBoaXNtXCI7XG5pbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tIFwiZnAtdHMvTW9ub2lkXCI7XG5pbXBvcnQgeyBmaXJzdCB9IGZyb20gXCJmcC10cy9TZW1pZ3JvdXBcIjtcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBsZXQgYXMgbGV0X18gfSBmcm9tIFwiZnAtdHMvRnVuY3RvclwiO1xuaW1wb3J0IHsgYXBGaXJzdCBhcyBhcEZpcnN0XywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfLCBhcFMgYXMgYXBTXywgfSBmcm9tIFwiZnAtdHMvQXBwbHlcIjtcbmltcG9ydCB7IGJpbmQgYXMgYmluZF8gfSBmcm9tIFwiZnAtdHMvQ2hhaW5cIjtcbmV4cG9ydCBjb25zdCBVUkkgPSBcIkZ1bmN0aW9uXCI7XG5leHBvcnQgY29uc3QgbWFwID0gZiA9PiBnID0+IGZsb3coZywgZik7XG5leHBvcnQgY29uc3QgRnVuY3RvciA9IHtcbiAgICBVUkksXG4gICAgbWFwOiAoZiwgZykgPT4gbWFwKGcpKGYpLFxufTtcbmV4cG9ydCBjb25zdCBvZiA9IGNvbnN0YW50O1xuZXhwb3J0IGNvbnN0IGFwID0gZiA9PiBnID0+IHggPT4gZyh4KShmKHgpKTtcbmV4cG9ydCBjb25zdCBBcHBsaWNhdGl2ZSA9IHtcbiAgICAuLi5GdW5jdG9yLFxuICAgIG9mLFxuICAgIGFwOiAoZiwgZykgPT4gYXAoZykoZiksXG59O1xuZXhwb3J0IGNvbnN0IGFwRmlyc3QgPSBhcEZpcnN0XyhBcHBsaWNhdGl2ZSk7XG5leHBvcnQgY29uc3QgYXBTZWNvbmQgPSBhcFNlY29uZF8oQXBwbGljYXRpdmUpO1xuZXhwb3J0IGNvbnN0IGNoYWluID0gZiA9PiBnID0+IHggPT4gZihnKHgpKSh4KTtcbmV4cG9ydCBjb25zdCBmbGF0TWFwID0gY2hhaW47XG5leHBvcnQgY29uc3QgTW9uYWQgPSB7XG4gICAgLi4uQXBwbGljYXRpdmUsXG4gICAgY2hhaW46IChmLCBnKSA9PiBjaGFpbihnKShmKSxcbn07XG5leHBvcnQgY29uc3QgRG8gPSBvZih7fSk7XG5leHBvcnQgY29uc3QgYmluZFRvID0gYmluZFRvXyhGdW5jdG9yKTtcbmV4cG9ydCBjb25zdCBiaW5kID0gYmluZF8oTW9uYWQpO1xuZXhwb3J0IGNvbnN0IGFwUyA9IGFwU18oQXBwbGljYXRpdmUpO1xuY29uc3QgbGV0XyA9IGxldF9fKEZ1bmN0b3IpO1xuZXhwb3J0IHsgbGV0XyBhcyBsZXQsIH07XG5leHBvcnQgY29uc3Qgd2l0aEluZGV4ID0gZiA9PiBnID0+IHhzID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgcmV0dXJuIGYoeSA9PiBnKGkrKykoeSkpKHhzKTtcbn07XG5leHBvcnQgY29uc3QgdW5hcnkgPSB0dXBsZWQ7XG5leHBvcnQgY29uc3QgZ3VhcmQgPSAoYnJhbmNoZXMpID0+IChmYWxsYmFjaykgPT4gKGlucHV0KSA9PiBwaXBlKGJyYW5jaGVzLCBBLm1hcCgoW2YsIGddKSA9PiBmbG93KE8uZnJvbVByZWRpY2F0ZShmKSwgTy5tYXAoZykpKSwgY29uY2F0QWxsKGdldEZ1bmN0aW9uTW9ub2lkKE8uZ2V0TW9ub2lkKGZpcnN0KCkpKSgpKSwgYXBwbHkoaW5wdXQpLCBPLmdldE9yRWxzZSgoKSA9PiBmYWxsYmFjayhpbnB1dCkpKTtcbmV4cG9ydCBjb25zdCBpZkVsc2UgPSAob25UcnVlKSA9PiAob25GYWxzZSkgPT4gKGYpID0+ICh4KSA9PiBmKHgpID8gb25UcnVlKHgpIDogb25GYWxzZSh4KTtcbmV4cG9ydCBjb25zdCB1bmxlc3MgPSAoZikgPT4gKG9uRmFsc2UpID0+IHggPT4gZih4KSA/IHggOiBvbkZhbHNlKHgpO1xuZXhwb3J0IGNvbnN0IHdoZW4gPSBmbG93KG5vdCwgdW5sZXNzKTtcbmV4cG9ydCBjb25zdCB1bnRpbCA9IChmKSA9PiAoZykgPT4ge1xuICAgIGNvbnN0IGggPSB4ID0+IChmKHgpID8geCA6IGgoZyh4KSkpO1xuICAgIHJldHVybiBoO1xufTtcbmV4cG9ydCBjb25zdCBjb25zdHJ1Y3QgPSAoeCkgPT4gKHhzKSA9PiBuZXcgeCguLi54cyk7XG5leHBvcnQgY29uc3QgaW52b2tlID0gKHgpID0+ICh5cykgPT4gKHopID0+IHpbeF0oLi4ueXMpO1xuZXhwb3J0IGNvbnN0IGludm9rZU51bGxhcnkgPSBmbGlwKGludm9rZSkoW10pO1xuZXhwb3J0IGNvbnN0IGludm9rZU9uID0gKCkgPT4gKHgpID0+IHlzID0+IHogPT4gelt4XSguLi55cyk7XG5leHBvcnQgY29uc3QgbWVtb2l6ZSA9IChlcSkgPT4gKGYpID0+IHtcbiAgICBjb25zdCBjYWNoZSA9IG5ldyBNYXAoKTtcbiAgICByZXR1cm4gayA9PiB7XG4gICAgICAgIGNvbnN0IGNhY2hlZCA9IE0ubG9va3VwKGVxKShrKShjYWNoZSk7XG4gICAgICAgIGlmIChPLmlzU29tZShjYWNoZWQpKVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC52YWx1ZTtcbiAgICAgICAgY29uc3QgdmFsID0gZihrKTtcbiAgICAgICAgY2FjaGUuc2V0KGssIHZhbCk7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgY3VycnkyVCA9IChmKSA9PiAoYSkgPT4gKGIpID0+IGYoW2EsIGJdKTtcbmV4cG9ydCBjb25zdCBjdXJyeTIgPSBmbG93KHVuYXJ5LCBjdXJyeTJUKTtcbmV4cG9ydCBjb25zdCBjdXJyeTNUID0gKGYpID0+IChhKSA9PiAoYikgPT4gKGMpID0+IGYoW2EsIGIsIGNdKTtcbmV4cG9ydCBjb25zdCBjdXJyeTMgPSBmbG93KHVuYXJ5LCBjdXJyeTNUKTtcbmV4cG9ydCBjb25zdCBjdXJyeTRUID0gKGYpID0+IChhKSA9PiAoYikgPT4gKGMpID0+IChkKSA9PiBmKFthLCBiLCBjLCBkXSk7XG5leHBvcnQgY29uc3QgY3Vycnk0ID0gZmxvdyh1bmFyeSwgY3Vycnk0VCk7XG5leHBvcnQgY29uc3QgY3Vycnk1VCA9IChmKSA9PiAoYSkgPT4gKGIpID0+IChjKSA9PiAoZCkgPT4gKGUpID0+IGYoW2EsIGIsIGMsIGQsIGVdKTtcbmV4cG9ydCBjb25zdCBjdXJyeTUgPSBmbG93KHVuYXJ5LCBjdXJyeTVUKTtcbmV4cG9ydCBjb25zdCB1bmN1cnJ5MiA9IChmKSA9PiAoW2EsIGJdKSA9PiBmKGEpKGIpO1xuZXhwb3J0IGNvbnN0IHVuY3VycnkzID0gKGYpID0+IChbYSwgYiwgY10pID0+IGYoYSkoYikoYyk7XG5leHBvcnQgY29uc3QgdW5jdXJyeTQgPSAoZikgPT4gKFthLCBiLCBjLCBkXSkgPT4gZihhKShiKShjKShkKTtcbmV4cG9ydCBjb25zdCB1bmN1cnJ5NSA9IChmKSA9PiAoW2EsIGIsIGMsIGQsIGVdKSA9PiBmKGEpKGIpKGMpKGQpKGUpO1xuZXhwb3J0IGZ1bmN0aW9uIGZvcmsoZnMpIHtcbiAgICByZXR1cm4gKHgpID0+IGZzLm1hcChmID0+IGYoeCkpO1xufVxuZXhwb3J0IGNvbnN0IGNvbnZlcmdlID0gKGYpID0+IChncykgPT4gZmxvdyh4ID0+IGZvcmsoZ3MpKHgpLCBmKTtcbmV4cG9ydCBjb25zdCBpc0luc3RhbmNlT2YgPSAoeCkgPT4gKHkpID0+IHkgaW5zdGFuY2VvZiB4O1xuZXhwb3J0IGNvbnN0IGFwcGx5RXZlcnkgPSBjb25jYXRBbGwoZ2V0RW5kb01vbm9pZCgpKTtcbmV4cG9ydCBjb25zdCBhcHBseVNvbWVzID0gKGZzKSA9PiB4ID0+IHBpcGUoZnMsIEEucmVkdWNlKHgsICh5LCBtZikgPT4gcGlwZShtZiwgTy5tYXRjaChjb25zdGFudCh5KSwgYXBwbHkoeSkpKSkpO1xuZXhwb3J0IGNvbnN0IGFwcGx5TiA9IChuKSA9PiAoZikgPT4gcGlwZShBLnJlcGxpY2F0ZShuLCBmKSwgYXBwbHlFdmVyeSk7XG4iLAogICJpbXBvcnQgKiBhcyBPIGZyb20gXCJmcC10cy9PcHRpb25cIjtcbmltcG9ydCAqIGFzIE0gZnJvbSBcImZwLXRzL01hcFwiO1xuaW1wb3J0ICogYXMgQSBmcm9tIFwiZnAtdHMvQXJyYXlcIjtcbmltcG9ydCB7IGZsb3csIHBpcGUsIGdldE1vbm9pZCBhcyBnZXRGdW5jdGlvbk1vbm9pZCwgYXBwbHksIGNvbnN0YW50LCBmbGlwLCB0dXBsZWQsIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCI7XG5pbXBvcnQgeyBub3QgfSBmcm9tIFwiZnAtdHMvUHJlZGljYXRlXCI7XG5pbXBvcnQgeyBnZXRNb25vaWQgYXMgZ2V0RW5kb01vbm9pZCB9IGZyb20gXCJmcC10cy9FbmRvbW9ycGhpc21cIjtcbmltcG9ydCB7IGNvbmNhdEFsbCB9IGZyb20gXCJmcC10cy9Nb25vaWRcIjtcbmltcG9ydCB7IGZpcnN0IH0gZnJvbSBcImZwLXRzL1NlbWlncm91cFwiO1xuaW1wb3J0IHsgYmluZFRvIGFzIGJpbmRUb18sIGxldCBhcyBsZXRfXyB9IGZyb20gXCJmcC10cy9GdW5jdG9yXCI7XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFNlY29uZCBhcyBhcFNlY29uZF8sIGFwUyBhcyBhcFNfLCB9IGZyb20gXCJmcC10cy9BcHBseVwiO1xuaW1wb3J0IHsgYmluZCBhcyBiaW5kXyB9IGZyb20gXCJmcC10cy9DaGFpblwiO1xuZXhwb3J0IGNvbnN0IFVSSSA9IFwiRnVuY3Rpb25cIjtcbmV4cG9ydCBjb25zdCBtYXAgPSBmID0+IGcgPT4gZmxvdyhnLCBmKTtcbmV4cG9ydCBjb25zdCBGdW5jdG9yID0ge1xuICAgIFVSSSxcbiAgICBtYXA6IChmLCBnKSA9PiBtYXAoZykoZiksXG59O1xuZXhwb3J0IGNvbnN0IG9mID0gY29uc3RhbnQ7XG5leHBvcnQgY29uc3QgYXAgPSBmID0+IGcgPT4geCA9PiBnKHgpKGYoeCkpO1xuZXhwb3J0IGNvbnN0IEFwcGxpY2F0aXZlID0ge1xuICAgIC4uLkZ1bmN0b3IsXG4gICAgb2YsXG4gICAgYXA6IChmLCBnKSA9PiBhcChnKShmKSxcbn07XG5leHBvcnQgY29uc3QgYXBGaXJzdCA9IGFwRmlyc3RfKEFwcGxpY2F0aXZlKTtcbmV4cG9ydCBjb25zdCBhcFNlY29uZCA9IGFwU2Vjb25kXyhBcHBsaWNhdGl2ZSk7XG5leHBvcnQgY29uc3QgY2hhaW4gPSBmID0+IGcgPT4geCA9PiBmKGcoeCkpKHgpO1xuZXhwb3J0IGNvbnN0IGZsYXRNYXAgPSBjaGFpbjtcbmV4cG9ydCBjb25zdCBNb25hZCA9IHtcbiAgICAuLi5BcHBsaWNhdGl2ZSxcbiAgICBjaGFpbjogKGYsIGcpID0+IGNoYWluKGcpKGYpLFxufTtcbmV4cG9ydCBjb25zdCBEbyA9IG9mKHt9KTtcbmV4cG9ydCBjb25zdCBiaW5kVG8gPSBiaW5kVG9fKEZ1bmN0b3IpO1xuZXhwb3J0IGNvbnN0IGJpbmQgPSBiaW5kXyhNb25hZCk7XG5leHBvcnQgY29uc3QgYXBTID0gYXBTXyhBcHBsaWNhdGl2ZSk7XG5jb25zdCBsZXRfID0gbGV0X18oRnVuY3Rvcik7XG5leHBvcnQgeyBsZXRfIGFzIGxldCwgfTtcbmV4cG9ydCBjb25zdCB3aXRoSW5kZXggPSBmID0+IGcgPT4geHMgPT4ge1xuICAgIGxldCBpID0gMDtcbiAgICByZXR1cm4gZih5ID0+IGcoaSsrKSh5KSkoeHMpO1xufTtcbmV4cG9ydCBjb25zdCB1bmFyeSA9IHR1cGxlZDtcbmV4cG9ydCBjb25zdCBndWFyZCA9IChicmFuY2hlcykgPT4gKGZhbGxiYWNrKSA9PiAoaW5wdXQpID0+IHBpcGUoYnJhbmNoZXMsIEEubWFwKChbZiwgZ10pID0+IGZsb3coTy5mcm9tUHJlZGljYXRlKGYpLCBPLm1hcChnKSkpLCBjb25jYXRBbGwoZ2V0RnVuY3Rpb25Nb25vaWQoTy5nZXRNb25vaWQoZmlyc3QoKSkpKCkpLCBhcHBseShpbnB1dCksIE8uZ2V0T3JFbHNlKCgpID0+IGZhbGxiYWNrKGlucHV0KSkpO1xuZXhwb3J0IGNvbnN0IGlmRWxzZSA9IChvblRydWUpID0+IChvbkZhbHNlKSA9PiAoZikgPT4gKHgpID0+IGYoeCkgPyBvblRydWUoeCkgOiBvbkZhbHNlKHgpO1xuZXhwb3J0IGNvbnN0IHVubGVzcyA9IChmKSA9PiAob25GYWxzZSkgPT4geCA9PiBmKHgpID8geCA6IG9uRmFsc2UoeCk7XG5leHBvcnQgY29uc3Qgd2hlbiA9IGZsb3cobm90LCB1bmxlc3MpO1xuZXhwb3J0IGNvbnN0IHVudGlsID0gKGYpID0+IChnKSA9PiB7XG4gICAgY29uc3QgaCA9IHggPT4gKGYoeCkgPyB4IDogaChnKHgpKSk7XG4gICAgcmV0dXJuIGg7XG59O1xuZXhwb3J0IGNvbnN0IGNvbnN0cnVjdCA9ICh4KSA9PiAoeHMpID0+IG5ldyB4KC4uLnhzKTtcbmV4cG9ydCBjb25zdCBpbnZva2UgPSAoeCkgPT4gKHlzKSA9PiAoeikgPT4gelt4XSguLi55cyk7XG5leHBvcnQgY29uc3QgaW52b2tlTnVsbGFyeSA9IGZsaXAoaW52b2tlKShbXSk7XG5leHBvcnQgY29uc3QgaW52b2tlT24gPSAoKSA9PiAoeCkgPT4geXMgPT4geiA9PiB6W3hdKC4uLnlzKTtcbmV4cG9ydCBjb25zdCBtZW1vaXplID0gKGVxKSA9PiAoZikgPT4ge1xuICAgIGNvbnN0IGNhY2hlID0gbmV3IE1hcCgpO1xuICAgIHJldHVybiBrID0+IHtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gTS5sb29rdXAoZXEpKGspKGNhY2hlKTtcbiAgICAgICAgaWYgKE8uaXNTb21lKGNhY2hlZCkpXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnZhbHVlO1xuICAgICAgICBjb25zdCB2YWwgPSBmKGspO1xuICAgICAgICBjYWNoZS5zZXQoaywgdmFsKTtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xufTtcbmV4cG9ydCBjb25zdCBjdXJyeTJUID0gKGYpID0+IChhKSA9PiAoYikgPT4gZihbYSwgYl0pO1xuZXhwb3J0IGNvbnN0IGN1cnJ5MiA9IGZsb3codW5hcnksIGN1cnJ5MlQpO1xuZXhwb3J0IGNvbnN0IGN1cnJ5M1QgPSAoZikgPT4gKGEpID0+IChiKSA9PiAoYykgPT4gZihbYSwgYiwgY10pO1xuZXhwb3J0IGNvbnN0IGN1cnJ5MyA9IGZsb3codW5hcnksIGN1cnJ5M1QpO1xuZXhwb3J0IGNvbnN0IGN1cnJ5NFQgPSAoZikgPT4gKGEpID0+IChiKSA9PiAoYykgPT4gKGQpID0+IGYoW2EsIGIsIGMsIGRdKTtcbmV4cG9ydCBjb25zdCBjdXJyeTQgPSBmbG93KHVuYXJ5LCBjdXJyeTRUKTtcbmV4cG9ydCBjb25zdCBjdXJyeTVUID0gKGYpID0+IChhKSA9PiAoYikgPT4gKGMpID0+IChkKSA9PiAoZSkgPT4gZihbYSwgYiwgYywgZCwgZV0pO1xuZXhwb3J0IGNvbnN0IGN1cnJ5NSA9IGZsb3codW5hcnksIGN1cnJ5NVQpO1xuZXhwb3J0IGNvbnN0IHVuY3VycnkyID0gKGYpID0+IChbYSwgYl0pID0+IGYoYSkoYik7XG5leHBvcnQgY29uc3QgdW5jdXJyeTMgPSAoZikgPT4gKFthLCBiLCBjXSkgPT4gZihhKShiKShjKTtcbmV4cG9ydCBjb25zdCB1bmN1cnJ5NCA9IChmKSA9PiAoW2EsIGIsIGMsIGRdKSA9PiBmKGEpKGIpKGMpKGQpO1xuZXhwb3J0IGNvbnN0IHVuY3Vycnk1ID0gKGYpID0+IChbYSwgYiwgYywgZCwgZV0pID0+IGYoYSkoYikoYykoZCkoZSk7XG5leHBvcnQgZnVuY3Rpb24gZm9yayhmcykge1xuICAgIHJldHVybiAoeCkgPT4gZnMubWFwKGYgPT4gZih4KSk7XG59XG5leHBvcnQgY29uc3QgY29udmVyZ2UgPSAoZikgPT4gKGdzKSA9PiBmbG93KHggPT4gZm9yayhncykoeCksIGYpO1xuZXhwb3J0IGNvbnN0IGlzSW5zdGFuY2VPZiA9ICh4KSA9PiAoeSkgPT4geSBpbnN0YW5jZW9mIHg7XG5leHBvcnQgY29uc3QgYXBwbHlFdmVyeSA9IGNvbmNhdEFsbChnZXRFbmRvTW9ub2lkKCkpO1xuZXhwb3J0IGNvbnN0IGFwcGx5U29tZXMgPSAoZnMpID0+IHggPT4gcGlwZShmcywgQS5yZWR1Y2UoeCwgKHksIG1mKSA9PiBwaXBlKG1mLCBPLm1hdGNoKGNvbnN0YW50KHkpLCBhcHBseSh5KSkpKSk7XG5leHBvcnQgY29uc3QgYXBwbHlOID0gKG4pID0+IChmKSA9PiBwaXBlKEEucmVwbGljYXRlKG4sIGYpLCBhcHBseUV2ZXJ5KTtcbiIsCiAgImltcG9ydCAqIGFzIE8gZnJvbSBcImZwLXRzL09wdGlvblwiO1xuaW1wb3J0ICogYXMgTSBmcm9tIFwiZnAtdHMvTWFwXCI7XG5pbXBvcnQgKiBhcyBBIGZyb20gXCJmcC10cy9BcnJheVwiO1xuaW1wb3J0IHsgZmxvdywgcGlwZSwgZ2V0TW9ub2lkIGFzIGdldEZ1bmN0aW9uTW9ub2lkLCBhcHBseSwgY29uc3RhbnQsIGZsaXAsIHR1cGxlZCwgfSBmcm9tIFwiZnAtdHMvZnVuY3Rpb25cIjtcbmltcG9ydCB7IG5vdCB9IGZyb20gXCJmcC10cy9QcmVkaWNhdGVcIjtcbmltcG9ydCB7IGdldE1vbm9pZCBhcyBnZXRFbmRvTW9ub2lkIH0gZnJvbSBcImZwLXRzL0VuZG9tb3JwaGlzbVwiO1xuaW1wb3J0IHsgY29uY2F0QWxsIH0gZnJvbSBcImZwLXRzL01vbm9pZFwiO1xuaW1wb3J0IHsgZmlyc3QgfSBmcm9tIFwiZnAtdHMvU2VtaWdyb3VwXCI7XG5pbXBvcnQgeyBiaW5kVG8gYXMgYmluZFRvXywgbGV0IGFzIGxldF9fIH0gZnJvbSBcImZwLXRzL0Z1bmN0b3JcIjtcbmltcG9ydCB7IGFwRmlyc3QgYXMgYXBGaXJzdF8sIGFwU2Vjb25kIGFzIGFwU2Vjb25kXywgYXBTIGFzIGFwU18sIH0gZnJvbSBcImZwLXRzL0FwcGx5XCI7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfIH0gZnJvbSBcImZwLXRzL0NoYWluXCI7XG5leHBvcnQgY29uc3QgVVJJID0gXCJGdW5jdGlvblwiO1xuZXhwb3J0IGNvbnN0IG1hcCA9IGYgPT4gZyA9PiBmbG93KGcsIGYpO1xuZXhwb3J0IGNvbnN0IEZ1bmN0b3IgPSB7XG4gICAgVVJJLFxuICAgIG1hcDogKGYsIGcpID0+IG1hcChnKShmKSxcbn07XG5leHBvcnQgY29uc3Qgb2YgPSBjb25zdGFudDtcbmV4cG9ydCBjb25zdCBhcCA9IGYgPT4gZyA9PiB4ID0+IGcoeCkoZih4KSk7XG5leHBvcnQgY29uc3QgQXBwbGljYXRpdmUgPSB7XG4gICAgLi4uRnVuY3RvcixcbiAgICBvZixcbiAgICBhcDogKGYsIGcpID0+IGFwKGcpKGYpLFxufTtcbmV4cG9ydCBjb25zdCBhcEZpcnN0ID0gYXBGaXJzdF8oQXBwbGljYXRpdmUpO1xuZXhwb3J0IGNvbnN0IGFwU2Vjb25kID0gYXBTZWNvbmRfKEFwcGxpY2F0aXZlKTtcbmV4cG9ydCBjb25zdCBjaGFpbiA9IGYgPT4gZyA9PiB4ID0+IGYoZyh4KSkoeCk7XG5leHBvcnQgY29uc3QgZmxhdE1hcCA9IGNoYWluO1xuZXhwb3J0IGNvbnN0IE1vbmFkID0ge1xuICAgIC4uLkFwcGxpY2F0aXZlLFxuICAgIGNoYWluOiAoZiwgZykgPT4gY2hhaW4oZykoZiksXG59O1xuZXhwb3J0IGNvbnN0IERvID0gb2Yoe30pO1xuZXhwb3J0IGNvbnN0IGJpbmRUbyA9IGJpbmRUb18oRnVuY3Rvcik7XG5leHBvcnQgY29uc3QgYmluZCA9IGJpbmRfKE1vbmFkKTtcbmV4cG9ydCBjb25zdCBhcFMgPSBhcFNfKEFwcGxpY2F0aXZlKTtcbmNvbnN0IGxldF8gPSBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IGxldF8gYXMgbGV0LCB9O1xuZXhwb3J0IGNvbnN0IHdpdGhJbmRleCA9IGYgPT4gZyA9PiB4cyA9PiB7XG4gICAgbGV0IGkgPSAwO1xuICAgIHJldHVybiBmKHkgPT4gZyhpKyspKHkpKSh4cyk7XG59O1xuZXhwb3J0IGNvbnN0IHVuYXJ5ID0gdHVwbGVkO1xuZXhwb3J0IGNvbnN0IGd1YXJkID0gKGJyYW5jaGVzKSA9PiAoZmFsbGJhY2spID0+IChpbnB1dCkgPT4gcGlwZShicmFuY2hlcywgQS5tYXAoKFtmLCBnXSkgPT4gZmxvdyhPLmZyb21QcmVkaWNhdGUoZiksIE8ubWFwKGcpKSksIGNvbmNhdEFsbChnZXRGdW5jdGlvbk1vbm9pZChPLmdldE1vbm9pZChmaXJzdCgpKSkoKSksIGFwcGx5KGlucHV0KSwgTy5nZXRPckVsc2UoKCkgPT4gZmFsbGJhY2soaW5wdXQpKSk7XG5leHBvcnQgY29uc3QgaWZFbHNlID0gKG9uVHJ1ZSkgPT4gKG9uRmFsc2UpID0+IChmKSA9PiAoeCkgPT4gZih4KSA/IG9uVHJ1ZSh4KSA6IG9uRmFsc2UoeCk7XG5leHBvcnQgY29uc3QgdW5sZXNzID0gKGYpID0+IChvbkZhbHNlKSA9PiB4ID0+IGYoeCkgPyB4IDogb25GYWxzZSh4KTtcbmV4cG9ydCBjb25zdCB3aGVuID0gZmxvdyhub3QsIHVubGVzcyk7XG5leHBvcnQgY29uc3QgdW50aWwgPSAoZikgPT4gKGcpID0+IHtcbiAgICBjb25zdCBoID0geCA9PiAoZih4KSA/IHggOiBoKGcoeCkpKTtcbiAgICByZXR1cm4gaDtcbn07XG5leHBvcnQgY29uc3QgY29uc3RydWN0ID0gKHgpID0+ICh4cykgPT4gbmV3IHgoLi4ueHMpO1xuZXhwb3J0IGNvbnN0IGludm9rZSA9ICh4KSA9PiAoeXMpID0+ICh6KSA9PiB6W3hdKC4uLnlzKTtcbmV4cG9ydCBjb25zdCBpbnZva2VOdWxsYXJ5ID0gZmxpcChpbnZva2UpKFtdKTtcbmV4cG9ydCBjb25zdCBpbnZva2VPbiA9ICgpID0+ICh4KSA9PiB5cyA9PiB6ID0+IHpbeF0oLi4ueXMpO1xuZXhwb3J0IGNvbnN0IG1lbW9pemUgPSAoZXEpID0+IChmKSA9PiB7XG4gICAgY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgcmV0dXJuIGsgPT4ge1xuICAgICAgICBjb25zdCBjYWNoZWQgPSBNLmxvb2t1cChlcSkoaykoY2FjaGUpO1xuICAgICAgICBpZiAoTy5pc1NvbWUoY2FjaGVkKSlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQudmFsdWU7XG4gICAgICAgIGNvbnN0IHZhbCA9IGYoayk7XG4gICAgICAgIGNhY2hlLnNldChrLCB2YWwpO1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH07XG59O1xuZXhwb3J0IGNvbnN0IGN1cnJ5MlQgPSAoZikgPT4gKGEpID0+IChiKSA9PiBmKFthLCBiXSk7XG5leHBvcnQgY29uc3QgY3VycnkyID0gZmxvdyh1bmFyeSwgY3VycnkyVCk7XG5leHBvcnQgY29uc3QgY3VycnkzVCA9IChmKSA9PiAoYSkgPT4gKGIpID0+IChjKSA9PiBmKFthLCBiLCBjXSk7XG5leHBvcnQgY29uc3QgY3VycnkzID0gZmxvdyh1bmFyeSwgY3VycnkzVCk7XG5leHBvcnQgY29uc3QgY3Vycnk0VCA9IChmKSA9PiAoYSkgPT4gKGIpID0+IChjKSA9PiAoZCkgPT4gZihbYSwgYiwgYywgZF0pO1xuZXhwb3J0IGNvbnN0IGN1cnJ5NCA9IGZsb3codW5hcnksIGN1cnJ5NFQpO1xuZXhwb3J0IGNvbnN0IGN1cnJ5NVQgPSAoZikgPT4gKGEpID0+IChiKSA9PiAoYykgPT4gKGQpID0+IChlKSA9PiBmKFthLCBiLCBjLCBkLCBlXSk7XG5leHBvcnQgY29uc3QgY3Vycnk1ID0gZmxvdyh1bmFyeSwgY3Vycnk1VCk7XG5leHBvcnQgY29uc3QgdW5jdXJyeTIgPSAoZikgPT4gKFthLCBiXSkgPT4gZihhKShiKTtcbmV4cG9ydCBjb25zdCB1bmN1cnJ5MyA9IChmKSA9PiAoW2EsIGIsIGNdKSA9PiBmKGEpKGIpKGMpO1xuZXhwb3J0IGNvbnN0IHVuY3Vycnk0ID0gKGYpID0+IChbYSwgYiwgYywgZF0pID0+IGYoYSkoYikoYykoZCk7XG5leHBvcnQgY29uc3QgdW5jdXJyeTUgPSAoZikgPT4gKFthLCBiLCBjLCBkLCBlXSkgPT4gZihhKShiKShjKShkKShlKTtcbmV4cG9ydCBmdW5jdGlvbiBmb3JrKGZzKSB7XG4gICAgcmV0dXJuICh4KSA9PiBmcy5tYXAoZiA9PiBmKHgpKTtcbn1cbmV4cG9ydCBjb25zdCBjb252ZXJnZSA9IChmKSA9PiAoZ3MpID0+IGZsb3coeCA9PiBmb3JrKGdzKSh4KSwgZik7XG5leHBvcnQgY29uc3QgaXNJbnN0YW5jZU9mID0gKHgpID0+ICh5KSA9PiB5IGluc3RhbmNlb2YgeDtcbmV4cG9ydCBjb25zdCBhcHBseUV2ZXJ5ID0gY29uY2F0QWxsKGdldEVuZG9Nb25vaWQoKSk7XG5leHBvcnQgY29uc3QgYXBwbHlTb21lcyA9IChmcykgPT4geCA9PiBwaXBlKGZzLCBBLnJlZHVjZSh4LCAoeSwgbWYpID0+IHBpcGUobWYsIE8ubWF0Y2goY29uc3RhbnQoeSksIGFwcGx5KHkpKSkpKTtcbmV4cG9ydCBjb25zdCBhcHBseU4gPSAobikgPT4gKGYpID0+IHBpcGUoQS5yZXBsaWNhdGUobiwgZiksIGFwcGx5RXZlcnkpO1xuIiwKICAiaW1wb3J0ICogYXMgTyBmcm9tIFwiZnAtdHMvT3B0aW9uXCI7XG5pbXBvcnQgKiBhcyBNIGZyb20gXCJmcC10cy9NYXBcIjtcbmltcG9ydCAqIGFzIEEgZnJvbSBcImZwLXRzL0FycmF5XCI7XG5pbXBvcnQgeyBmbG93LCBwaXBlLCBnZXRNb25vaWQgYXMgZ2V0RnVuY3Rpb25Nb25vaWQsIGFwcGx5LCBjb25zdGFudCwgZmxpcCwgdHVwbGVkLCB9IGZyb20gXCJmcC10cy9mdW5jdGlvblwiO1xuaW1wb3J0IHsgbm90IH0gZnJvbSBcImZwLXRzL1ByZWRpY2F0ZVwiO1xuaW1wb3J0IHsgZ2V0TW9ub2lkIGFzIGdldEVuZG9Nb25vaWQgfSBmcm9tIFwiZnAtdHMvRW5kb21vcnBoaXNtXCI7XG5pbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tIFwiZnAtdHMvTW9ub2lkXCI7XG5pbXBvcnQgeyBmaXJzdCB9IGZyb20gXCJmcC10cy9TZW1pZ3JvdXBcIjtcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBsZXQgYXMgbGV0X18gfSBmcm9tIFwiZnAtdHMvRnVuY3RvclwiO1xuaW1wb3J0IHsgYXBGaXJzdCBhcyBhcEZpcnN0XywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfLCBhcFMgYXMgYXBTXywgfSBmcm9tIFwiZnAtdHMvQXBwbHlcIjtcbmltcG9ydCB7IGJpbmQgYXMgYmluZF8gfSBmcm9tIFwiZnAtdHMvQ2hhaW5cIjtcbmV4cG9ydCBjb25zdCBVUkkgPSBcIkZ1bmN0aW9uXCI7XG5leHBvcnQgY29uc3QgbWFwID0gZiA9PiBnID0+IGZsb3coZywgZik7XG5leHBvcnQgY29uc3QgRnVuY3RvciA9IHtcbiAgICBVUkksXG4gICAgbWFwOiAoZiwgZykgPT4gbWFwKGcpKGYpLFxufTtcbmV4cG9ydCBjb25zdCBvZiA9IGNvbnN0YW50O1xuZXhwb3J0IGNvbnN0IGFwID0gZiA9PiBnID0+IHggPT4gZyh4KShmKHgpKTtcbmV4cG9ydCBjb25zdCBBcHBsaWNhdGl2ZSA9IHtcbiAgICAuLi5GdW5jdG9yLFxuICAgIG9mLFxuICAgIGFwOiAoZiwgZykgPT4gYXAoZykoZiksXG59O1xuZXhwb3J0IGNvbnN0IGFwRmlyc3QgPSBhcEZpcnN0XyhBcHBsaWNhdGl2ZSk7XG5leHBvcnQgY29uc3QgYXBTZWNvbmQgPSBhcFNlY29uZF8oQXBwbGljYXRpdmUpO1xuZXhwb3J0IGNvbnN0IGNoYWluID0gZiA9PiBnID0+IHggPT4gZihnKHgpKSh4KTtcbmV4cG9ydCBjb25zdCBmbGF0TWFwID0gY2hhaW47XG5leHBvcnQgY29uc3QgTW9uYWQgPSB7XG4gICAgLi4uQXBwbGljYXRpdmUsXG4gICAgY2hhaW46IChmLCBnKSA9PiBjaGFpbihnKShmKSxcbn07XG5leHBvcnQgY29uc3QgRG8gPSBvZih7fSk7XG5leHBvcnQgY29uc3QgYmluZFRvID0gYmluZFRvXyhGdW5jdG9yKTtcbmV4cG9ydCBjb25zdCBiaW5kID0gYmluZF8oTW9uYWQpO1xuZXhwb3J0IGNvbnN0IGFwUyA9IGFwU18oQXBwbGljYXRpdmUpO1xuY29uc3QgbGV0XyA9IGxldF9fKEZ1bmN0b3IpO1xuZXhwb3J0IHsgbGV0XyBhcyBsZXQsIH07XG5leHBvcnQgY29uc3Qgd2l0aEluZGV4ID0gZiA9PiBnID0+IHhzID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgcmV0dXJuIGYoeSA9PiBnKGkrKykoeSkpKHhzKTtcbn07XG5leHBvcnQgY29uc3QgdW5hcnkgPSB0dXBsZWQ7XG5leHBvcnQgY29uc3QgZ3VhcmQgPSAoYnJhbmNoZXMpID0+IChmYWxsYmFjaykgPT4gKGlucHV0KSA9PiBwaXBlKGJyYW5jaGVzLCBBLm1hcCgoW2YsIGddKSA9PiBmbG93KE8uZnJvbVByZWRpY2F0ZShmKSwgTy5tYXAoZykpKSwgY29uY2F0QWxsKGdldEZ1bmN0aW9uTW9ub2lkKE8uZ2V0TW9ub2lkKGZpcnN0KCkpKSgpKSwgYXBwbHkoaW5wdXQpLCBPLmdldE9yRWxzZSgoKSA9PiBmYWxsYmFjayhpbnB1dCkpKTtcbmV4cG9ydCBjb25zdCBpZkVsc2UgPSAob25UcnVlKSA9PiAob25GYWxzZSkgPT4gKGYpID0+ICh4KSA9PiBmKHgpID8gb25UcnVlKHgpIDogb25GYWxzZSh4KTtcbmV4cG9ydCBjb25zdCB1bmxlc3MgPSAoZikgPT4gKG9uRmFsc2UpID0+IHggPT4gZih4KSA/IHggOiBvbkZhbHNlKHgpO1xuZXhwb3J0IGNvbnN0IHdoZW4gPSBmbG93KG5vdCwgdW5sZXNzKTtcbmV4cG9ydCBjb25zdCB1bnRpbCA9IChmKSA9PiAoZykgPT4ge1xuICAgIGNvbnN0IGggPSB4ID0+IChmKHgpID8geCA6IGgoZyh4KSkpO1xuICAgIHJldHVybiBoO1xufTtcbmV4cG9ydCBjb25zdCBjb25zdHJ1Y3QgPSAoeCkgPT4gKHhzKSA9PiBuZXcgeCguLi54cyk7XG5leHBvcnQgY29uc3QgaW52b2tlID0gKHgpID0+ICh5cykgPT4gKHopID0+IHpbeF0oLi4ueXMpO1xuZXhwb3J0IGNvbnN0IGludm9rZU51bGxhcnkgPSBmbGlwKGludm9rZSkoW10pO1xuZXhwb3J0IGNvbnN0IGludm9rZU9uID0gKCkgPT4gKHgpID0+IHlzID0+IHogPT4gelt4XSguLi55cyk7XG5leHBvcnQgY29uc3QgbWVtb2l6ZSA9IChlcSkgPT4gKGYpID0+IHtcbiAgICBjb25zdCBjYWNoZSA9IG5ldyBNYXAoKTtcbiAgICByZXR1cm4gayA9PiB7XG4gICAgICAgIGNvbnN0IGNhY2hlZCA9IE0ubG9va3VwKGVxKShrKShjYWNoZSk7XG4gICAgICAgIGlmIChPLmlzU29tZShjYWNoZWQpKVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC52YWx1ZTtcbiAgICAgICAgY29uc3QgdmFsID0gZihrKTtcbiAgICAgICAgY2FjaGUuc2V0KGssIHZhbCk7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgY3VycnkyVCA9IChmKSA9PiAoYSkgPT4gKGIpID0+IGYoW2EsIGJdKTtcbmV4cG9ydCBjb25zdCBjdXJyeTIgPSBmbG93KHVuYXJ5LCBjdXJyeTJUKTtcbmV4cG9ydCBjb25zdCBjdXJyeTNUID0gKGYpID0+IChhKSA9PiAoYikgPT4gKGMpID0+IGYoW2EsIGIsIGNdKTtcbmV4cG9ydCBjb25zdCBjdXJyeTMgPSBmbG93KHVuYXJ5LCBjdXJyeTNUKTtcbmV4cG9ydCBjb25zdCBjdXJyeTRUID0gKGYpID0+IChhKSA9PiAoYikgPT4gKGMpID0+IChkKSA9PiBmKFthLCBiLCBjLCBkXSk7XG5leHBvcnQgY29uc3QgY3Vycnk0ID0gZmxvdyh1bmFyeSwgY3Vycnk0VCk7XG5leHBvcnQgY29uc3QgY3Vycnk1VCA9IChmKSA9PiAoYSkgPT4gKGIpID0+IChjKSA9PiAoZCkgPT4gKGUpID0+IGYoW2EsIGIsIGMsIGQsIGVdKTtcbmV4cG9ydCBjb25zdCBjdXJyeTUgPSBmbG93KHVuYXJ5LCBjdXJyeTVUKTtcbmV4cG9ydCBjb25zdCB1bmN1cnJ5MiA9IChmKSA9PiAoW2EsIGJdKSA9PiBmKGEpKGIpO1xuZXhwb3J0IGNvbnN0IHVuY3VycnkzID0gKGYpID0+IChbYSwgYiwgY10pID0+IGYoYSkoYikoYyk7XG5leHBvcnQgY29uc3QgdW5jdXJyeTQgPSAoZikgPT4gKFthLCBiLCBjLCBkXSkgPT4gZihhKShiKShjKShkKTtcbmV4cG9ydCBjb25zdCB1bmN1cnJ5NSA9IChmKSA9PiAoW2EsIGIsIGMsIGQsIGVdKSA9PiBmKGEpKGIpKGMpKGQpKGUpO1xuZXhwb3J0IGZ1bmN0aW9uIGZvcmsoZnMpIHtcbiAgICByZXR1cm4gKHgpID0+IGZzLm1hcChmID0+IGYoeCkpO1xufVxuZXhwb3J0IGNvbnN0IGNvbnZlcmdlID0gKGYpID0+IChncykgPT4gZmxvdyh4ID0+IGZvcmsoZ3MpKHgpLCBmKTtcbmV4cG9ydCBjb25zdCBpc0luc3RhbmNlT2YgPSAoeCkgPT4gKHkpID0+IHkgaW5zdGFuY2VvZiB4O1xuZXhwb3J0IGNvbnN0IGFwcGx5RXZlcnkgPSBjb25jYXRBbGwoZ2V0RW5kb01vbm9pZCgpKTtcbmV4cG9ydCBjb25zdCBhcHBseVNvbWVzID0gKGZzKSA9PiB4ID0+IHBpcGUoZnMsIEEucmVkdWNlKHgsICh5LCBtZikgPT4gcGlwZShtZiwgTy5tYXRjaChjb25zdGFudCh5KSwgYXBwbHkoeSkpKSkpO1xuZXhwb3J0IGNvbnN0IGFwcGx5TiA9IChuKSA9PiAoZikgPT4gcGlwZShBLnJlcGxpY2F0ZShuLCBmKSwgYXBwbHlFdmVyeSk7XG4iLAogICJpbXBvcnQgKiBhcyBPIGZyb20gXCJmcC10cy9PcHRpb25cIjtcbmltcG9ydCAqIGFzIE0gZnJvbSBcImZwLXRzL01hcFwiO1xuaW1wb3J0ICogYXMgQSBmcm9tIFwiZnAtdHMvQXJyYXlcIjtcbmltcG9ydCB7IGZsb3csIHBpcGUsIGdldE1vbm9pZCBhcyBnZXRGdW5jdGlvbk1vbm9pZCwgYXBwbHksIGNvbnN0YW50LCBmbGlwLCB0dXBsZWQsIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCI7XG5pbXBvcnQgeyBub3QgfSBmcm9tIFwiZnAtdHMvUHJlZGljYXRlXCI7XG5pbXBvcnQgeyBnZXRNb25vaWQgYXMgZ2V0RW5kb01vbm9pZCB9IGZyb20gXCJmcC10cy9FbmRvbW9ycGhpc21cIjtcbmltcG9ydCB7IGNvbmNhdEFsbCB9IGZyb20gXCJmcC10cy9Nb25vaWRcIjtcbmltcG9ydCB7IGZpcnN0IH0gZnJvbSBcImZwLXRzL1NlbWlncm91cFwiO1xuaW1wb3J0IHsgYmluZFRvIGFzIGJpbmRUb18sIGxldCBhcyBsZXRfXyB9IGZyb20gXCJmcC10cy9GdW5jdG9yXCI7XG5pbXBvcnQgeyBhcEZpcnN0IGFzIGFwRmlyc3RfLCBhcFNlY29uZCBhcyBhcFNlY29uZF8sIGFwUyBhcyBhcFNfLCB9IGZyb20gXCJmcC10cy9BcHBseVwiO1xuaW1wb3J0IHsgYmluZCBhcyBiaW5kXyB9IGZyb20gXCJmcC10cy9DaGFpblwiO1xuZXhwb3J0IGNvbnN0IFVSSSA9IFwiRnVuY3Rpb25cIjtcbmV4cG9ydCBjb25zdCBtYXAgPSBmID0+IGcgPT4gZmxvdyhnLCBmKTtcbmV4cG9ydCBjb25zdCBGdW5jdG9yID0ge1xuICAgIFVSSSxcbiAgICBtYXA6IChmLCBnKSA9PiBtYXAoZykoZiksXG59O1xuZXhwb3J0IGNvbnN0IG9mID0gY29uc3RhbnQ7XG5leHBvcnQgY29uc3QgYXAgPSBmID0+IGcgPT4geCA9PiBnKHgpKGYoeCkpO1xuZXhwb3J0IGNvbnN0IEFwcGxpY2F0aXZlID0ge1xuICAgIC4uLkZ1bmN0b3IsXG4gICAgb2YsXG4gICAgYXA6IChmLCBnKSA9PiBhcChnKShmKSxcbn07XG5leHBvcnQgY29uc3QgYXBGaXJzdCA9IGFwRmlyc3RfKEFwcGxpY2F0aXZlKTtcbmV4cG9ydCBjb25zdCBhcFNlY29uZCA9IGFwU2Vjb25kXyhBcHBsaWNhdGl2ZSk7XG5leHBvcnQgY29uc3QgY2hhaW4gPSBmID0+IGcgPT4geCA9PiBmKGcoeCkpKHgpO1xuZXhwb3J0IGNvbnN0IGZsYXRNYXAgPSBjaGFpbjtcbmV4cG9ydCBjb25zdCBNb25hZCA9IHtcbiAgICAuLi5BcHBsaWNhdGl2ZSxcbiAgICBjaGFpbjogKGYsIGcpID0+IGNoYWluKGcpKGYpLFxufTtcbmV4cG9ydCBjb25zdCBEbyA9IG9mKHt9KTtcbmV4cG9ydCBjb25zdCBiaW5kVG8gPSBiaW5kVG9fKEZ1bmN0b3IpO1xuZXhwb3J0IGNvbnN0IGJpbmQgPSBiaW5kXyhNb25hZCk7XG5leHBvcnQgY29uc3QgYXBTID0gYXBTXyhBcHBsaWNhdGl2ZSk7XG5jb25zdCBsZXRfID0gbGV0X18oRnVuY3Rvcik7XG5leHBvcnQgeyBsZXRfIGFzIGxldCwgfTtcbmV4cG9ydCBjb25zdCB3aXRoSW5kZXggPSBmID0+IGcgPT4geHMgPT4ge1xuICAgIGxldCBpID0gMDtcbiAgICByZXR1cm4gZih5ID0+IGcoaSsrKSh5KSkoeHMpO1xufTtcbmV4cG9ydCBjb25zdCB1bmFyeSA9IHR1cGxlZDtcbmV4cG9ydCBjb25zdCBndWFyZCA9IChicmFuY2hlcykgPT4gKGZhbGxiYWNrKSA9PiAoaW5wdXQpID0+IHBpcGUoYnJhbmNoZXMsIEEubWFwKChbZiwgZ10pID0+IGZsb3coTy5mcm9tUHJlZGljYXRlKGYpLCBPLm1hcChnKSkpLCBjb25jYXRBbGwoZ2V0RnVuY3Rpb25Nb25vaWQoTy5nZXRNb25vaWQoZmlyc3QoKSkpKCkpLCBhcHBseShpbnB1dCksIE8uZ2V0T3JFbHNlKCgpID0+IGZhbGxiYWNrKGlucHV0KSkpO1xuZXhwb3J0IGNvbnN0IGlmRWxzZSA9IChvblRydWUpID0+IChvbkZhbHNlKSA9PiAoZikgPT4gKHgpID0+IGYoeCkgPyBvblRydWUoeCkgOiBvbkZhbHNlKHgpO1xuZXhwb3J0IGNvbnN0IHVubGVzcyA9IChmKSA9PiAob25GYWxzZSkgPT4geCA9PiBmKHgpID8geCA6IG9uRmFsc2UoeCk7XG5leHBvcnQgY29uc3Qgd2hlbiA9IGZsb3cobm90LCB1bmxlc3MpO1xuZXhwb3J0IGNvbnN0IHVudGlsID0gKGYpID0+IChnKSA9PiB7XG4gICAgY29uc3QgaCA9IHggPT4gKGYoeCkgPyB4IDogaChnKHgpKSk7XG4gICAgcmV0dXJuIGg7XG59O1xuZXhwb3J0IGNvbnN0IGNvbnN0cnVjdCA9ICh4KSA9PiAoeHMpID0+IG5ldyB4KC4uLnhzKTtcbmV4cG9ydCBjb25zdCBpbnZva2UgPSAoeCkgPT4gKHlzKSA9PiAoeikgPT4gelt4XSguLi55cyk7XG5leHBvcnQgY29uc3QgaW52b2tlTnVsbGFyeSA9IGZsaXAoaW52b2tlKShbXSk7XG5leHBvcnQgY29uc3QgaW52b2tlT24gPSAoKSA9PiAoeCkgPT4geXMgPT4geiA9PiB6W3hdKC4uLnlzKTtcbmV4cG9ydCBjb25zdCBtZW1vaXplID0gKGVxKSA9PiAoZikgPT4ge1xuICAgIGNvbnN0IGNhY2hlID0gbmV3IE1hcCgpO1xuICAgIHJldHVybiBrID0+IHtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gTS5sb29rdXAoZXEpKGspKGNhY2hlKTtcbiAgICAgICAgaWYgKE8uaXNTb21lKGNhY2hlZCkpXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnZhbHVlO1xuICAgICAgICBjb25zdCB2YWwgPSBmKGspO1xuICAgICAgICBjYWNoZS5zZXQoaywgdmFsKTtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xufTtcbmV4cG9ydCBjb25zdCBjdXJyeTJUID0gKGYpID0+IChhKSA9PiAoYikgPT4gZihbYSwgYl0pO1xuZXhwb3J0IGNvbnN0IGN1cnJ5MiA9IGZsb3codW5hcnksIGN1cnJ5MlQpO1xuZXhwb3J0IGNvbnN0IGN1cnJ5M1QgPSAoZikgPT4gKGEpID0+IChiKSA9PiAoYykgPT4gZihbYSwgYiwgY10pO1xuZXhwb3J0IGNvbnN0IGN1cnJ5MyA9IGZsb3codW5hcnksIGN1cnJ5M1QpO1xuZXhwb3J0IGNvbnN0IGN1cnJ5NFQgPSAoZikgPT4gKGEpID0+IChiKSA9PiAoYykgPT4gKGQpID0+IGYoW2EsIGIsIGMsIGRdKTtcbmV4cG9ydCBjb25zdCBjdXJyeTQgPSBmbG93KHVuYXJ5LCBjdXJyeTRUKTtcbmV4cG9ydCBjb25zdCBjdXJyeTVUID0gKGYpID0+IChhKSA9PiAoYikgPT4gKGMpID0+IChkKSA9PiAoZSkgPT4gZihbYSwgYiwgYywgZCwgZV0pO1xuZXhwb3J0IGNvbnN0IGN1cnJ5NSA9IGZsb3codW5hcnksIGN1cnJ5NVQpO1xuZXhwb3J0IGNvbnN0IHVuY3VycnkyID0gKGYpID0+IChbYSwgYl0pID0+IGYoYSkoYik7XG5leHBvcnQgY29uc3QgdW5jdXJyeTMgPSAoZikgPT4gKFthLCBiLCBjXSkgPT4gZihhKShiKShjKTtcbmV4cG9ydCBjb25zdCB1bmN1cnJ5NCA9IChmKSA9PiAoW2EsIGIsIGMsIGRdKSA9PiBmKGEpKGIpKGMpKGQpO1xuZXhwb3J0IGNvbnN0IHVuY3Vycnk1ID0gKGYpID0+IChbYSwgYiwgYywgZCwgZV0pID0+IGYoYSkoYikoYykoZCkoZSk7XG5leHBvcnQgZnVuY3Rpb24gZm9yayhmcykge1xuICAgIHJldHVybiAoeCkgPT4gZnMubWFwKGYgPT4gZih4KSk7XG59XG5leHBvcnQgY29uc3QgY29udmVyZ2UgPSAoZikgPT4gKGdzKSA9PiBmbG93KHggPT4gZm9yayhncykoeCksIGYpO1xuZXhwb3J0IGNvbnN0IGlzSW5zdGFuY2VPZiA9ICh4KSA9PiAoeSkgPT4geSBpbnN0YW5jZW9mIHg7XG5leHBvcnQgY29uc3QgYXBwbHlFdmVyeSA9IGNvbmNhdEFsbChnZXRFbmRvTW9ub2lkKCkpO1xuZXhwb3J0IGNvbnN0IGFwcGx5U29tZXMgPSAoZnMpID0+IHggPT4gcGlwZShmcywgQS5yZWR1Y2UoeCwgKHksIG1mKSA9PiBwaXBlKG1mLCBPLm1hdGNoKGNvbnN0YW50KHkpLCBhcHBseSh5KSkpKSk7XG5leHBvcnQgY29uc3QgYXBwbHlOID0gKG4pID0+IChmKSA9PiBwaXBlKEEucmVwbGljYXRlKG4sIGYpLCBhcHBseUV2ZXJ5KTtcbiIsCiAgImltcG9ydCAqIGFzIE8gZnJvbSBcImZwLXRzL09wdGlvblwiO1xuaW1wb3J0ICogYXMgTSBmcm9tIFwiZnAtdHMvTWFwXCI7XG5pbXBvcnQgKiBhcyBBIGZyb20gXCJmcC10cy9BcnJheVwiO1xuaW1wb3J0IHsgZmxvdywgcGlwZSwgZ2V0TW9ub2lkIGFzIGdldEZ1bmN0aW9uTW9ub2lkLCBhcHBseSwgY29uc3RhbnQsIGZsaXAsIHR1cGxlZCwgfSBmcm9tIFwiZnAtdHMvZnVuY3Rpb25cIjtcbmltcG9ydCB7IG5vdCB9IGZyb20gXCJmcC10cy9QcmVkaWNhdGVcIjtcbmltcG9ydCB7IGdldE1vbm9pZCBhcyBnZXRFbmRvTW9ub2lkIH0gZnJvbSBcImZwLXRzL0VuZG9tb3JwaGlzbVwiO1xuaW1wb3J0IHsgY29uY2F0QWxsIH0gZnJvbSBcImZwLXRzL01vbm9pZFwiO1xuaW1wb3J0IHsgZmlyc3QgfSBmcm9tIFwiZnAtdHMvU2VtaWdyb3VwXCI7XG5pbXBvcnQgeyBiaW5kVG8gYXMgYmluZFRvXywgbGV0IGFzIGxldF9fIH0gZnJvbSBcImZwLXRzL0Z1bmN0b3JcIjtcbmltcG9ydCB7IGFwRmlyc3QgYXMgYXBGaXJzdF8sIGFwU2Vjb25kIGFzIGFwU2Vjb25kXywgYXBTIGFzIGFwU18sIH0gZnJvbSBcImZwLXRzL0FwcGx5XCI7XG5pbXBvcnQgeyBiaW5kIGFzIGJpbmRfIH0gZnJvbSBcImZwLXRzL0NoYWluXCI7XG5leHBvcnQgY29uc3QgVVJJID0gXCJGdW5jdGlvblwiO1xuZXhwb3J0IGNvbnN0IG1hcCA9IGYgPT4gZyA9PiBmbG93KGcsIGYpO1xuZXhwb3J0IGNvbnN0IEZ1bmN0b3IgPSB7XG4gICAgVVJJLFxuICAgIG1hcDogKGYsIGcpID0+IG1hcChnKShmKSxcbn07XG5leHBvcnQgY29uc3Qgb2YgPSBjb25zdGFudDtcbmV4cG9ydCBjb25zdCBhcCA9IGYgPT4gZyA9PiB4ID0+IGcoeCkoZih4KSk7XG5leHBvcnQgY29uc3QgQXBwbGljYXRpdmUgPSB7XG4gICAgLi4uRnVuY3RvcixcbiAgICBvZixcbiAgICBhcDogKGYsIGcpID0+IGFwKGcpKGYpLFxufTtcbmV4cG9ydCBjb25zdCBhcEZpcnN0ID0gYXBGaXJzdF8oQXBwbGljYXRpdmUpO1xuZXhwb3J0IGNvbnN0IGFwU2Vjb25kID0gYXBTZWNvbmRfKEFwcGxpY2F0aXZlKTtcbmV4cG9ydCBjb25zdCBjaGFpbiA9IGYgPT4gZyA9PiB4ID0+IGYoZyh4KSkoeCk7XG5leHBvcnQgY29uc3QgZmxhdE1hcCA9IGNoYWluO1xuZXhwb3J0IGNvbnN0IE1vbmFkID0ge1xuICAgIC4uLkFwcGxpY2F0aXZlLFxuICAgIGNoYWluOiAoZiwgZykgPT4gY2hhaW4oZykoZiksXG59O1xuZXhwb3J0IGNvbnN0IERvID0gb2Yoe30pO1xuZXhwb3J0IGNvbnN0IGJpbmRUbyA9IGJpbmRUb18oRnVuY3Rvcik7XG5leHBvcnQgY29uc3QgYmluZCA9IGJpbmRfKE1vbmFkKTtcbmV4cG9ydCBjb25zdCBhcFMgPSBhcFNfKEFwcGxpY2F0aXZlKTtcbmNvbnN0IGxldF8gPSBsZXRfXyhGdW5jdG9yKTtcbmV4cG9ydCB7IGxldF8gYXMgbGV0LCB9O1xuZXhwb3J0IGNvbnN0IHdpdGhJbmRleCA9IGYgPT4gZyA9PiB4cyA9PiB7XG4gICAgbGV0IGkgPSAwO1xuICAgIHJldHVybiBmKHkgPT4gZyhpKyspKHkpKSh4cyk7XG59O1xuZXhwb3J0IGNvbnN0IHVuYXJ5ID0gdHVwbGVkO1xuZXhwb3J0IGNvbnN0IGd1YXJkID0gKGJyYW5jaGVzKSA9PiAoZmFsbGJhY2spID0+IChpbnB1dCkgPT4gcGlwZShicmFuY2hlcywgQS5tYXAoKFtmLCBnXSkgPT4gZmxvdyhPLmZyb21QcmVkaWNhdGUoZiksIE8ubWFwKGcpKSksIGNvbmNhdEFsbChnZXRGdW5jdGlvbk1vbm9pZChPLmdldE1vbm9pZChmaXJzdCgpKSkoKSksIGFwcGx5KGlucHV0KSwgTy5nZXRPckVsc2UoKCkgPT4gZmFsbGJhY2soaW5wdXQpKSk7XG5leHBvcnQgY29uc3QgaWZFbHNlID0gKG9uVHJ1ZSkgPT4gKG9uRmFsc2UpID0+IChmKSA9PiAoeCkgPT4gZih4KSA/IG9uVHJ1ZSh4KSA6IG9uRmFsc2UoeCk7XG5leHBvcnQgY29uc3QgdW5sZXNzID0gKGYpID0+IChvbkZhbHNlKSA9PiB4ID0+IGYoeCkgPyB4IDogb25GYWxzZSh4KTtcbmV4cG9ydCBjb25zdCB3aGVuID0gZmxvdyhub3QsIHVubGVzcyk7XG5leHBvcnQgY29uc3QgdW50aWwgPSAoZikgPT4gKGcpID0+IHtcbiAgICBjb25zdCBoID0geCA9PiAoZih4KSA/IHggOiBoKGcoeCkpKTtcbiAgICByZXR1cm4gaDtcbn07XG5leHBvcnQgY29uc3QgY29uc3RydWN0ID0gKHgpID0+ICh4cykgPT4gbmV3IHgoLi4ueHMpO1xuZXhwb3J0IGNvbnN0IGludm9rZSA9ICh4KSA9PiAoeXMpID0+ICh6KSA9PiB6W3hdKC4uLnlzKTtcbmV4cG9ydCBjb25zdCBpbnZva2VOdWxsYXJ5ID0gZmxpcChpbnZva2UpKFtdKTtcbmV4cG9ydCBjb25zdCBpbnZva2VPbiA9ICgpID0+ICh4KSA9PiB5cyA9PiB6ID0+IHpbeF0oLi4ueXMpO1xuZXhwb3J0IGNvbnN0IG1lbW9pemUgPSAoZXEpID0+IChmKSA9PiB7XG4gICAgY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgcmV0dXJuIGsgPT4ge1xuICAgICAgICBjb25zdCBjYWNoZWQgPSBNLmxvb2t1cChlcSkoaykoY2FjaGUpO1xuICAgICAgICBpZiAoTy5pc1NvbWUoY2FjaGVkKSlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQudmFsdWU7XG4gICAgICAgIGNvbnN0IHZhbCA9IGYoayk7XG4gICAgICAgIGNhY2hlLnNldChrLCB2YWwpO1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH07XG59O1xuZXhwb3J0IGNvbnN0IGN1cnJ5MlQgPSAoZikgPT4gKGEpID0+IChiKSA9PiBmKFthLCBiXSk7XG5leHBvcnQgY29uc3QgY3VycnkyID0gZmxvdyh1bmFyeSwgY3VycnkyVCk7XG5leHBvcnQgY29uc3QgY3VycnkzVCA9IChmKSA9PiAoYSkgPT4gKGIpID0+IChjKSA9PiBmKFthLCBiLCBjXSk7XG5leHBvcnQgY29uc3QgY3VycnkzID0gZmxvdyh1bmFyeSwgY3VycnkzVCk7XG5leHBvcnQgY29uc3QgY3Vycnk0VCA9IChmKSA9PiAoYSkgPT4gKGIpID0+IChjKSA9PiAoZCkgPT4gZihbYSwgYiwgYywgZF0pO1xuZXhwb3J0IGNvbnN0IGN1cnJ5NCA9IGZsb3codW5hcnksIGN1cnJ5NFQpO1xuZXhwb3J0IGNvbnN0IGN1cnJ5NVQgPSAoZikgPT4gKGEpID0+IChiKSA9PiAoYykgPT4gKGQpID0+IChlKSA9PiBmKFthLCBiLCBjLCBkLCBlXSk7XG5leHBvcnQgY29uc3QgY3Vycnk1ID0gZmxvdyh1bmFyeSwgY3Vycnk1VCk7XG5leHBvcnQgY29uc3QgdW5jdXJyeTIgPSAoZikgPT4gKFthLCBiXSkgPT4gZihhKShiKTtcbmV4cG9ydCBjb25zdCB1bmN1cnJ5MyA9IChmKSA9PiAoW2EsIGIsIGNdKSA9PiBmKGEpKGIpKGMpO1xuZXhwb3J0IGNvbnN0IHVuY3Vycnk0ID0gKGYpID0+IChbYSwgYiwgYywgZF0pID0+IGYoYSkoYikoYykoZCk7XG5leHBvcnQgY29uc3QgdW5jdXJyeTUgPSAoZikgPT4gKFthLCBiLCBjLCBkLCBlXSkgPT4gZihhKShiKShjKShkKShlKTtcbmV4cG9ydCBmdW5jdGlvbiBmb3JrKGZzKSB7XG4gICAgcmV0dXJuICh4KSA9PiBmcy5tYXAoZiA9PiBmKHgpKTtcbn1cbmV4cG9ydCBjb25zdCBjb252ZXJnZSA9IChmKSA9PiAoZ3MpID0+IGZsb3coeCA9PiBmb3JrKGdzKSh4KSwgZik7XG5leHBvcnQgY29uc3QgaXNJbnN0YW5jZU9mID0gKHgpID0+ICh5KSA9PiB5IGluc3RhbmNlb2YgeDtcbmV4cG9ydCBjb25zdCBhcHBseUV2ZXJ5ID0gY29uY2F0QWxsKGdldEVuZG9Nb25vaWQoKSk7XG5leHBvcnQgY29uc3QgYXBwbHlTb21lcyA9IChmcykgPT4geCA9PiBwaXBlKGZzLCBBLnJlZHVjZSh4LCAoeSwgbWYpID0+IHBpcGUobWYsIE8ubWF0Y2goY29uc3RhbnQoeSksIGFwcGx5KHkpKSkpKTtcbmV4cG9ydCBjb25zdCBhcHBseU4gPSAobikgPT4gKGYpID0+IHBpcGUoQS5yZXBsaWNhdGUobiwgZiksIGFwcGx5RXZlcnkpO1xuIiwKICAiaW1wb3J0ICogYXMgTyBmcm9tIFwiZnAtdHMvT3B0aW9uXCI7XG5pbXBvcnQgKiBhcyBNIGZyb20gXCJmcC10cy9NYXBcIjtcbmltcG9ydCAqIGFzIEEgZnJvbSBcImZwLXRzL0FycmF5XCI7XG5pbXBvcnQgeyBmbG93LCBwaXBlLCBnZXRNb25vaWQgYXMgZ2V0RnVuY3Rpb25Nb25vaWQsIGFwcGx5LCBjb25zdGFudCwgZmxpcCwgdHVwbGVkLCB9IGZyb20gXCJmcC10cy9mdW5jdGlvblwiO1xuaW1wb3J0IHsgbm90IH0gZnJvbSBcImZwLXRzL1ByZWRpY2F0ZVwiO1xuaW1wb3J0IHsgZ2V0TW9ub2lkIGFzIGdldEVuZG9Nb25vaWQgfSBmcm9tIFwiZnAtdHMvRW5kb21vcnBoaXNtXCI7XG5pbXBvcnQgeyBjb25jYXRBbGwgfSBmcm9tIFwiZnAtdHMvTW9ub2lkXCI7XG5pbXBvcnQgeyBmaXJzdCB9IGZyb20gXCJmcC10cy9TZW1pZ3JvdXBcIjtcbmltcG9ydCB7IGJpbmRUbyBhcyBiaW5kVG9fLCBsZXQgYXMgbGV0X18gfSBmcm9tIFwiZnAtdHMvRnVuY3RvclwiO1xuaW1wb3J0IHsgYXBGaXJzdCBhcyBhcEZpcnN0XywgYXBTZWNvbmQgYXMgYXBTZWNvbmRfLCBhcFMgYXMgYXBTXywgfSBmcm9tIFwiZnAtdHMvQXBwbHlcIjtcbmltcG9ydCB7IGJpbmQgYXMgYmluZF8gfSBmcm9tIFwiZnAtdHMvQ2hhaW5cIjtcbmV4cG9ydCBjb25zdCBVUkkgPSBcIkZ1bmN0aW9uXCI7XG5leHBvcnQgY29uc3QgbWFwID0gZiA9PiBnID0+IGZsb3coZywgZik7XG5leHBvcnQgY29uc3QgRnVuY3RvciA9IHtcbiAgICBVUkksXG4gICAgbWFwOiAoZiwgZykgPT4gbWFwKGcpKGYpLFxufTtcbmV4cG9ydCBjb25zdCBvZiA9IGNvbnN0YW50O1xuZXhwb3J0IGNvbnN0IGFwID0gZiA9PiBnID0+IHggPT4gZyh4KShmKHgpKTtcbmV4cG9ydCBjb25zdCBBcHBsaWNhdGl2ZSA9IHtcbiAgICAuLi5GdW5jdG9yLFxuICAgIG9mLFxuICAgIGFwOiAoZiwgZykgPT4gYXAoZykoZiksXG59O1xuZXhwb3J0IGNvbnN0IGFwRmlyc3QgPSBhcEZpcnN0XyhBcHBsaWNhdGl2ZSk7XG5leHBvcnQgY29uc3QgYXBTZWNvbmQgPSBhcFNlY29uZF8oQXBwbGljYXRpdmUpO1xuZXhwb3J0IGNvbnN0IGNoYWluID0gZiA9PiBnID0+IHggPT4gZihnKHgpKSh4KTtcbmV4cG9ydCBjb25zdCBmbGF0TWFwID0gY2hhaW47XG5leHBvcnQgY29uc3QgTW9uYWQgPSB7XG4gICAgLi4uQXBwbGljYXRpdmUsXG4gICAgY2hhaW46IChmLCBnKSA9PiBjaGFpbihnKShmKSxcbn07XG5leHBvcnQgY29uc3QgRG8gPSBvZih7fSk7XG5leHBvcnQgY29uc3QgYmluZFRvID0gYmluZFRvXyhGdW5jdG9yKTtcbmV4cG9ydCBjb25zdCBiaW5kID0gYmluZF8oTW9uYWQpO1xuZXhwb3J0IGNvbnN0IGFwUyA9IGFwU18oQXBwbGljYXRpdmUpO1xuY29uc3QgbGV0XyA9IGxldF9fKEZ1bmN0b3IpO1xuZXhwb3J0IHsgbGV0XyBhcyBsZXQsIH07XG5leHBvcnQgY29uc3Qgd2l0aEluZGV4ID0gZiA9PiBnID0+IHhzID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgcmV0dXJuIGYoeSA9PiBnKGkrKykoeSkpKHhzKTtcbn07XG5leHBvcnQgY29uc3QgdW5hcnkgPSB0dXBsZWQ7XG5leHBvcnQgY29uc3QgZ3VhcmQgPSAoYnJhbmNoZXMpID0+IChmYWxsYmFjaykgPT4gKGlucHV0KSA9PiBwaXBlKGJyYW5jaGVzLCBBLm1hcCgoW2YsIGddKSA9PiBmbG93KE8uZnJvbVByZWRpY2F0ZShmKSwgTy5tYXAoZykpKSwgY29uY2F0QWxsKGdldEZ1bmN0aW9uTW9ub2lkKE8uZ2V0TW9ub2lkKGZpcnN0KCkpKSgpKSwgYXBwbHkoaW5wdXQpLCBPLmdldE9yRWxzZSgoKSA9PiBmYWxsYmFjayhpbnB1dCkpKTtcbmV4cG9ydCBjb25zdCBpZkVsc2UgPSAob25UcnVlKSA9PiAob25GYWxzZSkgPT4gKGYpID0+ICh4KSA9PiBmKHgpID8gb25UcnVlKHgpIDogb25GYWxzZSh4KTtcbmV4cG9ydCBjb25zdCB1bmxlc3MgPSAoZikgPT4gKG9uRmFsc2UpID0+IHggPT4gZih4KSA/IHggOiBvbkZhbHNlKHgpO1xuZXhwb3J0IGNvbnN0IHdoZW4gPSBmbG93KG5vdCwgdW5sZXNzKTtcbmV4cG9ydCBjb25zdCB1bnRpbCA9IChmKSA9PiAoZykgPT4ge1xuICAgIGNvbnN0IGggPSB4ID0+IChmKHgpID8geCA6IGgoZyh4KSkpO1xuICAgIHJldHVybiBoO1xufTtcbmV4cG9ydCBjb25zdCBjb25zdHJ1Y3QgPSAoeCkgPT4gKHhzKSA9PiBuZXcgeCguLi54cyk7XG5leHBvcnQgY29uc3QgaW52b2tlID0gKHgpID0+ICh5cykgPT4gKHopID0+IHpbeF0oLi4ueXMpO1xuZXhwb3J0IGNvbnN0IGludm9rZU51bGxhcnkgPSBmbGlwKGludm9rZSkoW10pO1xuZXhwb3J0IGNvbnN0IGludm9rZU9uID0gKCkgPT4gKHgpID0+IHlzID0+IHogPT4gelt4XSguLi55cyk7XG5leHBvcnQgY29uc3QgbWVtb2l6ZSA9IChlcSkgPT4gKGYpID0+IHtcbiAgICBjb25zdCBjYWNoZSA9IG5ldyBNYXAoKTtcbiAgICByZXR1cm4gayA9PiB7XG4gICAgICAgIGNvbnN0IGNhY2hlZCA9IE0ubG9va3VwKGVxKShrKShjYWNoZSk7XG4gICAgICAgIGlmIChPLmlzU29tZShjYWNoZWQpKVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC52YWx1ZTtcbiAgICAgICAgY29uc3QgdmFsID0gZihrKTtcbiAgICAgICAgY2FjaGUuc2V0KGssIHZhbCk7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgY3VycnkyVCA9IChmKSA9PiAoYSkgPT4gKGIpID0+IGYoW2EsIGJdKTtcbmV4cG9ydCBjb25zdCBjdXJyeTIgPSBmbG93KHVuYXJ5LCBjdXJyeTJUKTtcbmV4cG9ydCBjb25zdCBjdXJyeTNUID0gKGYpID0+IChhKSA9PiAoYikgPT4gKGMpID0+IGYoW2EsIGIsIGNdKTtcbmV4cG9ydCBjb25zdCBjdXJyeTMgPSBmbG93KHVuYXJ5LCBjdXJyeTNUKTtcbmV4cG9ydCBjb25zdCBjdXJyeTRUID0gKGYpID0+IChhKSA9PiAoYikgPT4gKGMpID0+IChkKSA9PiBmKFthLCBiLCBjLCBkXSk7XG5leHBvcnQgY29uc3QgY3Vycnk0ID0gZmxvdyh1bmFyeSwgY3Vycnk0VCk7XG5leHBvcnQgY29uc3QgY3Vycnk1VCA9IChmKSA9PiAoYSkgPT4gKGIpID0+IChjKSA9PiAoZCkgPT4gKGUpID0+IGYoW2EsIGIsIGMsIGQsIGVdKTtcbmV4cG9ydCBjb25zdCBjdXJyeTUgPSBmbG93KHVuYXJ5LCBjdXJyeTVUKTtcbmV4cG9ydCBjb25zdCB1bmN1cnJ5MiA9IChmKSA9PiAoW2EsIGJdKSA9PiBmKGEpKGIpO1xuZXhwb3J0IGNvbnN0IHVuY3VycnkzID0gKGYpID0+IChbYSwgYiwgY10pID0+IGYoYSkoYikoYyk7XG5leHBvcnQgY29uc3QgdW5jdXJyeTQgPSAoZikgPT4gKFthLCBiLCBjLCBkXSkgPT4gZihhKShiKShjKShkKTtcbmV4cG9ydCBjb25zdCB1bmN1cnJ5NSA9IChmKSA9PiAoW2EsIGIsIGMsIGQsIGVdKSA9PiBmKGEpKGIpKGMpKGQpKGUpO1xuZXhwb3J0IGZ1bmN0aW9uIGZvcmsoZnMpIHtcbiAgICByZXR1cm4gKHgpID0+IGZzLm1hcChmID0+IGYoeCkpO1xufVxuZXhwb3J0IGNvbnN0IGNvbnZlcmdlID0gKGYpID0+IChncykgPT4gZmxvdyh4ID0+IGZvcmsoZ3MpKHgpLCBmKTtcbmV4cG9ydCBjb25zdCBpc0luc3RhbmNlT2YgPSAoeCkgPT4gKHkpID0+IHkgaW5zdGFuY2VvZiB4O1xuZXhwb3J0IGNvbnN0IGFwcGx5RXZlcnkgPSBjb25jYXRBbGwoZ2V0RW5kb01vbm9pZCgpKTtcbmV4cG9ydCBjb25zdCBhcHBseVNvbWVzID0gKGZzKSA9PiB4ID0+IHBpcGUoZnMsIEEucmVkdWNlKHgsICh5LCBtZikgPT4gcGlwZShtZiwgTy5tYXRjaChjb25zdGFudCh5KSwgYXBwbHkoeSkpKSkpO1xuZXhwb3J0IGNvbnN0IGFwcGx5TiA9IChuKSA9PiAoZikgPT4gcGlwZShBLnJlcGxpY2F0ZShuLCBmKSwgYXBwbHlFdmVyeSk7XG4iLAogICJpbXBvcnQgKiBhcyBQcmVkIGZyb20gXCJmcC10cy9QcmVkaWNhdGVcIjtcbmltcG9ydCB7IGZsb3cgfSBmcm9tIFwiZnAtdHMvZnVuY3Rpb25cIjtcbmltcG9ydCB7IGludmVydCB9IGZyb20gXCIuL0Jvb2xlYW5cIjtcbmltcG9ydCB7IGNvbmNhdEFsbCB9IGZyb20gXCJmcC10cy9Nb25vaWRcIjtcbmV4cG9ydCBjb25zdCBhbGxQYXNzID0gKGZzKSA9PiBjb25jYXRBbGwoUHJlZC5nZXRNb25vaWRBbGwoKSkoZnMpO1xuZXhwb3J0IGNvbnN0IGFueVBhc3MgPSAoZnMpID0+IGNvbmNhdEFsbChQcmVkLmdldE1vbm9pZEFueSgpKShmcyk7XG5leHBvcnQgY29uc3Qgbm9uZVBhc3MgPSAoZnMpID0+IGZsb3coYW55UGFzcyhmcyksIGludmVydCk7XG4iLAogICJpbXBvcnQgeyBhcnJheSBhcyBhIH0gZnJvbSBcImZwLXRzXCJcclxuaW1wb3J0IHsgYW55UGFzcyB9IGZyb20gXCJmcC10cy1zdGQvUHJlZGljYXRlXCJcclxuaW1wb3J0IHsgZmxvdyBhcyBmLCBpZGVudGl0eSwgcGlwZSBhcyBwIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCJcclxuaW1wb3J0IHsgZ2V0IH0gZnJvbSBcInNwZWN0YWNsZXMtdHNcIlxyXG5pbXBvcnQgeyBmZXRjaEdRTEFsYnVtLCBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrcywgZmV0Y2hQbGF0UGxheWxpc3RDb250ZW50cyB9IGZyb20gXCIuLi8uLi9zaGFyZWQvYXBpXCJcclxuaW1wb3J0IHsgU3BvdGlmeVVSSSwgd2FpdEZvckVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vc2hhcmVkL3V0aWxcIlxyXG5pbXBvcnQgeyBhZGRSYXRpbmdzTGlzdGVuZXJzVG9TdGFycywgYWdncmVnYXRlUmF0aW5ncywgbG9hZFJhdGluZ3MsIHRyYWNrc1JhdGluZ3MgfSBmcm9tIFwiLi9yYXRpbmdzXCJcclxuaW1wb3J0IHsgQ09ORklHIH0gZnJvbSBcIi4vc2V0dGluZ3NcIlxyXG5pbXBvcnQgeyBTdGFyU3RvcHMsIGNyZWF0ZVN0YXJzLCBzZXRTdGFyc0dyYWRpZW50QnlSYXRpbmcgfSBmcm9tIFwiLi9zdGFyc1wiXHJcbmltcG9ydCB7XHJcbiAgICBTVEFSX1NJWkUsXHJcbiAgICBnZXRGaXJzdFBsdXMsXHJcbiAgICBnZXRMYXN0Q29sSW5kZXgsXHJcbiAgICBnZXRTdGFyc0NvbnRhaW5lcixcclxuICAgIGdldFN0YXJzU3RvcHMsXHJcbiAgICBnZXRUcmFja0xpc3RIZWFkZXIsXHJcbiAgICBnZXRUcmFja0xpc3RUcmFja1VyaSxcclxuICAgIGdldFRyYWNrTGlzdFRyYWNrcyxcclxuICAgIGdldFRyYWNrTGlzdHMsXHJcbiAgICBzZXRTdGFyc0dyYWRpZW50RnJvbUNvbnRhaW5lckJ5UmF0aW5nLFxyXG4gICAgc3RhcnNTMk4sXHJcbn0gZnJvbSBcIi4vdXRpbFwiXHJcblxyXG5jb25zdCB7IFVSSSB9ID0gU3BpY2V0aWZ5XHJcblxyXG5jb25zdCBjdXN0b21UcmFja0xpc3RDb2xDc3MgPSBbXHJcbiAgICBudWxsLFxyXG4gICAgbnVsbCxcclxuICAgIG51bGwsXHJcbiAgICBudWxsLFxyXG4gICAgXCJbaW5kZXhdIDE2cHggW2ZpcnN0XSA0ZnIgW3ZhcjFdIDJmciBbdmFyMl0gMWZyIFtsYXN0XSBtaW5tYXgoMTIwcHgsMWZyKVwiLFxyXG4gICAgXCJbaW5kZXhdIDE2cHggW2ZpcnN0XSA2ZnIgW3ZhcjFdIDRmciBbdmFyMl0gM2ZyIFt2YXIzXSAyZnIgW2xhc3RdIG1pbm1heCgxMjBweCwxZnIpXCIsXHJcbiAgICBcIltpbmRleF0gMTZweCBbZmlyc3RdIDZmciBbdmFyMV0gNGZyIFt2YXIyXSAzZnIgW3ZhcjNdIG1pbm1heCgxMjBweCwyZnIpIFt2YXIzXSAyZnIgW2xhc3RdIG1pbm1heCgxMjBweCwxZnIpXCIsXHJcbl1cclxuXHJcbmxvYWRSYXRpbmdzKClcclxuXHJcbi8vIFRSQUNLTElTVFNcclxuXHJcbmNvbnN0IHVwZGF0ZVRyYWNrTGlzdFN0YXJzID0gZihcclxuICAgIGdldFRyYWNrTGlzdHMsXHJcbiAgICBhLm1hcCh0cmFja0xpc3QgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRyYWNrTGlzdFRyYWNrcyA9IGdldFRyYWNrTGlzdFRyYWNrcyh0cmFja0xpc3QpXHJcbiAgICAgICAgaWYgKHRyYWNrTGlzdFRyYWNrcy5sZW5ndGggPT09IDApIHJldHVyblxyXG5cclxuICAgICAgICBjb25zdCBoYXNTdGFycyA9IChwYXJlbnQ6IEhUTUxFbGVtZW50KSA9PiBwYXJlbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInN0YXJzXCIpLmxlbmd0aCA+IDBcclxuICAgICAgICBjb25zdCBsb2NhdGlvblVyaSA9IFVSSS5mcm9tU3RyaW5nKFNwaWNldGlmeS5QbGF0Zm9ybS5IaXN0b3J5LmxvY2F0aW9uLnBhdGhuYW1lKVxyXG5cclxuICAgICAgICBjb25zdCBmaXJzdEVsZW1lbnQgPSBVUkkuaXNBcnRpc3QobG9jYXRpb25VcmkhKVxyXG4gICAgICAgICAgICA/IHRyYWNrTGlzdFRyYWNrc1swXVxyXG4gICAgICAgICAgICA6IGdldFRyYWNrTGlzdEhlYWRlcih0cmFja0xpc3QpID8/IHRyYWNrTGlzdFRyYWNrc1swXVxyXG5cclxuICAgICAgICBjb25zdCBbbGFzdENvbEluZGV4XSA9IGdldExhc3RDb2xJbmRleChmaXJzdEVsZW1lbnQpXHJcbiAgICAgICAgY29uc3QgbmV3VHJhY2tMaXN0Q29sQ3NzID0gY3VzdG9tVHJhY2tMaXN0Q29sQ3NzW2xhc3RDb2xJbmRleCAtIHAoZmlyc3RFbGVtZW50LCBoYXNTdGFycywgTnVtYmVyKV1cclxuXHJcbiAgICAgICAgaWYgKCFuZXdUcmFja0xpc3RDb2xDc3MpIHJldHVyblxyXG4gICAgICAgIGZpcnN0RWxlbWVudC5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gbmV3VHJhY2tMaXN0Q29sQ3NzXHJcblxyXG4gICAgICAgIHAoXHJcbiAgICAgICAgICAgIHRyYWNrTGlzdFRyYWNrcyxcclxuICAgICAgICAgICAgYS5tYXAodHJhY2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVhcnQgPSBnZXRGaXJzdFBsdXModHJhY2spXHJcbiAgICAgICAgICAgICAgICBpZiAoaGVhcnQpIGhlYXJ0LnN0eWxlLmRpc3BsYXkgPSBDT05GSUcuaGlkZUhlYXJ0cyA/IFwibm9uZVwiIDogXCJmbGV4XCJcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzU3RhcnModHJhY2spKSByZXR1cm5cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcmF0aW5nQ29sdW1uOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSB0cmFjay5xdWVyeVNlbGVjdG9yKFwiLnN0YXJSYXRpbmdzXCIpXHJcbiAgICAgICAgICAgICAgICBpZiAoIXJhdGluZ0NvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RDb2x1bW4gPSB0cmFjay5xdWVyeVNlbGVjdG9yKFwiLm1haW4tdHJhY2tMaXN0LXJvd1NlY3Rpb25FbmRcIilcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IE51bWJlcihsYXN0Q29sdW1uPy5nZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbGluZGV4XCIpKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByYXRpbmdDb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW5nQ29sdW1uLnNldEF0dHJpYnV0ZShcImFyaWEtY29saW5kZXhcIiwgU3RyaW5nKGNvbEluZGV4KSlcclxuICAgICAgICAgICAgICAgICAgICBsYXN0Q29sdW1uPy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbGluZGV4XCIsIFN0cmluZyhjb2xJbmRleCArIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJhdGluZ0NvbHVtbi5yb2xlID0gXCJncmlkY2VsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW5nQ29sdW1uLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxyXG4gICAgICAgICAgICAgICAgICAgIHJhdGluZ0NvbHVtbi5jbGFzc0xpc3QuYWRkKFwibWFpbi10cmFja0xpc3Qtcm93U2VjdGlvblZhcmlhYmxlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW5nQ29sdW1uLmNsYXNzTGlzdC5hZGQoXCJzdGFyUmF0aW5nc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrLmluc2VydEJlZm9yZShyYXRpbmdDb2x1bW4sIGxhc3RDb2x1bW4pXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhY2suc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9IG5ld1RyYWNrTGlzdENvbENzcyFcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFja1VyaSA9IGdldFRyYWNrTGlzdFRyYWNrVXJpKHRyYWNrKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdXJpID0gVVJJLmZyb21TdHJpbmcodHJhY2tVcmkpXHJcblxyXG4gICAgICAgICAgICAgICAgLy9UT0RPOiBMb2NhbCBUcmFja3Mgc3VwcG9ydFxyXG4gICAgICAgICAgICAgICAgaWYgKCFVUkkuaXNUcmFjayh1cmkhKSkgcmV0dXJuXHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgW3N0YXJzQ29udGFpbmVyLCBzdGFyc0NvbnN0cnVjdHNdID0gY3JlYXRlU3RhcnModXJpIS5pZCEsIFNUQVJfU0laRSlcclxuICAgICAgICAgICAgICAgIHJhdGluZ0NvbHVtbi5hcHBlbmRDaGlsZChzdGFyc0NvbnRhaW5lcilcclxuICAgICAgICAgICAgICAgIHAoXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnNDb25zdHJ1Y3RzLFxyXG4gICAgICAgICAgICAgICAgICAgIGEudW56aXAsXHJcbiAgICAgICAgICAgICAgICAgICAgKFtfLCBzdGFyc1N0b3BzXSkgPT4gc3RhcnNTdG9wcyxcclxuICAgICAgICAgICAgICAgICAgICBzZXRTdGFyc0dyYWRpZW50QnlSYXRpbmcodHJhY2tzUmF0aW5nc1t0cmFja1VyaV0gPz8gMCksXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBhZGRSYXRpbmdzTGlzdGVuZXJzVG9TdGFycyhbc3RhcnNDb250YWluZXIsIHN0YXJzQ29uc3RydWN0c10sICgpID0+IHRyYWNrVXJpKVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldFZpc2libGVDb25kID0gKCkgPT5cclxuICAgICAgICAgICAgICAgICAgICAoc3RhcnNDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IHRyYWNrc1JhdGluZ3NbdHJhY2tVcmldID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiKVxyXG5cclxuICAgICAgICAgICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4gKHN0YXJzQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIikpXHJcbiAgICAgICAgICAgICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgc2V0VmlzaWJsZUNvbmQpXHJcbiAgICAgICAgICAgICAgICBzZXRWaXNpYmxlQ29uZCgpXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIClcclxuICAgIH0pLFxyXG4pXHJcblxyXG5sZXQgbWFpbkVsZW1lbnQ6IEhUTUxFbGVtZW50XHJcbmNvbnN0IG1haW5FbGVtZW50T2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiAoQ09ORklHLnNob3dJblRyYWNrTGlzdHMgPyB1cGRhdGVUcmFja0xpc3RTdGFycygpIDogdW5kZWZpbmVkKSlcclxuXHJcbm5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcclxuICAgIGNvbnN0IG9sZE1haW5FbGVtZW50ID0gbWFpbkVsZW1lbnRcclxuICAgIG1haW5FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oXCJtYWluXCIpIVxyXG4gICAgaWYgKG1haW5FbGVtZW50ICYmICFtYWluRWxlbWVudC5pc0VxdWFsTm9kZShvbGRNYWluRWxlbWVudCkpIHtcclxuICAgICAgICBpZiAob2xkTWFpbkVsZW1lbnQpIG1haW5FbGVtZW50T2JzZXJ2ZXIuZGlzY29ubmVjdCgpXHJcbiAgICAgICAgbWFpbkVsZW1lbnRPYnNlcnZlci5vYnNlcnZlKG1haW5FbGVtZW50LCB7XHJcbiAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgc3VidHJlZTogdHJ1ZSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59KS5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcclxuICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgIHN1YnRyZWU6IHRydWUsXHJcbn0pXHJcblxyXG4vLyBDT0xMRUNUSU9OXHJcblxyXG5jb25zdCB1cGRhdGVDb2xsZWN0aW9uU3RhcnMgPSBhc3luYyAocGF0aG5hbWU6IFNwb3RpZnlVUkksIHN0YXJzU3RvcHM/OiBTdGFyU3RvcHNbXSkgPT4ge1xyXG4gICAgY29uc3QgdXJpID0gVVJJLmZyb21TdHJpbmcocGF0aG5hbWUpIGFzIFJlcXVpcmVkPFNwaWNldGlmeS5VUkk+XHJcblxyXG4gICAgaWYgKCFzdGFyc1N0b3BzKSBzdGFyc1N0b3BzID0gZ2V0U3RhcnNTdG9wcyhcImNvbGxlY3Rpb25cIilcclxuXHJcbiAgICBsZXQgdXJpc1xyXG4gICAgaWYgKFVSSS5pc0FsYnVtKHVyaSkpXHJcbiAgICAgICAgdXJpcyA9IHAoYXdhaXQgZmV0Y2hHUUxBbGJ1bShgJHt1cml9YCksIGlkZW50aXR5LCBnZXQoXCJ0cmFja3MuaXRlbXNcIiksIGEubWFwKGYoaWRlbnRpdHksIGdldChcInRyYWNrLnVyaVwiKSkpKVxyXG4gICAgZWxzZSBpZiAoVVJJLmlzQXJ0aXN0KHVyaSkpIHVyaXMgPSBwKGF3YWl0IGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzKGAke3VyaX1gKSwgYS5tYXAoZ2V0KFwidXJpXCIpKSlcclxuICAgIGVsc2UgaWYgKFVSSS5pc1BsYXlsaXN0VjFPclYyKHVyaSkpIHVyaXMgPSBwKGF3YWl0IGZldGNoUGxhdFBsYXlsaXN0Q29udGVudHMoYCR7dXJpfWApLCBhLm1hcChnZXQoXCJ1cmlcIikpKVxyXG4gICAgZWxzZSB0aHJvdyBcIm1lIG91dCB0aGUgd2luZG93XCJcclxuXHJcbiAgICBzZXRTdGFyc0dyYWRpZW50QnlSYXRpbmcoYWdncmVnYXRlUmF0aW5ncyh1cmlzKSkoc3RhcnNTdG9wcylcclxufVxyXG5cclxubGV0IGxhc3RDb2xsZWN0aW9uUGxheUJ1dHRvbjogRWxlbWVudFxyXG5TcGljZXRpZnkuUGxhdGZvcm0uSGlzdG9yeS5saXN0ZW4oYXN5bmMgKHsgcGF0aG5hbWUgfTogeyBwYXRobmFtZTogc3RyaW5nIH0pID0+IHtcclxuICAgIGNvbnN0IHBhZ2VIYXNIZWFydCA9IGFueVBhc3MoW1VSSS5pc0FsYnVtLCBVUkkuaXNBcnRpc3QsIFVSSS5pc1BsYXlsaXN0VjFPclYyXSlcclxuICAgIGlmICghcGFnZUhhc0hlYXJ0KHBhdGhuYW1lKSkgcmV0dXJuXHJcblxyXG4gICAgbGFzdENvbGxlY3Rpb25QbGF5QnV0dG9uID0gKGF3YWl0IHdhaXRGb3JFbGVtZW50KFxyXG4gICAgICAgIFwiLm1haW4tYWN0aW9uQmFyLUFjdGlvbkJhciAubWFpbi1wbGF5QnV0dG9uLVBsYXlCdXR0b25cIixcclxuICAgICAgICAwLFxyXG4gICAgICAgIGRvY3VtZW50LmJvZHksXHJcbiAgICAgICAgbGFzdENvbGxlY3Rpb25QbGF5QnV0dG9uLFxyXG4gICAgKSkhXHJcblxyXG4gICAgY29uc3QgW2NvbGxlY3Rpb25TdGFyc0NvbnRhaW5lciwgY29sbGVjdGlvblN0YXJzQ29uc3RydWN0c10gPSBjcmVhdGVTdGFycyhcImNvbGxlY3Rpb25cIiwgU1RBUl9TSVpFICogMilcclxuICAgIGdldFN0YXJzQ29udGFpbmVyKFwiY29sbGVjdGlvblwiKT8ucmVtb3ZlKClcclxuICAgIGxhc3RDb2xsZWN0aW9uUGxheUJ1dHRvbiEuYWZ0ZXIoY29sbGVjdGlvblN0YXJzQ29udGFpbmVyKVxyXG5cclxuICAgIGNvbnN0IGNvbGxlY3Rpb25TdGFyc1N0b3BzID0gcChjb2xsZWN0aW9uU3RhcnNDb25zdHJ1Y3RzLCBhLnVuemlwLCAoW18sIHN0YXJzU3RvcHNdKSA9PiBzdGFyc1N0b3BzKVxyXG5cclxuICAgIHVwZGF0ZUNvbGxlY3Rpb25TdGFycyhwYXRobmFtZSwgY29sbGVjdGlvblN0YXJzU3RvcHMpXHJcbn0pXHJcblxyXG4vLyBOT1cgUExBWUlOR1xyXG5cclxuY29uc3QgY3JlYXRlTm93UGxheWluZ1N0YXJzID0gKCkgPT4ge1xyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3RhcnMtbm93LXBsYXlpbmdcIikubGVuZ3RoICE9PSAwKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBub3dQbGF5aW5nRWxlbWVudFNlbGVjdG9yID0gQ09ORklHLm5vd1BsYXlpbmdTdGFyc09uUmlnaHRcclxuICAgICAgICA/IFwiLm1haW4tbm93UGxheWluZ0Jhci1leHRyYUNvbnRyb2xzXCJcclxuICAgICAgICA6IFwiLm1haW4tbm93UGxheWluZ1dpZGdldC10cmFja0luZm9cIlxyXG4gICAgY29uc3Qgbm93UGxheWluZ0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5vd1BsYXlpbmdFbGVtZW50U2VsZWN0b3IpXHJcbiAgICBpZiAoIW5vd1BsYXlpbmdFbGVtZW50KSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBbbm93UGxheWluZ1N0YXJzQ29udGFpbmVyLCBub3dQbGF5aW5nU3RhckNvbnN0cnVjdF0gPSBjcmVhdGVTdGFycyhcIm5vdy1wbGF5aW5nXCIsIFNUQVJfU0laRSlcclxuICAgIG5vd1BsYXlpbmdTdGFyc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcclxuICAgIG5vd1BsYXlpbmdTdGFyc0NvbnRhaW5lci5zdHlsZS5tYXJnaW5MZWZ0ID0gXCI4cHhcIlxyXG4gICAgbm93UGxheWluZ1N0YXJzQ29udGFpbmVyLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCI4cHhcIlxyXG5cclxuICAgIGlmICghQ09ORklHLm5vd1BsYXlpbmdTdGFyc09uUmlnaHQpIG5vd1BsYXlpbmdFbGVtZW50LmFmdGVyKG5vd1BsYXlpbmdTdGFyc0NvbnRhaW5lcilcclxuICAgIGVsc2Ugbm93UGxheWluZ0VsZW1lbnQucHJlcGVuZChub3dQbGF5aW5nU3RhcnNDb250YWluZXIpXHJcblxyXG4gICAgYWRkUmF0aW5nc0xpc3RlbmVyc1RvU3RhcnMoXHJcbiAgICAgICAgW25vd1BsYXlpbmdTdGFyc0NvbnRhaW5lciwgbm93UGxheWluZ1N0YXJDb25zdHJ1Y3RdLFxyXG4gICAgICAgICgpID0+IFNwaWNldGlmeS5QbGF5ZXIuZGF0YS50cmFjaz8udXJpISxcclxuICAgIClcclxufVxyXG5cclxuY3JlYXRlTm93UGxheWluZ1N0YXJzKClcclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVOb3dQbGF5aW5nU3RhcnMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB0cmFja1VyaSA9IFNwaWNldGlmeS5QbGF5ZXIuZGF0YS50cmFjaz8udXJpIVxyXG4gICAgY29uc3Qgbm93UGxheWluZ1N0YXJzQ29udGFpbmVyID0gZ2V0U3RhcnNDb250YWluZXIoXCJub3ctcGxheWluZ1wiKVxyXG5cclxuICAgIG5vd1BsYXlpbmdTdGFyc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gU3BpY2V0aWZ5LlVSSS5pc1RyYWNrKHRyYWNrVXJpKSA/IFwiZmxleFwiIDogXCJub25lXCJcclxuXHJcbiAgICBwKG5vd1BsYXlpbmdTdGFyc0NvbnRhaW5lciwgc2V0U3RhcnNHcmFkaWVudEZyb21Db250YWluZXJCeVJhdGluZyh0cmFja3NSYXRpbmdzW3RyYWNrVXJpXSA/PyAwKSlcclxufVxyXG5cclxuU3BpY2V0aWZ5LlBsYXllci5hZGRFdmVudExpc3RlbmVyKFwic29uZ2NoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICBjb25zdCB0cmFja1VyaSA9IFNwaWNldGlmeS5QbGF5ZXIuZGF0YS50cmFjaz8udXJpIVxyXG4gICAgaWYgKFxyXG4gICAgICAgIE51bWJlcihDT05GSUcuc2tpcFRocmVzaG9sZCkgJiZcclxuICAgICAgICAodHJhY2tzUmF0aW5nc1t0cmFja1VyaV0gfHwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpIDw9IHN0YXJzUzJOKENPTkZJRy5za2lwVGhyZXNob2xkKVxyXG4gICAgKVxyXG4gICAgICAgIHJldHVybiBTcGljZXRpZnkuUGxheWVyLm5leHQoKVxyXG5cclxuICAgIHVwZGF0ZU5vd1BsYXlpbmdTdGFycygpXHJcbn0pXHJcbnVwZGF0ZU5vd1BsYXlpbmdTdGFycygpXHJcbiIsCiAgImltcG9ydCB7IGFycmF5IGFzIGEsIGVxLCBzdHJpbmcgfSBmcm9tIFwiZnAtdHNcIlxyXG5pbXBvcnQgeyBndWFyZCwgbWVtb2l6ZSB9IGZyb20gXCJmcC10cy1zdGQvRnVuY3Rpb25cIlxyXG5pbXBvcnQgeyBnZXRVbmlvblNlbWlncm91cCB9IGZyb20gXCJmcC10cy9SZWNvcmRcIlxyXG5pbXBvcnQgeyBSZWZpbmVtZW50IH0gZnJvbSBcImZwLXRzL1JlZmluZW1lbnRcIlxyXG5pbXBvcnQgeyBmaXJzdCB9IGZyb20gXCJmcC10cy9TZW1pZ3JvdXBcIlxyXG5pbXBvcnQgeyBmbG93IGFzIGYsIHBpcGUgYXMgcCwgdHVwbGVkLCB1bnR1cGxlZCB9IGZyb20gXCJmcC10cy9mdW5jdGlvblwiXHJcblxyXG50eXBlIHJlZmluZUJyYW5jaDxBLCBCIGV4dGVuZHMgQSwgUj4gPSBbUmVmaW5lbWVudDxBLCBCPiwgKHg6IEIpID0+IFJdXHJcbmV4cG9ydCBjb25zdCBndWFyZDIgPSA8QSwgQTEgZXh0ZW5kcyBBLCBBMiBleHRlbmRzIEEsIFI+KGJyYW5jaGVzOiBbcmVmaW5lQnJhbmNoPEEsIEExLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEyLCBSPl0pID0+XHJcbiAgICBndWFyZChicmFuY2hlcyBhcyB1bmtub3duIGFzIFtyZWZpbmVCcmFuY2g8QSwgQSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBLCBSPl0pXHJcbmV4cG9ydCBjb25zdCBndWFyZDMgPSA8QSwgQTEgZXh0ZW5kcyBBLCBBMiBleHRlbmRzIEEsIEEzIGV4dGVuZHMgQSwgUj4oXHJcbiAgICBicmFuY2hlczogW3JlZmluZUJyYW5jaDxBLCBBMSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBMiwgUj4sIHJlZmluZUJyYW5jaDxBLCBBMywgUj5dLFxyXG4pID0+IGd1YXJkKGJyYW5jaGVzIGFzIHVua25vd24gYXMgW3JlZmluZUJyYW5jaDxBLCBBLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQSwgUj5dKVxyXG5leHBvcnQgY29uc3QgZ3VhcmQ0ID0gPEEsIEExIGV4dGVuZHMgQSwgQTIgZXh0ZW5kcyBBLCBBMyBleHRlbmRzIEEsIEE0IGV4dGVuZHMgQSwgUj4oXHJcbiAgICBicmFuY2hlczogW3JlZmluZUJyYW5jaDxBLCBBMSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBMiwgUj4sIHJlZmluZUJyYW5jaDxBLCBBMywgUj4sIHJlZmluZUJyYW5jaDxBLCBBNCwgUj5dLFxyXG4pID0+XHJcbiAgICBndWFyZChcclxuICAgICAgICBicmFuY2hlcyBhcyB1bmtub3duIGFzIFtcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgIF0sXHJcbiAgICApXHJcbmV4cG9ydCBjb25zdCBndWFyZDUgPSA8QSwgQTEgZXh0ZW5kcyBBLCBBMiBleHRlbmRzIEEsIEEzIGV4dGVuZHMgQSwgQTQgZXh0ZW5kcyBBLCBBNSBleHRlbmRzIEEsIFI+KFxyXG4gICAgYnJhbmNoZXM6IFtcclxuICAgICAgICByZWZpbmVCcmFuY2g8QSwgQTEsIFI+LFxyXG4gICAgICAgIHJlZmluZUJyYW5jaDxBLCBBMiwgUj4sXHJcbiAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEzLCBSPixcclxuICAgICAgICByZWZpbmVCcmFuY2g8QSwgQTQsIFI+LFxyXG4gICAgICAgIHJlZmluZUJyYW5jaDxBLCBBNSwgUj4sXHJcbiAgICBdLFxyXG4pID0+XHJcbiAgICBndWFyZChcclxuICAgICAgICBicmFuY2hlcyBhcyB1bmtub3duIGFzIFtcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgXSxcclxuICAgIClcclxuXHJcbmV4cG9ydCBjb25zdCBvYmpDb25jYXQyID0gPEExLCBBMj4oKSA9PiBnZXRVbmlvblNlbWlncm91cChmaXJzdDxhbnk+KCkpLmNvbmNhdCBhcyAoeDogQTEsIHk6IEEyKSA9PiBBMSAmIEEyXHJcbmV4cG9ydCBjb25zdCBvYmpDb25jYXQgPSA8QSw+KCkgPT4gYS5yZWR1Y2Uoe30gYXMgQSwgb2JqQ29uY2F0MjxBLCBBPigpKVxyXG5cclxudHlwZSBhc3luYyA9IHtcclxuICAgIDxBLCBCPihmOiAoYTogQSkgPT4gUHJvbWlzZTxCPik6IChmYTogUHJvbWlzZTxBPikgPT4gUHJvbWlzZTxCPlxyXG4gICAgPEEsIEI+KGY6IChhOiBBKSA9PiBCKTogKGZhOiBQcm9taXNlPEE+KSA9PiBQcm9taXNlPEI+XHJcbn1cclxuZXhwb3J0IGNvbnN0IHBNY2hhaW46IGFzeW5jID1cclxuICAgIDxBLCBSPihmOiAoYTogQSkgPT4gUikgPT5cclxuICAgIGFzeW5jIChmYTogQSkgPT5cclxuICAgICAgICBmKGF3YWl0IGZhKVxyXG5cclxuZXhwb3J0IGNvbnN0IGlzID1cclxuICAgIDxBLD4oYzoga2V5b2YgQSkgPT5cclxuICAgIDxCIGV4dGVuZHMgQT4oYTogQVt0eXBlb2YgY10pID0+XHJcbiAgICAoZmllbGQ6IEEpOiBmaWVsZCBpcyBCID0+XHJcbiAgICAgICAgZmllbGRbY10gPT09IGFcclxuXHJcbmV4cG9ydCBjb25zdCB0YXBBbnkgPVxyXG4gICAgPEEsPihmOiAoYTogQSkgPT4gdm9pZCkgPT5cclxuICAgIChmYTogQSkgPT4ge1xyXG4gICAgICAgIGYoZmEpXHJcbiAgICAgICAgcmV0dXJuIGZhXHJcbiAgICB9XHJcblxyXG5leHBvcnQgY29uc3QgY2h1bmNraWZ5ID1cclxuICAgIChuOiBudW1iZXIpID0+XHJcbiAgICA8QSwgUj4oZzogKGE6IEFbXSkgPT4gUHJvbWlzZTxSW10+KSA9PlxyXG4gICAgICAgIGYoYS5jaHVua3NPZihuKTxBPiwgYS5tYXAoZyksIHBzID0+IFByb21pc2UuYWxsKHBzKSwgcE1jaGFpbihhLmZsYXR0ZW4pKVxyXG5cclxuZXhwb3J0IGNvbnN0IHdpdGhQcm9ncmVzcyA9XHJcbiAgICA8RiBleHRlbmRzIChmOiAoLi4uYTogYW55KSA9PiBhbnkpID0+IChmYTogYW55KSA9PiBhbnk+KG1hcDogRikgPT5cclxuICAgIChmOiBQYXJhbWV0ZXJzPEY+WzBdKSA9PlxyXG4gICAgKGZhOiBQYXJhbWV0ZXJzPFJldHVyblR5cGU8Rj4+WzBdKTogUmV0dXJuVHlwZTxSZXR1cm5UeXBlPEY+PiA9PiB7XHJcbiAgICAgICAgbGV0IGkgPSAwXHJcbiAgICAgICAgcmV0dXJuIG1hcChhc3luYyAoLi4uYTogUGFyYW1ldGVyczxQYXJhbWV0ZXJzPEY+WzBdPikgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IGF3YWl0IGYoLi4uYSlcclxuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKChpKysgLyBPYmplY3QudmFsdWVzKGZhKS5sZW5ndGgpICogMTAwKVxyXG4gICAgICAgICAgICBTcGljZXRpZnkuc2hvd05vdGlmaWNhdGlvbihgTG9hZGluZzogJHtwcm9ncmVzc30lYCwgZmFsc2UsIDIwMClcclxuICAgICAgICAgICAgcmV0dXJuIHJldFxyXG4gICAgICAgIH0pKGZhKVxyXG4gICAgfVxyXG5cclxuZXhwb3J0IGNvbnN0IG1lbW9pemUyID0gPEEgZXh0ZW5kcyBhbnlbXSwgUj4oZm46ICguLi5hcmdzOiBBKSA9PiBSKSA9PlxyXG4gICAgcChmbiwgdHVwbGVkLCBtZW1vaXplPEE+KGVxLmNvbnRyYW1hcChKU09OLnN0cmluZ2lmeSkoc3RyaW5nLkVxKSksIHVudHVwbGVkKVxyXG4iLAogICJpbXBvcnQgeyBhcnJheSBhcyBhLCBlcSwgc3RyaW5nIH0gZnJvbSBcImZwLXRzXCJcclxuaW1wb3J0IHsgZ3VhcmQsIG1lbW9pemUgfSBmcm9tIFwiZnAtdHMtc3RkL0Z1bmN0aW9uXCJcclxuaW1wb3J0IHsgZ2V0VW5pb25TZW1pZ3JvdXAgfSBmcm9tIFwiZnAtdHMvUmVjb3JkXCJcclxuaW1wb3J0IHsgUmVmaW5lbWVudCB9IGZyb20gXCJmcC10cy9SZWZpbmVtZW50XCJcclxuaW1wb3J0IHsgZmlyc3QgfSBmcm9tIFwiZnAtdHMvU2VtaWdyb3VwXCJcclxuaW1wb3J0IHsgZmxvdyBhcyBmLCBwaXBlIGFzIHAsIHR1cGxlZCwgdW50dXBsZWQgfSBmcm9tIFwiZnAtdHMvZnVuY3Rpb25cIlxyXG5cclxudHlwZSByZWZpbmVCcmFuY2g8QSwgQiBleHRlbmRzIEEsIFI+ID0gW1JlZmluZW1lbnQ8QSwgQj4sICh4OiBCKSA9PiBSXVxyXG5leHBvcnQgY29uc3QgZ3VhcmQyID0gPEEsIEExIGV4dGVuZHMgQSwgQTIgZXh0ZW5kcyBBLCBSPihicmFuY2hlczogW3JlZmluZUJyYW5jaDxBLCBBMSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBMiwgUj5dKSA9PlxyXG4gICAgZ3VhcmQoYnJhbmNoZXMgYXMgdW5rbm93biBhcyBbcmVmaW5lQnJhbmNoPEEsIEEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQSwgUj5dKVxyXG5leHBvcnQgY29uc3QgZ3VhcmQzID0gPEEsIEExIGV4dGVuZHMgQSwgQTIgZXh0ZW5kcyBBLCBBMyBleHRlbmRzIEEsIFI+KFxyXG4gICAgYnJhbmNoZXM6IFtyZWZpbmVCcmFuY2g8QSwgQTEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTIsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTMsIFI+XSxcclxuKSA9PiBndWFyZChicmFuY2hlcyBhcyB1bmtub3duIGFzIFtyZWZpbmVCcmFuY2g8QSwgQSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEsIFI+XSlcclxuZXhwb3J0IGNvbnN0IGd1YXJkNCA9IDxBLCBBMSBleHRlbmRzIEEsIEEyIGV4dGVuZHMgQSwgQTMgZXh0ZW5kcyBBLCBBNCBleHRlbmRzIEEsIFI+KFxyXG4gICAgYnJhbmNoZXM6IFtyZWZpbmVCcmFuY2g8QSwgQTEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTIsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTMsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTQsIFI+XSxcclxuKSA9PlxyXG4gICAgZ3VhcmQoXHJcbiAgICAgICAgYnJhbmNoZXMgYXMgdW5rbm93biBhcyBbXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICBdLFxyXG4gICAgKVxyXG5leHBvcnQgY29uc3QgZ3VhcmQ1ID0gPEEsIEExIGV4dGVuZHMgQSwgQTIgZXh0ZW5kcyBBLCBBMyBleHRlbmRzIEEsIEE0IGV4dGVuZHMgQSwgQTUgZXh0ZW5kcyBBLCBSPihcclxuICAgIGJyYW5jaGVzOiBbXHJcbiAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEExLCBSPixcclxuICAgICAgICByZWZpbmVCcmFuY2g8QSwgQTIsIFI+LFxyXG4gICAgICAgIHJlZmluZUJyYW5jaDxBLCBBMywgUj4sXHJcbiAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEE0LCBSPixcclxuICAgICAgICByZWZpbmVCcmFuY2g8QSwgQTUsIFI+LFxyXG4gICAgXSxcclxuKSA9PlxyXG4gICAgZ3VhcmQoXHJcbiAgICAgICAgYnJhbmNoZXMgYXMgdW5rbm93biBhcyBbXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgIF0sXHJcbiAgICApXHJcblxyXG5leHBvcnQgY29uc3Qgb2JqQ29uY2F0MiA9IDxBMSwgQTI+KCkgPT4gZ2V0VW5pb25TZW1pZ3JvdXAoZmlyc3Q8YW55PigpKS5jb25jYXQgYXMgKHg6IEExLCB5OiBBMikgPT4gQTEgJiBBMlxyXG5leHBvcnQgY29uc3Qgb2JqQ29uY2F0ID0gPEEsPigpID0+IGEucmVkdWNlKHt9IGFzIEEsIG9iakNvbmNhdDI8QSwgQT4oKSlcclxuXHJcbnR5cGUgYXN5bmMgPSB7XHJcbiAgICA8QSwgQj4oZjogKGE6IEEpID0+IFByb21pc2U8Qj4pOiAoZmE6IFByb21pc2U8QT4pID0+IFByb21pc2U8Qj5cclxuICAgIDxBLCBCPihmOiAoYTogQSkgPT4gQik6IChmYTogUHJvbWlzZTxBPikgPT4gUHJvbWlzZTxCPlxyXG59XHJcbmV4cG9ydCBjb25zdCBwTWNoYWluOiBhc3luYyA9XHJcbiAgICA8QSwgUj4oZjogKGE6IEEpID0+IFIpID0+XHJcbiAgICBhc3luYyAoZmE6IEEpID0+XHJcbiAgICAgICAgZihhd2FpdCBmYSlcclxuXHJcbmV4cG9ydCBjb25zdCBpcyA9XHJcbiAgICA8QSw+KGM6IGtleW9mIEEpID0+XHJcbiAgICA8QiBleHRlbmRzIEE+KGE6IEFbdHlwZW9mIGNdKSA9PlxyXG4gICAgKGZpZWxkOiBBKTogZmllbGQgaXMgQiA9PlxyXG4gICAgICAgIGZpZWxkW2NdID09PSBhXHJcblxyXG5leHBvcnQgY29uc3QgdGFwQW55ID1cclxuICAgIDxBLD4oZjogKGE6IEEpID0+IHZvaWQpID0+XHJcbiAgICAoZmE6IEEpID0+IHtcclxuICAgICAgICBmKGZhKVxyXG4gICAgICAgIHJldHVybiBmYVxyXG4gICAgfVxyXG5cclxuZXhwb3J0IGNvbnN0IGNodW5ja2lmeSA9XHJcbiAgICAobjogbnVtYmVyKSA9PlxyXG4gICAgPEEsIFI+KGc6IChhOiBBW10pID0+IFByb21pc2U8UltdPikgPT5cclxuICAgICAgICBmKGEuY2h1bmtzT2Yobik8QT4sIGEubWFwKGcpLCBwcyA9PiBQcm9taXNlLmFsbChwcyksIHBNY2hhaW4oYS5mbGF0dGVuKSlcclxuXHJcbmV4cG9ydCBjb25zdCB3aXRoUHJvZ3Jlc3MgPVxyXG4gICAgPEYgZXh0ZW5kcyAoZjogKC4uLmE6IGFueSkgPT4gYW55KSA9PiAoZmE6IGFueSkgPT4gYW55PihtYXA6IEYpID0+XHJcbiAgICAoZjogUGFyYW1ldGVyczxGPlswXSkgPT5cclxuICAgIChmYTogUGFyYW1ldGVyczxSZXR1cm5UeXBlPEY+PlswXSk6IFJldHVyblR5cGU8UmV0dXJuVHlwZTxGPj4gPT4ge1xyXG4gICAgICAgIGxldCBpID0gMFxyXG4gICAgICAgIHJldHVybiBtYXAoYXN5bmMgKC4uLmE6IFBhcmFtZXRlcnM8UGFyYW1ldGVyczxGPlswXT4pID0+IHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBjb25zdCByZXQgPSBhd2FpdCBmKC4uLmEpXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5yb3VuZCgoaSsrIC8gT2JqZWN0LnZhbHVlcyhmYSkubGVuZ3RoKSAqIDEwMClcclxuICAgICAgICAgICAgU3BpY2V0aWZ5LnNob3dOb3RpZmljYXRpb24oYExvYWRpbmc6ICR7cHJvZ3Jlc3N9JWAsIGZhbHNlLCAyMDApXHJcbiAgICAgICAgICAgIHJldHVybiByZXRcclxuICAgICAgICB9KShmYSlcclxuICAgIH1cclxuXHJcbmV4cG9ydCBjb25zdCBtZW1vaXplMiA9IDxBIGV4dGVuZHMgYW55W10sIFI+KGZuOiAoLi4uYXJnczogQSkgPT4gUikgPT5cclxuICAgIHAoZm4sIHR1cGxlZCwgbWVtb2l6ZTxBPihlcS5jb250cmFtYXAoSlNPTi5zdHJpbmdpZnkpKHN0cmluZy5FcSkpLCB1bnR1cGxlZClcclxuIiwKICAiaW1wb3J0IHsgYXJyYXkgYXMgYSwgZXEsIHN0cmluZyB9IGZyb20gXCJmcC10c1wiXHJcbmltcG9ydCB7IGd1YXJkLCBtZW1vaXplIH0gZnJvbSBcImZwLXRzLXN0ZC9GdW5jdGlvblwiXHJcbmltcG9ydCB7IGdldFVuaW9uU2VtaWdyb3VwIH0gZnJvbSBcImZwLXRzL1JlY29yZFwiXHJcbmltcG9ydCB7IFJlZmluZW1lbnQgfSBmcm9tIFwiZnAtdHMvUmVmaW5lbWVudFwiXHJcbmltcG9ydCB7IGZpcnN0IH0gZnJvbSBcImZwLXRzL1NlbWlncm91cFwiXHJcbmltcG9ydCB7IGZsb3cgYXMgZiwgcGlwZSBhcyBwLCB0dXBsZWQsIHVudHVwbGVkIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCJcclxuXHJcbnR5cGUgcmVmaW5lQnJhbmNoPEEsIEIgZXh0ZW5kcyBBLCBSPiA9IFtSZWZpbmVtZW50PEEsIEI+LCAoeDogQikgPT4gUl1cclxuZXhwb3J0IGNvbnN0IGd1YXJkMiA9IDxBLCBBMSBleHRlbmRzIEEsIEEyIGV4dGVuZHMgQSwgUj4oYnJhbmNoZXM6IFtyZWZpbmVCcmFuY2g8QSwgQTEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQTIsIFI+XSkgPT5cclxuICAgIGd1YXJkKGJyYW5jaGVzIGFzIHVua25vd24gYXMgW3JlZmluZUJyYW5jaDxBLCBBLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEsIFI+XSlcclxuZXhwb3J0IGNvbnN0IGd1YXJkMyA9IDxBLCBBMSBleHRlbmRzIEEsIEEyIGV4dGVuZHMgQSwgQTMgZXh0ZW5kcyBBLCBSPihcclxuICAgIGJyYW5jaGVzOiBbcmVmaW5lQnJhbmNoPEEsIEExLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEyLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEzLCBSPl0sXHJcbikgPT4gZ3VhcmQoYnJhbmNoZXMgYXMgdW5rbm93biBhcyBbcmVmaW5lQnJhbmNoPEEsIEEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBLCBSPl0pXHJcbmV4cG9ydCBjb25zdCBndWFyZDQgPSA8QSwgQTEgZXh0ZW5kcyBBLCBBMiBleHRlbmRzIEEsIEEzIGV4dGVuZHMgQSwgQTQgZXh0ZW5kcyBBLCBSPihcclxuICAgIGJyYW5jaGVzOiBbcmVmaW5lQnJhbmNoPEEsIEExLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEyLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEzLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEE0LCBSPl0sXHJcbikgPT5cclxuICAgIGd1YXJkKFxyXG4gICAgICAgIGJyYW5jaGVzIGFzIHVua25vd24gYXMgW1xyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgXSxcclxuICAgIClcclxuZXhwb3J0IGNvbnN0IGd1YXJkNSA9IDxBLCBBMSBleHRlbmRzIEEsIEEyIGV4dGVuZHMgQSwgQTMgZXh0ZW5kcyBBLCBBNCBleHRlbmRzIEEsIEE1IGV4dGVuZHMgQSwgUj4oXHJcbiAgICBicmFuY2hlczogW1xyXG4gICAgICAgIHJlZmluZUJyYW5jaDxBLCBBMSwgUj4sXHJcbiAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEyLCBSPixcclxuICAgICAgICByZWZpbmVCcmFuY2g8QSwgQTMsIFI+LFxyXG4gICAgICAgIHJlZmluZUJyYW5jaDxBLCBBNCwgUj4sXHJcbiAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEE1LCBSPixcclxuICAgIF0sXHJcbikgPT5cclxuICAgIGd1YXJkKFxyXG4gICAgICAgIGJyYW5jaGVzIGFzIHVua25vd24gYXMgW1xyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICBdLFxyXG4gICAgKVxyXG5cclxuZXhwb3J0IGNvbnN0IG9iakNvbmNhdDIgPSA8QTEsIEEyPigpID0+IGdldFVuaW9uU2VtaWdyb3VwKGZpcnN0PGFueT4oKSkuY29uY2F0IGFzICh4OiBBMSwgeTogQTIpID0+IEExICYgQTJcclxuZXhwb3J0IGNvbnN0IG9iakNvbmNhdCA9IDxBLD4oKSA9PiBhLnJlZHVjZSh7fSBhcyBBLCBvYmpDb25jYXQyPEEsIEE+KCkpXHJcblxyXG50eXBlIGFzeW5jID0ge1xyXG4gICAgPEEsIEI+KGY6IChhOiBBKSA9PiBQcm9taXNlPEI+KTogKGZhOiBQcm9taXNlPEE+KSA9PiBQcm9taXNlPEI+XHJcbiAgICA8QSwgQj4oZjogKGE6IEEpID0+IEIpOiAoZmE6IFByb21pc2U8QT4pID0+IFByb21pc2U8Qj5cclxufVxyXG5leHBvcnQgY29uc3QgcE1jaGFpbjogYXN5bmMgPVxyXG4gICAgPEEsIFI+KGY6IChhOiBBKSA9PiBSKSA9PlxyXG4gICAgYXN5bmMgKGZhOiBBKSA9PlxyXG4gICAgICAgIGYoYXdhaXQgZmEpXHJcblxyXG5leHBvcnQgY29uc3QgaXMgPVxyXG4gICAgPEEsPihjOiBrZXlvZiBBKSA9PlxyXG4gICAgPEIgZXh0ZW5kcyBBPihhOiBBW3R5cGVvZiBjXSkgPT5cclxuICAgIChmaWVsZDogQSk6IGZpZWxkIGlzIEIgPT5cclxuICAgICAgICBmaWVsZFtjXSA9PT0gYVxyXG5cclxuZXhwb3J0IGNvbnN0IHRhcEFueSA9XHJcbiAgICA8QSw+KGY6IChhOiBBKSA9PiB2b2lkKSA9PlxyXG4gICAgKGZhOiBBKSA9PiB7XHJcbiAgICAgICAgZihmYSlcclxuICAgICAgICByZXR1cm4gZmFcclxuICAgIH1cclxuXHJcbmV4cG9ydCBjb25zdCBjaHVuY2tpZnkgPVxyXG4gICAgKG46IG51bWJlcikgPT5cclxuICAgIDxBLCBSPihnOiAoYTogQVtdKSA9PiBQcm9taXNlPFJbXT4pID0+XHJcbiAgICAgICAgZihhLmNodW5rc09mKG4pPEE+LCBhLm1hcChnKSwgcHMgPT4gUHJvbWlzZS5hbGwocHMpLCBwTWNoYWluKGEuZmxhdHRlbikpXHJcblxyXG5leHBvcnQgY29uc3Qgd2l0aFByb2dyZXNzID1cclxuICAgIDxGIGV4dGVuZHMgKGY6ICguLi5hOiBhbnkpID0+IGFueSkgPT4gKGZhOiBhbnkpID0+IGFueT4obWFwOiBGKSA9PlxyXG4gICAgKGY6IFBhcmFtZXRlcnM8Rj5bMF0pID0+XHJcbiAgICAoZmE6IFBhcmFtZXRlcnM8UmV0dXJuVHlwZTxGPj5bMF0pOiBSZXR1cm5UeXBlPFJldHVyblR5cGU8Rj4+ID0+IHtcclxuICAgICAgICBsZXQgaSA9IDBcclxuICAgICAgICByZXR1cm4gbWFwKGFzeW5jICguLi5hOiBQYXJhbWV0ZXJzPFBhcmFtZXRlcnM8Rj5bMF0+KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgY29uc3QgcmV0ID0gYXdhaXQgZiguLi5hKVxyXG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgucm91bmQoKGkrKyAvIE9iamVjdC52YWx1ZXMoZmEpLmxlbmd0aCkgKiAxMDApXHJcbiAgICAgICAgICAgIFNwaWNldGlmeS5zaG93Tm90aWZpY2F0aW9uKGBMb2FkaW5nOiAke3Byb2dyZXNzfSVgLCBmYWxzZSwgMjAwKVxyXG4gICAgICAgICAgICByZXR1cm4gcmV0XHJcbiAgICAgICAgfSkoZmEpXHJcbiAgICB9XHJcblxyXG5leHBvcnQgY29uc3QgbWVtb2l6ZTIgPSA8QSBleHRlbmRzIGFueVtdLCBSPihmbjogKC4uLmFyZ3M6IEEpID0+IFIpID0+XHJcbiAgICBwKGZuLCB0dXBsZWQsIG1lbW9pemU8QT4oZXEuY29udHJhbWFwKEpTT04uc3RyaW5naWZ5KShzdHJpbmcuRXEpKSwgdW50dXBsZWQpXHJcbiIsCiAgImltcG9ydCB7IGFycmF5IGFzIGEsIGVxLCBzdHJpbmcgfSBmcm9tIFwiZnAtdHNcIlxyXG5pbXBvcnQgeyBndWFyZCwgbWVtb2l6ZSB9IGZyb20gXCJmcC10cy1zdGQvRnVuY3Rpb25cIlxyXG5pbXBvcnQgeyBnZXRVbmlvblNlbWlncm91cCB9IGZyb20gXCJmcC10cy9SZWNvcmRcIlxyXG5pbXBvcnQgeyBSZWZpbmVtZW50IH0gZnJvbSBcImZwLXRzL1JlZmluZW1lbnRcIlxyXG5pbXBvcnQgeyBmaXJzdCB9IGZyb20gXCJmcC10cy9TZW1pZ3JvdXBcIlxyXG5pbXBvcnQgeyBmbG93IGFzIGYsIHBpcGUgYXMgcCwgdHVwbGVkLCB1bnR1cGxlZCB9IGZyb20gXCJmcC10cy9mdW5jdGlvblwiXHJcblxyXG50eXBlIHJlZmluZUJyYW5jaDxBLCBCIGV4dGVuZHMgQSwgUj4gPSBbUmVmaW5lbWVudDxBLCBCPiwgKHg6IEIpID0+IFJdXHJcbmV4cG9ydCBjb25zdCBndWFyZDIgPSA8QSwgQTEgZXh0ZW5kcyBBLCBBMiBleHRlbmRzIEEsIFI+KGJyYW5jaGVzOiBbcmVmaW5lQnJhbmNoPEEsIEExLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEyLCBSPl0pID0+XHJcbiAgICBndWFyZChicmFuY2hlcyBhcyB1bmtub3duIGFzIFtyZWZpbmVCcmFuY2g8QSwgQSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBLCBSPl0pXHJcbmV4cG9ydCBjb25zdCBndWFyZDMgPSA8QSwgQTEgZXh0ZW5kcyBBLCBBMiBleHRlbmRzIEEsIEEzIGV4dGVuZHMgQSwgUj4oXHJcbiAgICBicmFuY2hlczogW3JlZmluZUJyYW5jaDxBLCBBMSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBMiwgUj4sIHJlZmluZUJyYW5jaDxBLCBBMywgUj5dLFxyXG4pID0+IGd1YXJkKGJyYW5jaGVzIGFzIHVua25vd24gYXMgW3JlZmluZUJyYW5jaDxBLCBBLCBSPiwgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LCByZWZpbmVCcmFuY2g8QSwgQSwgUj5dKVxyXG5leHBvcnQgY29uc3QgZ3VhcmQ0ID0gPEEsIEExIGV4dGVuZHMgQSwgQTIgZXh0ZW5kcyBBLCBBMyBleHRlbmRzIEEsIEE0IGV4dGVuZHMgQSwgUj4oXHJcbiAgICBicmFuY2hlczogW3JlZmluZUJyYW5jaDxBLCBBMSwgUj4sIHJlZmluZUJyYW5jaDxBLCBBMiwgUj4sIHJlZmluZUJyYW5jaDxBLCBBMywgUj4sIHJlZmluZUJyYW5jaDxBLCBBNCwgUj5dLFxyXG4pID0+XHJcbiAgICBndWFyZChcclxuICAgICAgICBicmFuY2hlcyBhcyB1bmtub3duIGFzIFtcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgIF0sXHJcbiAgICApXHJcbmV4cG9ydCBjb25zdCBndWFyZDUgPSA8QSwgQTEgZXh0ZW5kcyBBLCBBMiBleHRlbmRzIEEsIEEzIGV4dGVuZHMgQSwgQTQgZXh0ZW5kcyBBLCBBNSBleHRlbmRzIEEsIFI+KFxyXG4gICAgYnJhbmNoZXM6IFtcclxuICAgICAgICByZWZpbmVCcmFuY2g8QSwgQTEsIFI+LFxyXG4gICAgICAgIHJlZmluZUJyYW5jaDxBLCBBMiwgUj4sXHJcbiAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEzLCBSPixcclxuICAgICAgICByZWZpbmVCcmFuY2g8QSwgQTQsIFI+LFxyXG4gICAgICAgIHJlZmluZUJyYW5jaDxBLCBBNSwgUj4sXHJcbiAgICBdLFxyXG4pID0+XHJcbiAgICBndWFyZChcclxuICAgICAgICBicmFuY2hlcyBhcyB1bmtub3duIGFzIFtcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgICAgIHJlZmluZUJyYW5jaDxBLCBBLCBSPixcclxuICAgICAgICAgICAgcmVmaW5lQnJhbmNoPEEsIEEsIFI+LFxyXG4gICAgICAgICAgICByZWZpbmVCcmFuY2g8QSwgQSwgUj4sXHJcbiAgICAgICAgXSxcclxuICAgIClcclxuXHJcbmV4cG9ydCBjb25zdCBvYmpDb25jYXQyID0gPEExLCBBMj4oKSA9PiBnZXRVbmlvblNlbWlncm91cChmaXJzdDxhbnk+KCkpLmNvbmNhdCBhcyAoeDogQTEsIHk6IEEyKSA9PiBBMSAmIEEyXHJcbmV4cG9ydCBjb25zdCBvYmpDb25jYXQgPSA8QSw+KCkgPT4gYS5yZWR1Y2Uoe30gYXMgQSwgb2JqQ29uY2F0MjxBLCBBPigpKVxyXG5cclxudHlwZSBhc3luYyA9IHtcclxuICAgIDxBLCBCPihmOiAoYTogQSkgPT4gUHJvbWlzZTxCPik6IChmYTogUHJvbWlzZTxBPikgPT4gUHJvbWlzZTxCPlxyXG4gICAgPEEsIEI+KGY6IChhOiBBKSA9PiBCKTogKGZhOiBQcm9taXNlPEE+KSA9PiBQcm9taXNlPEI+XHJcbn1cclxuZXhwb3J0IGNvbnN0IHBNY2hhaW46IGFzeW5jID1cclxuICAgIDxBLCBSPihmOiAoYTogQSkgPT4gUikgPT5cclxuICAgIGFzeW5jIChmYTogQSkgPT5cclxuICAgICAgICBmKGF3YWl0IGZhKVxyXG5cclxuZXhwb3J0IGNvbnN0IGlzID1cclxuICAgIDxBLD4oYzoga2V5b2YgQSkgPT5cclxuICAgIDxCIGV4dGVuZHMgQT4oYTogQVt0eXBlb2YgY10pID0+XHJcbiAgICAoZmllbGQ6IEEpOiBmaWVsZCBpcyBCID0+XHJcbiAgICAgICAgZmllbGRbY10gPT09IGFcclxuXHJcbmV4cG9ydCBjb25zdCB0YXBBbnkgPVxyXG4gICAgPEEsPihmOiAoYTogQSkgPT4gdm9pZCkgPT5cclxuICAgIChmYTogQSkgPT4ge1xyXG4gICAgICAgIGYoZmEpXHJcbiAgICAgICAgcmV0dXJuIGZhXHJcbiAgICB9XHJcblxyXG5leHBvcnQgY29uc3QgY2h1bmNraWZ5ID1cclxuICAgIChuOiBudW1iZXIpID0+XHJcbiAgICA8QSwgUj4oZzogKGE6IEFbXSkgPT4gUHJvbWlzZTxSW10+KSA9PlxyXG4gICAgICAgIGYoYS5jaHVua3NPZihuKTxBPiwgYS5tYXAoZyksIHBzID0+IFByb21pc2UuYWxsKHBzKSwgcE1jaGFpbihhLmZsYXR0ZW4pKVxyXG5cclxuZXhwb3J0IGNvbnN0IHdpdGhQcm9ncmVzcyA9XHJcbiAgICA8RiBleHRlbmRzIChmOiAoLi4uYTogYW55KSA9PiBhbnkpID0+IChmYTogYW55KSA9PiBhbnk+KG1hcDogRikgPT5cclxuICAgIChmOiBQYXJhbWV0ZXJzPEY+WzBdKSA9PlxyXG4gICAgKGZhOiBQYXJhbWV0ZXJzPFJldHVyblR5cGU8Rj4+WzBdKTogUmV0dXJuVHlwZTxSZXR1cm5UeXBlPEY+PiA9PiB7XHJcbiAgICAgICAgbGV0IGkgPSAwXHJcbiAgICAgICAgcmV0dXJuIG1hcChhc3luYyAoLi4uYTogUGFyYW1ldGVyczxQYXJhbWV0ZXJzPEY+WzBdPikgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IGF3YWl0IGYoLi4uYSlcclxuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKChpKysgLyBPYmplY3QudmFsdWVzKGZhKS5sZW5ndGgpICogMTAwKVxyXG4gICAgICAgICAgICBTcGljZXRpZnkuc2hvd05vdGlmaWNhdGlvbihgTG9hZGluZzogJHtwcm9ncmVzc30lYCwgZmFsc2UsIDIwMClcclxuICAgICAgICAgICAgcmV0dXJuIHJldFxyXG4gICAgICAgIH0pKGZhKVxyXG4gICAgfVxyXG5cclxuZXhwb3J0IGNvbnN0IG1lbW9pemUyID0gPEEgZXh0ZW5kcyBhbnlbXSwgUj4oZm46ICguLi5hcmdzOiBBKSA9PiBSKSA9PlxyXG4gICAgcChmbiwgdHVwbGVkLCBtZW1vaXplPEE+KGVxLmNvbnRyYW1hcChKU09OLnN0cmluZ2lmeSkoc3RyaW5nLkVxKSksIHVudHVwbGVkKVxyXG4iLAogICIvLyBleHBvcnQgaW50ZXJmYWNlIFNwb3RpZnlJRFxyXG4vLyAgICAgZXh0ZW5kcyBOZXd0eXBlPHsgcmVhZG9ubHkgU3BvdGlmeUlEOiB1bmlxdWUgc3ltYm9sIH0sIHN0cmluZz4ge31cclxuLy8gZXhwb3J0IGludGVyZmFjZSBTcG90aWZ5VVJJXHJcbi8vICAgICBleHRlbmRzIE5ld3R5cGU8eyByZWFkb25seSBTcG90aWZ5VVJJOiB1bmlxdWUgc3ltYm9sIH0sIHN0cmluZz4ge31cclxuXHJcbmltcG9ydCB7IGFycmF5IGFzIGEgfSBmcm9tIFwiZnAtdHNcIlxyXG5pbXBvcnQgeyBjb25zdGFudCwgcGlwZSBhcyBwIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCJcclxuXHJcbmV4cG9ydCBjb25zdCBtdXN0TG9hZEZvckFwaSA9IFtcIkNvc21vc0FzeW5jXCIsIFwiR3JhcGhRTFwiLCBcIlBsYXRmb3JtXCJdXHJcbmV4cG9ydCBjb25zdCBtdXN0TG9hZEZvclV0aWwgPSBbXCJVUklcIl1cclxuZXhwb3J0IGNvbnN0IG11c3RMb2FkRm9yU2V0dGluZ3MgPSBbXCJSZWFjdFwiLCBcIlJlYWN0RE9NXCJdXHJcblxyXG5leHBvcnQgdHlwZSBTcG90aWZ5SUQgPSBzdHJpbmdcclxuZXhwb3J0IHR5cGUgU3BvdGlmeVVSSSA9IHN0cmluZ1xyXG5cclxuZXhwb3J0IHR5cGUgU3BvdGlmeUxvYyA9IHtcclxuICAgIGJlZm9yZT86IFwic3RhcnRcIiB8IHsgdXJpOiBTcG90aWZ5VVJJIH0gfCB7IHVpZDogc3RyaW5nIH1cclxuICAgIGFmdGVyPzogXCJlbmRcIiB8IHsgdXJpOiBTcG90aWZ5VVJJIH0gfCB7IHVpZDogc3RyaW5nIH1cclxufVxyXG5cclxuZXhwb3J0IG5hbWVzcGFjZSBTcG90aWZ5TG9jIHtcclxuICAgIGV4cG9ydCBuYW1lc3BhY2UgYmVmb3JlIHtcclxuICAgICAgICBleHBvcnQgY29uc3Qgc3RhcnQgPSBjb25zdGFudCh7IGJlZm9yZTogXCJzdGFydFwiIH0gYXMgU3BvdGlmeUxvYylcclxuXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IGZyb21VcmkgPSAodXJpOiBTcG90aWZ5VVJJKSA9PiAoe1xyXG4gICAgICAgICAgICBiZWZvcmU6IHsgdXJpIH0sXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IGZyb21VaWQgPSAodWlkOiBzdHJpbmcpID0+ICh7XHJcbiAgICAgICAgICAgIGJlZm9yZTogeyB1aWQgfSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBuYW1lc3BhY2UgYWZ0ZXIge1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBlbmQgPSBjb25zdGFudCh7IGFmdGVyOiBcImVuZFwiIH0gYXMgU3BvdGlmeUxvYylcclxuXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IGZyb21VcmkgPSAodXJpOiBTcG90aWZ5VVJJKSA9PiAoe1xyXG4gICAgICAgICAgICBiZWZvcmU6IHsgdXJpIH0sXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IGZyb21VaWQgPSAodWlkOiBzdHJpbmcpID0+ICh7XHJcbiAgICAgICAgICAgIGJlZm9yZTogeyB1aWQgfSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZXNjYXBlUmVnZXggPSAoc3RyOiBzdHJpbmcpID0+IHN0ci5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgYFxcXFwkJmApXHJcblxyXG5leHBvcnQgY29uc3QgdGl0bGVDYXNlID0gKHN0cjogc3RyaW5nKSA9PiBzdHIucmVwbGFjZSgvXFxiXFx3L2csIGwgPT4gbC50b1VwcGVyQ2FzZSgpKVxyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZVN0ciA9IChzdHI6IHN0cmluZykgPT5cclxuICAgIHN0clxyXG4gICAgICAgIC5ub3JtYWxpemUoXCJORktEXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xcKC4qXFwpL2csIFwiXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xcWy4qXFxdL2csIFwiXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoLy1fLC9nLCBcIiBcIilcclxuICAgICAgICAucmVwbGFjZSgvW15hLXpBLVowLTkgXS9nLCBcIlwiKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxyXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgLnRyaW0oKVxyXG5cclxuLy8hIERvZXMgbG9jYXRpb24gYWN0dWFsbHkgcG9pbnQgdG8gZG9jdW1lbnQuYm9keT9cclxuZXhwb3J0IGNvbnN0IHdhaXRGb3JFbGVtZW50ID0gPEUgZXh0ZW5kcyBFbGVtZW50PihcclxuICAgIHNlbGVjdG9yOiBzdHJpbmcsXHJcbiAgICB0aW1lb3V0ID0gMTAwMCxcclxuICAgIGxvY2F0aW9uID0gZG9jdW1lbnQuYm9keSxcclxuICAgIG5vdEVsPzogRSxcclxuKSA9PlxyXG4gICAgbmV3IFByb21pc2UoKHJlc29sdmU6ICh2YWx1ZTogRWxlbWVudCB8IG51bGwpID0+IHZvaWQpID0+IHtcclxuICAgICAgICBjb25zdCByZXMgPSAodjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKVxyXG4gICAgICAgICAgICByZXNvbHZlKHYpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEU+KHNlbGVjdG9yKVxyXG4gICAgICAgICAgICBpZiAoZWwgJiYgKCFub3RFbCB8fCBlbCAhPT0gbm90RWwpKSByZXR1cm4gcmVzKGVsKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUobG9jYXRpb24sIHtcclxuICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICAgICAgICBzdWJ0cmVlOiB0cnVlLFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmICh0aW1lb3V0KSBzZXRUaW1lb3V0KCgpID0+IHJlcyhudWxsKSwgdGltZW91dClcclxuICAgIH0pXHJcblxyXG5leHBvcnQgY29uc3QgdHJhcEVsZW1lbnQgPSA8RSBleHRlbmRzIEVsZW1lbnQ+KFxyXG4gICAgc2VsZWN0b3I6IHN0cmluZyxcclxuICAgIGNhbGxiYWNrOiAoZWw6IEUgfCBudWxsLCBsYXN0RWw6IEUgfCBudWxsKSA9PiB2b2lkLFxyXG4gICAgbG9jYXRpb24gPSBkb2N1bWVudC5ib2R5LFxyXG4pID0+IHtcclxuICAgIGxldCBsYXN0RWw6IEUgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxFPihzZWxlY3RvcilcclxuICAgICAgICBpZiAoZWwgIT09IGxhc3RFbCkgY2FsbGJhY2soZWwsIGxhc3RFbClcclxuICAgICAgICBsYXN0RWwgPSBlbFxyXG4gICAgfSlcclxuXHJcbiAgICBvYnNlcnZlci5vYnNlcnZlKGxvY2F0aW9uLCB7XHJcbiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICAgIHN1YnRyZWU6IHRydWUsXHJcbiAgICB9KVxyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgc2xlZXAgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSlcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRSZWFjdFByb3BzID0gKGVsZW1lbnQ6IEVsZW1lbnQpID0+XHJcbiAgICBlbGVtZW50W09iamVjdC5rZXlzKGVsZW1lbnQpLmZpbmQoayA9PiBrLnN0YXJ0c1dpdGgoXCJfX3JlYWN0UHJvcHMkXCIpKSBhcyBrZXlvZiB0eXBlb2YgZWxlbWVudF1cclxuXHJcbmV4cG9ydCBjb25zdCBpc0xpa2VkID0gKHVyaXM6IFNwb3RpZnlVUklbXSkgPT4gU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuY29udGFpbnMoLi4udXJpcykgYXMgUHJvbWlzZTxib29sZWFuW10+XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0TGlrZWQgPSAodXJpczogU3BvdGlmeVVSSVtdLCBsaWtlZDogYm9vbGVhbikgPT5cclxuICAgIFNwaWNldGlmeS5QbGF0Zm9ybS5MaWJyYXJ5QVBJW2xpa2VkID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJdKC4uLnVyaXMpXHJcblxyXG5leHBvcnQgY29uc3QgdG9nZ2xlTGlrZWQgPSBhc3luYyAodXJpczogU3BvdGlmeVVSSVtdKSA9PiB7XHJcbiAgICBjb25zdCBsaWtlZCA9IGF3YWl0IGlzTGlrZWQodXJpcylcclxuXHJcbiAgICByZXR1cm4gYXdhaXQgcChcclxuICAgICAgICB1cmlzLFxyXG4gICAgICAgIGEucmVkdWNlV2l0aEluZGV4KFxyXG4gICAgICAgICAgICBbW10gYXMgU3BvdGlmeVVSSVtdLCBbXSBhcyBTcG90aWZ5VVJJW11dIGFzIGNvbnN0LFxyXG4gICAgICAgICAgICAoaSwgYWNjLCB1cmkpID0+IChhY2NbTnVtYmVyKGxpa2VkW2ldKV0ucHVzaCh1cmkpLCBhY2MpLFxyXG4gICAgICAgICksXHJcbiAgICAgICAgKFt0b0FkZCwgdG9SZW1dKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBzID0gW11cclxuICAgICAgICAgICAgaWYgKHRvQWRkLmxlbmd0aCkgcHMucHVzaChzZXRMaWtlZCh0b0FkZCwgdHJ1ZSkpXHJcbiAgICAgICAgICAgIGlmICh0b1JlbS5sZW5ndGgpIHBzLnB1c2goc2V0TGlrZWQodG9SZW0sIGZhbHNlKSlcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHBzKVxyXG4gICAgICAgIH0sXHJcbiAgICApXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVRdWV1ZUl0ZW0gPSAocXVldWVkOiBib29sZWFuKSA9PiAodXJpOiBTcG90aWZ5VVJJKSA9PiAoe1xyXG4gICAgY29udGV4dFRyYWNrOiB7XHJcbiAgICAgICAgdXJpLFxyXG4gICAgICAgIHVpZDogXCJcIixcclxuICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICBpc19xdWV1ZWQ6IHF1ZXVlZC50b1N0cmluZygpLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgcmVtb3ZlZDogW10sXHJcbiAgICBibG9ja2VkOiBbXSxcclxuICAgIHByb3ZpZGVyOiBxdWV1ZWQgPyBcInF1ZXVlXCIgOiBcImNvbnRleHRcIixcclxufSlcclxuXHJcbmV4cG9ydCBjb25zdCBzZXRRdWV1ZSA9IGFzeW5jIChuZXh0VHJhY2tzOiBBcnJheTxSZXR1cm5UeXBlPFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZVF1ZXVlSXRlbT4+PikgPT4ge1xyXG4gICAgY29uc3QgeyBfcXVldWUsIF9jbGllbnQgfSA9IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5ZXJBUEkuX3F1ZXVlXHJcbiAgICBjb25zdCB7IHByZXZUcmFja3MsIHF1ZXVlUmV2aXNpb24gfSA9IF9xdWV1ZVxyXG5cclxuICAgIHJldHVybiBfY2xpZW50LnNldFF1ZXVlKHtcclxuICAgICAgICBuZXh0VHJhY2tzLFxyXG4gICAgICAgIHByZXZUcmFja3MsXHJcbiAgICAgICAgcXVldWVSZXZpc2lvbixcclxuICAgIH0pIGFzIFByb21pc2U8eyBlcnJvcjogbnVtYmVyOyByZWFzb25zOiBzdHJpbmcgfT5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldFBsYXlpbmdDb250ZXh0ID0gKHVyaTogU3BvdGlmeVVSSSkgPT4ge1xyXG4gICAgY29uc3QgeyBzZXNzaW9uSWQgfSA9IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5ZXJBUEkuZ2V0U3RhdGUoKVxyXG4gICAgcmV0dXJuIFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5ZXJBUEkudXBkYXRlQ29udGV4dChzZXNzaW9uSWQsIHsgdXJpLCB1cmw6IFwiY29udGV4dDovL1wiICsgdXJpIH0pIGFzIFByb21pc2U8dW5kZWZpbmVkPlxyXG59XHJcbiIsCiAgIi8vIGV4cG9ydCBpbnRlcmZhY2UgU3BvdGlmeUlEXHJcbi8vICAgICBleHRlbmRzIE5ld3R5cGU8eyByZWFkb25seSBTcG90aWZ5SUQ6IHVuaXF1ZSBzeW1ib2wgfSwgc3RyaW5nPiB7fVxyXG4vLyBleHBvcnQgaW50ZXJmYWNlIFNwb3RpZnlVUklcclxuLy8gICAgIGV4dGVuZHMgTmV3dHlwZTx7IHJlYWRvbmx5IFNwb3RpZnlVUkk6IHVuaXF1ZSBzeW1ib2wgfSwgc3RyaW5nPiB7fVxyXG5cclxuaW1wb3J0IHsgYXJyYXkgYXMgYSB9IGZyb20gXCJmcC10c1wiXHJcbmltcG9ydCB7IGNvbnN0YW50LCBwaXBlIGFzIHAgfSBmcm9tIFwiZnAtdHMvZnVuY3Rpb25cIlxyXG5cclxuZXhwb3J0IGNvbnN0IG11c3RMb2FkRm9yQXBpID0gW1wiQ29zbW9zQXN5bmNcIiwgXCJHcmFwaFFMXCIsIFwiUGxhdGZvcm1cIl1cclxuZXhwb3J0IGNvbnN0IG11c3RMb2FkRm9yVXRpbCA9IFtcIlVSSVwiXVxyXG5leHBvcnQgY29uc3QgbXVzdExvYWRGb3JTZXR0aW5ncyA9IFtcIlJlYWN0XCIsIFwiUmVhY3RET01cIl1cclxuXHJcbmV4cG9ydCB0eXBlIFNwb3RpZnlJRCA9IHN0cmluZ1xyXG5leHBvcnQgdHlwZSBTcG90aWZ5VVJJID0gc3RyaW5nXHJcblxyXG5leHBvcnQgdHlwZSBTcG90aWZ5TG9jID0ge1xyXG4gICAgYmVmb3JlPzogXCJzdGFydFwiIHwgeyB1cmk6IFNwb3RpZnlVUkkgfSB8IHsgdWlkOiBzdHJpbmcgfVxyXG4gICAgYWZ0ZXI/OiBcImVuZFwiIHwgeyB1cmk6IFNwb3RpZnlVUkkgfSB8IHsgdWlkOiBzdHJpbmcgfVxyXG59XHJcblxyXG5leHBvcnQgbmFtZXNwYWNlIFNwb3RpZnlMb2Mge1xyXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBiZWZvcmUge1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBzdGFydCA9IGNvbnN0YW50KHsgYmVmb3JlOiBcInN0YXJ0XCIgfSBhcyBTcG90aWZ5TG9jKVxyXG5cclxuICAgICAgICBleHBvcnQgY29uc3QgZnJvbVVyaSA9ICh1cmk6IFNwb3RpZnlVUkkpID0+ICh7XHJcbiAgICAgICAgICAgIGJlZm9yZTogeyB1cmkgfSxcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBleHBvcnQgY29uc3QgZnJvbVVpZCA9ICh1aWQ6IHN0cmluZykgPT4gKHtcclxuICAgICAgICAgICAgYmVmb3JlOiB7IHVpZCB9LFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBhZnRlciB7XHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IGVuZCA9IGNvbnN0YW50KHsgYWZ0ZXI6IFwiZW5kXCIgfSBhcyBTcG90aWZ5TG9jKVxyXG5cclxuICAgICAgICBleHBvcnQgY29uc3QgZnJvbVVyaSA9ICh1cmk6IFNwb3RpZnlVUkkpID0+ICh7XHJcbiAgICAgICAgICAgIGJlZm9yZTogeyB1cmkgfSxcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBleHBvcnQgY29uc3QgZnJvbVVpZCA9ICh1aWQ6IHN0cmluZykgPT4gKHtcclxuICAgICAgICAgICAgYmVmb3JlOiB7IHVpZCB9LFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBlc2NhcGVSZWdleCA9IChzdHI6IHN0cmluZykgPT4gc3RyLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBgXFxcXCQmYClcclxuXHJcbmV4cG9ydCBjb25zdCB0aXRsZUNhc2UgPSAoc3RyOiBzdHJpbmcpID0+IHN0ci5yZXBsYWNlKC9cXGJcXHcvZywgbCA9PiBsLnRvVXBwZXJDYXNlKCkpXHJcblxyXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplU3RyID0gKHN0cjogc3RyaW5nKSA9PlxyXG4gICAgc3RyXHJcbiAgICAgICAgLm5vcm1hbGl6ZShcIk5GS0RcIilcclxuICAgICAgICAucmVwbGFjZSgvXFwoLipcXCkvZywgXCJcIilcclxuICAgICAgICAucmVwbGFjZSgvXFxbLipcXF0vZywgXCJcIilcclxuICAgICAgICAucmVwbGFjZSgvLV8sL2csIFwiIFwiKVxyXG4gICAgICAgIC5yZXBsYWNlKC9bXmEtekEtWjAtOSBdL2csIFwiXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXHJcbiAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAudHJpbSgpXHJcblxyXG4vLyEgRG9lcyBsb2NhdGlvbiBhY3R1YWxseSBwb2ludCB0byBkb2N1bWVudC5ib2R5P1xyXG5leHBvcnQgY29uc3Qgd2FpdEZvckVsZW1lbnQgPSA8RSBleHRlbmRzIEVsZW1lbnQ+KFxyXG4gICAgc2VsZWN0b3I6IHN0cmluZyxcclxuICAgIHRpbWVvdXQgPSAxMDAwLFxyXG4gICAgbG9jYXRpb24gPSBkb2N1bWVudC5ib2R5LFxyXG4gICAgbm90RWw/OiBFLFxyXG4pID0+XHJcbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZTogKHZhbHVlOiBFbGVtZW50IHwgbnVsbCkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9ICh2OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpXHJcbiAgICAgICAgICAgIHJlc29sdmUodilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8RT4oc2VsZWN0b3IpXHJcbiAgICAgICAgICAgIGlmIChlbCAmJiAoIW5vdEVsIHx8IGVsICE9PSBub3RFbCkpIHJldHVybiByZXMoZWwpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShsb2NhdGlvbiwge1xyXG4gICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgICAgICAgIHN1YnRyZWU6IHRydWUsXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKHRpbWVvdXQpIHNldFRpbWVvdXQoKCkgPT4gcmVzKG51bGwpLCB0aW1lb3V0KVxyXG4gICAgfSlcclxuXHJcbmV4cG9ydCBjb25zdCB0cmFwRWxlbWVudCA9IDxFIGV4dGVuZHMgRWxlbWVudD4oXHJcbiAgICBzZWxlY3Rvcjogc3RyaW5nLFxyXG4gICAgY2FsbGJhY2s6IChlbDogRSB8IG51bGwsIGxhc3RFbDogRSB8IG51bGwpID0+IHZvaWQsXHJcbiAgICBsb2NhdGlvbiA9IGRvY3VtZW50LmJvZHksXHJcbikgPT4ge1xyXG4gICAgbGV0IGxhc3RFbDogRSB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEU+KHNlbGVjdG9yKVxyXG4gICAgICAgIGlmIChlbCAhPT0gbGFzdEVsKSBjYWxsYmFjayhlbCwgbGFzdEVsKVxyXG4gICAgICAgIGxhc3RFbCA9IGVsXHJcbiAgICB9KVxyXG5cclxuICAgIG9ic2VydmVyLm9ic2VydmUobG9jYXRpb24sIHtcclxuICAgICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgICAgc3VidHJlZTogdHJ1ZSxcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzbGVlcCA9IChtczogbnVtYmVyKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldFJlYWN0UHJvcHMgPSAoZWxlbWVudDogRWxlbWVudCkgPT5cclxuICAgIGVsZW1lbnRbT2JqZWN0LmtleXMoZWxlbWVudCkuZmluZChrID0+IGsuc3RhcnRzV2l0aChcIl9fcmVhY3RQcm9wcyRcIikpIGFzIGtleW9mIHR5cGVvZiBlbGVtZW50XVxyXG5cclxuZXhwb3J0IGNvbnN0IGlzTGlrZWQgPSAodXJpczogU3BvdGlmeVVSSVtdKSA9PiBTcGljZXRpZnkuUGxhdGZvcm0uTGlicmFyeUFQSS5jb250YWlucyguLi51cmlzKSBhcyBQcm9taXNlPGJvb2xlYW5bXT5cclxuXHJcbmV4cG9ydCBjb25zdCBzZXRMaWtlZCA9ICh1cmlzOiBTcG90aWZ5VVJJW10sIGxpa2VkOiBib29sZWFuKSA9PlxyXG4gICAgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUElbbGlrZWQgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0oLi4udXJpcylcclxuXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVMaWtlZCA9IGFzeW5jICh1cmlzOiBTcG90aWZ5VVJJW10pID0+IHtcclxuICAgIGNvbnN0IGxpa2VkID0gYXdhaXQgaXNMaWtlZCh1cmlzKVxyXG5cclxuICAgIHJldHVybiBhd2FpdCBwKFxyXG4gICAgICAgIHVyaXMsXHJcbiAgICAgICAgYS5yZWR1Y2VXaXRoSW5kZXgoXHJcbiAgICAgICAgICAgIFtbXSBhcyBTcG90aWZ5VVJJW10sIFtdIGFzIFNwb3RpZnlVUklbXV0gYXMgY29uc3QsXHJcbiAgICAgICAgICAgIChpLCBhY2MsIHVyaSkgPT4gKGFjY1tOdW1iZXIobGlrZWRbaV0pXS5wdXNoKHVyaSksIGFjYyksXHJcbiAgICAgICAgKSxcclxuICAgICAgICAoW3RvQWRkLCB0b1JlbV0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHMgPSBbXVxyXG4gICAgICAgICAgICBpZiAodG9BZGQubGVuZ3RoKSBwcy5wdXNoKHNldExpa2VkKHRvQWRkLCB0cnVlKSlcclxuICAgICAgICAgICAgaWYgKHRvUmVtLmxlbmd0aCkgcHMucHVzaChzZXRMaWtlZCh0b1JlbSwgZmFsc2UpKVxyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHMpXHJcbiAgICAgICAgfSxcclxuICAgIClcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVF1ZXVlSXRlbSA9IChxdWV1ZWQ6IGJvb2xlYW4pID0+ICh1cmk6IFNwb3RpZnlVUkkpID0+ICh7XHJcbiAgICBjb250ZXh0VHJhY2s6IHtcclxuICAgICAgICB1cmksXHJcbiAgICAgICAgdWlkOiBcIlwiLFxyXG4gICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICAgIGlzX3F1ZXVlZDogcXVldWVkLnRvU3RyaW5nKCksXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICByZW1vdmVkOiBbXSxcclxuICAgIGJsb2NrZWQ6IFtdLFxyXG4gICAgcHJvdmlkZXI6IHF1ZXVlZCA/IFwicXVldWVcIiA6IFwiY29udGV4dFwiLFxyXG59KVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldFF1ZXVlID0gYXN5bmMgKG5leHRUcmFja3M6IEFycmF5PFJldHVyblR5cGU8UmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlUXVldWVJdGVtPj4+KSA9PiB7XHJcbiAgICBjb25zdCB7IF9xdWV1ZSwgX2NsaWVudCB9ID0gU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXllckFQSS5fcXVldWVcclxuICAgIGNvbnN0IHsgcHJldlRyYWNrcywgcXVldWVSZXZpc2lvbiB9ID0gX3F1ZXVlXHJcblxyXG4gICAgcmV0dXJuIF9jbGllbnQuc2V0UXVldWUoe1xyXG4gICAgICAgIG5leHRUcmFja3MsXHJcbiAgICAgICAgcHJldlRyYWNrcyxcclxuICAgICAgICBxdWV1ZVJldmlzaW9uLFxyXG4gICAgfSkgYXMgUHJvbWlzZTx7IGVycm9yOiBudW1iZXI7IHJlYXNvbnM6IHN0cmluZyB9PlxyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0UGxheWluZ0NvbnRleHQgPSAodXJpOiBTcG90aWZ5VVJJKSA9PiB7XHJcbiAgICBjb25zdCB7IHNlc3Npb25JZCB9ID0gU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXllckFQSS5nZXRTdGF0ZSgpXHJcbiAgICByZXR1cm4gU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXllckFQSS51cGRhdGVDb250ZXh0KHNlc3Npb25JZCwgeyB1cmksIHVybDogXCJjb250ZXh0Oi8vXCIgKyB1cmkgfSkgYXMgUHJvbWlzZTx1bmRlZmluZWQ+XHJcbn1cclxuIiwKICAiLy8gZXhwb3J0IGludGVyZmFjZSBTcG90aWZ5SURcclxuLy8gICAgIGV4dGVuZHMgTmV3dHlwZTx7IHJlYWRvbmx5IFNwb3RpZnlJRDogdW5pcXVlIHN5bWJvbCB9LCBzdHJpbmc+IHt9XHJcbi8vIGV4cG9ydCBpbnRlcmZhY2UgU3BvdGlmeVVSSVxyXG4vLyAgICAgZXh0ZW5kcyBOZXd0eXBlPHsgcmVhZG9ubHkgU3BvdGlmeVVSSTogdW5pcXVlIHN5bWJvbCB9LCBzdHJpbmc+IHt9XHJcblxyXG5pbXBvcnQgeyBhcnJheSBhcyBhIH0gZnJvbSBcImZwLXRzXCJcclxuaW1wb3J0IHsgY29uc3RhbnQsIHBpcGUgYXMgcCB9IGZyb20gXCJmcC10cy9mdW5jdGlvblwiXHJcblxyXG5leHBvcnQgY29uc3QgbXVzdExvYWRGb3JBcGkgPSBbXCJDb3Ntb3NBc3luY1wiLCBcIkdyYXBoUUxcIiwgXCJQbGF0Zm9ybVwiXVxyXG5leHBvcnQgY29uc3QgbXVzdExvYWRGb3JVdGlsID0gW1wiVVJJXCJdXHJcbmV4cG9ydCBjb25zdCBtdXN0TG9hZEZvclNldHRpbmdzID0gW1wiUmVhY3RcIiwgXCJSZWFjdERPTVwiXVxyXG5cclxuZXhwb3J0IHR5cGUgU3BvdGlmeUlEID0gc3RyaW5nXHJcbmV4cG9ydCB0eXBlIFNwb3RpZnlVUkkgPSBzdHJpbmdcclxuXHJcbmV4cG9ydCB0eXBlIFNwb3RpZnlMb2MgPSB7XHJcbiAgICBiZWZvcmU/OiBcInN0YXJ0XCIgfCB7IHVyaTogU3BvdGlmeVVSSSB9IHwgeyB1aWQ6IHN0cmluZyB9XHJcbiAgICBhZnRlcj86IFwiZW5kXCIgfCB7IHVyaTogU3BvdGlmeVVSSSB9IHwgeyB1aWQ6IHN0cmluZyB9XHJcbn1cclxuXHJcbmV4cG9ydCBuYW1lc3BhY2UgU3BvdGlmeUxvYyB7XHJcbiAgICBleHBvcnQgbmFtZXNwYWNlIGJlZm9yZSB7XHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IHN0YXJ0ID0gY29uc3RhbnQoeyBiZWZvcmU6IFwic3RhcnRcIiB9IGFzIFNwb3RpZnlMb2MpXHJcblxyXG4gICAgICAgIGV4cG9ydCBjb25zdCBmcm9tVXJpID0gKHVyaTogU3BvdGlmeVVSSSkgPT4gKHtcclxuICAgICAgICAgICAgYmVmb3JlOiB7IHVyaSB9LFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGV4cG9ydCBjb25zdCBmcm9tVWlkID0gKHVpZDogc3RyaW5nKSA9PiAoe1xyXG4gICAgICAgICAgICBiZWZvcmU6IHsgdWlkIH0sXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgbmFtZXNwYWNlIGFmdGVyIHtcclxuICAgICAgICBleHBvcnQgY29uc3QgZW5kID0gY29uc3RhbnQoeyBhZnRlcjogXCJlbmRcIiB9IGFzIFNwb3RpZnlMb2MpXHJcblxyXG4gICAgICAgIGV4cG9ydCBjb25zdCBmcm9tVXJpID0gKHVyaTogU3BvdGlmeVVSSSkgPT4gKHtcclxuICAgICAgICAgICAgYmVmb3JlOiB7IHVyaSB9LFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGV4cG9ydCBjb25zdCBmcm9tVWlkID0gKHVpZDogc3RyaW5nKSA9PiAoe1xyXG4gICAgICAgICAgICBiZWZvcmU6IHsgdWlkIH0sXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGVzY2FwZVJlZ2V4ID0gKHN0cjogc3RyaW5nKSA9PiBzdHIucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIGBcXFxcJCZgKVxyXG5cclxuZXhwb3J0IGNvbnN0IHRpdGxlQ2FzZSA9IChzdHI6IHN0cmluZykgPT4gc3RyLnJlcGxhY2UoL1xcYlxcdy9nLCBsID0+IGwudG9VcHBlckNhc2UoKSlcclxuXHJcbmV4cG9ydCBjb25zdCBub3JtYWxpemVTdHIgPSAoc3RyOiBzdHJpbmcpID0+XHJcbiAgICBzdHJcclxuICAgICAgICAubm9ybWFsaXplKFwiTkZLRFwiKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXCguKlxcKS9nLCBcIlwiKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXFsuKlxcXS9nLCBcIlwiKVxyXG4gICAgICAgIC5yZXBsYWNlKC8tXywvZywgXCIgXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoL1teYS16QS1aMC05IF0vZywgXCJcIilcclxuICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcclxuICAgICAgICAudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgIC50cmltKClcclxuXHJcbi8vISBEb2VzIGxvY2F0aW9uIGFjdHVhbGx5IHBvaW50IHRvIGRvY3VtZW50LmJvZHk/XHJcbmV4cG9ydCBjb25zdCB3YWl0Rm9yRWxlbWVudCA9IDxFIGV4dGVuZHMgRWxlbWVudD4oXHJcbiAgICBzZWxlY3Rvcjogc3RyaW5nLFxyXG4gICAgdGltZW91dCA9IDEwMDAsXHJcbiAgICBsb2NhdGlvbiA9IGRvY3VtZW50LmJvZHksXHJcbiAgICBub3RFbD86IEUsXHJcbikgPT5cclxuICAgIG5ldyBQcm9taXNlKChyZXNvbHZlOiAodmFsdWU6IEVsZW1lbnQgfCBudWxsKSA9PiB2b2lkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzID0gKHY6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KClcclxuICAgICAgICAgICAgcmVzb2x2ZSh2KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxFPihzZWxlY3RvcilcclxuICAgICAgICAgICAgaWYgKGVsICYmICghbm90RWwgfHwgZWwgIT09IG5vdEVsKSkgcmV0dXJuIHJlcyhlbClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGxvY2F0aW9uLCB7XHJcbiAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgc3VidHJlZTogdHJ1ZSxcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBpZiAodGltZW91dCkgc2V0VGltZW91dCgoKSA9PiByZXMobnVsbCksIHRpbWVvdXQpXHJcbiAgICB9KVxyXG5cclxuZXhwb3J0IGNvbnN0IHRyYXBFbGVtZW50ID0gPEUgZXh0ZW5kcyBFbGVtZW50PihcclxuICAgIHNlbGVjdG9yOiBzdHJpbmcsXHJcbiAgICBjYWxsYmFjazogKGVsOiBFIHwgbnVsbCwgbGFzdEVsOiBFIHwgbnVsbCkgPT4gdm9pZCxcclxuICAgIGxvY2F0aW9uID0gZG9jdW1lbnQuYm9keSxcclxuKSA9PiB7XHJcbiAgICBsZXQgbGFzdEVsOiBFIHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcclxuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8RT4oc2VsZWN0b3IpXHJcbiAgICAgICAgaWYgKGVsICE9PSBsYXN0RWwpIGNhbGxiYWNrKGVsLCBsYXN0RWwpXHJcbiAgICAgICAgbGFzdEVsID0gZWxcclxuICAgIH0pXHJcblxyXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShsb2NhdGlvbiwge1xyXG4gICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgICBzdWJ0cmVlOiB0cnVlLFxyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNsZWVwID0gKG1zOiBudW1iZXIpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpXHJcblxyXG5leHBvcnQgY29uc3QgZ2V0UmVhY3RQcm9wcyA9IChlbGVtZW50OiBFbGVtZW50KSA9PlxyXG4gICAgZWxlbWVudFtPYmplY3Qua2V5cyhlbGVtZW50KS5maW5kKGsgPT4gay5zdGFydHNXaXRoKFwiX19yZWFjdFByb3BzJFwiKSkgYXMga2V5b2YgdHlwZW9mIGVsZW1lbnRdXHJcblxyXG5leHBvcnQgY29uc3QgaXNMaWtlZCA9ICh1cmlzOiBTcG90aWZ5VVJJW10pID0+IFNwaWNldGlmeS5QbGF0Zm9ybS5MaWJyYXJ5QVBJLmNvbnRhaW5zKC4uLnVyaXMpIGFzIFByb21pc2U8Ym9vbGVhbltdPlxyXG5cclxuZXhwb3J0IGNvbnN0IHNldExpa2VkID0gKHVyaXM6IFNwb3RpZnlVUklbXSwgbGlrZWQ6IGJvb2xlYW4pID0+XHJcbiAgICBTcGljZXRpZnkuUGxhdGZvcm0uTGlicmFyeUFQSVtsaWtlZCA/IFwiYWRkXCIgOiBcInJlbW92ZVwiXSguLi51cmlzKVxyXG5cclxuZXhwb3J0IGNvbnN0IHRvZ2dsZUxpa2VkID0gYXN5bmMgKHVyaXM6IFNwb3RpZnlVUklbXSkgPT4ge1xyXG4gICAgY29uc3QgbGlrZWQgPSBhd2FpdCBpc0xpa2VkKHVyaXMpXHJcblxyXG4gICAgcmV0dXJuIGF3YWl0IHAoXHJcbiAgICAgICAgdXJpcyxcclxuICAgICAgICBhLnJlZHVjZVdpdGhJbmRleChcclxuICAgICAgICAgICAgW1tdIGFzIFNwb3RpZnlVUklbXSwgW10gYXMgU3BvdGlmeVVSSVtdXSBhcyBjb25zdCxcclxuICAgICAgICAgICAgKGksIGFjYywgdXJpKSA9PiAoYWNjW051bWJlcihsaWtlZFtpXSldLnB1c2godXJpKSwgYWNjKSxcclxuICAgICAgICApLFxyXG4gICAgICAgIChbdG9BZGQsIHRvUmVtXSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcyA9IFtdXHJcbiAgICAgICAgICAgIGlmICh0b0FkZC5sZW5ndGgpIHBzLnB1c2goc2V0TGlrZWQodG9BZGQsIHRydWUpKVxyXG4gICAgICAgICAgICBpZiAodG9SZW0ubGVuZ3RoKSBwcy5wdXNoKHNldExpa2VkKHRvUmVtLCBmYWxzZSkpXHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcylcclxuICAgICAgICB9LFxyXG4gICAgKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUXVldWVJdGVtID0gKHF1ZXVlZDogYm9vbGVhbikgPT4gKHVyaTogU3BvdGlmeVVSSSkgPT4gKHtcclxuICAgIGNvbnRleHRUcmFjazoge1xyXG4gICAgICAgIHVyaSxcclxuICAgICAgICB1aWQ6IFwiXCIsXHJcbiAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgaXNfcXVldWVkOiBxdWV1ZWQudG9TdHJpbmcoKSxcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIHJlbW92ZWQ6IFtdLFxyXG4gICAgYmxvY2tlZDogW10sXHJcbiAgICBwcm92aWRlcjogcXVldWVkID8gXCJxdWV1ZVwiIDogXCJjb250ZXh0XCIsXHJcbn0pXHJcblxyXG5leHBvcnQgY29uc3Qgc2V0UXVldWUgPSBhc3luYyAobmV4dFRyYWNrczogQXJyYXk8UmV0dXJuVHlwZTxSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVRdWV1ZUl0ZW0+Pj4pID0+IHtcclxuICAgIGNvbnN0IHsgX3F1ZXVlLCBfY2xpZW50IH0gPSBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWVyQVBJLl9xdWV1ZVxyXG4gICAgY29uc3QgeyBwcmV2VHJhY2tzLCBxdWV1ZVJldmlzaW9uIH0gPSBfcXVldWVcclxuXHJcbiAgICByZXR1cm4gX2NsaWVudC5zZXRRdWV1ZSh7XHJcbiAgICAgICAgbmV4dFRyYWNrcyxcclxuICAgICAgICBwcmV2VHJhY2tzLFxyXG4gICAgICAgIHF1ZXVlUmV2aXNpb24sXHJcbiAgICB9KSBhcyBQcm9taXNlPHsgZXJyb3I6IG51bWJlcjsgcmVhc29uczogc3RyaW5nIH0+XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzZXRQbGF5aW5nQ29udGV4dCA9ICh1cmk6IFNwb3RpZnlVUkkpID0+IHtcclxuICAgIGNvbnN0IHsgc2Vzc2lvbklkIH0gPSBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWVyQVBJLmdldFN0YXRlKClcclxuICAgIHJldHVybiBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWVyQVBJLnVwZGF0ZUNvbnRleHQoc2Vzc2lvbklkLCB7IHVyaSwgdXJsOiBcImNvbnRleHQ6Ly9cIiArIHVyaSB9KSBhcyBQcm9taXNlPHVuZGVmaW5lZD5cclxufVxyXG4iLAogICIvLyBleHBvcnQgaW50ZXJmYWNlIFNwb3RpZnlJRFxyXG4vLyAgICAgZXh0ZW5kcyBOZXd0eXBlPHsgcmVhZG9ubHkgU3BvdGlmeUlEOiB1bmlxdWUgc3ltYm9sIH0sIHN0cmluZz4ge31cclxuLy8gZXhwb3J0IGludGVyZmFjZSBTcG90aWZ5VVJJXHJcbi8vICAgICBleHRlbmRzIE5ld3R5cGU8eyByZWFkb25seSBTcG90aWZ5VVJJOiB1bmlxdWUgc3ltYm9sIH0sIHN0cmluZz4ge31cclxuXHJcbmltcG9ydCB7IGFycmF5IGFzIGEgfSBmcm9tIFwiZnAtdHNcIlxyXG5pbXBvcnQgeyBjb25zdGFudCwgcGlwZSBhcyBwIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCJcclxuXHJcbmV4cG9ydCBjb25zdCBtdXN0TG9hZEZvckFwaSA9IFtcIkNvc21vc0FzeW5jXCIsIFwiR3JhcGhRTFwiLCBcIlBsYXRmb3JtXCJdXHJcbmV4cG9ydCBjb25zdCBtdXN0TG9hZEZvclV0aWwgPSBbXCJVUklcIl1cclxuZXhwb3J0IGNvbnN0IG11c3RMb2FkRm9yU2V0dGluZ3MgPSBbXCJSZWFjdFwiLCBcIlJlYWN0RE9NXCJdXHJcblxyXG5leHBvcnQgdHlwZSBTcG90aWZ5SUQgPSBzdHJpbmdcclxuZXhwb3J0IHR5cGUgU3BvdGlmeVVSSSA9IHN0cmluZ1xyXG5cclxuZXhwb3J0IHR5cGUgU3BvdGlmeUxvYyA9IHtcclxuICAgIGJlZm9yZT86IFwic3RhcnRcIiB8IHsgdXJpOiBTcG90aWZ5VVJJIH0gfCB7IHVpZDogc3RyaW5nIH1cclxuICAgIGFmdGVyPzogXCJlbmRcIiB8IHsgdXJpOiBTcG90aWZ5VVJJIH0gfCB7IHVpZDogc3RyaW5nIH1cclxufVxyXG5cclxuZXhwb3J0IG5hbWVzcGFjZSBTcG90aWZ5TG9jIHtcclxuICAgIGV4cG9ydCBuYW1lc3BhY2UgYmVmb3JlIHtcclxuICAgICAgICBleHBvcnQgY29uc3Qgc3RhcnQgPSBjb25zdGFudCh7IGJlZm9yZTogXCJzdGFydFwiIH0gYXMgU3BvdGlmeUxvYylcclxuXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IGZyb21VcmkgPSAodXJpOiBTcG90aWZ5VVJJKSA9PiAoe1xyXG4gICAgICAgICAgICBiZWZvcmU6IHsgdXJpIH0sXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IGZyb21VaWQgPSAodWlkOiBzdHJpbmcpID0+ICh7XHJcbiAgICAgICAgICAgIGJlZm9yZTogeyB1aWQgfSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBuYW1lc3BhY2UgYWZ0ZXIge1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBlbmQgPSBjb25zdGFudCh7IGFmdGVyOiBcImVuZFwiIH0gYXMgU3BvdGlmeUxvYylcclxuXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IGZyb21VcmkgPSAodXJpOiBTcG90aWZ5VVJJKSA9PiAoe1xyXG4gICAgICAgICAgICBiZWZvcmU6IHsgdXJpIH0sXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IGZyb21VaWQgPSAodWlkOiBzdHJpbmcpID0+ICh7XHJcbiAgICAgICAgICAgIGJlZm9yZTogeyB1aWQgfSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZXNjYXBlUmVnZXggPSAoc3RyOiBzdHJpbmcpID0+IHN0ci5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgYFxcXFwkJmApXHJcblxyXG5leHBvcnQgY29uc3QgdGl0bGVDYXNlID0gKHN0cjogc3RyaW5nKSA9PiBzdHIucmVwbGFjZSgvXFxiXFx3L2csIGwgPT4gbC50b1VwcGVyQ2FzZSgpKVxyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZVN0ciA9IChzdHI6IHN0cmluZykgPT5cclxuICAgIHN0clxyXG4gICAgICAgIC5ub3JtYWxpemUoXCJORktEXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xcKC4qXFwpL2csIFwiXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xcWy4qXFxdL2csIFwiXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoLy1fLC9nLCBcIiBcIilcclxuICAgICAgICAucmVwbGFjZSgvW15hLXpBLVowLTkgXS9nLCBcIlwiKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxyXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgLnRyaW0oKVxyXG5cclxuLy8hIERvZXMgbG9jYXRpb24gYWN0dWFsbHkgcG9pbnQgdG8gZG9jdW1lbnQuYm9keT9cclxuZXhwb3J0IGNvbnN0IHdhaXRGb3JFbGVtZW50ID0gPEUgZXh0ZW5kcyBFbGVtZW50PihcclxuICAgIHNlbGVjdG9yOiBzdHJpbmcsXHJcbiAgICB0aW1lb3V0ID0gMTAwMCxcclxuICAgIGxvY2F0aW9uID0gZG9jdW1lbnQuYm9keSxcclxuICAgIG5vdEVsPzogRSxcclxuKSA9PlxyXG4gICAgbmV3IFByb21pc2UoKHJlc29sdmU6ICh2YWx1ZTogRWxlbWVudCB8IG51bGwpID0+IHZvaWQpID0+IHtcclxuICAgICAgICBjb25zdCByZXMgPSAodjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKVxyXG4gICAgICAgICAgICByZXNvbHZlKHYpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEU+KHNlbGVjdG9yKVxyXG4gICAgICAgICAgICBpZiAoZWwgJiYgKCFub3RFbCB8fCBlbCAhPT0gbm90RWwpKSByZXR1cm4gcmVzKGVsKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUobG9jYXRpb24sIHtcclxuICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICAgICAgICBzdWJ0cmVlOiB0cnVlLFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmICh0aW1lb3V0KSBzZXRUaW1lb3V0KCgpID0+IHJlcyhudWxsKSwgdGltZW91dClcclxuICAgIH0pXHJcblxyXG5leHBvcnQgY29uc3QgdHJhcEVsZW1lbnQgPSA8RSBleHRlbmRzIEVsZW1lbnQ+KFxyXG4gICAgc2VsZWN0b3I6IHN0cmluZyxcclxuICAgIGNhbGxiYWNrOiAoZWw6IEUgfCBudWxsLCBsYXN0RWw6IEUgfCBudWxsKSA9PiB2b2lkLFxyXG4gICAgbG9jYXRpb24gPSBkb2N1bWVudC5ib2R5LFxyXG4pID0+IHtcclxuICAgIGxldCBsYXN0RWw6IEUgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxFPihzZWxlY3RvcilcclxuICAgICAgICBpZiAoZWwgIT09IGxhc3RFbCkgY2FsbGJhY2soZWwsIGxhc3RFbClcclxuICAgICAgICBsYXN0RWwgPSBlbFxyXG4gICAgfSlcclxuXHJcbiAgICBvYnNlcnZlci5vYnNlcnZlKGxvY2F0aW9uLCB7XHJcbiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICAgIHN1YnRyZWU6IHRydWUsXHJcbiAgICB9KVxyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgc2xlZXAgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSlcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRSZWFjdFByb3BzID0gKGVsZW1lbnQ6IEVsZW1lbnQpID0+XHJcbiAgICBlbGVtZW50W09iamVjdC5rZXlzKGVsZW1lbnQpLmZpbmQoayA9PiBrLnN0YXJ0c1dpdGgoXCJfX3JlYWN0UHJvcHMkXCIpKSBhcyBrZXlvZiB0eXBlb2YgZWxlbWVudF1cclxuXHJcbmV4cG9ydCBjb25zdCBpc0xpa2VkID0gKHVyaXM6IFNwb3RpZnlVUklbXSkgPT4gU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuY29udGFpbnMoLi4udXJpcykgYXMgUHJvbWlzZTxib29sZWFuW10+XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0TGlrZWQgPSAodXJpczogU3BvdGlmeVVSSVtdLCBsaWtlZDogYm9vbGVhbikgPT5cclxuICAgIFNwaWNldGlmeS5QbGF0Zm9ybS5MaWJyYXJ5QVBJW2xpa2VkID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJdKC4uLnVyaXMpXHJcblxyXG5leHBvcnQgY29uc3QgdG9nZ2xlTGlrZWQgPSBhc3luYyAodXJpczogU3BvdGlmeVVSSVtdKSA9PiB7XHJcbiAgICBjb25zdCBsaWtlZCA9IGF3YWl0IGlzTGlrZWQodXJpcylcclxuXHJcbiAgICByZXR1cm4gYXdhaXQgcChcclxuICAgICAgICB1cmlzLFxyXG4gICAgICAgIGEucmVkdWNlV2l0aEluZGV4KFxyXG4gICAgICAgICAgICBbW10gYXMgU3BvdGlmeVVSSVtdLCBbXSBhcyBTcG90aWZ5VVJJW11dIGFzIGNvbnN0LFxyXG4gICAgICAgICAgICAoaSwgYWNjLCB1cmkpID0+IChhY2NbTnVtYmVyKGxpa2VkW2ldKV0ucHVzaCh1cmkpLCBhY2MpLFxyXG4gICAgICAgICksXHJcbiAgICAgICAgKFt0b0FkZCwgdG9SZW1dKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBzID0gW11cclxuICAgICAgICAgICAgaWYgKHRvQWRkLmxlbmd0aCkgcHMucHVzaChzZXRMaWtlZCh0b0FkZCwgdHJ1ZSkpXHJcbiAgICAgICAgICAgIGlmICh0b1JlbS5sZW5ndGgpIHBzLnB1c2goc2V0TGlrZWQodG9SZW0sIGZhbHNlKSlcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHBzKVxyXG4gICAgICAgIH0sXHJcbiAgICApXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVRdWV1ZUl0ZW0gPSAocXVldWVkOiBib29sZWFuKSA9PiAodXJpOiBTcG90aWZ5VVJJKSA9PiAoe1xyXG4gICAgY29udGV4dFRyYWNrOiB7XHJcbiAgICAgICAgdXJpLFxyXG4gICAgICAgIHVpZDogXCJcIixcclxuICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICBpc19xdWV1ZWQ6IHF1ZXVlZC50b1N0cmluZygpLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgcmVtb3ZlZDogW10sXHJcbiAgICBibG9ja2VkOiBbXSxcclxuICAgIHByb3ZpZGVyOiBxdWV1ZWQgPyBcInF1ZXVlXCIgOiBcImNvbnRleHRcIixcclxufSlcclxuXHJcbmV4cG9ydCBjb25zdCBzZXRRdWV1ZSA9IGFzeW5jIChuZXh0VHJhY2tzOiBBcnJheTxSZXR1cm5UeXBlPFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZVF1ZXVlSXRlbT4+PikgPT4ge1xyXG4gICAgY29uc3QgeyBfcXVldWUsIF9jbGllbnQgfSA9IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5ZXJBUEkuX3F1ZXVlXHJcbiAgICBjb25zdCB7IHByZXZUcmFja3MsIHF1ZXVlUmV2aXNpb24gfSA9IF9xdWV1ZVxyXG5cclxuICAgIHJldHVybiBfY2xpZW50LnNldFF1ZXVlKHtcclxuICAgICAgICBuZXh0VHJhY2tzLFxyXG4gICAgICAgIHByZXZUcmFja3MsXHJcbiAgICAgICAgcXVldWVSZXZpc2lvbixcclxuICAgIH0pIGFzIFByb21pc2U8eyBlcnJvcjogbnVtYmVyOyByZWFzb25zOiBzdHJpbmcgfT5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldFBsYXlpbmdDb250ZXh0ID0gKHVyaTogU3BvdGlmeVVSSSkgPT4ge1xyXG4gICAgY29uc3QgeyBzZXNzaW9uSWQgfSA9IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5ZXJBUEkuZ2V0U3RhdGUoKVxyXG4gICAgcmV0dXJuIFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5ZXJBUEkudXBkYXRlQ29udGV4dChzZXNzaW9uSWQsIHsgdXJpLCB1cmw6IFwiY29udGV4dDovL1wiICsgdXJpIH0pIGFzIFByb21pc2U8dW5kZWZpbmVkPlxyXG59XHJcbiIsCiAgImltcG9ydCB7IGludm9rZU51bGxhcnkgfSBmcm9tIFwiZnAtdHMtc3RkL0Z1bmN0aW9uXCJcclxuaW1wb3J0IHsgcGlwZSBhcyBwIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCJcclxuaW1wb3J0IHsgcE1jaGFpbiwgY2h1bmNraWZ5LCBtZW1vaXplMiB9IGZyb20gXCIuL2ZwXCJcclxuaW1wb3J0IHsgU3BvdGlmeUlELCBTcG90aWZ5TG9jLCBTcG90aWZ5VVJJLCBlc2NhcGVSZWdleCB9IGZyb20gXCIuL3V0aWxcIlxyXG5cclxuY29uc3QgeyBVUkkgfSA9IFNwaWNldGlmeVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIEdyYXBoUUwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFsYnVtID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSA0ODcpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5nZXRBbGJ1bSwge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIGxvY2FsZTogU3BpY2V0aWZ5LkxvY2FsZS5nZXRMb2NhbGUoKSxcclxuICAgICAgICAgICAgb2Zmc2V0LFxyXG4gICAgICAgICAgICBsaW1pdCxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFsYnVtVW5pb24gYXMgZmV0Y2hHUUxBbGJ1bVJlc1xyXG5cclxudHlwZSBmZXRjaEFydGlzdEdRTFJlcyA9IGFueVxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBcnRpc3RPdmVydmlldyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5xdWVyeUFydGlzdE92ZXJ2aWV3LCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgICAgICBpbmNsdWRlUHJlcmVsZWFzZTogdHJ1ZSxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFydGlzdFVuaW9uIGFzIGZldGNoQXJ0aXN0R1FMUmVzXHJcblxyXG50eXBlIGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHlSZXMgPSBhbnlcclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHkgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDExNikgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLnF1ZXJ5QXJ0aXN0RGlzY29ncmFwaHlBbGwsIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBvZmZzZXQsXHJcbiAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24uZGlzY29ncmFwaHkuYWxsLml0ZW1zIGFzIGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHlSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFydGlzdFJlbGF0ZWQgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMucXVlcnlBcnRpc3RSZWxhdGVkLCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24ucmVsYXRlZENvbnRlbnQucmVsYXRlZEFydGlzdHMuaXRlbXMgYXMgZmV0Y2hHUUxBcnRpc3RSZWxhdGVkUmVzXHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgU3BvdGlmeSBXZWIgQVBJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZVdlYlBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5SUQsIHRyYWNrczogU3BvdGlmeVVSSVtdKSA9PlxyXG4gICAgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmRlbChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvcGxheWxpc3RzLyR7cGxheWxpc3R9L3RyYWNrc2AsIHtcclxuICAgICAgICB0cmFja3M6IHRyYWNrcy5tYXAodXJpID0+ICh7IHVyaSB9KSksXHJcbiAgICB9KVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViQXJ0aXN0c1Nwb3QgPSBjaHVuY2tpZnkoNTApKFxyXG4gICAgYXN5bmMgKGlkczogU3BvdGlmeUlEW10pID0+XHJcbiAgICAgICAgKGF3YWl0IFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL2FydGlzdHM/aWRzPSR7aWRzLmpvaW4oXCIsXCIpfWApKVxyXG4gICAgICAgICAgICAuYXJ0aXN0cyBhcyBTcG90QXBpQXJ0aXN0W10sXHJcbilcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlBsYXlsaXN0c1Nwb3QgPSBjaHVuY2tpZnkoMSkoXHJcbiAgICAvLyBAdHMtaWdub3JlIGNodW5raWZ5IHdpbGwgbmV2ZXIgY2FsbCB3aXRoIGVtcHR5IGFycmF5XHJcbiAgICBhc3luYyAoW2lkXTogW1Nwb3RpZnlJRF0pID0+IFtcclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvcGxheWxpc3RzLyR7aWR9YCkpIGFzIFNwb3RBcGlQbGF5bGlzdCxcclxuICAgIF0sXHJcbilcclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViQWxidW1zU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvYWxidW1zP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLmFsYnVtcyBhcyBTcG90QXBpQWxidW1bXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViVHJhY2tzU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvdHJhY2tzP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLnRyYWNrcyBhcyBTcG90QXBpVHJhY2tbXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFdlYkl0ZW1TcG90ID0gYXN5bmMgKHE6IHN0cmluZywgdHlwZTogc3RyaW5nW10pID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9zZWFyY2g/cT0ke2VuY29kZVVSSUNvbXBvbmVudChxKX0mdHlwZT0ke3R5cGUuam9pbihcIixcIil9YClcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlNvdW5kT2ZTcG90aWZ5UGxheWxpc3QgPSBhc3luYyAoZ2VucmU6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgbmFtZSA9IGBUaGUgU291bmQgT2YgJHtnZW5yZX1gXHJcbiAgICBjb25zdCByZSA9IG5ldyBSZWdFeHAoYF4ke2VzY2FwZVJlZ2V4KG5hbWUpfSRgLCBcImlcIilcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHNlYXJjaFdlYkl0ZW1TcG90KG5hbWUsIFtcInBsYXlsaXN0XCJdKVxyXG4gICAgY29uc3QgaXRlbSA9IHJlcy5wbGF5bGlzdHMuaXRlbXNbMF1cclxuICAgIHJldHVybiBpdGVtPy5vd25lci5pZCA9PT0gXCJ0aGVzb3VuZHNvZnNwb3RpZnlcIiAmJiByZS50ZXN0KGl0ZW0ubmFtZSkgPyBpdGVtLnVyaSA6IG51bGxcclxufVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFBsYXRmb3JtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRMaWtlZFRyYWNrcyA9IGFzeW5jICgpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuZ2V0VHJhY2tzKHtcclxuICAgICAgICAgICAgbGltaXQ6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLFxyXG4gICAgICAgIH0pXHJcbiAgICApLml0ZW1zIGFzIGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzUmVzXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrcyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gMTAwKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5MaWJyYXJ5QVBJLmdldFRyYWNrcyh7IHVyaSwgb2Zmc2V0LCBsaW1pdCB9KSkuaXRlbXMgYXMgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdENvbnRlbnRzID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkuZ2V0Q29udGVudHModXJpKSkuaXRlbXMgYXMgZmV0Y2hXZWJQbGF5bGlzdFJlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBsYXRGb2xkZXIgPSBhc3luYyAobmFtZTogc3RyaW5nLCBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmNyZWF0ZUZvbGRlcihuYW1lLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBsaWtlUGxhdFBsYXlsaXN0ID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT4gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmFkZChbdXJpXSlcclxuXHJcbi8qIFJlcGxhY2VkIGJ5IGNyZWF0ZVNQUGxheWxpc3RGcm9tVHJhY2tzICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQbGF0UGxheWxpc3QgPSBhc3luYyAobmFtZTogc3RyaW5nLCBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmNyZWF0ZVBsYXlsaXN0KG5hbWUsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNQUGxheWxpc3RGcm9tVHJhY2tzID0gKG5hbWU6IHN0cmluZywgdHJhY2tzOiBTcG90aWZ5VVJJW10sIGZvbGRlcj86IFNwb3RpZnlVUkkpID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMucG9zdChcInNwOi8vY29yZS1wbGF5bGlzdC92MS9yb290bGlzdD9yZXNwb25zZUZvcm1hdD1wcm90b2J1Zkpzb25cIiwge1xyXG4gICAgICAgIG9wZXJhdGlvbjogXCJjcmVhdGVcIixcclxuICAgICAgICAuLi4oZm9sZGVyID8geyBhZnRlcjogZm9sZGVyIH0gOiB7fSksXHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBwbGF5bGlzdDogdHJ1ZSxcclxuICAgICAgICB1cmlzOiB0cmFja3MsXHJcbiAgICB9KVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldFBsYXRQbGF5bGlzdFZpc2liaWxpdHkgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlVUkksIHZpc2libGVGb3JBbGw6IGJvb2xlYW4pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RQZXJtaXNzaW9uc0FQSS5zZXRCYXNlUGVybWlzc2lvbihwbGF5bGlzdCwgdmlzaWJsZUZvckFsbCA/IFwiVklFV0VSXCIgOiBcIkJMT0NLRURcIilcclxuZXhwb3J0IGNvbnN0IHNldFBsYXRQbGF5bGlzdFB1Ymxpc2hlZCA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeVVSSSwgcHVibGlzaGVkOiBib29sZWFuKSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLnNldFB1Ymxpc2hlZFN0YXRlKHBsYXlsaXN0LCBwdWJsaXNoZWQpXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0Rm9sZGVyID0gYXN5bmMgKGZvbGRlcj86IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmdldENvbnRlbnRzKHsgZm9sZGVyVXJpOiBmb2xkZXIgfSkpIGFzIGZldGNoUGxhdEZvbGRlclJlc1xyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0Um9vdEZvbGRlciA9ICgpID0+IGZldGNoUGxhdEZvbGRlcih1bmRlZmluZWQpXHJcblxyXG5leHBvcnQgY29uc3QgYWRkUGxhdFBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5VVJJLCB0cmFja3M6IFNwb3RpZnlVUklbXSwgbG9jYXRpb246IFNwb3RpZnlMb2MgPSB7fSkgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5hZGQocGxheWxpc3QsIHRyYWNrcywgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgbW92ZVBsYXRQbGF5bGlzdFRyYWNrcyA9IGFzeW5jIChcclxuICAgIHBsYXlsaXN0OiBTcG90aWZ5VVJJLFxyXG4gICAgdHJhY2tzOiBBcnJheTx7IHVpZDogc3RyaW5nIH0+LFxyXG4gICAgbG9jYXRpb246IFNwb3RpZnlMb2MgPSB7fSxcclxuKSA9PiBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkubW92ZShwbGF5bGlzdCwgdHJhY2tzLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MzMDAgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDMwMCkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uRW5oYW5jZUFQSS5nZXRQYWdlKHVyaSwgLyogaXRlcmF0aW9uICovIDAsIC8qIHNlc3Npb25JZCAqLyAwLCBvZmZzZXQsIGxpbWl0KSkuZW5oYW5jZVBhZ2VcclxuICAgICAgICAucGFnZUl0ZW1zIGFzIGFueVtdXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwKTogUHJvbWlzZTxhbnlbXT4gPT4ge1xyXG4gICAgY29uc3QgbmV4dFBhZ2VJdGVtcyA9IGF3YWl0IGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25nczMwMCh1cmksIG9mZnNldClcclxuICAgIGlmIChuZXh0UGFnZUl0ZW1zPy5sZW5ndGggPCAzMDApIHJldHVybiBuZXh0UGFnZUl0ZW1zXHJcbiAgICBlbHNlIHJldHVybiBuZXh0UGFnZUl0ZW1zLmNvbmNhdChmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3ModXJpLCBvZmZzZXQgKyAzMDApKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hMb2NhbFRyYWNrcyA9IGFzeW5jICgpID0+IGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Mb2NhbEZpbGVzQVBJLmdldFRyYWNrcygpXHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgTm9uIFNwb3RpZnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoVHJhY2tMRk1BUEkgPSBhc3luYyAoTEZNQXBpS2V5OiBzdHJpbmcsIGFydGlzdDogc3RyaW5nLCB0cmFja05hbWU6IHN0cmluZywgbGFzdEZtVXNlcm5hbWUgPSBcIlwiKSA9PiB7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFwiaHR0cHM6Ly93cy5hdWRpb3Njcm9iYmxlci5jb20vMi4wL1wiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJtZXRob2RcIiwgXCJ0cmFjay5nZXRJbmZvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImFwaV9rZXlcIiwgTEZNQXBpS2V5KVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJhcnRpc3RcIiwgYXJ0aXN0KVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ0cmFja1wiLCB0cmFja05hbWUpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImZvcm1hdFwiLCBcImpzb25cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidXNlcm5hbWVcIiwgbGFzdEZtVXNlcm5hbWUpXHJcblxyXG4gICAgcmV0dXJuIChhd2FpdCBmZXRjaCh1cmwpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpKSBhcyBmZXRjaFRyYWNrTEZNQVBJUmVzXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFRyYWNrTEZNQVBJTWVtb2l6ZWQgPSBtZW1vaXplMihmZXRjaFRyYWNrTEZNQVBJKVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFlvdXR1YmUgPSBhc3luYyAoWW91VHViZUFwaUtleTogc3RyaW5nLCBzZWFyY2hTdHJpbmc6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvc2VhcmNoXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInBhcnRcIiwgXCJzbmlwcGV0XCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcIm1heFJlc3VsdHNcIiwgXCIxMFwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJxXCIsIHNlYXJjaFN0cmluZylcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidHlwZVwiLCBcInZpZGVvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImtleVwiLCBZb3VUdWJlQXBpS2V5KVxyXG5cclxuICAgIHJldHVybiAoYXdhaXQgZmV0Y2godXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKSkgYXMgYW55W11cclxufVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hHUUxBbGJ1bVJlcyB7XHJcbiAgICBfX3R5cGVuYW1lOiBcImFsYnVtXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhcnRpc3RzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgcHJvZmlsZToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmlzdWFsczoge1xyXG4gICAgICAgICAgICAgICAgYXZhdGFySW1hZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNoYXJpbmdJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgY292ZXJBcnQ6IHtcclxuICAgICAgICBleHRyYWN0ZWRDb2xvcnM6IHtcclxuICAgICAgICAgICAgY29sb3JSYXc6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JMaWdodDoge1xyXG4gICAgICAgICAgICAgICAgaGV4OiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xvckRhcms6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgIH1cclxuICAgIGRpc2NzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgbnVtYmVyOiBudW1iZXJcclxuICAgICAgICAgICAgdHJhY2tzOiB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICByZWxlYXNlczoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICBkYXRlOiB7XHJcbiAgICAgICAgaXNvU3RyaW5nOiBzdHJpbmdcclxuICAgICAgICBwcmVjaXNpb246IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgcGxheWFiaWxpdHk6IHtcclxuICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgIHJlYXNvbjogc3RyaW5nXHJcbiAgICB9XHJcbiAgICBsYWJlbDogc3RyaW5nXHJcbiAgICBjb3B5cmlnaHQ6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICAgICAgdGV4dDogc3RyaW5nXHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIGNvdXJ0ZXN5TGluZTogc3RyaW5nXHJcbiAgICBzYXZlZDogYm9vbGVhblxyXG4gICAgc2hhcmluZ0luZm86IHtcclxuICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgc2hhcmVJZDogc3RyaW5nXHJcbiAgICB9XHJcbiAgICB0cmFja3M6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB1aWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB0cmFjazoge1xyXG4gICAgICAgICAgICAgICAgc2F2ZWQ6IGJvb2xlYW5cclxuICAgICAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBwbGF5Y291bnQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICBjb250ZW50UmF0aW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVsaW5raW5nSW5mb3JtYXRpb246IGFueVxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbE1pbGxpc2Vjb25kczogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwbGF5YWJpbGl0eToge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXlhYmxlOiBib29sZWFuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhcnRpc3RzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICBtb3JlQWxidW1zQnlBcnRpc3Q6IHtcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBkaXNjb2dyYXBoeToge1xyXG4gICAgICAgICAgICAgICAgcG9wdWxhclJlbGVhc2VzQWxidW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IG51bWJlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyQXJ0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlhYmlsaXR5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFyaW5nSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVJZDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIGZldGNoR1FMQXJ0aXN0UmVsYXRlZFJlcyA9IEFycmF5PHtcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgcHJvZmlsZToge1xyXG4gICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgdmlzdWFsczoge1xyXG4gICAgICAgIGF2YXRhckltYWdlOiB7XHJcbiAgICAgICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59PlxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXMgPSBBcnJheTx7XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogc3RyaW5nXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGR1cmF0aW9uOiBTcG90QXBpRHVyYXRpb25cclxuICAgIGFsYnVtOiBTcG90QXBpQWxidW1NaW5cclxuICAgIGFydGlzdHM6IFNwb3RBcGlBcnRpc3RNaW5bXVxyXG4gICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICBpc0V4cGxpY2l0OiBib29sZWFuXHJcbiAgICBpc1BsYXlhYmxlOiBib29sZWFuXHJcbiAgICBpc0xvY2FsOiBib29sZWFuXHJcbiAgICBpczE5UGx1c09ubHk6IGJvb2xlYW5cclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG59PlxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hXZWJQbGF5bGlzdFJlcyA9IEFycmF5PHtcclxuICAgIHVpZDogc3RyaW5nXHJcbiAgICBwbGF5SW5kZXg6IG51bGxcclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG4gICAgYWRkZWRCeToge1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmdcclxuICAgICAgICBkaXNwbGF5TmFtZTogc3RyaW5nXHJcbiAgICAgICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2UyW11cclxuICAgIH1cclxuICAgIGZvcm1hdExpc3RBdHRyaWJ1dGVzOiB7fVxyXG4gICAgdHlwZTogXCJ0cmFja1wiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bU1pblxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdE1pbltdXHJcbiAgICBkaXNjTnVtYmVyOiBudW1iZXJcclxuICAgIHRyYWNrTnVtYmVyOiBudW1iZXJcclxuICAgIGR1cmF0aW9uOiBTcG90QXBpRHVyYXRpb25cclxuICAgIGlzRXhwbGljaXQ6IGJvb2xlYW5cclxuICAgIGlzTG9jYWw6IGJvb2xlYW5cclxuICAgIGlzUGxheWFibGU6IGJvb2xlYW5cclxuICAgIGlzMTlQbHVzT25seTogYm9vbGVhblxyXG59PlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBmZXRjaFRyYWNrTEZNQVBJUmVzIHtcclxuICAgIHRyYWNrOiB7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgbWJpZDogc3RyaW5nXHJcbiAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICBkdXJhdGlvbjogc3RyaW5nXHJcbiAgICAgICAgc3RyZWFtYWJsZToge1xyXG4gICAgICAgICAgICBcIiN0ZXh0XCI6IHN0cmluZ1xyXG4gICAgICAgICAgICBmdWxsdHJhY2s6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgICBsaXN0ZW5lcnM6IHN0cmluZ1xyXG4gICAgICAgIHBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgYXJ0aXN0OiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICAgICAgYWxidW06IHtcclxuICAgICAgICAgICAgYXJ0aXN0OiBzdHJpbmdcclxuICAgICAgICAgICAgdGl0bGU6IHN0cmluZ1xyXG4gICAgICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgaW1hZ2U6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgIFwiI3RleHRcIjogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBzaXplOiBzdHJpbmdcclxuICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgXCJAYXR0clwiOiB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdXNlcnBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgdXNlcmxvdmVkOiBzdHJpbmdcclxuICAgICAgICB0b3B0YWdzOiB7XHJcbiAgICAgICAgICAgIHRhZzogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgICAgICB9PlxyXG4gICAgICAgIH1cclxuICAgICAgICB3aWtpOiB7XHJcbiAgICAgICAgICAgIHB1Ymxpc2hlZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHN1bW1hcnk6IHN0cmluZ1xyXG4gICAgICAgICAgICBjb250ZW50OiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBbGJ1bU1pbiB7XHJcbiAgICB0eXBlOiBcImFsYnVtXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhcnRpc3Q6IFNwb3RBcGlBcnRpc3RNaW5cclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlMltdXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUltYWdlMiB7XHJcbiAgICB1cmw6IHN0cmluZ1xyXG4gICAgbGFiZWw6IFwic21hbGxcIiB8IFwic3RhbmRhcmRcIiB8IFwibGFyZ2VcIiB8IFwieGxhcmdlXCJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpVHJhY2sge1xyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bVxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdFtdXHJcbiAgICBhdmFpbGFibGVfbWFya2V0czogc3RyaW5nW11cclxuICAgIGRpc2NfbnVtYmVyOiBudW1iZXJcclxuICAgIGR1cmF0aW9uX21zOiBudW1iZXJcclxuICAgIGV4cGxpY2l0OiBib29sZWFuXHJcbiAgICBleHRlcm5hbF9pZHM6IFNwb3RBcGlFSURzXHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaXNfcGxheWFibGU6IGJvb2xlYW5cclxuICAgIGxpbmtlZF9mcm9tOiB7fVxyXG4gICAgcmVzdHJpY3Rpb25zOiBTcG90QXBpUmVzdHJpY3Rpb25zXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHBvcHVsYXJpdHk6IG51bWJlclxyXG4gICAgcHJldmlld191cmw6IHN0cmluZ1xyXG4gICAgdHJhY2tfbnVtYmVyOiBudW1iZXJcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBpc19sb2NhbDogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBcnRpc3Qge1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBmb2xsb3dlcnM6IFNwb3RBcGlGb2xsb3dlcnNcclxuICAgIGdlbnJlczogc3RyaW5nW11cclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFydGlzdE1pbiB7XHJcbiAgICB0eXBlOiBcImFydGlzdFwiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBbGJ1bSB7XHJcbiAgICBhbGJ1bV90eXBlOiBzdHJpbmdcclxuICAgIHRvdGFsX3RyYWNrczogbnVtYmVyXHJcbiAgICBhdmFpbGFibGVfbWFya2V0czogc3RyaW5nW11cclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHJlbGVhc2VfZGF0ZTogc3RyaW5nXHJcbiAgICByZWxlYXNlX2RhdGVfcHJlY2lzaW9uOiBzdHJpbmdcclxuICAgIHJlc3RyaWN0aW9uczogU3BvdEFwaVJlc3RyaWN0aW9uc1xyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIGNvcHlyaWdodHM6IEFycmF5PHtcclxuICAgICAgICB0ZXh0OiBzdHJpbmdcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgIH0+XHJcbiAgICBleHRlcm5hbF9pZHM6IFNwb3RBcGlFSURzXHJcbiAgICBnZW5yZXM6IHN0cmluZ1tdXHJcbiAgICBsYWJlbDogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIGFsYnVtX2dyb3VwOiBzdHJpbmdcclxuICAgIGFydGlzdHM6IEFycmF5PHtcclxuICAgICAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICB9PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlFVXJscyB7XHJcbiAgICBzcG90aWZ5OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRUlEcyB7XHJcbiAgICBpc3JjOiBzdHJpbmdcclxuICAgIGVhbjogc3RyaW5nXHJcbiAgICB1cGM6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlJbWFnZSB7XHJcbiAgICB1cmw6IHN0cmluZ1xyXG4gICAgd2lkdGg6IG51bWJlclxyXG4gICAgaGVpZ2h0OiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpUmVzdHJpY3Rpb25zIHtcclxuICAgIHJlYXNvbjogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUZvbGxvd2VycyB7XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIHRvdGFsOiBudW1iZXJcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlEdXJhdGlvbiB7XHJcbiAgICBtaWxsaXNlY29uZHM6IG51bWJlclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaVBsYXlsaXN0IHtcclxuICAgIGNvbGxhYm9yYXRpdmU6IGJvb2xlYW5cclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgZm9sbG93ZXJzOiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgdG90YWw6IG51bWJlclxyXG4gICAgfVxyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogU3BvdGlmeUlEXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIG93bmVyOiBTcG90QXBpT3duZXJcclxuICAgIHB1YmxpYzogYm9vbGVhblxyXG4gICAgc25hcHNob3RfaWQ6IHN0cmluZ1xyXG4gICAgdHJhY2tzOiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgbGltaXQ6IG51bWJlclxyXG4gICAgICAgIG5leHQ6IHN0cmluZ1xyXG4gICAgICAgIG9mZnNldDogbnVtYmVyXHJcbiAgICAgICAgcHJldmlvdXM6IHN0cmluZ1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBhZGRlZF9hdDogc3RyaW5nXHJcbiAgICAgICAgICAgIGFkZGVkX2J5OiBTcG90QXBpT3duZXJcclxuICAgICAgICAgICAgaXNfbG9jYWw6IGJvb2xlYW5cclxuICAgICAgICAgICAgdHJhY2s6IFNwb3RBcGlUcmFja1xyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlPd25lciB7XHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGZvbGxvd2Vycz86IHtcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICB0b3RhbDogbnVtYmVyXHJcbiAgICB9XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBTcG90aWZ5SURcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBkaXNwbGF5X25hbWU/OiBzdHJpbmdcclxuICAgIG5hbWU/OiBzdHJpbmdcclxufVxyXG5cclxuLy9UT0RPOiBCZXR0ZXIgVFMgaW50ZXJmYWNlIGZvciByZWN1cnNpdmUgZmV0Y2hQbGF0Rm9sZGVyUmVzXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hQbGF0Rm9sZGVyUmVzIHtcclxuICAgIHR5cGU6IFwiZm9sZGVyXCIgfCBcInBsYWNlaG9sZGVyXCIgfCBcInBsYXlsaXN0XCJcclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG4gICAgaXRlbXM/OiBBcnJheTxmZXRjaFBsYXRGb2xkZXJSZXM+XHJcbiAgICBuYW1lPzogc3RyaW5nXHJcbiAgICB1cmk6IHN0cmluZ1xyXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmdcclxuICAgIGltYWdlcz86IFNwb3RBcGlJbWFnZTJbXVxyXG4gICAgbWFkZUZvcj86IG51bGxcclxuICAgIG93bmVyPzoge1xyXG4gICAgICAgIHR5cGU6IFwidXNlclwiXHJcbiAgICAgICAgdXJpOiBzdHJpbmdcclxuICAgICAgICB1c2VybmFtZTogc3RyaW5nXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGltYWdlczogYW55W11cclxuICAgIH1cclxuICAgIHRvdGFsTGVuZ3RoPzogbnVtYmVyXHJcbiAgICB1bmZpbHRlcmVkVG90YWxMZW5ndGg/OiBudW1iZXJcclxuICAgIHRvdGFsTGlrZXM/OiBudWxsXHJcbiAgICBkdXJhdGlvbj86IG51bGxcclxuICAgIGlzQ29sbGFib3JhdGl2ZT86IGJvb2xlYW5cclxuICAgIGlzTG9hZGVkPzogYm9vbGVhblxyXG4gICAgaXNPd25lZEJ5U2VsZj86IGJvb2xlYW5cclxuICAgIGlzUHVibGlzaGVkPzogYm9vbGVhblxyXG4gICAgaGFzRXBpc29kZXM/OiBudWxsXHJcbiAgICBoYXNTcG90aWZ5VHJhY2tzPzogbnVsbFxyXG4gICAgaGFzU3BvdGlmeUF1ZGlvYm9va3M/OiBudWxsXHJcbiAgICBjYW5BZGQ/OiBib29sZWFuXHJcbiAgICBjYW5SZW1vdmU/OiBib29sZWFuXHJcbiAgICBjYW5QbGF5PzogbnVsbFxyXG4gICAgZm9ybWF0TGlzdERhdGE/OiB7XHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgYXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxyXG4gICAgfSB8IG51bGxcclxuICAgIGNhblJlcG9ydEFubm90YXRpb25BYnVzZT86IGJvb2xlYW5cclxuICAgIGhhc0RhdGVBZGRlZD86IGJvb2xlYW5cclxuICAgIHBlcm1pc3Npb25zPzogbnVsbFxyXG4gICAgY29sbGFib3JhdG9ycz86IHtcclxuICAgICAgICBjb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IGFueVtdXHJcbiAgICB9XHJcbiAgICBpc05vdEZvdW5kPzogYm9vbGVhblxyXG4gICAgaXNGb3JiaWRkZW4/OiBib29sZWFuXHJcbn1cclxuIiwKICAiaW1wb3J0IHsgaW52b2tlTnVsbGFyeSB9IGZyb20gXCJmcC10cy1zdGQvRnVuY3Rpb25cIlxyXG5pbXBvcnQgeyBwaXBlIGFzIHAgfSBmcm9tIFwiZnAtdHMvZnVuY3Rpb25cIlxyXG5pbXBvcnQgeyBwTWNoYWluLCBjaHVuY2tpZnksIG1lbW9pemUyIH0gZnJvbSBcIi4vZnBcIlxyXG5pbXBvcnQgeyBTcG90aWZ5SUQsIFNwb3RpZnlMb2MsIFNwb3RpZnlVUkksIGVzY2FwZVJlZ2V4IH0gZnJvbSBcIi4vdXRpbFwiXHJcblxyXG5jb25zdCB7IFVSSSB9ID0gU3BpY2V0aWZ5XHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgR3JhcGhRTCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQWxidW0gPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDQ4NykgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLmdldEFsYnVtLCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgICAgICBvZmZzZXQsXHJcbiAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYWxidW1VbmlvbiBhcyBmZXRjaEdRTEFsYnVtUmVzXHJcblxyXG50eXBlIGZldGNoQXJ0aXN0R1FMUmVzID0gYW55XHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFydGlzdE92ZXJ2aWV3ID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLnF1ZXJ5QXJ0aXN0T3ZlcnZpZXcsIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBsb2NhbGU6IFNwaWNldGlmeS5Mb2NhbGUuZ2V0TG9jYWxlKCksXHJcbiAgICAgICAgICAgIGluY2x1ZGVQcmVyZWxlYXNlOiB0cnVlLFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24gYXMgZmV0Y2hBcnRpc3RHUUxSZXNcclxuXHJcbnR5cGUgZmV0Y2hHUUxBcnRpc3REaXNjb2dyYXBoeVJlcyA9IGFueVxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBcnRpc3REaXNjb2dyYXBoeSA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gMTE2KSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMucXVlcnlBcnRpc3REaXNjb2dyYXBoeUFsbCwge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIG9mZnNldCxcclxuICAgICAgICAgICAgbGltaXQsXHJcbiAgICAgICAgfSlcclxuICAgICkuZGF0YS5hcnRpc3RVbmlvbi5kaXNjb2dyYXBoeS5hbGwuaXRlbXMgYXMgZmV0Y2hHUUxBcnRpc3REaXNjb2dyYXBoeVJlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQXJ0aXN0UmVsYXRlZCA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5xdWVyeUFydGlzdFJlbGF0ZWQsIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBsb2NhbGU6IFNwaWNldGlmeS5Mb2NhbGUuZ2V0TG9jYWxlKCksXHJcbiAgICAgICAgfSlcclxuICAgICkuZGF0YS5hcnRpc3RVbmlvbi5yZWxhdGVkQ29udGVudC5yZWxhdGVkQXJ0aXN0cy5pdGVtcyBhcyBmZXRjaEdRTEFydGlzdFJlbGF0ZWRSZXNcclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBTcG90aWZ5IFdlYiBBUEkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgY29uc3QgcmVtb3ZlV2ViUGxheWxpc3RUcmFja3MgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlJRCwgdHJhY2tzOiBTcG90aWZ5VVJJW10pID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZGVsKGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9wbGF5bGlzdHMvJHtwbGF5bGlzdH0vdHJhY2tzYCwge1xyXG4gICAgICAgIHRyYWNrczogdHJhY2tzLm1hcCh1cmkgPT4gKHsgdXJpIH0pKSxcclxuICAgIH0pXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJBcnRpc3RzU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvYXJ0aXN0cz9pZHM9JHtpZHMuam9pbihcIixcIil9YCkpXHJcbiAgICAgICAgICAgIC5hcnRpc3RzIGFzIFNwb3RBcGlBcnRpc3RbXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViUGxheWxpc3RzU3BvdCA9IGNodW5ja2lmeSgxKShcclxuICAgIC8vIEB0cy1pZ25vcmUgY2h1bmtpZnkgd2lsbCBuZXZlciBjYWxsIHdpdGggZW1wdHkgYXJyYXlcclxuICAgIGFzeW5jIChbaWRdOiBbU3BvdGlmeUlEXSkgPT4gW1xyXG4gICAgICAgIChhd2FpdCBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9wbGF5bGlzdHMvJHtpZH1gKSkgYXMgU3BvdEFwaVBsYXlsaXN0LFxyXG4gICAgXSxcclxuKVxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJBbGJ1bXNTcG90ID0gY2h1bmNraWZ5KDUwKShcclxuICAgIGFzeW5jIChpZHM6IFNwb3RpZnlJRFtdKSA9PlxyXG4gICAgICAgIChhd2FpdCBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9hbGJ1bXM/aWRzPSR7aWRzLmpvaW4oXCIsXCIpfWApKVxyXG4gICAgICAgICAgICAuYWxidW1zIGFzIFNwb3RBcGlBbGJ1bVtdLFxyXG4pXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJUcmFja3NTcG90ID0gY2h1bmNraWZ5KDUwKShcclxuICAgIGFzeW5jIChpZHM6IFNwb3RpZnlJRFtdKSA9PlxyXG4gICAgICAgIChhd2FpdCBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS90cmFja3M/aWRzPSR7aWRzLmpvaW4oXCIsXCIpfWApKVxyXG4gICAgICAgICAgICAudHJhY2tzIGFzIFNwb3RBcGlUcmFja1tdLFxyXG4pXHJcblxyXG5leHBvcnQgY29uc3Qgc2VhcmNoV2ViSXRlbVNwb3QgPSBhc3luYyAocTogc3RyaW5nLCB0eXBlOiBzdHJpbmdbXSkgPT5cclxuICAgIFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL3NlYXJjaD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHEpfSZ0eXBlPSR7dHlwZS5qb2luKFwiLFwiKX1gKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViU291bmRPZlNwb3RpZnlQbGF5bGlzdCA9IGFzeW5jIChnZW5yZTogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBuYW1lID0gYFRoZSBTb3VuZCBPZiAke2dlbnJlfWBcclxuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChgXiR7ZXNjYXBlUmVnZXgobmFtZSl9JGAsIFwiaVwiKVxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgc2VhcmNoV2ViSXRlbVNwb3QobmFtZSwgW1wicGxheWxpc3RcIl0pXHJcbiAgICBjb25zdCBpdGVtID0gcmVzLnBsYXlsaXN0cy5pdGVtc1swXVxyXG4gICAgcmV0dXJuIGl0ZW0/Lm93bmVyLmlkID09PSBcInRoZXNvdW5kc29mc3BvdGlmeVwiICYmIHJlLnRlc3QoaXRlbS5uYW1lKSA/IGl0ZW0udXJpIDogbnVsbFxyXG59XHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgUGxhdGZvcm0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdExpa2VkVHJhY2tzID0gYXN5bmMgKCkgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uTGlicmFyeUFQSS5nZXRUcmFja3Moe1xyXG4gICAgICAgICAgICBsaW1pdDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXHJcbiAgICAgICAgfSlcclxuICAgICkuaXRlbXMgYXMgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXNcclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSAxMDApID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuZ2V0VHJhY2tzKHsgdXJpLCBvZmZzZXQsIGxpbWl0IH0pKS5pdGVtcyBhcyBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrc1Jlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdFBsYXlsaXN0Q29udGVudHMgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5nZXRDb250ZW50cyh1cmkpKS5pdGVtcyBhcyBmZXRjaFdlYlBsYXlsaXN0UmVzXHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUGxhdEZvbGRlciA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGxvY2F0aW9uOiBTcG90aWZ5TG9jID0ge30pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuY3JlYXRlRm9sZGVyKG5hbWUsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IGxpa2VQbGF0UGxheWxpc3QgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PiBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuYWRkKFt1cmldKVxyXG5cclxuLyogUmVwbGFjZWQgYnkgY3JlYXRlU1BQbGF5bGlzdEZyb21UcmFja3MgKi9cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBsYXRQbGF5bGlzdCA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGxvY2F0aW9uOiBTcG90aWZ5TG9jID0ge30pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuY3JlYXRlUGxheWxpc3QobmFtZSwgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlU1BQbGF5bGlzdEZyb21UcmFja3MgPSAobmFtZTogc3RyaW5nLCB0cmFja3M6IFNwb3RpZnlVUklbXSwgZm9sZGVyPzogU3BvdGlmeVVSSSkgPT5cclxuICAgIFNwaWNldGlmeS5Db3Ntb3NBc3luYy5wb3N0KFwic3A6Ly9jb3JlLXBsYXlsaXN0L3YxL3Jvb3RsaXN0P3Jlc3BvbnNlRm9ybWF0PXByb3RvYnVmSnNvblwiLCB7XHJcbiAgICAgICAgb3BlcmF0aW9uOiBcImNyZWF0ZVwiLFxyXG4gICAgICAgIC4uLihmb2xkZXIgPyB7IGFmdGVyOiBmb2xkZXIgfSA6IHt9KSxcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIHBsYXlsaXN0OiB0cnVlLFxyXG4gICAgICAgIHVyaXM6IHRyYWNrcyxcclxuICAgIH0pXHJcblxyXG5leHBvcnQgY29uc3Qgc2V0UGxhdFBsYXlsaXN0VmlzaWJpbGl0eSA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeVVSSSwgdmlzaWJsZUZvckFsbDogYm9vbGVhbikgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdFBlcm1pc3Npb25zQVBJLnNldEJhc2VQZXJtaXNzaW9uKHBsYXlsaXN0LCB2aXNpYmxlRm9yQWxsID8gXCJWSUVXRVJcIiA6IFwiQkxPQ0tFRFwiKVxyXG5leHBvcnQgY29uc3Qgc2V0UGxhdFBsYXlsaXN0UHVibGlzaGVkID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5VVJJLCBwdWJsaXNoZWQ6IGJvb2xlYW4pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuc2V0UHVibGlzaGVkU3RhdGUocGxheWxpc3QsIHB1Ymxpc2hlZClcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRGb2xkZXIgPSBhc3luYyAoZm9sZGVyPzogU3BvdGlmeVVSSSkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuZ2V0Q29udGVudHMoeyBmb2xkZXJVcmk6IGZvbGRlciB9KSkgYXMgZmV0Y2hQbGF0Rm9sZGVyUmVzXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRSb290Rm9sZGVyID0gKCkgPT4gZmV0Y2hQbGF0Rm9sZGVyKHVuZGVmaW5lZClcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRQbGF0UGxheWxpc3RUcmFja3MgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlVUkksIHRyYWNrczogU3BvdGlmeVVSSVtdLCBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXlsaXN0QVBJLmFkZChwbGF5bGlzdCwgdHJhY2tzLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBtb3ZlUGxhdFBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKFxyXG4gICAgcGxheWxpc3Q6IFNwb3RpZnlVUkksXHJcbiAgICB0cmFja3M6IEFycmF5PHsgdWlkOiBzdHJpbmcgfT4sXHJcbiAgICBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9LFxyXG4pID0+IGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5tb3ZlKHBsYXlsaXN0LCB0cmFja3MsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25nczMwMCA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gMzAwKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5FbmhhbmNlQVBJLmdldFBhZ2UodXJpLCAvKiBpdGVyYXRpb24gKi8gMCwgLyogc2Vzc2lvbklkICovIDAsIG9mZnNldCwgbGltaXQpKS5lbmhhbmNlUGFnZVxyXG4gICAgICAgIC5wYWdlSXRlbXMgYXMgYW55W11cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25ncyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDApOiBQcm9taXNlPGFueVtdPiA9PiB7XHJcbiAgICBjb25zdCBuZXh0UGFnZUl0ZW1zID0gYXdhaXQgZmV0Y2hQbGF0UGxheWxpc3RFbmhhbmNlZFNvbmdzMzAwKHVyaSwgb2Zmc2V0KVxyXG4gICAgaWYgKG5leHRQYWdlSXRlbXM/Lmxlbmd0aCA8IDMwMCkgcmV0dXJuIG5leHRQYWdlSXRlbXNcclxuICAgIGVsc2UgcmV0dXJuIG5leHRQYWdlSXRlbXMuY29uY2F0KGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25ncyh1cmksIG9mZnNldCArIDMwMCkpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaExvY2FsVHJhY2tzID0gYXN5bmMgKCkgPT4gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxvY2FsRmlsZXNBUEkuZ2V0VHJhY2tzKClcclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBOb24gU3BvdGlmeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hUcmFja0xGTUFQSSA9IGFzeW5jIChMRk1BcGlLZXk6IHN0cmluZywgYXJ0aXN0OiBzdHJpbmcsIHRyYWNrTmFtZTogc3RyaW5nLCBsYXN0Rm1Vc2VybmFtZSA9IFwiXCIpID0+IHtcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoXCJodHRwczovL3dzLmF1ZGlvc2Nyb2JibGVyLmNvbS8yLjAvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcIm1ldGhvZFwiLCBcInRyYWNrLmdldEluZm9cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiYXBpX2tleVwiLCBMRk1BcGlLZXkpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImFydGlzdFwiLCBhcnRpc3QpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInRyYWNrXCIsIHRyYWNrTmFtZSlcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiZm9ybWF0XCIsIFwianNvblwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ1c2VybmFtZVwiLCBsYXN0Rm1Vc2VybmFtZSlcclxuXHJcbiAgICByZXR1cm4gKGF3YWl0IGZldGNoKHVybCkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkpIGFzIGZldGNoVHJhY2tMRk1BUElSZXNcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoVHJhY2tMRk1BUElNZW1vaXplZCA9IG1lbW9pemUyKGZldGNoVHJhY2tMRk1BUEkpXHJcblxyXG5leHBvcnQgY29uc3Qgc2VhcmNoWW91dHViZSA9IGFzeW5jIChZb3VUdWJlQXBpS2V5OiBzdHJpbmcsIHNlYXJjaFN0cmluZzogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20veW91dHViZS92My9zZWFyY2hcIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwicGFydFwiLCBcInNuaXBwZXRcIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwibWF4UmVzdWx0c1wiLCBcIjEwXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInFcIiwgc2VhcmNoU3RyaW5nKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ0eXBlXCIsIFwidmlkZW9cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwia2V5XCIsIFlvdVR1YmVBcGlLZXkpXHJcblxyXG4gICAgcmV0dXJuIChhd2FpdCBmZXRjaCh1cmwpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpKSBhcyBhbnlbXVxyXG59XHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgVHlwZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBmZXRjaEdRTEFsYnVtUmVzIHtcclxuICAgIF9fdHlwZW5hbWU6IFwiYWxidW1cIlxyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGFydGlzdHM6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICBwcm9maWxlOiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2aXN1YWxzOiB7XHJcbiAgICAgICAgICAgICAgICBhdmF0YXJJbWFnZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2hhcmluZ0luZm86IHtcclxuICAgICAgICAgICAgICAgIHNoYXJlVXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICBjb3ZlckFydDoge1xyXG4gICAgICAgIGV4dHJhY3RlZENvbG9yczoge1xyXG4gICAgICAgICAgICBjb2xvclJhdzoge1xyXG4gICAgICAgICAgICAgICAgaGV4OiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xvckxpZ2h0OiB7XHJcbiAgICAgICAgICAgICAgICBoZXg6IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbG9yRGFyazoge1xyXG4gICAgICAgICAgICAgICAgaGV4OiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgfVxyXG4gICAgZGlzY3M6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBudW1iZXI6IG51bWJlclxyXG4gICAgICAgICAgICB0cmFja3M6IHtcclxuICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIHJlbGVhc2VzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIGRhdGU6IHtcclxuICAgICAgICBpc29TdHJpbmc6IHN0cmluZ1xyXG4gICAgICAgIHByZWNpc2lvbjogc3RyaW5nXHJcbiAgICB9XHJcbiAgICBwbGF5YWJpbGl0eToge1xyXG4gICAgICAgIHBsYXlhYmxlOiBib29sZWFuXHJcbiAgICAgICAgcmVhc29uOiBzdHJpbmdcclxuICAgIH1cclxuICAgIGxhYmVsOiBzdHJpbmdcclxuICAgIGNvcHlyaWdodDoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgICAgICB0ZXh0OiBzdHJpbmdcclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgY291cnRlc3lMaW5lOiBzdHJpbmdcclxuICAgIHNhdmVkOiBib29sZWFuXHJcbiAgICBzaGFyaW5nSW5mbzoge1xyXG4gICAgICAgIHNoYXJlVXJsOiBzdHJpbmdcclxuICAgICAgICBzaGFyZUlkOiBzdHJpbmdcclxuICAgIH1cclxuICAgIHRyYWNrczoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIHVpZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHRyYWNrOiB7XHJcbiAgICAgICAgICAgICAgICBzYXZlZDogYm9vbGVhblxyXG4gICAgICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIHBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBkaXNjTnVtYmVyOiBudW1iZXJcclxuICAgICAgICAgICAgICAgIHRyYWNrTnVtYmVyOiBudW1iZXJcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRSYXRpbmc6IHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZWxpbmtpbmdJbmZvcm1hdGlvbjogYW55XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsTWlsbGlzZWNvbmRzOiBudW1iZXJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBsYXlhYmlsaXR5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWFibGU6IGJvb2xlYW5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFydGlzdHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIG1vcmVBbGJ1bXNCeUFydGlzdDoge1xyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIGRpc2NvZ3JhcGh5OiB7XHJcbiAgICAgICAgICAgICAgICBwb3B1bGFyUmVsZWFzZXNBbGJ1bXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY292ZXJBcnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWFiaWxpdHk6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlhYmxlOiBib29sZWFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJpbmdJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZUlkOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlVXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfT5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hHUUxBcnRpc3RSZWxhdGVkUmVzID0gQXJyYXk8e1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBwcm9maWxlOiB7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICB9XHJcbiAgICB2aXN1YWxzOiB7XHJcbiAgICAgICAgYXZhdGFySW1hZ2U6IHtcclxuICAgICAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0+XHJcblxyXG5leHBvcnQgdHlwZSBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrc1JlcyA9IEFycmF5PHtcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBzdHJpbmdcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgZHVyYXRpb246IFNwb3RBcGlEdXJhdGlvblxyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bU1pblxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdE1pbltdXHJcbiAgICBkaXNjTnVtYmVyOiBudW1iZXJcclxuICAgIHRyYWNrTnVtYmVyOiBudW1iZXJcclxuICAgIGlzRXhwbGljaXQ6IGJvb2xlYW5cclxuICAgIGlzUGxheWFibGU6IGJvb2xlYW5cclxuICAgIGlzTG9jYWw6IGJvb2xlYW5cclxuICAgIGlzMTlQbHVzT25seTogYm9vbGVhblxyXG4gICAgYWRkZWRBdDogc3RyaW5nXHJcbn0+XHJcblxyXG5leHBvcnQgdHlwZSBmZXRjaFdlYlBsYXlsaXN0UmVzID0gQXJyYXk8e1xyXG4gICAgdWlkOiBzdHJpbmdcclxuICAgIHBsYXlJbmRleDogbnVsbFxyXG4gICAgYWRkZWRBdDogc3RyaW5nXHJcbiAgICBhZGRlZEJ5OiB7XHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgdXNlcm5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmdcclxuICAgICAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZTJbXVxyXG4gICAgfVxyXG4gICAgZm9ybWF0TGlzdEF0dHJpYnV0ZXM6IHt9XHJcbiAgICB0eXBlOiBcInRyYWNrXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhbGJ1bTogU3BvdEFwaUFsYnVtTWluXHJcbiAgICBhcnRpc3RzOiBTcG90QXBpQXJ0aXN0TWluW11cclxuICAgIGRpc2NOdW1iZXI6IG51bWJlclxyXG4gICAgdHJhY2tOdW1iZXI6IG51bWJlclxyXG4gICAgZHVyYXRpb246IFNwb3RBcGlEdXJhdGlvblxyXG4gICAgaXNFeHBsaWNpdDogYm9vbGVhblxyXG4gICAgaXNMb2NhbDogYm9vbGVhblxyXG4gICAgaXNQbGF5YWJsZTogYm9vbGVhblxyXG4gICAgaXMxOVBsdXNPbmx5OiBib29sZWFuXHJcbn0+XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIGZldGNoVHJhY2tMRk1BUElSZXMge1xyXG4gICAgdHJhY2s6IHtcclxuICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgIGR1cmF0aW9uOiBzdHJpbmdcclxuICAgICAgICBzdHJlYW1hYmxlOiB7XHJcbiAgICAgICAgICAgIFwiI3RleHRcIjogc3RyaW5nXHJcbiAgICAgICAgICAgIGZ1bGx0cmFjazogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3RlbmVyczogc3RyaW5nXHJcbiAgICAgICAgcGxheWNvdW50OiBzdHJpbmdcclxuICAgICAgICBhcnRpc3Q6IHtcclxuICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgIG1iaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgICBhbGJ1bToge1xyXG4gICAgICAgICAgICBhcnRpc3Q6IHN0cmluZ1xyXG4gICAgICAgICAgICB0aXRsZTogc3RyaW5nXHJcbiAgICAgICAgICAgIG1iaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgICAgICBpbWFnZTogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgXCIjdGV4dFwiOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIHNpemU6IHN0cmluZ1xyXG4gICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICBcIkBhdHRyXCI6IHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB1c2VycGxheWNvdW50OiBzdHJpbmdcclxuICAgICAgICB1c2VybG92ZWQ6IHN0cmluZ1xyXG4gICAgICAgIHRvcHRhZ3M6IHtcclxuICAgICAgICAgICAgdGFnOiBBcnJheTx7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIHVybDogc3RyaW5nXHJcbiAgICAgICAgICAgIH0+XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdpa2k6IHtcclxuICAgICAgICAgICAgcHVibGlzaGVkOiBzdHJpbmdcclxuICAgICAgICAgICAgc3VtbWFyeTogc3RyaW5nXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFsYnVtTWluIHtcclxuICAgIHR5cGU6IFwiYWxidW1cIlxyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGFydGlzdDogU3BvdEFwaUFydGlzdE1pblxyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2UyW11cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpSW1hZ2UyIHtcclxuICAgIHVybDogc3RyaW5nXHJcbiAgICBsYWJlbDogXCJzbWFsbFwiIHwgXCJzdGFuZGFyZFwiIHwgXCJsYXJnZVwiIHwgXCJ4bGFyZ2VcIlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlUcmFjayB7XHJcbiAgICBhbGJ1bTogU3BvdEFwaUFsYnVtXHJcbiAgICBhcnRpc3RzOiBTcG90QXBpQXJ0aXN0W11cclxuICAgIGF2YWlsYWJsZV9tYXJrZXRzOiBzdHJpbmdbXVxyXG4gICAgZGlzY19udW1iZXI6IG51bWJlclxyXG4gICAgZHVyYXRpb25fbXM6IG51bWJlclxyXG4gICAgZXhwbGljaXQ6IGJvb2xlYW5cclxuICAgIGV4dGVybmFsX2lkczogU3BvdEFwaUVJRHNcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBpc19wbGF5YWJsZTogYm9vbGVhblxyXG4gICAgbGlua2VkX2Zyb206IHt9XHJcbiAgICByZXN0cmljdGlvbnM6IFNwb3RBcGlSZXN0cmljdGlvbnNcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgcG9wdWxhcml0eTogbnVtYmVyXHJcbiAgICBwcmV2aWV3X3VybDogc3RyaW5nXHJcbiAgICB0cmFja19udW1iZXI6IG51bWJlclxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIGlzX2xvY2FsOiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFydGlzdCB7XHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGZvbGxvd2VyczogU3BvdEFwaUZvbGxvd2Vyc1xyXG4gICAgZ2VucmVzOiBzdHJpbmdbXVxyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHBvcHVsYXJpdHk6IG51bWJlclxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpQXJ0aXN0TWluIHtcclxuICAgIHR5cGU6IFwiYXJ0aXN0XCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFsYnVtIHtcclxuICAgIGFsYnVtX3R5cGU6IHN0cmluZ1xyXG4gICAgdG90YWxfdHJhY2tzOiBudW1iZXJcclxuICAgIGF2YWlsYWJsZV9tYXJrZXRzOiBzdHJpbmdbXVxyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlW11cclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgcmVsZWFzZV9kYXRlOiBzdHJpbmdcclxuICAgIHJlbGVhc2VfZGF0ZV9wcmVjaXNpb246IHN0cmluZ1xyXG4gICAgcmVzdHJpY3Rpb25zOiBTcG90QXBpUmVzdHJpY3Rpb25zXHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgY29weXJpZ2h0czogQXJyYXk8e1xyXG4gICAgICAgIHRleHQ6IHN0cmluZ1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgfT5cclxuICAgIGV4dGVybmFsX2lkczogU3BvdEFwaUVJRHNcclxuICAgIGdlbnJlczogc3RyaW5nW11cclxuICAgIGxhYmVsOiBzdHJpbmdcclxuICAgIHBvcHVsYXJpdHk6IG51bWJlclxyXG4gICAgYWxidW1fZ3JvdXA6IHN0cmluZ1xyXG4gICAgYXJ0aXN0czogQXJyYXk8e1xyXG4gICAgICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgICAgIGlkOiBzdHJpbmdcclxuICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIH0+XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUVVcmxzIHtcclxuICAgIHNwb3RpZnk6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlFSURzIHtcclxuICAgIGlzcmM6IHN0cmluZ1xyXG4gICAgZWFuOiBzdHJpbmdcclxuICAgIHVwYzogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUltYWdlIHtcclxuICAgIHVybDogc3RyaW5nXHJcbiAgICB3aWR0aDogbnVtYmVyXHJcbiAgICBoZWlnaHQ6IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlSZXN0cmljdGlvbnMge1xyXG4gICAgcmVhc29uOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRm9sbG93ZXJzIHtcclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgdG90YWw6IG51bWJlclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUR1cmF0aW9uIHtcclxuICAgIG1pbGxpc2Vjb25kczogbnVtYmVyXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpUGxheWxpc3Qge1xyXG4gICAgY29sbGFib3JhdGl2ZTogYm9vbGVhblxyXG4gICAgZGVzY3JpcHRpb246IHN0cmluZ1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBmb2xsb3dlcnM6IHtcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICB0b3RhbDogbnVtYmVyXHJcbiAgICB9XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBTcG90aWZ5SURcclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlW11cclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgb3duZXI6IFNwb3RBcGlPd25lclxyXG4gICAgcHVibGljOiBib29sZWFuXHJcbiAgICBzbmFwc2hvdF9pZDogc3RyaW5nXHJcbiAgICB0cmFja3M6IHtcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICBsaW1pdDogbnVtYmVyXHJcbiAgICAgICAgbmV4dDogc3RyaW5nXHJcbiAgICAgICAgb2Zmc2V0OiBudW1iZXJcclxuICAgICAgICBwcmV2aW91czogc3RyaW5nXHJcbiAgICAgICAgdG90YWw6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIGFkZGVkX2F0OiBzdHJpbmdcclxuICAgICAgICAgICAgYWRkZWRfYnk6IFNwb3RBcGlPd25lclxyXG4gICAgICAgICAgICBpc19sb2NhbDogYm9vbGVhblxyXG4gICAgICAgICAgICB0cmFjazogU3BvdEFwaVRyYWNrXHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaU93bmVyIHtcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgZm9sbG93ZXJzPzoge1xyXG4gICAgICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXJcclxuICAgIH1cclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IFNwb3RpZnlJRFxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIGRpc3BsYXlfbmFtZT86IHN0cmluZ1xyXG4gICAgbmFtZT86IHN0cmluZ1xyXG59XHJcblxyXG4vL1RPRE86IEJldHRlciBUUyBpbnRlcmZhY2UgZm9yIHJlY3Vyc2l2ZSBmZXRjaFBsYXRGb2xkZXJSZXNcclxuZXhwb3J0IGludGVyZmFjZSBmZXRjaFBsYXRGb2xkZXJSZXMge1xyXG4gICAgdHlwZTogXCJmb2xkZXJcIiB8IFwicGxhY2Vob2xkZXJcIiB8IFwicGxheWxpc3RcIlxyXG4gICAgYWRkZWRBdDogc3RyaW5nXHJcbiAgICBpdGVtcz86IEFycmF5PGZldGNoUGxhdEZvbGRlclJlcz5cclxuICAgIG5hbWU/OiBzdHJpbmdcclxuICAgIHVyaTogc3RyaW5nXHJcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZ1xyXG4gICAgaW1hZ2VzPzogU3BvdEFwaUltYWdlMltdXHJcbiAgICBtYWRlRm9yPzogbnVsbFxyXG4gICAgb3duZXI/OiB7XHJcbiAgICAgICAgdHlwZTogXCJ1c2VyXCJcclxuICAgICAgICB1cmk6IHN0cmluZ1xyXG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmdcclxuICAgICAgICBkaXNwbGF5TmFtZTogc3RyaW5nXHJcbiAgICAgICAgaW1hZ2VzOiBhbnlbXVxyXG4gICAgfVxyXG4gICAgdG90YWxMZW5ndGg/OiBudW1iZXJcclxuICAgIHVuZmlsdGVyZWRUb3RhbExlbmd0aD86IG51bWJlclxyXG4gICAgdG90YWxMaWtlcz86IG51bGxcclxuICAgIGR1cmF0aW9uPzogbnVsbFxyXG4gICAgaXNDb2xsYWJvcmF0aXZlPzogYm9vbGVhblxyXG4gICAgaXNMb2FkZWQ/OiBib29sZWFuXHJcbiAgICBpc093bmVkQnlTZWxmPzogYm9vbGVhblxyXG4gICAgaXNQdWJsaXNoZWQ/OiBib29sZWFuXHJcbiAgICBoYXNFcGlzb2Rlcz86IG51bGxcclxuICAgIGhhc1Nwb3RpZnlUcmFja3M/OiBudWxsXHJcbiAgICBoYXNTcG90aWZ5QXVkaW9ib29rcz86IG51bGxcclxuICAgIGNhbkFkZD86IGJvb2xlYW5cclxuICAgIGNhblJlbW92ZT86IGJvb2xlYW5cclxuICAgIGNhblBsYXk/OiBudWxsXHJcbiAgICBmb3JtYXRMaXN0RGF0YT86IHtcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICBhdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9XHJcbiAgICB9IHwgbnVsbFxyXG4gICAgY2FuUmVwb3J0QW5ub3RhdGlvbkFidXNlPzogYm9vbGVhblxyXG4gICAgaGFzRGF0ZUFkZGVkPzogYm9vbGVhblxyXG4gICAgcGVybWlzc2lvbnM/OiBudWxsXHJcbiAgICBjb2xsYWJvcmF0b3JzPzoge1xyXG4gICAgICAgIGNvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogYW55W11cclxuICAgIH1cclxuICAgIGlzTm90Rm91bmQ/OiBib29sZWFuXHJcbiAgICBpc0ZvcmJpZGRlbj86IGJvb2xlYW5cclxufVxyXG4iLAogICJpbXBvcnQgeyBpbnZva2VOdWxsYXJ5IH0gZnJvbSBcImZwLXRzLXN0ZC9GdW5jdGlvblwiXHJcbmltcG9ydCB7IHBpcGUgYXMgcCB9IGZyb20gXCJmcC10cy9mdW5jdGlvblwiXHJcbmltcG9ydCB7IHBNY2hhaW4sIGNodW5ja2lmeSwgbWVtb2l6ZTIgfSBmcm9tIFwiLi9mcFwiXHJcbmltcG9ydCB7IFNwb3RpZnlJRCwgU3BvdGlmeUxvYywgU3BvdGlmeVVSSSwgZXNjYXBlUmVnZXggfSBmcm9tIFwiLi91dGlsXCJcclxuXHJcbmNvbnN0IHsgVVJJIH0gPSBTcGljZXRpZnlcclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBHcmFwaFFMICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBbGJ1bSA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gNDg3KSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMuZ2V0QWxidW0sIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBsb2NhbGU6IFNwaWNldGlmeS5Mb2NhbGUuZ2V0TG9jYWxlKCksXHJcbiAgICAgICAgICAgIG9mZnNldCxcclxuICAgICAgICAgICAgbGltaXQsXHJcbiAgICAgICAgfSlcclxuICAgICkuZGF0YS5hbGJ1bVVuaW9uIGFzIGZldGNoR1FMQWxidW1SZXNcclxuXHJcbnR5cGUgZmV0Y2hBcnRpc3RHUUxSZXMgPSBhbnlcclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQXJ0aXN0T3ZlcnZpZXcgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMucXVlcnlBcnRpc3RPdmVydmlldywge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIGxvY2FsZTogU3BpY2V0aWZ5LkxvY2FsZS5nZXRMb2NhbGUoKSxcclxuICAgICAgICAgICAgaW5jbHVkZVByZXJlbGVhc2U6IHRydWUsXHJcbiAgICAgICAgfSlcclxuICAgICkuZGF0YS5hcnRpc3RVbmlvbiBhcyBmZXRjaEFydGlzdEdRTFJlc1xyXG5cclxudHlwZSBmZXRjaEdRTEFydGlzdERpc2NvZ3JhcGh5UmVzID0gYW55XHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFydGlzdERpc2NvZ3JhcGh5ID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSAxMTYpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5xdWVyeUFydGlzdERpc2NvZ3JhcGh5QWxsLCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgb2Zmc2V0LFxyXG4gICAgICAgICAgICBsaW1pdCxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFydGlzdFVuaW9uLmRpc2NvZ3JhcGh5LmFsbC5pdGVtcyBhcyBmZXRjaEdRTEFydGlzdERpc2NvZ3JhcGh5UmVzXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBcnRpc3RSZWxhdGVkID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLnF1ZXJ5QXJ0aXN0UmVsYXRlZCwge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIGxvY2FsZTogU3BpY2V0aWZ5LkxvY2FsZS5nZXRMb2NhbGUoKSxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFydGlzdFVuaW9uLnJlbGF0ZWRDb250ZW50LnJlbGF0ZWRBcnRpc3RzLml0ZW1zIGFzIGZldGNoR1FMQXJ0aXN0UmVsYXRlZFJlc1xyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFNwb3RpZnkgV2ViIEFQSSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVXZWJQbGF5bGlzdFRyYWNrcyA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeUlELCB0cmFja3M6IFNwb3RpZnlVUklbXSkgPT5cclxuICAgIFNwaWNldGlmeS5Db3Ntb3NBc3luYy5kZWwoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL3BsYXlsaXN0cy8ke3BsYXlsaXN0fS90cmFja3NgLCB7XHJcbiAgICAgICAgdHJhY2tzOiB0cmFja3MubWFwKHVyaSA9PiAoeyB1cmkgfSkpLFxyXG4gICAgfSlcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYkFydGlzdHNTcG90ID0gY2h1bmNraWZ5KDUwKShcclxuICAgIGFzeW5jIChpZHM6IFNwb3RpZnlJRFtdKSA9PlxyXG4gICAgICAgIChhd2FpdCBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9hcnRpc3RzP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLmFydGlzdHMgYXMgU3BvdEFwaUFydGlzdFtdLFxyXG4pXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJQbGF5bGlzdHNTcG90ID0gY2h1bmNraWZ5KDEpKFxyXG4gICAgLy8gQHRzLWlnbm9yZSBjaHVua2lmeSB3aWxsIG5ldmVyIGNhbGwgd2l0aCBlbXB0eSBhcnJheVxyXG4gICAgYXN5bmMgKFtpZF06IFtTcG90aWZ5SURdKSA9PiBbXHJcbiAgICAgICAgKGF3YWl0IFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL3BsYXlsaXN0cy8ke2lkfWApKSBhcyBTcG90QXBpUGxheWxpc3QsXHJcbiAgICBdLFxyXG4pXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYkFsYnVtc1Nwb3QgPSBjaHVuY2tpZnkoNTApKFxyXG4gICAgYXN5bmMgKGlkczogU3BvdGlmeUlEW10pID0+XHJcbiAgICAgICAgKGF3YWl0IFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL2FsYnVtcz9pZHM9JHtpZHMuam9pbihcIixcIil9YCkpXHJcbiAgICAgICAgICAgIC5hbGJ1bXMgYXMgU3BvdEFwaUFsYnVtW10sXHJcbilcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlRyYWNrc1Nwb3QgPSBjaHVuY2tpZnkoNTApKFxyXG4gICAgYXN5bmMgKGlkczogU3BvdGlmeUlEW10pID0+XHJcbiAgICAgICAgKGF3YWl0IFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL3RyYWNrcz9pZHM9JHtpZHMuam9pbihcIixcIil9YCkpXHJcbiAgICAgICAgICAgIC50cmFja3MgYXMgU3BvdEFwaVRyYWNrW10sXHJcbilcclxuXHJcbmV4cG9ydCBjb25zdCBzZWFyY2hXZWJJdGVtU3BvdCA9IGFzeW5jIChxOiBzdHJpbmcsIHR5cGU6IHN0cmluZ1tdKSA9PlxyXG4gICAgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvc2VhcmNoP3E9JHtlbmNvZGVVUklDb21wb25lbnQocSl9JnR5cGU9JHt0eXBlLmpvaW4oXCIsXCIpfWApXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJTb3VuZE9mU3BvdGlmeVBsYXlsaXN0ID0gYXN5bmMgKGdlbnJlOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IG5hbWUgPSBgVGhlIFNvdW5kIE9mICR7Z2VucmV9YFxyXG4gICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKGBeJHtlc2NhcGVSZWdleChuYW1lKX0kYCwgXCJpXCIpXHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBzZWFyY2hXZWJJdGVtU3BvdChuYW1lLCBbXCJwbGF5bGlzdFwiXSlcclxuICAgIGNvbnN0IGl0ZW0gPSByZXMucGxheWxpc3RzLml0ZW1zWzBdXHJcbiAgICByZXR1cm4gaXRlbT8ub3duZXIuaWQgPT09IFwidGhlc291bmRzb2ZzcG90aWZ5XCIgJiYgcmUudGVzdChpdGVtLm5hbWUpID8gaXRlbS51cmkgOiBudWxsXHJcbn1cclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBQbGF0Zm9ybSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0TGlrZWRUcmFja3MgPSBhc3luYyAoKSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5MaWJyYXJ5QVBJLmdldFRyYWNrcyh7XHJcbiAgICAgICAgICAgIGxpbWl0OiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcclxuICAgICAgICB9KVxyXG4gICAgKS5pdGVtcyBhcyBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrc1Jlc1xyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3MgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDEwMCkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uTGlicmFyeUFQSS5nZXRUcmFja3MoeyB1cmksIG9mZnNldCwgbGltaXQgfSkpLml0ZW1zIGFzIGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzUmVzXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0UGxheWxpc3RDb250ZW50cyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXlsaXN0QVBJLmdldENvbnRlbnRzKHVyaSkpLml0ZW1zIGFzIGZldGNoV2ViUGxheWxpc3RSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQbGF0Rm9sZGVyID0gYXN5bmMgKG5hbWU6IHN0cmluZywgbG9jYXRpb246IFNwb3RpZnlMb2MgPSB7fSkgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Sb290bGlzdEFQSS5jcmVhdGVGb2xkZXIobmFtZSwgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgbGlrZVBsYXRQbGF5bGlzdCA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+IGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Sb290bGlzdEFQSS5hZGQoW3VyaV0pXHJcblxyXG4vKiBSZXBsYWNlZCBieSBjcmVhdGVTUFBsYXlsaXN0RnJvbVRyYWNrcyAqL1xyXG5leHBvcnQgY29uc3QgY3JlYXRlUGxhdFBsYXlsaXN0ID0gYXN5bmMgKG5hbWU6IHN0cmluZywgbG9jYXRpb246IFNwb3RpZnlMb2MgPSB7fSkgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Sb290bGlzdEFQSS5jcmVhdGVQbGF5bGlzdChuYW1lLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVTUFBsYXlsaXN0RnJvbVRyYWNrcyA9IChuYW1lOiBzdHJpbmcsIHRyYWNrczogU3BvdGlmeVVSSVtdLCBmb2xkZXI/OiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLnBvc3QoXCJzcDovL2NvcmUtcGxheWxpc3QvdjEvcm9vdGxpc3Q/cmVzcG9uc2VGb3JtYXQ9cHJvdG9idWZKc29uXCIsIHtcclxuICAgICAgICBvcGVyYXRpb246IFwiY3JlYXRlXCIsXHJcbiAgICAgICAgLi4uKGZvbGRlciA/IHsgYWZ0ZXI6IGZvbGRlciB9IDoge30pLFxyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgcGxheWxpc3Q6IHRydWUsXHJcbiAgICAgICAgdXJpczogdHJhY2tzLFxyXG4gICAgfSlcclxuXHJcbmV4cG9ydCBjb25zdCBzZXRQbGF0UGxheWxpc3RWaXNpYmlsaXR5ID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5VVJJLCB2aXNpYmxlRm9yQWxsOiBib29sZWFuKSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXlsaXN0UGVybWlzc2lvbnNBUEkuc2V0QmFzZVBlcm1pc3Npb24ocGxheWxpc3QsIHZpc2libGVGb3JBbGwgPyBcIlZJRVdFUlwiIDogXCJCTE9DS0VEXCIpXHJcbmV4cG9ydCBjb25zdCBzZXRQbGF0UGxheWxpc3RQdWJsaXNoZWQgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlVUkksIHB1Ymxpc2hlZDogYm9vbGVhbikgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Sb290bGlzdEFQSS5zZXRQdWJsaXNoZWRTdGF0ZShwbGF5bGlzdCwgcHVibGlzaGVkKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdEZvbGRlciA9IGFzeW5jIChmb2xkZXI/OiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Sb290bGlzdEFQSS5nZXRDb250ZW50cyh7IGZvbGRlclVyaTogZm9sZGVyIH0pKSBhcyBmZXRjaFBsYXRGb2xkZXJSZXNcclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdFJvb3RGb2xkZXIgPSAoKSA9PiBmZXRjaFBsYXRGb2xkZXIodW5kZWZpbmVkKVxyXG5cclxuZXhwb3J0IGNvbnN0IGFkZFBsYXRQbGF5bGlzdFRyYWNrcyA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeVVSSSwgdHJhY2tzOiBTcG90aWZ5VVJJW10sIGxvY2F0aW9uOiBTcG90aWZ5TG9jID0ge30pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkuYWRkKHBsYXlsaXN0LCB0cmFja3MsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IG1vdmVQbGF0UGxheWxpc3RUcmFja3MgPSBhc3luYyAoXHJcbiAgICBwbGF5bGlzdDogU3BvdGlmeVVSSSxcclxuICAgIHRyYWNrczogQXJyYXk8eyB1aWQ6IHN0cmluZyB9PixcclxuICAgIGxvY2F0aW9uOiBTcG90aWZ5TG9jID0ge30sXHJcbikgPT4gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXlsaXN0QVBJLm1vdmUocGxheWxpc3QsIHRyYWNrcywgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0UGxheWxpc3RFbmhhbmNlZFNvbmdzMzAwID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSAzMDApID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkVuaGFuY2VBUEkuZ2V0UGFnZSh1cmksIC8qIGl0ZXJhdGlvbiAqLyAwLCAvKiBzZXNzaW9uSWQgKi8gMCwgb2Zmc2V0LCBsaW1pdCkpLmVuaGFuY2VQYWdlXHJcbiAgICAgICAgLnBhZ2VJdGVtcyBhcyBhbnlbXVxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0UGxheWxpc3RFbmhhbmNlZFNvbmdzID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCk6IFByb21pc2U8YW55W10+ID0+IHtcclxuICAgIGNvbnN0IG5leHRQYWdlSXRlbXMgPSBhd2FpdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MzMDAodXJpLCBvZmZzZXQpXHJcbiAgICBpZiAobmV4dFBhZ2VJdGVtcz8ubGVuZ3RoIDwgMzAwKSByZXR1cm4gbmV4dFBhZ2VJdGVtc1xyXG4gICAgZWxzZSByZXR1cm4gbmV4dFBhZ2VJdGVtcy5jb25jYXQoZmV0Y2hQbGF0UGxheWxpc3RFbmhhbmNlZFNvbmdzKHVyaSwgb2Zmc2V0ICsgMzAwKSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoTG9jYWxUcmFja3MgPSBhc3luYyAoKSA9PiBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uTG9jYWxGaWxlc0FQSS5nZXRUcmFja3MoKVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIE5vbiBTcG90aWZ5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFRyYWNrTEZNQVBJID0gYXN5bmMgKExGTUFwaUtleTogc3RyaW5nLCBhcnRpc3Q6IHN0cmluZywgdHJhY2tOYW1lOiBzdHJpbmcsIGxhc3RGbVVzZXJuYW1lID0gXCJcIikgPT4ge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChcImh0dHBzOi8vd3MuYXVkaW9zY3JvYmJsZXIuY29tLzIuMC9cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwibWV0aG9kXCIsIFwidHJhY2suZ2V0SW5mb1wiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJhcGlfa2V5XCIsIExGTUFwaUtleSlcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiYXJ0aXN0XCIsIGFydGlzdClcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidHJhY2tcIiwgdHJhY2tOYW1lKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJmb3JtYXRcIiwgXCJqc29uXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInVzZXJuYW1lXCIsIGxhc3RGbVVzZXJuYW1lKVxyXG5cclxuICAgIHJldHVybiAoYXdhaXQgZmV0Y2godXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKSkgYXMgZmV0Y2hUcmFja0xGTUFQSVJlc1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hUcmFja0xGTUFQSU1lbW9pemVkID0gbWVtb2l6ZTIoZmV0Y2hUcmFja0xGTUFQSSlcclxuXHJcbmV4cG9ydCBjb25zdCBzZWFyY2hZb3V0dWJlID0gYXN5bmMgKFlvdVR1YmVBcGlLZXk6IHN0cmluZywgc2VhcmNoU3RyaW5nOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS95b3V0dWJlL3YzL3NlYXJjaFwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJwYXJ0XCIsIFwic25pcHBldFwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJtYXhSZXN1bHRzXCIsIFwiMTBcIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwicVwiLCBzZWFyY2hTdHJpbmcpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInR5cGVcIiwgXCJ2aWRlb1wiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJrZXlcIiwgWW91VHViZUFwaUtleSlcclxuXHJcbiAgICByZXR1cm4gKGF3YWl0IGZldGNoKHVybCkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkpIGFzIGFueVtdXHJcbn1cclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBUeXBlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIGZldGNoR1FMQWxidW1SZXMge1xyXG4gICAgX190eXBlbmFtZTogXCJhbGJ1bVwiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgYXJ0aXN0czoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIGlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgIHByb2ZpbGU6IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZpc3VhbHM6IHtcclxuICAgICAgICAgICAgICAgIGF2YXRhckltYWdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzaGFyaW5nSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgc2hhcmVVcmw6IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIGNvdmVyQXJ0OiB7XHJcbiAgICAgICAgZXh0cmFjdGVkQ29sb3JzOiB7XHJcbiAgICAgICAgICAgIGNvbG9yUmF3OiB7XHJcbiAgICAgICAgICAgICAgICBoZXg6IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbG9yTGlnaHQ6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JEYXJrOiB7XHJcbiAgICAgICAgICAgICAgICBoZXg6IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICB9XHJcbiAgICBkaXNjczoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIG51bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgIHRyYWNrczoge1xyXG4gICAgICAgICAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgcmVsZWFzZXM6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgZGF0ZToge1xyXG4gICAgICAgIGlzb1N0cmluZzogc3RyaW5nXHJcbiAgICAgICAgcHJlY2lzaW9uOiBzdHJpbmdcclxuICAgIH1cclxuICAgIHBsYXlhYmlsaXR5OiB7XHJcbiAgICAgICAgcGxheWFibGU6IGJvb2xlYW5cclxuICAgICAgICByZWFzb246IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgbGFiZWw6IHN0cmluZ1xyXG4gICAgY29weXJpZ2h0OiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgICAgIHRleHQ6IHN0cmluZ1xyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICBjb3VydGVzeUxpbmU6IHN0cmluZ1xyXG4gICAgc2F2ZWQ6IGJvb2xlYW5cclxuICAgIHNoYXJpbmdJbmZvOiB7XHJcbiAgICAgICAgc2hhcmVVcmw6IHN0cmluZ1xyXG4gICAgICAgIHNoYXJlSWQ6IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgdHJhY2tzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgdWlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdHJhY2s6IHtcclxuICAgICAgICAgICAgICAgIHNhdmVkOiBib29sZWFuXHJcbiAgICAgICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgcGxheWNvdW50OiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIGRpc2NOdW1iZXI6IG51bWJlclxyXG4gICAgICAgICAgICAgICAgdHJhY2tOdW1iZXI6IG51bWJlclxyXG4gICAgICAgICAgICAgICAgY29udGVudFJhdGluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlbGlua2luZ0luZm9ybWF0aW9uOiBhbnlcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxNaWxsaXNlY29uZHM6IG51bWJlclxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGxheWFiaWxpdHk6IHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXJ0aXN0czoge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgbW9yZUFsYnVtc0J5QXJ0aXN0OiB7XHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgZGlzY29ncmFwaHk6IHtcclxuICAgICAgICAgICAgICAgIHBvcHVsYXJSZWxlYXNlc0FsYnVtczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBudW1iZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3ZlckFydDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5YWJpbGl0eToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWFibGU6IGJvb2xlYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmluZ0luZm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlSWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVVcmw6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9PlxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBmZXRjaEdRTEFydGlzdFJlbGF0ZWRSZXMgPSBBcnJheTx7XHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIHByb2ZpbGU6IHtcclxuICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgIH1cclxuICAgIHZpc3VhbHM6IHtcclxuICAgICAgICBhdmF0YXJJbWFnZToge1xyXG4gICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufT5cclxuXHJcbmV4cG9ydCB0eXBlIGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzUmVzID0gQXJyYXk8e1xyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IHN0cmluZ1xyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBkdXJhdGlvbjogU3BvdEFwaUR1cmF0aW9uXHJcbiAgICBhbGJ1bTogU3BvdEFwaUFsYnVtTWluXHJcbiAgICBhcnRpc3RzOiBTcG90QXBpQXJ0aXN0TWluW11cclxuICAgIGRpc2NOdW1iZXI6IG51bWJlclxyXG4gICAgdHJhY2tOdW1iZXI6IG51bWJlclxyXG4gICAgaXNFeHBsaWNpdDogYm9vbGVhblxyXG4gICAgaXNQbGF5YWJsZTogYm9vbGVhblxyXG4gICAgaXNMb2NhbDogYm9vbGVhblxyXG4gICAgaXMxOVBsdXNPbmx5OiBib29sZWFuXHJcbiAgICBhZGRlZEF0OiBzdHJpbmdcclxufT5cclxuXHJcbmV4cG9ydCB0eXBlIGZldGNoV2ViUGxheWxpc3RSZXMgPSBBcnJheTx7XHJcbiAgICB1aWQ6IHN0cmluZ1xyXG4gICAgcGxheUluZGV4OiBudWxsXHJcbiAgICBhZGRlZEF0OiBzdHJpbmdcclxuICAgIGFkZGVkQnk6IHtcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICB1c2VybmFtZTogc3RyaW5nXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGltYWdlczogU3BvdEFwaUltYWdlMltdXHJcbiAgICB9XHJcbiAgICBmb3JtYXRMaXN0QXR0cmlidXRlczoge31cclxuICAgIHR5cGU6IFwidHJhY2tcIlxyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGFsYnVtOiBTcG90QXBpQWxidW1NaW5cclxuICAgIGFydGlzdHM6IFNwb3RBcGlBcnRpc3RNaW5bXVxyXG4gICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICBkdXJhdGlvbjogU3BvdEFwaUR1cmF0aW9uXHJcbiAgICBpc0V4cGxpY2l0OiBib29sZWFuXHJcbiAgICBpc0xvY2FsOiBib29sZWFuXHJcbiAgICBpc1BsYXlhYmxlOiBib29sZWFuXHJcbiAgICBpczE5UGx1c09ubHk6IGJvb2xlYW5cclxufT5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hUcmFja0xGTUFQSVJlcyB7XHJcbiAgICB0cmFjazoge1xyXG4gICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgIG1iaWQ6IHN0cmluZ1xyXG4gICAgICAgIHVybDogc3RyaW5nXHJcbiAgICAgICAgZHVyYXRpb246IHN0cmluZ1xyXG4gICAgICAgIHN0cmVhbWFibGU6IHtcclxuICAgICAgICAgICAgXCIjdGV4dFwiOiBzdHJpbmdcclxuICAgICAgICAgICAgZnVsbHRyYWNrOiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICAgICAgbGlzdGVuZXJzOiBzdHJpbmdcclxuICAgICAgICBwbGF5Y291bnQ6IHN0cmluZ1xyXG4gICAgICAgIGFydGlzdDoge1xyXG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgbWJpZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHVybDogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFsYnVtOiB7XHJcbiAgICAgICAgICAgIGFydGlzdDogc3RyaW5nXHJcbiAgICAgICAgICAgIHRpdGxlOiBzdHJpbmdcclxuICAgICAgICAgICAgbWJpZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHVybDogc3RyaW5nXHJcbiAgICAgICAgICAgIGltYWdlOiBBcnJheTx7XHJcbiAgICAgICAgICAgICAgICBcIiN0ZXh0XCI6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgc2l6ZTogc3RyaW5nXHJcbiAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgIFwiQGF0dHJcIjoge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVzZXJwbGF5Y291bnQ6IHN0cmluZ1xyXG4gICAgICAgIHVzZXJsb3ZlZDogc3RyaW5nXHJcbiAgICAgICAgdG9wdGFnczoge1xyXG4gICAgICAgICAgICB0YWc6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgfT5cclxuICAgICAgICB9XHJcbiAgICAgICAgd2lraToge1xyXG4gICAgICAgICAgICBwdWJsaXNoZWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICBzdW1tYXJ5OiBzdHJpbmdcclxuICAgICAgICAgICAgY29udGVudDogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpQWxidW1NaW4ge1xyXG4gICAgdHlwZTogXCJhbGJ1bVwiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgYXJ0aXN0OiBTcG90QXBpQXJ0aXN0TWluXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZTJbXVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlJbWFnZTIge1xyXG4gICAgdXJsOiBzdHJpbmdcclxuICAgIGxhYmVsOiBcInNtYWxsXCIgfCBcInN0YW5kYXJkXCIgfCBcImxhcmdlXCIgfCBcInhsYXJnZVwiXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaVRyYWNrIHtcclxuICAgIGFsYnVtOiBTcG90QXBpQWxidW1cclxuICAgIGFydGlzdHM6IFNwb3RBcGlBcnRpc3RbXVxyXG4gICAgYXZhaWxhYmxlX21hcmtldHM6IHN0cmluZ1tdXHJcbiAgICBkaXNjX251bWJlcjogbnVtYmVyXHJcbiAgICBkdXJhdGlvbl9tczogbnVtYmVyXHJcbiAgICBleHBsaWNpdDogYm9vbGVhblxyXG4gICAgZXh0ZXJuYWxfaWRzOiBTcG90QXBpRUlEc1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIGlzX3BsYXlhYmxlOiBib29sZWFuXHJcbiAgICBsaW5rZWRfZnJvbToge31cclxuICAgIHJlc3RyaWN0aW9uczogU3BvdEFwaVJlc3RyaWN0aW9uc1xyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIHByZXZpZXdfdXJsOiBzdHJpbmdcclxuICAgIHRyYWNrX251bWJlcjogbnVtYmVyXHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgaXNfbG9jYWw6IGJvb2xlYW5cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpQXJ0aXN0IHtcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgZm9sbG93ZXJzOiBTcG90QXBpRm9sbG93ZXJzXHJcbiAgICBnZW5yZXM6IHN0cmluZ1tdXHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlW11cclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgcG9wdWxhcml0eTogbnVtYmVyXHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBcnRpc3RNaW4ge1xyXG4gICAgdHlwZTogXCJhcnRpc3RcIlxyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBuYW1lOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpQWxidW0ge1xyXG4gICAgYWxidW1fdHlwZTogc3RyaW5nXHJcbiAgICB0b3RhbF90cmFja3M6IG51bWJlclxyXG4gICAgYXZhaWxhYmxlX21hcmtldHM6IHN0cmluZ1tdXHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICByZWxlYXNlX2RhdGU6IHN0cmluZ1xyXG4gICAgcmVsZWFzZV9kYXRlX3ByZWNpc2lvbjogc3RyaW5nXHJcbiAgICByZXN0cmljdGlvbnM6IFNwb3RBcGlSZXN0cmljdGlvbnNcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBjb3B5cmlnaHRzOiBBcnJheTx7XHJcbiAgICAgICAgdGV4dDogc3RyaW5nXHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICB9PlxyXG4gICAgZXh0ZXJuYWxfaWRzOiBTcG90QXBpRUlEc1xyXG4gICAgZ2VucmVzOiBzdHJpbmdbXVxyXG4gICAgbGFiZWw6IHN0cmluZ1xyXG4gICAgcG9wdWxhcml0eTogbnVtYmVyXHJcbiAgICBhbGJ1bV9ncm91cDogc3RyaW5nXHJcbiAgICBhcnRpc3RzOiBBcnJheTx7XHJcbiAgICAgICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgfT5cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRVVybHMge1xyXG4gICAgc3BvdGlmeTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUVJRHMge1xyXG4gICAgaXNyYzogc3RyaW5nXHJcbiAgICBlYW46IHN0cmluZ1xyXG4gICAgdXBjOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpSW1hZ2Uge1xyXG4gICAgdXJsOiBzdHJpbmdcclxuICAgIHdpZHRoOiBudW1iZXJcclxuICAgIGhlaWdodDogbnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaVJlc3RyaWN0aW9ucyB7XHJcbiAgICByZWFzb246IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlGb2xsb3dlcnMge1xyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICB0b3RhbDogbnVtYmVyXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRHVyYXRpb24ge1xyXG4gICAgbWlsbGlzZWNvbmRzOiBudW1iZXJcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlQbGF5bGlzdCB7XHJcbiAgICBjb2xsYWJvcmF0aXZlOiBib29sZWFuXHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nXHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGZvbGxvd2Vyczoge1xyXG4gICAgICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXJcclxuICAgIH1cclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IFNwb3RpZnlJRFxyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBvd25lcjogU3BvdEFwaU93bmVyXHJcbiAgICBwdWJsaWM6IGJvb2xlYW5cclxuICAgIHNuYXBzaG90X2lkOiBzdHJpbmdcclxuICAgIHRyYWNrczoge1xyXG4gICAgICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgICAgIGxpbWl0OiBudW1iZXJcclxuICAgICAgICBuZXh0OiBzdHJpbmdcclxuICAgICAgICBvZmZzZXQ6IG51bWJlclxyXG4gICAgICAgIHByZXZpb3VzOiBzdHJpbmdcclxuICAgICAgICB0b3RhbDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgYWRkZWRfYXQ6IHN0cmluZ1xyXG4gICAgICAgICAgICBhZGRlZF9ieTogU3BvdEFwaU93bmVyXHJcbiAgICAgICAgICAgIGlzX2xvY2FsOiBib29sZWFuXHJcbiAgICAgICAgICAgIHRyYWNrOiBTcG90QXBpVHJhY2tcclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpT3duZXIge1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBmb2xsb3dlcnM/OiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgdG90YWw6IG51bWJlclxyXG4gICAgfVxyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogU3BvdGlmeUlEXHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgZGlzcGxheV9uYW1lPzogc3RyaW5nXHJcbiAgICBuYW1lPzogc3RyaW5nXHJcbn1cclxuXHJcbi8vVE9ETzogQmV0dGVyIFRTIGludGVyZmFjZSBmb3IgcmVjdXJzaXZlIGZldGNoUGxhdEZvbGRlclJlc1xyXG5leHBvcnQgaW50ZXJmYWNlIGZldGNoUGxhdEZvbGRlclJlcyB7XHJcbiAgICB0eXBlOiBcImZvbGRlclwiIHwgXCJwbGFjZWhvbGRlclwiIHwgXCJwbGF5bGlzdFwiXHJcbiAgICBhZGRlZEF0OiBzdHJpbmdcclxuICAgIGl0ZW1zPzogQXJyYXk8ZmV0Y2hQbGF0Rm9sZGVyUmVzPlxyXG4gICAgbmFtZT86IHN0cmluZ1xyXG4gICAgdXJpOiBzdHJpbmdcclxuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nXHJcbiAgICBpbWFnZXM/OiBTcG90QXBpSW1hZ2UyW11cclxuICAgIG1hZGVGb3I/OiBudWxsXHJcbiAgICBvd25lcj86IHtcclxuICAgICAgICB0eXBlOiBcInVzZXJcIlxyXG4gICAgICAgIHVyaTogc3RyaW5nXHJcbiAgICAgICAgdXNlcm5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmdcclxuICAgICAgICBpbWFnZXM6IGFueVtdXHJcbiAgICB9XHJcbiAgICB0b3RhbExlbmd0aD86IG51bWJlclxyXG4gICAgdW5maWx0ZXJlZFRvdGFsTGVuZ3RoPzogbnVtYmVyXHJcbiAgICB0b3RhbExpa2VzPzogbnVsbFxyXG4gICAgZHVyYXRpb24/OiBudWxsXHJcbiAgICBpc0NvbGxhYm9yYXRpdmU/OiBib29sZWFuXHJcbiAgICBpc0xvYWRlZD86IGJvb2xlYW5cclxuICAgIGlzT3duZWRCeVNlbGY/OiBib29sZWFuXHJcbiAgICBpc1B1Ymxpc2hlZD86IGJvb2xlYW5cclxuICAgIGhhc0VwaXNvZGVzPzogbnVsbFxyXG4gICAgaGFzU3BvdGlmeVRyYWNrcz86IG51bGxcclxuICAgIGhhc1Nwb3RpZnlBdWRpb2Jvb2tzPzogbnVsbFxyXG4gICAgY2FuQWRkPzogYm9vbGVhblxyXG4gICAgY2FuUmVtb3ZlPzogYm9vbGVhblxyXG4gICAgY2FuUGxheT86IG51bGxcclxuICAgIGZvcm1hdExpc3REYXRhPzoge1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgIGF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cclxuICAgIH0gfCBudWxsXHJcbiAgICBjYW5SZXBvcnRBbm5vdGF0aW9uQWJ1c2U/OiBib29sZWFuXHJcbiAgICBoYXNEYXRlQWRkZWQ/OiBib29sZWFuXHJcbiAgICBwZXJtaXNzaW9ucz86IG51bGxcclxuICAgIGNvbGxhYm9yYXRvcnM/OiB7XHJcbiAgICAgICAgY291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBhbnlbXVxyXG4gICAgfVxyXG4gICAgaXNOb3RGb3VuZD86IGJvb2xlYW5cclxuICAgIGlzRm9yYmlkZGVuPzogYm9vbGVhblxyXG59XHJcbiIsCiAgImltcG9ydCB7IGludm9rZU51bGxhcnkgfSBmcm9tIFwiZnAtdHMtc3RkL0Z1bmN0aW9uXCJcclxuaW1wb3J0IHsgcGlwZSBhcyBwIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCJcclxuaW1wb3J0IHsgcE1jaGFpbiwgY2h1bmNraWZ5LCBtZW1vaXplMiB9IGZyb20gXCIuL2ZwXCJcclxuaW1wb3J0IHsgU3BvdGlmeUlELCBTcG90aWZ5TG9jLCBTcG90aWZ5VVJJLCBlc2NhcGVSZWdleCB9IGZyb20gXCIuL3V0aWxcIlxyXG5cclxuY29uc3QgeyBVUkkgfSA9IFNwaWNldGlmeVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIEdyYXBoUUwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFsYnVtID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSA0ODcpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5nZXRBbGJ1bSwge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIGxvY2FsZTogU3BpY2V0aWZ5LkxvY2FsZS5nZXRMb2NhbGUoKSxcclxuICAgICAgICAgICAgb2Zmc2V0LFxyXG4gICAgICAgICAgICBsaW1pdCxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFsYnVtVW5pb24gYXMgZmV0Y2hHUUxBbGJ1bVJlc1xyXG5cclxudHlwZSBmZXRjaEFydGlzdEdRTFJlcyA9IGFueVxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBcnRpc3RPdmVydmlldyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5xdWVyeUFydGlzdE92ZXJ2aWV3LCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgICAgICBpbmNsdWRlUHJlcmVsZWFzZTogdHJ1ZSxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFydGlzdFVuaW9uIGFzIGZldGNoQXJ0aXN0R1FMUmVzXHJcblxyXG50eXBlIGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHlSZXMgPSBhbnlcclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHkgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDExNikgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLnF1ZXJ5QXJ0aXN0RGlzY29ncmFwaHlBbGwsIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBvZmZzZXQsXHJcbiAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24uZGlzY29ncmFwaHkuYWxsLml0ZW1zIGFzIGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHlSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFydGlzdFJlbGF0ZWQgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMucXVlcnlBcnRpc3RSZWxhdGVkLCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24ucmVsYXRlZENvbnRlbnQucmVsYXRlZEFydGlzdHMuaXRlbXMgYXMgZmV0Y2hHUUxBcnRpc3RSZWxhdGVkUmVzXHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgU3BvdGlmeSBXZWIgQVBJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZVdlYlBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5SUQsIHRyYWNrczogU3BvdGlmeVVSSVtdKSA9PlxyXG4gICAgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmRlbChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvcGxheWxpc3RzLyR7cGxheWxpc3R9L3RyYWNrc2AsIHtcclxuICAgICAgICB0cmFja3M6IHRyYWNrcy5tYXAodXJpID0+ICh7IHVyaSB9KSksXHJcbiAgICB9KVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViQXJ0aXN0c1Nwb3QgPSBjaHVuY2tpZnkoNTApKFxyXG4gICAgYXN5bmMgKGlkczogU3BvdGlmeUlEW10pID0+XHJcbiAgICAgICAgKGF3YWl0IFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL2FydGlzdHM/aWRzPSR7aWRzLmpvaW4oXCIsXCIpfWApKVxyXG4gICAgICAgICAgICAuYXJ0aXN0cyBhcyBTcG90QXBpQXJ0aXN0W10sXHJcbilcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlBsYXlsaXN0c1Nwb3QgPSBjaHVuY2tpZnkoMSkoXHJcbiAgICAvLyBAdHMtaWdub3JlIGNodW5raWZ5IHdpbGwgbmV2ZXIgY2FsbCB3aXRoIGVtcHR5IGFycmF5XHJcbiAgICBhc3luYyAoW2lkXTogW1Nwb3RpZnlJRF0pID0+IFtcclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvcGxheWxpc3RzLyR7aWR9YCkpIGFzIFNwb3RBcGlQbGF5bGlzdCxcclxuICAgIF0sXHJcbilcclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViQWxidW1zU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvYWxidW1zP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLmFsYnVtcyBhcyBTcG90QXBpQWxidW1bXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViVHJhY2tzU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvdHJhY2tzP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLnRyYWNrcyBhcyBTcG90QXBpVHJhY2tbXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFdlYkl0ZW1TcG90ID0gYXN5bmMgKHE6IHN0cmluZywgdHlwZTogc3RyaW5nW10pID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9zZWFyY2g/cT0ke2VuY29kZVVSSUNvbXBvbmVudChxKX0mdHlwZT0ke3R5cGUuam9pbihcIixcIil9YClcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlNvdW5kT2ZTcG90aWZ5UGxheWxpc3QgPSBhc3luYyAoZ2VucmU6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgbmFtZSA9IGBUaGUgU291bmQgT2YgJHtnZW5yZX1gXHJcbiAgICBjb25zdCByZSA9IG5ldyBSZWdFeHAoYF4ke2VzY2FwZVJlZ2V4KG5hbWUpfSRgLCBcImlcIilcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHNlYXJjaFdlYkl0ZW1TcG90KG5hbWUsIFtcInBsYXlsaXN0XCJdKVxyXG4gICAgY29uc3QgaXRlbSA9IHJlcy5wbGF5bGlzdHMuaXRlbXNbMF1cclxuICAgIHJldHVybiBpdGVtPy5vd25lci5pZCA9PT0gXCJ0aGVzb3VuZHNvZnNwb3RpZnlcIiAmJiByZS50ZXN0KGl0ZW0ubmFtZSkgPyBpdGVtLnVyaSA6IG51bGxcclxufVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFBsYXRmb3JtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRMaWtlZFRyYWNrcyA9IGFzeW5jICgpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuZ2V0VHJhY2tzKHtcclxuICAgICAgICAgICAgbGltaXQ6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLFxyXG4gICAgICAgIH0pXHJcbiAgICApLml0ZW1zIGFzIGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzUmVzXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrcyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gMTAwKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5MaWJyYXJ5QVBJLmdldFRyYWNrcyh7IHVyaSwgb2Zmc2V0LCBsaW1pdCB9KSkuaXRlbXMgYXMgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdENvbnRlbnRzID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkuZ2V0Q29udGVudHModXJpKSkuaXRlbXMgYXMgZmV0Y2hXZWJQbGF5bGlzdFJlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBsYXRGb2xkZXIgPSBhc3luYyAobmFtZTogc3RyaW5nLCBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmNyZWF0ZUZvbGRlcihuYW1lLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBsaWtlUGxhdFBsYXlsaXN0ID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT4gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmFkZChbdXJpXSlcclxuXHJcbi8qIFJlcGxhY2VkIGJ5IGNyZWF0ZVNQUGxheWxpc3RGcm9tVHJhY2tzICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQbGF0UGxheWxpc3QgPSBhc3luYyAobmFtZTogc3RyaW5nLCBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmNyZWF0ZVBsYXlsaXN0KG5hbWUsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNQUGxheWxpc3RGcm9tVHJhY2tzID0gKG5hbWU6IHN0cmluZywgdHJhY2tzOiBTcG90aWZ5VVJJW10sIGZvbGRlcj86IFNwb3RpZnlVUkkpID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMucG9zdChcInNwOi8vY29yZS1wbGF5bGlzdC92MS9yb290bGlzdD9yZXNwb25zZUZvcm1hdD1wcm90b2J1Zkpzb25cIiwge1xyXG4gICAgICAgIG9wZXJhdGlvbjogXCJjcmVhdGVcIixcclxuICAgICAgICAuLi4oZm9sZGVyID8geyBhZnRlcjogZm9sZGVyIH0gOiB7fSksXHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBwbGF5bGlzdDogdHJ1ZSxcclxuICAgICAgICB1cmlzOiB0cmFja3MsXHJcbiAgICB9KVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldFBsYXRQbGF5bGlzdFZpc2liaWxpdHkgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlVUkksIHZpc2libGVGb3JBbGw6IGJvb2xlYW4pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RQZXJtaXNzaW9uc0FQSS5zZXRCYXNlUGVybWlzc2lvbihwbGF5bGlzdCwgdmlzaWJsZUZvckFsbCA/IFwiVklFV0VSXCIgOiBcIkJMT0NLRURcIilcclxuZXhwb3J0IGNvbnN0IHNldFBsYXRQbGF5bGlzdFB1Ymxpc2hlZCA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeVVSSSwgcHVibGlzaGVkOiBib29sZWFuKSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLnNldFB1Ymxpc2hlZFN0YXRlKHBsYXlsaXN0LCBwdWJsaXNoZWQpXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0Rm9sZGVyID0gYXN5bmMgKGZvbGRlcj86IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmdldENvbnRlbnRzKHsgZm9sZGVyVXJpOiBmb2xkZXIgfSkpIGFzIGZldGNoUGxhdEZvbGRlclJlc1xyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0Um9vdEZvbGRlciA9ICgpID0+IGZldGNoUGxhdEZvbGRlcih1bmRlZmluZWQpXHJcblxyXG5leHBvcnQgY29uc3QgYWRkUGxhdFBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5VVJJLCB0cmFja3M6IFNwb3RpZnlVUklbXSwgbG9jYXRpb246IFNwb3RpZnlMb2MgPSB7fSkgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5hZGQocGxheWxpc3QsIHRyYWNrcywgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgbW92ZVBsYXRQbGF5bGlzdFRyYWNrcyA9IGFzeW5jIChcclxuICAgIHBsYXlsaXN0OiBTcG90aWZ5VVJJLFxyXG4gICAgdHJhY2tzOiBBcnJheTx7IHVpZDogc3RyaW5nIH0+LFxyXG4gICAgbG9jYXRpb246IFNwb3RpZnlMb2MgPSB7fSxcclxuKSA9PiBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkubW92ZShwbGF5bGlzdCwgdHJhY2tzLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MzMDAgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDMwMCkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uRW5oYW5jZUFQSS5nZXRQYWdlKHVyaSwgLyogaXRlcmF0aW9uICovIDAsIC8qIHNlc3Npb25JZCAqLyAwLCBvZmZzZXQsIGxpbWl0KSkuZW5oYW5jZVBhZ2VcclxuICAgICAgICAucGFnZUl0ZW1zIGFzIGFueVtdXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwKTogUHJvbWlzZTxhbnlbXT4gPT4ge1xyXG4gICAgY29uc3QgbmV4dFBhZ2VJdGVtcyA9IGF3YWl0IGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25nczMwMCh1cmksIG9mZnNldClcclxuICAgIGlmIChuZXh0UGFnZUl0ZW1zPy5sZW5ndGggPCAzMDApIHJldHVybiBuZXh0UGFnZUl0ZW1zXHJcbiAgICBlbHNlIHJldHVybiBuZXh0UGFnZUl0ZW1zLmNvbmNhdChmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3ModXJpLCBvZmZzZXQgKyAzMDApKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hMb2NhbFRyYWNrcyA9IGFzeW5jICgpID0+IGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Mb2NhbEZpbGVzQVBJLmdldFRyYWNrcygpXHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgTm9uIFNwb3RpZnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoVHJhY2tMRk1BUEkgPSBhc3luYyAoTEZNQXBpS2V5OiBzdHJpbmcsIGFydGlzdDogc3RyaW5nLCB0cmFja05hbWU6IHN0cmluZywgbGFzdEZtVXNlcm5hbWUgPSBcIlwiKSA9PiB7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFwiaHR0cHM6Ly93cy5hdWRpb3Njcm9iYmxlci5jb20vMi4wL1wiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJtZXRob2RcIiwgXCJ0cmFjay5nZXRJbmZvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImFwaV9rZXlcIiwgTEZNQXBpS2V5KVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJhcnRpc3RcIiwgYXJ0aXN0KVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ0cmFja1wiLCB0cmFja05hbWUpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImZvcm1hdFwiLCBcImpzb25cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidXNlcm5hbWVcIiwgbGFzdEZtVXNlcm5hbWUpXHJcblxyXG4gICAgcmV0dXJuIChhd2FpdCBmZXRjaCh1cmwpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpKSBhcyBmZXRjaFRyYWNrTEZNQVBJUmVzXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFRyYWNrTEZNQVBJTWVtb2l6ZWQgPSBtZW1vaXplMihmZXRjaFRyYWNrTEZNQVBJKVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFlvdXR1YmUgPSBhc3luYyAoWW91VHViZUFwaUtleTogc3RyaW5nLCBzZWFyY2hTdHJpbmc6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvc2VhcmNoXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInBhcnRcIiwgXCJzbmlwcGV0XCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcIm1heFJlc3VsdHNcIiwgXCIxMFwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJxXCIsIHNlYXJjaFN0cmluZylcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidHlwZVwiLCBcInZpZGVvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImtleVwiLCBZb3VUdWJlQXBpS2V5KVxyXG5cclxuICAgIHJldHVybiAoYXdhaXQgZmV0Y2godXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKSkgYXMgYW55W11cclxufVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hHUUxBbGJ1bVJlcyB7XHJcbiAgICBfX3R5cGVuYW1lOiBcImFsYnVtXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhcnRpc3RzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgcHJvZmlsZToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmlzdWFsczoge1xyXG4gICAgICAgICAgICAgICAgYXZhdGFySW1hZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNoYXJpbmdJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgY292ZXJBcnQ6IHtcclxuICAgICAgICBleHRyYWN0ZWRDb2xvcnM6IHtcclxuICAgICAgICAgICAgY29sb3JSYXc6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JMaWdodDoge1xyXG4gICAgICAgICAgICAgICAgaGV4OiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xvckRhcms6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgIH1cclxuICAgIGRpc2NzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgbnVtYmVyOiBudW1iZXJcclxuICAgICAgICAgICAgdHJhY2tzOiB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICByZWxlYXNlczoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICBkYXRlOiB7XHJcbiAgICAgICAgaXNvU3RyaW5nOiBzdHJpbmdcclxuICAgICAgICBwcmVjaXNpb246IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgcGxheWFiaWxpdHk6IHtcclxuICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgIHJlYXNvbjogc3RyaW5nXHJcbiAgICB9XHJcbiAgICBsYWJlbDogc3RyaW5nXHJcbiAgICBjb3B5cmlnaHQ6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICAgICAgdGV4dDogc3RyaW5nXHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIGNvdXJ0ZXN5TGluZTogc3RyaW5nXHJcbiAgICBzYXZlZDogYm9vbGVhblxyXG4gICAgc2hhcmluZ0luZm86IHtcclxuICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgc2hhcmVJZDogc3RyaW5nXHJcbiAgICB9XHJcbiAgICB0cmFja3M6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB1aWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB0cmFjazoge1xyXG4gICAgICAgICAgICAgICAgc2F2ZWQ6IGJvb2xlYW5cclxuICAgICAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBwbGF5Y291bnQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICBjb250ZW50UmF0aW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVsaW5raW5nSW5mb3JtYXRpb246IGFueVxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbE1pbGxpc2Vjb25kczogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwbGF5YWJpbGl0eToge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXlhYmxlOiBib29sZWFuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhcnRpc3RzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICBtb3JlQWxidW1zQnlBcnRpc3Q6IHtcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBkaXNjb2dyYXBoeToge1xyXG4gICAgICAgICAgICAgICAgcG9wdWxhclJlbGVhc2VzQWxidW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IG51bWJlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyQXJ0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlhYmlsaXR5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFyaW5nSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVJZDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIGZldGNoR1FMQXJ0aXN0UmVsYXRlZFJlcyA9IEFycmF5PHtcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgcHJvZmlsZToge1xyXG4gICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgdmlzdWFsczoge1xyXG4gICAgICAgIGF2YXRhckltYWdlOiB7XHJcbiAgICAgICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59PlxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXMgPSBBcnJheTx7XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogc3RyaW5nXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGR1cmF0aW9uOiBTcG90QXBpRHVyYXRpb25cclxuICAgIGFsYnVtOiBTcG90QXBpQWxidW1NaW5cclxuICAgIGFydGlzdHM6IFNwb3RBcGlBcnRpc3RNaW5bXVxyXG4gICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICBpc0V4cGxpY2l0OiBib29sZWFuXHJcbiAgICBpc1BsYXlhYmxlOiBib29sZWFuXHJcbiAgICBpc0xvY2FsOiBib29sZWFuXHJcbiAgICBpczE5UGx1c09ubHk6IGJvb2xlYW5cclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG59PlxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hXZWJQbGF5bGlzdFJlcyA9IEFycmF5PHtcclxuICAgIHVpZDogc3RyaW5nXHJcbiAgICBwbGF5SW5kZXg6IG51bGxcclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG4gICAgYWRkZWRCeToge1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmdcclxuICAgICAgICBkaXNwbGF5TmFtZTogc3RyaW5nXHJcbiAgICAgICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2UyW11cclxuICAgIH1cclxuICAgIGZvcm1hdExpc3RBdHRyaWJ1dGVzOiB7fVxyXG4gICAgdHlwZTogXCJ0cmFja1wiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bU1pblxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdE1pbltdXHJcbiAgICBkaXNjTnVtYmVyOiBudW1iZXJcclxuICAgIHRyYWNrTnVtYmVyOiBudW1iZXJcclxuICAgIGR1cmF0aW9uOiBTcG90QXBpRHVyYXRpb25cclxuICAgIGlzRXhwbGljaXQ6IGJvb2xlYW5cclxuICAgIGlzTG9jYWw6IGJvb2xlYW5cclxuICAgIGlzUGxheWFibGU6IGJvb2xlYW5cclxuICAgIGlzMTlQbHVzT25seTogYm9vbGVhblxyXG59PlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBmZXRjaFRyYWNrTEZNQVBJUmVzIHtcclxuICAgIHRyYWNrOiB7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgbWJpZDogc3RyaW5nXHJcbiAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICBkdXJhdGlvbjogc3RyaW5nXHJcbiAgICAgICAgc3RyZWFtYWJsZToge1xyXG4gICAgICAgICAgICBcIiN0ZXh0XCI6IHN0cmluZ1xyXG4gICAgICAgICAgICBmdWxsdHJhY2s6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgICBsaXN0ZW5lcnM6IHN0cmluZ1xyXG4gICAgICAgIHBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgYXJ0aXN0OiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICAgICAgYWxidW06IHtcclxuICAgICAgICAgICAgYXJ0aXN0OiBzdHJpbmdcclxuICAgICAgICAgICAgdGl0bGU6IHN0cmluZ1xyXG4gICAgICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgaW1hZ2U6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgIFwiI3RleHRcIjogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBzaXplOiBzdHJpbmdcclxuICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgXCJAYXR0clwiOiB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdXNlcnBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgdXNlcmxvdmVkOiBzdHJpbmdcclxuICAgICAgICB0b3B0YWdzOiB7XHJcbiAgICAgICAgICAgIHRhZzogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgICAgICB9PlxyXG4gICAgICAgIH1cclxuICAgICAgICB3aWtpOiB7XHJcbiAgICAgICAgICAgIHB1Ymxpc2hlZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHN1bW1hcnk6IHN0cmluZ1xyXG4gICAgICAgICAgICBjb250ZW50OiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBbGJ1bU1pbiB7XHJcbiAgICB0eXBlOiBcImFsYnVtXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhcnRpc3Q6IFNwb3RBcGlBcnRpc3RNaW5cclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlMltdXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUltYWdlMiB7XHJcbiAgICB1cmw6IHN0cmluZ1xyXG4gICAgbGFiZWw6IFwic21hbGxcIiB8IFwic3RhbmRhcmRcIiB8IFwibGFyZ2VcIiB8IFwieGxhcmdlXCJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpVHJhY2sge1xyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bVxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdFtdXHJcbiAgICBhdmFpbGFibGVfbWFya2V0czogc3RyaW5nW11cclxuICAgIGRpc2NfbnVtYmVyOiBudW1iZXJcclxuICAgIGR1cmF0aW9uX21zOiBudW1iZXJcclxuICAgIGV4cGxpY2l0OiBib29sZWFuXHJcbiAgICBleHRlcm5hbF9pZHM6IFNwb3RBcGlFSURzXHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaXNfcGxheWFibGU6IGJvb2xlYW5cclxuICAgIGxpbmtlZF9mcm9tOiB7fVxyXG4gICAgcmVzdHJpY3Rpb25zOiBTcG90QXBpUmVzdHJpY3Rpb25zXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHBvcHVsYXJpdHk6IG51bWJlclxyXG4gICAgcHJldmlld191cmw6IHN0cmluZ1xyXG4gICAgdHJhY2tfbnVtYmVyOiBudW1iZXJcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBpc19sb2NhbDogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBcnRpc3Qge1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBmb2xsb3dlcnM6IFNwb3RBcGlGb2xsb3dlcnNcclxuICAgIGdlbnJlczogc3RyaW5nW11cclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFydGlzdE1pbiB7XHJcbiAgICB0eXBlOiBcImFydGlzdFwiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBbGJ1bSB7XHJcbiAgICBhbGJ1bV90eXBlOiBzdHJpbmdcclxuICAgIHRvdGFsX3RyYWNrczogbnVtYmVyXHJcbiAgICBhdmFpbGFibGVfbWFya2V0czogc3RyaW5nW11cclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHJlbGVhc2VfZGF0ZTogc3RyaW5nXHJcbiAgICByZWxlYXNlX2RhdGVfcHJlY2lzaW9uOiBzdHJpbmdcclxuICAgIHJlc3RyaWN0aW9uczogU3BvdEFwaVJlc3RyaWN0aW9uc1xyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIGNvcHlyaWdodHM6IEFycmF5PHtcclxuICAgICAgICB0ZXh0OiBzdHJpbmdcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgIH0+XHJcbiAgICBleHRlcm5hbF9pZHM6IFNwb3RBcGlFSURzXHJcbiAgICBnZW5yZXM6IHN0cmluZ1tdXHJcbiAgICBsYWJlbDogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIGFsYnVtX2dyb3VwOiBzdHJpbmdcclxuICAgIGFydGlzdHM6IEFycmF5PHtcclxuICAgICAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICB9PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlFVXJscyB7XHJcbiAgICBzcG90aWZ5OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRUlEcyB7XHJcbiAgICBpc3JjOiBzdHJpbmdcclxuICAgIGVhbjogc3RyaW5nXHJcbiAgICB1cGM6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlJbWFnZSB7XHJcbiAgICB1cmw6IHN0cmluZ1xyXG4gICAgd2lkdGg6IG51bWJlclxyXG4gICAgaGVpZ2h0OiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpUmVzdHJpY3Rpb25zIHtcclxuICAgIHJlYXNvbjogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUZvbGxvd2VycyB7XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIHRvdGFsOiBudW1iZXJcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlEdXJhdGlvbiB7XHJcbiAgICBtaWxsaXNlY29uZHM6IG51bWJlclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaVBsYXlsaXN0IHtcclxuICAgIGNvbGxhYm9yYXRpdmU6IGJvb2xlYW5cclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgZm9sbG93ZXJzOiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgdG90YWw6IG51bWJlclxyXG4gICAgfVxyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogU3BvdGlmeUlEXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIG93bmVyOiBTcG90QXBpT3duZXJcclxuICAgIHB1YmxpYzogYm9vbGVhblxyXG4gICAgc25hcHNob3RfaWQ6IHN0cmluZ1xyXG4gICAgdHJhY2tzOiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgbGltaXQ6IG51bWJlclxyXG4gICAgICAgIG5leHQ6IHN0cmluZ1xyXG4gICAgICAgIG9mZnNldDogbnVtYmVyXHJcbiAgICAgICAgcHJldmlvdXM6IHN0cmluZ1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBhZGRlZF9hdDogc3RyaW5nXHJcbiAgICAgICAgICAgIGFkZGVkX2J5OiBTcG90QXBpT3duZXJcclxuICAgICAgICAgICAgaXNfbG9jYWw6IGJvb2xlYW5cclxuICAgICAgICAgICAgdHJhY2s6IFNwb3RBcGlUcmFja1xyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlPd25lciB7XHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGZvbGxvd2Vycz86IHtcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICB0b3RhbDogbnVtYmVyXHJcbiAgICB9XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBTcG90aWZ5SURcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBkaXNwbGF5X25hbWU/OiBzdHJpbmdcclxuICAgIG5hbWU/OiBzdHJpbmdcclxufVxyXG5cclxuLy9UT0RPOiBCZXR0ZXIgVFMgaW50ZXJmYWNlIGZvciByZWN1cnNpdmUgZmV0Y2hQbGF0Rm9sZGVyUmVzXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hQbGF0Rm9sZGVyUmVzIHtcclxuICAgIHR5cGU6IFwiZm9sZGVyXCIgfCBcInBsYWNlaG9sZGVyXCIgfCBcInBsYXlsaXN0XCJcclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG4gICAgaXRlbXM/OiBBcnJheTxmZXRjaFBsYXRGb2xkZXJSZXM+XHJcbiAgICBuYW1lPzogc3RyaW5nXHJcbiAgICB1cmk6IHN0cmluZ1xyXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmdcclxuICAgIGltYWdlcz86IFNwb3RBcGlJbWFnZTJbXVxyXG4gICAgbWFkZUZvcj86IG51bGxcclxuICAgIG93bmVyPzoge1xyXG4gICAgICAgIHR5cGU6IFwidXNlclwiXHJcbiAgICAgICAgdXJpOiBzdHJpbmdcclxuICAgICAgICB1c2VybmFtZTogc3RyaW5nXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGltYWdlczogYW55W11cclxuICAgIH1cclxuICAgIHRvdGFsTGVuZ3RoPzogbnVtYmVyXHJcbiAgICB1bmZpbHRlcmVkVG90YWxMZW5ndGg/OiBudW1iZXJcclxuICAgIHRvdGFsTGlrZXM/OiBudWxsXHJcbiAgICBkdXJhdGlvbj86IG51bGxcclxuICAgIGlzQ29sbGFib3JhdGl2ZT86IGJvb2xlYW5cclxuICAgIGlzTG9hZGVkPzogYm9vbGVhblxyXG4gICAgaXNPd25lZEJ5U2VsZj86IGJvb2xlYW5cclxuICAgIGlzUHVibGlzaGVkPzogYm9vbGVhblxyXG4gICAgaGFzRXBpc29kZXM/OiBudWxsXHJcbiAgICBoYXNTcG90aWZ5VHJhY2tzPzogbnVsbFxyXG4gICAgaGFzU3BvdGlmeUF1ZGlvYm9va3M/OiBudWxsXHJcbiAgICBjYW5BZGQ/OiBib29sZWFuXHJcbiAgICBjYW5SZW1vdmU/OiBib29sZWFuXHJcbiAgICBjYW5QbGF5PzogbnVsbFxyXG4gICAgZm9ybWF0TGlzdERhdGE/OiB7XHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgYXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxyXG4gICAgfSB8IG51bGxcclxuICAgIGNhblJlcG9ydEFubm90YXRpb25BYnVzZT86IGJvb2xlYW5cclxuICAgIGhhc0RhdGVBZGRlZD86IGJvb2xlYW5cclxuICAgIHBlcm1pc3Npb25zPzogbnVsbFxyXG4gICAgY29sbGFib3JhdG9ycz86IHtcclxuICAgICAgICBjb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IGFueVtdXHJcbiAgICB9XHJcbiAgICBpc05vdEZvdW5kPzogYm9vbGVhblxyXG4gICAgaXNGb3JiaWRkZW4/OiBib29sZWFuXHJcbn1cclxuIiwKICAiaW1wb3J0IHsgaW52b2tlTnVsbGFyeSB9IGZyb20gXCJmcC10cy1zdGQvRnVuY3Rpb25cIlxyXG5pbXBvcnQgeyBwaXBlIGFzIHAgfSBmcm9tIFwiZnAtdHMvZnVuY3Rpb25cIlxyXG5pbXBvcnQgeyBwTWNoYWluLCBjaHVuY2tpZnksIG1lbW9pemUyIH0gZnJvbSBcIi4vZnBcIlxyXG5pbXBvcnQgeyBTcG90aWZ5SUQsIFNwb3RpZnlMb2MsIFNwb3RpZnlVUkksIGVzY2FwZVJlZ2V4IH0gZnJvbSBcIi4vdXRpbFwiXHJcblxyXG5jb25zdCB7IFVSSSB9ID0gU3BpY2V0aWZ5XHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgR3JhcGhRTCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQWxidW0gPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDQ4NykgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLmdldEFsYnVtLCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgICAgICBvZmZzZXQsXHJcbiAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYWxidW1VbmlvbiBhcyBmZXRjaEdRTEFsYnVtUmVzXHJcblxyXG50eXBlIGZldGNoQXJ0aXN0R1FMUmVzID0gYW55XHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFydGlzdE92ZXJ2aWV3ID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLnF1ZXJ5QXJ0aXN0T3ZlcnZpZXcsIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBsb2NhbGU6IFNwaWNldGlmeS5Mb2NhbGUuZ2V0TG9jYWxlKCksXHJcbiAgICAgICAgICAgIGluY2x1ZGVQcmVyZWxlYXNlOiB0cnVlLFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24gYXMgZmV0Y2hBcnRpc3RHUUxSZXNcclxuXHJcbnR5cGUgZmV0Y2hHUUxBcnRpc3REaXNjb2dyYXBoeVJlcyA9IGFueVxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBcnRpc3REaXNjb2dyYXBoeSA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gMTE2KSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMucXVlcnlBcnRpc3REaXNjb2dyYXBoeUFsbCwge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIG9mZnNldCxcclxuICAgICAgICAgICAgbGltaXQsXHJcbiAgICAgICAgfSlcclxuICAgICkuZGF0YS5hcnRpc3RVbmlvbi5kaXNjb2dyYXBoeS5hbGwuaXRlbXMgYXMgZmV0Y2hHUUxBcnRpc3REaXNjb2dyYXBoeVJlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQXJ0aXN0UmVsYXRlZCA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5xdWVyeUFydGlzdFJlbGF0ZWQsIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBsb2NhbGU6IFNwaWNldGlmeS5Mb2NhbGUuZ2V0TG9jYWxlKCksXHJcbiAgICAgICAgfSlcclxuICAgICkuZGF0YS5hcnRpc3RVbmlvbi5yZWxhdGVkQ29udGVudC5yZWxhdGVkQXJ0aXN0cy5pdGVtcyBhcyBmZXRjaEdRTEFydGlzdFJlbGF0ZWRSZXNcclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBTcG90aWZ5IFdlYiBBUEkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgY29uc3QgcmVtb3ZlV2ViUGxheWxpc3RUcmFja3MgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlJRCwgdHJhY2tzOiBTcG90aWZ5VVJJW10pID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZGVsKGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9wbGF5bGlzdHMvJHtwbGF5bGlzdH0vdHJhY2tzYCwge1xyXG4gICAgICAgIHRyYWNrczogdHJhY2tzLm1hcCh1cmkgPT4gKHsgdXJpIH0pKSxcclxuICAgIH0pXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJBcnRpc3RzU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvYXJ0aXN0cz9pZHM9JHtpZHMuam9pbihcIixcIil9YCkpXHJcbiAgICAgICAgICAgIC5hcnRpc3RzIGFzIFNwb3RBcGlBcnRpc3RbXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViUGxheWxpc3RzU3BvdCA9IGNodW5ja2lmeSgxKShcclxuICAgIC8vIEB0cy1pZ25vcmUgY2h1bmtpZnkgd2lsbCBuZXZlciBjYWxsIHdpdGggZW1wdHkgYXJyYXlcclxuICAgIGFzeW5jIChbaWRdOiBbU3BvdGlmeUlEXSkgPT4gW1xyXG4gICAgICAgIChhd2FpdCBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9wbGF5bGlzdHMvJHtpZH1gKSkgYXMgU3BvdEFwaVBsYXlsaXN0LFxyXG4gICAgXSxcclxuKVxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJBbGJ1bXNTcG90ID0gY2h1bmNraWZ5KDUwKShcclxuICAgIGFzeW5jIChpZHM6IFNwb3RpZnlJRFtdKSA9PlxyXG4gICAgICAgIChhd2FpdCBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9hbGJ1bXM/aWRzPSR7aWRzLmpvaW4oXCIsXCIpfWApKVxyXG4gICAgICAgICAgICAuYWxidW1zIGFzIFNwb3RBcGlBbGJ1bVtdLFxyXG4pXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJUcmFja3NTcG90ID0gY2h1bmNraWZ5KDUwKShcclxuICAgIGFzeW5jIChpZHM6IFNwb3RpZnlJRFtdKSA9PlxyXG4gICAgICAgIChhd2FpdCBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS90cmFja3M/aWRzPSR7aWRzLmpvaW4oXCIsXCIpfWApKVxyXG4gICAgICAgICAgICAudHJhY2tzIGFzIFNwb3RBcGlUcmFja1tdLFxyXG4pXHJcblxyXG5leHBvcnQgY29uc3Qgc2VhcmNoV2ViSXRlbVNwb3QgPSBhc3luYyAocTogc3RyaW5nLCB0eXBlOiBzdHJpbmdbXSkgPT5cclxuICAgIFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL3NlYXJjaD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHEpfSZ0eXBlPSR7dHlwZS5qb2luKFwiLFwiKX1gKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViU291bmRPZlNwb3RpZnlQbGF5bGlzdCA9IGFzeW5jIChnZW5yZTogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBuYW1lID0gYFRoZSBTb3VuZCBPZiAke2dlbnJlfWBcclxuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChgXiR7ZXNjYXBlUmVnZXgobmFtZSl9JGAsIFwiaVwiKVxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgc2VhcmNoV2ViSXRlbVNwb3QobmFtZSwgW1wicGxheWxpc3RcIl0pXHJcbiAgICBjb25zdCBpdGVtID0gcmVzLnBsYXlsaXN0cy5pdGVtc1swXVxyXG4gICAgcmV0dXJuIGl0ZW0/Lm93bmVyLmlkID09PSBcInRoZXNvdW5kc29mc3BvdGlmeVwiICYmIHJlLnRlc3QoaXRlbS5uYW1lKSA/IGl0ZW0udXJpIDogbnVsbFxyXG59XHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgUGxhdGZvcm0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdExpa2VkVHJhY2tzID0gYXN5bmMgKCkgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uTGlicmFyeUFQSS5nZXRUcmFja3Moe1xyXG4gICAgICAgICAgICBsaW1pdDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXHJcbiAgICAgICAgfSlcclxuICAgICkuaXRlbXMgYXMgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXNcclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSAxMDApID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuZ2V0VHJhY2tzKHsgdXJpLCBvZmZzZXQsIGxpbWl0IH0pKS5pdGVtcyBhcyBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrc1Jlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdFBsYXlsaXN0Q29udGVudHMgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5nZXRDb250ZW50cyh1cmkpKS5pdGVtcyBhcyBmZXRjaFdlYlBsYXlsaXN0UmVzXHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUGxhdEZvbGRlciA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGxvY2F0aW9uOiBTcG90aWZ5TG9jID0ge30pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuY3JlYXRlRm9sZGVyKG5hbWUsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IGxpa2VQbGF0UGxheWxpc3QgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PiBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuYWRkKFt1cmldKVxyXG5cclxuLyogUmVwbGFjZWQgYnkgY3JlYXRlU1BQbGF5bGlzdEZyb21UcmFja3MgKi9cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBsYXRQbGF5bGlzdCA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGxvY2F0aW9uOiBTcG90aWZ5TG9jID0ge30pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuY3JlYXRlUGxheWxpc3QobmFtZSwgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlU1BQbGF5bGlzdEZyb21UcmFja3MgPSAobmFtZTogc3RyaW5nLCB0cmFja3M6IFNwb3RpZnlVUklbXSwgZm9sZGVyPzogU3BvdGlmeVVSSSkgPT5cclxuICAgIFNwaWNldGlmeS5Db3Ntb3NBc3luYy5wb3N0KFwic3A6Ly9jb3JlLXBsYXlsaXN0L3YxL3Jvb3RsaXN0P3Jlc3BvbnNlRm9ybWF0PXByb3RvYnVmSnNvblwiLCB7XHJcbiAgICAgICAgb3BlcmF0aW9uOiBcImNyZWF0ZVwiLFxyXG4gICAgICAgIC4uLihmb2xkZXIgPyB7IGFmdGVyOiBmb2xkZXIgfSA6IHt9KSxcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIHBsYXlsaXN0OiB0cnVlLFxyXG4gICAgICAgIHVyaXM6IHRyYWNrcyxcclxuICAgIH0pXHJcblxyXG5leHBvcnQgY29uc3Qgc2V0UGxhdFBsYXlsaXN0VmlzaWJpbGl0eSA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeVVSSSwgdmlzaWJsZUZvckFsbDogYm9vbGVhbikgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdFBlcm1pc3Npb25zQVBJLnNldEJhc2VQZXJtaXNzaW9uKHBsYXlsaXN0LCB2aXNpYmxlRm9yQWxsID8gXCJWSUVXRVJcIiA6IFwiQkxPQ0tFRFwiKVxyXG5leHBvcnQgY29uc3Qgc2V0UGxhdFBsYXlsaXN0UHVibGlzaGVkID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5VVJJLCBwdWJsaXNoZWQ6IGJvb2xlYW4pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuc2V0UHVibGlzaGVkU3RhdGUocGxheWxpc3QsIHB1Ymxpc2hlZClcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRGb2xkZXIgPSBhc3luYyAoZm9sZGVyPzogU3BvdGlmeVVSSSkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuZ2V0Q29udGVudHMoeyBmb2xkZXJVcmk6IGZvbGRlciB9KSkgYXMgZmV0Y2hQbGF0Rm9sZGVyUmVzXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRSb290Rm9sZGVyID0gKCkgPT4gZmV0Y2hQbGF0Rm9sZGVyKHVuZGVmaW5lZClcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRQbGF0UGxheWxpc3RUcmFja3MgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlVUkksIHRyYWNrczogU3BvdGlmeVVSSVtdLCBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXlsaXN0QVBJLmFkZChwbGF5bGlzdCwgdHJhY2tzLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBtb3ZlUGxhdFBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKFxyXG4gICAgcGxheWxpc3Q6IFNwb3RpZnlVUkksXHJcbiAgICB0cmFja3M6IEFycmF5PHsgdWlkOiBzdHJpbmcgfT4sXHJcbiAgICBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9LFxyXG4pID0+IGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5tb3ZlKHBsYXlsaXN0LCB0cmFja3MsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25nczMwMCA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gMzAwKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5FbmhhbmNlQVBJLmdldFBhZ2UodXJpLCAvKiBpdGVyYXRpb24gKi8gMCwgLyogc2Vzc2lvbklkICovIDAsIG9mZnNldCwgbGltaXQpKS5lbmhhbmNlUGFnZVxyXG4gICAgICAgIC5wYWdlSXRlbXMgYXMgYW55W11cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25ncyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDApOiBQcm9taXNlPGFueVtdPiA9PiB7XHJcbiAgICBjb25zdCBuZXh0UGFnZUl0ZW1zID0gYXdhaXQgZmV0Y2hQbGF0UGxheWxpc3RFbmhhbmNlZFNvbmdzMzAwKHVyaSwgb2Zmc2V0KVxyXG4gICAgaWYgKG5leHRQYWdlSXRlbXM/Lmxlbmd0aCA8IDMwMCkgcmV0dXJuIG5leHRQYWdlSXRlbXNcclxuICAgIGVsc2UgcmV0dXJuIG5leHRQYWdlSXRlbXMuY29uY2F0KGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25ncyh1cmksIG9mZnNldCArIDMwMCkpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaExvY2FsVHJhY2tzID0gYXN5bmMgKCkgPT4gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxvY2FsRmlsZXNBUEkuZ2V0VHJhY2tzKClcclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBOb24gU3BvdGlmeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hUcmFja0xGTUFQSSA9IGFzeW5jIChMRk1BcGlLZXk6IHN0cmluZywgYXJ0aXN0OiBzdHJpbmcsIHRyYWNrTmFtZTogc3RyaW5nLCBsYXN0Rm1Vc2VybmFtZSA9IFwiXCIpID0+IHtcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoXCJodHRwczovL3dzLmF1ZGlvc2Nyb2JibGVyLmNvbS8yLjAvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcIm1ldGhvZFwiLCBcInRyYWNrLmdldEluZm9cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiYXBpX2tleVwiLCBMRk1BcGlLZXkpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImFydGlzdFwiLCBhcnRpc3QpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInRyYWNrXCIsIHRyYWNrTmFtZSlcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiZm9ybWF0XCIsIFwianNvblwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ1c2VybmFtZVwiLCBsYXN0Rm1Vc2VybmFtZSlcclxuXHJcbiAgICByZXR1cm4gKGF3YWl0IGZldGNoKHVybCkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkpIGFzIGZldGNoVHJhY2tMRk1BUElSZXNcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoVHJhY2tMRk1BUElNZW1vaXplZCA9IG1lbW9pemUyKGZldGNoVHJhY2tMRk1BUEkpXHJcblxyXG5leHBvcnQgY29uc3Qgc2VhcmNoWW91dHViZSA9IGFzeW5jIChZb3VUdWJlQXBpS2V5OiBzdHJpbmcsIHNlYXJjaFN0cmluZzogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20veW91dHViZS92My9zZWFyY2hcIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwicGFydFwiLCBcInNuaXBwZXRcIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwibWF4UmVzdWx0c1wiLCBcIjEwXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInFcIiwgc2VhcmNoU3RyaW5nKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ0eXBlXCIsIFwidmlkZW9cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwia2V5XCIsIFlvdVR1YmVBcGlLZXkpXHJcblxyXG4gICAgcmV0dXJuIChhd2FpdCBmZXRjaCh1cmwpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpKSBhcyBhbnlbXVxyXG59XHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgVHlwZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBmZXRjaEdRTEFsYnVtUmVzIHtcclxuICAgIF9fdHlwZW5hbWU6IFwiYWxidW1cIlxyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGFydGlzdHM6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICBwcm9maWxlOiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2aXN1YWxzOiB7XHJcbiAgICAgICAgICAgICAgICBhdmF0YXJJbWFnZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2hhcmluZ0luZm86IHtcclxuICAgICAgICAgICAgICAgIHNoYXJlVXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICBjb3ZlckFydDoge1xyXG4gICAgICAgIGV4dHJhY3RlZENvbG9yczoge1xyXG4gICAgICAgICAgICBjb2xvclJhdzoge1xyXG4gICAgICAgICAgICAgICAgaGV4OiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xvckxpZ2h0OiB7XHJcbiAgICAgICAgICAgICAgICBoZXg6IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbG9yRGFyazoge1xyXG4gICAgICAgICAgICAgICAgaGV4OiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgfVxyXG4gICAgZGlzY3M6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBudW1iZXI6IG51bWJlclxyXG4gICAgICAgICAgICB0cmFja3M6IHtcclxuICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIHJlbGVhc2VzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIGRhdGU6IHtcclxuICAgICAgICBpc29TdHJpbmc6IHN0cmluZ1xyXG4gICAgICAgIHByZWNpc2lvbjogc3RyaW5nXHJcbiAgICB9XHJcbiAgICBwbGF5YWJpbGl0eToge1xyXG4gICAgICAgIHBsYXlhYmxlOiBib29sZWFuXHJcbiAgICAgICAgcmVhc29uOiBzdHJpbmdcclxuICAgIH1cclxuICAgIGxhYmVsOiBzdHJpbmdcclxuICAgIGNvcHlyaWdodDoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgICAgICB0ZXh0OiBzdHJpbmdcclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgY291cnRlc3lMaW5lOiBzdHJpbmdcclxuICAgIHNhdmVkOiBib29sZWFuXHJcbiAgICBzaGFyaW5nSW5mbzoge1xyXG4gICAgICAgIHNoYXJlVXJsOiBzdHJpbmdcclxuICAgICAgICBzaGFyZUlkOiBzdHJpbmdcclxuICAgIH1cclxuICAgIHRyYWNrczoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIHVpZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHRyYWNrOiB7XHJcbiAgICAgICAgICAgICAgICBzYXZlZDogYm9vbGVhblxyXG4gICAgICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIHBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBkaXNjTnVtYmVyOiBudW1iZXJcclxuICAgICAgICAgICAgICAgIHRyYWNrTnVtYmVyOiBudW1iZXJcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRSYXRpbmc6IHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZWxpbmtpbmdJbmZvcm1hdGlvbjogYW55XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsTWlsbGlzZWNvbmRzOiBudW1iZXJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBsYXlhYmlsaXR5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWFibGU6IGJvb2xlYW5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFydGlzdHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIG1vcmVBbGJ1bXNCeUFydGlzdDoge1xyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIGRpc2NvZ3JhcGh5OiB7XHJcbiAgICAgICAgICAgICAgICBwb3B1bGFyUmVsZWFzZXNBbGJ1bXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY292ZXJBcnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWFiaWxpdHk6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlhYmxlOiBib29sZWFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJpbmdJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZUlkOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlVXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfT5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hHUUxBcnRpc3RSZWxhdGVkUmVzID0gQXJyYXk8e1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBwcm9maWxlOiB7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICB9XHJcbiAgICB2aXN1YWxzOiB7XHJcbiAgICAgICAgYXZhdGFySW1hZ2U6IHtcclxuICAgICAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0+XHJcblxyXG5leHBvcnQgdHlwZSBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrc1JlcyA9IEFycmF5PHtcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBzdHJpbmdcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgZHVyYXRpb246IFNwb3RBcGlEdXJhdGlvblxyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bU1pblxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdE1pbltdXHJcbiAgICBkaXNjTnVtYmVyOiBudW1iZXJcclxuICAgIHRyYWNrTnVtYmVyOiBudW1iZXJcclxuICAgIGlzRXhwbGljaXQ6IGJvb2xlYW5cclxuICAgIGlzUGxheWFibGU6IGJvb2xlYW5cclxuICAgIGlzTG9jYWw6IGJvb2xlYW5cclxuICAgIGlzMTlQbHVzT25seTogYm9vbGVhblxyXG4gICAgYWRkZWRBdDogc3RyaW5nXHJcbn0+XHJcblxyXG5leHBvcnQgdHlwZSBmZXRjaFdlYlBsYXlsaXN0UmVzID0gQXJyYXk8e1xyXG4gICAgdWlkOiBzdHJpbmdcclxuICAgIHBsYXlJbmRleDogbnVsbFxyXG4gICAgYWRkZWRBdDogc3RyaW5nXHJcbiAgICBhZGRlZEJ5OiB7XHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgdXNlcm5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmdcclxuICAgICAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZTJbXVxyXG4gICAgfVxyXG4gICAgZm9ybWF0TGlzdEF0dHJpYnV0ZXM6IHt9XHJcbiAgICB0eXBlOiBcInRyYWNrXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhbGJ1bTogU3BvdEFwaUFsYnVtTWluXHJcbiAgICBhcnRpc3RzOiBTcG90QXBpQXJ0aXN0TWluW11cclxuICAgIGRpc2NOdW1iZXI6IG51bWJlclxyXG4gICAgdHJhY2tOdW1iZXI6IG51bWJlclxyXG4gICAgZHVyYXRpb246IFNwb3RBcGlEdXJhdGlvblxyXG4gICAgaXNFeHBsaWNpdDogYm9vbGVhblxyXG4gICAgaXNMb2NhbDogYm9vbGVhblxyXG4gICAgaXNQbGF5YWJsZTogYm9vbGVhblxyXG4gICAgaXMxOVBsdXNPbmx5OiBib29sZWFuXHJcbn0+XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIGZldGNoVHJhY2tMRk1BUElSZXMge1xyXG4gICAgdHJhY2s6IHtcclxuICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgIGR1cmF0aW9uOiBzdHJpbmdcclxuICAgICAgICBzdHJlYW1hYmxlOiB7XHJcbiAgICAgICAgICAgIFwiI3RleHRcIjogc3RyaW5nXHJcbiAgICAgICAgICAgIGZ1bGx0cmFjazogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3RlbmVyczogc3RyaW5nXHJcbiAgICAgICAgcGxheWNvdW50OiBzdHJpbmdcclxuICAgICAgICBhcnRpc3Q6IHtcclxuICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgIG1iaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgICBhbGJ1bToge1xyXG4gICAgICAgICAgICBhcnRpc3Q6IHN0cmluZ1xyXG4gICAgICAgICAgICB0aXRsZTogc3RyaW5nXHJcbiAgICAgICAgICAgIG1iaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgICAgICBpbWFnZTogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgXCIjdGV4dFwiOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIHNpemU6IHN0cmluZ1xyXG4gICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICBcIkBhdHRyXCI6IHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB1c2VycGxheWNvdW50OiBzdHJpbmdcclxuICAgICAgICB1c2VybG92ZWQ6IHN0cmluZ1xyXG4gICAgICAgIHRvcHRhZ3M6IHtcclxuICAgICAgICAgICAgdGFnOiBBcnJheTx7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIHVybDogc3RyaW5nXHJcbiAgICAgICAgICAgIH0+XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdpa2k6IHtcclxuICAgICAgICAgICAgcHVibGlzaGVkOiBzdHJpbmdcclxuICAgICAgICAgICAgc3VtbWFyeTogc3RyaW5nXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFsYnVtTWluIHtcclxuICAgIHR5cGU6IFwiYWxidW1cIlxyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGFydGlzdDogU3BvdEFwaUFydGlzdE1pblxyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2UyW11cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpSW1hZ2UyIHtcclxuICAgIHVybDogc3RyaW5nXHJcbiAgICBsYWJlbDogXCJzbWFsbFwiIHwgXCJzdGFuZGFyZFwiIHwgXCJsYXJnZVwiIHwgXCJ4bGFyZ2VcIlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlUcmFjayB7XHJcbiAgICBhbGJ1bTogU3BvdEFwaUFsYnVtXHJcbiAgICBhcnRpc3RzOiBTcG90QXBpQXJ0aXN0W11cclxuICAgIGF2YWlsYWJsZV9tYXJrZXRzOiBzdHJpbmdbXVxyXG4gICAgZGlzY19udW1iZXI6IG51bWJlclxyXG4gICAgZHVyYXRpb25fbXM6IG51bWJlclxyXG4gICAgZXhwbGljaXQ6IGJvb2xlYW5cclxuICAgIGV4dGVybmFsX2lkczogU3BvdEFwaUVJRHNcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBpc19wbGF5YWJsZTogYm9vbGVhblxyXG4gICAgbGlua2VkX2Zyb206IHt9XHJcbiAgICByZXN0cmljdGlvbnM6IFNwb3RBcGlSZXN0cmljdGlvbnNcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgcG9wdWxhcml0eTogbnVtYmVyXHJcbiAgICBwcmV2aWV3X3VybDogc3RyaW5nXHJcbiAgICB0cmFja19udW1iZXI6IG51bWJlclxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIGlzX2xvY2FsOiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFydGlzdCB7XHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGZvbGxvd2VyczogU3BvdEFwaUZvbGxvd2Vyc1xyXG4gICAgZ2VucmVzOiBzdHJpbmdbXVxyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHBvcHVsYXJpdHk6IG51bWJlclxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpQXJ0aXN0TWluIHtcclxuICAgIHR5cGU6IFwiYXJ0aXN0XCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFsYnVtIHtcclxuICAgIGFsYnVtX3R5cGU6IHN0cmluZ1xyXG4gICAgdG90YWxfdHJhY2tzOiBudW1iZXJcclxuICAgIGF2YWlsYWJsZV9tYXJrZXRzOiBzdHJpbmdbXVxyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlW11cclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgcmVsZWFzZV9kYXRlOiBzdHJpbmdcclxuICAgIHJlbGVhc2VfZGF0ZV9wcmVjaXNpb246IHN0cmluZ1xyXG4gICAgcmVzdHJpY3Rpb25zOiBTcG90QXBpUmVzdHJpY3Rpb25zXHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgY29weXJpZ2h0czogQXJyYXk8e1xyXG4gICAgICAgIHRleHQ6IHN0cmluZ1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgfT5cclxuICAgIGV4dGVybmFsX2lkczogU3BvdEFwaUVJRHNcclxuICAgIGdlbnJlczogc3RyaW5nW11cclxuICAgIGxhYmVsOiBzdHJpbmdcclxuICAgIHBvcHVsYXJpdHk6IG51bWJlclxyXG4gICAgYWxidW1fZ3JvdXA6IHN0cmluZ1xyXG4gICAgYXJ0aXN0czogQXJyYXk8e1xyXG4gICAgICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgICAgIGlkOiBzdHJpbmdcclxuICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIH0+XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUVVcmxzIHtcclxuICAgIHNwb3RpZnk6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlFSURzIHtcclxuICAgIGlzcmM6IHN0cmluZ1xyXG4gICAgZWFuOiBzdHJpbmdcclxuICAgIHVwYzogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUltYWdlIHtcclxuICAgIHVybDogc3RyaW5nXHJcbiAgICB3aWR0aDogbnVtYmVyXHJcbiAgICBoZWlnaHQ6IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlSZXN0cmljdGlvbnMge1xyXG4gICAgcmVhc29uOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRm9sbG93ZXJzIHtcclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgdG90YWw6IG51bWJlclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUR1cmF0aW9uIHtcclxuICAgIG1pbGxpc2Vjb25kczogbnVtYmVyXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpUGxheWxpc3Qge1xyXG4gICAgY29sbGFib3JhdGl2ZTogYm9vbGVhblxyXG4gICAgZGVzY3JpcHRpb246IHN0cmluZ1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBmb2xsb3dlcnM6IHtcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICB0b3RhbDogbnVtYmVyXHJcbiAgICB9XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBTcG90aWZ5SURcclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlW11cclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgb3duZXI6IFNwb3RBcGlPd25lclxyXG4gICAgcHVibGljOiBib29sZWFuXHJcbiAgICBzbmFwc2hvdF9pZDogc3RyaW5nXHJcbiAgICB0cmFja3M6IHtcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICBsaW1pdDogbnVtYmVyXHJcbiAgICAgICAgbmV4dDogc3RyaW5nXHJcbiAgICAgICAgb2Zmc2V0OiBudW1iZXJcclxuICAgICAgICBwcmV2aW91czogc3RyaW5nXHJcbiAgICAgICAgdG90YWw6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIGFkZGVkX2F0OiBzdHJpbmdcclxuICAgICAgICAgICAgYWRkZWRfYnk6IFNwb3RBcGlPd25lclxyXG4gICAgICAgICAgICBpc19sb2NhbDogYm9vbGVhblxyXG4gICAgICAgICAgICB0cmFjazogU3BvdEFwaVRyYWNrXHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaU93bmVyIHtcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgZm9sbG93ZXJzPzoge1xyXG4gICAgICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXJcclxuICAgIH1cclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IFNwb3RpZnlJRFxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIGRpc3BsYXlfbmFtZT86IHN0cmluZ1xyXG4gICAgbmFtZT86IHN0cmluZ1xyXG59XHJcblxyXG4vL1RPRE86IEJldHRlciBUUyBpbnRlcmZhY2UgZm9yIHJlY3Vyc2l2ZSBmZXRjaFBsYXRGb2xkZXJSZXNcclxuZXhwb3J0IGludGVyZmFjZSBmZXRjaFBsYXRGb2xkZXJSZXMge1xyXG4gICAgdHlwZTogXCJmb2xkZXJcIiB8IFwicGxhY2Vob2xkZXJcIiB8IFwicGxheWxpc3RcIlxyXG4gICAgYWRkZWRBdDogc3RyaW5nXHJcbiAgICBpdGVtcz86IEFycmF5PGZldGNoUGxhdEZvbGRlclJlcz5cclxuICAgIG5hbWU/OiBzdHJpbmdcclxuICAgIHVyaTogc3RyaW5nXHJcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZ1xyXG4gICAgaW1hZ2VzPzogU3BvdEFwaUltYWdlMltdXHJcbiAgICBtYWRlRm9yPzogbnVsbFxyXG4gICAgb3duZXI/OiB7XHJcbiAgICAgICAgdHlwZTogXCJ1c2VyXCJcclxuICAgICAgICB1cmk6IHN0cmluZ1xyXG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmdcclxuICAgICAgICBkaXNwbGF5TmFtZTogc3RyaW5nXHJcbiAgICAgICAgaW1hZ2VzOiBhbnlbXVxyXG4gICAgfVxyXG4gICAgdG90YWxMZW5ndGg/OiBudW1iZXJcclxuICAgIHVuZmlsdGVyZWRUb3RhbExlbmd0aD86IG51bWJlclxyXG4gICAgdG90YWxMaWtlcz86IG51bGxcclxuICAgIGR1cmF0aW9uPzogbnVsbFxyXG4gICAgaXNDb2xsYWJvcmF0aXZlPzogYm9vbGVhblxyXG4gICAgaXNMb2FkZWQ/OiBib29sZWFuXHJcbiAgICBpc093bmVkQnlTZWxmPzogYm9vbGVhblxyXG4gICAgaXNQdWJsaXNoZWQ/OiBib29sZWFuXHJcbiAgICBoYXNFcGlzb2Rlcz86IG51bGxcclxuICAgIGhhc1Nwb3RpZnlUcmFja3M/OiBudWxsXHJcbiAgICBoYXNTcG90aWZ5QXVkaW9ib29rcz86IG51bGxcclxuICAgIGNhbkFkZD86IGJvb2xlYW5cclxuICAgIGNhblJlbW92ZT86IGJvb2xlYW5cclxuICAgIGNhblBsYXk/OiBudWxsXHJcbiAgICBmb3JtYXRMaXN0RGF0YT86IHtcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICBhdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9XHJcbiAgICB9IHwgbnVsbFxyXG4gICAgY2FuUmVwb3J0QW5ub3RhdGlvbkFidXNlPzogYm9vbGVhblxyXG4gICAgaGFzRGF0ZUFkZGVkPzogYm9vbGVhblxyXG4gICAgcGVybWlzc2lvbnM/OiBudWxsXHJcbiAgICBjb2xsYWJvcmF0b3JzPzoge1xyXG4gICAgICAgIGNvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogYW55W11cclxuICAgIH1cclxuICAgIGlzTm90Rm91bmQ/OiBib29sZWFuXHJcbiAgICBpc0ZvcmJpZGRlbj86IGJvb2xlYW5cclxufVxyXG4iLAogICJpbXBvcnQgeyBpbnZva2VOdWxsYXJ5IH0gZnJvbSBcImZwLXRzLXN0ZC9GdW5jdGlvblwiXHJcbmltcG9ydCB7IHBpcGUgYXMgcCB9IGZyb20gXCJmcC10cy9mdW5jdGlvblwiXHJcbmltcG9ydCB7IHBNY2hhaW4sIGNodW5ja2lmeSwgbWVtb2l6ZTIgfSBmcm9tIFwiLi9mcFwiXHJcbmltcG9ydCB7IFNwb3RpZnlJRCwgU3BvdGlmeUxvYywgU3BvdGlmeVVSSSwgZXNjYXBlUmVnZXggfSBmcm9tIFwiLi91dGlsXCJcclxuXHJcbmNvbnN0IHsgVVJJIH0gPSBTcGljZXRpZnlcclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBHcmFwaFFMICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBbGJ1bSA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gNDg3KSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMuZ2V0QWxidW0sIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBsb2NhbGU6IFNwaWNldGlmeS5Mb2NhbGUuZ2V0TG9jYWxlKCksXHJcbiAgICAgICAgICAgIG9mZnNldCxcclxuICAgICAgICAgICAgbGltaXQsXHJcbiAgICAgICAgfSlcclxuICAgICkuZGF0YS5hbGJ1bVVuaW9uIGFzIGZldGNoR1FMQWxidW1SZXNcclxuXHJcbnR5cGUgZmV0Y2hBcnRpc3RHUUxSZXMgPSBhbnlcclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQXJ0aXN0T3ZlcnZpZXcgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMucXVlcnlBcnRpc3RPdmVydmlldywge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIGxvY2FsZTogU3BpY2V0aWZ5LkxvY2FsZS5nZXRMb2NhbGUoKSxcclxuICAgICAgICAgICAgaW5jbHVkZVByZXJlbGVhc2U6IHRydWUsXHJcbiAgICAgICAgfSlcclxuICAgICkuZGF0YS5hcnRpc3RVbmlvbiBhcyBmZXRjaEFydGlzdEdRTFJlc1xyXG5cclxudHlwZSBmZXRjaEdRTEFydGlzdERpc2NvZ3JhcGh5UmVzID0gYW55XHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFydGlzdERpc2NvZ3JhcGh5ID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSAxMTYpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5xdWVyeUFydGlzdERpc2NvZ3JhcGh5QWxsLCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgb2Zmc2V0LFxyXG4gICAgICAgICAgICBsaW1pdCxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFydGlzdFVuaW9uLmRpc2NvZ3JhcGh5LmFsbC5pdGVtcyBhcyBmZXRjaEdRTEFydGlzdERpc2NvZ3JhcGh5UmVzXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBcnRpc3RSZWxhdGVkID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLnF1ZXJ5QXJ0aXN0UmVsYXRlZCwge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIGxvY2FsZTogU3BpY2V0aWZ5LkxvY2FsZS5nZXRMb2NhbGUoKSxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFydGlzdFVuaW9uLnJlbGF0ZWRDb250ZW50LnJlbGF0ZWRBcnRpc3RzLml0ZW1zIGFzIGZldGNoR1FMQXJ0aXN0UmVsYXRlZFJlc1xyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFNwb3RpZnkgV2ViIEFQSSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVXZWJQbGF5bGlzdFRyYWNrcyA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeUlELCB0cmFja3M6IFNwb3RpZnlVUklbXSkgPT5cclxuICAgIFNwaWNldGlmeS5Db3Ntb3NBc3luYy5kZWwoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL3BsYXlsaXN0cy8ke3BsYXlsaXN0fS90cmFja3NgLCB7XHJcbiAgICAgICAgdHJhY2tzOiB0cmFja3MubWFwKHVyaSA9PiAoeyB1cmkgfSkpLFxyXG4gICAgfSlcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYkFydGlzdHNTcG90ID0gY2h1bmNraWZ5KDUwKShcclxuICAgIGFzeW5jIChpZHM6IFNwb3RpZnlJRFtdKSA9PlxyXG4gICAgICAgIChhd2FpdCBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9hcnRpc3RzP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLmFydGlzdHMgYXMgU3BvdEFwaUFydGlzdFtdLFxyXG4pXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJQbGF5bGlzdHNTcG90ID0gY2h1bmNraWZ5KDEpKFxyXG4gICAgLy8gQHRzLWlnbm9yZSBjaHVua2lmeSB3aWxsIG5ldmVyIGNhbGwgd2l0aCBlbXB0eSBhcnJheVxyXG4gICAgYXN5bmMgKFtpZF06IFtTcG90aWZ5SURdKSA9PiBbXHJcbiAgICAgICAgKGF3YWl0IFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL3BsYXlsaXN0cy8ke2lkfWApKSBhcyBTcG90QXBpUGxheWxpc3QsXHJcbiAgICBdLFxyXG4pXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYkFsYnVtc1Nwb3QgPSBjaHVuY2tpZnkoNTApKFxyXG4gICAgYXN5bmMgKGlkczogU3BvdGlmeUlEW10pID0+XHJcbiAgICAgICAgKGF3YWl0IFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL2FsYnVtcz9pZHM9JHtpZHMuam9pbihcIixcIil9YCkpXHJcbiAgICAgICAgICAgIC5hbGJ1bXMgYXMgU3BvdEFwaUFsYnVtW10sXHJcbilcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlRyYWNrc1Nwb3QgPSBjaHVuY2tpZnkoNTApKFxyXG4gICAgYXN5bmMgKGlkczogU3BvdGlmeUlEW10pID0+XHJcbiAgICAgICAgKGF3YWl0IFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL3RyYWNrcz9pZHM9JHtpZHMuam9pbihcIixcIil9YCkpXHJcbiAgICAgICAgICAgIC50cmFja3MgYXMgU3BvdEFwaVRyYWNrW10sXHJcbilcclxuXHJcbmV4cG9ydCBjb25zdCBzZWFyY2hXZWJJdGVtU3BvdCA9IGFzeW5jIChxOiBzdHJpbmcsIHR5cGU6IHN0cmluZ1tdKSA9PlxyXG4gICAgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvc2VhcmNoP3E9JHtlbmNvZGVVUklDb21wb25lbnQocSl9JnR5cGU9JHt0eXBlLmpvaW4oXCIsXCIpfWApXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJTb3VuZE9mU3BvdGlmeVBsYXlsaXN0ID0gYXN5bmMgKGdlbnJlOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IG5hbWUgPSBgVGhlIFNvdW5kIE9mICR7Z2VucmV9YFxyXG4gICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKGBeJHtlc2NhcGVSZWdleChuYW1lKX0kYCwgXCJpXCIpXHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBzZWFyY2hXZWJJdGVtU3BvdChuYW1lLCBbXCJwbGF5bGlzdFwiXSlcclxuICAgIGNvbnN0IGl0ZW0gPSByZXMucGxheWxpc3RzLml0ZW1zWzBdXHJcbiAgICByZXR1cm4gaXRlbT8ub3duZXIuaWQgPT09IFwidGhlc291bmRzb2ZzcG90aWZ5XCIgJiYgcmUudGVzdChpdGVtLm5hbWUpID8gaXRlbS51cmkgOiBudWxsXHJcbn1cclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBQbGF0Zm9ybSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0TGlrZWRUcmFja3MgPSBhc3luYyAoKSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5MaWJyYXJ5QVBJLmdldFRyYWNrcyh7XHJcbiAgICAgICAgICAgIGxpbWl0OiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcclxuICAgICAgICB9KVxyXG4gICAgKS5pdGVtcyBhcyBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrc1Jlc1xyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3MgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDEwMCkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uTGlicmFyeUFQSS5nZXRUcmFja3MoeyB1cmksIG9mZnNldCwgbGltaXQgfSkpLml0ZW1zIGFzIGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzUmVzXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0UGxheWxpc3RDb250ZW50cyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXlsaXN0QVBJLmdldENvbnRlbnRzKHVyaSkpLml0ZW1zIGFzIGZldGNoV2ViUGxheWxpc3RSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQbGF0Rm9sZGVyID0gYXN5bmMgKG5hbWU6IHN0cmluZywgbG9jYXRpb246IFNwb3RpZnlMb2MgPSB7fSkgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Sb290bGlzdEFQSS5jcmVhdGVGb2xkZXIobmFtZSwgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgbGlrZVBsYXRQbGF5bGlzdCA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+IGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Sb290bGlzdEFQSS5hZGQoW3VyaV0pXHJcblxyXG4vKiBSZXBsYWNlZCBieSBjcmVhdGVTUFBsYXlsaXN0RnJvbVRyYWNrcyAqL1xyXG5leHBvcnQgY29uc3QgY3JlYXRlUGxhdFBsYXlsaXN0ID0gYXN5bmMgKG5hbWU6IHN0cmluZywgbG9jYXRpb246IFNwb3RpZnlMb2MgPSB7fSkgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Sb290bGlzdEFQSS5jcmVhdGVQbGF5bGlzdChuYW1lLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVTUFBsYXlsaXN0RnJvbVRyYWNrcyA9IChuYW1lOiBzdHJpbmcsIHRyYWNrczogU3BvdGlmeVVSSVtdLCBmb2xkZXI/OiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLnBvc3QoXCJzcDovL2NvcmUtcGxheWxpc3QvdjEvcm9vdGxpc3Q/cmVzcG9uc2VGb3JtYXQ9cHJvdG9idWZKc29uXCIsIHtcclxuICAgICAgICBvcGVyYXRpb246IFwiY3JlYXRlXCIsXHJcbiAgICAgICAgLi4uKGZvbGRlciA/IHsgYWZ0ZXI6IGZvbGRlciB9IDoge30pLFxyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgcGxheWxpc3Q6IHRydWUsXHJcbiAgICAgICAgdXJpczogdHJhY2tzLFxyXG4gICAgfSlcclxuXHJcbmV4cG9ydCBjb25zdCBzZXRQbGF0UGxheWxpc3RWaXNpYmlsaXR5ID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5VVJJLCB2aXNpYmxlRm9yQWxsOiBib29sZWFuKSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXlsaXN0UGVybWlzc2lvbnNBUEkuc2V0QmFzZVBlcm1pc3Npb24ocGxheWxpc3QsIHZpc2libGVGb3JBbGwgPyBcIlZJRVdFUlwiIDogXCJCTE9DS0VEXCIpXHJcbmV4cG9ydCBjb25zdCBzZXRQbGF0UGxheWxpc3RQdWJsaXNoZWQgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlVUkksIHB1Ymxpc2hlZDogYm9vbGVhbikgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Sb290bGlzdEFQSS5zZXRQdWJsaXNoZWRTdGF0ZShwbGF5bGlzdCwgcHVibGlzaGVkKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdEZvbGRlciA9IGFzeW5jIChmb2xkZXI/OiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Sb290bGlzdEFQSS5nZXRDb250ZW50cyh7IGZvbGRlclVyaTogZm9sZGVyIH0pKSBhcyBmZXRjaFBsYXRGb2xkZXJSZXNcclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdFJvb3RGb2xkZXIgPSAoKSA9PiBmZXRjaFBsYXRGb2xkZXIodW5kZWZpbmVkKVxyXG5cclxuZXhwb3J0IGNvbnN0IGFkZFBsYXRQbGF5bGlzdFRyYWNrcyA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeVVSSSwgdHJhY2tzOiBTcG90aWZ5VVJJW10sIGxvY2F0aW9uOiBTcG90aWZ5TG9jID0ge30pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkuYWRkKHBsYXlsaXN0LCB0cmFja3MsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IG1vdmVQbGF0UGxheWxpc3RUcmFja3MgPSBhc3luYyAoXHJcbiAgICBwbGF5bGlzdDogU3BvdGlmeVVSSSxcclxuICAgIHRyYWNrczogQXJyYXk8eyB1aWQ6IHN0cmluZyB9PixcclxuICAgIGxvY2F0aW9uOiBTcG90aWZ5TG9jID0ge30sXHJcbikgPT4gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXlsaXN0QVBJLm1vdmUocGxheWxpc3QsIHRyYWNrcywgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0UGxheWxpc3RFbmhhbmNlZFNvbmdzMzAwID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSAzMDApID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkVuaGFuY2VBUEkuZ2V0UGFnZSh1cmksIC8qIGl0ZXJhdGlvbiAqLyAwLCAvKiBzZXNzaW9uSWQgKi8gMCwgb2Zmc2V0LCBsaW1pdCkpLmVuaGFuY2VQYWdlXHJcbiAgICAgICAgLnBhZ2VJdGVtcyBhcyBhbnlbXVxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0UGxheWxpc3RFbmhhbmNlZFNvbmdzID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCk6IFByb21pc2U8YW55W10+ID0+IHtcclxuICAgIGNvbnN0IG5leHRQYWdlSXRlbXMgPSBhd2FpdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MzMDAodXJpLCBvZmZzZXQpXHJcbiAgICBpZiAobmV4dFBhZ2VJdGVtcz8ubGVuZ3RoIDwgMzAwKSByZXR1cm4gbmV4dFBhZ2VJdGVtc1xyXG4gICAgZWxzZSByZXR1cm4gbmV4dFBhZ2VJdGVtcy5jb25jYXQoZmV0Y2hQbGF0UGxheWxpc3RFbmhhbmNlZFNvbmdzKHVyaSwgb2Zmc2V0ICsgMzAwKSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoTG9jYWxUcmFja3MgPSBhc3luYyAoKSA9PiBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uTG9jYWxGaWxlc0FQSS5nZXRUcmFja3MoKVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIE5vbiBTcG90aWZ5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFRyYWNrTEZNQVBJID0gYXN5bmMgKExGTUFwaUtleTogc3RyaW5nLCBhcnRpc3Q6IHN0cmluZywgdHJhY2tOYW1lOiBzdHJpbmcsIGxhc3RGbVVzZXJuYW1lID0gXCJcIikgPT4ge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChcImh0dHBzOi8vd3MuYXVkaW9zY3JvYmJsZXIuY29tLzIuMC9cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwibWV0aG9kXCIsIFwidHJhY2suZ2V0SW5mb1wiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJhcGlfa2V5XCIsIExGTUFwaUtleSlcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiYXJ0aXN0XCIsIGFydGlzdClcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidHJhY2tcIiwgdHJhY2tOYW1lKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJmb3JtYXRcIiwgXCJqc29uXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInVzZXJuYW1lXCIsIGxhc3RGbVVzZXJuYW1lKVxyXG5cclxuICAgIHJldHVybiAoYXdhaXQgZmV0Y2godXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKSkgYXMgZmV0Y2hUcmFja0xGTUFQSVJlc1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hUcmFja0xGTUFQSU1lbW9pemVkID0gbWVtb2l6ZTIoZmV0Y2hUcmFja0xGTUFQSSlcclxuXHJcbmV4cG9ydCBjb25zdCBzZWFyY2hZb3V0dWJlID0gYXN5bmMgKFlvdVR1YmVBcGlLZXk6IHN0cmluZywgc2VhcmNoU3RyaW5nOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS95b3V0dWJlL3YzL3NlYXJjaFwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJwYXJ0XCIsIFwic25pcHBldFwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJtYXhSZXN1bHRzXCIsIFwiMTBcIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwicVwiLCBzZWFyY2hTdHJpbmcpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInR5cGVcIiwgXCJ2aWRlb1wiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJrZXlcIiwgWW91VHViZUFwaUtleSlcclxuXHJcbiAgICByZXR1cm4gKGF3YWl0IGZldGNoKHVybCkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkpIGFzIGFueVtdXHJcbn1cclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBUeXBlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIGZldGNoR1FMQWxidW1SZXMge1xyXG4gICAgX190eXBlbmFtZTogXCJhbGJ1bVwiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgYXJ0aXN0czoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIGlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgIHByb2ZpbGU6IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZpc3VhbHM6IHtcclxuICAgICAgICAgICAgICAgIGF2YXRhckltYWdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzaGFyaW5nSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgc2hhcmVVcmw6IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIGNvdmVyQXJ0OiB7XHJcbiAgICAgICAgZXh0cmFjdGVkQ29sb3JzOiB7XHJcbiAgICAgICAgICAgIGNvbG9yUmF3OiB7XHJcbiAgICAgICAgICAgICAgICBoZXg6IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbG9yTGlnaHQ6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JEYXJrOiB7XHJcbiAgICAgICAgICAgICAgICBoZXg6IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICB9XHJcbiAgICBkaXNjczoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIG51bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgIHRyYWNrczoge1xyXG4gICAgICAgICAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgcmVsZWFzZXM6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgZGF0ZToge1xyXG4gICAgICAgIGlzb1N0cmluZzogc3RyaW5nXHJcbiAgICAgICAgcHJlY2lzaW9uOiBzdHJpbmdcclxuICAgIH1cclxuICAgIHBsYXlhYmlsaXR5OiB7XHJcbiAgICAgICAgcGxheWFibGU6IGJvb2xlYW5cclxuICAgICAgICByZWFzb246IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgbGFiZWw6IHN0cmluZ1xyXG4gICAgY29weXJpZ2h0OiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgICAgIHRleHQ6IHN0cmluZ1xyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICBjb3VydGVzeUxpbmU6IHN0cmluZ1xyXG4gICAgc2F2ZWQ6IGJvb2xlYW5cclxuICAgIHNoYXJpbmdJbmZvOiB7XHJcbiAgICAgICAgc2hhcmVVcmw6IHN0cmluZ1xyXG4gICAgICAgIHNoYXJlSWQ6IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgdHJhY2tzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgdWlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdHJhY2s6IHtcclxuICAgICAgICAgICAgICAgIHNhdmVkOiBib29sZWFuXHJcbiAgICAgICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgcGxheWNvdW50OiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIGRpc2NOdW1iZXI6IG51bWJlclxyXG4gICAgICAgICAgICAgICAgdHJhY2tOdW1iZXI6IG51bWJlclxyXG4gICAgICAgICAgICAgICAgY29udGVudFJhdGluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlbGlua2luZ0luZm9ybWF0aW9uOiBhbnlcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxNaWxsaXNlY29uZHM6IG51bWJlclxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGxheWFiaWxpdHk6IHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXJ0aXN0czoge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgbW9yZUFsYnVtc0J5QXJ0aXN0OiB7XHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgZGlzY29ncmFwaHk6IHtcclxuICAgICAgICAgICAgICAgIHBvcHVsYXJSZWxlYXNlc0FsYnVtczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBudW1iZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3ZlckFydDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5YWJpbGl0eToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWFibGU6IGJvb2xlYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmluZ0luZm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlSWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVVcmw6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9PlxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBmZXRjaEdRTEFydGlzdFJlbGF0ZWRSZXMgPSBBcnJheTx7XHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIHByb2ZpbGU6IHtcclxuICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgIH1cclxuICAgIHZpc3VhbHM6IHtcclxuICAgICAgICBhdmF0YXJJbWFnZToge1xyXG4gICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufT5cclxuXHJcbmV4cG9ydCB0eXBlIGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzUmVzID0gQXJyYXk8e1xyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IHN0cmluZ1xyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBkdXJhdGlvbjogU3BvdEFwaUR1cmF0aW9uXHJcbiAgICBhbGJ1bTogU3BvdEFwaUFsYnVtTWluXHJcbiAgICBhcnRpc3RzOiBTcG90QXBpQXJ0aXN0TWluW11cclxuICAgIGRpc2NOdW1iZXI6IG51bWJlclxyXG4gICAgdHJhY2tOdW1iZXI6IG51bWJlclxyXG4gICAgaXNFeHBsaWNpdDogYm9vbGVhblxyXG4gICAgaXNQbGF5YWJsZTogYm9vbGVhblxyXG4gICAgaXNMb2NhbDogYm9vbGVhblxyXG4gICAgaXMxOVBsdXNPbmx5OiBib29sZWFuXHJcbiAgICBhZGRlZEF0OiBzdHJpbmdcclxufT5cclxuXHJcbmV4cG9ydCB0eXBlIGZldGNoV2ViUGxheWxpc3RSZXMgPSBBcnJheTx7XHJcbiAgICB1aWQ6IHN0cmluZ1xyXG4gICAgcGxheUluZGV4OiBudWxsXHJcbiAgICBhZGRlZEF0OiBzdHJpbmdcclxuICAgIGFkZGVkQnk6IHtcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICB1c2VybmFtZTogc3RyaW5nXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGltYWdlczogU3BvdEFwaUltYWdlMltdXHJcbiAgICB9XHJcbiAgICBmb3JtYXRMaXN0QXR0cmlidXRlczoge31cclxuICAgIHR5cGU6IFwidHJhY2tcIlxyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGFsYnVtOiBTcG90QXBpQWxidW1NaW5cclxuICAgIGFydGlzdHM6IFNwb3RBcGlBcnRpc3RNaW5bXVxyXG4gICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICBkdXJhdGlvbjogU3BvdEFwaUR1cmF0aW9uXHJcbiAgICBpc0V4cGxpY2l0OiBib29sZWFuXHJcbiAgICBpc0xvY2FsOiBib29sZWFuXHJcbiAgICBpc1BsYXlhYmxlOiBib29sZWFuXHJcbiAgICBpczE5UGx1c09ubHk6IGJvb2xlYW5cclxufT5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hUcmFja0xGTUFQSVJlcyB7XHJcbiAgICB0cmFjazoge1xyXG4gICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgIG1iaWQ6IHN0cmluZ1xyXG4gICAgICAgIHVybDogc3RyaW5nXHJcbiAgICAgICAgZHVyYXRpb246IHN0cmluZ1xyXG4gICAgICAgIHN0cmVhbWFibGU6IHtcclxuICAgICAgICAgICAgXCIjdGV4dFwiOiBzdHJpbmdcclxuICAgICAgICAgICAgZnVsbHRyYWNrOiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICAgICAgbGlzdGVuZXJzOiBzdHJpbmdcclxuICAgICAgICBwbGF5Y291bnQ6IHN0cmluZ1xyXG4gICAgICAgIGFydGlzdDoge1xyXG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgbWJpZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHVybDogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFsYnVtOiB7XHJcbiAgICAgICAgICAgIGFydGlzdDogc3RyaW5nXHJcbiAgICAgICAgICAgIHRpdGxlOiBzdHJpbmdcclxuICAgICAgICAgICAgbWJpZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHVybDogc3RyaW5nXHJcbiAgICAgICAgICAgIGltYWdlOiBBcnJheTx7XHJcbiAgICAgICAgICAgICAgICBcIiN0ZXh0XCI6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgc2l6ZTogc3RyaW5nXHJcbiAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgIFwiQGF0dHJcIjoge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVzZXJwbGF5Y291bnQ6IHN0cmluZ1xyXG4gICAgICAgIHVzZXJsb3ZlZDogc3RyaW5nXHJcbiAgICAgICAgdG9wdGFnczoge1xyXG4gICAgICAgICAgICB0YWc6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgfT5cclxuICAgICAgICB9XHJcbiAgICAgICAgd2lraToge1xyXG4gICAgICAgICAgICBwdWJsaXNoZWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICBzdW1tYXJ5OiBzdHJpbmdcclxuICAgICAgICAgICAgY29udGVudDogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpQWxidW1NaW4ge1xyXG4gICAgdHlwZTogXCJhbGJ1bVwiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgYXJ0aXN0OiBTcG90QXBpQXJ0aXN0TWluXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZTJbXVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlJbWFnZTIge1xyXG4gICAgdXJsOiBzdHJpbmdcclxuICAgIGxhYmVsOiBcInNtYWxsXCIgfCBcInN0YW5kYXJkXCIgfCBcImxhcmdlXCIgfCBcInhsYXJnZVwiXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaVRyYWNrIHtcclxuICAgIGFsYnVtOiBTcG90QXBpQWxidW1cclxuICAgIGFydGlzdHM6IFNwb3RBcGlBcnRpc3RbXVxyXG4gICAgYXZhaWxhYmxlX21hcmtldHM6IHN0cmluZ1tdXHJcbiAgICBkaXNjX251bWJlcjogbnVtYmVyXHJcbiAgICBkdXJhdGlvbl9tczogbnVtYmVyXHJcbiAgICBleHBsaWNpdDogYm9vbGVhblxyXG4gICAgZXh0ZXJuYWxfaWRzOiBTcG90QXBpRUlEc1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIGlzX3BsYXlhYmxlOiBib29sZWFuXHJcbiAgICBsaW5rZWRfZnJvbToge31cclxuICAgIHJlc3RyaWN0aW9uczogU3BvdEFwaVJlc3RyaWN0aW9uc1xyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIHByZXZpZXdfdXJsOiBzdHJpbmdcclxuICAgIHRyYWNrX251bWJlcjogbnVtYmVyXHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgaXNfbG9jYWw6IGJvb2xlYW5cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpQXJ0aXN0IHtcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgZm9sbG93ZXJzOiBTcG90QXBpRm9sbG93ZXJzXHJcbiAgICBnZW5yZXM6IHN0cmluZ1tdXHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlW11cclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgcG9wdWxhcml0eTogbnVtYmVyXHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBcnRpc3RNaW4ge1xyXG4gICAgdHlwZTogXCJhcnRpc3RcIlxyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBuYW1lOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpQWxidW0ge1xyXG4gICAgYWxidW1fdHlwZTogc3RyaW5nXHJcbiAgICB0b3RhbF90cmFja3M6IG51bWJlclxyXG4gICAgYXZhaWxhYmxlX21hcmtldHM6IHN0cmluZ1tdXHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICByZWxlYXNlX2RhdGU6IHN0cmluZ1xyXG4gICAgcmVsZWFzZV9kYXRlX3ByZWNpc2lvbjogc3RyaW5nXHJcbiAgICByZXN0cmljdGlvbnM6IFNwb3RBcGlSZXN0cmljdGlvbnNcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBjb3B5cmlnaHRzOiBBcnJheTx7XHJcbiAgICAgICAgdGV4dDogc3RyaW5nXHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICB9PlxyXG4gICAgZXh0ZXJuYWxfaWRzOiBTcG90QXBpRUlEc1xyXG4gICAgZ2VucmVzOiBzdHJpbmdbXVxyXG4gICAgbGFiZWw6IHN0cmluZ1xyXG4gICAgcG9wdWxhcml0eTogbnVtYmVyXHJcbiAgICBhbGJ1bV9ncm91cDogc3RyaW5nXHJcbiAgICBhcnRpc3RzOiBBcnJheTx7XHJcbiAgICAgICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgfT5cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRVVybHMge1xyXG4gICAgc3BvdGlmeTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUVJRHMge1xyXG4gICAgaXNyYzogc3RyaW5nXHJcbiAgICBlYW46IHN0cmluZ1xyXG4gICAgdXBjOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpSW1hZ2Uge1xyXG4gICAgdXJsOiBzdHJpbmdcclxuICAgIHdpZHRoOiBudW1iZXJcclxuICAgIGhlaWdodDogbnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaVJlc3RyaWN0aW9ucyB7XHJcbiAgICByZWFzb246IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlGb2xsb3dlcnMge1xyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICB0b3RhbDogbnVtYmVyXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRHVyYXRpb24ge1xyXG4gICAgbWlsbGlzZWNvbmRzOiBudW1iZXJcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlQbGF5bGlzdCB7XHJcbiAgICBjb2xsYWJvcmF0aXZlOiBib29sZWFuXHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nXHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGZvbGxvd2Vyczoge1xyXG4gICAgICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXJcclxuICAgIH1cclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IFNwb3RpZnlJRFxyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBvd25lcjogU3BvdEFwaU93bmVyXHJcbiAgICBwdWJsaWM6IGJvb2xlYW5cclxuICAgIHNuYXBzaG90X2lkOiBzdHJpbmdcclxuICAgIHRyYWNrczoge1xyXG4gICAgICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgICAgIGxpbWl0OiBudW1iZXJcclxuICAgICAgICBuZXh0OiBzdHJpbmdcclxuICAgICAgICBvZmZzZXQ6IG51bWJlclxyXG4gICAgICAgIHByZXZpb3VzOiBzdHJpbmdcclxuICAgICAgICB0b3RhbDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgYWRkZWRfYXQ6IHN0cmluZ1xyXG4gICAgICAgICAgICBhZGRlZF9ieTogU3BvdEFwaU93bmVyXHJcbiAgICAgICAgICAgIGlzX2xvY2FsOiBib29sZWFuXHJcbiAgICAgICAgICAgIHRyYWNrOiBTcG90QXBpVHJhY2tcclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpT3duZXIge1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBmb2xsb3dlcnM/OiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgdG90YWw6IG51bWJlclxyXG4gICAgfVxyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogU3BvdGlmeUlEXHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgZGlzcGxheV9uYW1lPzogc3RyaW5nXHJcbiAgICBuYW1lPzogc3RyaW5nXHJcbn1cclxuXHJcbi8vVE9ETzogQmV0dGVyIFRTIGludGVyZmFjZSBmb3IgcmVjdXJzaXZlIGZldGNoUGxhdEZvbGRlclJlc1xyXG5leHBvcnQgaW50ZXJmYWNlIGZldGNoUGxhdEZvbGRlclJlcyB7XHJcbiAgICB0eXBlOiBcImZvbGRlclwiIHwgXCJwbGFjZWhvbGRlclwiIHwgXCJwbGF5bGlzdFwiXHJcbiAgICBhZGRlZEF0OiBzdHJpbmdcclxuICAgIGl0ZW1zPzogQXJyYXk8ZmV0Y2hQbGF0Rm9sZGVyUmVzPlxyXG4gICAgbmFtZT86IHN0cmluZ1xyXG4gICAgdXJpOiBzdHJpbmdcclxuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nXHJcbiAgICBpbWFnZXM/OiBTcG90QXBpSW1hZ2UyW11cclxuICAgIG1hZGVGb3I/OiBudWxsXHJcbiAgICBvd25lcj86IHtcclxuICAgICAgICB0eXBlOiBcInVzZXJcIlxyXG4gICAgICAgIHVyaTogc3RyaW5nXHJcbiAgICAgICAgdXNlcm5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmdcclxuICAgICAgICBpbWFnZXM6IGFueVtdXHJcbiAgICB9XHJcbiAgICB0b3RhbExlbmd0aD86IG51bWJlclxyXG4gICAgdW5maWx0ZXJlZFRvdGFsTGVuZ3RoPzogbnVtYmVyXHJcbiAgICB0b3RhbExpa2VzPzogbnVsbFxyXG4gICAgZHVyYXRpb24/OiBudWxsXHJcbiAgICBpc0NvbGxhYm9yYXRpdmU/OiBib29sZWFuXHJcbiAgICBpc0xvYWRlZD86IGJvb2xlYW5cclxuICAgIGlzT3duZWRCeVNlbGY/OiBib29sZWFuXHJcbiAgICBpc1B1Ymxpc2hlZD86IGJvb2xlYW5cclxuICAgIGhhc0VwaXNvZGVzPzogbnVsbFxyXG4gICAgaGFzU3BvdGlmeVRyYWNrcz86IG51bGxcclxuICAgIGhhc1Nwb3RpZnlBdWRpb2Jvb2tzPzogbnVsbFxyXG4gICAgY2FuQWRkPzogYm9vbGVhblxyXG4gICAgY2FuUmVtb3ZlPzogYm9vbGVhblxyXG4gICAgY2FuUGxheT86IG51bGxcclxuICAgIGZvcm1hdExpc3REYXRhPzoge1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgIGF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cclxuICAgIH0gfCBudWxsXHJcbiAgICBjYW5SZXBvcnRBbm5vdGF0aW9uQWJ1c2U/OiBib29sZWFuXHJcbiAgICBoYXNEYXRlQWRkZWQ/OiBib29sZWFuXHJcbiAgICBwZXJtaXNzaW9ucz86IG51bGxcclxuICAgIGNvbGxhYm9yYXRvcnM/OiB7XHJcbiAgICAgICAgY291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBhbnlbXVxyXG4gICAgfVxyXG4gICAgaXNOb3RGb3VuZD86IGJvb2xlYW5cclxuICAgIGlzRm9yYmlkZGVuPzogYm9vbGVhblxyXG59XHJcbiIsCiAgImltcG9ydCB7IGludm9rZU51bGxhcnkgfSBmcm9tIFwiZnAtdHMtc3RkL0Z1bmN0aW9uXCJcclxuaW1wb3J0IHsgcGlwZSBhcyBwIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCJcclxuaW1wb3J0IHsgcE1jaGFpbiwgY2h1bmNraWZ5LCBtZW1vaXplMiB9IGZyb20gXCIuL2ZwXCJcclxuaW1wb3J0IHsgU3BvdGlmeUlELCBTcG90aWZ5TG9jLCBTcG90aWZ5VVJJLCBlc2NhcGVSZWdleCB9IGZyb20gXCIuL3V0aWxcIlxyXG5cclxuY29uc3QgeyBVUkkgfSA9IFNwaWNldGlmeVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIEdyYXBoUUwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFsYnVtID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSA0ODcpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5nZXRBbGJ1bSwge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIGxvY2FsZTogU3BpY2V0aWZ5LkxvY2FsZS5nZXRMb2NhbGUoKSxcclxuICAgICAgICAgICAgb2Zmc2V0LFxyXG4gICAgICAgICAgICBsaW1pdCxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFsYnVtVW5pb24gYXMgZmV0Y2hHUUxBbGJ1bVJlc1xyXG5cclxudHlwZSBmZXRjaEFydGlzdEdRTFJlcyA9IGFueVxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBcnRpc3RPdmVydmlldyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5xdWVyeUFydGlzdE92ZXJ2aWV3LCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgICAgICBpbmNsdWRlUHJlcmVsZWFzZTogdHJ1ZSxcclxuICAgICAgICB9KVxyXG4gICAgKS5kYXRhLmFydGlzdFVuaW9uIGFzIGZldGNoQXJ0aXN0R1FMUmVzXHJcblxyXG50eXBlIGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHlSZXMgPSBhbnlcclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHkgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDExNikgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLnF1ZXJ5QXJ0aXN0RGlzY29ncmFwaHlBbGwsIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBvZmZzZXQsXHJcbiAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24uZGlzY29ncmFwaHkuYWxsLml0ZW1zIGFzIGZldGNoR1FMQXJ0aXN0RGlzY29ncmFwaHlSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFydGlzdFJlbGF0ZWQgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMucXVlcnlBcnRpc3RSZWxhdGVkLCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24ucmVsYXRlZENvbnRlbnQucmVsYXRlZEFydGlzdHMuaXRlbXMgYXMgZmV0Y2hHUUxBcnRpc3RSZWxhdGVkUmVzXHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgU3BvdGlmeSBXZWIgQVBJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZVdlYlBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5SUQsIHRyYWNrczogU3BvdGlmeVVSSVtdKSA9PlxyXG4gICAgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmRlbChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvcGxheWxpc3RzLyR7cGxheWxpc3R9L3RyYWNrc2AsIHtcclxuICAgICAgICB0cmFja3M6IHRyYWNrcy5tYXAodXJpID0+ICh7IHVyaSB9KSksXHJcbiAgICB9KVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViQXJ0aXN0c1Nwb3QgPSBjaHVuY2tpZnkoNTApKFxyXG4gICAgYXN5bmMgKGlkczogU3BvdGlmeUlEW10pID0+XHJcbiAgICAgICAgKGF3YWl0IFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL2FydGlzdHM/aWRzPSR7aWRzLmpvaW4oXCIsXCIpfWApKVxyXG4gICAgICAgICAgICAuYXJ0aXN0cyBhcyBTcG90QXBpQXJ0aXN0W10sXHJcbilcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlBsYXlsaXN0c1Nwb3QgPSBjaHVuY2tpZnkoMSkoXHJcbiAgICAvLyBAdHMtaWdub3JlIGNodW5raWZ5IHdpbGwgbmV2ZXIgY2FsbCB3aXRoIGVtcHR5IGFycmF5XHJcbiAgICBhc3luYyAoW2lkXTogW1Nwb3RpZnlJRF0pID0+IFtcclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvcGxheWxpc3RzLyR7aWR9YCkpIGFzIFNwb3RBcGlQbGF5bGlzdCxcclxuICAgIF0sXHJcbilcclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViQWxidW1zU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvYWxidW1zP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLmFsYnVtcyBhcyBTcG90QXBpQWxidW1bXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViVHJhY2tzU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvdHJhY2tzP2lkcz0ke2lkcy5qb2luKFwiLFwiKX1gKSlcclxuICAgICAgICAgICAgLnRyYWNrcyBhcyBTcG90QXBpVHJhY2tbXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFdlYkl0ZW1TcG90ID0gYXN5bmMgKHE6IHN0cmluZywgdHlwZTogc3RyaW5nW10pID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9zZWFyY2g/cT0ke2VuY29kZVVSSUNvbXBvbmVudChxKX0mdHlwZT0ke3R5cGUuam9pbihcIixcIil9YClcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFdlYlNvdW5kT2ZTcG90aWZ5UGxheWxpc3QgPSBhc3luYyAoZ2VucmU6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgbmFtZSA9IGBUaGUgU291bmQgT2YgJHtnZW5yZX1gXHJcbiAgICBjb25zdCByZSA9IG5ldyBSZWdFeHAoYF4ke2VzY2FwZVJlZ2V4KG5hbWUpfSRgLCBcImlcIilcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHNlYXJjaFdlYkl0ZW1TcG90KG5hbWUsIFtcInBsYXlsaXN0XCJdKVxyXG4gICAgY29uc3QgaXRlbSA9IHJlcy5wbGF5bGlzdHMuaXRlbXNbMF1cclxuICAgIHJldHVybiBpdGVtPy5vd25lci5pZCA9PT0gXCJ0aGVzb3VuZHNvZnNwb3RpZnlcIiAmJiByZS50ZXN0KGl0ZW0ubmFtZSkgPyBpdGVtLnVyaSA6IG51bGxcclxufVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFBsYXRmb3JtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRMaWtlZFRyYWNrcyA9IGFzeW5jICgpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuZ2V0VHJhY2tzKHtcclxuICAgICAgICAgICAgbGltaXQ6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLFxyXG4gICAgICAgIH0pXHJcbiAgICApLml0ZW1zIGFzIGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzUmVzXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrcyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gMTAwKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5MaWJyYXJ5QVBJLmdldFRyYWNrcyh7IHVyaSwgb2Zmc2V0LCBsaW1pdCB9KSkuaXRlbXMgYXMgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXNcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdENvbnRlbnRzID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkuZ2V0Q29udGVudHModXJpKSkuaXRlbXMgYXMgZmV0Y2hXZWJQbGF5bGlzdFJlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBsYXRGb2xkZXIgPSBhc3luYyAobmFtZTogc3RyaW5nLCBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmNyZWF0ZUZvbGRlcihuYW1lLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBsaWtlUGxhdFBsYXlsaXN0ID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT4gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmFkZChbdXJpXSlcclxuXHJcbi8qIFJlcGxhY2VkIGJ5IGNyZWF0ZVNQUGxheWxpc3RGcm9tVHJhY2tzICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQbGF0UGxheWxpc3QgPSBhc3luYyAobmFtZTogc3RyaW5nLCBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmNyZWF0ZVBsYXlsaXN0KG5hbWUsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNQUGxheWxpc3RGcm9tVHJhY2tzID0gKG5hbWU6IHN0cmluZywgdHJhY2tzOiBTcG90aWZ5VVJJW10sIGZvbGRlcj86IFNwb3RpZnlVUkkpID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMucG9zdChcInNwOi8vY29yZS1wbGF5bGlzdC92MS9yb290bGlzdD9yZXNwb25zZUZvcm1hdD1wcm90b2J1Zkpzb25cIiwge1xyXG4gICAgICAgIG9wZXJhdGlvbjogXCJjcmVhdGVcIixcclxuICAgICAgICAuLi4oZm9sZGVyID8geyBhZnRlcjogZm9sZGVyIH0gOiB7fSksXHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBwbGF5bGlzdDogdHJ1ZSxcclxuICAgICAgICB1cmlzOiB0cmFja3MsXHJcbiAgICB9KVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldFBsYXRQbGF5bGlzdFZpc2liaWxpdHkgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlVUkksIHZpc2libGVGb3JBbGw6IGJvb2xlYW4pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RQZXJtaXNzaW9uc0FQSS5zZXRCYXNlUGVybWlzc2lvbihwbGF5bGlzdCwgdmlzaWJsZUZvckFsbCA/IFwiVklFV0VSXCIgOiBcIkJMT0NLRURcIilcclxuZXhwb3J0IGNvbnN0IHNldFBsYXRQbGF5bGlzdFB1Ymxpc2hlZCA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeVVSSSwgcHVibGlzaGVkOiBib29sZWFuKSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLnNldFB1Ymxpc2hlZFN0YXRlKHBsYXlsaXN0LCBwdWJsaXNoZWQpXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0Rm9sZGVyID0gYXN5bmMgKGZvbGRlcj86IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlJvb3RsaXN0QVBJLmdldENvbnRlbnRzKHsgZm9sZGVyVXJpOiBmb2xkZXIgfSkpIGFzIGZldGNoUGxhdEZvbGRlclJlc1xyXG5leHBvcnQgY29uc3QgZmV0Y2hQbGF0Um9vdEZvbGRlciA9ICgpID0+IGZldGNoUGxhdEZvbGRlcih1bmRlZmluZWQpXHJcblxyXG5leHBvcnQgY29uc3QgYWRkUGxhdFBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5VVJJLCB0cmFja3M6IFNwb3RpZnlVUklbXSwgbG9jYXRpb246IFNwb3RpZnlMb2MgPSB7fSkgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5hZGQocGxheWxpc3QsIHRyYWNrcywgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgbW92ZVBsYXRQbGF5bGlzdFRyYWNrcyA9IGFzeW5jIChcclxuICAgIHBsYXlsaXN0OiBTcG90aWZ5VVJJLFxyXG4gICAgdHJhY2tzOiBBcnJheTx7IHVpZDogc3RyaW5nIH0+LFxyXG4gICAgbG9jYXRpb246IFNwb3RpZnlMb2MgPSB7fSxcclxuKSA9PiBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUGxheWxpc3RBUEkubW92ZShwbGF5bGlzdCwgdHJhY2tzLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MzMDAgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDMwMCkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uRW5oYW5jZUFQSS5nZXRQYWdlKHVyaSwgLyogaXRlcmF0aW9uICovIDAsIC8qIHNlc3Npb25JZCAqLyAwLCBvZmZzZXQsIGxpbWl0KSkuZW5oYW5jZVBhZ2VcclxuICAgICAgICAucGFnZUl0ZW1zIGFzIGFueVtdXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3MgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwKTogUHJvbWlzZTxhbnlbXT4gPT4ge1xyXG4gICAgY29uc3QgbmV4dFBhZ2VJdGVtcyA9IGF3YWl0IGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25nczMwMCh1cmksIG9mZnNldClcclxuICAgIGlmIChuZXh0UGFnZUl0ZW1zPy5sZW5ndGggPCAzMDApIHJldHVybiBuZXh0UGFnZUl0ZW1zXHJcbiAgICBlbHNlIHJldHVybiBuZXh0UGFnZUl0ZW1zLmNvbmNhdChmZXRjaFBsYXRQbGF5bGlzdEVuaGFuY2VkU29uZ3ModXJpLCBvZmZzZXQgKyAzMDApKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hMb2NhbFRyYWNrcyA9IGFzeW5jICgpID0+IGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5Mb2NhbEZpbGVzQVBJLmdldFRyYWNrcygpXHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgTm9uIFNwb3RpZnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoVHJhY2tMRk1BUEkgPSBhc3luYyAoTEZNQXBpS2V5OiBzdHJpbmcsIGFydGlzdDogc3RyaW5nLCB0cmFja05hbWU6IHN0cmluZywgbGFzdEZtVXNlcm5hbWUgPSBcIlwiKSA9PiB7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFwiaHR0cHM6Ly93cy5hdWRpb3Njcm9iYmxlci5jb20vMi4wL1wiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJtZXRob2RcIiwgXCJ0cmFjay5nZXRJbmZvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImFwaV9rZXlcIiwgTEZNQXBpS2V5KVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJhcnRpc3RcIiwgYXJ0aXN0KVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ0cmFja1wiLCB0cmFja05hbWUpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImZvcm1hdFwiLCBcImpzb25cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidXNlcm5hbWVcIiwgbGFzdEZtVXNlcm5hbWUpXHJcblxyXG4gICAgcmV0dXJuIChhd2FpdCBmZXRjaCh1cmwpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpKSBhcyBmZXRjaFRyYWNrTEZNQVBJUmVzXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFRyYWNrTEZNQVBJTWVtb2l6ZWQgPSBtZW1vaXplMihmZXRjaFRyYWNrTEZNQVBJKVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFlvdXR1YmUgPSBhc3luYyAoWW91VHViZUFwaUtleTogc3RyaW5nLCBzZWFyY2hTdHJpbmc6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvc2VhcmNoXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInBhcnRcIiwgXCJzbmlwcGV0XCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcIm1heFJlc3VsdHNcIiwgXCIxMFwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJxXCIsIHNlYXJjaFN0cmluZylcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidHlwZVwiLCBcInZpZGVvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImtleVwiLCBZb3VUdWJlQXBpS2V5KVxyXG5cclxuICAgIHJldHVybiAoYXdhaXQgZmV0Y2godXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKSkgYXMgYW55W11cclxufVxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hHUUxBbGJ1bVJlcyB7XHJcbiAgICBfX3R5cGVuYW1lOiBcImFsYnVtXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhcnRpc3RzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgcHJvZmlsZToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmlzdWFsczoge1xyXG4gICAgICAgICAgICAgICAgYXZhdGFySW1hZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNoYXJpbmdJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgY292ZXJBcnQ6IHtcclxuICAgICAgICBleHRyYWN0ZWRDb2xvcnM6IHtcclxuICAgICAgICAgICAgY29sb3JSYXc6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JMaWdodDoge1xyXG4gICAgICAgICAgICAgICAgaGV4OiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xvckRhcms6IHtcclxuICAgICAgICAgICAgICAgIGhleDogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgIH1cclxuICAgIGRpc2NzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgbnVtYmVyOiBudW1iZXJcclxuICAgICAgICAgICAgdHJhY2tzOiB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICByZWxlYXNlczoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICBkYXRlOiB7XHJcbiAgICAgICAgaXNvU3RyaW5nOiBzdHJpbmdcclxuICAgICAgICBwcmVjaXNpb246IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgcGxheWFiaWxpdHk6IHtcclxuICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgIHJlYXNvbjogc3RyaW5nXHJcbiAgICB9XHJcbiAgICBsYWJlbDogc3RyaW5nXHJcbiAgICBjb3B5cmlnaHQ6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICAgICAgdGV4dDogc3RyaW5nXHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIGNvdXJ0ZXN5TGluZTogc3RyaW5nXHJcbiAgICBzYXZlZDogYm9vbGVhblxyXG4gICAgc2hhcmluZ0luZm86IHtcclxuICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgc2hhcmVJZDogc3RyaW5nXHJcbiAgICB9XHJcbiAgICB0cmFja3M6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICB1aWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB0cmFjazoge1xyXG4gICAgICAgICAgICAgICAgc2F2ZWQ6IGJvb2xlYW5cclxuICAgICAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBwbGF5Y291bnQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICBjb250ZW50UmF0aW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVsaW5raW5nSW5mb3JtYXRpb246IGFueVxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbE1pbGxpc2Vjb25kczogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwbGF5YWJpbGl0eToge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXlhYmxlOiBib29sZWFuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhcnRpc3RzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICBtb3JlQWxidW1zQnlBcnRpc3Q6IHtcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBkaXNjb2dyYXBoeToge1xyXG4gICAgICAgICAgICAgICAgcG9wdWxhclJlbGVhc2VzQWxidW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IG51bWJlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyQXJ0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlhYmlsaXR5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5YWJsZTogYm9vbGVhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFyaW5nSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVJZDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZVVybDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIGZldGNoR1FMQXJ0aXN0UmVsYXRlZFJlcyA9IEFycmF5PHtcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgcHJvZmlsZToge1xyXG4gICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgfVxyXG4gICAgdmlzdWFsczoge1xyXG4gICAgICAgIGF2YXRhckltYWdlOiB7XHJcbiAgICAgICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59PlxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXMgPSBBcnJheTx7XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogc3RyaW5nXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGR1cmF0aW9uOiBTcG90QXBpRHVyYXRpb25cclxuICAgIGFsYnVtOiBTcG90QXBpQWxidW1NaW5cclxuICAgIGFydGlzdHM6IFNwb3RBcGlBcnRpc3RNaW5bXVxyXG4gICAgZGlzY051bWJlcjogbnVtYmVyXHJcbiAgICB0cmFja051bWJlcjogbnVtYmVyXHJcbiAgICBpc0V4cGxpY2l0OiBib29sZWFuXHJcbiAgICBpc1BsYXlhYmxlOiBib29sZWFuXHJcbiAgICBpc0xvY2FsOiBib29sZWFuXHJcbiAgICBpczE5UGx1c09ubHk6IGJvb2xlYW5cclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG59PlxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hXZWJQbGF5bGlzdFJlcyA9IEFycmF5PHtcclxuICAgIHVpZDogc3RyaW5nXHJcbiAgICBwbGF5SW5kZXg6IG51bGxcclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG4gICAgYWRkZWRCeToge1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmdcclxuICAgICAgICBkaXNwbGF5TmFtZTogc3RyaW5nXHJcbiAgICAgICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2UyW11cclxuICAgIH1cclxuICAgIGZvcm1hdExpc3RBdHRyaWJ1dGVzOiB7fVxyXG4gICAgdHlwZTogXCJ0cmFja1wiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bU1pblxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdE1pbltdXHJcbiAgICBkaXNjTnVtYmVyOiBudW1iZXJcclxuICAgIHRyYWNrTnVtYmVyOiBudW1iZXJcclxuICAgIGR1cmF0aW9uOiBTcG90QXBpRHVyYXRpb25cclxuICAgIGlzRXhwbGljaXQ6IGJvb2xlYW5cclxuICAgIGlzTG9jYWw6IGJvb2xlYW5cclxuICAgIGlzUGxheWFibGU6IGJvb2xlYW5cclxuICAgIGlzMTlQbHVzT25seTogYm9vbGVhblxyXG59PlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBmZXRjaFRyYWNrTEZNQVBJUmVzIHtcclxuICAgIHRyYWNrOiB7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgbWJpZDogc3RyaW5nXHJcbiAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICBkdXJhdGlvbjogc3RyaW5nXHJcbiAgICAgICAgc3RyZWFtYWJsZToge1xyXG4gICAgICAgICAgICBcIiN0ZXh0XCI6IHN0cmluZ1xyXG4gICAgICAgICAgICBmdWxsdHJhY2s6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgICBsaXN0ZW5lcnM6IHN0cmluZ1xyXG4gICAgICAgIHBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgYXJ0aXN0OiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICAgICAgYWxidW06IHtcclxuICAgICAgICAgICAgYXJ0aXN0OiBzdHJpbmdcclxuICAgICAgICAgICAgdGl0bGU6IHN0cmluZ1xyXG4gICAgICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICAgICAgdXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgaW1hZ2U6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgIFwiI3RleHRcIjogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBzaXplOiBzdHJpbmdcclxuICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgXCJAYXR0clwiOiB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogc3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdXNlcnBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgdXNlcmxvdmVkOiBzdHJpbmdcclxuICAgICAgICB0b3B0YWdzOiB7XHJcbiAgICAgICAgICAgIHRhZzogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgICAgICB9PlxyXG4gICAgICAgIH1cclxuICAgICAgICB3aWtpOiB7XHJcbiAgICAgICAgICAgIHB1Ymxpc2hlZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHN1bW1hcnk6IHN0cmluZ1xyXG4gICAgICAgICAgICBjb250ZW50OiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBbGJ1bU1pbiB7XHJcbiAgICB0eXBlOiBcImFsYnVtXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhcnRpc3Q6IFNwb3RBcGlBcnRpc3RNaW5cclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlMltdXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUltYWdlMiB7XHJcbiAgICB1cmw6IHN0cmluZ1xyXG4gICAgbGFiZWw6IFwic21hbGxcIiB8IFwic3RhbmRhcmRcIiB8IFwibGFyZ2VcIiB8IFwieGxhcmdlXCJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpVHJhY2sge1xyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bVxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdFtdXHJcbiAgICBhdmFpbGFibGVfbWFya2V0czogc3RyaW5nW11cclxuICAgIGRpc2NfbnVtYmVyOiBudW1iZXJcclxuICAgIGR1cmF0aW9uX21zOiBudW1iZXJcclxuICAgIGV4cGxpY2l0OiBib29sZWFuXHJcbiAgICBleHRlcm5hbF9pZHM6IFNwb3RBcGlFSURzXHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaXNfcGxheWFibGU6IGJvb2xlYW5cclxuICAgIGxpbmtlZF9mcm9tOiB7fVxyXG4gICAgcmVzdHJpY3Rpb25zOiBTcG90QXBpUmVzdHJpY3Rpb25zXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHBvcHVsYXJpdHk6IG51bWJlclxyXG4gICAgcHJldmlld191cmw6IHN0cmluZ1xyXG4gICAgdHJhY2tfbnVtYmVyOiBudW1iZXJcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBpc19sb2NhbDogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBcnRpc3Qge1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBmb2xsb3dlcnM6IFNwb3RBcGlGb2xsb3dlcnNcclxuICAgIGdlbnJlczogc3RyaW5nW11cclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFydGlzdE1pbiB7XHJcbiAgICB0eXBlOiBcImFydGlzdFwiXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIG5hbWU6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlBbGJ1bSB7XHJcbiAgICBhbGJ1bV90eXBlOiBzdHJpbmdcclxuICAgIHRvdGFsX3RyYWNrczogbnVtYmVyXHJcbiAgICBhdmFpbGFibGVfbWFya2V0czogc3RyaW5nW11cclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHJlbGVhc2VfZGF0ZTogc3RyaW5nXHJcbiAgICByZWxlYXNlX2RhdGVfcHJlY2lzaW9uOiBzdHJpbmdcclxuICAgIHJlc3RyaWN0aW9uczogU3BvdEFwaVJlc3RyaWN0aW9uc1xyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIGNvcHlyaWdodHM6IEFycmF5PHtcclxuICAgICAgICB0ZXh0OiBzdHJpbmdcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgIH0+XHJcbiAgICBleHRlcm5hbF9pZHM6IFNwb3RBcGlFSURzXHJcbiAgICBnZW5yZXM6IHN0cmluZ1tdXHJcbiAgICBsYWJlbDogc3RyaW5nXHJcbiAgICBwb3B1bGFyaXR5OiBudW1iZXJcclxuICAgIGFsYnVtX2dyb3VwOiBzdHJpbmdcclxuICAgIGFydGlzdHM6IEFycmF5PHtcclxuICAgICAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICB9PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlFVXJscyB7XHJcbiAgICBzcG90aWZ5OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRUlEcyB7XHJcbiAgICBpc3JjOiBzdHJpbmdcclxuICAgIGVhbjogc3RyaW5nXHJcbiAgICB1cGM6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlJbWFnZSB7XHJcbiAgICB1cmw6IHN0cmluZ1xyXG4gICAgd2lkdGg6IG51bWJlclxyXG4gICAgaGVpZ2h0OiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpUmVzdHJpY3Rpb25zIHtcclxuICAgIHJlYXNvbjogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUZvbGxvd2VycyB7XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIHRvdGFsOiBudW1iZXJcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlEdXJhdGlvbiB7XHJcbiAgICBtaWxsaXNlY29uZHM6IG51bWJlclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaVBsYXlsaXN0IHtcclxuICAgIGNvbGxhYm9yYXRpdmU6IGJvb2xlYW5cclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgZm9sbG93ZXJzOiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgdG90YWw6IG51bWJlclxyXG4gICAgfVxyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogU3BvdGlmeUlEXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIG93bmVyOiBTcG90QXBpT3duZXJcclxuICAgIHB1YmxpYzogYm9vbGVhblxyXG4gICAgc25hcHNob3RfaWQ6IHN0cmluZ1xyXG4gICAgdHJhY2tzOiB7XHJcbiAgICAgICAgaHJlZjogc3RyaW5nXHJcbiAgICAgICAgbGltaXQ6IG51bWJlclxyXG4gICAgICAgIG5leHQ6IHN0cmluZ1xyXG4gICAgICAgIG9mZnNldDogbnVtYmVyXHJcbiAgICAgICAgcHJldmlvdXM6IHN0cmluZ1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBhZGRlZF9hdDogc3RyaW5nXHJcbiAgICAgICAgICAgIGFkZGVkX2J5OiBTcG90QXBpT3duZXJcclxuICAgICAgICAgICAgaXNfbG9jYWw6IGJvb2xlYW5cclxuICAgICAgICAgICAgdHJhY2s6IFNwb3RBcGlUcmFja1xyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlPd25lciB7XHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGZvbGxvd2Vycz86IHtcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICB0b3RhbDogbnVtYmVyXHJcbiAgICB9XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBTcG90aWZ5SURcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBkaXNwbGF5X25hbWU/OiBzdHJpbmdcclxuICAgIG5hbWU/OiBzdHJpbmdcclxufVxyXG5cclxuLy9UT0RPOiBCZXR0ZXIgVFMgaW50ZXJmYWNlIGZvciByZWN1cnNpdmUgZmV0Y2hQbGF0Rm9sZGVyUmVzXHJcbmV4cG9ydCBpbnRlcmZhY2UgZmV0Y2hQbGF0Rm9sZGVyUmVzIHtcclxuICAgIHR5cGU6IFwiZm9sZGVyXCIgfCBcInBsYWNlaG9sZGVyXCIgfCBcInBsYXlsaXN0XCJcclxuICAgIGFkZGVkQXQ6IHN0cmluZ1xyXG4gICAgaXRlbXM/OiBBcnJheTxmZXRjaFBsYXRGb2xkZXJSZXM+XHJcbiAgICBuYW1lPzogc3RyaW5nXHJcbiAgICB1cmk6IHN0cmluZ1xyXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmdcclxuICAgIGltYWdlcz86IFNwb3RBcGlJbWFnZTJbXVxyXG4gICAgbWFkZUZvcj86IG51bGxcclxuICAgIG93bmVyPzoge1xyXG4gICAgICAgIHR5cGU6IFwidXNlclwiXHJcbiAgICAgICAgdXJpOiBzdHJpbmdcclxuICAgICAgICB1c2VybmFtZTogc3RyaW5nXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGltYWdlczogYW55W11cclxuICAgIH1cclxuICAgIHRvdGFsTGVuZ3RoPzogbnVtYmVyXHJcbiAgICB1bmZpbHRlcmVkVG90YWxMZW5ndGg/OiBudW1iZXJcclxuICAgIHRvdGFsTGlrZXM/OiBudWxsXHJcbiAgICBkdXJhdGlvbj86IG51bGxcclxuICAgIGlzQ29sbGFib3JhdGl2ZT86IGJvb2xlYW5cclxuICAgIGlzTG9hZGVkPzogYm9vbGVhblxyXG4gICAgaXNPd25lZEJ5U2VsZj86IGJvb2xlYW5cclxuICAgIGlzUHVibGlzaGVkPzogYm9vbGVhblxyXG4gICAgaGFzRXBpc29kZXM/OiBudWxsXHJcbiAgICBoYXNTcG90aWZ5VHJhY2tzPzogbnVsbFxyXG4gICAgaGFzU3BvdGlmeUF1ZGlvYm9va3M/OiBudWxsXHJcbiAgICBjYW5BZGQ/OiBib29sZWFuXHJcbiAgICBjYW5SZW1vdmU/OiBib29sZWFuXHJcbiAgICBjYW5QbGF5PzogbnVsbFxyXG4gICAgZm9ybWF0TGlzdERhdGE/OiB7XHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgYXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxyXG4gICAgfSB8IG51bGxcclxuICAgIGNhblJlcG9ydEFubm90YXRpb25BYnVzZT86IGJvb2xlYW5cclxuICAgIGhhc0RhdGVBZGRlZD86IGJvb2xlYW5cclxuICAgIHBlcm1pc3Npb25zPzogbnVsbFxyXG4gICAgY29sbGFib3JhdG9ycz86IHtcclxuICAgICAgICBjb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IGFueVtdXHJcbiAgICB9XHJcbiAgICBpc05vdEZvdW5kPzogYm9vbGVhblxyXG4gICAgaXNGb3JiaWRkZW4/OiBib29sZWFuXHJcbn1cclxuIiwKICAiaW1wb3J0IHsgaW52b2tlTnVsbGFyeSB9IGZyb20gXCJmcC10cy1zdGQvRnVuY3Rpb25cIlxyXG5pbXBvcnQgeyBwaXBlIGFzIHAgfSBmcm9tIFwiZnAtdHMvZnVuY3Rpb25cIlxyXG5pbXBvcnQgeyBwTWNoYWluLCBjaHVuY2tpZnksIG1lbW9pemUyIH0gZnJvbSBcIi4vZnBcIlxyXG5pbXBvcnQgeyBTcG90aWZ5SUQsIFNwb3RpZnlMb2MsIFNwb3RpZnlVUkksIGVzY2FwZVJlZ2V4IH0gZnJvbSBcIi4vdXRpbFwiXHJcblxyXG5jb25zdCB7IFVSSSB9ID0gU3BpY2V0aWZ5XHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgR3JhcGhRTCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQWxidW0gPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDQ4NykgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLmdldEFsYnVtLCB7XHJcbiAgICAgICAgICAgIHVyaSxcclxuICAgICAgICAgICAgbG9jYWxlOiBTcGljZXRpZnkuTG9jYWxlLmdldExvY2FsZSgpLFxyXG4gICAgICAgICAgICBvZmZzZXQsXHJcbiAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYWxidW1VbmlvbiBhcyBmZXRjaEdRTEFsYnVtUmVzXHJcblxyXG50eXBlIGZldGNoQXJ0aXN0R1FMUmVzID0gYW55XHJcbmV4cG9ydCBjb25zdCBmZXRjaEdRTEFydGlzdE92ZXJ2aWV3ID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSkgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuR3JhcGhRTC5SZXF1ZXN0KFNwaWNldGlmeS5HcmFwaFFMLkRlZmluaXRpb25zLnF1ZXJ5QXJ0aXN0T3ZlcnZpZXcsIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBsb2NhbGU6IFNwaWNldGlmeS5Mb2NhbGUuZ2V0TG9jYWxlKCksXHJcbiAgICAgICAgICAgIGluY2x1ZGVQcmVyZWxlYXNlOiB0cnVlLFxyXG4gICAgICAgIH0pXHJcbiAgICApLmRhdGEuYXJ0aXN0VW5pb24gYXMgZmV0Y2hBcnRpc3RHUUxSZXNcclxuXHJcbnR5cGUgZmV0Y2hHUUxBcnRpc3REaXNjb2dyYXBoeVJlcyA9IGFueVxyXG5leHBvcnQgY29uc3QgZmV0Y2hHUUxBcnRpc3REaXNjb2dyYXBoeSA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gMTE2KSA9PlxyXG4gICAgKFxyXG4gICAgICAgIGF3YWl0IFNwaWNldGlmeS5HcmFwaFFMLlJlcXVlc3QoU3BpY2V0aWZ5LkdyYXBoUUwuRGVmaW5pdGlvbnMucXVlcnlBcnRpc3REaXNjb2dyYXBoeUFsbCwge1xyXG4gICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgIG9mZnNldCxcclxuICAgICAgICAgICAgbGltaXQsXHJcbiAgICAgICAgfSlcclxuICAgICkuZGF0YS5hcnRpc3RVbmlvbi5kaXNjb2dyYXBoeS5hbGwuaXRlbXMgYXMgZmV0Y2hHUUxBcnRpc3REaXNjb2dyYXBoeVJlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoR1FMQXJ0aXN0UmVsYXRlZCA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkkpID0+XHJcbiAgICAoXHJcbiAgICAgICAgYXdhaXQgU3BpY2V0aWZ5LkdyYXBoUUwuUmVxdWVzdChTcGljZXRpZnkuR3JhcGhRTC5EZWZpbml0aW9ucy5xdWVyeUFydGlzdFJlbGF0ZWQsIHtcclxuICAgICAgICAgICAgdXJpLFxyXG4gICAgICAgICAgICBsb2NhbGU6IFNwaWNldGlmeS5Mb2NhbGUuZ2V0TG9jYWxlKCksXHJcbiAgICAgICAgfSlcclxuICAgICkuZGF0YS5hcnRpc3RVbmlvbi5yZWxhdGVkQ29udGVudC5yZWxhdGVkQXJ0aXN0cy5pdGVtcyBhcyBmZXRjaEdRTEFydGlzdFJlbGF0ZWRSZXNcclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBTcG90aWZ5IFdlYiBBUEkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgY29uc3QgcmVtb3ZlV2ViUGxheWxpc3RUcmFja3MgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlJRCwgdHJhY2tzOiBTcG90aWZ5VVJJW10pID0+XHJcbiAgICBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZGVsKGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9wbGF5bGlzdHMvJHtwbGF5bGlzdH0vdHJhY2tzYCwge1xyXG4gICAgICAgIHRyYWNrczogdHJhY2tzLm1hcCh1cmkgPT4gKHsgdXJpIH0pKSxcclxuICAgIH0pXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJBcnRpc3RzU3BvdCA9IGNodW5ja2lmeSg1MCkoXHJcbiAgICBhc3luYyAoaWRzOiBTcG90aWZ5SURbXSkgPT5cclxuICAgICAgICAoYXdhaXQgU3BpY2V0aWZ5LkNvc21vc0FzeW5jLmdldChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvYXJ0aXN0cz9pZHM9JHtpZHMuam9pbihcIixcIil9YCkpXHJcbiAgICAgICAgICAgIC5hcnRpc3RzIGFzIFNwb3RBcGlBcnRpc3RbXSxcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViUGxheWxpc3RzU3BvdCA9IGNodW5ja2lmeSgxKShcclxuICAgIC8vIEB0cy1pZ25vcmUgY2h1bmtpZnkgd2lsbCBuZXZlciBjYWxsIHdpdGggZW1wdHkgYXJyYXlcclxuICAgIGFzeW5jIChbaWRdOiBbU3BvdGlmeUlEXSkgPT4gW1xyXG4gICAgICAgIChhd2FpdCBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9wbGF5bGlzdHMvJHtpZH1gKSkgYXMgU3BvdEFwaVBsYXlsaXN0LFxyXG4gICAgXSxcclxuKVxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJBbGJ1bXNTcG90ID0gY2h1bmNraWZ5KDUwKShcclxuICAgIGFzeW5jIChpZHM6IFNwb3RpZnlJRFtdKSA9PlxyXG4gICAgICAgIChhd2FpdCBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9hbGJ1bXM/aWRzPSR7aWRzLmpvaW4oXCIsXCIpfWApKVxyXG4gICAgICAgICAgICAuYWxidW1zIGFzIFNwb3RBcGlBbGJ1bVtdLFxyXG4pXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hXZWJUcmFja3NTcG90ID0gY2h1bmNraWZ5KDUwKShcclxuICAgIGFzeW5jIChpZHM6IFNwb3RpZnlJRFtdKSA9PlxyXG4gICAgICAgIChhd2FpdCBTcGljZXRpZnkuQ29zbW9zQXN5bmMuZ2V0KGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS90cmFja3M/aWRzPSR7aWRzLmpvaW4oXCIsXCIpfWApKVxyXG4gICAgICAgICAgICAudHJhY2tzIGFzIFNwb3RBcGlUcmFja1tdLFxyXG4pXHJcblxyXG5leHBvcnQgY29uc3Qgc2VhcmNoV2ViSXRlbVNwb3QgPSBhc3luYyAocTogc3RyaW5nLCB0eXBlOiBzdHJpbmdbXSkgPT5cclxuICAgIFNwaWNldGlmeS5Db3Ntb3NBc3luYy5nZXQoYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL3NlYXJjaD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHEpfSZ0eXBlPSR7dHlwZS5qb2luKFwiLFwiKX1gKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoV2ViU291bmRPZlNwb3RpZnlQbGF5bGlzdCA9IGFzeW5jIChnZW5yZTogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBuYW1lID0gYFRoZSBTb3VuZCBPZiAke2dlbnJlfWBcclxuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChgXiR7ZXNjYXBlUmVnZXgobmFtZSl9JGAsIFwiaVwiKVxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgc2VhcmNoV2ViSXRlbVNwb3QobmFtZSwgW1wicGxheWxpc3RcIl0pXHJcbiAgICBjb25zdCBpdGVtID0gcmVzLnBsYXlsaXN0cy5pdGVtc1swXVxyXG4gICAgcmV0dXJuIGl0ZW0/Lm93bmVyLmlkID09PSBcInRoZXNvdW5kc29mc3BvdGlmeVwiICYmIHJlLnRlc3QoaXRlbS5uYW1lKSA/IGl0ZW0udXJpIDogbnVsbFxyXG59XHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgUGxhdGZvcm0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdExpa2VkVHJhY2tzID0gYXN5bmMgKCkgPT5cclxuICAgIChcclxuICAgICAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uTGlicmFyeUFQSS5nZXRUcmFja3Moe1xyXG4gICAgICAgICAgICBsaW1pdDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXHJcbiAgICAgICAgfSlcclxuICAgICkuaXRlbXMgYXMgZmV0Y2hQbGF0QXJ0aXN0TGlrZWRUcmFja3NSZXNcclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzID0gYXN5bmMgKHVyaTogU3BvdGlmeVVSSSwgb2Zmc2V0ID0gMCwgbGltaXQgPSAxMDApID0+XHJcbiAgICAoYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxpYnJhcnlBUEkuZ2V0VHJhY2tzKHsgdXJpLCBvZmZzZXQsIGxpbWl0IH0pKS5pdGVtcyBhcyBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrc1Jlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdFBsYXlsaXN0Q29udGVudHMgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5nZXRDb250ZW50cyh1cmkpKS5pdGVtcyBhcyBmZXRjaFdlYlBsYXlsaXN0UmVzXHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUGxhdEZvbGRlciA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGxvY2F0aW9uOiBTcG90aWZ5TG9jID0ge30pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuY3JlYXRlRm9sZGVyKG5hbWUsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IGxpa2VQbGF0UGxheWxpc3QgPSBhc3luYyAodXJpOiBTcG90aWZ5VVJJKSA9PiBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuYWRkKFt1cmldKVxyXG5cclxuLyogUmVwbGFjZWQgYnkgY3JlYXRlU1BQbGF5bGlzdEZyb21UcmFja3MgKi9cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBsYXRQbGF5bGlzdCA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGxvY2F0aW9uOiBTcG90aWZ5TG9jID0ge30pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuY3JlYXRlUGxheWxpc3QobmFtZSwgbG9jYXRpb24pXHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlU1BQbGF5bGlzdEZyb21UcmFja3MgPSAobmFtZTogc3RyaW5nLCB0cmFja3M6IFNwb3RpZnlVUklbXSwgZm9sZGVyPzogU3BvdGlmeVVSSSkgPT5cclxuICAgIFNwaWNldGlmeS5Db3Ntb3NBc3luYy5wb3N0KFwic3A6Ly9jb3JlLXBsYXlsaXN0L3YxL3Jvb3RsaXN0P3Jlc3BvbnNlRm9ybWF0PXByb3RvYnVmSnNvblwiLCB7XHJcbiAgICAgICAgb3BlcmF0aW9uOiBcImNyZWF0ZVwiLFxyXG4gICAgICAgIC4uLihmb2xkZXIgPyB7IGFmdGVyOiBmb2xkZXIgfSA6IHt9KSxcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIHBsYXlsaXN0OiB0cnVlLFxyXG4gICAgICAgIHVyaXM6IHRyYWNrcyxcclxuICAgIH0pXHJcblxyXG5leHBvcnQgY29uc3Qgc2V0UGxhdFBsYXlsaXN0VmlzaWJpbGl0eSA9IGFzeW5jIChwbGF5bGlzdDogU3BvdGlmeVVSSSwgdmlzaWJsZUZvckFsbDogYm9vbGVhbikgPT5cclxuICAgIGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdFBlcm1pc3Npb25zQVBJLnNldEJhc2VQZXJtaXNzaW9uKHBsYXlsaXN0LCB2aXNpYmxlRm9yQWxsID8gXCJWSUVXRVJcIiA6IFwiQkxPQ0tFRFwiKVxyXG5leHBvcnQgY29uc3Qgc2V0UGxhdFBsYXlsaXN0UHVibGlzaGVkID0gYXN5bmMgKHBsYXlsaXN0OiBTcG90aWZ5VVJJLCBwdWJsaXNoZWQ6IGJvb2xlYW4pID0+XHJcbiAgICBhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuc2V0UHVibGlzaGVkU3RhdGUocGxheWxpc3QsIHB1Ymxpc2hlZClcclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRGb2xkZXIgPSBhc3luYyAoZm9sZGVyPzogU3BvdGlmeVVSSSkgPT5cclxuICAgIChhd2FpdCBTcGljZXRpZnkuUGxhdGZvcm0uUm9vdGxpc3RBUEkuZ2V0Q29udGVudHMoeyBmb2xkZXJVcmk6IGZvbGRlciB9KSkgYXMgZmV0Y2hQbGF0Rm9sZGVyUmVzXHJcbmV4cG9ydCBjb25zdCBmZXRjaFBsYXRSb290Rm9sZGVyID0gKCkgPT4gZmV0Y2hQbGF0Rm9sZGVyKHVuZGVmaW5lZClcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRQbGF0UGxheWxpc3RUcmFja3MgPSBhc3luYyAocGxheWxpc3Q6IFNwb3RpZnlVUkksIHRyYWNrczogU3BvdGlmeVVSSVtdLCBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9KSA9PlxyXG4gICAgYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLlBsYXlsaXN0QVBJLmFkZChwbGF5bGlzdCwgdHJhY2tzLCBsb2NhdGlvbilcclxuXHJcbmV4cG9ydCBjb25zdCBtb3ZlUGxhdFBsYXlsaXN0VHJhY2tzID0gYXN5bmMgKFxyXG4gICAgcGxheWxpc3Q6IFNwb3RpZnlVUkksXHJcbiAgICB0cmFja3M6IEFycmF5PHsgdWlkOiBzdHJpbmcgfT4sXHJcbiAgICBsb2NhdGlvbjogU3BvdGlmeUxvYyA9IHt9LFxyXG4pID0+IGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5QbGF5bGlzdEFQSS5tb3ZlKHBsYXlsaXN0LCB0cmFja3MsIGxvY2F0aW9uKVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25nczMwMCA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDAsIGxpbWl0ID0gMzAwKSA9PlxyXG4gICAgKGF3YWl0IFNwaWNldGlmeS5QbGF0Zm9ybS5FbmhhbmNlQVBJLmdldFBhZ2UodXJpLCAvKiBpdGVyYXRpb24gKi8gMCwgLyogc2Vzc2lvbklkICovIDAsIG9mZnNldCwgbGltaXQpKS5lbmhhbmNlUGFnZVxyXG4gICAgICAgIC5wYWdlSXRlbXMgYXMgYW55W11cclxuZXhwb3J0IGNvbnN0IGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25ncyA9IGFzeW5jICh1cmk6IFNwb3RpZnlVUkksIG9mZnNldCA9IDApOiBQcm9taXNlPGFueVtdPiA9PiB7XHJcbiAgICBjb25zdCBuZXh0UGFnZUl0ZW1zID0gYXdhaXQgZmV0Y2hQbGF0UGxheWxpc3RFbmhhbmNlZFNvbmdzMzAwKHVyaSwgb2Zmc2V0KVxyXG4gICAgaWYgKG5leHRQYWdlSXRlbXM/Lmxlbmd0aCA8IDMwMCkgcmV0dXJuIG5leHRQYWdlSXRlbXNcclxuICAgIGVsc2UgcmV0dXJuIG5leHRQYWdlSXRlbXMuY29uY2F0KGZldGNoUGxhdFBsYXlsaXN0RW5oYW5jZWRTb25ncyh1cmksIG9mZnNldCArIDMwMCkpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaExvY2FsVHJhY2tzID0gYXN5bmMgKCkgPT4gYXdhaXQgU3BpY2V0aWZ5LlBsYXRmb3JtLkxvY2FsRmlsZXNBUEkuZ2V0VHJhY2tzKClcclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICBOb24gU3BvdGlmeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hUcmFja0xGTUFQSSA9IGFzeW5jIChMRk1BcGlLZXk6IHN0cmluZywgYXJ0aXN0OiBzdHJpbmcsIHRyYWNrTmFtZTogc3RyaW5nLCBsYXN0Rm1Vc2VybmFtZSA9IFwiXCIpID0+IHtcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoXCJodHRwczovL3dzLmF1ZGlvc2Nyb2JibGVyLmNvbS8yLjAvXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcIm1ldGhvZFwiLCBcInRyYWNrLmdldEluZm9cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiYXBpX2tleVwiLCBMRk1BcGlLZXkpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImFydGlzdFwiLCBhcnRpc3QpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInRyYWNrXCIsIHRyYWNrTmFtZSlcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiZm9ybWF0XCIsIFwianNvblwiKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ1c2VybmFtZVwiLCBsYXN0Rm1Vc2VybmFtZSlcclxuXHJcbiAgICByZXR1cm4gKGF3YWl0IGZldGNoKHVybCkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkpIGFzIGZldGNoVHJhY2tMRk1BUElSZXNcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGZldGNoVHJhY2tMRk1BUElNZW1vaXplZCA9IG1lbW9pemUyKGZldGNoVHJhY2tMRk1BUEkpXHJcblxyXG5leHBvcnQgY29uc3Qgc2VhcmNoWW91dHViZSA9IGFzeW5jIChZb3VUdWJlQXBpS2V5OiBzdHJpbmcsIHNlYXJjaFN0cmluZzogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20veW91dHViZS92My9zZWFyY2hcIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwicGFydFwiLCBcInNuaXBwZXRcIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwibWF4UmVzdWx0c1wiLCBcIjEwXCIpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInFcIiwgc2VhcmNoU3RyaW5nKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ0eXBlXCIsIFwidmlkZW9cIilcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwia2V5XCIsIFlvdVR1YmVBcGlLZXkpXHJcblxyXG4gICAgcmV0dXJuIChhd2FpdCBmZXRjaCh1cmwpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpKSBhcyBhbnlbXVxyXG59XHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgVHlwZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBmZXRjaEdRTEFsYnVtUmVzIHtcclxuICAgIF9fdHlwZW5hbWU6IFwiYWxidW1cIlxyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGFydGlzdHM6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICBwcm9maWxlOiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2aXN1YWxzOiB7XHJcbiAgICAgICAgICAgICAgICBhdmF0YXJJbWFnZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2hhcmluZ0luZm86IHtcclxuICAgICAgICAgICAgICAgIHNoYXJlVXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICBjb3ZlckFydDoge1xyXG4gICAgICAgIGV4dHJhY3RlZENvbG9yczoge1xyXG4gICAgICAgICAgICBjb2xvclJhdzoge1xyXG4gICAgICAgICAgICAgICAgaGV4OiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xvckxpZ2h0OiB7XHJcbiAgICAgICAgICAgICAgICBoZXg6IHN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbG9yRGFyazoge1xyXG4gICAgICAgICAgICAgICAgaGV4OiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzb3VyY2VzOiBTcG90QXBpSW1hZ2VbXVxyXG4gICAgfVxyXG4gICAgZGlzY3M6IHtcclxuICAgICAgICB0b3RhbENvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBudW1iZXI6IG51bWJlclxyXG4gICAgICAgICAgICB0cmFja3M6IHtcclxuICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIHJlbGVhc2VzOiB7XHJcbiAgICAgICAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgICAgICAgaXRlbXM6IEFycmF5PHtcclxuICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgICAgIH0+XHJcbiAgICB9XHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIGRhdGU6IHtcclxuICAgICAgICBpc29TdHJpbmc6IHN0cmluZ1xyXG4gICAgICAgIHByZWNpc2lvbjogc3RyaW5nXHJcbiAgICB9XHJcbiAgICBwbGF5YWJpbGl0eToge1xyXG4gICAgICAgIHBsYXlhYmxlOiBib29sZWFuXHJcbiAgICAgICAgcmVhc29uOiBzdHJpbmdcclxuICAgIH1cclxuICAgIGxhYmVsOiBzdHJpbmdcclxuICAgIGNvcHlyaWdodDoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICAgICAgICB0ZXh0OiBzdHJpbmdcclxuICAgICAgICB9PlxyXG4gICAgfVxyXG4gICAgY291cnRlc3lMaW5lOiBzdHJpbmdcclxuICAgIHNhdmVkOiBib29sZWFuXHJcbiAgICBzaGFyaW5nSW5mbzoge1xyXG4gICAgICAgIHNoYXJlVXJsOiBzdHJpbmdcclxuICAgICAgICBzaGFyZUlkOiBzdHJpbmdcclxuICAgIH1cclxuICAgIHRyYWNrczoge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIHVpZDogc3RyaW5nXHJcbiAgICAgICAgICAgIHRyYWNrOiB7XHJcbiAgICAgICAgICAgICAgICBzYXZlZDogYm9vbGVhblxyXG4gICAgICAgICAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIHBsYXljb3VudDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBkaXNjTnVtYmVyOiBudW1iZXJcclxuICAgICAgICAgICAgICAgIHRyYWNrTnVtYmVyOiBudW1iZXJcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRSYXRpbmc6IHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZWxpbmtpbmdJbmZvcm1hdGlvbjogYW55XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsTWlsbGlzZWNvbmRzOiBudW1iZXJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBsYXlhYmlsaXR5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWFibGU6IGJvb2xlYW5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFydGlzdHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIG1vcmVBbGJ1bXNCeUFydGlzdDoge1xyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIGRpc2NvZ3JhcGh5OiB7XHJcbiAgICAgICAgICAgICAgICBwb3B1bGFyUmVsZWFzZXNBbGJ1bXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogbnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY292ZXJBcnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWFiaWxpdHk6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlhYmxlOiBib29sZWFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJpbmdJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZUlkOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlVXJsOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfT5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgZmV0Y2hHUUxBcnRpc3RSZWxhdGVkUmVzID0gQXJyYXk8e1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBwcm9maWxlOiB7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICB9XHJcbiAgICB2aXN1YWxzOiB7XHJcbiAgICAgICAgYXZhdGFySW1hZ2U6IHtcclxuICAgICAgICAgICAgc291cmNlczogU3BvdEFwaUltYWdlW11cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0+XHJcblxyXG5leHBvcnQgdHlwZSBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrc1JlcyA9IEFycmF5PHtcclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBzdHJpbmdcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgZHVyYXRpb246IFNwb3RBcGlEdXJhdGlvblxyXG4gICAgYWxidW06IFNwb3RBcGlBbGJ1bU1pblxyXG4gICAgYXJ0aXN0czogU3BvdEFwaUFydGlzdE1pbltdXHJcbiAgICBkaXNjTnVtYmVyOiBudW1iZXJcclxuICAgIHRyYWNrTnVtYmVyOiBudW1iZXJcclxuICAgIGlzRXhwbGljaXQ6IGJvb2xlYW5cclxuICAgIGlzUGxheWFibGU6IGJvb2xlYW5cclxuICAgIGlzTG9jYWw6IGJvb2xlYW5cclxuICAgIGlzMTlQbHVzT25seTogYm9vbGVhblxyXG4gICAgYWRkZWRBdDogc3RyaW5nXHJcbn0+XHJcblxyXG5leHBvcnQgdHlwZSBmZXRjaFdlYlBsYXlsaXN0UmVzID0gQXJyYXk8e1xyXG4gICAgdWlkOiBzdHJpbmdcclxuICAgIHBsYXlJbmRleDogbnVsbFxyXG4gICAgYWRkZWRBdDogc3RyaW5nXHJcbiAgICBhZGRlZEJ5OiB7XHJcbiAgICAgICAgdHlwZTogc3RyaW5nXHJcbiAgICAgICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICAgICAgdXNlcm5hbWU6IHN0cmluZ1xyXG4gICAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmdcclxuICAgICAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZTJbXVxyXG4gICAgfVxyXG4gICAgZm9ybWF0TGlzdEF0dHJpYnV0ZXM6IHt9XHJcbiAgICB0eXBlOiBcInRyYWNrXCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBhbGJ1bTogU3BvdEFwaUFsYnVtTWluXHJcbiAgICBhcnRpc3RzOiBTcG90QXBpQXJ0aXN0TWluW11cclxuICAgIGRpc2NOdW1iZXI6IG51bWJlclxyXG4gICAgdHJhY2tOdW1iZXI6IG51bWJlclxyXG4gICAgZHVyYXRpb246IFNwb3RBcGlEdXJhdGlvblxyXG4gICAgaXNFeHBsaWNpdDogYm9vbGVhblxyXG4gICAgaXNMb2NhbDogYm9vbGVhblxyXG4gICAgaXNQbGF5YWJsZTogYm9vbGVhblxyXG4gICAgaXMxOVBsdXNPbmx5OiBib29sZWFuXHJcbn0+XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIGZldGNoVHJhY2tMRk1BUElSZXMge1xyXG4gICAgdHJhY2s6IHtcclxuICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICBtYmlkOiBzdHJpbmdcclxuICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgIGR1cmF0aW9uOiBzdHJpbmdcclxuICAgICAgICBzdHJlYW1hYmxlOiB7XHJcbiAgICAgICAgICAgIFwiI3RleHRcIjogc3RyaW5nXHJcbiAgICAgICAgICAgIGZ1bGx0cmFjazogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3RlbmVyczogc3RyaW5nXHJcbiAgICAgICAgcGxheWNvdW50OiBzdHJpbmdcclxuICAgICAgICBhcnRpc3Q6IHtcclxuICAgICAgICAgICAgbmFtZTogc3RyaW5nXHJcbiAgICAgICAgICAgIG1iaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgICBhbGJ1bToge1xyXG4gICAgICAgICAgICBhcnRpc3Q6IHN0cmluZ1xyXG4gICAgICAgICAgICB0aXRsZTogc3RyaW5nXHJcbiAgICAgICAgICAgIG1iaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgICB1cmw6IHN0cmluZ1xyXG4gICAgICAgICAgICBpbWFnZTogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgXCIjdGV4dFwiOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIHNpemU6IHN0cmluZ1xyXG4gICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICBcIkBhdHRyXCI6IHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBzdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB1c2VycGxheWNvdW50OiBzdHJpbmdcclxuICAgICAgICB1c2VybG92ZWQ6IHN0cmluZ1xyXG4gICAgICAgIHRvcHRhZ3M6IHtcclxuICAgICAgICAgICAgdGFnOiBBcnJheTx7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIHVybDogc3RyaW5nXHJcbiAgICAgICAgICAgIH0+XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdpa2k6IHtcclxuICAgICAgICAgICAgcHVibGlzaGVkOiBzdHJpbmdcclxuICAgICAgICAgICAgc3VtbWFyeTogc3RyaW5nXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFsYnVtTWluIHtcclxuICAgIHR5cGU6IFwiYWxidW1cIlxyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGFydGlzdDogU3BvdEFwaUFydGlzdE1pblxyXG4gICAgaW1hZ2VzOiBTcG90QXBpSW1hZ2UyW11cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpSW1hZ2UyIHtcclxuICAgIHVybDogc3RyaW5nXHJcbiAgICBsYWJlbDogXCJzbWFsbFwiIHwgXCJzdGFuZGFyZFwiIHwgXCJsYXJnZVwiIHwgXCJ4bGFyZ2VcIlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlUcmFjayB7XHJcbiAgICBhbGJ1bTogU3BvdEFwaUFsYnVtXHJcbiAgICBhcnRpc3RzOiBTcG90QXBpQXJ0aXN0W11cclxuICAgIGF2YWlsYWJsZV9tYXJrZXRzOiBzdHJpbmdbXVxyXG4gICAgZGlzY19udW1iZXI6IG51bWJlclxyXG4gICAgZHVyYXRpb25fbXM6IG51bWJlclxyXG4gICAgZXhwbGljaXQ6IGJvb2xlYW5cclxuICAgIGV4dGVybmFsX2lkczogU3BvdEFwaUVJRHNcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBpc19wbGF5YWJsZTogYm9vbGVhblxyXG4gICAgbGlua2VkX2Zyb206IHt9XHJcbiAgICByZXN0cmljdGlvbnM6IFNwb3RBcGlSZXN0cmljdGlvbnNcclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgcG9wdWxhcml0eTogbnVtYmVyXHJcbiAgICBwcmV2aWV3X3VybDogc3RyaW5nXHJcbiAgICB0cmFja19udW1iZXI6IG51bWJlclxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIGlzX2xvY2FsOiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFydGlzdCB7XHJcbiAgICBleHRlcm5hbF91cmxzOiBTcG90QXBpRVVybHNcclxuICAgIGZvbGxvd2VyczogU3BvdEFwaUZvbGxvd2Vyc1xyXG4gICAgZ2VucmVzOiBzdHJpbmdbXVxyXG4gICAgaHJlZjogc3RyaW5nXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBpbWFnZXM6IFNwb3RBcGlJbWFnZVtdXHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIHBvcHVsYXJpdHk6IG51bWJlclxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpQXJ0aXN0TWluIHtcclxuICAgIHR5cGU6IFwiYXJ0aXN0XCJcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgbmFtZTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUFsYnVtIHtcclxuICAgIGFsYnVtX3R5cGU6IHN0cmluZ1xyXG4gICAgdG90YWxfdHJhY2tzOiBudW1iZXJcclxuICAgIGF2YWlsYWJsZV9tYXJrZXRzOiBzdHJpbmdbXVxyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlW11cclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgcmVsZWFzZV9kYXRlOiBzdHJpbmdcclxuICAgIHJlbGVhc2VfZGF0ZV9wcmVjaXNpb246IHN0cmluZ1xyXG4gICAgcmVzdHJpY3Rpb25zOiBTcG90QXBpUmVzdHJpY3Rpb25zXHJcbiAgICB0eXBlOiBzdHJpbmdcclxuICAgIHVyaTogU3BvdGlmeVVSSVxyXG4gICAgY29weXJpZ2h0czogQXJyYXk8e1xyXG4gICAgICAgIHRleHQ6IHN0cmluZ1xyXG4gICAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgfT5cclxuICAgIGV4dGVybmFsX2lkczogU3BvdEFwaUVJRHNcclxuICAgIGdlbnJlczogc3RyaW5nW11cclxuICAgIGxhYmVsOiBzdHJpbmdcclxuICAgIHBvcHVsYXJpdHk6IG51bWJlclxyXG4gICAgYWxidW1fZ3JvdXA6IHN0cmluZ1xyXG4gICAgYXJ0aXN0czogQXJyYXk8e1xyXG4gICAgICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgICAgIGlkOiBzdHJpbmdcclxuICAgICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIH0+XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUVVcmxzIHtcclxuICAgIHNwb3RpZnk6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlFSURzIHtcclxuICAgIGlzcmM6IHN0cmluZ1xyXG4gICAgZWFuOiBzdHJpbmdcclxuICAgIHVwYzogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUltYWdlIHtcclxuICAgIHVybDogc3RyaW5nXHJcbiAgICB3aWR0aDogbnVtYmVyXHJcbiAgICBoZWlnaHQ6IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RBcGlSZXN0cmljdGlvbnMge1xyXG4gICAgcmVhc29uOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpRm9sbG93ZXJzIHtcclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgdG90YWw6IG51bWJlclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaUR1cmF0aW9uIHtcclxuICAgIG1pbGxpc2Vjb25kczogbnVtYmVyXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBTcG90QXBpUGxheWxpc3Qge1xyXG4gICAgY29sbGFib3JhdGl2ZTogYm9vbGVhblxyXG4gICAgZGVzY3JpcHRpb246IHN0cmluZ1xyXG4gICAgZXh0ZXJuYWxfdXJsczogU3BvdEFwaUVVcmxzXHJcbiAgICBmb2xsb3dlcnM6IHtcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICB0b3RhbDogbnVtYmVyXHJcbiAgICB9XHJcbiAgICBocmVmOiBzdHJpbmdcclxuICAgIGlkOiBTcG90aWZ5SURcclxuICAgIGltYWdlczogU3BvdEFwaUltYWdlW11cclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgb3duZXI6IFNwb3RBcGlPd25lclxyXG4gICAgcHVibGljOiBib29sZWFuXHJcbiAgICBzbmFwc2hvdF9pZDogc3RyaW5nXHJcbiAgICB0cmFja3M6IHtcclxuICAgICAgICBocmVmOiBzdHJpbmdcclxuICAgICAgICBsaW1pdDogbnVtYmVyXHJcbiAgICAgICAgbmV4dDogc3RyaW5nXHJcbiAgICAgICAgb2Zmc2V0OiBudW1iZXJcclxuICAgICAgICBwcmV2aW91czogc3RyaW5nXHJcbiAgICAgICAgdG90YWw6IG51bWJlclxyXG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XHJcbiAgICAgICAgICAgIGFkZGVkX2F0OiBzdHJpbmdcclxuICAgICAgICAgICAgYWRkZWRfYnk6IFNwb3RBcGlPd25lclxyXG4gICAgICAgICAgICBpc19sb2NhbDogYm9vbGVhblxyXG4gICAgICAgICAgICB0cmFjazogU3BvdEFwaVRyYWNrXHJcbiAgICAgICAgfT5cclxuICAgIH1cclxuICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgdXJpOiBTcG90aWZ5VVJJXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BvdEFwaU93bmVyIHtcclxuICAgIGV4dGVybmFsX3VybHM6IFNwb3RBcGlFVXJsc1xyXG4gICAgZm9sbG93ZXJzPzoge1xyXG4gICAgICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXJcclxuICAgIH1cclxuICAgIGhyZWY6IHN0cmluZ1xyXG4gICAgaWQ6IFNwb3RpZnlJRFxyXG4gICAgdHlwZTogc3RyaW5nXHJcbiAgICB1cmk6IFNwb3RpZnlVUklcclxuICAgIGRpc3BsYXlfbmFtZT86IHN0cmluZ1xyXG4gICAgbmFtZT86IHN0cmluZ1xyXG59XHJcblxyXG4vL1RPRE86IEJldHRlciBUUyBpbnRlcmZhY2UgZm9yIHJlY3Vyc2l2ZSBmZXRjaFBsYXRGb2xkZXJSZXNcclxuZXhwb3J0IGludGVyZmFjZSBmZXRjaFBsYXRGb2xkZXJSZXMge1xyXG4gICAgdHlwZTogXCJmb2xkZXJcIiB8IFwicGxhY2Vob2xkZXJcIiB8IFwicGxheWxpc3RcIlxyXG4gICAgYWRkZWRBdDogc3RyaW5nXHJcbiAgICBpdGVtcz86IEFycmF5PGZldGNoUGxhdEZvbGRlclJlcz5cclxuICAgIG5hbWU/OiBzdHJpbmdcclxuICAgIHVyaTogc3RyaW5nXHJcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZ1xyXG4gICAgaW1hZ2VzPzogU3BvdEFwaUltYWdlMltdXHJcbiAgICBtYWRlRm9yPzogbnVsbFxyXG4gICAgb3duZXI/OiB7XHJcbiAgICAgICAgdHlwZTogXCJ1c2VyXCJcclxuICAgICAgICB1cmk6IHN0cmluZ1xyXG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmdcclxuICAgICAgICBkaXNwbGF5TmFtZTogc3RyaW5nXHJcbiAgICAgICAgaW1hZ2VzOiBhbnlbXVxyXG4gICAgfVxyXG4gICAgdG90YWxMZW5ndGg/OiBudW1iZXJcclxuICAgIHVuZmlsdGVyZWRUb3RhbExlbmd0aD86IG51bWJlclxyXG4gICAgdG90YWxMaWtlcz86IG51bGxcclxuICAgIGR1cmF0aW9uPzogbnVsbFxyXG4gICAgaXNDb2xsYWJvcmF0aXZlPzogYm9vbGVhblxyXG4gICAgaXNMb2FkZWQ/OiBib29sZWFuXHJcbiAgICBpc093bmVkQnlTZWxmPzogYm9vbGVhblxyXG4gICAgaXNQdWJsaXNoZWQ/OiBib29sZWFuXHJcbiAgICBoYXNFcGlzb2Rlcz86IG51bGxcclxuICAgIGhhc1Nwb3RpZnlUcmFja3M/OiBudWxsXHJcbiAgICBoYXNTcG90aWZ5QXVkaW9ib29rcz86IG51bGxcclxuICAgIGNhbkFkZD86IGJvb2xlYW5cclxuICAgIGNhblJlbW92ZT86IGJvb2xlYW5cclxuICAgIGNhblBsYXk/OiBudWxsXHJcbiAgICBmb3JtYXRMaXN0RGF0YT86IHtcclxuICAgICAgICB0eXBlOiBzdHJpbmdcclxuICAgICAgICBhdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9XHJcbiAgICB9IHwgbnVsbFxyXG4gICAgY2FuUmVwb3J0QW5ub3RhdGlvbkFidXNlPzogYm9vbGVhblxyXG4gICAgaGFzRGF0ZUFkZGVkPzogYm9vbGVhblxyXG4gICAgcGVybWlzc2lvbnM/OiBudWxsXHJcbiAgICBjb2xsYWJvcmF0b3JzPzoge1xyXG4gICAgICAgIGNvdW50OiBudW1iZXJcclxuICAgICAgICBpdGVtczogYW55W11cclxuICAgIH1cclxuICAgIGlzTm90Rm91bmQ/OiBib29sZWFuXHJcbiAgICBpc0ZvcmJpZGRlbj86IGJvb2xlYW5cclxufVxyXG4iLAogICJpbXBvcnQgeyB0YXNrIH0gZnJvbSBcImZwLXRzXCJcclxuaW1wb3J0IHsgY29uc3RWb2lkIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCJcclxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCJcclxuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIlxyXG5pbXBvcnQgeyBndWFyZDQsIGlzIH0gZnJvbSBcIi4vZnBcIlxyXG5pbXBvcnQgeyBzbGVlcCB9IGZyb20gXCIuL3V0aWxcIlxyXG5cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzU2VjdGlvbiB7XHJcbiAgICBwcml2YXRlIHN0b3BIaXN0b3J5TGlzdGVuZXI6IGFueVxyXG4gICAgcHJpdmF0ZSBzZXRSZXJlbmRlcjogRnVuY3Rpb24gfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHNlY3Rpb25JZDogc3RyaW5nLFxyXG4gICAgICAgIHB1YmxpYyBzZWN0aW9uRmllbGRzOiB7IFtrZXk6IHN0cmluZ106IFNldHRpbmdzRmllbGQgfSA9IHt9LFxyXG4gICAgKSB7fVxyXG5cclxuICAgIHN0YXRpYyB3YWl0Rm9yUmVhY3QgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgd2hpbGUgKCEoU3BpY2V0aWZ5LlJlYWN0ICYmIFNwaWNldGlmeS5SZWFjdERPTSkpIHNsZWVwKDEwMClcclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIHB1c2hTZXR0aW5ncyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB3aGlsZSAoIVNwaWNldGlmeT8uUGxhdGZvcm0/Lkhpc3Rvcnk/Lmxpc3RlbikgYXdhaXQgc2xlZXAoMTAwKVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zdG9wSGlzdG9yeUxpc3RlbmVyKSB0aGlzLnN0b3BIaXN0b3J5TGlzdGVuZXIoKVxyXG5cclxuICAgICAgICB0aGlzLnN0b3BIaXN0b3J5TGlzdGVuZXIgPSBTcGljZXRpZnkuUGxhdGZvcm0uSGlzdG9yeS5saXN0ZW4oKHsgcGF0aG5hbWUgPSBcIlwiIH0pID0+IHtcclxuICAgICAgICAgICAgaWYgKHBhdGhuYW1lID09PSBcIi9wcmVmZXJlbmNlc1wiKSB0aGlzLnJlbmRlcigpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKFNwaWNldGlmeS5QbGF0Zm9ybS5IaXN0b3J5LmxvY2F0aW9uLnBhdGhuYW1lID09PSBcIi9wcmVmZXJlbmNlc1wiKSBhd2FpdCB0aGlzLnJlbmRlcigpXHJcbiAgICB9XHJcblxyXG4gICAgdG9PYmplY3QgPSAoKSA9PlxyXG4gICAgICAgIG5ldyBQcm94eShcclxuICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldDogKHRhcmdldCwgcHJvcCkgPT4gU2V0dGluZ3NTZWN0aW9uLmdldEZpZWxkVmFsdWUodGhpcy5nZXRJZChwcm9wLnRvU3RyaW5nKCkpKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApXHJcblxyXG4gICAgcmVyZW5kZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0UmVyZW5kZXIpIHRoaXMuc2V0UmVyZW5kZXIoTWF0aC5yYW5kb20oKSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlciA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB3aGlsZSAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVza3RvcC5zZXR0aW5ncy5zZWxlY3RMYW5ndWFnZVwiKSkge1xyXG4gICAgICAgICAgICBpZiAoU3BpY2V0aWZ5LlBsYXRmb3JtLkhpc3RvcnkubG9jYXRpb24ucGF0aG5hbWUgIT09IFwiL3ByZWZlcmVuY2VzXCIpIHJldHVyblxyXG4gICAgICAgICAgICBhd2FpdCBzbGVlcCgxMDApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhbGxTZXR0aW5nc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIueC1zZXR0aW5ncy1jb250YWluZXJcIikhXHJcblxyXG4gICAgICAgIGxldCBwbHVnaW5TZXR0aW5nc0NvbnRhaW5lciA9IEFycmF5LmZyb20oYWxsU2V0dGluZ3NDb250YWluZXIuY2hpbGRyZW4pLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09IHRoaXMuc2VjdGlvbklkKVxyXG5cclxuICAgICAgICBpZiAoIXBsdWdpblNldHRpbmdzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHBsdWdpblNldHRpbmdzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgICAgICBwbHVnaW5TZXR0aW5nc0NvbnRhaW5lci5pZCA9IHRoaXMuc2VjdGlvbklkXHJcbiAgICAgICAgICAgIHBsdWdpblNldHRpbmdzQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwic2V0dGluZ3NDb250YWluZXJcIlxyXG4gICAgICAgICAgICBhbGxTZXR0aW5nc0NvbnRhaW5lci5hcHBlbmRDaGlsZChwbHVnaW5TZXR0aW5nc0NvbnRhaW5lcilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFJlYWN0RE9NLnJlbmRlcig8dGhpcy5GaWVsZHNDb250YWluZXIgLz4sIHBsdWdpblNldHRpbmdzQ29udGFpbmVyKVxyXG4gICAgfVxyXG5cclxuICAgIGFkZEJ1dHRvbiA9IChcclxuICAgICAgICBuYW1lSWQ6IHN0cmluZyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG4gICAgICAgIHRleHQ6IHN0cmluZyxcclxuICAgICAgICBvbkNsaWNrOiAoZTogUmVhY3QuTW91c2VFdmVudDxIVE1MQnV0dG9uRWxlbWVudCwgTW91c2VFdmVudD4pID0+IHZvaWQgPSBjb25zdFZvaWQsXHJcbiAgICAgICAgZXZlbnRzOiBCdXR0b25GaWVsZFtcImV2ZW50c1wiXSA9IHt9LFxyXG4gICAgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldElkKG5hbWVJZClcclxuXHJcbiAgICAgICAgZXZlbnRzLm9uQ2xpY2sgPSBvbkNsaWNrXHJcblxyXG4gICAgICAgIHRoaXMuc2VjdGlvbkZpZWxkc1tuYW1lSWRdID0ge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgdHlwZTogRmllbGRUeXBlLkJVVFRPTixcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHRleHQsXHJcbiAgICAgICAgICAgIGV2ZW50cyxcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgIH1cclxuXHJcbiAgICBhZGRUb2dnbGUgPSAoXHJcbiAgICAgICAgbmFtZUlkOiBzdHJpbmcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgICAgICBkZWZhdWx0VmFsdWUgPSB0YXNrLm9mKHRydWUpLFxyXG4gICAgICAgIG9uQ2hhbmdlOiAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHZvaWQgPSBjb25zdFZvaWQsXHJcbiAgICAgICAgZXZlbnRzOiBUb2dnbGVGaWVsZFtcImV2ZW50c1wiXSA9IHt9LFxyXG4gICAgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldElkKG5hbWVJZClcclxuXHJcbiAgICAgICAgU2V0dGluZ3NTZWN0aW9uLnNldERlZmF1bHRGaWVsZFZhbHVlKGlkLCBkZWZhdWx0VmFsdWUpXHJcblxyXG4gICAgICAgIGV2ZW50cy5vbkNoYW5nZSA9IG9uQ2hhbmdlXHJcbiAgICAgICAgdGhpcy5zZWN0aW9uRmllbGRzW25hbWVJZF0gPSB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB0eXBlOiBGaWVsZFR5cGUuVE9HR0xFLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgZXZlbnRzLFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIGFkZElucHV0ID0gKFxyXG4gICAgICAgIG5hbWVJZDogc3RyaW5nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB0YXNrLlRhc2s8c3RyaW5nPixcclxuICAgICAgICBvbkNoYW5nZTogKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB2b2lkID0gY29uc3RWb2lkLFxyXG4gICAgICAgIGlucHV0VHlwZSA9IFwidGV4dFwiLFxyXG4gICAgICAgIGV2ZW50czogSW5wdXRGaWVsZFtcImV2ZW50c1wiXSA9IHt9LFxyXG4gICAgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldElkKG5hbWVJZClcclxuXHJcbiAgICAgICAgU2V0dGluZ3NTZWN0aW9uLnNldERlZmF1bHRGaWVsZFZhbHVlKGlkLCBkZWZhdWx0VmFsdWUpXHJcblxyXG4gICAgICAgIGV2ZW50cy5vbkNoYW5nZSA9IG9uQ2hhbmdlXHJcbiAgICAgICAgdGhpcy5zZWN0aW9uRmllbGRzW25hbWVJZF0gPSB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB0eXBlOiBGaWVsZFR5cGUuSU5QVVQsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBpbnB1dFR5cGUsXHJcbiAgICAgICAgICAgIGV2ZW50cyxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgYWRkRHJvcERvd24gPSAoXHJcbiAgICAgICAgbmFtZUlkOiBzdHJpbmcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgICAgICBvcHRpb25zOiBzdHJpbmdbXSxcclxuICAgICAgICBkZWZhdWx0VmFsdWUgPSB0YXNrLm9mKDApLFxyXG4gICAgICAgIG9uQ2hhbmdlOiAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB2b2lkID0gY29uc3RWb2lkLFxyXG4gICAgICAgIGV2ZW50czogRHJvcGRvd25GaWVsZFtcImV2ZW50c1wiXSA9IHt9LFxyXG4gICAgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldElkKG5hbWVJZClcclxuXHJcbiAgICAgICAgU2V0dGluZ3NTZWN0aW9uLnNldERlZmF1bHRGaWVsZFZhbHVlKGlkLCBkZWZhdWx0VmFsdWUpXHJcblxyXG4gICAgICAgIGV2ZW50cy5vbkNoYW5nZSA9IG9uQ2hhbmdlXHJcbiAgICAgICAgdGhpcy5zZWN0aW9uRmllbGRzW25hbWVJZF0gPSB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB0eXBlOiBGaWVsZFR5cGUuRFJPUERPV04sXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgICAgICBldmVudHMsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgYWRkSGlkZGVuID0gKG5hbWVJZDogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IGFueSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRJZChuYW1lSWQpXHJcblxyXG4gICAgICAgIFNldHRpbmdzU2VjdGlvbi5zZXREZWZhdWx0RmllbGRWYWx1ZShpZCwgZGVmYXVsdFZhbHVlKVxyXG5cclxuICAgICAgICB0aGlzLnNlY3Rpb25GaWVsZHNbbmFtZUlkXSA9IHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIHR5cGU6IEZpZWxkVHlwZS5ISURERU4sXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIGdldElkID0gKG5hbWVJZDogc3RyaW5nKSA9PiBgZXh0ZW5zaW9uczoke3RoaXMuc2VjdGlvbklkfToke25hbWVJZH1gXHJcblxyXG4gICAgcHJpdmF0ZSB1c2VTdGF0ZUZvciA9IDxBLD4oaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVTdGF0ZV0gPSB1c2VTdGF0ZShTZXR0aW5nc1NlY3Rpb24uZ2V0RmllbGRWYWx1ZTxBPihpZCkpXHJcblxyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAobmV3VmFsdWU6IEEpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWVTdGF0ZShuZXdWYWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc1NlY3Rpb24uc2V0RmllbGRWYWx1ZShpZCEsIG5ld1ZhbHVlKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0gYXMgY29uc3RcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0RmllbGRWYWx1ZSA9IDxSLD4oaWQ6IHN0cmluZyk6IFIgPT4ge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKFNwaWNldGlmeS5Mb2NhbFN0b3JhZ2UuZ2V0KGlkKSA/PyBcIm51bGxcIikgLy8gXCJudWxsXCIgaXMgcGFyc2VkIGFzIG51bGwsIHRoZSBtb3JlIHlvdSBrbm93XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHNldEZpZWxkVmFsdWUgPSAoaWQ6IHN0cmluZywgbmV3VmFsdWU6IGFueSkgPT4ge1xyXG4gICAgICAgIFNwaWNldGlmeS5Mb2NhbFN0b3JhZ2Uuc2V0KGlkLCBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSkpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc2V0RGVmYXVsdEZpZWxkVmFsdWUgPSBhc3luYyAoaWQ6IHN0cmluZywgZGVmYXVsdFZhbHVlOiB0YXNrLlRhc2s8YW55PikgPT4ge1xyXG4gICAgICAgIGlmIChTZXR0aW5nc1NlY3Rpb24uZ2V0RmllbGRWYWx1ZShpZCkgPT09IG51bGwpIFNldHRpbmdzU2VjdGlvbi5zZXRGaWVsZFZhbHVlKGlkLCBhd2FpdCBkZWZhdWx0VmFsdWUoKSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIEZpZWxkc0NvbnRhaW5lciA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBbcmVyZW5kZXIsIHNldFJlcmVuZGVyXSA9IHVzZVN0YXRlPG51bWJlcj4oMClcclxuICAgICAgICB0aGlzLnNldFJlcmVuZGVyID0gc2V0UmVyZW5kZXJcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ4LXNldHRpbmdzLXNlY3Rpb25cIiBrZXk9e3JlcmVuZGVyfT5cclxuICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJUeXBlX19UeXBlRWxlbWVudC1zYy1nb2xpM2otMCBUeXBlRWxlbWVudC1jZWxsby10ZXh0QmFzZS10eXBlXCI+e3RoaXMubmFtZX08L2gyPlxyXG4gICAgICAgICAgICAgICAge09iamVjdC5lbnRyaWVzKHRoaXMuc2VjdGlvbkZpZWxkcykubWFwKChbbmFtZUlkLCBmaWVsZF0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPHRoaXMuRmllbGQgZmllbGQ9e2ZpZWxkfSAvPlxyXG4gICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIEZpZWxkID0gKHsgZmllbGQgfTogeyBmaWVsZDogU2V0dGluZ3NGaWVsZCB9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXNUeXBlID0gaXM8U2V0dGluZ3NGaWVsZD4oXCJ0eXBlXCIpXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1yb3dcIj5cclxuICAgICAgICAgICAgICAgIDx0aGlzLlNldHRpbmdEZXNjcmlwdGlvbiBpZD17ZmllbGQuaWR9IGRlc2NyaXB0aW9uPXtmaWVsZC5kZXNjcmlwdGlvbn0gLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1zZWNvbmRDb2x1bW5cIj5cclxuICAgICAgICAgICAgICAgICAgICB7Z3VhcmQ0KFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2lzVHlwZTxJbnB1dEZpZWxkPihGaWVsZFR5cGUuSU5QVVQpLCB0aGlzLlNldHRpbmdJbnB1dEZpZWxkXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2lzVHlwZShGaWVsZFR5cGUuQlVUVE9OKSwgdGhpcy5TZXR0aW5nQnV0dG9uRmllbGRdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbaXNUeXBlKEZpZWxkVHlwZS5UT0dHTEUpLCB0aGlzLlNldHRpbmdUb2dnbGVGaWVsZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtpc1R5cGUoRmllbGRUeXBlLkRST1BET1dOKSwgdGhpcy5TZXR0aW5nRHJvcGRvd25GaWVsZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgXSkodGhpcy5TZXR0aW5nSGlkZGVuKShmaWVsZCl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgU2V0dGluZ0Rlc2NyaXB0aW9uID0gKHsgaWQsIGRlc2NyaXB0aW9uIH06IHsgaWQ6IHN0cmluZzsgZGVzY3JpcHRpb246IHN0cmluZyB9KSA9PiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ4LXNldHRpbmdzLWZpcnN0Q29sdW1uXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJUeXBlX19UeXBlRWxlbWVudC1zYy1nb2xpM2otMCBUeXBlRWxlbWVudC12aW9sYS10ZXh0U3ViZHVlZC10eXBlXCIgaHRtbEZvcj17aWR9PlxyXG4gICAgICAgICAgICAgICAge2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG5cclxuICAgIHByaXZhdGUgU2V0dGluZ0J1dHRvbkZpZWxkID0gKGZpZWxkOiBCdXR0b25GaWVsZCkgPT4gKFxyXG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIlwiPlxyXG4gICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICBpZD17ZmllbGQuaWR9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJCdXR0b24tc2MteTBndGJ4LTAgQnV0dG9uLXNtLWJ1dHRvblNlY29uZGFyeS11c2VCcm93c2VyRGVmYXVsdEZvY3VzU3R5bGUgeC1zZXR0aW5ncy1idXR0b25cIlxyXG4gICAgICAgICAgICAgICAgey4uLmZpZWxkLmV2ZW50c31cclxuICAgICAgICAgICAgICAgIHR5cGU9e2ZpZWxkLnR5cGV9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHtmaWVsZC50ZXh0fVxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICApXHJcblxyXG4gICAgcHJpdmF0ZSBTZXR0aW5nVG9nZ2xlRmllbGQgPSAoZmllbGQ6IFRvZ2dsZUZpZWxkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB0aGlzLnVzZVN0YXRlRm9yPGJvb2xlYW4+KGZpZWxkLmlkKVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1zZWNvbmRDb2x1bW4geC10b2dnbGUtd3JhcHBlclwiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9e2ZpZWxkLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIngtdG9nZ2xlLWlucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1NldHRpbmdzU2VjdGlvbi5nZXRGaWVsZFZhbHVlKGZpZWxkLmlkKX1cclxuICAgICAgICAgICAgICAgICAgICB7Li4uZmllbGQuZXZlbnRzfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUoZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmV2ZW50cy5vbkNoYW5nZT8uKGUpXHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ4LXRvZ2dsZS1pbmRpY2F0b3JXcmFwcGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwieC10b2dnbGUtaW5kaWNhdG9yXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIFNldHRpbmdJbnB1dEZpZWxkID0gKGZpZWxkOiBJbnB1dEZpZWxkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB0aGlzLnVzZVN0YXRlRm9yPHN0cmluZz4oZmllbGQuaWQpXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICBpZD17ZmllbGQuaWR9XHJcbiAgICAgICAgICAgICAgICBkaXI9XCJsdHJcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e1NldHRpbmdzU2VjdGlvbi5nZXRGaWVsZFZhbHVlKGZpZWxkLmlkKX1cclxuICAgICAgICAgICAgICAgIHR5cGU9e2ZpZWxkLmlucHV0VHlwZX1cclxuICAgICAgICAgICAgICAgIHsuLi5maWVsZC5ldmVudHN9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUoZS5jdXJyZW50VGFyZ2V0LnZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmV2ZW50cy5vbkNoYW5nZT8uKGUpXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgIClcclxuICAgIH1cclxuICAgIHByaXZhdGUgU2V0dGluZ0Ryb3Bkb3duRmllbGQgPSAoZmllbGQ6IERyb3Bkb3duRmllbGQpID0+IHtcclxuICAgICAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IHRoaXMudXNlU3RhdGVGb3I8bnVtYmVyPihmaWVsZC5pZClcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHNlbGVjdFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWFpbi1kcm9wRG93bi1kcm9wRG93blwiXHJcbiAgICAgICAgICAgICAgICBpZD17ZmllbGQuaWR9XHJcbiAgICAgICAgICAgICAgICB7Li4uZmllbGQuZXZlbnRzfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFZhbHVlKGUuY3VycmVudFRhcmdldC5zZWxlY3RlZEluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmV2ZW50cy5vbkNoYW5nZT8uKGUpXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICB7ZmllbGQub3B0aW9ucy5tYXAoKG9wdGlvbiwgaSkgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gc2VsZWN0ZWQ9e2kgPT09IFNldHRpbmdzU2VjdGlvbi5nZXRGaWVsZFZhbHVlKGZpZWxkLmlkKX0gdmFsdWU9e2kgKyAxfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge29wdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBTZXR0aW5nSGlkZGVuID0gKCkgPT4gPD48Lz5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGVudW0gRmllbGRUeXBlIHtcclxuICAgIEhJRERFTiA9IFwiaGlkZGVuXCIsXHJcbiAgICBJTlBVVCA9IFwiaW5wdXRcIixcclxuICAgIERST1BET1dOID0gXCJkcm9wZG93blwiLFxyXG4gICAgQlVUVE9OID0gXCJidXR0b25cIixcclxuICAgIFRPR0dMRSA9IFwidG9nZ2xlXCIsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUZpZWxkPEE+IHtcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIHR5cGU6IEZpZWxkVHlwZVxyXG4gICAgZGVzY3JpcHRpb246IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJ1dHRvbkZpZWxkIGV4dGVuZHMgQmFzZUZpZWxkPG5ldmVyPiB7XHJcbiAgICB0eXBlOiBGaWVsZFR5cGUuQlVUVE9OXHJcbiAgICB0ZXh0OiBzdHJpbmdcclxuICAgIGV2ZW50czogUGFydGlhbDxSZWFjdC5CdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD4+XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVG9nZ2xlRmllbGQgZXh0ZW5kcyBCYXNlRmllbGQ8Ym9vbGVhbj4ge1xyXG4gICAgdHlwZTogRmllbGRUeXBlLlRPR0dMRVxyXG4gICAgZXZlbnRzOiBQYXJ0aWFsPFJlYWN0LklucHV0SFRNTEF0dHJpYnV0ZXM8SFRNTElucHV0RWxlbWVudD4+XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW5wdXRGaWVsZCBleHRlbmRzIEJhc2VGaWVsZDxzdHJpbmc+IHtcclxuICAgIHR5cGU6IEZpZWxkVHlwZS5JTlBVVFxyXG4gICAgaW5wdXRUeXBlOiBzdHJpbmdcclxuICAgIGV2ZW50czogUGFydGlhbDxSZWFjdC5JbnB1dEhUTUxBdHRyaWJ1dGVzPEhUTUxJbnB1dEVsZW1lbnQ+PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERyb3Bkb3duRmllbGQgZXh0ZW5kcyBCYXNlRmllbGQ8bnVtYmVyPiB7XHJcbiAgICB0eXBlOiBGaWVsZFR5cGUuRFJPUERPV05cclxuICAgIG9wdGlvbnM6IHN0cmluZ1tdXHJcbiAgICBldmVudHM6IFBhcnRpYWw8UmVhY3QuU2VsZWN0SFRNTEF0dHJpYnV0ZXM8SFRNTFNlbGVjdEVsZW1lbnQ+PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEhpZGRlbkZpZWxkIGV4dGVuZHMgQmFzZUZpZWxkPGFueT4ge1xyXG4gICAgdHlwZTogRmllbGRUeXBlLkhJRERFTlxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTZXR0aW5nc0ZpZWxkID0gSGlkZGVuRmllbGQgfCBEcm9wZG93bkZpZWxkIHwgSW5wdXRGaWVsZCB8IEJ1dHRvbkZpZWxkIHwgVG9nZ2xlRmllbGRcclxuIiwKICAiaW1wb3J0IHsgdGFzayB9IGZyb20gXCJmcC10c1wiXHJcbmltcG9ydCB7IGNvbnN0Vm9pZCB9IGZyb20gXCJmcC10cy9mdW5jdGlvblwiXHJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiXHJcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCJcclxuaW1wb3J0IHsgZ3VhcmQ0LCBpcyB9IGZyb20gXCIuL2ZwXCJcclxuaW1wb3J0IHsgc2xlZXAgfSBmcm9tIFwiLi91dGlsXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBTZXR0aW5nc1NlY3Rpb24ge1xyXG4gICAgcHJpdmF0ZSBzdG9wSGlzdG9yeUxpc3RlbmVyOiBhbnlcclxuICAgIHByaXZhdGUgc2V0UmVyZW5kZXI6IEZ1bmN0aW9uIHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgbmFtZTogc3RyaW5nLFxyXG4gICAgICAgIHB1YmxpYyBzZWN0aW9uSWQ6IHN0cmluZyxcclxuICAgICAgICBwdWJsaWMgc2VjdGlvbkZpZWxkczogeyBba2V5OiBzdHJpbmddOiBTZXR0aW5nc0ZpZWxkIH0gPSB7fSxcclxuICAgICkge31cclxuXHJcbiAgICBzdGF0aWMgd2FpdEZvclJlYWN0ID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHdoaWxlICghKFNwaWNldGlmeS5SZWFjdCAmJiBTcGljZXRpZnkuUmVhY3RET00pKSBzbGVlcCgxMDApXHJcbiAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgIH1cclxuXHJcbiAgICBwdXNoU2V0dGluZ3MgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgd2hpbGUgKCFTcGljZXRpZnk/LlBsYXRmb3JtPy5IaXN0b3J5Py5saXN0ZW4pIGF3YWl0IHNsZWVwKDEwMClcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RvcEhpc3RvcnlMaXN0ZW5lcikgdGhpcy5zdG9wSGlzdG9yeUxpc3RlbmVyKClcclxuXHJcbiAgICAgICAgdGhpcy5zdG9wSGlzdG9yeUxpc3RlbmVyID0gU3BpY2V0aWZ5LlBsYXRmb3JtLkhpc3RvcnkubGlzdGVuKCh7IHBhdGhuYW1lID0gXCJcIiB9KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXRobmFtZSA9PT0gXCIvcHJlZmVyZW5jZXNcIikgdGhpcy5yZW5kZXIoKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmIChTcGljZXRpZnkuUGxhdGZvcm0uSGlzdG9yeS5sb2NhdGlvbi5wYXRobmFtZSA9PT0gXCIvcHJlZmVyZW5jZXNcIikgYXdhaXQgdGhpcy5yZW5kZXIoKVxyXG4gICAgfVxyXG5cclxuICAgIHRvT2JqZWN0ID0gKCkgPT5cclxuICAgICAgICBuZXcgUHJveHkoXHJcbiAgICAgICAgICAgIHt9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnZXQ6ICh0YXJnZXQsIHByb3ApID0+IFNldHRpbmdzU2VjdGlvbi5nZXRGaWVsZFZhbHVlKHRoaXMuZ2V0SWQocHJvcC50b1N0cmluZygpKSksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKVxyXG5cclxuICAgIHJlcmVuZGVyID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnNldFJlcmVuZGVyKSB0aGlzLnNldFJlcmVuZGVyKE1hdGgucmFuZG9tKCkpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXIgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgd2hpbGUgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2t0b3Auc2V0dGluZ3Muc2VsZWN0TGFuZ3VhZ2VcIikpIHtcclxuICAgICAgICAgICAgaWYgKFNwaWNldGlmeS5QbGF0Zm9ybS5IaXN0b3J5LmxvY2F0aW9uLnBhdGhuYW1lICE9PSBcIi9wcmVmZXJlbmNlc1wiKSByZXR1cm5cclxuICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTAwKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWxsU2V0dGluZ3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLngtc2V0dGluZ3MtY29udGFpbmVyXCIpIVxyXG5cclxuICAgICAgICBsZXQgcGx1Z2luU2V0dGluZ3NDb250YWluZXIgPSBBcnJheS5mcm9tKGFsbFNldHRpbmdzQ29udGFpbmVyLmNoaWxkcmVuKS5maW5kKCh7IGlkIH0pID0+IGlkID09PSB0aGlzLnNlY3Rpb25JZClcclxuXHJcbiAgICAgICAgaWYgKCFwbHVnaW5TZXR0aW5nc0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICBwbHVnaW5TZXR0aW5nc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICAgICAgcGx1Z2luU2V0dGluZ3NDb250YWluZXIuaWQgPSB0aGlzLnNlY3Rpb25JZFxyXG4gICAgICAgICAgICBwbHVnaW5TZXR0aW5nc0NvbnRhaW5lci5jbGFzc05hbWUgPSBcInNldHRpbmdzQ29udGFpbmVyXCJcclxuICAgICAgICAgICAgYWxsU2V0dGluZ3NDb250YWluZXIuYXBwZW5kQ2hpbGQocGx1Z2luU2V0dGluZ3NDb250YWluZXIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBSZWFjdERPTS5yZW5kZXIoPHRoaXMuRmllbGRzQ29udGFpbmVyIC8+LCBwbHVnaW5TZXR0aW5nc0NvbnRhaW5lcilcclxuICAgIH1cclxuXHJcbiAgICBhZGRCdXR0b24gPSAoXHJcbiAgICAgICAgbmFtZUlkOiBzdHJpbmcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgICAgICB0ZXh0OiBzdHJpbmcsXHJcbiAgICAgICAgb25DbGljazogKGU6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEJ1dHRvbkVsZW1lbnQsIE1vdXNlRXZlbnQ+KSA9PiB2b2lkID0gY29uc3RWb2lkLFxyXG4gICAgICAgIGV2ZW50czogQnV0dG9uRmllbGRbXCJldmVudHNcIl0gPSB7fSxcclxuICAgICkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRJZChuYW1lSWQpXHJcblxyXG4gICAgICAgIGV2ZW50cy5vbkNsaWNrID0gb25DbGlja1xyXG5cclxuICAgICAgICB0aGlzLnNlY3Rpb25GaWVsZHNbbmFtZUlkXSA9IHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIHR5cGU6IEZpZWxkVHlwZS5CVVRUT04sXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICB0ZXh0LFxyXG4gICAgICAgICAgICBldmVudHMsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgYWRkVG9nZ2xlID0gKFxyXG4gICAgICAgIG5hbWVJZDogc3RyaW5nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgZGVmYXVsdFZhbHVlID0gdGFzay5vZih0cnVlKSxcclxuICAgICAgICBvbkNoYW5nZTogKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB2b2lkID0gY29uc3RWb2lkLFxyXG4gICAgICAgIGV2ZW50czogVG9nZ2xlRmllbGRbXCJldmVudHNcIl0gPSB7fSxcclxuICAgICkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRJZChuYW1lSWQpXHJcblxyXG4gICAgICAgIFNldHRpbmdzU2VjdGlvbi5zZXREZWZhdWx0RmllbGRWYWx1ZShpZCwgZGVmYXVsdFZhbHVlKVxyXG5cclxuICAgICAgICBldmVudHMub25DaGFuZ2UgPSBvbkNoYW5nZVxyXG4gICAgICAgIHRoaXMuc2VjdGlvbkZpZWxkc1tuYW1lSWRdID0ge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgdHlwZTogRmllbGRUeXBlLlRPR0dMRSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGV2ZW50cyxcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgIH1cclxuXHJcbiAgICBhZGRJbnB1dCA9IChcclxuICAgICAgICBuYW1lSWQ6IHN0cmluZyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogdGFzay5UYXNrPHN0cmluZz4sXHJcbiAgICAgICAgb25DaGFuZ2U6IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4gdm9pZCA9IGNvbnN0Vm9pZCxcclxuICAgICAgICBpbnB1dFR5cGUgPSBcInRleHRcIixcclxuICAgICAgICBldmVudHM6IElucHV0RmllbGRbXCJldmVudHNcIl0gPSB7fSxcclxuICAgICkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRJZChuYW1lSWQpXHJcblxyXG4gICAgICAgIFNldHRpbmdzU2VjdGlvbi5zZXREZWZhdWx0RmllbGRWYWx1ZShpZCwgZGVmYXVsdFZhbHVlKVxyXG5cclxuICAgICAgICBldmVudHMub25DaGFuZ2UgPSBvbkNoYW5nZVxyXG4gICAgICAgIHRoaXMuc2VjdGlvbkZpZWxkc1tuYW1lSWRdID0ge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgdHlwZTogRmllbGRUeXBlLklOUFVULFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgaW5wdXRUeXBlLFxyXG4gICAgICAgICAgICBldmVudHMsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIGFkZERyb3BEb3duID0gKFxyXG4gICAgICAgIG5hbWVJZDogc3RyaW5nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgb3B0aW9uczogc3RyaW5nW10sXHJcbiAgICAgICAgZGVmYXVsdFZhbHVlID0gdGFzay5vZigwKSxcclxuICAgICAgICBvbkNoYW5nZTogKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4gdm9pZCA9IGNvbnN0Vm9pZCxcclxuICAgICAgICBldmVudHM6IERyb3Bkb3duRmllbGRbXCJldmVudHNcIl0gPSB7fSxcclxuICAgICkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRJZChuYW1lSWQpXHJcblxyXG4gICAgICAgIFNldHRpbmdzU2VjdGlvbi5zZXREZWZhdWx0RmllbGRWYWx1ZShpZCwgZGVmYXVsdFZhbHVlKVxyXG5cclxuICAgICAgICBldmVudHMub25DaGFuZ2UgPSBvbkNoYW5nZVxyXG4gICAgICAgIHRoaXMuc2VjdGlvbkZpZWxkc1tuYW1lSWRdID0ge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgdHlwZTogRmllbGRUeXBlLkRST1BET1dOLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICAgICAgZXZlbnRzLFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEhpZGRlbiA9IChuYW1lSWQ6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBhbnkpID0+IHtcclxuICAgICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0SWQobmFtZUlkKVxyXG5cclxuICAgICAgICBTZXR0aW5nc1NlY3Rpb24uc2V0RGVmYXVsdEZpZWxkVmFsdWUoaWQsIGRlZmF1bHRWYWx1ZSlcclxuXHJcbiAgICAgICAgdGhpcy5zZWN0aW9uRmllbGRzW25hbWVJZF0gPSB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB0eXBlOiBGaWVsZFR5cGUuSElEREVOLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgIH1cclxuXHJcbiAgICBnZXRJZCA9IChuYW1lSWQ6IHN0cmluZykgPT4gYGV4dGVuc2lvbnM6JHt0aGlzLnNlY3Rpb25JZH06JHtuYW1lSWR9YFxyXG5cclxuICAgIHByaXZhdGUgdXNlU3RhdGVGb3IgPSA8QSw+KGlkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlU3RhdGVdID0gdXNlU3RhdGUoU2V0dGluZ3NTZWN0aW9uLmdldEZpZWxkVmFsdWU8QT4oaWQpKVxyXG5cclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgKG5ld1ZhbHVlOiBBKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFZhbHVlU3RhdGUobmV3VmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NTZWN0aW9uLnNldEZpZWxkVmFsdWUoaWQhLCBuZXdWYWx1ZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdIGFzIGNvbnN0XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEZpZWxkVmFsdWUgPSA8Uiw+KGlkOiBzdHJpbmcpOiBSID0+IHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShTcGljZXRpZnkuTG9jYWxTdG9yYWdlLmdldChpZCkgPz8gXCJudWxsXCIpIC8vIFwibnVsbFwiIGlzIHBhcnNlZCBhcyBudWxsLCB0aGUgbW9yZSB5b3Uga25vd1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzZXRGaWVsZFZhbHVlID0gKGlkOiBzdHJpbmcsIG5ld1ZhbHVlOiBhbnkpID0+IHtcclxuICAgICAgICBTcGljZXRpZnkuTG9jYWxTdG9yYWdlLnNldChpZCwgSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHNldERlZmF1bHRGaWVsZFZhbHVlID0gYXN5bmMgKGlkOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogdGFzay5UYXNrPGFueT4pID0+IHtcclxuICAgICAgICBpZiAoU2V0dGluZ3NTZWN0aW9uLmdldEZpZWxkVmFsdWUoaWQpID09PSBudWxsKSBTZXR0aW5nc1NlY3Rpb24uc2V0RmllbGRWYWx1ZShpZCwgYXdhaXQgZGVmYXVsdFZhbHVlKCkpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBGaWVsZHNDb250YWluZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgW3JlcmVuZGVyLCBzZXRSZXJlbmRlcl0gPSB1c2VTdGF0ZTxudW1iZXI+KDApXHJcbiAgICAgICAgdGhpcy5zZXRSZXJlbmRlciA9IHNldFJlcmVuZGVyXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1zZWN0aW9uXCIga2V5PXtyZXJlbmRlcn0+XHJcbiAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwiVHlwZV9fVHlwZUVsZW1lbnQtc2MtZ29saTNqLTAgVHlwZUVsZW1lbnQtY2VsbG8tdGV4dEJhc2UtdHlwZVwiPnt0aGlzLm5hbWV9PC9oMj5cclxuICAgICAgICAgICAgICAgIHtPYmplY3QuZW50cmllcyh0aGlzLnNlY3Rpb25GaWVsZHMpLm1hcCgoW25hbWVJZCwgZmllbGRdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDx0aGlzLkZpZWxkIGZpZWxkPXtmaWVsZH0gLz5cclxuICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBGaWVsZCA9ICh7IGZpZWxkIH06IHsgZmllbGQ6IFNldHRpbmdzRmllbGQgfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlzVHlwZSA9IGlzPFNldHRpbmdzRmllbGQ+KFwidHlwZVwiKVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIngtc2V0dGluZ3Mtcm93XCI+XHJcbiAgICAgICAgICAgICAgICA8dGhpcy5TZXR0aW5nRGVzY3JpcHRpb24gaWQ9e2ZpZWxkLmlkfSBkZXNjcmlwdGlvbj17ZmllbGQuZGVzY3JpcHRpb259IC8+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIngtc2V0dGluZ3Mtc2Vjb25kQ29sdW1uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge2d1YXJkNChbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtpc1R5cGU8SW5wdXRGaWVsZD4oRmllbGRUeXBlLklOUFVUKSwgdGhpcy5TZXR0aW5nSW5wdXRGaWVsZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtpc1R5cGUoRmllbGRUeXBlLkJVVFRPTiksIHRoaXMuU2V0dGluZ0J1dHRvbkZpZWxkXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2lzVHlwZShGaWVsZFR5cGUuVE9HR0xFKSwgdGhpcy5TZXR0aW5nVG9nZ2xlRmllbGRdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbaXNUeXBlKEZpZWxkVHlwZS5EUk9QRE9XTiksIHRoaXMuU2V0dGluZ0Ryb3Bkb3duRmllbGRdLFxyXG4gICAgICAgICAgICAgICAgICAgIF0pKHRoaXMuU2V0dGluZ0hpZGRlbikoZmllbGQpfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIFNldHRpbmdEZXNjcmlwdGlvbiA9ICh7IGlkLCBkZXNjcmlwdGlvbiB9OiB7IGlkOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmcgfSkgPT4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwieC1zZXR0aW5ncy1maXJzdENvbHVtblwiPlxyXG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiVHlwZV9fVHlwZUVsZW1lbnQtc2MtZ29saTNqLTAgVHlwZUVsZW1lbnQtdmlvbGEtdGV4dFN1YmR1ZWQtdHlwZVwiIGh0bWxGb3I9e2lkfT5cclxuICAgICAgICAgICAgICAgIHtkZXNjcmlwdGlvbn1cclxuICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIClcclxuXHJcbiAgICBwcml2YXRlIFNldHRpbmdCdXR0b25GaWVsZCA9IChmaWVsZDogQnV0dG9uRmllbGQpID0+IChcclxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJcIj5cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgaWQ9e2ZpZWxkLmlkfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiQnV0dG9uLXNjLXkwZ3RieC0wIEJ1dHRvbi1zbS1idXR0b25TZWNvbmRhcnktdXNlQnJvd3NlckRlZmF1bHRGb2N1c1N0eWxlIHgtc2V0dGluZ3MtYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgIHsuLi5maWVsZC5ldmVudHN9XHJcbiAgICAgICAgICAgICAgICB0eXBlPXtmaWVsZC50eXBlfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICB7ZmllbGQudGV4dH1cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9zcGFuPlxyXG4gICAgKVxyXG5cclxuICAgIHByaXZhdGUgU2V0dGluZ1RvZ2dsZUZpZWxkID0gKGZpZWxkOiBUb2dnbGVGaWVsZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdGhpcy51c2VTdGF0ZUZvcjxib29sZWFuPihmaWVsZC5pZClcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cIngtc2V0dGluZ3Mtc2Vjb25kQ29sdW1uIHgtdG9nZ2xlLXdyYXBwZXJcIj5cclxuICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgIGlkPXtmaWVsZC5pZH1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ4LXRvZ2dsZS1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtTZXR0aW5nc1NlY3Rpb24uZ2V0RmllbGRWYWx1ZShmaWVsZC5pZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgey4uLmZpZWxkLmV2ZW50c31cclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFZhbHVlKGUuY3VycmVudFRhcmdldC5jaGVja2VkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5ldmVudHMub25DaGFuZ2U/LihlKVxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwieC10b2dnbGUtaW5kaWNhdG9yV3JhcHBlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIngtdG9nZ2xlLWluZGljYXRvclwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBTZXR0aW5nSW5wdXRGaWVsZCA9IChmaWVsZDogSW5wdXRGaWVsZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdGhpcy51c2VTdGF0ZUZvcjxzdHJpbmc+KGZpZWxkLmlkKVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIngtc2V0dGluZ3MtaW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgaWQ9e2ZpZWxkLmlkfVxyXG4gICAgICAgICAgICAgICAgZGlyPVwibHRyXCJcclxuICAgICAgICAgICAgICAgIHZhbHVlPXtTZXR0aW5nc1NlY3Rpb24uZ2V0RmllbGRWYWx1ZShmaWVsZC5pZCl9XHJcbiAgICAgICAgICAgICAgICB0eXBlPXtmaWVsZC5pbnB1dFR5cGV9XHJcbiAgICAgICAgICAgICAgICB7Li4uZmllbGQuZXZlbnRzfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFZhbHVlKGUuY3VycmVudFRhcmdldC52YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5ldmVudHMub25DaGFuZ2U/LihlKVxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIFNldHRpbmdEcm9wZG93bkZpZWxkID0gKGZpZWxkOiBEcm9wZG93bkZpZWxkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB0aGlzLnVzZVN0YXRlRm9yPG51bWJlcj4oZmllbGQuaWQpXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxzZWxlY3RcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1haW4tZHJvcERvd24tZHJvcERvd25cIlxyXG4gICAgICAgICAgICAgICAgaWQ9e2ZpZWxkLmlkfVxyXG4gICAgICAgICAgICAgICAgey4uLmZpZWxkLmV2ZW50c31cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRWYWx1ZShlLmN1cnJlbnRUYXJnZXQuc2VsZWN0ZWRJbmRleClcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5ldmVudHMub25DaGFuZ2U/LihlKVxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge2ZpZWxkLm9wdGlvbnMubWFwKChvcHRpb24sIGkpID0+IChcclxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHNlbGVjdGVkPXtpID09PSBTZXR0aW5nc1NlY3Rpb24uZ2V0RmllbGRWYWx1ZShmaWVsZC5pZCl9IHZhbHVlPXtpICsgMX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtvcHRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgU2V0dGluZ0hpZGRlbiA9ICgpID0+IDw+PC8+XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBlbnVtIEZpZWxkVHlwZSB7XHJcbiAgICBISURERU4gPSBcImhpZGRlblwiLFxyXG4gICAgSU5QVVQgPSBcImlucHV0XCIsXHJcbiAgICBEUk9QRE9XTiA9IFwiZHJvcGRvd25cIixcclxuICAgIEJVVFRPTiA9IFwiYnV0dG9uXCIsXHJcbiAgICBUT0dHTEUgPSBcInRvZ2dsZVwiLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VGaWVsZDxBPiB7XHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICB0eXBlOiBGaWVsZFR5cGVcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCdXR0b25GaWVsZCBleHRlbmRzIEJhc2VGaWVsZDxuZXZlcj4ge1xyXG4gICAgdHlwZTogRmllbGRUeXBlLkJVVFRPTlxyXG4gICAgdGV4dDogc3RyaW5nXHJcbiAgICBldmVudHM6IFBhcnRpYWw8UmVhY3QuQnV0dG9uSFRNTEF0dHJpYnV0ZXM8SFRNTEJ1dHRvbkVsZW1lbnQ+PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRvZ2dsZUZpZWxkIGV4dGVuZHMgQmFzZUZpZWxkPGJvb2xlYW4+IHtcclxuICAgIHR5cGU6IEZpZWxkVHlwZS5UT0dHTEVcclxuICAgIGV2ZW50czogUGFydGlhbDxSZWFjdC5JbnB1dEhUTUxBdHRyaWJ1dGVzPEhUTUxJbnB1dEVsZW1lbnQ+PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElucHV0RmllbGQgZXh0ZW5kcyBCYXNlRmllbGQ8c3RyaW5nPiB7XHJcbiAgICB0eXBlOiBGaWVsZFR5cGUuSU5QVVRcclxuICAgIGlucHV0VHlwZTogc3RyaW5nXHJcbiAgICBldmVudHM6IFBhcnRpYWw8UmVhY3QuSW5wdXRIVE1MQXR0cmlidXRlczxIVE1MSW5wdXRFbGVtZW50Pj5cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEcm9wZG93bkZpZWxkIGV4dGVuZHMgQmFzZUZpZWxkPG51bWJlcj4ge1xyXG4gICAgdHlwZTogRmllbGRUeXBlLkRST1BET1dOXHJcbiAgICBvcHRpb25zOiBzdHJpbmdbXVxyXG4gICAgZXZlbnRzOiBQYXJ0aWFsPFJlYWN0LlNlbGVjdEhUTUxBdHRyaWJ1dGVzPEhUTUxTZWxlY3RFbGVtZW50Pj5cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBIaWRkZW5GaWVsZCBleHRlbmRzIEJhc2VGaWVsZDxhbnk+IHtcclxuICAgIHR5cGU6IEZpZWxkVHlwZS5ISURERU5cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgU2V0dGluZ3NGaWVsZCA9IEhpZGRlbkZpZWxkIHwgRHJvcGRvd25GaWVsZCB8IElucHV0RmllbGQgfCBCdXR0b25GaWVsZCB8IFRvZ2dsZUZpZWxkXHJcbiIsCiAgImltcG9ydCB7IGFycmF5IGFzIGEsIG5vbkVtcHR5QXJyYXkgfSBmcm9tIFwiZnAtdHNcIlxyXG5pbXBvcnQgeyBwaXBlIGFzIHAgfSBmcm9tIFwiZnAtdHMvZnVuY3Rpb25cIlxyXG5pbXBvcnQge1xyXG4gICAgYWRkUGxhdFBsYXlsaXN0VHJhY2tzLFxyXG4gICAgY3JlYXRlUGxhdFBsYXlsaXN0LFxyXG4gICAgcmVtb3ZlV2ViUGxheWxpc3RUcmFja3MsXHJcbiAgICBzZXRQbGF0UGxheWxpc3RWaXNpYmlsaXR5LFxyXG59IGZyb20gXCIuLi8uLi9zaGFyZWQvYXBpXCJcclxuaW1wb3J0IHsgU3BvdGlmeUxvYywgU3BvdGlmeVVSSSwgaXNMaWtlZCwgdG9nZ2xlTGlrZWQgfSBmcm9tIFwiLi4vLi4vc2hhcmVkL3V0aWxcIlxyXG5pbXBvcnQgeyB1cGRhdGVOb3dQbGF5aW5nU3RhcnMgfSBmcm9tIFwiLi9hcHBcIlxyXG5pbXBvcnQgeyBwbGF5bGlzdFVyaXMsIHRyYWNrc1JhdGluZ3MgfSBmcm9tIFwiLi9yYXRpbmdzXCJcclxuaW1wb3J0IHsgQ09ORklHIH0gZnJvbSBcIi4vc2V0dGluZ3NcIlxyXG5pbXBvcnQgeyBIQUxGX1NUQVJfTEVOR1RILCBnZXRTdGFyc0NvbnRhaW5lciwgc2V0U3RhcnNHcmFkaWVudEZyb21Db250YWluZXJCeVJhdGluZywgc3RhcnNOMlMsIHN0YXJzUzJOIH0gZnJvbSBcIi4vdXRpbFwiXHJcblxyXG5jb25zdCB7IFVSSSB9ID0gU3BpY2V0aWZ5XHJcblxyXG5leHBvcnQgdHlwZSBTdGFyU3RvcHMgPSBbU1ZHU3RvcEVsZW1lbnQsIFNWR1N0b3BFbGVtZW50XVxyXG5cclxuY29uc3QgY3JlYXRlU3RhciA9IChzdGFyc0lkOiBzdHJpbmcsIG50aDogbnVtYmVyLCBzaXplOiBudW1iZXIpID0+IHtcclxuICAgIGNvbnN0IHhtbG5zID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXHJcbiAgICBjb25zdCBzdGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHhtbG5zLCBcInN2Z1wiKVxyXG4gICAgY29uc3QgaWQgPSBgJHtzdGFyc0lkfS0ke250aH1gXHJcbiAgICBzdGFyLmlkID0gaWRcclxuICAgIHN0YXIuc3R5bGUubWluSGVpZ2h0ID0gYCR7c2l6ZX1weGBcclxuICAgIHN0YXIuc3R5bGUubWluV2lkdGggPSBgJHtzaXplfXB4YFxyXG4gICAgc3Rhci5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIndpZHRoXCIsIGAke3NpemV9cHhgKVxyXG4gICAgc3Rhci5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImhlaWdodFwiLCBgJHtzaXplfXB4YClcclxuICAgIHN0YXIuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ2aWV3Qm94XCIsIGAwIDAgMzIgMzJgKVxyXG5cclxuICAgIGNvbnN0IGRlZnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoeG1sbnMsIFwiZGVmc1wiKVxyXG4gICAgc3Rhci5hcHBlbmQoZGVmcylcclxuXHJcbiAgICBjb25zdCBncmFkaWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh4bWxucywgXCJsaW5lYXJHcmFkaWVudFwiKVxyXG4gICAgZGVmcy5hcHBlbmQoZ3JhZGllbnQpXHJcbiAgICBncmFkaWVudC5pZCA9IGAke2lkfS1ncmFkaWVudGBcclxuXHJcbiAgICBjb25zdCBzdG9wMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh4bWxucywgXCJzdG9wXCIpXHJcbiAgICBncmFkaWVudC5hcHBlbmQoc3RvcDEpXHJcbiAgICBzdG9wMS5pZCA9IGAke2lkfS1ncmFkaWVudC1sZWZ0YFxyXG4gICAgc3RvcDEuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJvZmZzZXRcIiwgXCI1MCVcIilcclxuICAgIHN0b3AxLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwic3RvcC1jb2xvclwiLCBcInZhcigtLXNwaWNlLWJ1dHRvbi1kaXNhYmxlZClcIilcclxuXHJcbiAgICBjb25zdCBzdG9wMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh4bWxucywgXCJzdG9wXCIpXHJcbiAgICBncmFkaWVudC5hcHBlbmQoc3RvcDIpXHJcbiAgICBzdG9wMi5pZCA9IGAke2lkfS1ncmFkaWVudC1yaWdodGBcclxuICAgIHN0b3AyLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwib2Zmc2V0XCIsIFwiNTAlXCIpXHJcbiAgICBzdG9wMi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInN0b3AtY29sb3JcIiwgXCJ2YXIoLS1zcGljZS1idXR0b24tZGlzYWJsZWQpXCIpXHJcblxyXG4gICAgY29uc3QgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh4bWxucywgXCJwYXRoXCIpXHJcbiAgICBzdGFyLmFwcGVuZChwYXRoKVxyXG4gICAgcGF0aC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZpbGxcIiwgYHVybCgjJHtncmFkaWVudC5pZH0pYClcclxuICAgIHBhdGguc2V0QXR0cmlidXRlTlMoXHJcbiAgICAgICAgbnVsbCxcclxuICAgICAgICBcImRcIixcclxuICAgICAgICBcIk0yMC4zODgsMTAuOTE4TDMyLDEyLjExOGwtOC43MzUsNy43NDlMMjUuOTE0LDMxLjRsLTkuODkzLTYuMDg4TDYuMTI3LDMxLjRsMi42OTUtMTEuNTMzTDAsMTIuMTE4bDExLjU0Ny0xLjJMMTYuMDI2LDAuNkwyMC4zODgsMTAuOTE4elwiLFxyXG4gICAgKVxyXG5cclxuICAgIHJldHVybiBbc3RhciwgW3N0b3AxLCBzdG9wMl1dIGFzIFtTVkdFbGVtZW50LCBTdGFyU3RvcHNdXHJcbn1cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVN0YXJzID0gKGlkU3VmZml4OiBzdHJpbmcsIHNpemU6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgaWQgPSBgc3RhcnMtJHtpZFN1ZmZpeH1gXHJcbiAgICBjb25zdCBzdGFyc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpXHJcbiAgICB7XHJcbiAgICAgICAgc3RhcnNDb250YWluZXIuY2xhc3NOYW1lID0gXCJzdGFyc1wiXHJcbiAgICAgICAgc3RhcnNDb250YWluZXIuaWQgPSBpZFxyXG4gICAgICAgIHN0YXJzQ29udGFpbmVyLnN0eWxlLndoaXRlU3BhY2UgPSBcIm5vd3JhcFwiXHJcbiAgICAgICAgc3RhcnNDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCJcclxuICAgICAgICBzdGFyc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCJcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzdGFyc0NvbnN0cnVjdHMgPSBub25FbXB0eUFycmF5LnJhbmdlKDEsIDUpLm1hcChpID0+IGNyZWF0ZVN0YXIoaWQsIGksIHNpemUpKVxyXG4gICAgcChcclxuICAgICAgICBzdGFyc0NvbnN0cnVjdHMsXHJcbiAgICAgICAgYS51bnppcCxcclxuICAgICAgICAoW3N0YXJFbGVtZW50c10pID0+IHN0YXJFbGVtZW50cyxcclxuICAgICAgICBhLm1hcChzdGFyRWxlbWVudCA9PiBzdGFyc0NvbnRhaW5lci5hcHBlbmQoc3RhckVsZW1lbnQpKSxcclxuICAgIClcclxuICAgIHJldHVybiBbc3RhcnNDb250YWluZXIsIHN0YXJzQ29uc3RydWN0c10gYXMgW0hUTUxTcGFuRWxlbWVudCwgUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlU3Rhcj5bXV1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldFN0YXJzR3JhZGllbnRCeVJhdGluZyA9IChyYXRpbmc6IG51bWJlcikgPT4gKHN0YXJzU1ZHU3RvcHM6IFN0YXJTdG9wc1tdKSA9PiB7XHJcbiAgICBjb25zdCBzZXRIYWxmU3RhckxpdCA9IChsaXQ6IGJvb2xlYW4pID0+IChudGg6IG51bWJlcikgPT5cclxuICAgICAgICBzdGFyc1NWR1N0b3BzW01hdGguZmxvb3IobnRoIC8gMildW250aCAlIDJdLnNldEF0dHJpYnV0ZU5TKFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBcInN0b3AtY29sb3JcIixcclxuICAgICAgICAgICAgYHZhcigtLXNwaWNlLWJ1dHRvbiR7bGl0ID8gXCJcIiA6IFwiLWRpc2FibGVkXCJ9KWAsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIHAoXHJcbiAgICAgICAgbm9uRW1wdHlBcnJheS5yYW5nZSgwLCA5KSxcclxuICAgICAgICBhLnNwYW5MZWZ0KGhpID0+IGhpIDwgcmF0aW5nKSxcclxuICAgICAgICAoeyBpbml0LCByZXN0IH0pID0+IHtcclxuICAgICAgICAgICAgaW5pdC5tYXAoc2V0SGFsZlN0YXJMaXQodHJ1ZSkpXHJcbiAgICAgICAgICAgIHJlc3QubWFwKHNldEhhbGZTdGFyTGl0KGZhbHNlKSlcclxuICAgICAgICB9LFxyXG4gICAgKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY2FsY3VsYXRlUmF0aW5nRnJvbU1vdXNlRXZlbnQgPSAoc3RhckVsZW1lbnQ6IFNWR1NWR0VsZW1lbnQsIG50aDogbnVtYmVyKSA9PiAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgY29uc3QgcmVjdCA9IHN0YXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcbiAgICBjb25zdCBsZWZ0T2Zmc2V0RnJvbUhlYXJ0ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0XHJcbiAgICBjb25zdCBpc0hhbGYgPSBDT05GSUcuaGFsZlN0YXJSYXRpbmdzICYmIGxlZnRPZmZzZXRGcm9tSGVhcnQgPCBIQUxGX1NUQVJfTEVOR1RIXHJcbiAgICByZXR1cm4gMiAqIChudGggKyAxKSAtIE51bWJlcihpc0hhbGYpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBvblN0YXJDbGljayA9XHJcbiAgICAobnRoOiBudW1iZXIsIHN0YXJFbGVtZW50OiBTVkdTVkdFbGVtZW50LCBnZXRUcmFja1VyaTogKCkgPT4gU3BvdGlmeVVSSSkgPT4gYXN5bmMgKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCB0cmFja1VyaSA9IGdldFRyYWNrVXJpKClcclxuICAgICAgICBjb25zdCBvbGRSYXRpbmcgPSB0cmFja3NSYXRpbmdzW3RyYWNrVXJpXVxyXG4gICAgICAgIGxldCBuZXdSYXRpbmcgPSBjYWxjdWxhdGVSYXRpbmdGcm9tTW91c2VFdmVudChzdGFyRWxlbWVudCwgbnRoKShlKVxyXG5cclxuICAgICAgICBjb25zdCBoZWFydFRocmVzaG9sZCA9IHN0YXJzUzJOKENPTkZJRy5oZWFydFRocmVzaG9sZClcclxuICAgICAgICBpZiAoaGVhcnRUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hvdWxkQmVIZWFydGVkID0gbmV3UmF0aW5nID49IGhlYXJ0VGhyZXNob2xkXHJcbiAgICAgICAgICAgIGNvbnN0IFtpc0hlYXJ0ZWRdID0gYXdhaXQgaXNMaWtlZChbdHJhY2tVcmldKVxyXG5cclxuICAgICAgICAgICAgaWYgKGlzSGVhcnRlZCAhPT0gc2hvdWxkQmVIZWFydGVkKSB0b2dnbGVMaWtlZChbdHJhY2tVcmldKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9sZFJhdGluZyA9PT0gbmV3UmF0aW5nKSBuZXdSYXRpbmcgPSAwXHJcblxyXG4gICAgICAgIGlmIChvbGRSYXRpbmcpXHJcbiAgICAgICAgICAgIHAoXHJcbiAgICAgICAgICAgICAgICBwbGF5bGlzdFVyaXMuc2xpY2UoMCwgb2xkUmF0aW5nICsgMSksXHJcbiAgICAgICAgICAgICAgICBhLmZpbHRlcihCb29sZWFuKSxcclxuICAgICAgICAgICAgICAgIGEubWFwKHBsYXlsaXN0VXJpID0+IFVSSS5mcm9tKHBsYXlsaXN0VXJpKSEuaWQpLFxyXG4gICAgICAgICAgICAgICAgYS5tYXAocGxheWxpc3RJZCA9PiByZW1vdmVXZWJQbGF5bGlzdFRyYWNrcyhwbGF5bGlzdElkLCBbdHJhY2tVcmldKSksXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgdHJhY2tzUmF0aW5nc1t0cmFja1VyaV0gPSBuZXdSYXRpbmdcclxuXHJcbiAgICAgICAgaWYgKG5ld1JhdGluZykge1xyXG4gICAgICAgICAgICBsZXQgcGxheWxpc3RVcmkgPSBwbGF5bGlzdFVyaXNbbmV3UmF0aW5nXVxyXG4gICAgICAgICAgICBpZiAoIXBsYXlsaXN0VXJpKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5bGlzdFVyaSA9IGF3YWl0IGNyZWF0ZVBsYXRQbGF5bGlzdChcclxuICAgICAgICAgICAgICAgICAgICBzdGFyc04yUyhuZXdSYXRpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIFNwb3RpZnlMb2MuYWZ0ZXIuZnJvbVVyaShDT05GSUcucmF0aW5nc0ZvbGRlclVyaSksXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBzZXRQbGF0UGxheWxpc3RWaXNpYmlsaXR5KHBsYXlsaXN0VXJpLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgIHBsYXlsaXN0VXJpc1tuZXdSYXRpbmddID0gcGxheWxpc3RVcmlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYWRkUGxhdFBsYXlsaXN0VHJhY2tzKHBsYXlsaXN0VXJpLCBbdHJhY2tVcmldKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdXBkYXRlTm93UGxheWluZ1N0YXJzKClcclxuICAgICAgICBjb25zdCB0cmFja1N0YXJzQ29udGFpbmVyID0gZ2V0U3RhcnNDb250YWluZXIoYCR7VVJJLmZyb21TdHJpbmcodHJhY2tVcmkpIS5pZH1gKVxyXG4gICAgICAgIGlmICh0cmFja1N0YXJzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHAodHJhY2tTdGFyc0NvbnRhaW5lciwgc2V0U3RhcnNHcmFkaWVudEZyb21Db250YWluZXJCeVJhdGluZyhuZXdSYXRpbmcpKVxyXG4gICAgICAgICAgICB0cmFja1N0YXJzQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBuZXdSYXRpbmcgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCJcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiIsCiAgImltcG9ydCB7IGFycmF5IGFzIGEgfSBmcm9tIFwiZnAtdHNcIlxyXG5pbXBvcnQgeyBmbG93IH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCJcclxuaW1wb3J0IHsgU3RhclN0b3BzLCBzZXRTdGFyc0dyYWRpZW50QnlSYXRpbmcgfSBmcm9tIFwiLi9zdGFyc1wiXHJcblxyXG5leHBvcnQgY29uc3QgUkFUSU5HU19GT0xERVJfTkFNRSA9IFwiUmF0aW5nc1wiXHJcblxyXG5leHBvcnQgY29uc3QgU1RBUl9TSVpFID0gMTZcclxuZXhwb3J0IGNvbnN0IEhBTEZfU1RBUl9MRU5HVEggPSBTVEFSX1NJWkUgLyAyXHJcblxyXG5leHBvcnQgY29uc3Qgc3RhcnNTMk4gPSAoUzogc3RyaW5nKSA9PiBOdW1iZXIoUykgKiAyXHJcbmV4cG9ydCBjb25zdCBzdGFyc04yUyA9IChOOiBudW1iZXIpID0+IChOIC8gMikudG9GaXhlZCgxKVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldFN0YXJzRnJvbVN0YXJzQ29udGFpbmVyID0gKHN0YXJzRWxlbWVudDogSFRNTFNwYW5FbGVtZW50KSA9PlxyXG4gICAgQXJyYXkuZnJvbShzdGFyc0VsZW1lbnQuY2hpbGRyZW4pIGFzIFNWR1NWR0VsZW1lbnRbXVxyXG5leHBvcnQgY29uc3QgZ2V0U3RhclN0b3BzRnJvbVN0YXIgPSAoc3RhcjogU1ZHU1ZHRWxlbWVudCkgPT5cclxuICAgIEFycmF5LmZyb20oc3Rhci5maXJzdENoaWxkIS5maXJzdENoaWxkIS5jaGlsZE5vZGVzKSBhcyBTdGFyU3RvcHNcclxuZXhwb3J0IGNvbnN0IGdldFN0YXJzU3RvcHNGcm9tU3RhcnNDb250YWluZXIgPSBmbG93KGdldFN0YXJzRnJvbVN0YXJzQ29udGFpbmVyLCBhLm1hcChnZXRTdGFyU3RvcHNGcm9tU3RhcikpXHJcblxyXG5leHBvcnQgY29uc3Qgc2V0U3RhcnNHcmFkaWVudEZyb21Db250YWluZXJCeVJhdGluZyA9IChyYXRpbmc6IG51bWJlcikgPT5cclxuICAgIGZsb3coZ2V0U3RhcnNTdG9wc0Zyb21TdGFyc0NvbnRhaW5lciwgc2V0U3RhcnNHcmFkaWVudEJ5UmF0aW5nKHJhdGluZykpXHJcblxyXG5leHBvcnQgY29uc3QgZ2V0U3RhcnNDb250YWluZXIgPSAoaWRTdWZmaXg6IHN0cmluZykgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHN0YXJzLSR7aWRTdWZmaXh9YCkgYXMgSFRNTFNwYW5FbGVtZW50XHJcbmV4cG9ydCBjb25zdCBnZXRTdGFycyA9IGZsb3coZ2V0U3RhcnNDb250YWluZXIsIGdldFN0YXJzRnJvbVN0YXJzQ29udGFpbmVyKVxyXG5leHBvcnQgY29uc3QgZ2V0U3RhcnNTdG9wcyA9IGZsb3coZ2V0U3RhcnNDb250YWluZXIsIGdldFN0YXJzU3RvcHNGcm9tU3RhcnNDb250YWluZXIpXHJcblxyXG5leHBvcnQgY29uc3QgZ2V0VHJhY2tMaXN0cyA9ICgpID0+IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRGl2RWxlbWVudD4oXCIubWFpbi10cmFja0xpc3QtaW5kZXhhYmxlXCIpKVxyXG5leHBvcnQgY29uc3QgZ2V0VHJhY2tMaXN0SGVhZGVyID0gKHRyYWNrTGlzdDogSFRNTERpdkVsZW1lbnQpID0+XHJcbiAgICB0cmFja0xpc3QucXVlcnlTZWxlY3RvcihcIi5tYWluLXRyYWNrTGlzdC10cmFja0xpc3RIZWFkZXJcIik/LmZpcnN0Q2hpbGQgYXMgSFRNTERpdkVsZW1lbnRcclxuZXhwb3J0IGNvbnN0IGdldFRyYWNrTGlzdFRyYWNrcyA9ICh0cmFja0xpc3Q6IEhUTUxEaXZFbGVtZW50KSA9PlxyXG4gICAgQXJyYXkuZnJvbSh0cmFja0xpc3QucXVlcnlTZWxlY3RvckFsbDxIVE1MRGl2RWxlbWVudD4oXCJkaXYubWFpbi10cmFja0xpc3QtdHJhY2tMaXN0Um93XCIpKVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldExhc3RDb2xJbmRleCA9IChwYXJlbnQ6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBsYXN0Q29sID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTERpdkVsZW1lbnQ+KFwiZGl2Lm1haW4tdHJhY2tMaXN0LXJvd1NlY3Rpb25FbmRcIikhXHJcbiAgICBjb25zdCBsYXN0Q29sSW5kZXggPSBOdW1iZXIobGFzdENvbC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbGluZGV4XCIpKVxyXG4gICAgcmV0dXJuIFtsYXN0Q29sSW5kZXgsIGxhc3RDb2xdIGFzIFtudW1iZXIsIEhUTUxEaXZFbGVtZW50XVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0Rmlyc3RQbHVzID0gKHBhcmVudDogSFRNTEVsZW1lbnQpID0+XHJcbiAgICBwYXJlbnQucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oXHJcbiAgICAgICAgXCIuQnV0dG9uLXNtLTE2LWJ1dHRvblRlcnRpYXJ5LWljb25Pbmx5LXVzZUJyb3dzZXJEZWZhdWx0Rm9jdXNTdHlsZSwgLkJ1dHRvbi10ZXh0QnJpZ2h0QWNjZW50LXNtLTE2LWJ1dHRvblRlcnRpYXJ5LWljb25Pbmx5LXVzZUJyb3dzZXJEZWZhdWx0Rm9jdXNTdHlsZVwiLFxyXG4gICAgKSFcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRUcmFja0xpc3RUcmFja1VyaSA9ICh0cmFjazogSFRNTERpdkVsZW1lbnQpID0+IChcclxuICAgICh0cmFjayA9IE9iamVjdC52YWx1ZXModHJhY2spWzBdLmNoaWxkLmNoaWxkLmNoaWxkLmNoaWxkKSxcclxuICAgICh0cmFjayBhcyBhbnkpLnBlbmRpbmdQcm9wcy51cmkgPz8gKHRyYWNrIGFzIGFueSkuY2hpbGQucGVuZGluZ1Byb3BzLnVyaVxyXG4pXHJcbiIsCiAgImltcG9ydCB7IHRhc2sgfSBmcm9tIFwiZnAtdHNcIlxyXG5pbXBvcnQgeyBjcmVhdGVQbGF0Rm9sZGVyIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC9hcGlcIlxyXG5pbXBvcnQgeyBTZXR0aW5nc1NlY3Rpb24gfSBmcm9tIFwiLi4vLi4vc2hhcmVkL3NldHRpbmdzXCJcclxuaW1wb3J0IHsgbG9hZFJhdGluZ3MgfSBmcm9tIFwiLi9yYXRpbmdzXCJcclxuaW1wb3J0IHsgUkFUSU5HU19GT0xERVJfTkFNRSB9IGZyb20gXCIuL3V0aWxcIlxyXG5pbXBvcnQgeyBTcG90aWZ5VVJJIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC91dGlsXCJcclxuXHJcbmNvbnN0IHNldHRpbmdzID0gbmV3IFNldHRpbmdzU2VjdGlvbihcIlN0YXIgUmF0aW5nc1wiLCBcInN0YXItcmF0aW5nc1wiKVxyXG4gICAgLmFkZFRvZ2dsZShcImhpZGVIZWFydHNcIiwgXCJIaWRlIEhlYXJ0c1wiKVxyXG4gICAgLmFkZFRvZ2dsZShcImhhbGZTdGFyUmF0aW5nc1wiLCBcIkhhbGYgc3RhciByYXRpbmdzXCIpXHJcbiAgICAuYWRkVG9nZ2xlKFwic2hvd0luVHJhY2tMaXN0c1wiLCBcIlNob3cgaW4gdHJhY2tsaXN0c1wiKVxyXG4gICAgLmFkZFRvZ2dsZShcIm5vd1BsYXlpbmdTdGFyc09uUmlnaHRcIiwgXCJQbGFjZSB0aGUgc3RhcnMgZm9yIG5vdyBwbGF5aW5nIHRyYWNrIG9uIHRoZSByaWdodFwiKVxyXG4gICAgLmFkZElucHV0KFwiaGVhcnRUaHJlc2hvbGRcIiwgXCJUaHJlc2hvbGQgZm9yIGxpa2luZyB0cmFrY3NcIiwgdGFzay5vZihcIjMuNVwiKSlcclxuICAgIC5hZGRJbnB1dChcInNraXBUaHJlc2hvbGRcIiwgXCJUaHJlc2hvbGQgZm9yIHNraXBwaW5nIHRyYWtjc1wiLCB0YXNrLm9mKFwiMS41XCIpKVxyXG4gICAgLmFkZElucHV0KFxyXG4gICAgICAgIFwicmF0aW5nc0ZvbGRlclVyaVwiLFxyXG4gICAgICAgIFwiUmF0aW5ncyBmb2xkZXIgdXJpXCIsXHJcbiAgICAgICAgYXN5bmMgKCkgPT4gKGF3YWl0IGNyZWF0ZVBsYXRGb2xkZXIoUkFUSU5HU19GT0xERVJfTkFNRSkpLnVyaSxcclxuICAgICAgICBsb2FkUmF0aW5ncyxcclxuICAgIClcclxuXHJcbnNldHRpbmdzLnB1c2hTZXR0aW5ncygpXHJcblxyXG5leHBvcnQgY29uc3QgQ09ORklHID0gc2V0dGluZ3MudG9PYmplY3QoKSBhcyB7XHJcbiAgICBoaWRlSGVhcnRzOiBib29sZWFuXHJcbiAgICBoYWxmU3RhclJhdGluZ3M6IHN0cmluZ1xyXG4gICAgc2hvd0luVHJhY2tMaXN0czogYm9vbGVhblxyXG4gICAgbm93UGxheWluZ1N0YXJzT25SaWdodDogYm9vbGVhblxyXG4gICAgaGVhcnRUaHJlc2hvbGQ6IHN0cmluZ1xyXG4gICAgc2tpcFRocmVzaG9sZDogc3RyaW5nXHJcbiAgICByYXRpbmdzRm9sZGVyVXJpOiBTcG90aWZ5VVJJXHJcbn1cclxuIiwKICAiaW1wb3J0IHsgYXJyYXkgYXMgYSwgcmVhZG9ubHlBcnJheSwgcmVjb3JkIH0gZnJvbSBcImZwLXRzXCJcclxuaW1wb3J0IHsgcmFuZ2UgfSBmcm9tIFwiZnAtdHMvTm9uRW1wdHlBcnJheVwiXHJcbmltcG9ydCB7IGZsb3cgYXMgZiwgZmxpcCwgcGlwZSBhcyBwIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCJcclxuaW1wb3J0IHsgZmV0Y2hQbGF0Rm9sZGVyLCBmZXRjaFBsYXRQbGF5bGlzdENvbnRlbnRzLCBmZXRjaFBsYXRSb290Rm9sZGVyIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC9hcGlcIlxyXG5pbXBvcnQgeyBwTWNoYWluIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC9mcFwiXHJcbmltcG9ydCB7IFNwb3RpZnlVUkkgfSBmcm9tIFwiLi4vLi4vc2hhcmVkL3V0aWxcIlxyXG5pbXBvcnQgeyBDT05GSUcgfSBmcm9tIFwiLi9zZXR0aW5nc1wiXHJcbmltcG9ydCB7IFN0YXJTdG9wcywgY2FsY3VsYXRlUmF0aW5nRnJvbU1vdXNlRXZlbnQsIGNyZWF0ZVN0YXJzLCBvblN0YXJDbGljaywgc2V0U3RhcnNHcmFkaWVudEJ5UmF0aW5nIH0gZnJvbSBcIi4vc3RhcnNcIlxyXG5pbXBvcnQgeyBzdGFyc04yUyB9IGZyb20gXCIuL3V0aWxcIlxyXG5cclxuY29uc3QgdyA9IChuOiBudW1iZXIpID0+IE1hdGguZXhwKG4pXHJcbmV4cG9ydCBjb25zdCBhZ2dyZWdhdGVSYXRpbmdzID0gKHVyaXM6IFNwb3RpZnlVUklbXSkgPT5cclxuICAgIHAoXHJcbiAgICAgICAgdXJpcyxcclxuICAgICAgICBhLm1hcCh1cmkgPT4gdHJhY2tzUmF0aW5nc1t1cmldKSxcclxuICAgICAgICBhLmZpbHRlcihCb29sZWFuKSxcclxuICAgICAgICBhLm1hcChyID0+IFtyLCB3KHIpXSBhcyBjb25zdCksXHJcbiAgICAgICAgcmVhZG9ubHlBcnJheS51bnppcDxudW1iZXIsIG51bWJlcj4sXHJcbiAgICAgICAgKFtycywgd3JzXSkgPT5cclxuICAgICAgICAgICAgcmVhZG9ubHlBcnJheS5yZWR1Y2VXaXRoSW5kZXgoMCwgKGksIHMsIHI6IG51bWJlcikgPT4gcyArIHIgKiB3cnNbaV0pKHJzKSAvXHJcbiAgICAgICAgICAgICAgICByZWFkb25seUFycmF5LnJlZHVjZSgwLCAocywgd3I6IG51bWJlcikgPT4gcyArIHdyKSh3cnMpIHx8IDAsXHJcbiAgICApXHJcblxyXG5leHBvcnQgY29uc3QgYWRkUmF0aW5nc0xpc3RlbmVyc1RvU3RhcnMgPSAoXHJcbiAgICBbc3RhcnNDb250YWluZXIsIHN0YXJzQ29uc3RydWN0c106IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZVN0YXJzPixcclxuICAgIGdldFRyYWNrVXJpOiAoKSA9PiBTcG90aWZ5VVJJLFxyXG4pID0+IHtcclxuICAgIGNvbnN0IFtzdGFyc0VsZW1lbnRzLCBzdGFyc1NWR1N0b3BzXSA9IHAoc3RhcnNDb25zdHJ1Y3RzLCByZWFkb25seUFycmF5LnVuemlwKSBhcyBbU1ZHU1ZHRWxlbWVudFtdLCBTdGFyU3RvcHNbXV1cclxuXHJcbiAgICBzdGFyc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT5cclxuICAgICAgICBzZXRTdGFyc0dyYWRpZW50QnlSYXRpbmcodHJhY2tzUmF0aW5nc1tnZXRUcmFja1VyaSgpXSA/PyAwKShzdGFyc1NWR1N0b3BzKSxcclxuICAgIClcclxuXHJcbiAgICBwKFxyXG4gICAgICAgIHN0YXJzRWxlbWVudHMsXHJcbiAgICAgICAgcmVhZG9ubHlBcnJheS5tYXBXaXRoSW5kZXgoKG50aCwgc3RhckVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgc3RhckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgIFwibW91c2Vtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICBmKGNhbGN1bGF0ZVJhdGluZ0Zyb21Nb3VzZUV2ZW50KHN0YXJFbGVtZW50LCBudGgpLCBmbGlwKHNldFN0YXJzR3JhZGllbnRCeVJhdGluZykoc3RhcnNTVkdTdG9wcykpLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBzdGFyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25TdGFyQ2xpY2sobnRoLCBzdGFyc0VsZW1lbnRzW250aF0sIGdldFRyYWNrVXJpKSlcclxuICAgICAgICB9KSxcclxuICAgIClcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGxvYWRSYXRpbmdzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcmF0aW5nc0ZvbGRlciA9IGF3YWl0IGZldGNoUGxhdEZvbGRlcihDT05GSUcucmF0aW5nc0ZvbGRlclVyaSlcclxuXHJcbiAgICBjb25zdCBzdGFyc1MyTmFycmF5ID0gcChcclxuICAgICAgICByYW5nZSgwLCAxMCksXHJcbiAgICAgICAgYS5tYXAocyA9PiBbc3RhcnNOMlMocyksIHNdIGFzIFtzdHJpbmcsIG51bWJlcl0pLFxyXG4gICAgICAgIHJlY29yZC5mcm9tRW50cmllcyxcclxuICAgIClcclxuXHJcbiAgICBwbGF5bGlzdFVyaXMgPSBwKFxyXG4gICAgICAgIHJhdGluZ3NGb2xkZXIhLml0ZW1zISxcclxuICAgICAgICBhLm1hcChwID0+IFtwLnR5cGUsIHAudXJpLCBzdGFyc1MyTmFycmF5W3AubmFtZSFdXSBhcyBbc3RyaW5nLCBTcG90aWZ5VVJJLCBudW1iZXJdKSxcclxuICAgICAgICBhLnJlZHVjZShcclxuICAgICAgICAgICAgW10gYXMgU3BvdGlmeVVSSVtdLFxyXG4gICAgICAgICAgICAoYWNjLCBbdHlwZSwgdXJpLCBzdGFyc05dKSA9PiAodHlwZSA9PT0gXCJwbGF5bGlzdFwiICYmIHN0YXJzTiA/IChhY2Nbc3RhcnNOXSA9IHVyaSkgOiBbXSwgYWNjKSxcclxuICAgICAgICApLFxyXG4gICAgKVxyXG5cclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGdsb2JhbFRoaXMudHJhY2tzUmF0aW5ncyA9IHRyYWNrc1JhdGluZ3MgPSBhd2FpdCBwKFxyXG4gICAgICAgIHBsYXlsaXN0VXJpcyxcclxuICAgICAgICBhLm1hcChmZXRjaFBsYXRQbGF5bGlzdENvbnRlbnRzKSxcclxuICAgICAgICBwcyA9PiBQcm9taXNlLmFsbChwcyksIC8vIFByb21pc2UuYWxsIGZsaXBzIGVtcHR5IHRvIHVuZGVmaW5lZFxyXG4gICAgICAgIHBNY2hhaW4oYS5tYXAodHJhY2tzID0+IHRyYWNrcyA/PyBbXSkpLFxyXG4gICAgICAgIHBNY2hhaW4oYS5tYXAoYS5tYXAodCA9PiB0LnVyaSkpKSxcclxuICAgICAgICBwTWNoYWluKGEuZmxhdE1hcCgodHJhY2tVcmlzLCByYXRpbmcpID0+IHRyYWNrVXJpcy5tYXAodHJhY2tVcmkgPT4gW3RyYWNrVXJpLCByYXRpbmddIGFzIGNvbnN0KSkpLFxyXG4gICAgICAgIHBNY2hhaW4oXHJcbiAgICAgICAgICAgIGEucmVkdWNlKHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4sIChhY2MsIFt0cmFja1VyaSwgcmF0aW5nXSkgPT5cclxuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYWNjLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgW3RyYWNrVXJpXTogTWF0aC5tYXgocmF0aW5nLCBhY2NbdHJhY2tVcmldID8/IDApLFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgKSxcclxuICAgIClcclxufVxyXG5cclxuZXhwb3J0IGxldCBwbGF5bGlzdFVyaXM6IFNwb3RpZnlVUklbXSA9IFtdXHJcbmV4cG9ydCBsZXQgdHJhY2tzUmF0aW5nczogUmVjb3JkPFNwb3RpZnlVUkksIG51bWJlcj4gPSB7fVxyXG4iLAogICJpbXBvcnQgeyBhcnJheSBhcyBhIH0gZnJvbSBcImZwLXRzXCJcclxuaW1wb3J0IHsgYW55UGFzcyB9IGZyb20gXCJmcC10cy1zdGQvUHJlZGljYXRlXCJcclxuaW1wb3J0IHsgZmxvdyBhcyBmLCBpZGVudGl0eSwgcGlwZSBhcyBwIH0gZnJvbSBcImZwLXRzL2Z1bmN0aW9uXCJcclxuaW1wb3J0IHsgZ2V0IH0gZnJvbSBcInNwZWN0YWNsZXMtdHNcIlxyXG5pbXBvcnQgeyBmZXRjaEdRTEFsYnVtLCBmZXRjaFBsYXRBcnRpc3RMaWtlZFRyYWNrcywgZmV0Y2hQbGF0UGxheWxpc3RDb250ZW50cyB9IGZyb20gXCIuLi8uLi9zaGFyZWQvYXBpXCJcclxuaW1wb3J0IHsgU3BvdGlmeVVSSSwgd2FpdEZvckVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vc2hhcmVkL3V0aWxcIlxyXG5pbXBvcnQgeyBhZGRSYXRpbmdzTGlzdGVuZXJzVG9TdGFycywgYWdncmVnYXRlUmF0aW5ncywgbG9hZFJhdGluZ3MsIHRyYWNrc1JhdGluZ3MgfSBmcm9tIFwiLi9yYXRpbmdzXCJcclxuaW1wb3J0IHsgQ09ORklHIH0gZnJvbSBcIi4vc2V0dGluZ3NcIlxyXG5pbXBvcnQgeyBTdGFyU3RvcHMsIGNyZWF0ZVN0YXJzLCBzZXRTdGFyc0dyYWRpZW50QnlSYXRpbmcgfSBmcm9tIFwiLi9zdGFyc1wiXHJcbmltcG9ydCB7XHJcbiAgICBTVEFSX1NJWkUsXHJcbiAgICBnZXRGaXJzdFBsdXMsXHJcbiAgICBnZXRMYXN0Q29sSW5kZXgsXHJcbiAgICBnZXRTdGFyc0NvbnRhaW5lcixcclxuICAgIGdldFN0YXJzU3RvcHMsXHJcbiAgICBnZXRUcmFja0xpc3RIZWFkZXIsXHJcbiAgICBnZXRUcmFja0xpc3RUcmFja1VyaSxcclxuICAgIGdldFRyYWNrTGlzdFRyYWNrcyxcclxuICAgIGdldFRyYWNrTGlzdHMsXHJcbiAgICBzZXRTdGFyc0dyYWRpZW50RnJvbUNvbnRhaW5lckJ5UmF0aW5nLFxyXG4gICAgc3RhcnNTMk4sXHJcbn0gZnJvbSBcIi4vdXRpbFwiXHJcblxyXG5jb25zdCB7IFVSSSB9ID0gU3BpY2V0aWZ5XHJcblxyXG5jb25zdCBjdXN0b21UcmFja0xpc3RDb2xDc3MgPSBbXHJcbiAgICBudWxsLFxyXG4gICAgbnVsbCxcclxuICAgIG51bGwsXHJcbiAgICBudWxsLFxyXG4gICAgXCJbaW5kZXhdIDE2cHggW2ZpcnN0XSA0ZnIgW3ZhcjFdIDJmciBbdmFyMl0gMWZyIFtsYXN0XSBtaW5tYXgoMTIwcHgsMWZyKVwiLFxyXG4gICAgXCJbaW5kZXhdIDE2cHggW2ZpcnN0XSA2ZnIgW3ZhcjFdIDRmciBbdmFyMl0gM2ZyIFt2YXIzXSAyZnIgW2xhc3RdIG1pbm1heCgxMjBweCwxZnIpXCIsXHJcbiAgICBcIltpbmRleF0gMTZweCBbZmlyc3RdIDZmciBbdmFyMV0gNGZyIFt2YXIyXSAzZnIgW3ZhcjNdIG1pbm1heCgxMjBweCwyZnIpIFt2YXIzXSAyZnIgW2xhc3RdIG1pbm1heCgxMjBweCwxZnIpXCIsXHJcbl1cclxuXHJcbmxvYWRSYXRpbmdzKClcclxuXHJcbi8vIFRSQUNLTElTVFNcclxuXHJcbmNvbnN0IHVwZGF0ZVRyYWNrTGlzdFN0YXJzID0gZihcclxuICAgIGdldFRyYWNrTGlzdHMsXHJcbiAgICBhLm1hcCh0cmFja0xpc3QgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRyYWNrTGlzdFRyYWNrcyA9IGdldFRyYWNrTGlzdFRyYWNrcyh0cmFja0xpc3QpXHJcbiAgICAgICAgaWYgKHRyYWNrTGlzdFRyYWNrcy5sZW5ndGggPT09IDApIHJldHVyblxyXG5cclxuICAgICAgICBjb25zdCBoYXNTdGFycyA9IChwYXJlbnQ6IEhUTUxFbGVtZW50KSA9PiBwYXJlbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInN0YXJzXCIpLmxlbmd0aCA+IDBcclxuICAgICAgICBjb25zdCBsb2NhdGlvblVyaSA9IFVSSS5mcm9tU3RyaW5nKFNwaWNldGlmeS5QbGF0Zm9ybS5IaXN0b3J5LmxvY2F0aW9uLnBhdGhuYW1lKVxyXG5cclxuICAgICAgICBjb25zdCBmaXJzdEVsZW1lbnQgPSBVUkkuaXNBcnRpc3QobG9jYXRpb25VcmkhKVxyXG4gICAgICAgICAgICA/IHRyYWNrTGlzdFRyYWNrc1swXVxyXG4gICAgICAgICAgICA6IGdldFRyYWNrTGlzdEhlYWRlcih0cmFja0xpc3QpID8/IHRyYWNrTGlzdFRyYWNrc1swXVxyXG5cclxuICAgICAgICBjb25zdCBbbGFzdENvbEluZGV4XSA9IGdldExhc3RDb2xJbmRleChmaXJzdEVsZW1lbnQpXHJcbiAgICAgICAgY29uc3QgbmV3VHJhY2tMaXN0Q29sQ3NzID0gY3VzdG9tVHJhY2tMaXN0Q29sQ3NzW2xhc3RDb2xJbmRleCAtIHAoZmlyc3RFbGVtZW50LCBoYXNTdGFycywgTnVtYmVyKV1cclxuXHJcbiAgICAgICAgaWYgKCFuZXdUcmFja0xpc3RDb2xDc3MpIHJldHVyblxyXG4gICAgICAgIGZpcnN0RWxlbWVudC5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gbmV3VHJhY2tMaXN0Q29sQ3NzXHJcblxyXG4gICAgICAgIHAoXHJcbiAgICAgICAgICAgIHRyYWNrTGlzdFRyYWNrcyxcclxuICAgICAgICAgICAgYS5tYXAodHJhY2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVhcnQgPSBnZXRGaXJzdFBsdXModHJhY2spXHJcbiAgICAgICAgICAgICAgICBpZiAoaGVhcnQpIGhlYXJ0LnN0eWxlLmRpc3BsYXkgPSBDT05GSUcuaGlkZUhlYXJ0cyA/IFwibm9uZVwiIDogXCJmbGV4XCJcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzU3RhcnModHJhY2spKSByZXR1cm5cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcmF0aW5nQ29sdW1uOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSB0cmFjay5xdWVyeVNlbGVjdG9yKFwiLnN0YXJSYXRpbmdzXCIpXHJcbiAgICAgICAgICAgICAgICBpZiAoIXJhdGluZ0NvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RDb2x1bW4gPSB0cmFjay5xdWVyeVNlbGVjdG9yKFwiLm1haW4tdHJhY2tMaXN0LXJvd1NlY3Rpb25FbmRcIilcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IE51bWJlcihsYXN0Q29sdW1uPy5nZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbGluZGV4XCIpKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByYXRpbmdDb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW5nQ29sdW1uLnNldEF0dHJpYnV0ZShcImFyaWEtY29saW5kZXhcIiwgU3RyaW5nKGNvbEluZGV4KSlcclxuICAgICAgICAgICAgICAgICAgICBsYXN0Q29sdW1uPy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbGluZGV4XCIsIFN0cmluZyhjb2xJbmRleCArIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJhdGluZ0NvbHVtbi5yb2xlID0gXCJncmlkY2VsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW5nQ29sdW1uLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxyXG4gICAgICAgICAgICAgICAgICAgIHJhdGluZ0NvbHVtbi5jbGFzc0xpc3QuYWRkKFwibWFpbi10cmFja0xpc3Qtcm93U2VjdGlvblZhcmlhYmxlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW5nQ29sdW1uLmNsYXNzTGlzdC5hZGQoXCJzdGFyUmF0aW5nc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrLmluc2VydEJlZm9yZShyYXRpbmdDb2x1bW4sIGxhc3RDb2x1bW4pXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhY2suc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9IG5ld1RyYWNrTGlzdENvbENzcyFcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFja1VyaSA9IGdldFRyYWNrTGlzdFRyYWNrVXJpKHRyYWNrKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdXJpID0gVVJJLmZyb21TdHJpbmcodHJhY2tVcmkpXHJcblxyXG4gICAgICAgICAgICAgICAgLy9UT0RPOiBMb2NhbCBUcmFja3Mgc3VwcG9ydFxyXG4gICAgICAgICAgICAgICAgaWYgKCFVUkkuaXNUcmFjayh1cmkhKSkgcmV0dXJuXHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgW3N0YXJzQ29udGFpbmVyLCBzdGFyc0NvbnN0cnVjdHNdID0gY3JlYXRlU3RhcnModXJpIS5pZCEsIFNUQVJfU0laRSlcclxuICAgICAgICAgICAgICAgIHJhdGluZ0NvbHVtbi5hcHBlbmRDaGlsZChzdGFyc0NvbnRhaW5lcilcclxuICAgICAgICAgICAgICAgIHAoXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnNDb25zdHJ1Y3RzLFxyXG4gICAgICAgICAgICAgICAgICAgIGEudW56aXAsXHJcbiAgICAgICAgICAgICAgICAgICAgKFtfLCBzdGFyc1N0b3BzXSkgPT4gc3RhcnNTdG9wcyxcclxuICAgICAgICAgICAgICAgICAgICBzZXRTdGFyc0dyYWRpZW50QnlSYXRpbmcodHJhY2tzUmF0aW5nc1t0cmFja1VyaV0gPz8gMCksXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBhZGRSYXRpbmdzTGlzdGVuZXJzVG9TdGFycyhbc3RhcnNDb250YWluZXIsIHN0YXJzQ29uc3RydWN0c10sICgpID0+IHRyYWNrVXJpKVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldFZpc2libGVDb25kID0gKCkgPT5cclxuICAgICAgICAgICAgICAgICAgICAoc3RhcnNDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IHRyYWNrc1JhdGluZ3NbdHJhY2tVcmldID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiKVxyXG5cclxuICAgICAgICAgICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4gKHN0YXJzQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIikpXHJcbiAgICAgICAgICAgICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgc2V0VmlzaWJsZUNvbmQpXHJcbiAgICAgICAgICAgICAgICBzZXRWaXNpYmxlQ29uZCgpXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIClcclxuICAgIH0pLFxyXG4pXHJcblxyXG5sZXQgbWFpbkVsZW1lbnQ6IEhUTUxFbGVtZW50XHJcbmNvbnN0IG1haW5FbGVtZW50T2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiAoQ09ORklHLnNob3dJblRyYWNrTGlzdHMgPyB1cGRhdGVUcmFja0xpc3RTdGFycygpIDogdW5kZWZpbmVkKSlcclxuXHJcbm5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcclxuICAgIGNvbnN0IG9sZE1haW5FbGVtZW50ID0gbWFpbkVsZW1lbnRcclxuICAgIG1haW5FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oXCJtYWluXCIpIVxyXG4gICAgaWYgKG1haW5FbGVtZW50ICYmICFtYWluRWxlbWVudC5pc0VxdWFsTm9kZShvbGRNYWluRWxlbWVudCkpIHtcclxuICAgICAgICBpZiAob2xkTWFpbkVsZW1lbnQpIG1haW5FbGVtZW50T2JzZXJ2ZXIuZGlzY29ubmVjdCgpXHJcbiAgICAgICAgbWFpbkVsZW1lbnRPYnNlcnZlci5vYnNlcnZlKG1haW5FbGVtZW50LCB7XHJcbiAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgc3VidHJlZTogdHJ1ZSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59KS5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcclxuICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgIHN1YnRyZWU6IHRydWUsXHJcbn0pXHJcblxyXG4vLyBDT0xMRUNUSU9OXHJcblxyXG5jb25zdCB1cGRhdGVDb2xsZWN0aW9uU3RhcnMgPSBhc3luYyAocGF0aG5hbWU6IFNwb3RpZnlVUkksIHN0YXJzU3RvcHM/OiBTdGFyU3RvcHNbXSkgPT4ge1xyXG4gICAgY29uc3QgdXJpID0gVVJJLmZyb21TdHJpbmcocGF0aG5hbWUpIGFzIFJlcXVpcmVkPFNwaWNldGlmeS5VUkk+XHJcblxyXG4gICAgaWYgKCFzdGFyc1N0b3BzKSBzdGFyc1N0b3BzID0gZ2V0U3RhcnNTdG9wcyhcImNvbGxlY3Rpb25cIilcclxuXHJcbiAgICBsZXQgdXJpc1xyXG4gICAgaWYgKFVSSS5pc0FsYnVtKHVyaSkpXHJcbiAgICAgICAgdXJpcyA9IHAoYXdhaXQgZmV0Y2hHUUxBbGJ1bShgJHt1cml9YCksIGlkZW50aXR5LCBnZXQoXCJ0cmFja3MuaXRlbXNcIiksIGEubWFwKGYoaWRlbnRpdHksIGdldChcInRyYWNrLnVyaVwiKSkpKVxyXG4gICAgZWxzZSBpZiAoVVJJLmlzQXJ0aXN0KHVyaSkpIHVyaXMgPSBwKGF3YWl0IGZldGNoUGxhdEFydGlzdExpa2VkVHJhY2tzKGAke3VyaX1gKSwgYS5tYXAoZ2V0KFwidXJpXCIpKSlcclxuICAgIGVsc2UgaWYgKFVSSS5pc1BsYXlsaXN0VjFPclYyKHVyaSkpIHVyaXMgPSBwKGF3YWl0IGZldGNoUGxhdFBsYXlsaXN0Q29udGVudHMoYCR7dXJpfWApLCBhLm1hcChnZXQoXCJ1cmlcIikpKVxyXG4gICAgZWxzZSB0aHJvdyBcIm1lIG91dCB0aGUgd2luZG93XCJcclxuXHJcbiAgICBzZXRTdGFyc0dyYWRpZW50QnlSYXRpbmcoYWdncmVnYXRlUmF0aW5ncyh1cmlzKSkoc3RhcnNTdG9wcylcclxufVxyXG5cclxubGV0IGxhc3RDb2xsZWN0aW9uUGxheUJ1dHRvbjogRWxlbWVudFxyXG5TcGljZXRpZnkuUGxhdGZvcm0uSGlzdG9yeS5saXN0ZW4oYXN5bmMgKHsgcGF0aG5hbWUgfTogeyBwYXRobmFtZTogc3RyaW5nIH0pID0+IHtcclxuICAgIGNvbnN0IHBhZ2VIYXNIZWFydCA9IGFueVBhc3MoW1VSSS5pc0FsYnVtLCBVUkkuaXNBcnRpc3QsIFVSSS5pc1BsYXlsaXN0VjFPclYyXSlcclxuICAgIGlmICghcGFnZUhhc0hlYXJ0KHBhdGhuYW1lKSkgcmV0dXJuXHJcblxyXG4gICAgbGFzdENvbGxlY3Rpb25QbGF5QnV0dG9uID0gKGF3YWl0IHdhaXRGb3JFbGVtZW50KFxyXG4gICAgICAgIFwiLm1haW4tYWN0aW9uQmFyLUFjdGlvbkJhciAubWFpbi1wbGF5QnV0dG9uLVBsYXlCdXR0b25cIixcclxuICAgICAgICAwLFxyXG4gICAgICAgIGRvY3VtZW50LmJvZHksXHJcbiAgICAgICAgbGFzdENvbGxlY3Rpb25QbGF5QnV0dG9uLFxyXG4gICAgKSkhXHJcblxyXG4gICAgY29uc3QgW2NvbGxlY3Rpb25TdGFyc0NvbnRhaW5lciwgY29sbGVjdGlvblN0YXJzQ29uc3RydWN0c10gPSBjcmVhdGVTdGFycyhcImNvbGxlY3Rpb25cIiwgU1RBUl9TSVpFICogMilcclxuICAgIGdldFN0YXJzQ29udGFpbmVyKFwiY29sbGVjdGlvblwiKT8ucmVtb3ZlKClcclxuICAgIGxhc3RDb2xsZWN0aW9uUGxheUJ1dHRvbiEuYWZ0ZXIoY29sbGVjdGlvblN0YXJzQ29udGFpbmVyKVxyXG5cclxuICAgIGNvbnN0IGNvbGxlY3Rpb25TdGFyc1N0b3BzID0gcChjb2xsZWN0aW9uU3RhcnNDb25zdHJ1Y3RzLCBhLnVuemlwLCAoW18sIHN0YXJzU3RvcHNdKSA9PiBzdGFyc1N0b3BzKVxyXG5cclxuICAgIHVwZGF0ZUNvbGxlY3Rpb25TdGFycyhwYXRobmFtZSwgY29sbGVjdGlvblN0YXJzU3RvcHMpXHJcbn0pXHJcblxyXG4vLyBOT1cgUExBWUlOR1xyXG5cclxuY29uc3QgY3JlYXRlTm93UGxheWluZ1N0YXJzID0gKCkgPT4ge1xyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3RhcnMtbm93LXBsYXlpbmdcIikubGVuZ3RoICE9PSAwKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBub3dQbGF5aW5nRWxlbWVudFNlbGVjdG9yID0gQ09ORklHLm5vd1BsYXlpbmdTdGFyc09uUmlnaHRcclxuICAgICAgICA/IFwiLm1haW4tbm93UGxheWluZ0Jhci1leHRyYUNvbnRyb2xzXCJcclxuICAgICAgICA6IFwiLm1haW4tbm93UGxheWluZ1dpZGdldC10cmFja0luZm9cIlxyXG4gICAgY29uc3Qgbm93UGxheWluZ0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5vd1BsYXlpbmdFbGVtZW50U2VsZWN0b3IpXHJcbiAgICBpZiAoIW5vd1BsYXlpbmdFbGVtZW50KSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBbbm93UGxheWluZ1N0YXJzQ29udGFpbmVyLCBub3dQbGF5aW5nU3RhckNvbnN0cnVjdF0gPSBjcmVhdGVTdGFycyhcIm5vdy1wbGF5aW5nXCIsIFNUQVJfU0laRSlcclxuICAgIG5vd1BsYXlpbmdTdGFyc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcclxuICAgIG5vd1BsYXlpbmdTdGFyc0NvbnRhaW5lci5zdHlsZS5tYXJnaW5MZWZ0ID0gXCI4cHhcIlxyXG4gICAgbm93UGxheWluZ1N0YXJzQ29udGFpbmVyLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCI4cHhcIlxyXG5cclxuICAgIGlmICghQ09ORklHLm5vd1BsYXlpbmdTdGFyc09uUmlnaHQpIG5vd1BsYXlpbmdFbGVtZW50LmFmdGVyKG5vd1BsYXlpbmdTdGFyc0NvbnRhaW5lcilcclxuICAgIGVsc2Ugbm93UGxheWluZ0VsZW1lbnQucHJlcGVuZChub3dQbGF5aW5nU3RhcnNDb250YWluZXIpXHJcblxyXG4gICAgYWRkUmF0aW5nc0xpc3RlbmVyc1RvU3RhcnMoXHJcbiAgICAgICAgW25vd1BsYXlpbmdTdGFyc0NvbnRhaW5lciwgbm93UGxheWluZ1N0YXJDb25zdHJ1Y3RdLFxyXG4gICAgICAgICgpID0+IFNwaWNldGlmeS5QbGF5ZXIuZGF0YS50cmFjaz8udXJpISxcclxuICAgIClcclxufVxyXG5cclxuY3JlYXRlTm93UGxheWluZ1N0YXJzKClcclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVOb3dQbGF5aW5nU3RhcnMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB0cmFja1VyaSA9IFNwaWNldGlmeS5QbGF5ZXIuZGF0YS50cmFjaz8udXJpIVxyXG4gICAgY29uc3Qgbm93UGxheWluZ1N0YXJzQ29udGFpbmVyID0gZ2V0U3RhcnNDb250YWluZXIoXCJub3ctcGxheWluZ1wiKVxyXG5cclxuICAgIG5vd1BsYXlpbmdTdGFyc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gU3BpY2V0aWZ5LlVSSS5pc1RyYWNrKHRyYWNrVXJpKSA/IFwiZmxleFwiIDogXCJub25lXCJcclxuXHJcbiAgICBwKG5vd1BsYXlpbmdTdGFyc0NvbnRhaW5lciwgc2V0U3RhcnNHcmFkaWVudEZyb21Db250YWluZXJCeVJhdGluZyh0cmFja3NSYXRpbmdzW3RyYWNrVXJpXSA/PyAwKSlcclxufVxyXG5cclxuU3BpY2V0aWZ5LlBsYXllci5hZGRFdmVudExpc3RlbmVyKFwic29uZ2NoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICBjb25zdCB0cmFja1VyaSA9IFNwaWNldGlmeS5QbGF5ZXIuZGF0YS50cmFjaz8udXJpIVxyXG4gICAgaWYgKFxyXG4gICAgICAgIE51bWJlcihDT05GSUcuc2tpcFRocmVzaG9sZCkgJiZcclxuICAgICAgICAodHJhY2tzUmF0aW5nc1t0cmFja1VyaV0gfHwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpIDw9IHN0YXJzUzJOKENPTkZJRy5za2lwVGhyZXNob2xkKVxyXG4gICAgKVxyXG4gICAgICAgIHJldHVybiBTcGljZXRpZnkuUGxheWVyLm5leHQoKVxyXG5cclxuICAgIHVwZGF0ZU5vd1BsYXlpbmdTdGFycygpXHJcbn0pXHJcbnVwZGF0ZU5vd1BsYXlpbmdTdGFycygpXHJcbiIKICBdLAogICJtYXBwaW5ncyI6ICJjQW9JQSxJQUFTLFdBQVEsQ0FBQyxFQUFHLENBQ2pCLE9BQU8sR0FVRixXQUFRLENBQUMsRUFBRyxDQUNqQixlQUFnQixFQUFHLENBQUUsT0FBTyxJQWlDdkIsV0FBSSxDQUFDLEVBQUcsQ0FDYixlQUFnQixFQUFHLENBQ2YsSUFBSSxFQUFPLENBQUMsRUFDWixRQUFTLEVBQUssRUFBRyxFQUFLLFVBQVUsT0FBUSxJQUNwQyxFQUFLLEdBQU0sVUFBVSxHQUV6QixHQUFJLEVBQUssT0FBUyxFQUNkLE9BQU8sRUFBRSxFQUFLLEdBQUksRUFBSyxFQUFFLEVBRTdCLGVBQWdCLENBQUMsRUFBRyxDQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBSyxFQUFFLEtBSXhDLFdBQUksQ0FBQyxFQUFJLEVBQUksRUFBSSxFQUFJLEVBQUksRUFBSSxFQUFJLEVBQUksRUFBSSxDQUM5QyxPQUFRLFVBQVUsYUFDVCxFQUNELE9BQU8sT0FDTixFQUNELGVBQWdCLEVBQUcsQ0FDZixPQUFPLEVBQUcsRUFBRyxNQUFNLEtBQU0sU0FBUyxDQUFDLFFBRXRDLEVBQ0QsZUFBZ0IsRUFBRyxDQUNmLE9BQU8sRUFBRyxFQUFHLEVBQUcsTUFBTSxLQUFNLFNBQVMsQ0FBQyxDQUFDLFFBRTFDLEVBQ0QsZUFBZ0IsRUFBRyxDQUNmLE9BQU8sRUFBRyxFQUFHLEVBQUcsRUFBRyxNQUFNLEtBQU0sU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUU5QyxFQUNELGVBQWdCLEVBQUcsQ0FDZixPQUFPLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxNQUFNLEtBQU0sU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBRWxELEVBQ0QsZUFBZ0IsRUFBRyxDQUNmLE9BQU8sRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsTUFBTSxLQUFNLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBRXRELEVBQ0QsZUFBZ0IsRUFBRyxDQUNmLE9BQU8sRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxNQUFNLEtBQU0sU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUUxRCxFQUNELGVBQWdCLEVBQUcsQ0FDZixPQUFPLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxNQUFNLEtBQU0sU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBRTlELEVBQ0QsZUFBZ0IsRUFBRyxDQUNmLE9BQU8sRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsTUFBTSxLQUFNLFNB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LEdBQU0sRUFBTSxFQUFLLE1BQWEsSUFBUyxZQUFjLEVBQVUsRUFBSSxHQUFVLEVBQU8sQ0FBQyxFQUFHLEVBQzdGLENBQ0osRUFHQSxXQUFXLGNBQWdCLEdBQWdCLE1BQU0sRUFDN0MsR0FDQSxFQUFFLElBQUksRUFBeUIsRUFDL0IsS0FBTSxRQUFRLElBQUksQ0FBRSxFQUNwQixHQUFRLEVBQUUsSUFBSSxLQUFVLEdBQVUsQ0FBQyxDQUFDLENBQUMsRUFDckMsR0FBUSxFQUFFLElBQUksRUFBRSxJQUFJLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUNoQyxHQUFRLEVBQUUsUUFBUSxDQUFDLEVBQVcsSUFBVyxFQUFVLElBQUksS0FBWSxDQUFDLEVBQVUsQ0FBTSxDQUFVLENBQUMsQ0FBQyxFQUNoRyxHQUNJLEVBQUUsT0FBTyxDQUFDLEVBQTZCLENBQUMsR0FBTSxFQUFVLEtBQ3BELE9BQU8sT0FBTyxFQUFLLEVBQ2QsR0FBVyxLQUFLLElBQUksRUFBUSxFQUFJLElBQWEsQ0FBQyxDQUNuRCxDQUFDLENBQ0wsQ0FDSixDQUNKLEdBR08sR0FBNkIsQ0FBQyxFQUM5QixHQUE0QyxDQUFDIiwKICAiZGVidWdJZCI6ICJEQzU4ODU5MTRBQTVGNjUwNjQ3NTZlMjE2NDc1NmUyMSIsCiAgIm5hbWVzIjogW10KfQ==
